webpackJsonp([0],{"+/v9":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.servidores=function(){return this.jwtRequest.get(l.URL+"/servidores",null,{}).map(function(e){return e.json().data})},e.prototype.buscar=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL+"/lista",null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.listaPaginada=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=20),this.jwtRequest.get(l.URL+"/lista",null,{page:e,per_page:t}).map(function(e){return e.json().data})},e.prototype.auto=function(){return this.jwtRequest.get(l.URL+"/auto",null,{}).map(function(e){return e.json().data})},e}();c.URL="sync",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},"+1oD":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"+3AU":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"+3Pf":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"+U6h":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.buscar=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.lista=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=20),this.jwtRequest.get(l.URL,null,{page:e,per_page:t}).map(function(e){return e.json().data})},e.prototype.listaCompleta=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=20),this.jwtRequest.get("admision/paciente",null,{page:e,per_page:t}).map(function(e){return e.json().data})},e.prototype.buscarCompleta=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get("admision/paciente",null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.listaMunicipios=function(e){return void 0===e&&(e=null),this.jwtRequest.get("admision/municipio",e,null).map(function(e){return e.json().data})},e.prototype.listaLocalidades=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=null),this.jwtRequest.get("admision/localidad",t,{municipio_id:e}).map(function(e){return e.json().data})},e.prototype.listaMotivoEgreso=function(){return this.jwtRequest.get("admision/motivo-egreso",null,null).map(function(e){return e.json().data})},e.prototype.listaTriage=function(e){return this.jwtRequest.get("admision/triage",null,{triage_id:e}).map(function(e){return e.json().data})},e.prototype.listaGradoLesion=function(e){return this.jwtRequest.get("admision/grado-lesion",null,{grado_lesion_id:e}).map(function(e){return e.json().data})},e.prototype.listaUnidades=function(e,t){return this.jwtRequest.get("unidades-medicas",null,{lista:e,clues:t}).map(function(e){return e.json().data})},e.prototype.ver=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){return console.log(e.json().data),e.json().data})},e.prototype.editar=function(e,t){return this.jwtRequest.put("admision/paciente-egreso",e,t).map(function(e){return e.json().data})},e.prototype.ingreso=function(e,t){return this.jwtRequest.put("admision/admision",e,t).map(function(e){return e.json().data})},e.prototype.crear=function(e){return this.jwtRequest.post("admision/paciente",e).map(function(e){return e.json().data})},e}();c.URL="admision/admision",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},"+YJN":function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.usuario={}}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e}();s=i([a.i(n.Component)({selector:"app-not-found",template:a("U77z"),styles:[a("P8Eb")]}),r("design:paramtypes",[])],s)},"+ZDf":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("d5JH"),o=a("nQIc");a.d(t,"a",function(){return l});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=function(){function e(){}return e}();l=c([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule],exports:[s.a],providers:[o.a],declarations:[s.a]})],l)},"+bKV":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("rCTf"),s=(a.n(r),a("EEr4")),o=(a.n(s),a("1APj")),c=(a.n(o),a("h0qH")),l=(a.n(c),a("aV5h")),d=(a.n(l),a("q3ik")),u=(a.n(d),a("+pb+")),p=(a.n(u),a("uCY4")),m=(a.n(p),a("6Yye")),f=(a.n(m),a("bCdj")),g=a("Nqas");a.d(t,"a",function(){return b});var h=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t){this.title=e,this.apiService=t,this.cargando=!1,this.mostrarModalClues=!1,this.listaSeleccionada=null,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Claves básicas / Administrador central"),this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.apiService.buscar(t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.apiService.buscar(e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1,a.resultadosBusqueda=e.data,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var t=0;t<a.paginasTotalesBusqueda;t++)a.indicePaginasBusqueda.push(t+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,console.log("Cargando items."),this.cargando=!0,this.apiService.listaPaginada(e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1,t.lista=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Items cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.mostrarUnidadesMedicas=function(e,t){this.listaSeleccionada=e,this.mostrarModalClues=!0},e.prototype.eliminar=function(e,t){var a=this;confirm("¿Estás seguro de eliminar esta lista?, Se eliminará de todas las unidades médicas donde esté asignada.")&&(e.cargando=!0,this.apiService.eliminar(e.id).subscribe(function(n){e.cargando=!1,a.busquedaActivada?a.resultadosBusqueda.splice(t,1):a.lista.splice(t,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new g.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="item eliminado"},function(n){e.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e}();b=h([a.i(n.Component)({selector:"app-lista",template:a("qVyk"),styles:[a("nJrw")],providers:[f.a]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==f.a&&f.a)&&_||Object])],b);var y,_},"+rFH":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("ODik"),d=a("skTu");a.d(t,"a",function(){return p});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=function(){function e(){}return e}();p=u([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.a,o.a,c.a],declarations:[l.a,d.a],exports:[l.a,d.a]})],p)},"+tGU":function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("bd8H"),s=a("OuAt"),o=a("rGA5"),c=a("qbyw"),l=a("NJ09");a.d(t,"a",function(){return p});var d=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},u=[{path:"panel-control/roles",children:[{path:"",component:r.a,canActivate:[l.a],data:{key:"ICmOKw3HxhgRna4a78OP0QmKrIX0bNsp"}},{path:"nuevo",component:s.a,canActivate:[l.a],data:{key:"hA2wLCnNDQ5Z1OtvdW8lgX5D6wkM6zBE"}},{path:"editar/:id",component:o.a,canActivate:[l.a],data:{key:"9Z9XwxmNbrISFyF5sJkU3HyGUssSPfU5"}}],canActivate:[c.a]}],p=function(){function e(){}return e}();p=d([a.i(n.NgModule)({imports:[i.b.forChild(u)],exports:[i.b],providers:[]})],p)},"/Fy7":function(e,t){e.exports='<aside class="menu" style="padding: 1em;">\r\n   <!-- <p class="menu-label">Pedidos</p>-->\r\n    <ul class="menu-list">        \r\n        <li>\r\n            <a routerLink="/almacen/entregas/por-surtir" #nuevas routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-inbox"></i></span> Por surtir\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.por_surtir>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': nuevas.className == \'is-active\', \'is-danger\': nuevas.className != \'is-active\' }" >{{  stats.por_surtir }}</span>\r\n            </a>            \r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/entregas/finalizadas" routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-check-circle"></i></span> <span>Finalizadas</span>\r\n            </a>\r\n            <ul>\r\n                <li><a routerLink="/almacen/entregas/finalizadas/completas" routerLinkActive="is-active">Completas</a></li>\r\n                <li><a routerLink="/almacen/entregas/finalizadas/incompletas" routerLinkActive="is-active">Incompletas</a></li>\r\n                <li><a routerLink="/almacen/entregas/finalizadas/canceladas" routerLinkActive="is-active">Canceladas</a></li>\r\n            </ul>\r\n        </li>  \r\n    </ul>\r\n    <hr>\r\n    <ul class="menu-list"> \r\n        <li>\r\n            <a routerLink="/almacen/entregas/historial" routerLinkActive="is-active"><span class="icon"><i class="fa fa-history"></i></span> <span>Historial</span></a>\r\n        </li>        \r\n    </ul>        \r\n</aside>'},"/SnB":function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.mostrarMenuAside=!1,this.usuario={}}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e.prototype.toggleMenuAside=function(){this.mostrarMenuAside=!this.mostrarMenuAside},e}();s=i([a.i(n.Component)({selector:"articulos-catalogo-menu",template:a("xlUK"),styles:[a("UxGz")]}),r("design:paramtypes",[])],s)},"/Y+D":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"td.causes{background-color:#cdff8c}td.no-causes{background-color:#ffa838}td.material-curacion{background-color:#ffff7c}.farmacia{color:#a8c0ff}.sin-surtir{color:#ddd}.surtiendo{color:#3273dc}.surtido{color:#4aba53}.expirado{color:#e8dd14}.cancelado{color:red}.descargado{background-color:#00d1b2}.color_tag_descargas{background-color:#fff}",""]),e.exports=e.exports.toString()},"/wGT":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("NVOs"),o=a("BDfs"),c=(a.n(o),a("Uvud")),l=a("fjeY"),d=a("+ZDf"),u=a("Zit5"),p=a("1ZyV"),m=a("GRYH"),f=a("XwcF"),g=a("tPtL"),h=a("3Mrj"),v=a("3YBX"),b=a("2o5k"),y=a("V5SE"),_=a("KqV1");a.d(t,"a",function(){return j});var x=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},j=function(){function e(){}return e}();j=x([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.FormsModule,c.a,l.a,d.a,u.a,p.a,o.ChartModule],exports:[v.a,h.a],declarations:[m.a,f.a,g.a,h.a,v.a,y.a,_.a],providers:[b.a]})],j)},0:function(e,t,a){e.exports=a("x35b")},"036B":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("NVOs"),o=a("Qbdm"),c=a("52hV"),l=a("Nqas"),d=a("+U6h");a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,a,n,i,r,s){this.router=e,this.title=t,this.authService=a,this.route=n,this.location=i,this.pacienteEgresoService=r,this.fb=s,this.cargando=!1,this.cargandoUnidadesMedicas=!1,this.cargandotriage=!1,this.cargandoGradoLesion=!1,this.permiso_guardar=!0,this.verForm=!1,this.mensajeError=new l.a,this.mensajeAdvertencia=new l.a,this.mensajeExito=new l.a,this.UnidadesMedicas=[],this.Triage=[],this.GradoLesion=[]}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Ingreso Paciente / Admisión"),this.pacienteIngreso=this.fb.group({referido:["2",[s.Validators.required]],unidad_referido:["",[s.Validators.required]],urgencia_calificada:["1",[s.Validators.required]],registro_triage:["1",[s.Validators.required]],estado_triage_id:["1",[s.Validators.required]],grado_lesion_id:["1",[s.Validators.required]],fecha_ingreso:["",[s.Validators.required]],hora_ingreso:["",[s.Validators.required]]}),this.route.params.subscribe(function(t){e.id=t.id}),this.cargarDatos()},e.prototype.bloquea_formulario=function(){this.verForm=!this.verForm,this.verForm?this.pacienteIngreso.patchValue({registro_triage:2,estado_triage_id:1,grado_lesion_id:0}):this.pacienteIngreso.patchValue({registro_triage:2,estado_triage_id:1,grado_lesion_id:1})},e.prototype.valida_referido=function(e){1==e?(this.nombre_conocido=!0,this.pacienteIngreso.patchValue({unidad_referido:""})):(this.pacienteIngreso.patchValue({unidad_referido:"CSSS"}),this.nombre_conocido=!1)},e.prototype.CargarUnidadesMedicas=function(e,t){var a=this;this.cargandoUnidadesMedicas=!0,console.log(e+" - "+t),this.pacienteEgresoService.listaUnidades(e,t).subscribe(function(e){a.UnidadesMedicas=e,a.cargandoUnidadesMedicas=!1},function(e){a.cargandoUnidadesMedicas=!1})},e.prototype.CargarGradoLesion=function(e){var t=this;this.cargandoGradoLesion=!0,this.pacienteEgresoService.listaGradoLesion(e).subscribe(function(e){t.pacienteIngreso.patchValue({grado_lesion_id:e[0].id}),t.GradoLesion=e,t.cargandoGradoLesion=!1},function(e){t.cargandoGradoLesion=!1})},e.prototype.CargarLugarTriage=function(e){var t=this;this.cargandotriage=!0,this.pacienteEgresoService.listaTriage(e).subscribe(function(e){t.Triage=e,t.pacienteIngreso.patchValue({estado_triage_id:e[0].id}),t.cargandotriage=!1},function(e){t.cargandotriage=!1})},e.prototype.cargarDatos=function(){var e=this;this.cargando=!0,this.pacienteEgresoService.ver(this.id).subscribe(function(t){e.cargando=!1,e.datosCargados=!0;var a,n,i,r,s,o,c,l,d;t.ingresoactivos.length>0?(t.referido=t.ingresoactivos[0].referido,t.urgencia_calificada=t.ingresoactivos[0].urgencia_calificada,t.registro_triage=t.ingresoactivos[0].registro_triage,t.fecha_ingreso=t.ingresoactivos[0].fecha_hora_ingreso.substr(0,10),t.hora_ingreso=t.ingresoactivos[0].fecha_hora_ingreso.substr(10,6),1==t.ingresoactivos[0].referido?(t.unidad_referido=t.ingresoactivos[0].unidad_referido,e.nombre_conocido=!0):t.unidad_referido="css",a=t.ingresoactivos[0].clues,n=t.ingresoactivos[0].estado_triage_id,i=t.ingresoactivos[0].grado_lesion_id,e.pacienteIngreso.patchValue(t),r=t.id,s=t.nombre,o=t.localidad?t.localidad.nombre+" ("+t.localidad.municipio.nombre+")":"DESCONOCIDO",e.permiso_guardar=!1):(c=new Date,l=c.getHours(),d=c.getMinutes(),r=t.id,s=t.nombre,o=t.localidad?t.localidad.nombre+" ("+t.localidad.municipio.nombre+")":"DESCONOCIDO",e.pacienteIngreso.patchValue({fecha_ingreso:c.toJSON().slice(0,10),hora_ingreso:l+":"+d}),e.pacienteIngreso.patchValue({unidad_referido:"CSSS"})),e.CargarUnidadesMedicas(1,a),e.CargarLugarTriage(n),e.CargarGradoLesion(i),e.id_paciente=r,e.nombre_paciente=s,e.localidad_paciente=o},function(t){e.cargando=!1,e.mensajeError=new l.a(!0),e.mensajeError=new l.a(!0),e.mensajeError.mostrar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.enviar=function(){var e=this;this.cargando=!0,this.pacienteEgresoService.ingreso(this.id,this.pacienteIngreso.value).subscribe(function(t){e.cargando=!1,console.log("Paciente editado."),e.mensajeExito=new l.a(!0),e.mensajeExito.texto="Se han guardado los cambios.",e.mensajeExito.mostrar=!0,e.location.back()},function(t){e.cargando=!1,e.mensajeError=new l.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.regresar=function(){this.location.back()},e}();m=u([a.i(n.Component)({selector:"app-ingreso",template:a("FR06"),styles:[a("BvwC")]}),p("design:paramtypes",["function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(g=void 0!==o.b&&o.b)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object,"function"==typeof(v=void 0!==r.c&&r.c)&&v||Object,"function"==typeof(b=void 0!==i.Location&&i.Location)&&b||Object,"function"==typeof(y=void 0!==d.a&&d.a)&&y||Object,"function"==typeof(_=void 0!==s.FormBuilder&&s.FormBuilder)&&_||Object])],m);var f,g,h,v,b,y,_},"05Le":function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("4PLu"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"almacen/inventario",children:[{path:"",component:r.a}],canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},"0CNa":function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return r});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=function(){function e(){}return e.prototype.transform=function(e,t,a){return e?e.filter(function(e){return e[t]==a}):[]},e}();r=i([a.i(n.Pipe)({name:"filter"}),a.i(n.Injectable)()],r)},"0H6m":function(e,t,a){"use strict";var n=a("gdhx"),i=a("NVOs");a.d(t,"a",function(){return r});var r=(function(){function e(){}e}(),function(){function e(t){void 0===t&&(t=!1),this.lista=[],this.totalInsumos=0,this.totalMonto=0,this.totalMontoCauses=0,this.totalMontoNoCauses=0,this.totalMontoMaterialCuracion=0,this.paginacion=new n.a,this.activo=!1,this.cargando=!1,this.tieneError=function(e,t){return this.datos.get(e).hasError(t)&&this.datos.get(e).touched},this.inicializarDatos=function(e){void 0===e&&(e={});var t=e.fecha,a="";if(!e.fecha){var n=new Date,i=("0"+n.getDate()).slice(-2),r=("0"+(n.getMonth()+1)).slice(-2);t=n.getFullYear()+"-"+r+"-"+i}e.almacen_solicitante&&(a=e.almacen_solicitante),this.datos.setValue({almacen_solicitante:a,descripcion:"",observaciones:"",fecha:t})},this.obtenerDatosGuardar=function(){return{datos:this.datos.value,insumos:this.lista}},this.actualizarTotales=function(e){void 0===e&&(e=!1);var t;t=this.padre?this.padre:this,t.totalInsumos=0,t.totalMonto=0,t.totalMontoCauses=0,t.totalMontoNoCauses=0,t.totalMontoMaterialCuracion=0;var a=0,n=0,i=1;for(var r in t.lista)e&&(t.lista[r].lote=i++),t.totalInsumos+=+t.lista[r].cantidad,t.lista[r].monto&&(t.totalMonto+=t.lista[r].monto,"ME"==t.lista[r].tipo?t.lista[r].es_causes?t.totalMontoCauses+=t.lista[r].monto:t.totalMontoNoCauses+=t.lista[r].monto:"MC"==t.lista[r].tipo&&(t.totalMontoMaterialCuracion+=t.lista[r].monto,a+=t.lista[r].monto));a>0&&(n=16*a/100,t.totalMontoMaterialCuracion+=n,t.totalMonto+=n)},this.indexar=function(e){void 0===e&&(e=!0),e&&this.actualizarTotales(e),this.paginacion.totalPaginas=Math.ceil(this.lista.length/this.paginacion.resultadosPorPagina),this.paginacion.indice=[];for(var t=0;t<this.paginacion.totalPaginas;t++)this.paginacion.indice.push(t+1)},this.listar=function(e){void 0===e&&(e=1),this.paginacion.paginaActual=e;var t=(this.paginacion.paginaActual-1)*this.paginacion.resultadosPorPagina,a=t+this.paginacion.resultadosPorPagina;try{this.paginacion.lista=this.lista.slice(t,a)}catch(e){this.paginacion.lista=[]}},this.eliminarItem=function(e,t){var a=0;for(var n in this.lista){if(this.lista[n]===e){this.paginacion.lista.splice(t,1),this.lista.splice(a,1),this.indexar();var i=a+(this.paginacion.resultadosPorPagina-t)-1;if(this.lista[i]&&this.paginacion.lista.push(this.lista[i]),0==this.paginacion.lista.length&&(this.paginacion.paginaActual>1?this.listar(this.paginacion.paginaActual-1):this.listar(1)),this.padre){var r=this.padre.lista.indexOf(e),s=Math.ceil(r/this.padre.paginacion.resultadosPorPagina),o=(s-1)*this.padre.paginacion.resultadosPorPagina,c=r-o;if(this.padre.paginacion.paginaActual==s)this.padre.eliminarItem(e,c);else{var l=this.padre.paginacion.paginaActual;this.padre.listar(s),this.padre.eliminarItem(e,c),this.padre.listar(l),0==this.padre.paginacion.lista.length&&(this.padre.paginacion.paginaActual>1?this.padre.listar(this.padre.paginacion.paginaActual-1):this.padre.listar(1))}}return}a++}},t&&(this.filtro=new e,this.filtro.padre=this,this.fb=new i.FormBuilder,this.datos=this.fb.group({descripcion:["",[i.Validators.required]],fecha:["",[i.Validators.required]],almacen_solicitante:["",[i.Validators.required]],observaciones:""}),this.status="BR"),this.paginacion.resultadosPorPagina=10}return e.prototype.paginaSiguiente=function(){this.paginacion.paginaActual!=this.paginacion.totalPaginas&&this.listar(this.paginacion.paginaActual+1)},e.prototype.paginaAnterior=function(){1!=this.paginacion.paginaActual&&this.listar(this.paginacion.paginaActual-1)},e}())},"0Kqi":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"0cAy":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("Zit5"),s=a("ospG"),o=a("VPeQ");a.d(t,"a",function(){return l});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=function(){function e(){}return e}();l=c([a.i(n.NgModule)({imports:[i.CommonModule,r.a],exports:[s.a],declarations:[s.a],providers:[o.a]})],l)},"0g/f":function(e,t){e.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" >\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:2em;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-plus"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Nuevo rol\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="section">\r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded">\r\n                    <input class="input is-medium" [(ngModel)]="rol.nombre"  [ngClass]="{ \'is-danger\': errores.nombre != null}"  type="text" placeholder="Nombre" >\r\n                </p>\r\n                <p class="control">\r\n                    <a class="button is-medium is-primary " [ngClass]="{ \'is-loading\': enviando}" (click)="guardar()" >\r\n                    <span class="icon"><i class="fa fa-save"></i></span><span>Guardar</span>\r\n                    </a>\r\n                </p><p class="control">\r\n                    <a class="button is-medium is-white " [ngClass]="{ \'is-disabled\': enviando}" routerLink="/panel-control/roles">Cancelar</a>\r\n                </p>\r\n                \r\n              </div>\r\n              <p class="help is-danger" *ngIf="errores.nombre == \'required\'">Por favor especifique el nombre del rol.</p>              \r\n              <p class="help is-danger" *ngIf="errores.nombre == \'unique\'">Este nombre ya fue utilizado, por favor elija otro.</p>              \r\n              <br>\r\n              <table class="table">\r\n                <thead>\r\n                  <tr>\r\n                    <td style="width:42px; cursor:pointer;" (click)="seleccionarTodos()">\r\n                      <span class="icon" style="color:#00d1b2"><i class="fa" [ngClass]="{ \'fa-square-o\': !todosSeleccionados, \'fa-check-square\': todosSeleccionados }"></i></span>\r\n                    </td>\r\n                    <td><span style="color:red" *ngIf="errores.permisos == \'required\'"><span class="icon"><i class="fa fa-exclamation-circle"></i></span> <span>Elija un permiso:</span></span><span *ngIf="errores.permisos == null">Permiso</span></td>\r\n                    <td>Grupo</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr *ngFor="let item of permisos" (click)="item.seleccionado = !item.seleccionado" style="cursor:pointer">\r\n                    <td><span class="icon"><i class="fa" [ngClass]="{ \'fa-square-o\': !item.seleccionado, \'fa-check-square\': item.seleccionado }"></i></span></td>\r\n                    <td>{{ item.descripcion }}</td>\r\n                    <td>{{ item.grupo }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n\r\n            </section>\r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br> \r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},"0s9A":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("hRr9"),s=a("q7HC"),o=a("8gFY"),c=a("52hV"),l=a("RHrs");a.d(t,"a",function(){return u});var d=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},u=function(){function e(){}return e}();u=d([a.i(n.NgModule)({imports:[i.CommonModule,s.a,r.a,l.a],declarations:[o.a],providers:[c.a]})],u)},"0ySm":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("NVOs"),s=a("5oXY");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,a,n){this.fb=e,this.router=t,this.route=a,this._sanitizer=n,this.tieneid=!1,this.tab=2}return e.prototype.ngOnInit=function(){var e=this,t=JSON.parse(localStorage.getItem("usuario"));this.dato=this.fb.group({clues:[t.clues_activa.clues,[r.Validators.required]],jurisdiccion_id:[t.clues_activa.jurisdiccion_id],nombre:[t.clues_activa.nombre],activa:[t.clues_activa.activa],director_id:[t.clues_activa.director_id],clues_servicios:this.fb.array([])}),this.route.params.subscribe(function(t){t.clues&&(e.tieneid=!0)}),document.getElementById("catalogos").click()},e.prototype.ngAfterViewInit=function(){var e=this;document.getElementById("actualizar").click(),setTimeout(function(){document.getElementById("initMover").click();var t=e.dato.controls.clues_servicios,a=0,n="",i="";if(0!=t.value.length){for(n=t.value[a].updated_at?t.value[a].updated_at:t.value[a].created_at,i=t.value[a].usuario_id,a=0;a<t.length;)t.value[a].updated_at>n&&(n=t.value[a].updated_at,i=t.value[a].usuario_id),a+=1;e.actualizacion=n,e.actualizacion_usuario=i,e.actualizado=!0}else e.actualizacion="Sin actualización",e.actualizacion_usuario="Sin actualización"},3e3)},e.prototype.actualizarDatos=function(){var e=this.dato.controls.clues_servicios,t=0,a="",n="";if(0!=e.value.length){for(a=e.value[t].updated_at?e.value[t].updated_at:e.value[t].created_at,n=e.value[t].usuario_id,t=0;t<e.length;)e.value[t].updated_at>a&&(a=e.value[t].updated_at,n=e.value[t].usuario_id),t+=1;this.actualizacion=a,this.actualizacion_usuario=n,this.actualizado=!0}else this.actualizado=!1,this.actualizacion="Sin actualización",this.actualizacion_usuario="Sin actualización"},e}();l=o([a.i(n.Component)({selector:"almacenes-formulario",template:a("UBJ0")}),c("design:paramtypes",["function"==typeof(d=void 0!==r.FormBuilder&&r.FormBuilder)&&d||Object,"function"==typeof(u=void 0!==s.a&&s.a)&&u||Object,"function"==typeof(p=void 0!==s.c&&s.c)&&p||Object,"function"==typeof(m=void 0!==i.d&&i.d)&&m||Object])],l);var d,u,p,m},"1+bc":function(e,t){e.exports='<listar #ctrl URL="unidades-medicas" titulo="UM / Catalogo"></listar>\r\n<menu-catalogo [modulo]="\'Unidades Médicas\'" [icono]="\'assets/icono-catalogos.svg\'" [url]="\'/almacen-articulos/catalogos/unidades-medicas\'"></menu-catalogo>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n\r\n                        <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> unidades medicas\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                            <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/almacen-articulos/catalogos/unidades-medicas/nuevo">\r\n                                    <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!ctrl.cargando">\r\n                <thead>\r\n                    <tr>  \r\n                        <th>Clues</th>                       \r\n                        <th>Nombre</th>                                              \r\n                        <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">                       \r\n                        <td style="vertical-align: middle;"><a routerLink="/catalogos/unidades-medicas/editar/{{item.clues}}">{{ item. clues }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/catalogos/unidades-medicas/editar/{{item.clues}}">{{ item.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <td style="vertical-align: middle;"><a routerLink="/catalogos/unidades-medicas/editar/{{item.clues}}">{{ item.clues }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/catalogos/unidades-medicas/editar/{{item.clues}}">{{ item.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},"1UDx":function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("w5f+"),s=a("am34"),o=a("6f/P"),c=a("qbyw"),l=a("NJ09");a.d(t,"a",function(){return p});var d=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},u=[{path:"panel-control/usuarios",children:[{path:"",component:r.a,canActivate:[l.a],data:{key:"mGKikN0aJaeF2XrHwwYK3XNw0f9CSZDe"}},{path:"nuevo",component:s.a,canActivate:[l.a],data:{key:"xJqy3csU5WyOX7pmXL7VBs680uTVGxU3"}},{path:"editar/:id",component:o.a,canActivate:[l.a],data:{key:"dlV1H4gX0nqEgHauHC8BRIlwl6SGUoUt"}}],canActivate:[c.a]}],p=function(){function e(){}return e}();p=d([a.i(n.NgModule)({imports:[i.b.forChild(u)],exports:[i.b],providers:[]})],p)},"1ZyV":function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("XwcF"),s=a("GRYH"),o=a("tPtL"),c=a("V5SE"),l=a("KqV1"),d=a("qbyw"),u=a("NJ09");a.d(t,"a",function(){return f});var p=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},m=[{path:"administrador-central",redirectTo:"/administrador-central/pedidos",pathMatch:"full"},{path:"administrador-central",children:[{path:"pedidos",component:s.a,canActivate:[u.a],data:{key:"bsIbPL3qv6XevcAyrRm1GxJufDbzLOax"}},{path:"abasto",component:r.a,canActivate:[u.a],data:{key:"bwWWUufmEBRFpw9HbUJQUP8EFnagynQv"}},{path:"transferencias-recursos",component:o.a,canActivate:[u.a],data:{key:"s8kSv2Gj9DZwRvClVRmZohp92Rtvi26i"}},{path:"entregas-mes",component:c.a,canActivate:[u.a],data:{key:"fWA5oDswZ2Ra4O8YaCy6nEY8OeCOxg9C"}},{path:"cumplimiento",component:l.a,canActivate:[u.a],data:{key:"BBg7HSOEmjjOsVl48s8wSz8AxXhmBXA1"}}],canActivate:[d.a]}],f=function(){function e(){}return e}();f=p([a.i(n.NgModule)({imports:[i.b.forChild(m)],exports:[i.b]})],f)},"1smD":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("5oXY"),s=a("rCTf"),o=(a.n(s),a("EEr4")),c=(a.n(o),a("1APj")),l=(a.n(c),a("h0qH")),d=(a.n(l),a("aV5h")),u=(a.n(d),a("q3ik")),p=(a.n(u),a("+pb+")),m=(a.n(p),a("uCY4")),f=(a.n(m),a("6Yye")),g=(a.n(f),a("TKQK")),h=a("Nqas");a.d(t,"a",function(){return y});var v=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(){function e(e,t,a){this.title=e,this.route=t,this.pedidosService=a,this.cargando=!1,this.mensajeError=new h.a,this.mensajeExito=new h.a,this.titulo="Pedidos",this.icono="fa-file",this.pedidos=[],this.presupuesto={},this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new o.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=10,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return e.prototype.ngOnInit=function(){var e=this;switch(this.route.snapshot.url[0].path){case"borradores":this.status="BR",this.titulo="Borradores",this.icono="fa-pencil-square-o";break;case"en-transito":this.status="ET",this.titulo="En transito",this.icono="fa-clock-o";break;case"por-surtir":this.status="PS",this.titulo="Por surtir",this.icono="fa-truck";break;case"expirados":this.status="EX",this.titulo="Expirados",this.icono="fa-exclamation-circle";break;case"farmacia-subrogada":this.status="EF",this.titulo="Farmacia Subrogada",this.icono="fa-building";break;case"finalizados":this.status="FI",this.icono="fa-check-circle",this.route.snapshot.url.length>1?"completos"==this.route.snapshot.url[1].path?this.titulo="Finalizados (completos)":"incompletos"==this.route.snapshot.url[1].path?this.titulo="Finalizados (incompletos)":"cancelados"==this.route.snapshot.url[1].path?this.titulo="Finalizados (cancelados)":this.titulo="Finalizados":this.titulo="Finalizados";break;default:this.titulo="Pedidos jurisdiccionales",this.icono="fa-file"}this.pedidosService.presupuesto().subscribe(function(t){e.cargando=!1,e.presupuesto=t.data},function(t){e.cargando=!1,console.log(t)}),this.title.setTitle("Pedidos jurisdiccionales"),this.listar(1),this.mensajeError=new h.a,this.mensajeExito=new h.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.pedidosService.buscar(e.status,t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):s.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1;var a=t.data;for(var n in a)a[n].created_at=a[n].created_at.replace(" ","T");e.resultadosBusqueda=a,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var i=0;i<e.paginasTotalesBusqueda;i++)e.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")})},e.prototype.obtenerDireccion=function(e,t){return"BR"==t?"/almacen/pedidos-jurisdiccionales/editar/"+e:"/almacen/pedidos-jurisdiccionales/ver/"+e},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.pedidosService.buscar(this.status,e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1;var t=e.data;for(var n in t)t[n].created_at=t[n].created_at.replace(" ","T");a.resultadosBusqueda=t,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var i=0;i<a.paginasTotalesBusqueda;i++)a.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,console.log("Cargando pedidos."),this.cargando=!0,this.pedidosService.lista(this.status,e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1,t.pedidos=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Pedidos cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.eliminar=function(e,t){var a=this;e.cargando=!0,confirm("Desea eliminar el pedido?")?this.pedidosService.eliminar(e.id).subscribe(function(n){e.cargando=!1,a.pedidos.splice(t,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new h.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="Pedido eliminado"},function(n){e.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(e,t)};try{var i=n.json();401==n.status?a.mensajeError.texto="No tiene permiso para hacer esta operación.":a.mensajeError.texto=i.error}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}):e.cargando=!1},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e}();y=v([a.i(n.Component)({selector:"almacen-pedidos-lista",template:a("SCY9"),styles:[a("qtMW")],providers:[g.a]}),b("design:paramtypes",["function"==typeof(_=void 0!==i.b&&i.b)&&_||Object,"function"==typeof(x=void 0!==r.c&&r.c)&&x||Object,"function"==typeof(j=void 0!==g.a&&g.a)&&j||Object])],y);var _,x,j},"1tXu":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("NVOs"),s=a("5oXY"),o=a("kZql");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,a,n){var i=this;this.fb=e,this.router=t,this.route=a,this._sanitizer=n,this.tipo="ME",this.es_causes=1,this.actualizado=!1,this.cargando=!1,this.es_unidosis=!1,this.tieneid=!1,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.tab=1,this.autocompleListFormatter=function(e){var t='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4"> <!-- '+e.nombre+" --> <small>"+e.descripcion+'</small></p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+e.clave+") \n              ";return 1==e.es_causes&&(t+='<label class="tag is-success" ><strong>Cause </strong></label>'),0==e.es_causes&&(t+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);"><strong>No Cause </strong> </label>'),1==e.es_unidosis&&(t+='<label class="tag is-warning" ><strong>Unidosis</strong> </label>'),t+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",i._sanitizer.bypassSecurityTrustHtml(t)}}return e.prototype.ngOnInit=function(){var e=this,t=JSON.parse(localStorage.getItem("usuario"));this.dato=this.fb.group({clues:[t.clues_activa.clues],jurisdiccion_id:[t.clues_activa.jurisdiccion_id],nombre:[t.clues_activa.nombre],activa:[t.clues_activa.activa],director_id:[t.clues_activa.director_id],clues_claves:this.fb.array([])}),this.route.params.subscribe(function(t){t.clues&&(e.tieneid=!0)}),t.clues_activa&&(this.insumos_term+="&clues="+t.clues_activa.clues),t.almacen_activo&&(this.insumos_term+="&almacen="+t.almacen_activo.id);var a,n,i=this.dato.controls.clues_claves;for(a=0;a<i.length;a++)for(n=0;n<i.length;n++)i.value[a].updated_at>i.value[a].updated_at&&(this.actualizacion=i.value[a].updated_at)},e.prototype.ngAfterViewInit=function(){var e=this;document.getElementById("actualizar").click(),setTimeout(function(){var t=e.dato.controls.clues_claves,a=0,n="",i="";if(0!=t.value.length){for(n=t.value[a].updated_at?t.value[a].updated_at:t.value[a].created_at,i=t.value[a].usuario_id,a=0;a<t.length;)t.value[a].updated_at>n&&(n=t.value[a].updated_at,i=t.value[a].usuario_id),a+=1;e.actualizacion=n,e.actualizacion_usuario=i,e.actualizado=!0}else e.actualizacion="Sin actualización",e.actualizacion_usuario="Sin actualización"},4e3)},e.prototype.select_insumo_autocomplete=function(e){JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.insumo=e,this.agregarLoteIsumo(),document.getElementById("buscarInsumo").value="",this.es_unidosis=e.es_unidosis,this.cargando=!1},e.prototype.agregarLoteIsumo=function(){var e,t=this.dato.controls.clues_claves,a=!1;for(e=0;e<t.length;e++)this.insumo.clave==t.value[e].clave_insumo_medico&&(a=!0);var n;n=null==this.insumo.cantidad_x_envase?1:this.insumo.cantidad_x_envase;var i={clave_insumo_medico:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,tipo:this.insumo.tipo,codigo_barras:[""],unidad_medida:[""],cantidad_x_envase:parseInt(n)};a||t.push(this.fb.group(i))},e}();d=c([a.i(n.Component)({selector:"almacenes-formulario",template:a("DK+d"),styles:[a("484h")]}),l("design:paramtypes",["function"==typeof(u=void 0!==r.FormBuilder&&r.FormBuilder)&&u||Object,"function"==typeof(p=void 0!==s.a&&s.a)&&p||Object,"function"==typeof(m=void 0!==s.c&&s.c)&&m||Object,"function"==typeof(f=void 0!==i.d&&i.d)&&f||Object])],d);var u,p,m,f},"1vcR":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"2+It":function(e,t){e.exports='<div class="menu" style="padding: 1em; padding-bottom:0;">\r\n    <ul class="menu-list">\r\n        <li>\r\n            <a (click)="toggleMinimizado = !toggleMinimizado">\r\n                <span class="icon" ><i class="fa {{(toggleMinimizado)?\'fa-chevron-right\':\'fa-chevron-left\'}}"></i></span>\r\n            </a>\r\n        </li>    \r\n    </ul>\r\n</div>\r\n<aside class="menu" style="padding: 1em;">\r\n    <div *ngFor="let item of menuAutorizado">\r\n        <p *ngIf="!toggleMinimizado" class="menu-label">{{ item.titulo }}</p>\r\n        <ul class="menu-list">\r\n            <li *ngFor="let modulo of item.modulos">\r\n                <a routerLink="{{ modulo.url }}" routerLinkActive="is-active">\r\n                    <span class="icon" ><i class="fa {{ modulo.icono }}"></i></span><span *ngIf="!toggleMinimizado">&nbsp;&nbsp;{{ modulo.titulo }}</span>\r\n                </a>\r\n            </li>    \r\n        </ul>\r\n    </div>    \r\n</aside>'},"2IuD":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"2LPf":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("NVOs"),o=a("Qbdm"),c=a("52hV"),l=a("Nqas"),d=a("7xfG");a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,a,n,i,r,s){this.router=e,this.title=t,this.authService=a,this.route=n,this.location=i,this.pacienteService=r,this.fb=s,this.cargando=!1,this.cargandoMunicipios=!1,this.cargandoLocalidades=!1,this.verFormResponsable=!1,this.Municipios=[],this.Localidades=[],this.mensajeError=new l.a,this.mensajeAdvertencia=new l.a,this.mensajeExito=new l.a}return e.prototype.ngOnInit=function(){this.title.setTitle("Nuevo Paciente / Admisión"),this.paciente=this.fb.group({nombre:["",[s.Validators.required]],fecha_nacimiento:["",[s.Validators.required]],hora_nacimiento:["",[]],domicilio:["",[s.Validators.required]],colonia:["",[s.Validators.required]],telefono:["",[s.Validators.required]],no_expediente:["",[s.Validators.required]],no_afiliacion:["",[s.Validators.required]],municipio_id:["",[s.Validators.required]],localidad_id:["",[s.Validators.required]],sexo:["1",[s.Validators.required]],responsableconocido:["1",[s.Validators.required]],nombre_responsable:["",[s.Validators.required]],parentesco:["",[s.Validators.required]],domicilio_responsable:["",[s.Validators.required]],telefono_responsable:["",[s.Validators.required]]}),this.cargarMunicipios()},e.prototype.enviar=function(){var e=this;this.cargando=!0,this.pacienteService.crear(this.paciente.value).subscribe(function(t){e.cargando=!1,console.log("Usuario creado."),e.location.back()},function(t){e.cargando=!1,e.mensajeError=new l.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{var a=t.json();if(401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status){e.mensajeError.texto="Por favor verfique los campos marcados en rojo.";for(var n in a.error)for(var i in a.error[n]);}}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.cargarMunicipios=function(){var e=this;this.cargandoMunicipios=!0,this.pacienteService.listaMunicipios().subscribe(function(t){e.Municipios=t,e.cargandoMunicipios=!1,console.log("Municipios cargados")},function(t){e.cargandoMunicipios=!1})},e.prototype.cargarLocalidades=function(e){var t=this;this.cargandoLocalidades=!0,this.pacienteService.listaLocalidades(e).subscribe(function(e){t.Localidades=e,t.cargandoLocalidades=!1,console.log("Localidades cargados")},function(e){t.cargandoLocalidades=!1})},e.prototype.regresar=function(){this.location.back()},e.prototype.responsable=function(){this.verFormResponsable=!this.verFormResponsable,this.verFormResponsable?this.paciente.patchValue({nombre_responsable:1,parentesco:"1987-01-01",domicilio_responsable:"conocido",telefono_responsable:"conocido"}):this.paciente.patchValue({nombre_responsable:"",parentesco:"",domicilio_responsable:"",telefono_responsable:""})},e}();m=u([a.i(n.Component)({selector:"app-nuevo",template:a("cDsx"),styles:[a("lHm1")]}),p("design:paramtypes",["function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(g=void 0!==o.b&&o.b)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object,"function"==typeof(v=void 0!==r.c&&r.c)&&v||Object,"function"==typeof(b=void 0!==i.Location&&i.Location)&&b||Object,"function"==typeof(y=void 0!==d.a&&d.a)&&y||Object,"function"==typeof(_=void 0!==s.FormBuilder&&s.FormBuilder)&&_||Object])],m);var f,g,h,v,b,y,_},"2Y+A":function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("OvTu"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"configuracion/turnos",redirectTo:"configuracion/turnos",pathMatch:"full"},{path:"configuracion/turnos",children:[{path:"",component:r.a}],canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},"2gJf":function(e,t,a){"use strict";var n=a("3j3K"),i=a("rCTf"),r=(a.n(i),a("EEr4")),s=(a.n(r),a("1APj")),o=(a.n(s),a("h0qH")),c=(a.n(o),a("aV5h")),l=(a.n(c),a("q3ik")),d=(a.n(l),a("+pb+")),u=(a.n(d),a("uCY4")),p=(a.n(u),a("6Yye")),m=(a.n(p),a("kZql")),f=a("+/v9"),g=a("Nqas");a.d(t,"a",function(){return b});var h=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e){this.apiService=e,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new r.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=10,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[],this.cargando=!1,this.sincronizandoEnLinea=!1,this.subiendoConfirmacion=!1,this.mostrarLogAutoSync=!1}return e.prototype.ngOnInit=function(){var e=this;this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.apiService.buscar(t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):i.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.apiService.buscar(e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1,a.resultadosBusqueda=e.data,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var t=0;t<a.paginasTotalesBusqueda;t++)a.indicePaginasBusqueda.push(t+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,console.log("Cargando items."),this.cargando=!0,this.apiService.listaPaginada(e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1,t.lista=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Items cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e.prototype.descargarSync=function(){var e="token="+localStorage.getItem("token");window.open(m.a.API_URL+"/sync/manual/?"+e)},e.prototype.sincronizarEnLinea=function(){var e=this;confirm("¿Estás seguro que quieres sincronizar con el servidor central?")&&(this.sincronizandoEnLinea=!0,this.logAutoSync="",this.apiService.auto().subscribe(function(t){e.sincronizandoEnLinea=!1,e.listar(1),e.logAutoSync=t,e.mostrarLogAutoSync=!0,console.log(t)},function(t){e.sincronizandoEnLinea=!1,e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},e}();b=h([a.i(n.Component)({selector:"app-local",template:a("qVFN"),styles:[a("LBt1")],providers:[f.a]}),v("design:paramtypes",["function"==typeof(y=void 0!==f.a&&f.a)&&y||Object])],b);var y},"2hjq":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Q3Nn"),r=a("lgzy");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.entregasService=e,this.cambiarEntornoService=t,this.cargando=!1,this.stats={por_surtir:0,finalizados:0}}return e.prototype.ngOnInit=function(){var e=this;this.cargarStats(),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){e.cargarStats()})},e.prototype.cargarStats=function(){var e=this;this.cargando=!0,this.entregasService.stats().subscribe(function(t){e.cargando=!1,e.stats=t},function(t){e.cargando=!1,console.log(t)})},e}();c=s([a.i(n.Component)({selector:"menu-lateral",template:a("/Fy7"),styles:[a("8HPL")],providers:[i.a]}),o("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],c);var l,d},"2o5k":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.jurisdicciones=function(){return this.jwtRequest.get("jurisdicciones").map(function(e){return e.json().data})},e.prototype.proveedores=function(){return this.jwtRequest.get("proveedores").map(function(e){return e.json().data})},e.prototype.abasto=function(e){return void 0===e&&(e={}),this.jwtRequest.get("administrador-central/abasto",null,e).map(function(e){return e.json().data})},e.prototype.pedidos=function(e){return void 0===e&&(e={}),this.jwtRequest.get("administrador-central/pedidos",null,e).map(function(e){return e.json().data})},e.prototype.verArchivosPedidoProveedor=function(e){return this.jwtRequest.get("administrador-central/pedidos-archivos-proveedor/"+e,null,{}).map(function(e){return e.json().data})},e.prototype.descargarArchivosPedidoProveedor=function(e){return this.jwtRequest.get("repository-download",e,{}).map(function(e){return 0})},e.prototype.presupuesto=function(e){return this.jwtRequest.get("administrador-central/presupuesto-pedidos",null,e).map(function(e){return e.json()})},e.prototype.unidadesMedicasConPresupuesto=function(e){return void 0===e&&(e={}),this.jwtRequest.get("administrador-central/unidades-medicas-con-presupuesto",null,e).map(function(e){return e.json().data})},e.prototype.mesesPresupuestoActual=function(){return this.jwtRequest.get("administrador-central/meses-presupuesto-actual",null,null).map(function(e){return e.json().data})},e.prototype.aniosPresupuestoActual=function(){return this.jwtRequest.get("administrador-central/anios-presupuesto-actual",null,null).map(function(e){return e.json().data})},e.prototype.presupuestoUnidadMedica=function(e){return void 0===e&&(e={}),this.jwtRequest.get("administrador-central/presupuesto-unidad-medica",null,e).map(function(e){return e.json().data})},e.prototype.transferenciasLista=function(e){return void 0===e&&(e={}),this.jwtRequest.get("administrador-central/transferencias-presupuestos",null,e).map(function(e){return e.json().data})},e.prototype.transferirPresupuesto=function(e){return void 0===e&&(e={}),this.jwtRequest.post("administrador-central/transferencias-presupuestos",e).map(function(e){return e.json().data})},e.prototype.mesesAniosAnteriorFechaActual=function(){return this.jwtRequest.get("administrador-central/meses-anios-presupuesto-actual-anterior-fecha-actual",null,null).map(function(e){return e.json().data})},e.prototype.transferirSaldosAlMesActual=function(e){return void 0===e&&(e={}),this.jwtRequest.post("administrador-central/transferencias-saldos-mes-actual",e).map(function(e){return e.json().data})},e.prototype.mesesAniosPedidos=function(){return this.jwtRequest.get("administrador-central/meses-anios-pedidos",null,null).map(function(e){return e.json().data})},e.prototype.entregasPedidosStatsMesesAnios=function(e){return void 0===e&&(e={}),this.jwtRequest.get("administrador-central/entregas-pedidos-stats-mes-anio",null,e).map(function(e){return e.json().data})},e.prototype.entregasPedidosStatsDiarias=function(e){return void 0===e&&(e={}),this.jwtRequest.get("administrador-central/entregas-pedidos-stats-diarias",null,e).map(function(e){return e.json().data})},e.prototype.pedidosCluesMesAnio=function(e){return void 0===e&&(e={}),this.jwtRequest.get("administrador-central/pedidos-clues-mes-anio",null,e).map(function(e){return e.json().data})},e.prototype.pedidosEntregasCluesMesAnio=function(e){return void 0===e&&(e={}),this.jwtRequest.get("administrador-central/pedidos-recepciones-clues-mes-anio",null,e).map(function(e){return e.json().data})},e.prototype.cumplimientoStatsGlobales=function(){return this.jwtRequest.get("administrador-central/cumplimiento-stats-globales",null,null).map(function(e){return e.json().data})},e.prototype.cumplimientoStatsProveedor=function(e){return this.jwtRequest.get("administrador-central/cumplimiento-stats-proveedor",e,null).map(function(e){return e.json().data})},e.prototype.verRecepciones=function(e){return this.jwtRequest.get("administrador-central/pedidos-recepcion",e,null).map(function(e){return e.json().data})},e.prototype.pedidoBorrador=function(e){return this.jwtRequest.get("administrador-central/pedidos-borrador",e,null).map(function(e){return e.json().data})},e.prototype.recepcionBorrador=function(e,t){return this.jwtRequest.get("administrador-central/recepcion-borrador",e,{type:t}).map(function(e){return e.json().data})},e}();c=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(l=void 0!==i.Http&&i.Http)&&l||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],c);var l,d},"2qAC":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("5oXY"),s=a("1APj"),o=(a.n(s),a("h0qH")),c=(a.n(o),a("aV5h")),l=(a.n(c),a("q3ik")),d=(a.n(l),a("+pb+")),u=(a.n(d),a("uCY4")),p=(a.n(u),a("6Yye")),m=(a.n(p),a("NAeX")),f=a("Q3Nn"),g=a("ve71"),h=a("0H6m"),v=a("Nqas");a.d(t,"a",function(){return _});var b=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,a,n,i,r){this.title=e,this.route=t,this.router=a,this.entregasService=n,this.pedidosService=i,this.stockService=r,this.cargando=!1,this.cargandoStock=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.lotesSurtidos=[],this.listaStock=[],this.claveInsumoSeleccionado=null,this.claveNoSolicitada=!1,this.itemSeleccionado=null}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Ver entrega / Farmacia"),this.route.params.subscribe(function(t){e.id=t.id}),this.route.params.subscribe(function(t){e.id=t.id}),this.cargando=!0,this.entregasService.ver(this.id).subscribe(function(t){e.cargando=!1,e.pedido=new h.a(!0),e.pedido.paginacion.resultadosPorPagina=10,e.pedido.filtro.paginacion.resultadosPorPagina=10,console.log(t);for(var a in t.movimiento_pedido.pedido.insumos){var n=t.movimiento_pedido.pedido.insumos[a],i=n.insumos_con_descripcion;if(null==i.listaStockAsignado&&(i.listaStockAsignado=[]),null!=i){i.cantidad=+n.cantidad_solicitada;var r=0;for(var s in t.movimiento_insumos)t.movimiento_insumos[s].stock.clave_insumo_medico==i.clave&&(i.listaStockAsignado.push({codigo_barras:t.movimiento_insumos[s].stock.codigo_barras,marca:t.movimiento_insumos[s].stock.marca,lote:t.movimiento_insumos[s].stock.lote,fecha_caducidad:t.movimiento_insumos[s].stock.fecha_caducidad,cantidad:Math.abs(t.movimiento_insumos[s].cantidad)}),r+=Math.abs(t.movimiento_insumos[s].cantidad));i.totalStockAsignado=r,e.pedido.lista.push(i)}}console.log(e.pedido.lista),e.pedido.indexar(),e.pedido.listar(1)},function(t){e.cargando=!1,e.mensajeError=new v.a(!0),e.mensajeError=new v.a(!0),e.mensajeError.mostrar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.seleccionarItem=function(e){this.itemSeleccionado=e},e.prototype.buscar=function(e,t,a,n){var i=t.value;if(27==e.keyCode)return e.preventDefault(),e.stopPropagation(),t.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(e.preventDefault(),e.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(e){var t=n[e].input.value;if(""==t)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[e].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(e){}return i.includes(t.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(e,t){return e.length-t.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},e}();b([a.i(n.ViewChildren)("searchBoxStock"),y("design:type",Object)],_.prototype,"searchBoxStockViewChildren",void 0),_=b([a.i(n.Component)({selector:"app-ver",template:a("4pD7"),styles:[a("mvg0")],providers:[g.a,f.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==i.b&&i.b)&&x||Object,"function"==typeof(j=void 0!==r.c&&r.c)&&j||Object,"function"==typeof(E=void 0!==r.a&&r.a)&&E||Object,"function"==typeof(I=void 0!==f.a&&f.a)&&I||Object,"function"==typeof(P=void 0!==m.a&&m.a)&&P||Object,"function"==typeof(C=void 0!==g.a&&g.a)&&C||Object])],_);var x,j,E,I,P,C},"3+t1":function(e,t){e.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n        <br>\r\n        <nav class="level">\r\n            <div class="level-left">\r\n                <div class="level-item">\r\n                    <h1 class="title">\r\n                        <span class="icon is-medium"><i class="fa fa-bar-chart"></i></span> Entregas por mes\r\n                    </h1>\r\n                </div>\r\n            </div>\r\n            <div class="level-right">\r\n                <div class="level-item">\r\n                     <h1 class="subtitle">Mes: </h1>\r\n                </div>\r\n                <div class="level-item">\r\n                    <p class="control "  [ngClass]="{\'is-loading\': cargandoFechas, \'is-disabled\': cargandoFechas}">\r\n                        <span class="select is-fullwidth">\r\n                            <select  (change)="generarStats()"  [(ngModel)]="fecha">\r\n                                <option value="-1" *ngIf="cargandoFechas">Cargando...</option>\r\n                                <option value="-1" *ngIf="listaMesesAnios.length > 0">No hay meses</option>\r\n                                <option *ngFor="let item of listaMesesAnios" [value]="item.fecha">{{ item.mes_nombre }}/{{ item.anio }}</option>\r\n                            </select>\r\n                        </span>\r\n                    </p> \r\n                </div>\r\n            </div>\r\n\r\n        </nav>\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoEstadisticasGlobales">\r\n            <div class="notification is-white">\r\n                <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando estadisticas globales...</span>\r\n            </div>\r\n        </div>\r\n        <div class="columns is-multiline "  *ngIf="!cargandoEstadisticasGlobales">\r\n            <div class="column is-4" *ngFor="let item of estadisticasGlobales">\r\n                <div class="notification is-white">\r\n                    <h1 class="title" style="font-size:1.2em;  margin-bottom:0.2em;color:#00d1b2"><strong>${{ item.total_monto_solicitado | number:\'1.2-2\' }}</strong></h1>\r\n                    <h1 class="title" style="font-size:0.8em; margin-bottom:0.2em;">{{ item.proveedor }}</h1>\r\n                    <hr style="margin: 0.2em 0">\r\n                    <nav class="level"><div class="level-left">Entregado</div><div class="level-right"><b>{{ item.porcentaje_entregado | number:\'1.2-2\' }}%</b></div></nav>\r\n                   \r\n                   \r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="columns is-multiline"  *ngIf="!cargandoEstadisticasGlobales">\r\n            <div class="column is-12" *ngFor="let item of listaEntregasEstadisticaDiaria; let  i = index">\r\n                <div style="display:block; background:white; border-radius:0.2em; padding: 0.5em 0; min-height:471px" *ngIf="!item.cargando && item.options">\r\n                    <nav class="level" style="margin:1em;">\r\n                        <div class="level-left">\r\n                            <p><b>ENTREGAS {{ item.proveedor }}</b> <small style="color:gray;">Estadística diaria</small></p>\r\n                        </div>\r\n                        <div class="level-right">\r\n                            <div>\r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'claves\' }" (click)="item.tipoDatos = \'claves\'; renderGrafica(i)">Claves</span> \r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'insumos\' }" (click)="item.tipoDatos = \'insumos\'; renderGrafica(i)">Insumos</span> \r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'monto\' }" (click)="item.tipoDatos = \'monto\'; renderGrafica(i)">$ Monto</span>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                    </nav>\r\n                    <hr style="margin:0">\r\n                    <chart *ngIf="mostrarGraficas" [options]="item.options" style="display:block;"></chart>\r\n                </div>\r\n\r\n                <div class="is-fullwidth has-text-centered"  *ngIf="item.cargando ">\r\n                    <div class="notification is-white">\r\n                        <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando estadísticas diarias de: <b>{{item.proveedor}}</b>...</span>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div class="columns is-multiline"  *ngIf="!cargandoEstadisticasGlobales">\r\n            <div class="column is-12" *ngFor="let item of listaPedidosClues; let  i = index">\r\n                <div style="display:block; background:white; border-radius:0.2em; padding: 0.5em 0;" *ngIf="!item.cargando">\r\n                    <nav class="level" style="margin:1em;">\r\n                        <div class="level-left">\r\n                            <p><b>ENTREGAS DEL MES DE {{ item.proveedor }}</b> <small style="color:gray;">Expresado en piezas</small></p>\r\n                        </div>\r\n                    </nav>\r\n                    <hr style="margin:0">\r\n                    <table class="table" style="font-size:0.8em;">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>NUM.</th>\r\n                                <th>UNIDAD MÉDICA</th>\r\n                                <th colspan="2">CAUSES</th>\r\n                                <th colspan="2">NO CAUSES</th>\r\n                                <th colspan="2">MATERIAL DE CURACIÓN</th>\r\n                                <th>PEDIDOS</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor="let um of item.data; let j = index">\r\n                                <td>{{ j + 1 }}</td>\r\n                                <td><a style="color:#3273dc !important; font-weight:bold;" (click)="generarExcel(um.clues,item.proveedor_id)">{{ um.unidad_medica }}</a></td>\r\n                                <td *ngIf="um.causes_cantidad_solicitada > 0">{{ um.causes_cantidad_recibida | number: \'1.0-0\' }}/{{ um.causes_cantidad_solicitada | number: \'1.0-0\' }}</td>                                \r\n                                <th *ngIf="um.causes_cantidad_solicitada > 0">{{ parseNaN((um.causes_cantidad_recibida * 100 / um.causes_cantidad_solicitada)) | number: \'1.2-2\' }}%</th>\r\n                                <td colspan="2" *ngIf="um.causes_cantidad_solicitada == 0"></td>\r\n\r\n                                <td *ngIf="um.no_causes_cantidad_solicitada > 0">{{ um.no_causes_cantidad_recibida | number: \'1.0-0\' }}/{{ um.no_causes_cantidad_solicitada | number: \'1.0-0\' }}</td>\r\n                                <th *ngIf="um.no_causes_cantidad_solicitada > 0">{{ parseNaN((um.no_causes_cantidad_recibida * 100 / um.no_causes_cantidad_solicitada)) | number: \'1.2-2\' }}%</th>\r\n                                <td colspan="2" *ngIf="um.no_causes_cantidad_solicitada == 0"></td>\r\n\r\n                                <td *ngIf="um.material_curacion_cantidad_solicitada > 0">{{ um.material_curacion_cantidad_recibida | number: \'1.0-0\' }}/{{ um.material_curacion_cantidad_solicitada | number: \'1.0-0\' }}</td>\r\n                                <th *ngIf="um.material_curacion_cantidad_solicitada > 0">{{ parseNaN((um.material_curacion_cantidad_recibida * 100 / um.material_curacion_cantidad_solicitada)) | number: \'1.2-2\' }}%</th>\r\n                                <td colspan="2" *ngIf="um.material_curacion_cantidad_solicitada == 0"></td>\r\n                                <td><a class="button is-info is-outlined is-small" (click)="verDialogoPedidos(item.proveedor_id,um)">{{ um.total_pedidos }} Pedido(s)</a></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                <div class="is-fullwidth has-text-centered"  *ngIf="item.cargando ">\r\n                    <div class="notification is-white">\r\n                        <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando entregas del mes de: <b>{{item.proveedor}}</b>...</span>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarDialogoPedidos}">\r\n  <div class="modal-background" (click)="cerrarDialogoPedidos()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-file"></i></span> {{tituloDialogoPedidos}} \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogoPedidos()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoPedidosUnidadMedica">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando repositorio...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <div class="columns" *ngIf="!cargandoPedidosUnidadMedica">\r\n          <table class="table" *ngIf="!cargandoPedidosUnidadMedica" style="min-width:100%; font-size:0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan="3" style="text-align:center;">Datos del Pedido</th>\r\n                        <th colspan="2" style="text-align:center;">Claves</th>\r\n                        <th colspan="2" style="text-align:center;">Insumos</th>\r\n                        <th colspan="2" style="text-align:center;">Montos</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th style="text-align:center;">Folio</th>\r\n                        <th style="text-align:center;">Nombre del Pedido</th>\r\n                        <th style="text-align:center;">Fecha</th>\r\n                        <th style="text-align:center;">Surtidas/Solicitadas</th>\r\n                        <th style="text-align:center;">% Acu</th>\r\n                        <th style="text-align:center;">Surtidos/Solicitados</th>\r\n                        <th style="text-align:center;">% Acu</th>\r\n                        <th style="text-align:center;">Surtido/Solicitado</th>\r\n                        <th style="text-align:center;">% Acu</th>\r\n                        <th></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngFor="let pedido of pedidosUnidadMedica">\r\n                    <tr>\r\n                        <td>{{pedido.folio}}</td>\r\n                        <td>{{pedido.nombre_pedido}}</td>\r\n                        <td style="text-align:center;">{{pedido.fecha}}</td>\r\n                        <td style="text-align:center;">{{pedido.total_claves_recibidas | number: \'1.0-0\'}} / {{pedido.total_claves_solicitadas | number: \'1.0-0\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((pedido.total_claves_recibidas * 100 /pedido.total_claves_solicitadas)) | number: \'1.2-2\'}}%</td>\r\n                        <td style="text-align:center;">{{pedido.total_cantidad_recibida | number: \'1.0-0\'}} / {{pedido.total_cantidad_solicitada | number: \'1.0-0\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((pedido.total_cantidad_recibida * 100 /pedido.total_cantidad_solicitada)) | number: \'1.2-2\'}}%</td>\r\n                        <td style="text-align:center;">$ {{pedido.total_monto_recibido | number: \'1.2-2\'}} / $ {{pedido.total_monto_solicitado | number: \'1.2-2\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((pedido.total_monto_recibido * 100 /pedido.total_monto_solicitado)) | number: \'1.2-2\'}}%</td>\r\n                        <td style="text-align:center;">\r\n                            <span *ngIf="pedido.tipo_pedido_id == \'PFS\' && pedido.entregas.length == 0">En Farmacia</span>\r\n                            <span *ngIf="pedido.tipo_pedido_id != \'PFS\' && pedido.entregas.length == 0">Sin entregas</span>\r\n                            <span *ngIf="pedido.entregas.length > 0">{{pedido.entregas.length}} entrega(s)</span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngFor="let entrega of pedido.entregas" class="lista-entregas">\r\n                        <td style="text-align:right;" colspan="2"> Recepción</td>\r\n                        <td style="text-align:center;">{{entrega.fecha}}</td>\r\n                        <td style="text-align:center;">{{entrega.total_claves | number: \'1.0-0\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((entrega.acumulado_claves * 100 /pedido.total_claves_solicitadas)) | number: \'1.2-2\'}}%*</td>\r\n                        <td style="text-align:center;">{{entrega.total_cantidad | number: \'1.0-0\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((entrega.acumulado_cantidad * 100 /pedido.total_cantidad_solicitada)) | number: \'1.2-2\'}}%*</td>\r\n                        <td style="text-align:center;">$ {{entrega.total_monto | number: \'1.2-2\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((entrega.acumulado_monto * 100 /pedido.total_monto_solicitado)) | number: \'1.2-2\'}}%*</td>\r\n                        <td></td>\r\n                    </tr>\r\n                    <tr *ngIf="pedido.entregas.length > 0"><td colspan="10" style="text-align:right"></td></tr>\r\n                </tbody>\r\n                <tbody>\r\n                    <tr><td colspan="10" style="text-align:right">*porcentaje acumulado</td></tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},"30gs":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.buscar=function(e,t,a,n){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(n,null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.lista=function(e,t,a){return void 0===e&&(e=1),void 0===t&&(t=20),e>0?this.jwtRequest.get(a,null,{page:e,per_page:t}).map(function(e){return e.json().data}):this.jwtRequest.get(a,null).map(function(e){return e.json().data})},e.prototype.ver=function(e,t){return this.jwtRequest.get(t,e,{}).map(function(e){return e.json().data})},e.prototype.crear=function(e,t){return this.jwtRequest.post(t,e).map(function(e){return e.json().data})},e.prototype.editar=function(e,t,a){return this.jwtRequest.put(a,e,t).map(function(e){return e.json().data})},e.prototype.eliminar=function(e,t){return this.jwtRequest.delete(t,e).map(function(e){return e.json().data})},e}();c=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(l=void 0!==i.Http&&i.Http)&&l||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],c);var l,d},"3DCO":function(e,t){e.exports='<div class="modal is-active" >\r\n  <div class="modal-background" (click)="cerrar()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n   \r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      \r\n                    \r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-list"></i></span> Distribución de cantidades\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrar()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <table class="table is-unselectable" *ngIf="!cargando && !guardando" style="font-size: 0.8em; margin:0px !important">\r\n        <thead>\r\n            <tr  >\r\n                <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                <th class="is-hidden-mobile" style="width:118px;">Clave</th>\r\n                <th class="is-hidden-tablet">Clave o Genérico</th>  \r\n                <th style="vertical-align: middle;" class="is-hidden-mobile " >Descripcion</th>                  \r\n                <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                 <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Precio">Precio</abbr></th>\r\n                <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                <th  style="width:21px !important;"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n\r\n            <tr>\r\n                <td class="has-text-centered">{{ insumo.lote }}</td>\r\n                <td class="has-text-centered is-hidden-mobile">{{ insumo.clave }}</td>     \r\n                <td>\r\n                    <small class="is-hidden-tablet">{{ insumo.clave }} <br></small>\r\n                    <div style="line-height:1em;">\r\n                    <small>{{ insumo.descripcion }}</small>\r\n                    </div>\r\n                    <div style="padding: 0.5em 0 0.5em 0; ">\r\n                    <span *ngIf="(insumo.es_causes && insumo.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': insumo == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                    <span *ngIf="(!insumo.es_causes && insumo.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                    <span *ngIf="insumo.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                    <span *ngIf="insumo.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': insumo == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                    <span *ngIf="(insumo.tipo == \'ME\' && insumo.informacion)">\r\n                        <span *ngIf="insumo.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                        <span *ngIf="insumo.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                    </span>\r\n                    </div>\r\n                </td>                \r\n                <td style="width:100px !important;text-align:center;">{{ insumo.cantidad }}</td>\r\n                <td style="width:78px !important; text-align:center;">$<b><abbr>{{insumo.precio | number:\'1.2-2\'}}</abbr></b></td>\r\n                <td style="width:78px !important; text-align:center;">$<b><abbr>{{insumo.monto | number:\'1.2-2\'}}</abbr></b></td>\r\n            </tr>      \r\n        </tbody>\r\n      </table>\r\n      <hr style="margin:0px !important">\r\n      <table class="table" style="font-size: 0.8em;">\r\n        <thead>\r\n          <tr>\r\n            <th style="width:110px !important;">Clues ({{ insumo.lista_clues.length }})</th>\r\n            <th>Nombre</th>\r\n            <th style="width:90px !important;text-align:center">Cantidad</th>              \r\n            <th style="width:50px; text-align:right">Monto</th>  \r\n            <th  *ngIf="!lectura"></th> \r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor="let item of insumo.lista_clues; let i = index">\r\n            <td>{{ item.clues}}</td>\r\n            <td>{{ item.nombre}}</td>\r\n            <td style="width:100px !important;"  *ngIf="!lectura">\r\n                <p class="control is-expanded">\r\n                <input class="input is-small has-text-centered"  type="number" placeholder="Cant" (keyup)="actualizarTotales()" (mouseup)="actualizarTotales()" [(ngModel)]="item.cantidad">\r\n                </p>\r\n            </td>\r\n\r\n            <td style="width:100px !important; text-align:center;"  *ngIf="lectura">{{ item.cantidad }} </td>\r\n            <td style="text-align:right">$<b><abbr>{{insumo.precio * item.cantidad | number:\'1.2-2\'}}</abbr></b></td>\r\n            <td style="width:32px !important;" *ngIf="!lectura">\r\n                <a (click)="eliminarInsumo(item,i)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n            \r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-radius:0 0 0.8em 0.8em " ></footer>\r\n  </div>\r\n</div>\r\n'},"3Mrj":function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.mostrarMenuLateral=!1,this.usuario={}}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e.prototype.toggleMenuLateral=function(){this.mostrarMenuLateral=!this.mostrarMenuLateral},e}();s=i([a.i(n.Component)({selector:"administrador-central-menu",template:a("CUYW"),styles:[a("K77/")]}),r("design:paramtypes",[])],s)},"3WqU":function(e,t){e.exports='<formulario #ctrl URL="movimientos" titulo="Entrada  de almacén" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Entrada  de almacén\'" [icono]="\'assets/icono-entradas.svg\'" [url]="\'/almacen/entradas-estandar\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()">\r\n    <div class="contenedor columns " style="height:100%">\r\n        <div class="column is-one-third" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <h1 *ngIf="!tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> {{ctrl.moduloTitulo}}\r\n                    </h1>\r\n                    <h1 *ngIf="tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> Folio {{ctrl.id}}\r\n                    </h1>\r\n\r\n\r\n                </section>\r\n                \r\n                <div style="padding: 1em;">\r\n                    <nav class="nav">\r\n                        <div class="nav-right">\r\n                            <div class="nav-item">\r\n                                <div class="field is-grouped">\r\n                                    <p class="control" *ngIf="!tieneid" style="float:left">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                                    </p>\r\n                                    <p class="control" style="float:left">\r\n                                        <a *ngIf="tieneid" class="button is-primary is-inverted" (click)="imprimir()">\r\n                                            <span class="icon"><i class="fa fa-print"></i></span>\r\n                                        </a>\r\n                                        <a class="button" (click)="ctrl.regresar()">\r\n                                            Regresar\r\n                                        </a>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n\r\n                    <h3 class="title">\r\n                        <i class="fa fa-file"></i>\r\n                         Datos del movimiento\r\n                    </h3>\r\n                    <div >\r\n                        <div class="field">\r\n                            <label class="label">Fecha del movimiento:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n\r\n                                <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_movimiento\' formControlName="fecha_movimiento" ngui-datetime-picker\r\n                                    [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-danger\': ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched}"\r\n                                    placeholder="YYYY-MM-DD" />\r\n\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Observaciones:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched}"\r\n                                    placeholder="Observaciones" formControlName="observaciones"></textarea>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="control" *ngIf="mostrarCancelado">\r\n                            <!-- *ngIf -->\r\n                            <div class="field">\r\n                                <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                    <input type="checkbox" id="cancelado" class="styled" [checked]="ctrl.dato.get(\'cancelado\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'cancelado\').patchValue(ctrl.dato.get(\'cancelado\').value == \'1\' ? \'0\' : \'1\')">\r\n                                    <label for="cancelado">  Cancelado\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="field">\r\n                                <label class="label">Observaciones de cancelación:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched}"\r\n                                        placeholder="Observaciones de cancelacion" formControlName="observaciones_cancelacion"></textarea>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                   <!-- <hr id="catalogos" (click)="ctrl.cargarCatalogo(\'servicios\', \'servicios\'); "> -->\r\n\r\n                    <div >\r\n                        <nav class="panel" formGroupName="movimiento_metadato">\r\n\r\n                            <div class="field">\r\n                                <label class="label">Persona que recibe:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched}"\r\n                                        placeholder="Persona que recibe" formControlName="persona_recibe">\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </nav>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- apartado de insumos -->\r\n        <div class="column" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <div class="hero-body">\r\n                        <a class="button  is-primary" style="position:absolute; top:5em; right:3em;" (click)="ctrl.cargarDatos();  "><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                        <div class="container is-fluid">\r\n                            <h1 class="title">\r\n                                <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                                <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Insumos\r\n                            </h1>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                    <br>\r\n                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                </div>\r\n                <section class="section">\r\n\r\n                    <div class="field has-addons has-addons-centered" *ngIf="!tieneid">\r\n\r\n                        <p class="control">\r\n                            <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" id="buscarInsumo" value-property-name="clave"\r\n                                display-property-name="nombre" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                                (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                                type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n\r\n                        </p>\r\n\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div formArrayName="insumos">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos.controls; let i=index" [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(230, 230, 232, 0.44)\' : \'\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <a *ngIf="!tieneid" class="is-danger" title="Quitar este elemento de la lista" style="float:right" (click)="ctrl.quitar_form_array(ctrl.dato.controls.insumos,i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                        <p>\r\n                                            <strong>\r\n                                                <span style="color:cornflowerblue">\r\n                                                    Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }} \r\n                                                </span>\r\n                                                Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.nombre.value}}\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 1"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 0"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value == 1"><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                    </div>\r\n                                   <section >\r\n                                        <table *ngIf="tieneid" class="table is-narrow is-bordered is-striped">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Lote</th>\r\n                                                    <th>Caducidad</th>\r\n                                                    <th>Codigo de barras</th>\r\n                                                    <th *ngIf="!tieneid">Existencia</th>\r\n                                                    <th>Cantidad</th>\r\n                                                    <th *ngIf="!tieneid"></th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody formArrayName="lotes">\r\n                                                <tr *ngFor="let val of ctrl.dato.controls.insumos.controls[i].controls.lotes.controls;  let i2 = index;">\r\n                                                    <td>{{val.value.lote}}</td>\r\n                                                    <td>{{val.value.fecha_caducidad}}</td>\r\n                                                    <td>{{val.value.codigo_barras}}</td>\r\n                                                    <td *ngIf="!tieneid">{{val.value.existencia}}</td>\r\n                                                    <td [formGroupName]="i2">\r\n                                                        {{val.value.cantidad}}\r\n                                                    </td>\r\n                                                    <td *ngIf="!tieneid">\r\n                                                        <a class="is-danger" title="Quitar este lote" (click)="quitar_lote_insumo(i, val.value, i2)">\r\n                                                            <span class="icon">\r\n                                                                <i class="fa fa-trash-o"></i>\r\n                                                            </span>\r\n                                                        </a>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </section>\r\n                                    <div *ngIf="!tieneid"  class="level-left">\r\n                                        <div class="columns is-flex-desktop" style="width: 100%">\r\n                                            <div class="column is-3">\r\n                                                <p class="control is-expanded">\r\n                                                <label class="label">Lote:</label>\r\n                                                    <input type="text" class="input" formControlName="lote" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.lote.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.lote.touched}">\r\n                                                </p>\r\n                                            </div>                       \r\n                                            <div class="column is-4">\r\n                                                <p class="control is-expanded">\r\n                                                    <label class="label">Caducidad:</label>\r\n                                                    <input type="date" class="input" formControlName="fecha_caducidad" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.fecha_caducidad.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.fecha_caducidad.touched}">\r\n                                                </p>\r\n                                            </div>                          \r\n                                            <div class="column is-3">\r\n                                                <p class="control is-expanded">\r\n                                                    <label class="label">Codigo de barras:</label>\r\n                                                    <input type="text" class="input" formControlName="codigo_barras">\r\n                                                </p>\r\n                                            </div>    \r\n                                            <div class="column is-2">                                                \r\n                                                <p class="control is-expanded">\r\n                                                    <label class="label">Cantidad:</label>\r\n                                                    <input type="number" class="input" formControlName="cantidad" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad.touched}">\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n'},"3XKf":function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.mostrar=!1,this.itemsProtegidos=[{title:"Almacén",routerLink:"/almacen",icono:"assets/hub-farmacia.svg",permisos:["z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk","r6REUnVWlsQ00zVYXakLUxdKtGArcenY","iSxK0TpoYpnzf8KIQTWOq9Web7WnSKhz","GPSDLmXckXcdfdj7lD4rdacwMivsTp9g","qQvNeb1UFPOfVMKQnNkvxyqjCIUgFuEG","a1OMZVn7dveOf5aUK8V0VsvvSCxz8EMw"]},{title:"Almacén artículos",routerLink:"/almacen-articulos",icono:"assets/hub-almacen-articulos.svg",permisos:["cuSmlV9lvABXzfjtLbzEe0VbI47Dh6Cv"]},{title:"Laboratorio",routerLink:"/laboratorio",icono:"assets/hub-laboratorio.svg",permisos:[]},{title:"Equipamiento",routerLink:"/equipamiento",icono:"assets/hub-equipamiento.svg",permisos:[]},{title:"Farmacia Subrrogada",routerLink:"/farmacia-subrrogada",icono:"assets/hub-farmacia-sub.svg",permisos:["RZsvMjtPtpLWC8afsAFZsNnD9iXtiZC3"]},{title:"Administrador central",routerLink:"/administrador-central",icono:"assets/hub-administrador-central.svg",permisos:["bsIbPL3qv6XevcAyrRm1GxJufDbzLOax","bwWWUufmEBRFpw9HbUJQUP8EFnagynQv","s8kSv2Gj9DZwRvClVRmZohp92Rtvi26i","fWA5oDswZ2Ra4O8YaCy6nEY8OeCOxg9C","BBg7HSOEmjjOsVl48s8wSz8AxXhmBXA1"]},{title:"Administrador proveedores",routerLink:"/administrador-proveedores",icono:"assets/hub-administrador-proveedores.svg",permisos:["MrL06vIO12iNhchP14h57Puvg71eUmYb"]},{title:"Panel de control",routerLink:"/panel-control",icono:"assets/hub-panel-control.svg",permisos:["mGKikN0aJaeF2XrHwwYK3XNw0f9CSZDe","ICmOKw3HxhgRna4a78OP0QmKrIX0bNsp","DYwQAxJbpHWw07zT09scEogUeFKFdGSu"]},{title:"Configuración",routerLink:"/configuracion",icono:"assets/hub-configuracion.svg",permisos:["zRTSAl0H8YNFMWcn00yeeJPigztCbSdC","9dKCEyujSdLQF2CbpjXiWKeap0NlJCzw","Ki9kBghgqYsY17kqL620GWYl0bpeU6TB","BnB3LhrDbKNBrbQaeB2BPXKGrLEYrEw7"]},{title:"Pacientes",routerLink:"/paciente",icono:"assets/avatar-enfermero.svg",permisos:["PpXKhxdG8dGheNKm1rRSCT4EXZYyhRMm"]}],this.hubAutorizado=[{title:"Dashboard",routerLink:"/dashboard",icono:"assets/hub-dashboard.svg"}]}return e.prototype.ngOnInit=function(){var e=JSON.parse(localStorage.getItem("usuario")),t=e.permisos.split("|");if(t.length>0)for(var a in this.itemsProtegidos)e:for(var n in this.itemsProtegidos[a].permisos)for(var i in t)if(t[i]==this.itemsProtegidos[a].permisos[n]){this.hubAutorizado.push(this.itemsProtegidos[a]);break e}},e.prototype.toggle=function(){this.mostrar=!this.mostrar},e}();s=i([a.i(n.Component)({selector:"app-hub",template:a("N/oC"),styles:[a("rOUf")]}),r("design:paramtypes",[])],s)},"3YBX":function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.usuario={},this.menu=[],this.menuAutorizado=[],this.toggleMinimizado=!1}return e.prototype.ngOnInit=function(){localStorage.getItem("adminCentralMenuLateralMinimizado")?this.toggleMinimizado="true"==localStorage.getItem("adminCentralMenuLateralMinimizado"):localStorage.setItem("adminCentralMenuLateralMinimizado",this.toggleMinimizado+""),this.menu=[{titulo:"Reportes",modulos:[{permiso:"bsIbPL3qv6XevcAyrRm1GxJufDbzLOax",icono:"fa-file-text",titulo:"Pedidos",url:"/administrador-central/pedidos"},{permiso:"bwWWUufmEBRFpw9HbUJQUP8EFnagynQv",icono:"fa-line-chart",titulo:"Abasto",url:"/administrador-central/abasto"},{permiso:"fWA5oDswZ2Ra4O8YaCy6nEY8OeCOxg9C",icono:"fa-bar-chart",titulo:"Entregas por mes",url:"/administrador-central/entregas-mes"},{permiso:"BBg7HSOEmjjOsVl48s8wSz8AxXhmBXA1",icono:"fa-thumbs-o-up",titulo:"Cumplimiento",url:"/administrador-central/cumplimiento"}]},{titulo:"Operaciones",modulos:[{permiso:"s8kSv2Gj9DZwRvClVRmZohp92Rtvi26i",icono:"fa-exchange",titulo:"Transferencias de recursos",url:"/administrador-central/transferencias-recursos"}]},{titulo:"Catálogos",modulos:[{permiso:"r1RX6Yq7fc4CRRI2OJXIPxeBLW3lFP59",icono:"fa-check-square",titulo:"Claves básicas",url:"/administrador-central/claves-basicas"}]}],this.menuAutorizado=[];var e=JSON.parse(localStorage.getItem("usuario")),t=e.permisos.split("|");if(t.length>0)for(var a in this.menu)for(var n in this.menu[a].modulos)e:for(var i in t)if(t[i]==this.menu[a].modulos[n].permiso){var r=this.initMenuAutorizadoPorItem(this.menu[a].titulo);r.modulos.push(this.menu[a].modulos[n]);break e}},e.prototype.ngOnDestroy=function(){localStorage.setItem("adminCentralMenuLateralMinimizado",this.toggleMinimizado+"")},e.prototype.initMenuAutorizadoPorItem=function(e){for(var t in this.menuAutorizado)if(e==this.menuAutorizado[t].titulo)return this.menuAutorizado[t];return this.menuAutorizado.push({titulo:e,modulos:[]}),this.menuAutorizado[this.menuAutorizado.length-1]},e}();s=i([a.i(n.Component)({selector:"administrador-central-menu-lateral",template:a("2+It"),styles:[a("waBZ")]}),r("design:paramtypes",[])],s)},"3cmH":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".item{cursor:pointer}.item.seleccionado{background:#ccc}.item.seleccionado .icon{color:#fff!important}.item.seleccionado .item-detalle{display:inherit}.item .item-detalle{display:none}.item.asignado{background:#ddd;color:#777}tr.filtro td,tr.filtro th{color:#fff;background:#4a4a4a!important}.contenedor-tabla{overflow:auto;width:100%;height:99%!important;display:block;position:absolute;left:0;top:0}.contenedor-tabla table{border-radius:3px}@media screen and (max-width:768px){.contenedor-tabla{position:relative}.tile.notification{padding:0!important}}",""]),e.exports=e.exports.toString()},"484h":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"div.scroll{background-color:#fff;height:450px;overflow:auto}div.hidden{display:none}",""]),e.exports=e.exports.toString()},"4C4P":function(e,t){e.exports='<formulario #ctrl URL="unidades-medicas" titulo="UM / Catalogo" [dato]="dato"></formulario>\r\n<articulos-catalogo-menu></articulos-catalogo-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <a class="button  is-primary" style="position:absolute; top:10em; right:3em;" (click)="ctrl.cargarDatos(); "><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                            {{ctrl.moduloTitulo}} unidad médica\r\n                        </h1>\r\n\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section">\r\n                <!-- formulario -->\r\n                <form name="dato" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()">\r\n                    <div class="tabs is-boxed">\r\n                        <ul>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 1}">\r\n                                <a (click)="tab=1">\r\n                                    <span class="icon is-small"><i class="fa fa-file"></i></span>\r\n                                    <span>Datos de la unidad</span>\r\n                                </a>\r\n                            </li>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 2}">\r\n                                <a (click)="tab=2">\r\n                                    <span class="icon is-small"><i class="fa fa-home"></i></span>\r\n                                    <span>Servicios</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 1}">\r\n\r\n                        <div class="field" id="catalogos" (click)="ctrl.cargarCatalogo(\'servicios\', \'servicios\'); ">\r\n                            <label class="label">Clues:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'clues\').hasError(\'required\') && ctrl.dato.get(\'clues\').touched}"\r\n                                    placeholder="clues" formControlName="clues">\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'clues\').hasError(\'required\') && ctrl.dato.get(\'clues\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'clues\').hasError(\'required\') && ctrl.dato.get(\'clues\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Nombre:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched}"\r\n                                    placeholder="nombre" formControlName="nombre">\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>                    \r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 2}">\r\n                        \r\n                        <div formArrayName="clues_servicios">\r\n                            <div *ngFor="let item of ctrl.dato.controls.clues_servicios.controls; let i=index" class="column is-4" style="float:left">\r\n                                <nav class="panel" [formGroupName]="i">\r\n                                    <div class="panel-heading">\r\n                                        Servicio {{i + 1}} \r\n                                        <a style="float:right" class="is-danger" (click)="ctrl.quitar_form_array(\'clues_servicios\', i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>                                              \r\n                                    </div>\r\n                                    <label class="panel-block" >                                                  \r\n                                        <select class="select" name="servicio_id" formControlName="servicio_id" [ngClass]="{\'is-warning\': servicio_id?.length ==0 }">\r\n                                            <option *ngFor="let val of ctrl.servicios" value="{{val.id}}" >{{ val.nombre }}</option>\r\n                                        </select>\r\n                                        <span class="help is-danger" *ngIf="!ctrl.dato.controls.clues_servicios.controls[i].controls.servicio_id.valid">Este campo es requerido.</span>                                            \r\n                                    </label>                                    \r\n                                </nav>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="block">\r\n                            <a class="button is-primary is-outlined is-fullwidth" (click)="ctrl.agregar_form_array(\'clues_servicios\', form_clues_servicios)">\r\n                                <span class="icon">\r\n                                    <i class="fa fa-plus"> </i> \r\n                                </span> \r\n                                &nbsp; Agregar\r\n                            </a>\r\n                        </div>\r\n                        \r\n                    </div>\r\n\r\n                    \r\n\r\n                    <br><br>\r\n                    <div class="control is-grouped">\r\n                        <p class="control">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                        </p>\r\n                        <p class="control" *ngIf="ctrl.id">\r\n                            <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n                        </p>\r\n                    </div>\r\n\r\n                </form>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>'},"4I9T":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".login-background{background-color:#aabbbc}",""]),e.exports=e.exports.toString()},"4PLu":function(e,t,a){"use strict";var n=a("3j3K"),i=a("30gs");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.crudService=e}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e.prototype.select_insumo_autocomplete=function(e){var t=this,a=JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,console.log(e),this.crudService.lista(0,1e3,"comprobar-stock?almacen="+a.almacen_activo.id+"&clave="+e.clave_insumo_medico).subscribe(function(a){t.lotes_insumo=a,console.log(e.es_unidosis),t.es_unidosis=e.es_unidosis,t.unidad_medida=e.unidad_medida;var n="";1==e.es_causes&&(n+='<label class="tag is-success" ><strong>Causes </strong></label>'),0==e.es_causes&&(n+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);"><strong>No Causes </strong> </label>'),1==e.es_unidosis&&(n+='<label class="tag is-warning" ><strong>Unidosis</strong></label>'),document.getElementById("tituloModal").innerHTML=" "+e.descripcion+' <br>\n          <p aling="justify" style="font-size:14px">'+e.clave_insumo_medico+'</p> \n          <p aling="justify" style="font-size:12px"> CANTIDAD POR ENVASE: '+(e.cantidad_x_envase?e.cantidad_x_envase:"Sin especificar")+" </p>\n          <br>\n          "+n,t.cargando=!1,t.abrirModal("verLotes")},function(e){t.cargando=!1})},e.prototype.abrirModal=function(e){document.getElementById(e).classList.add("is-active")},e.prototype.cancelarModal=function(e){document.getElementById(e).classList.remove("is-active")},e}();o=r([a.i(n.Component)({selector:"inventario-lista",template:a("osje")}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},"4pD7":function(e,t){e.exports='<menu-farmacia [modulo]="\'Entregas\'" [icono]="\'assets/icono-entregas.svg\'" [url]="\'/almacen/entregas\'"></menu-farmacia>\r\n\r\n\r\n\r\n<div class="is-fullwidth has-text-centered" style="padding-top:70px;" *ngIf="cargando">\r\n  <br>\r\n  <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n  <br>\r\n  <br>\r\n</div>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile is-parent is-12 ">\r\n      <div class="tile is-child notification is-dark">\r\n        \r\n        <div class="columns">\r\n          <div class="column" >\r\n            <div style="padding:1em;">Pedido no. <strong style="color:#FFF;">{{ id }}</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lotes: {{ lotesSurtidos.length  }} / {{ pedido.lista.length }}</div>\r\n          </div>\r\n          <div class="column is-4" style="text-align:center; ">\r\n            <div style="margin:1em;">\r\n            <a  class="button is-primary" style="width:45%; margin-right:5%;" (click)="imprimir()"> <span class="icon"><i class="fa fa-print"></i></span> <span>Imprimir</span></a>\r\n            <a  class="button is-white"  style="width:45%"  routerLink="/almacen/entregas/"> Regresar</a>\r\n            </div>\r\n          </div>\r\n        </div>       \r\n      </div>\r\n    </div>\r\n    <div class="tile">\r\n      <div class="tile is-parent ">\r\n        <div class="tile is-child notification is-white" >\r\n          <div class="contenedor-tabla" >\r\n                      \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em; ">\r\n              <thead>\r\n                  <tr  [ngClass]="{ \'filtro\': pedido.filtro.activo}">\r\n                    <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                    <th>\r\n                      <p class="control is-expanded">\r\n                        <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                        <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])">\r\n                      </p>\r\n                    </th>  \r\n                    \r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Surtido">Surt.</abbr></th>\r\n                    <th  style="width:21px !important; text-align: center; vertical-align: middle;">Surtido</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                <tr class="item" *ngFor="let item of pedido.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                    <div class="item-detalle">\r\n                      <div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }}</th>                                  \r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>      \r\n              </tbody>\r\n              <tbody *ngIf="pedido.filtro.activo">\r\n                <tr class="item"  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                    <div class="item-detalle">\r\n                      <div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">0</th>                                  \r\n                  <td style="width:21px !important; text-align:center; color: gray"><span class="icon"><i class="fa fa-minus-circle"></i></span></td>\r\n                </tr>   \r\n              </tbody>              \r\n            </table>\r\n            <paginacion style=" width:100%; height:auto; bottom:0; left:0px; background:#FFF;"\r\n                [total]="pedido.lista.length" \r\n                [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.paginacion.indice"\r\n                (onSiguiente)="pedido.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.paginaAnterior(); limpiarStock();" \r\n                (onListar)="pedido.listar($event);limpiarStock();" \r\n                *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n\r\n            <paginacion \r\n                [total]="pedido.filtro.lista.length" \r\n                [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                (onSiguiente)="pedido.filtro.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.filtro.paginaAnterior();  limpiarStock();" \r\n                (onListar)="pedido.filtro.listar($event); limpiarStock();" \r\n                *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n\r\n\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n      <div class="tile is-parent  ">\r\n        <div class="tile is-child  notification is-white">\r\n          <div class="contenedor-tabla">\r\n            <table class="table" *ngIf="!cargando && itemSeleccionado != null" style="font-size: 0.8em;" >\r\n              <thead>\r\n                  <tr style="background: #00d1b2;">\r\n                    <th style="color:#FFF !important;">Código</th>\r\n                    <th style="color:#FFF !important;">Marca</th>\r\n                    <th style="color:#FFF !important;">Lote</th>\r\n                    <th style="color:#FFF !important;">Caducidad</th>\r\n                    <th style="color:#FFF !important;"><abbr title="Cantidad">Cant.</abbr></th>  \r\n                    <th></th>              \r\n                  </tr>\r\n              </thead>\r\n              <tfoot *ngIf="itemSeleccionado.totalStockAsignado>0">\r\n                <tr>\r\n                  <th colspan="4" style="text-align:right">\r\n                    <span *ngIf="itemSeleccionado.totalStockAsignado == itemSeleccionado.cantidad"><span class="icon is-small" ><i class="fa fa-check-circle"></i></span> <span>Completo &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span> Total \r\n                  </th>\r\n                  <td style="text-align:center">{{ itemSeleccionado.totalStockAsignado || 0 }} / {{ itemSeleccionado.cantidad }}</td>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                  <tr  class="is-unselectable" *ngFor="let item of itemSeleccionado.listaStockAsignado">\r\n                                      \r\n                    <td>{{ item.codigo_barras}}</td>\r\n                    <td>{{ item.marca.nombre }}</td>\r\n                    <td>{{ item.lote }}</td>\r\n                    <td>{{ item.fecha_caducidad | date:\'dd/MM/y\' }}</td>\r\n                    <td>{{ item.cantidad }}</td>\r\n                    \r\n                  </tr>\r\n                  <tr *ngIf="itemSeleccionado.totalStockAsignado==0">\r\n                    <td colspan="5">No se entregó este insumo</td>\r\n                  </tr>\r\n                  \r\n                      \r\n              </tbody>  \r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n  </div>\r\n</div>\r\n  \r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n'},"4xvr":function(e,t){e.exports=""},"52hV":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("5oXY"),s=a("+pb+"),o=(a.n(s),a("kZql"));a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t){this.http=e,this.router=t,this.headers=new i.Headers({"Content-Type":"application/json"})}return e.prototype.login=function(e,t){return this.http.post(o.a.API_URL+"/obtener-token",JSON.stringify({id:e,password:t}),{headers:this.headers}).map(function(e){var t=e.json();if(t.token){console.log("Token obtenido.");var a=JSON.parse(localStorage.getItem("usuario"));if(localStorage.removeItem("token"),localStorage.removeItem("usuario"),localStorage.removeItem("server_info"),t.usuario.clues_activa=null,t.usuario.almacen_activo=null,t.usuario.proveedor_activo=null,t.usuario.proveedores)if(a&&a.id==t.usuario.id){var n=!1;if(a.proveedor_activo)for(var i in t.usuario.proveedores)if(a.proveedor_activo.id==t.usuario.proveedores[i].id){t.usuario.proveedor_activo=t.usuario.proveedores[i],n=!0;break}n||(t.usuario.proveedor_activo=t.usuario.proveedores[0])}else t.usuario.proveedor_activo=t.usuario.proveedores[0];if(t.usuario.unidades_medicas.length>0){if(a&&a.id==t.usuario.id){var n=!1;if(a.clues_activa)for(var i in t.usuario.unidades_medicas)a.clues_activa.clues==t.usuario.unidades_medicas[i].clues&&(t.usuario.clues_activa=t.usuario.unidades_medicas[i],n=!0);n||(t.usuario.clues_activa=t.usuario.unidades_medicas[0])}else console.log("OOO aqui."),t.usuario.clues_activa=t.usuario.unidades_medicas[0];if(t.usuario.clues_activa.almacenes.length>0)if(a&&a.id==t.usuario.id){var n=!1;if(a.almacen_activo)for(var i in t.usuario.clues_activa.almacenes)a.almacen_activo.id==t.usuario.clues_activa.almacenes[i].id&&(t.usuario.almacen_activo=t.usuario.clues_activa.almacenes[i],n=!0);n||(t.usuario.almacen_activo=t.usuario.clues_activa.almacenes[0])}else t.usuario.almacen_activo=t.usuario.clues_activa.almacenes[0];else t.usuario.almacen_activo=null}else t.usuario.clues_activa=null,t.usuario.almacen_activo=null;localStorage.setItem("token",t.token),localStorage.setItem("usuario",JSON.stringify(t.usuario)),localStorage.setItem("server_info",JSON.stringify(t.server_info))}})},e.prototype.refreshToken=function(){var e="refresh-token?token="+localStorage.getItem("token");return this.http.post(o.a.API_URL+"/"+e,{},{headers:this.headers}).map(function(e){var t=e.json();t.token&&(console.log("Token renovado."),localStorage.removeItem("token"),localStorage.removeItem("server_info"),localStorage.setItem("token",t.token),localStorage.setItem("server_info",JSON.stringify(t.server_info)))})},e.prototype.logout=function(e){void 0===e&&(e=null),localStorage.removeItem("token"),localStorage.removeItem("usuario"),localStorage.removeItem("server_info"),null!=e?this.router.navigate(["login"],{queryParams:{returnUrl:decodeURIComponent(e.replace(/\+/g," "))}}):this.router.navigate(["login"])},e}();d=c([a.i(n.Injectable)(),l("design:paramtypes",["function"==typeof(u=void 0!==i.Http&&i.Http)&&u||Object,"function"==typeof(p=void 0!==r.a&&r.a)&&p||Object])],d);var u,p},"5C2G":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("bcdw"),d=a("Zit5"),u=a("Qew2"),p=a("Kw80"),m=a("DVw5"),f=a("52hV"),g=a("RHrs"),h=a("30gs"),v=a("nqnc"),b=a("nsII"),y=(a.n(b),a("KR/G"));a.n(y);a.d(t,"a",function(){return x});var _=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},x=function(){function e(){}return e}();x=_([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,g.a,v.a,b.NguiAutoCompleteModule,y.NguiDatetimePickerModule],declarations:[p.a,m.a],providers:[f.a,h.a]})],x)},"5WLy":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("Zit5"),d=a("RHrs"),u=a("0cAy"),p=a("mdz2"),m=a("+bKV"),f=a("Gip4"),g=a("/wGT"),h=a("xfgp");a.d(t,"a",function(){return b});var v=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},b=function(){function e(){}return e}();b=v([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,p.a,s.a,o.a,c.a,l.a,d.a,u.a,g.a],declarations:[m.a,f.a,h.a]})],b)},"5bTO":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"5f4D":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.title=e,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return e.prototype.ngOnInit=function(){this.title.setTitle("Almacén"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[{permiso:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk",icono:"assets/icono-pagina-lista.svg",titulo:"Pedidos",url:"/almacen/pedidos"},{permiso:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk--",icono:"assets/icono-pedidos-jurisdiccionales.svg",titulo:"Pedidos jurisdiccionales",url:"/almacen/pedidos-jurisdiccionales"},{permiso:"iSxK0TpoYpnzf8KIQTWOq9Web7WnSKhz",icono:"assets/icono-pedidos-alt.svg",titulo:"Entregas de pedidos",url:"/almacen/entregas"},{permiso:"GPSDLmXckXcdfdj7lD4rdacwMivsTp9g",icono:"assets/icono-recetas.svg",titulo:"Recetas",url:"/almacen/salidas-recetas"},{permiso:"qQvNeb1UFPOfVMKQnNkvxyqjCIUgFuEG",icono:"assets/icono-salidas.svg",titulo:"Salida  de almacén",url:"/almacen/salidas-estandar"},{permiso:"a1OMZVn7dveOf5aUK8V0VsvvSCxz8EMw",icono:"assets/icono-entradas.svg",titulo:"Entrada  de almacén",url:"/almacen/entradas-estandar"}],this.accesosDirectos=[{permiso:"2nC6GUf6E737QwZSxuLORT6rZUDy5YUO",icono:"assets/icono-pagina-lista.svg",titulo:"Nuevo pedido",url:"/almacen/pedidos/nuevo"},{permiso:"q9ppCvhWdeCJI85YtCrKvtHLaoPipeaT",icono:"assets/icono-pedidos-alt.svg",titulo:"Recibir pedido",url:"/almacen/pedidos/por-surtir"}];var e=JSON.parse(localStorage.getItem("usuario")),t=e.permisos.split("|");if(t.length>0){for(var a in this.modulos)e:for(var n in t)if(t[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break e}for(var a in this.accesosDirectos)e:for(var n in t)if(t[n]==this.accesosDirectos[a].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[a]);break e}}},e}();o=r([a.i(n.Component)({selector:"app-index-farmacia",template:a("ywVL"),styles:[a("c9Js")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},"5qmi":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("rCTf"),s=(a.n(r),a("EEr4")),o=(a.n(s),a("1APj")),c=(a.n(o),a("h0qH")),l=(a.n(c),a("aV5h")),d=(a.n(l),a("q3ik")),u=(a.n(d),a("+pb+")),p=(a.n(u),a("uCY4")),m=(a.n(p),a("6Yye")),f=(a.n(m),a("Nqas")),g=a("hrBO");a.d(t,"a",function(){return b});var h=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t){this.title=e,this.egresoService=t,this.cargando=!1,this.mensajeError=new f.a,this.mensajeExito=new f.a,this.pacientesEgreso=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Pacientes / Admisión"),this.listar(1),this.mensajeError=new f.a,this.mensajeExito=new f.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."+t),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.egresoService.buscar(t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.egresoService.buscar(e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1,a.resultadosBusqueda=e.data,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var t=0;t<a.paginasTotalesBusqueda;t++)a.indicePaginasBusqueda.push(t+1);console.log("------"),console.log(e),console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,this.cargando=!0,this.egresoService.lista(e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1,t.pacientesEgreso=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("pacientes cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e}();b=h([a.i(n.Component)({selector:"app-lista",template:a("ypsv"),styles:[a("SGRD")]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==g.a&&g.a)&&_||Object])],b);var y,_},"5xAd":function(e,t,a){"use strict";var n=a("3j3K"),i=a("lgzy");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.cambiarEntornoService=e,this.usuario={}}return e.prototype.ngOnInit=function(){var e=this;this.usuario=JSON.parse(localStorage.getItem("usuario")),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){e.usuario=JSON.parse(localStorage.getItem("usuario"))})},e.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},e}();r([a.i(n.Input)(),s("design:type",String)],o.prototype,"modulo",void 0),r([a.i(n.Input)(),s("design:type",String)],o.prototype,"icono",void 0),r([a.i(n.Input)(),s("design:type",String)],o.prototype,"url",void 0),o=r([a.i(n.Component)({selector:"menu-farmacia",template:a("QUQJ"),styles:[a("tYEV")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},"5xMp":function(e,t){e.exports='<router-outlet style="height:100% !important;"></router-outlet>\r\n<app-bloquear-pantalla></app-bloquear-pantalla>'},"69pw":function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("NBQd"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"farmacia-subrrogada",component:r.a,canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},"6f/P":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("NVOs"),o=a("Qbdm"),c=a("52hV"),l=a("S9un"),d=a("mpkG"),u=a("Nqas");a.d(t,"a",function(){return f});var p=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,a,n,i,r,s,o){this.router=e,this.title=t,this.authService=a,this.route=n,this.location=i,this.rolesService=r,this.usuariosService=s,this.fb=o,this.usuarioRepetido=!1,this.usuarioInvalido=!1,this.cambiarPassword=!1,this.cargando=!1,this.cargandoRoles=!1,this.cargandoUnidadesMedicas=!1,this.roles=[],this.unidadesMedicas=[],this.unidadesMedicasEdicion=[],this.mensajeError=new u.a,this.mensajeAdvertencia=new u.a,this.mensajeExito=new u.a}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Editar usuario / Panel de control"),this.usuario=this.fb.group({nombre:["",[s.Validators.required]],apellidos:["",[s.Validators.required]],id:["",[s.Validators.required]],cambiarPassword:[!1,[]],password:[{value:"",disabled:!0},[s.Validators.required]],confirmarPassword:[{value:"",disabled:!0},[s.Validators.required]],avatar:["avatar-circled-user-male"],roles:[[1],[s.Validators.required]],unidades_medicas:[[]],almacenes:[[]]}),this.route.params.subscribe(function(t){e.id=t.id}),this.cargarRoles(),this.cargarUnidadesMedicas()},e.prototype.toggleCambiarPassword=function(){this.cambiarPassword=!this.cambiarPassword,this.cambiarPassword?(this.usuario.get("password").enable(),this.usuario.get("confirmarPassword").enable()):(this.usuario.get("password").disable(),this.usuario.get("confirmarPassword").disable())},e.prototype.enviar=function(){var e=this;if(this.usuario.get("password").value!=this.usuario.get("confirmarPassword").value)return!1;this.cargando=!0;var t=this.usuario.value;this.cambiarPassword||delete t.cambiarPassword,this.usuariosService.editar(this.id,this.usuario.value).subscribe(function(t){e.cargando=!1,console.log("Usuario editado."),e.mensajeExito=new u.a(!0),e.mensajeExito.texto="Se han guardado los cambios.",e.mensajeExito.mostrar=!0},function(t){e.cargando=!1,e.mensajeError=new u.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{var a=t.json();if(401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status){e.mensajeError.texto="Por favor verfique los campos marcados en rojo.",e.usuarioRepetido=!1,e.usuarioInvalido=!1;for(var n in a.error)for(var i in a.error[n])"id"==n&&"unique"==a.error[n][i]&&(e.usuarioRepetido=!0),"id"==n&&"email"==a.error[n][i]&&(e.usuarioInvalido=!0)}}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.cargarDatos=function(){var e=this;this.cargando=!0,console.log("Cargando usuario."),this.usuariosService.ver(this.id).subscribe(function(t){e.cargando=!1,e.datosCargados=!0,e.usuario.patchValue(t),e.unidadesMedicasEdicion=t.unidades_medicas_objs,console.log("Usuario cargado.")},function(t){e.cargando=!1,e.mensajeError=new u.a(!0),e.mensajeError=new u.a(!0),e.mensajeError.mostrar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.cargarUnidadesMedicas=function(){var e=this;this.cargandoUnidadesMedicas=!0,this.usuariosService.listaUnidadesMedicas().subscribe(function(t){e.unidadesMedicas=t,e.cargandoUnidadesMedicas=!1,console.log("Unidades Médicas cargadas")},function(t){e.cargandoUnidadesMedicas=!1})},e.prototype.cargarRoles=function(){var e=this;this.cargandoRoles=!0,this.rolesService.lista().subscribe(function(t){e.cargandoRoles=!1,e.roles=t,console.log("Roles cargados."),0==e.roles.length&&(e.mensajeAdvertencia=new u.a(!0),e.mensajeAdvertencia.texto="\n            No hay roles registrados en el sistema, póngase en contacto con un administrador.",e.mensajeAdvertencia.mostrar=!0),e.cargarDatos()},function(t){e.cargandoRoles=!1,e.mensajeError=new u.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0,e.cargarDatos();try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para ver los roles."),500==t.status&&(e.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los roles")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los roles":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los roles"}})},e.prototype.regresar=function(){this.location.back()},e}();f=p([a.i(n.Component)({selector:"app-editar",template:a("tjBx"),styles:[a("nL84")]}),m("design:paramtypes",["function"==typeof(g=void 0!==r.a&&r.a)&&g||Object,"function"==typeof(h=void 0!==o.b&&o.b)&&h||Object,"function"==typeof(v=void 0!==c.a&&c.a)&&v||Object,"function"==typeof(b=void 0!==r.c&&r.c)&&b||Object,"function"==typeof(y=void 0!==i.Location&&i.Location)&&y||Object,"function"==typeof(_=void 0!==l.a&&l.a)&&_||Object,"function"==typeof(x=void 0!==d.a&&d.a)&&x||Object,"function"==typeof(j=void 0!==s.FormBuilder&&s.FormBuilder)&&j||Object])],f);var g,h,v,b,y,_,x,j},"6f0v":function(e,t){e.exports='<formulario #ctrl URL="mis-turnos" titulo="Turnos / Configuración" [dato]="dato"></formulario>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <a class="button  is-primary" style="position:absolute;top: 6em;right: 3em;" (click)="ctrl.cargarDatos();" id="actualizar"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                            \r\n                            <!-- --> Mis turnos\r\n                        </h1>\r\n                        <span style="text-align: right">Última actualización: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                            <strong *ngIf="actualizado" >{{actualizacion | date}}</strong> \r\n                            Por: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                            <strong *ngIf="actualizado">{{actualizacion_usuario}} </strong> \r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section">\r\n                <!-- formulario -->\r\n                <form name="dato" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar(false)">\r\n                    <div class="tabs is-boxed">\r\n                        <ul>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 2}">\r\n                                <a (click)="tab=2">\r\n                                    <span class="icon is-small"><i class="fa fa-home"></i></span>\r\n                                    <span>Tipos de turnos</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 2}">\r\n\r\n                        <div class="box" >\r\n                            <article class="media">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <div class="column is-5" style="float:left">\r\n                                            <nav class="panel">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="Movimientos" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.izquierda"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'izquierda\', ctrl.tipos_turnos)">\r\n                                                            <label for="Movimientos">\r\n                                                            Turnos disponibles\r\n                                                        </label>\r\n                                                        </div>\r\n                                                        <a id="catalogos" (click)="ctrl.cargarCatalogo(\'tipos_turnos\', \'turnos\'); "></a>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let val of ctrl.tipos_turnos; let i=index">          \r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{val.id}}" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.izquierda.indexOf(val) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'izquierda\', ctrl.tipos_turnos, val)">\r\n                                                            <label for="{{val.id}}">\r\n                                                                {{val.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                        <div class="column is-2" style="float:left" >\r\n                                            \r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.izquierda.length > 0}" \r\n                                                [disabled]="ctrl.izquierda.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'izquierda\', ctrl.dato.controls.clues_turnos.controls, ctrl.tipos_turnos, true)">></button>\r\n                                            </p>\r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.derecha.length > 0}" \r\n                                                [disabled]="ctrl.derecha.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'derecha\', ctrl.tipos_turnos, ctrl.dato.controls.clues_turnos.controls, false)"><</button>\r\n                                            </p>\r\n                                            \r\n                                        </div>                        \r\n                                        <div class="column is-5" style="float:left" >\r\n                                            <nav class="panel" formGroupName="clues_turnos">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="MisServicios" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.derecha"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'derecha\', ctrl.dato.controls.clues_turnos.controls)">\r\n                                                            <label for="MisServicios">\r\n                                                            Mis turnos\r\n                                                        </label>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let item of ctrl.dato.controls.clues_turnos.controls; let i2=index">          \r\n                                                    <div class="field" [formGroupName]="i2">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{item.value.id}}" class="styled" type="checkbox"\r\n                                                            [checked]="ctrl.derecha.indexOf(item) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'derecha\', ctrl.dato.controls.clues_turnos.controls, item)">\r\n                                                            <label for="{{item.value.id}}">\r\n                                                                {{item.value.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n                    <a (click)="ctrl.initMover(ctrl.dato.controls.clues_turnos.controls, ctrl.tipos_turnos); " id="initMover"></a>\r\n                    <br><br>\r\n                    <div class="control is-grouped" style="float:left; padding:10px;">\r\n                        <p class="control">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                        </p>\r\n                        <p class="control" *ngIf="ctrl.id">\r\n                            <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </form>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},"6hLl":function(e,t){e.exports='<div class="modal" [ngClass]="{\'is-active\': mostrar}">\r\n  <div class="modal-background" style="background:rgba(0,0,0,0.9)!important;"></div>\r\n  <div class="modal-content">\r\n    <div class="card" style=" border-radius:1em; overflow: hidden">\r\n      <div class="card-image" >\r\n          <figure class="image " style="border-radius: 1em 1em 0em 0em; overflow: hidden;">\r\n              <img src="assets/bg-lockscreen_salud.svg" alt="Image">\r\n          </figure>\r\n          \r\n          <button class="button is-primary is-inverted"  (click)="logout()" style="position:absolute; top:1em; right:1em;"><span class="icon"><i class="fa fa-sign-out"></i></span> <span>Salir</span></button>\r\n      </div>\r\n      <div class="card-content has-text-centered">\r\n          <form name="form" (ngSubmit)="!loading && login()">\r\n            <div class="notification is-danger" *ngIf="mostrarMensaje">\r\n                <a class="delete" (click)="mostrarMensaje = false"></a>\r\n                <b>Error:</b> {{ mensaje }}\r\n            </div>\r\n            <nav class="level">\r\n              <div class="level-item has-text-centered">\r\n                <figure class="image is-128x128" >\r\n                  <img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar">\r\n                  <span class="icon is-large" style="position: absolute; top: 0px; right:0px;"><i class="fa fa-lock"></i></span>\r\n                </figure>\r\n              </div>\r\n            </nav>\r\n            <h1 class="title">{{ usuario.nombre }} {{ usuario.apellidos }}</h1>\r\n            <h2 class="subtitle"><span class="icon"><i class="fa fa-user-circle"></i></span> {{usuario.id}}</h2>\r\n            <p class="control has-icon">\r\n                <input class="input is-medium" [ngClass]="{\'is-danger\': mensaje}" type="password" name="password" id="password" placeholder="Contraseña" [(ngModel)]="credenciales.password">\r\n                <span class="icon is-small">\r\n                <i class="fa fa-lock"></i>\r\n                </span>\r\n            </p>\r\n            <button class="button is-primary is-medium is-fullwidth" [ngClass]="{\'is-loading\': loading}"><span class="icon"><i class="fa fa-unlock"></i></span><span>Desbloquear</span></button>\r\n          </form>\r\n      </div>\r\n      \r\n    </div>\r\n    \r\n  </div>\r\n</div>'},"6p5m":function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.cargando=!1}return e.prototype.ngOnInit=function(){},e}();s=i([a.i(n.Component)({selector:"app-estatus",template:a("stKu"),styles:[a("YyKe")]}),r("design:paramtypes",[])],s)},"6u2E":function(e,t){e.exports='<listar #ctrl URL="mis-almacenes" titulo="Almacenes / Configuración"></listar>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n\r\n                        <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> almacenes\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                            <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/configuracion/almacenes/nuevo">\r\n                                    <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!ctrl.cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th><abbr title="Usuario ID">ID</abbr></th>                        \r\n                        <th>Nombre</th>\r\n                        <th>Servidor</th>\r\n                        <th>Nivel</th>\r\n                        <th>Tipo</th>\r\n                        <th>Clues</th>\r\n                        <th>Subrogado</th>\r\n                        <th>Unidosis</th>\r\n                        <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.id }}</a></th>                        \r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.servidor_id }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.nivel_almacen == 1 ? \'HACE PEDIDOS AL PROVEEDOR\' : \'HACE PEDIDOS A OTRO ALMACEN DENTRO DE LA CLUES\'}} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.tipo_almacen }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.clues }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.subrogado == 0 ? \'No\' : \'Si\'}} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.unidosis  == 0 ? \'No\' : \'Si\'}} </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.servidor_id }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.nivel_almacen == 1 ? \'HACE PEDIDOS AL PROVEEDOR\' : \'HACE PEDIDOS A OTRO ALMACEN DENTRO DE LA CLUES\'}} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.tipo_almacen }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.clues }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.subrogado == 0 ? \'No\' : \'Si\'}} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.unidosis  == 0 ? \'No\' : \'Si\'}} </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},"6yM6":function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();s=i([a.i(n.Component)({selector:"panel-control-menu-aside",template:a("BkIj"),styles:[a("pATY")]}),r("design:paramtypes",[])],s)},"7IuX":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("69pw"),o=a("Uvud"),c=a("fjeY"),l=a("+ZDf"),d=a("Qew2"),u=a("NBQd"),p=a("pcQR");a.d(t,"a",function(){return f});var m=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},f=function(){function e(){}return e}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},"7MfY":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.buscar=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.lista=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=20),this.jwtRequest.get(l.URL,null,{page:e,per_page:t}).map(function(e){return e.json().data})},e.prototype.catalogo=function(e){return void 0===e&&(e=null),this.jwtRequest.get(l.URL,null,{filtro_usuario:1,subrogado:e}).map(function(e){return e.json().data})},e.prototype.ver=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){return e.json().data})},e.prototype.crear=function(e){return this.jwtRequest.post(l.URL,e).map(function(e){return e.json().data})},e.prototype.editar=function(e,t){return this.jwtRequest.put(l.URL,e,t).map(function(e){return e.json().data})},e.prototype.eliminar=function(e){return this.jwtRequest.delete(l.URL,e).map(function(e){return e.json().data})},e}();c.URL="almacenes",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},"7dwc":function(e,t,a){"use strict";var n=a("3j3K"),i=a("NVOs");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(){this.onEnviar=new n.EventEmitter,this.onRegresar=new n.EventEmitter,this.onToggleCambiarPassword=new n.EventEmitter,this.onCargarRoles=new n.EventEmitter,this.unidadesMedicasEdicion=null,this.tab=1,this.unidadesMedicasAgregadas=[],this.cluesAgregadas=[],this.unidadMedicaSeleccionada=null,this.idsAlmacenesSeleccionados=[]}return e.prototype.ngOnInit=function(){var e=this.usuario.get("unidades_medicas"),t=this.usuario.get("almacenes");if(this.cluesAgregadas=e.value,this.idsAlmacenesSeleccionados=t.value,null!=this.unidadesMedicasEdicion){this.unidadesMedicasAgregadas=this.unidadesMedicasEdicion;for(var a in this.unidadesMedicasAgregadas)for(var n in this.unidadesMedicasAgregadas[a].almacenes)for(var i in this.idsAlmacenesSeleccionados)if(this.idsAlmacenesSeleccionados[i]==this.unidadesMedicasAgregadas[a].almacenes[n].id){this.unidadesMedicasAgregadas[a].almacenes[n].seleccionado=!0;break}}},e.prototype.enviar=function(){this.onEnviar.emit()},e.prototype.cargarRoles=function(){this.onCargarRoles.emit()},e.prototype.regresar=function(){this.onRegresar.emit()},e.prototype.toggleCambiarPassword=function(){this.onToggleCambiarPassword.emit()},e.prototype.agregarUnidadMedica=function(e){for(var t in this.unidadesMedicas)this.unidadesMedicas[t].clues==e&&(this.unidadesMedicasAgregadas.push(this.unidadesMedicas[t]),this.cluesAgregadas.push(e),this.usuario.controls.unidades_medicas.setValue(this.cluesAgregadas))},e.prototype.eliminarClues=function(e,t,a){e.preventDefault(),e.stopPropagation()},e.prototype.toggleAlmacen=function(e){for(var t=!1,a=0;a<this.idsAlmacenesSeleccionados.length;a++)if(this.idsAlmacenesSeleccionados[a]==e.id){this.idsAlmacenesSeleccionados.splice(a,1),e.seleccionado=!1,t=!0;break}t||(this.idsAlmacenesSeleccionados.push(e.id),e.seleccionado=!0),this.usuario.controls.almacenes.setValue(this.idsAlmacenesSeleccionados)},e}();r([a.i(n.Input)(),s("design:type",Array)],o.prototype,"roles",void 0),r([a.i(n.Input)(),s("design:type",Array)],o.prototype,"unidadesMedicas",void 0),r([a.i(n.Input)(),s("design:type","function"==typeof(c=void 0!==i.FormGroup&&i.FormGroup)&&c||Object)],o.prototype,"usuario",void 0),r([a.i(n.Input)(),s("design:type",Boolean)],o.prototype,"usuarioRepetido",void 0),r([a.i(n.Input)(),s("design:type",Boolean)],o.prototype,"usuarioInvalido",void 0),r([a.i(n.Input)(),s("design:type",Boolean)],o.prototype,"cargando",void 0),r([a.i(n.Input)(),s("design:type",Boolean)],o.prototype,"cargandoRoles",void 0),r([a.i(n.Input)(),s("design:type",Boolean)],o.prototype,"mostrarCambiarPassword",void 0),r([a.i(n.Output)(),s("design:type",Object)],o.prototype,"onEnviar",void 0),r([a.i(n.Output)(),s("design:type",Object)],o.prototype,"onRegresar",void 0),r([a.i(n.Output)(),s("design:type",Object)],o.prototype,"onToggleCambiarPassword",void 0),r([a.i(n.Output)(),s("design:type",Object)],o.prototype,"onCargarRoles",void 0),r([a.i(n.Input)(),s("design:type",Object)],o.prototype,"unidadesMedicasEdicion",void 0),o=r([a.i(n.Component)({selector:"panel-control-usuarios-form",template:a("fVqg"),styles:[a("Wf+u")]}),s("design:paramtypes",[])],o);var c},"7xfG":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.buscar=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.lista=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=20),this.jwtRequest.get(l.URL,null,{page:e,per_page:t}).map(function(e){return e.json().data})},e.prototype.crear=function(e){return this.jwtRequest.post(l.URL,e).map(function(e){return e.json().data})},e.prototype.listaMunicipios=function(){return this.jwtRequest.get("admision/municipio",null,null).map(function(e){return e.json().data})},e.prototype.listaLocalidades=function(e){return this.jwtRequest.get("admision/localidad",null,{municipio_id:e}).map(function(e){return e.json().data})},e.prototype.ver=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){return e.json().data})},e.prototype.editar=function(e,t){return this.jwtRequest.put(l.URL,e,t).map(function(e){return e.json().data})},e.prototype.historial=function(e,t){return this.jwtRequest.get("admision/historial",e,null).map(function(e){return e.json().data})},e}();c.URL="admision/paciente",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},8672:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.title=e,this.usuario={},this.busqueda="",this.modulos=[],this.accesosDirectos=[]}return e.prototype.ngOnInit=function(){this.title.setTitle("Artículos / Catálogos"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[{permiso:"",icono:"assets/catalogo-grupo-insumos.svg",titulo:"Grupos de insumos",url:"/catalogos/grupos-insumos"},{permiso:"",icono:"assets/catalogo-marcas.svg",titulo:"Marcas",url:"/catalogos/marcas"},{permiso:"",icono:"assets/catalogo-mc.svg",titulo:"Material de curación",url:"/catalogos/material-curacion"},{permiso:"",icono:"assets/catalogo-medicamento.svg",titulo:"Medicamentos",url:"/catalogos/medicamentos"},{permiso:"",icono:"assets/catalogo-programas.svg",titulo:"Programas",url:"/catalogos/programas"},{permiso:"",icono:"assets/catalogo-presentacion.svg",titulo:"Presentaciones de medicamentos",url:"/catalogos/presentaciones-medicamentos"},{permiso:"",icono:"assets/catalogo-administracion.svg",titulo:"Vias de administración",url:"/catalogos/vias-administracion"},{permiso:"",icono:"assets/catalogo-unid-medida.svg",titulo:"Unidades de medida",url:"/almacen-articulos/catalogos/unidades-medida"},{permiso:"",icono:"assets/catalogo-servicios.svg",titulo:"Servicios",url:"/catalogos/servicios"},{permiso:"",icono:"assets/catalogo-pedido.svg",titulo:"Tipos de pedidos",url:"/catalogos/tipo-pedido"},{permiso:"",icono:"assets/catalogo-tipo-movimiento.svg",titulo:"Tipos de movimientos",url:"/catalogos/tipos-movimientos"},{permiso:"",icono:"assets/catalogo-tipo-insumos.svg",titulo:"Tipos de insumos",url:"/catalogos/tipos-insumos"}],this.accesosDirectos=[{permiso:"",icono:"assets/catalogo-servidor.svg",titulo:"Servidores",url:"/catalogos/servidores"},{permiso:"",icono:"assets/catalogo-almacenes.svg",titulo:"Almacenes",url:"/catalogos/almacenes"},{permiso:"",icono:"assets/catalogo-proveedores.svg",titulo:"Proveedores",url:"/catalogos/proveedores"},{permiso:"",icono:"assets/catalogo-um.svg",titulo:"Unidades Médicas",url:"unidades-medicas"}]},e}();o=r([a.i(n.Component)({selector:"app-index-catalogo",template:a("dDZ5"),styles:[a("dLuj")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},"8DnP":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("gza1"),d=a("SgmE");a.d(t,"a",function(){return p});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=function(){function e(){}return e}();p=u([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.a,o.a,c.a],declarations:[l.a,d.a],exports:[l.a,d.a]})],p)},"8HPL":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"8J4Q":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"tr.lista-entregas{background-color:#efefef}",""]),e.exports=e.exports.toString()},"8Kb3":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"8afZ":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"8gFY":function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){}return e}();s=i([a.i(n.Component)({selector:"app-dashboard-salidas",template:a("H4k4")}),r("design:paramtypes",[])],s)},"9LEW":function(e,t){e.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <nav class="level">\r\n                            <div class="level-left">\r\n                                <h1 class="title">\r\n                                    <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-cloud"></i></span>\r\n                                    <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                                    Servidor central\r\n                                </h1>\r\n                            </div>\r\n                            <div class="level-right">\r\n                                <div class="block">                               \r\n                                  <a class="button is-primary is-inverted"  (click)="mostrarModalSubirArchivoSync = true;">\r\n                                    <span class="icon"><i class="fa fa-cloud-upload"></i></span><span>Subir sincronización</span>\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        </nav>  \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section >\r\n                <table class="table">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t<th>SERVIDOR</th>\r\n\t\t\t\t\t\t\t<th>NOMBRE</th>\r\n\t\t\t\t\t\t\t<th>FECHA DE GENERACIÓN</th>\r\n\t\t\t\t\t\t\t<th>FECHA DE SINCRONIZACIÓN</th>\r\n\t\t\t\t\t\t</tr>\r\n                    </thead>\r\n                    <tbody  *ngIf="!busquedaActivada">\r\n                        <tr *ngFor="let item of lista; let i=index">  \r\n                            <td>{{ item.id }}</td>   \r\n                            <td>{{ item.servidor_id }}</td>                      \r\n                            <td>{{ item.servidor_nombre }}</td> \r\n                            <td>{{ item.fecha_generacion }}</td>  \r\n                            <td>{{ item.created_at }}</td>                                                  \r\n                        </tr>\r\n                        <tr *ngIf="lista.length == 0">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                        </tr>\r\n                    </tbody>\r\n                    <tbody *ngIf="busquedaActivada">\r\n                        <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                            <td>{{ item.id }}</td>   \r\n                            <td>{{ item.servidor_id }}</td>                      \r\n                            <td>{{ item.servidor_nombre }}</td> \r\n                            <td>{{ item.fecha_generacion }}</td>  \r\n                            <td>{{ item.created_at }}</td> \r\n                        </tr>\r\n\r\n                        <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <!-- Paginación para la lista  -->\r\n                <paginacion \r\n                    [total]="total" \r\n                    [paginasTotales]="paginasTotales" \r\n                    [resultadosPorPagina]="resultadosPorPagina" \r\n                    [paginaActual]="paginaActual" \r\n                    [indicePaginas]="indicePaginas"\r\n                    (onSiguiente)="paginaSiguiente()" \r\n                    (onAnterior)="paginaAnterior()" \r\n                    (onListar)="listar($event)" \r\n                    *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n                <!-- Paginación para la búsqueda  -->\r\n                <paginacion \r\n                    [total]="totalBusqueda" \r\n                    [paginasTotales]="paginasTotalesBusqueda" \r\n                    [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                    [paginaActual]="paginaActualBusqueda" \r\n                    [indicePaginas]="indicePaginasBusqueda"\r\n                    (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                    (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                    (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                    *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n            </section>\r\n        </div>\r\n        \r\n       \r\n       \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>     \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n\r\n<div class="modal"  [ngClass]="{ \'is-active\': mostrarModalSubirArchivoSync }">\r\n  <div class="modal-background" (click)="mostrarModalSubirArchivoSync =!mostrarModalSubirArchivoSync"></div>\r\n  <div class="modal-card">\r\n    <header class="modal-card-head">\r\n      <p class="modal-card-title"><span class="icon"><i class="fa fa-cloud-upload"></i></span> Subir archivo de sincronización manual</p>\r\n      <button class="delete" (click)="mostrarModalSubirArchivoSync = !mostrarModalSubirArchivoSync"></button>\r\n    </header>\r\n    <section class="modal-card-body">        \r\n        <div class="notification is-danger" *ngIf="mensajeErrorSync!=\'\'"><span class="icon"><i class="fa fa-exclamation-circle"></i></span> {{ mensajeErrorSync }}</div>\r\n       \r\n        <div class="field" [ngClass]="{ \'is-hidden\' : enviandoDatos || documentoSubido }">\r\n            <label for="sync" class="label" [ngClass]="{ \'is-danger\': errores.archivo != null }">Elige el archivo sync.XXXX.zip</label>            \r\n            <input class="input-file" type="file" #archivoInput  name="sync" id="sync" style="width:100%" [disabled]="documentoSubido" (change)="fileChange($event)" accept=".zip">            \r\n            <p class="help is-danger" *ngIf="errores.archivo == \'required\'">Debe elegir un archivo.</p>\r\n            <p class="help is-danger" *ngIf="errores.archivo == \'max\'">El archivo no puede ser superior a los <b>10MB</b>.</p>\r\n            <p class="help is-danger" *ngIf="errores.archivo == \'mimetypes\'">El tipo de archivo no es valido, verifique que tenga las siguientes extensiones: .zip</p>\r\n        </div>\r\n        <div *ngIf="enviandoDatos || documentoSubido">\r\n            <h1 class="subtitle" *ngIf="enviandoDatos">Subiendo documento...</h1>\r\n            <h1 class="subtitle" *ngIf="documentoSubido && !enviandoDatos"><span class="icon"><i class="fa fa-check-circle"></i></span> ¡El documento se ha subido exitosamente!</h1>\r\n            <progress class="progress is-primary" value="{{ progreso }}" max="100">{{ progreso}}%</progress>\r\n        </div>\r\n    </section>\r\n    <footer class="modal-card-foot">\r\n        <a class="button is-primary" [ngClass]="{ \'is-disabled\' : !archivo || enviandoDatos  }" *ngIf="!documentoSubido" (click)="adjuntar()">Adjuntar</a>\r\n        <a class="button is-primary" [ngClass]="{ \'is-disabled\' : !archivo || enviandoDatos  }" *ngIf="documentoSubido" (click)="reset()">Adjuntar otro documento</a>\r\n        <a class="button" [ngClass]="{ \'is-disabled\' : enviandoDatos  }" (click)="mostrarModalSubirArchivoSync = !mostrarModalSubirArchivoSync">Cerrar</a>      \r\n    </footer>\r\n  </div>\r\n</div>\r\n'},"9o2x":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.verRecepcionPedido=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){return e.json().data})},e.prototype.guardarRecepcionPedido=function(e,t){return this.jwtRequest.put(l.URL,e,t).map(function(e){return e.json().data})},e}();c.URL="recepcion-pedido",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},"AD+J":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("NVOs"),o=a("Qbdm"),c=a("52hV"),l=a("30gs"),d=a("Nqas"),u=a("3MNG");a.d(t,"a",function(){return f});var p=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,a,n,i,r,s,o){this.router=e,this.title=t,this.authService=a,this.route=n,this.location=i,this.crudService=r,this.fb=s,this.notificacion=o,this.borrarCargando=!1,this.datosCargados=!0,this.cargando=!1,this.cambiarPassword=!1,this.derecha=[],this.izquierda=[],this.mensajeResponse=new d.a,this.borrarItem="",this.cargarDatosCatalogo=!1,this.catalogo=[],this.roles=[],this.catalogoDependiente=function(e,t,a){var n=this;this.cargarDatosCatalogo=!0,this.crudService.lista(0,0,e+"?id="+a).subscribe(function(e){n[t]=e,0==e.length&&(n.mensajeResponse.titulo=t,n.mensajeResponse.texto="Esta vacio, póngase en contacto con un administrador.",n.mensajeResponse.mostrar=!0,n.mensajeResponse.clase="warning",n.mensaje(3)),n.cargarDatosCatalogo=!1},function(e){n.mensajeResponse=new d.a(!0),n.mensajeResponse.texto="No especificado.",n.mensajeResponse.mostrar=!0;try{e.json();401==e.status&&(n.mensajeResponse.texto="No tiene permiso para ver los roles."),500==e.status&&(n.mensajeResponse.texto="500 (Error interno del servidor). No se pudieron cargar los roles")}catch(t){500==e.status?n.mensajeResponse.texto="500 (Error interno del servidor). No se pudieron cargar los roles":n.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los roles"}n.cargarDatosCatalogo=!1})},this.modelo=[],this.todosSeleccionados=[],this.error_archivo=!1,this.error_json=!1,this.options={position:["bottom","left"],timeOut:2e3,lastOnBottom:!0}}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle(this.titulo),this.route.params.subscribe(function(t){e.id=t.id,e.id&&e.cargarDatos()}),this.moduloTitulo=this.id?"Modificar":"Nuevo"},e.prototype.enviar=function(e){void 0===e&&(e=!0),this.id?this.actualizarDatos():this.guardarDatos(e)},e.prototype.guardarDatos=function(e){var t=this;this.cargando=!0;var a=this.dato.getRawValue();this.crudService.crear(a,this.URL).subscribe(function(a){t.cargando=!1,e&&t.location.back(),t.mensajeResponse.texto="Se han guardado los cambios.",t.mensajeResponse.mostrar=!0,t.mensajeResponse.clase="success",t.mensaje(2)},function(e){t.cargando=!1,t.mensajeResponse.texto="No especificado.",t.mensajeResponse.mostrar=!0,t.mensajeResponse.clase="error",t.mensaje(3);try{var a=e.json();if(401==e.status&&(t.mensajeResponse.texto="No tiene permiso para hacer esta operación."),409==e.status){t.mensajeResponse.texto="Por favor verfique los campos marcados en rojo.",t.mensajeResponse.clase="warning",t.mensaje(8);for(var n in a.error)for(var i in a.error[n])t.mensajeResponse.titulo=n,t.mensajeResponse.texto=a.error[n][i],t.mensajeResponse.clase="error",t.mensaje(3)}}catch(a){500==e.status?t.mensajeResponse.texto="500 (Error interno del servidor)":t.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.actualizarDatos=function(){var e=this;this.cargando=!0;var t=this.dato.value;this.cambiarPassword||delete t.cambiarPassword,this.crudService.editar(this.id,this.dato.value,this.URL).subscribe(function(t){e.cargando=!1,e.mensajeResponse.texto="Se han guardado los cambios.",e.mensajeResponse.mostrar=!0,e.mensajeResponse.clase="success",e.mensaje(2)},function(t){e.cargando=!1,e.mensajeResponse.texto="No especificado.",e.mensajeResponse.mostrar=!0,e.mensajeResponse.clase="alert",e.mensaje(2);try{var a=t.json();if(401==t.status&&(e.mensajeResponse.texto="No tiene permiso para hacer esta operación.",e.mensajeResponse.clase="error",e.mensaje(2)),409==t.status){e.mensajeResponse.texto="Por favor verfique los campos marcados en rojo.",e.mensajeResponse.clase="error",e.mensaje(8);for(var n in a.error)for(var i in a.error[n])e.mensajeResponse.titulo=n,e.mensajeResponse.texto=a.error[n][i],e.mensajeResponse.clase="error",e.mensaje(3)}}catch(a){500==t.status?e.mensajeResponse.texto="500 (Error interno del servidor)":e.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",e.mensajeResponse.clase="error",e.mensaje(2)}})},e.prototype.cargarDatosRecursivo=function(e,t){var a=this;try{if(Array.isArray(e))try{var n=0,i=[];e.forEach(function(e){if("object"==typeof e){var r={};for(var o in e)(e[o]||"created_at"!=o&&"updated_at"!=o&&"deleted_at"!=o)&&(r[o]=e[o]);var c=[],l=!1;for(var o in r)Array.isArray(r[o])&&(c[o]||(c[o]=[]),c[o].push(r[o]),r[o]=a.fb.array([]),l=!0);if(t.push(a.fb.group(r)),!l)return;var d=t.controls[n];for(var u in c)for(var p in c[u]){d.controls[p]=new s.FormArray([]);var m=d.controls[u];a.cargarDatosRecursivo(c[u][p],m)}}else i.push(e);n++}),i.length>0&&t.patchValue(i)}catch(e){return void console.log(2,e)}else try{for(var r in e)if(t.controls[r])if(Array.isArray(e[r])){var o=[],c=t.controls[r],l=0;try{for(var d in e[r]){var u=e[r][d];if("object"==typeof u){var p={};for(var m in u)(u[m]||"created_at"!=m&&"updated_at"!=m&&"deleted_at"!=m)&&(p[m]=u[m]);var f=[],g=!1;for(var m in p)Array.isArray(p[m])&&(f[m]||(f[m]=[]),f[m].push(p[m]),p[m]=this.fb.array([]),g=!0);c.push(this.fb.group(p));try{if(g){var h=c.controls[l];for(var v in f)for(var b in f[v]){h.controls[b]=new s.FormArray([]);var y=h.controls[v];this.cargarDatosRecursivo(f[v][b],y)}}}catch(e){return console.log(5,e),t}}else o.push(u);l++}o.length>0&&c.patchValue(o)}catch(e){return void console.log(4,e)}}else t.controls[r].patchValue(e[r])}catch(e){return void console.log(3,e)}return t}catch(e){return void console.log(1,e)}},e.prototype.reset_form=function(){this.dato.reset();for(var e in this.dato.controls){var t=this.dato.controls[e];if(t.controls&&"number"==typeof t.controls.length){for(;t.length;)t.removeAt(t.length-1);t.reset()}}return!0},e.prototype.cargarDatos=function(){var e=this;if(this.reset_form())try{this.cargando=!0,this.crudService.ver(this.id,this.URL).subscribe(function(t){e.cargando=!1,e.datosCargados=!0,e.dato.patchValue(e.cargarDatosRecursivo(t,e.dato)),e.mensajeResponse.titulo="Modificar",e.mensajeResponse.texto="Los datos se cargaron",e.mensajeResponse.clase="success",e.mensaje(2)},function(t){e.cargando=!1,e.datosCargados=!1,e.mensajeResponse=new d.a(!0),e.mensajeResponse=new d.a(!0),e.mensajeResponse.mostrar;try{t.json();401==t.status&&(e.mensajeResponse.texto="No tiene permiso para hacer esta operación.",e.mensajeResponse.clase="success",e.mensaje(2))}catch(a){500==t.status?e.mensajeResponse.texto="500 (Error interno del servidor)":e.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",e.mensajeResponse.clase="error",e.mensaje(2)}})}catch(e){console.log(0,e)}},e.prototype.eliminar=function(e){this.borrarItem=e,document.getElementById("confirmarEliminar").classList.add("is-active")},e.prototype.cancelarModal=function(){document.getElementById("confirmarEliminar").classList.remove("is-active")},e.prototype.borrar=function(e){var t=this;this.borrarCargando=!0,this.crudService.eliminar(e,this.URL).subscribe(function(e){t.borrarCargando=!1,t.mensajeResponse.mostrar=!0,t.mensajeResponse.texto="Se eliminó el elemento de la lista.",t.mensajeResponse.clase="success",t.mensaje(2),t.cancelarModal(),t.regresar()},function(e){t.borrarCargando=!1,t.mensajeResponse.mostrar=!0,t.cancelarModal();try{e.json();401==e.status&&(t.mensajeResponse.texto="No tiene permiso para hacer esta operación.",t.mensajeResponse.clase="danger",t.mensaje(2))}catch(a){500==e.status?t.mensajeResponse.texto="500 (Error interno del servidor)":t.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",t.mensajeResponse.clase="danger",t.mensaje(2)}})},e.prototype.cargarCatalogo=function(e,t){var a=this;this.cargando=!0,this.cargarDatosCatalogo=!0,this.crudService.lista(0,0,t).subscribe(function(t){a[e]=t,a.cargando=!1,0==t.length&&(a.mensajeResponse.titulo=e,a.mensajeResponse.texto="Esta vacio, póngase en contacto con un administrador.",a.mensajeResponse.mostrar=!0,a.mensajeResponse.clase="warning",a.mensaje(3)),a.cargarDatosCatalogo=!1},function(e){a.mensajeResponse=new d.a(!0),a.mensajeResponse.texto="No especificado.",a.mensajeResponse.mostrar=!0;try{e.json();401==e.status&&(a.mensajeResponse.texto="No tiene permiso para ver los roles."),500==e.status&&(a.mensajeResponse.texto="500 (Error interno del servidor). No se pudieron cargar los roles")}catch(t){500==e.status?a.mensajeResponse.texto="500 (Error interno del servidor). No se pudieron cargar los roles":a.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los roles"}a.cargarDatosCatalogo=!1})},e.prototype.regresar=function(){this.location.back()},e.prototype.addInFormArray=function(e,t,a,n){void 0===n&&(n=!1),this.modelo[a]||(this.modelo[a]=t.value);var i=this.modelo[a].indexOf(e);i>-1?this.modelo[a].splice(i,1):this.modelo[a].push(e),n?t.patchValue(this.modelo[a]):t=this.modelo[a]},e.prototype.seleccionarTodos=function(e,t,a,n){void 0===n&&(n=!1),this.todosSeleccionados[e]||(this.todosSeleccionados[e]=!1),this.todosSeleccionados[e]=!this.todosSeleccionados[e];if(this.modelo[e]=n?a.value:[],n)var i=a.value;for(var r=0,s=t;r<s.length;r++){var o=s[r];this.todosSeleccionados[e]?this.modelo[e].push(o.id):n?i.splice(a.value.indexOf(o.id),1):a.splice(this.modelo[e].indexOf(o.id),1)}n?this.todosSeleccionados[e]?a.patchValue(this.modelo[e]):a.patchValue(i):a.push(this.modelo[e])},e.prototype.seleccionarTodosMover=function(e,t){this.todosSeleccionados[e]||(this.todosSeleccionados[e]=!1),this.todosSeleccionados[e]=!this.todosSeleccionados[e];for(var a=0,n=t;a<n.length;a++){var i=n[a];this.todosSeleccionados[e]?this[e].push(i):this[e].splice(this[e].indexOf(i),1)}},e.prototype.agregarMover=function(e,t,a){var n=this[e].indexOf(a);n>-1?this[e].splice(n,1):this[e].push(a)},e.prototype.initMover=function(e,t,a){void 0===a&&(a="id");for(var n=0,i=e;n<i.length;n++)for(var r=i[n],s=0,o=0,c=t;o<c.length;o++){var l=c[o];r.value[a]==l[a]&&t.splice(s,1),s++}},e.prototype.iniciarMover=function(e,t,a,n,i){void 0===n&&(n=!1),void 0===i&&(i="id");for(var r=0,s=this[e];r<s.length;r++){var o=s[r];if(n){t.push(this.fb.group(o));for(var c=0,l=0,d=a;l<d.length;l++){var u=d[l];o[i]==u[i]&&a.splice(c,1),c++}}else{t.push(o.value);for(var c=0,p=0,m=a;p<m.length;p++){var u=m[p];o.value[i]==u.value[i]&&a.splice(c,1),c++}}}this[e]=[],this.todosSeleccionados[e]&&(a=[]),this.todosSeleccionados[e]=!1},e.prototype.generarCadenaRandom=function(e,t,a){void 0===a&&(a=!1);for(var n="",i=Math.floor(Math.random()*(9999*t-1111))+t,r=0;r<t;r++)i+=""+Math.floor(Math.random()*(9999*t-1111))+t;n=""+Math.round((new Date).getTime()/1e3)+i,n=btoa(n),n=n.substr(0,n.length-3),n=n.substr(Math.floor(90*Math.random())+1,t),a?e.patchValue(n):e=n},e.prototype.select_item_autocomplete=function(e,t,a,n){void 0===n&&(n=!1),n?e.patchValue(a[t]):e=a[t]},e.prototype.agregar_form_array=function(e,t){e.push(this.fb.group(t))},e.prototype.quitar_form_array=function(e,t){e.removeAt(t)},e.prototype.seleccionarImagenBase64=function(e,t,a){void 0===a&&(a=!1);var n=e.target.files,i=this;if(i.error_archivo=!1,a){for(var r,s=[],o=0;r=n[o];o++){var c=new FileReader;c.readAsBinaryString(r),c.onload=function(e){return function(e){try{s.push(btoa(e.target.result))}catch(e){i.error_archivo=!0}}}()}t.patchValue(s)}else{var l=n[0];if(n&&l){var c=new FileReader;c.readAsBinaryString(l),c.onload=function(e){return function(e){try{t.patchValue(btoa(e.target.result))}catch(e){i.error_archivo=!0}}}()}}},e.prototype.convertirJson=function(e,t,a){t.patchValue(""),this.error_json=!1;var n=e.target.files,i=n[0],r=this;if(n&&i){var s="",o=new FileReader;o.readAsBinaryString(i),o.onload=function(e){return function(e){try{s=JSON.parse(e.target.result),t.patchValue(s)}catch(e){r.error_json=!0}}}()}},e.prototype.mensaje=function(e,t){void 0===e&&(e=6),void 0===t&&(t=["bottom","left"]);var a={showProgressBar:!0,pauseOnHover:!1,clickToClose:!0,maxLength:this.mensajeResponse.texto.length};this.options={position:t,timeOut:1e3*e,lastOnBottom:!0},""==this.mensajeResponse.titulo&&(this.mensajeResponse.titulo=this.titulo),"alert"==this.mensajeResponse.clase&&this.notificacion.alert(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"success"==this.mensajeResponse.clase&&this.notificacion.success(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"info"==this.mensajeResponse.clase&&this.notificacion.info(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"warning"!=this.mensajeResponse.clase&&"warn"!=this.mensajeResponse.clase||this.notificacion.warn(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"error"!=this.mensajeResponse.clase&&"danger"!=this.mensajeResponse.clase||this.notificacion.error(this.mensajeResponse.titulo,this.mensajeResponse.texto,a)},e}();p([a.i(n.Input)(),m("design:type",String)],f.prototype,"URL",void 0),p([a.i(n.Input)(),m("design:type",String)],f.prototype,"titulo",void 0),p([a.i(n.Input)(),m("design:type","function"==typeof(g=void 0!==s.FormGroup&&s.FormGroup)&&g||Object)],f.prototype,"dato",void 0),f=p([a.i(n.Component)({selector:"formulario",template:'<simple-notifications [options]="options"></simple-notifications>\n    <div class="modal" id="confirmarEliminar">\n        <div class="modal-background"></div>\n        <div class="modal-card">\n            <header class="modal-card-head">\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\n            <button class="delete" (click)="cancelarModal()"></button>\n            </header>\n            <section class="modal-card-body">\n                <div class="content">\n                    <h1>¿Esta seguro de eliminar el elemento?</h1>\n                    <p>Ya no se podra recuperar la información</p>\n                </div>\n            </section>\n            <footer class="modal-card-foot">\n            <a class="button is-success" (click)="borrar(borrarItem)" [ngClass]="{\'is-loading\': borrarCargando}">Continuar</a>\n            <a class="button" (click)="cancelarModal()">Cancelar</a>\n            </footer>\n        </div>\n    </div>\n    '}),m("design:paramtypes",["function"==typeof(h=void 0!==r.a&&r.a)&&h||Object,"function"==typeof(v=void 0!==o.b&&o.b)&&v||Object,"function"==typeof(b=void 0!==c.a&&c.a)&&b||Object,"function"==typeof(y=void 0!==r.c&&r.c)&&y||Object,"function"==typeof(_=void 0!==i.Location&&i.Location)&&_||Object,"function"==typeof(x=void 0!==l.a&&l.a)&&x||Object,"function"==typeof(j=void 0!==s.FormBuilder&&s.FormBuilder)&&j||Object,"function"==typeof(E=void 0!==u.a&&u.a)&&E||Object])],f);var g,h,v,b,y,_,x,j,E},AWv4:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},Au7A:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333}.contenedor-pedido.con-tabs .top-bar{padding:.5em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-pedido{background:#fff;border-radius:1em;overflow:hidden}.contenedor-pedido.con-tabs{border-top-left-radius:0!important;border-top-right-radius:0!important}",""]),e.exports=e.exports.toString()},AuZw:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("R/vV"),o=a("Uvud"),c=a("fjeY"),l=a("+ZDf"),d=a("Qew2"),u=a("ooTp"),p=a("ww4W");a.d(t,"a",function(){return f});var m=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},f=function(){function e(){}return e}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},B9VC:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("NVOs"),s=a("5oXY"),o=a("1APj"),c=(a.n(o),a("h0qH")),l=(a.n(c),a("aV5h")),d=(a.n(l),a("q3ik")),u=(a.n(d),a("+pb+")),p=(a.n(u),a("uCY4")),m=(a.n(p),a("6Yye")),f=(a.n(m),a("NAeX")),g=a("uJfw"),h=a("ve71"),v=a("0H6m"),b=a("Nqas");a.d(t,"a",function(){return x});var y=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},x=function(){function e(e,t,a,n,i){this.title=e,this.route=t,this.pedidosService=a,this.recepcionService=n,this.stockService=i,this.cargando=!1,this.guardando=!1,this.cargandoStock=!1,this.capturarStock=!1,this.mostrarDialogo=!1,this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}},this.statusRecepcion="NV",this.mensajeError=new b.a,this.mensajeAdvertencia=new b.a,this.mensajeExito=new b.a,this.formStock={},this.lotesSurtidos=[],this.listaStock=[],this.claveInsumoSeleccionado=null,this.claveNoSolicitada=!1,this.itemSeleccionado=null,this.formularioTieneError=function(e,t){return this.formularioRecepcion.get(e).hasError(t)&&this.formularioRecepcion.get(e).touched},this.fb=new r.FormBuilder;var s=new Date,o=("0"+s.getDate()).slice(-2),c=("0"+(s.getMonth()+1)).slice(-2),l=s.getFullYear()+"-"+c+"-"+o;this.formularioRecepcion=this.fb.group({entrega:["",[r.Validators.required]],recibe:["",[r.Validators.required]],fecha_movimiento:[l,[r.Validators.required]],observaciones:""})}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Surtir pedido / Almacén"),this.route.params.subscribe(function(t){e.id=t.id}),this.cargando=!0,this.recepcionService.verRecepcionPedido(this.id).subscribe(function(t){e.cargando=!1,e.pedido=new v.a(!0),e.pedido.paginacion.resultadosPorPagina=10,e.pedido.filtro.paginacion.resultadosPorPagina=10,e.folio=t.folio;var a={};if(1==t.recepciones.length){var n=t.recepciones[0].entrada_abierta.insumos;for(var i in n){var r=n[i];a[r.stock.clave_insumo_medico]||(a[r.stock.clave_insumo_medico]={cantidad:0,stock:[]}),a[r.stock.clave_insumo_medico].cantidad+=+r.cantidad,r.stock.cantidad=+r.cantidad,a[r.stock.clave_insumo_medico].stock.push(r.stock)}for(var s in a)e.lotesSurtidos.push({clave:s,cantidad:a[s].cantidad});e.statusRecepcion="BR"}"FI"==t.status&&(e.statusRecepcion="FI");for(var o in t.insumos){var c=t.insumos[o],r=c.insumos_con_descripcion;if(r.cantidad=+c.cantidad_solicitada,r.cantidad_recibida=+c.cantidad_recibida,r.monto=+c.monto_solicitado,r.precio=+c.precio_unitario,r.totalStockAsignado=+c.cantidad_recibida,a[r.clave]){r.listaStockAsignado=[],r.totalStockAsignado+=a[r.clave].cantidad;for(var l in a[r.clave].stock){var d=a[r.clave].stock[l];r.listaStockAsignado.push({codigo_barras:d.codigo_barras,lote:d.lote,fecha_caducidad:d.fecha_caducidad,cantidad:d.cantidad})}}e.pedido.lista.push(r)}t.insumos=void 0,e.pedido.datosImprimir=t,e.pedido.indexar(),e.pedido.listar(1)},function(t){e.cargando=!1,e.mensajeError=new b.a(!0),e.mensajeError.mostrar;try{var a=t.json();401==t.status?e.mensajeError.texto="No tiene permiso para hacer esta operación.":e.mensajeError.texto=a.error}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.seleccionarItem=function(e){this.itemSeleccionado=e,this.capturarStock=!0,this.formStock={},this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}}},e.prototype.buscar=function(e,t,a,n){var i=t.value;if(27==e.keyCode)return e.preventDefault(),e.stopPropagation(),t.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(e.preventDefault(),e.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(e){var t=n[e].input.value;if(""==t)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[e].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(e){}return i.includes(t.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(e,t){return e.length-t.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},e.prototype.buscarStockApi=function(e,t){var a=this;void 0===t&&(t=null),this.cargandoStock=!0,this.stockService.buscar(e,t).subscribe(function(e){if(a.cargandoStock=!1,a.claveNoSolicitada=!1,a.listaStock=e,e.length>0){a.claveInsumoSeleccionado=e[0].clave_insumo_medico;for(var t=!1,n=0;n<a.pedido.lista.length;n++)if(a.pedido.lista[n].clave==a.claveInsumoSeleccionado){a.pedido.filtro.activo=!1;var i=Math.ceil((n+1)/a.pedido.paginacion.resultadosPorPagina);a.pedido.listar(i),a.itemSeleccionado=a.pedido.lista[n],t=!0}t?a.verificarItemsAsignadosStockApi():(a.claveNoSolicitada=!0,a.listaStock=[])}console.log("Stock cargado.")},function(e){a.cargandoStock=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){};try{e.json();401==e.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==e.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.finalizar=function(){this.mostrarDialogo=!0},e.prototype.cerrarDialogo=function(){this.mostrarDialogo=!1},e.prototype.guardar=function(e){var t=this;void 0===e&&(e=!1),this.guardando=!0;var a;if(e){if(this.formularioRecepcion.get("entrega").markAsTouched(),this.formularioRecepcion.get("recibe").markAsTouched(),this.formularioRecepcion.get("fecha_movimiento").markAsTouched(),!this.formularioRecepcion.valid)return!1;if(!confirm("Atención la recepción ya no podra editarse, Esta seguro que desea concluir el movimiento?"))return!1;a=this.formularioRecepcion.value,a.status="FI",a.stock=[]}else a={status:"BR",observaciones:"",stock:[]};for(var n in this.pedido.lista){var i=this.pedido.lista[n];if(i.totalStockAsignado>0)for(var r in i.listaStockAsignado){var s={clave_insumo_medico:i.clave,lote:i.listaStockAsignado[r].lote,fecha_caducidad:i.listaStockAsignado[r].fecha_caducidad,cantidad:i.listaStockAsignado[r].cantidad,existencia:i.listaStockAsignado[r].cantidad,codigo_barras:i.listaStockAsignado[r].codigo_barras,precio_unitario:0,precio_total:0};a.stock.push(s)}}this.recepcionService.guardarRecepcionPedido(this.pedido.datosImprimir.id,a).subscribe(function(e){t.mostrarDialogo=!1,t.guardando=!1,t.mensajeExito=new b.a(!0),"FI"==a.status?(t.statusRecepcion="FI",t.mensajeExito.texto="Recepción Finalizada"):(t.statusRecepcion="BR",t.mensajeExito.texto="Datos Guardados"),t.mensajeExito.mostrar=!0,console.log("Recepción guardada")},function(e){t.guardando=!1,t.mostrarDialogo=!1,console.log(e),t.mensajeError=new b.a(!0),t.mensajeError.texto="No especificado",t.mensajeError.mostrar=!0;try{var a=e.json();console.log(a),401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==e.status&&a.error&&(t.mensajeError.texto=a.error,t.mensajeError.cuentaAtras=1e3)}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}}),console.log(a)},e.prototype.buscarStock=function(e,t,a){return 13==e.keyCode&&(e.preventDefault(),e.stopPropagation(),""!=a&&(this.buscarStockApi(a),t.select(),!1))},e.prototype.limpiarStock=function(){this.capturarStock=!1,this.listaStock=[],this.itemSeleccionado=null},e.prototype.eliminarStock=function(e){var t=this.itemSeleccionado.listaStockAsignado.indexOf(e);this.itemSeleccionado.listaStockAsignado.splice(t,1),this.calcularTotalStockItem(),this.verificarItemsAsignadosStockApi()},e.prototype.asignarStock=function(){this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}};var e=0;if(this.formStock.cantidad?this.formStock.cantidad<=0&&(this.erroresFormularioStock.cantidad={error:!0,texto:"La cantidad recibida debe ser mayor a 0."},e++):(this.erroresFormularioStock.cantidad={error:!0,texto:"Este campo es requerido."},e++),this.itemSeleccionado.tiene_fecha_caducidad&&!this.formStock.fecha_caducidad)this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"Este campo es requerido."},e++;else if(this.formStock.fecha_caducidad){var t=this.formStock.fecha_caducidad.split("-"),a=!1;if(3!=t.length?a=!0:4!=t[0].length||2!=t[1].length||2!=t[2].length?a=!0:parseInt(t[1])<1||parseInt(t[1])>12?a=!0:(parseInt(t[2])<1||parseInt(t[2])>31)&&(a=!0),a)this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"El formato de fecha no es correcto."},e++;else{var n=new Date,i=new Date(t[0],parseInt(t[1])-1,parseInt(t[2])),r=void 0;r=12*(i.getFullYear()-n.getFullYear()),r-=n.getMonth(),r+=i.getMonth(),r<6&&(this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"La fecha de caducidad no puede ser menor a 6 meses."},e++),console.log(r)}}if(this.formStock.lote||(this.erroresFormularioStock.lote={error:!0,texto:"Este campo es requerido."},e++),e)return!1;null==this.itemSeleccionado.listaStockAsignado&&(this.itemSeleccionado.listaStockAsignado=[]);var s=this.itemSeleccionado.cantidad_recibida;for(var o in this.itemSeleccionado.listaStockAsignado)s+=this.itemSeleccionado.listaStockAsignado[o].cantidad;s+=this.formStock.cantidad,s<=this.itemSeleccionado.cantidad?(this.itemSeleccionado.totalStockAsignado=s,this.itemSeleccionado.listaStockAsignado.push({codigo_barras:this.formStock.codigo_barras,lote:this.formStock.lote,fecha_caducidad:this.formStock.fecha_caducidad,cantidad:this.formStock.cantidad}),this.resetearFormStock(),this.calcularTotalStockItem()):this.erroresFormularioStock.cantidad={error:!0,texto:"La cantidad recibida supera la cantidad solicitada."}},e.prototype.cancelarCapturaStock=function(){this.resetearFormStock(!0)},e.prototype.resetearFormStock=function(e){void 0===e&&(e=!1),e?this.formStock={}:(this.formStock.lote=void 0,this.formStock.fecha_caducidad=void 0,this.formStock.cantidad=void 0)},e.prototype.validarItemStock=function(e,t){if(void 0===t&&(t=!1),null==e.cantidad)return t&&this.asignarMaximoPosible(e),void this.calcularTotalStockItem();var a=parseInt(e.cantidad);return isNaN(a)?(this.asignarMaximoPosible(e),void this.calcularTotalStockItem()):a<=0?(this.asignarMaximoPosible(e),void this.calcularTotalStockItem()):(a>e.existencia&&(e.cantidad=e.existencia),this.verificarTotalStockItem()||this.asignarMaximoPosible(e),void this.calcularTotalStockItem())},e.prototype.asignarMaximoPosible=function(e){var t=0;for(var a in this.itemSeleccionado.listaStockAsignado)this.itemSeleccionado.listaStockAsignado[a]!=e&&(t+=this.itemSeleccionado.listaStockAsignado[a].cantidad);var n=this.itemSeleccionado.cantidad-t;n>=e.existencia&&(e.cantidad=e.existencia),n<e.existencia&&(e.cantidad=n)},e.prototype.verificarItemsAsignadosStockApi=function(){for(var e in this.listaStock){this.listaStock[e].asignado=!1;for(var t in this.itemSeleccionado.listaStockAsignado)if(this.itemSeleccionado.listaStockAsignado[t].id==this.listaStock[e].id){this.listaStock[e].asignado=!0;break}}},e.prototype.verificarTotalStockItem=function(){var e=0;for(var t in this.itemSeleccionado.listaStockAsignado)e+=this.itemSeleccionado.listaStockAsignado[t].cantidad;return this.itemSeleccionado.totalStockAsignado<=this.itemSeleccionado.cantidad},e.prototype.calcularTotalStockItem=function(){var e=this.itemSeleccionado.cantidad_recibida;for(var t in this.itemSeleccionado.listaStockAsignado)e+=this.itemSeleccionado.listaStockAsignado[t].cantidad;if(0==e){var a=0;for(var t in this.lotesSurtidos)this.lotesSurtidos[t].clave==this.itemSeleccionado.clave&&this.lotesSurtidos.splice(a,1),a++}else{var n=!1;for(var t in this.lotesSurtidos)this.lotesSurtidos[t].clave==this.itemSeleccionado.clave&&(n=!0,this.lotesSurtidos[t].cantidad=e);n||this.lotesSurtidos.push({clave:this.itemSeleccionado.clave,cantidad:e})}this.itemSeleccionado.totalStockAsignado=e},e.prototype.keyboardInput=function(e){32==e.keyCode&&e.ctrlKey&&(event.preventDefault(),event.stopPropagation())},e}();x=y([a.i(n.Component)({selector:"app-recepcion",template:a("hNLj"),styles:[a("lO27")]}),_("design:paramtypes",["function"==typeof(j=void 0!==i.b&&i.b)&&j||Object,"function"==typeof(E=void 0!==s.c&&s.c)&&E||Object,"function"==typeof(I=void 0!==f.a&&f.a)&&I||Object,"function"==typeof(P=void 0!==g.a&&g.a)&&P||Object,"function"==typeof(C=void 0!==h.a&&h.a)&&C||Object])],x);var j,E,I,P,C},BAmh:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},BBcz:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},BSeR:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.usuario={}}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e}();i([a.i(n.Input)(),r("design:type",String)],s.prototype,"modulo",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"icono",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"url",void 0),s=i([a.i(n.Component)({selector:"menu-almacen-articulos",template:a("YD97"),styles:[a("ELSb")]}),r("design:paramtypes",[])],s)},BXa0:function(e,t){e.exports='<div class="modal is-active" >\r\n  <div class="modal-background" (click)="cerrar()"></div>\r\n  <div class="modal-card" style="width:95%; height: 100%;">\r\n   \r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      \r\n                    \r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-search"></i></span> Insumos médicos \r\n          </h1>\r\n          <p class="control is-expanded">\r\n              <input class="input "  type="text" placeholder="Buscar insumo" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n          </p>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrar()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      \r\n      <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n          <br>\r\n          <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n          <br>\r\n          <br>\r\n      </div>\r\n      <table class="table" *ngIf="!cargando" style="font-size: 0.8em;" >\r\n        <thead>\r\n        \r\n            <tr>\r\n            <th></th>\r\n            <th class="is-hidden-mobile">Clave</th>\r\n            <!--th>Generico</th-->\r\n            <!--th class="is-hidden-mobile">Descripción</th-->\r\n            <th>Descripción</th>\r\n            <th style="text-align:center" class="is-hidden-mobile">Grupo(s)</th>\r\n            <th style="text-align:center"><abbr title="Tipo de insumo">Tipo</abbr></th>\r\n            <th style="text-align:left" *ngIf="conPrecios">Precio</th>\r\n            <!--th style="text-align:center"><abbr title="Información">Info</abbr></th-->\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor="let item of insumos" class="is-unselectable" [ngClass]="{\'item-seleccionado\': item == insumoSeleccionado, \'is-disabled\': (!conClues && listaAgregados.indexOf(item.clave) >= 0)}" style="cursor: pointer" (click)="seleccionar(item)">\r\n              <td valign="middle">\r\n                <span *ngIf="item != insumoSeleccionado" class="icon is-small" style="color:#999"><i class="fa fa-circle-thin"></i></span>\r\n                <span *ngIf="item == insumoSeleccionado" class="icon is-small" style="color:#00d1b2"><i class="fa fa-check-circle"></i></span>\r\n              </td>                      \r\n              <td class="is-hidden-mobile">{{ item.clave }}</td>\r\n\r\n              <td>\r\n                <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                <!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n                <div style="line-height:1em;">\r\n                  <small>{{ item.descripcion }}</small>\r\n                </div>\r\n                <div style="padding: 0.5em 0 0.5em 0; ">\r\n                  <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                  <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                  <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                  <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                  <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                    <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                    <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                  </span>\r\n                </div>\r\n              </td>\r\n\r\n              <!--td >\r\n                <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                <b>{{ item.generico_nombre }}</b> <br  class="is-hidden-mobile"><small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                \r\n                <div class="is-hidden-tablet" *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                  <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                  <small><i>{{ item.informacion.contenido }} </i></small>\r\n                </div>\r\n                <div class="is-hidden-tablet" *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                  <small>{{ item.descripcion }}</small>\r\n                </div>\r\n                <div class="is-hidden-tablet" style="padding: 0.5em 0 0.5em 0; ">\r\n                  <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                  <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                  <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                  <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                  \r\n                  <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                    <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                    <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                  </span>\r\n                  \r\n                </div>\r\n              </td> \r\n\r\n              <td class="is-hidden-mobile">\r\n                <div *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                  <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                  <small><i>{{ item.informacion.contenido }} </i></small>\r\n                </div>\r\n                <div *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                  <small>{{ item.descripcion }}</small>\r\n                </div>\r\n                <div style="padding: 0.5em 0 0.5em 0; ">\r\n                  <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                  <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                  <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                  <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                  <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                    <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                    <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                  </span>\r\n                </div>\r\n              </td-->\r\n\r\n              <td style="text-align:center;" class="is-hidden-mobile">\r\n                <div *ngIf="item.generico">\r\n                  <span *ngFor="let grupo of item.generico.grupos">{{grupo.nombre}}<br></span>\r\n                </div>\r\n              </td>\r\n              <td style="text-align:center;">\r\n                <b>\r\n                  <abbr *ngIf="item.tipo == \'ME\'" title="Medicamento">ME</abbr>\r\n                  <abbr *ngIf="item.tipo == \'MC\'" title="Material de curación">MC</abbr>\r\n                  <abbr *ngIf="item.tipo == \'AD\'" title="Auxiliar de diagnóstico">AD</abbr>\r\n                </b>\r\n              </td>\r\n              <td style="text-align:left;" *ngIf="conPrecios">\r\n                <b>\r\n                  <abbr>$ {{item.precio | number:\'1.2-2\'}}</abbr>\r\n                </b>\r\n              </td>\r\n              <!--td style="text-align:center">\r\n                <a (click)="mostrarFichaInformativa($event,item.clave)"><span class="icon"><i class="fa fa-info-circle"></i></span></a>\r\n              </td-->\r\n            </tr>  \r\n            <tr *ngIf="insumos.length == 0 && searchBox.value != \'\'">\r\n                <td colspan="7" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n            </tr>\r\n            <tr *ngIf="insumos.length == 0 && searchBox.value == \'\' ">\r\n                <td colspan="7" style="vertical-align: middle; color:#888;">Por favor escriba en el campo de búsqueda para encontrar insumos.</td>                    \r\n            </tr>      \r\n        </tbody>  \r\n      </table>\r\n    <br>\r\n            \r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n      \r\n      <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente(searchBox.value)" \r\n                (onAnterior)="paginaAnterior(searchBox.value)" \r\n                (onListar)="listar(searchBox.value,$event)" \r\n                *ngIf="total > 0 && total > resultadosPorPagina "></paginacion>\r\n\r\n    \r\n        \r\n      <div class="notification is-dark is-unselectable mensaje-agregar" [ngClass]="{ \'mostrar\': mensajeAgregado.mostrar}"    *ngIf="mensajeAgregado.mostrar" (click)="mensajeAgregado.mostrar=false">\r\n        <span class="icon"><i class="fa fa-check-circle"></i></span> <span>Agregado</span>\r\n      </div>\r\n  \r\n      <form (submit)="enviar($event)" >\r\n        <div class="columns">\r\n          <div class="column" *ngIf="conClues">\r\n           \r\n               <div class="field">\r\n                <label>Unidad médica:</label>\r\n                <p class="control is-expanded">                  \r\n                  <span class="select is-fullwidth">              \r\n                    <select (change)="seleccionarClues($event.target.value)" #cluesSelect [disabled]="listaCluesUtilizadasConInsumo.length == listaClues.length">\r\n                      <option value="-1">Seleccione una clues</option>\r\n                      <option value="TODAS" *ngIf="listaClues.length > 0" [disabled]="listaCluesUtilizadasConInsumo.length > 0">Todas las unidades médicas</option>\r\n                      <option *ngFor="let um of listaClues" value="{{ um.clues }}" [disabled]="listaCluesUtilizadasConInsumo.indexOf(um.clues)>= 0">{{ um.clues }} - {{ um.nombre }}</option>\r\n                    </select>\r\n                  </span>\r\n                </p>\r\n              </div>                   \r\n          </div>\r\n          <div class="column">\r\n           \r\n              <div class="control is-grouped is-pulled-right" >            \r\n                <p class="control is-expanded" [ngClass]=" {\'is-hidden\': !conCantidad }" >\r\n                    <label>Consumo promedio mensual: 0</label>\r\n                    <input class="input is-medium" [disabled]="insumoSeleccionado == null" type="number" placeholder="Cantidad" #cantidadBox id="cantidad" (keyup)="comprobarCantidad(cantidadBox.value)" >\r\n                </p>\r\n                <p class="control">\r\n                    <label>&nbsp;</label>\r\n                    <button [disabled]="(!cantidadValida && conCantidad )|| insumoSeleccionado == null || (conClues && clues == -1)" class="button is-medium is-primary " >\r\n                    <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar</span>\r\n                    </button>\r\n                </p>\r\n              </div>\r\n          </div>\r\n        </div>\r\n        \r\n      </form>\r\n      \r\n\r\n    </footer>\r\n      \r\n    <div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n        <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n        <b>Error:</b> {{ mensajeError.texto }}\r\n    </div>\r\n  </div>\r\n</div>\r\n'},BkIj:function(e,t){e.exports='<aside class="menu" style="padding: 1em;">\r\n    <p class="menu-label">\r\n        Accesos directos\r\n    </p>\r\n    <ul class="menu-list">\r\n        <li><a routerLink="/panel-control/usuarios" routerLinkActive="is-active"><span class="icon"  ><i class="fa fa-user"></i></span> Usuarios</a></li>\r\n        <li><a routerLink="/panel-control/roles" routerLinkActive="is-active"><span class="icon"><i class="fa fa-users"></i></span> Roles</a></li>\r\n        <li><a routerLink="/panel-control/permisos" routerLinkActive="is-active"><span class="icon"><i class="fa fa-shield"></i></span> Permisos</a></li>\r\n    </ul>\r\n    <p class="menu-label">\r\n        Catálogos\r\n    </p>\r\n    <ul class="menu-list">\r\n        <li><a routerLink="/panel-control/sync/estatus" routerLinkActive="is-active"><span class="icon"><i class="fa fa-server"></i></span> Estatus de sincronización</a></li>\r\n        <li><a routerLink="/panel-control/sync/manual" routerLinkActive="is-active"><span class="icon"  ><i class="fa fa-cloud-upload"></i></span> Sincronización manual</a></li>\r\n        \r\n    </ul>\r\n</aside>'},BmPo:function(e,t,a){"use strict";var n=a("Gvdl"),i=(a.n(n),a("3j3K")),r=a("Qbdm"),s=a("EEr4"),o=(a.n(s),a("1APj")),c=(a.n(o),a("h0qH")),l=(a.n(c),a("aV5h")),d=(a.n(l),a("q3ik")),u=(a.n(d),a("+pb+")),p=(a.n(u),a("uCY4")),m=(a.n(p),a("6Yye")),f=(a.n(m),a("52hV")),g=a("30gs"),h=a("Nqas"),v=a("3MNG");a.d(t,"a",function(){return _});var b=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,a,n){this.title=e,this.crudService=t,this.authService=a,this.notificacion=n,this.cargando=!1,this.borrarCargando=!1,this.dato=[],this.respuesta=[],this.mensajeResponse=new h.a(!0),this.paginaActual=1,this.resultadosPorPagina=20,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=20,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[],this.borrarItem="",this.borrarIndex="",this.options={position:["bottom","left"],timeOut:2e3,lastOnBottom:!0}}return e.prototype.ngOnInit=function(){var e=this;this.listar(1),this.title.setTitle(this.titulo);var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.crudService.buscar(t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda,e.URL):n.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeResponse.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeResponse.texto="No tiene permiso para hacer esta operación.",t.mensajeResponse.clase="danger",this.mensaje(2))}catch(a){500==e.status?t.mensajeResponse.texto="500 (Error interno del servidor)":t.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",t.mensajeResponse.clase="danger",this.mensaje(2)}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1)})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,this.cargando=!0,this.crudService.buscar(e,t,this.resultadosPorPaginaBusqueda,this.URL).subscribe(function(e){a.cargando=!1,a.resultadosBusqueda=e.data,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var t=0;t<a.paginasTotalesBusqueda;t++)a.indicePaginasBusqueda.push(t+1)},function(n){a.cargando=!1,a.mensajeResponse.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeResponse.texto="No tiene permiso para hacer esta operación.",a.mensajeResponse.clase="danger",a.mensaje(2))}catch(e){500==n.status?a.mensajeResponse.texto="500 (Error interno del servidor)":a.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",a.mensajeResponse.clase="danger",a.mensaje(2)}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,this.cargando=!0,this.crudService.lista(e,this.resultadosPorPagina,this.URL).subscribe(function(e){t.cargando=!1,t.dato=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);t.mensajeResponse.mostrar=!0,t.mensajeResponse.texto="lista cargada",t.mensajeResponse.clase="success",t.mensaje(2)},function(e){t.cargando=!1,t.mensajeResponse.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeResponse.texto="No tiene permiso para hacer esta operación.",t.mensajeResponse.clase="danger",t.mensaje(2))}catch(a){500==e.status?t.mensajeResponse.texto="500 (Error interno del servidor)":t.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",t.mensajeResponse.clase="danger",t.mensaje(2)}})},e.prototype.eliminar=function(e,t){this.borrarItem=e,this.borrarIndex=t,document.getElementById("confirmarEliminar").classList.add("is-active")},e.prototype.cancelarModal=function(){document.getElementById("confirmarEliminar").classList.remove("is-active")},e.prototype.borrar=function(e,t){var a=this;e.cargando=!0,this.borrarCargando=!0,this.crudService.eliminar(e.id,this.URL).subscribe(function(n){e.cargando=!1,a.borrarCargando=!1,a.dato.splice(t,1),a.mensajeResponse.mostrar=!0,a.mensajeResponse.texto="Se eliminó el elemento de la lista.",a.mensajeResponse.clase="success",a.mensaje(2),a.cancelarModal()},function(n){e.cargando=!1,a.borrarCargando=!1,a.mensajeResponse.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(e,t)},a.cancelarModal();try{n.json();401==n.status&&(a.mensajeResponse.texto="No tiene permiso para hacer esta operación.",a.mensajeResponse.clase="danger",a.mensaje(2))}catch(e){500==n.status?a.mensajeResponse.texto="500 (Error interno del servidor)":a.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",a.mensajeResponse.clase="danger",a.mensaje(2)}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e.prototype.mensaje=function(e,t){void 0===e&&(e=6),void 0===t&&(t=["bottom","left"]);var a={showProgressBar:!0,pauseOnHover:!1,clickToClose:!0,maxLength:this.mensajeResponse.texto.length};this.options={position:t,timeOut:1e3*e,lastOnBottom:!0},""==this.mensajeResponse.titulo&&(this.mensajeResponse.titulo=this.titulo),"alert"==this.mensajeResponse.clase&&this.notificacion.alert(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"success"==this.mensajeResponse.clase&&this.notificacion.success(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"info"==this.mensajeResponse.clase&&this.notificacion.info(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"warning"!=this.mensajeResponse.clase&&"warn"!=this.mensajeResponse.clase||this.notificacion.warn(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"error"!=this.mensajeResponse.clase&&"danger"!=this.mensajeResponse.clase||this.notificacion.error(this.mensajeResponse.titulo,this.mensajeResponse.texto,a)},e}();b([a.i(i.Input)(),y("design:type",String)],_.prototype,"URL",void 0),b([a.i(i.Input)(),y("design:type",String)],_.prototype,"titulo",void 0),_=b([a.i(i.Component)({selector:"listar",template:'<simple-notifications [options]="options"></simple-notifications>\n    <div class="modal" id="confirmarEliminar">\n        <div class="modal-background"></div>\n        <div class="modal-card">\n            <header class="modal-card-head">\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\n            <button class="delete" (click)="cancelarModal()"></button>\n            </header>\n            <section class="modal-card-body">\n                <div class="content">\n                    <h1>¿Esta seguro de eliminar el elemento?</h1>\n                    <p>Ya no se podra recuperar la información</p>\n                </div>\n            </section>\n            <footer class="modal-card-foot">\n            <a class="button is-success" (click)="borrar(borrarItem, borrarIndex)" [ngClass]="{\'is-loading\': borrarCargando}">Continuar</a>\n            <a class="button" (click)="cancelarModal()">Cancelar</a>\n            </footer>\n        </div>\n    </div>'}),y("design:paramtypes",["function"==typeof(x=void 0!==r.b&&r.b)&&x||Object,"function"==typeof(j=void 0!==g.a&&g.a)&&j||Object,"function"==typeof(E=void 0!==f.a&&f.a)&&E||Object,"function"==typeof(I=void 0!==v.a&&v.a)&&I||Object])],_);var x,j,E,I},BqOv:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("UIlc"),s=a("g2pd"),o=a("DnYL"),c=a("vYWY"),l=a("qbyw");a.d(t,"a",function(){return p});var d=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},u=[{path:"almacen/pedidos",redirectTo:"/almacen/pedidos/todos",pathMatch:"full"},{path:"almacen/pedidos",children:[{path:"todos",component:r.a},{path:"borradores",component:r.a},{path:"en-transito",component:r.a},{path:"por-surtir",component:r.a},{path:"finalizados",component:r.a},{path:"finalizados/completos",component:r.a},{path:"finalizados/incompletos",component:r.a},{path:"finalizados/cancelados",component:r.a},{path:"expirados",component:r.a},{path:"expirados-cancelados",component:r.a},{path:"farmacia-subrogada",component:r.a},{path:"nuevo",component:s.a},{path:"editar/:id",component:s.a},{path:"ver/:id",component:o.a},{path:"recepcion/:id",component:c.a}],canActivate:[l.a]}],p=function(){function e(){}return e}();p=d([a.i(n.NgModule)({imports:[i.b.forChild(u)],exports:[i.b],providers:[]})],p)},BvwC:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},C64X:function(e,t){e.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Farmacia Subrrogada" class="nav-item pull-left nav-hub-active"  routerLink="/farmacia-subrrogada">\r\n            \r\n            <img src="assets/hub-farmacia-sub.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item" >\r\n                <h1 class="title">&nbsp;Farmacia Subrrogada</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},CMHd:function(e,t){e.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Lista de Pacientes\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted "  (click)="showDialog = !showDialog">\r\n                            <span class="icon" ><i class="fa fa-plus"></i></span><span>Nuevo Paciente</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th></th>\r\n                    <th><abbr title="Paciente ID">ID</abbr></th>\r\n                    <th>Nombre</th>\r\n                    <th>Fecha Nacimiento</th>\r\n                    <th>Localidad (Municipio)</th>\r\n                    <th>Fecha Ingreso</th>\r\n                    <th>Ingresado</th>\r\n                    <th>Unidad</th>\r\n                    <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pacientes; let i=index">\r\n                        <th><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.fecha_nacimiento }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.localidad.nombre }} ( {{item.localidad.municipio.nombre }} ) </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">DESCONOCIDO</a></td>\r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.ingresoactivos[0].fecha_hora_ingreso}} </a></td>\r\n                         <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"></a></td>\r\n\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">SI </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">NO </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.ingresoactivos[0].unidad.nombre}} </a></td>\r\n                       \r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"> </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-primary" routerLink="/pacientes/modulo/ingreso/{{item.id}}"><span class="icon"><i class="fa fa-hospital-o"></i></span></a></td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="pacientes.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.fecha_nacimiento }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.localidad.nombre }} ( {{item.localidad.municipio.nombre }} ) </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">DESCONOCIDO</a></td>\r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.ingresoactivos[0].fecha_hora_ingreso}} </a></td>\r\n                         <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"></a></td>\r\n\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">SI </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">NO </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.ingresoactivos[0].unidad.nombre}} </a></td>\r\n                       \r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"> </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-primary" routerLink="/pacientes/modulo/ingreso/{{item.id}}"><span class="icon"><i class="fa fa-hospital-o"></i></span></a></td>\r\n                    \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n    </div>        \r\n   \r\n</div>\r\n\r\n<div id="modal-paciente" class="modal is-active" [ngClass]="{\'is-active\': showDialog}">\r\n  <div class="modal-background"  (click)="showDialog = !showDialog"></div>\r\n  <div class="modal-card" style="width:60%; height: auto;">\r\n    <header class="modal-card-head" style="background-color: #00d1b2" >\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-user"></i></span> Agregar Paciente\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="showDialog = !showDialog"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="section">\r\n                <form name="form" [formGroup]="paciente"   (ngSubmit)="enviar()" >     \r\n                  \r\n                  <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Paciente Conocido</label>\r\n                        <span class="select is-fullwidth">\r\n                            <select formControlName="conocido" name="conocido" (change)="paciente_conocido()">\r\n                                <option value="1">SI</option>\r\n                                <option value="2">NO</option>\r\n                            </select>\r\n\r\n                        </span> \r\n                    </p>\r\n\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Resposable Conocido</label>\r\n                        <span class="select is-fullwidth">\r\n                            <select formControlName="responsableconocido" name="responsableconocido" (change)="responsable()">\r\n                                <option value="1">SI</option>\r\n                                <option value="2">NO</option>\r\n                            </select>\r\n\r\n                        </span> \r\n                    </p>\r\n                    \r\n                  </div>\r\n\r\n                  \r\n                   <div [hidden]="verForm">\r\n                        \r\n                    <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                        <div class="container">\r\n                          <div class="heading">\r\n                            <h1 class="title">Datos del Paciente</h1>\r\n                          </div>\r\n                        </div>\r\n                    </section> \r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Nombre</label>\r\n                          <input class="input" autofocus type="text"  placeholder="Nombre" formControlName="nombre">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Sexo</label>\r\n                            <span class="select is-fullwidth">\r\n                                <select formControlName="sexo" name="sexo">\r\n                                    <option value="1">MASCULINO</option>\r\n                                    <option value="2">FAMENINO</option>\r\n                                </select>\r\n\r\n                            </span> \r\n                            <span class="icon is-small" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">Teléfono</label>\r\n                          <input class="input" type="text" placeholder="Telefono" formControlName="telefono">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                        <label class="label">Fecha Nacimiento</label>\r\n                          <input class="input" type="text" placeholder="aaaa-mm-dd" formControlName="fecha_nacimiento">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">Hora Nacimiento (si aplica)</label>\r\n                          <input class="input" type="text" placeholder="HH:mm" formControlName="hora_nacimiento">\r\n                          \r\n                        </p>\r\n                      </div>\r\n                      <div class="control is-grouped">\r\n                        \r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Domicilio</label>\r\n                            <input class="input" type="text" placeholder="Domicilio" formControlName="domicilio">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">Este campo es requerido.</span>\r\n                         \r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                        <label class="label">Colonia</label>\r\n                          <input class="input" type="text" placeholder="Colonia" formControlName="colonia">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                     </div>\r\n                     <div class="control is-grouped">  \r\n                        \r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                          <label class="label">Municipio</label> \r\n                          <span class="select is-fullwidth">\r\n                                <select  formControlName="municipio_id" name="municipio_id" #municipio (change)="cargarLocalidades(municipio.value)">\r\n                                    <option *ngFor="let item of Municipios" value="{{item.id}}">{{ item.nombre }} </option>\r\n                                </select>\r\n                                \r\n                            </span> \r\n                            <span class="icon is-small" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                          <label class="label">Localidad</label>    \r\n                          <span class="select is-fullwidth">\r\n                                <select formControlName="localidad_id" name="localidad_id">\r\n                                    <option *ngFor="let item of Localidades" value="{{item.id}}">{{ item.nombre }} </option>\r\n                                </select>\r\n                                \r\n                            </span> \r\n                            <span class="icon is-small" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                         <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">No Expediente</label>\r\n                            <input class="input" type="text" placeholder="No Expediente" formControlName="no_expediente">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">Este campo es requerido.</span>\r\n                            \r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">No Afililación</label>\r\n                            <input class="input" type="text" placeholder="No Afiliación" formControlName="no_afiliacion">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">Este campo es requerido.</span>\r\n                            \r\n                        </p>\r\n                      </div>\r\n                    </div> \r\n                    <div [hidden]="verFormResponsable">\r\n                      <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                        <div class="container">\r\n                          <div class="heading">\r\n                            <h1 class="title">Datos del Responsable</h1>\r\n                          </div>\r\n                        </div>\r\n                      </section>  \r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Nombre</label>\r\n                          <input class="input" autofocus type="text"  placeholder="Nombre Responsable" formControlName="nombre_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Patentesco</label>\r\n                               <input class="input" autofocus type="text"  placeholder="Parentesco" formControlName="parentesco">\r\n                              <span class="icon is-small" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                              </span>\r\n                              <span class="help is-danger" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">Este campo es requerido.</span>\r\n\r\n                        </p>\r\n                         <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Domicilio</label>\r\n                            <input class="input" type="text" placeholder="Domicilio Responsable" formControlName="domicilio_responsable">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">Este campo es requerido.</span>\r\n                         \r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">Teléfono</label>\r\n                          <input class="input" type="text" placeholder="Telefono Responsable" formControlName="telefono_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                     \r\n                    </div>    \r\n                   \r\n                    <div [hidden]="verFormArea">\r\n                        <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                            <div class="container">\r\n                              <div class="heading">\r\n                                <h1 class="title">Area de Seguimiento</h1>\r\n                              </div>\r\n                            </div>\r\n                        </section> \r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <br>\r\n                                <input type="hidden" name=\'area\' formControlName="area">\r\n                                <label class="checkbox">\r\n                                    <input type="checkbox" name=\'trabajo_social\' formControlName="trabajo_social" (change)="verifica_area()" value="1">\r\n                                        Trabajo Social\r\n                                </label>\r\n                                <br>\r\n                                <label class="checkbox" >\r\n                                    <input type="checkbox" name=\'juridico\' formControlName="juridico"  (change)="verifica_area()" value="1">\r\n                                        Asuntos Jurídicos\r\n                                </label>\r\n                                <br>\r\n                                <label class="checkbox">\r\n                                    <input type="checkbox" name=\'ministerio\' formControlName="ministerio"  (change)="verifica_area()" value="1">\r\n                                        Ministerio Público\r\n                                </label>\r\n                                \r\n                                \r\n                            </p>\r\n\r\n                        </div>\r\n                      \r\n                    </div>  \r\n                  <br>\r\n                  <div class="control is-grouped">\r\n                    <p class="control">\r\n                      <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="paciente.invalid">Guardar</button>\r\n                    </p>\r\n                  </div>\r\n              </form>\r\n            </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},CR3P:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("5oXY"),s=a("rCTf"),o=(a.n(s),a("EEr4")),c=(a.n(o),a("1APj")),l=(a.n(c),a("h0qH")),d=(a.n(l),a("aV5h")),u=(a.n(d),a("q3ik")),p=(a.n(u),a("+pb+")),m=(a.n(p),a("uCY4")),f=(a.n(m),a("6Yye")),g=(a.n(f),a("Q3Nn")),h=a("lgzy"),v=a("Nqas");a.d(t,"a",function(){return _});var b=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,a,n){this.title=e,this.route=t,this.entregasService=a,this.cambiarEntornoService=n,this.cargando=!1,this.mensajeError=new v.a,this.mensajeExito=new v.a,this.status="PS",this.titulo="",this.icono="f",this.pedidos=[],this.paginaActual=1,this.resultadosPorPagina=5,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new o.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=5,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return e.prototype.ngOnInit=function(){var e=this;switch(this.route.snapshot.url[0].path){case"finalizadas":this.status="FI",this.icono="fa-check-circle",this.route.snapshot.url.length>1?"completas"==this.route.snapshot.url[1].path?this.titulo="Finalizadas (completas)":"incompletas"==this.route.snapshot.url[1].path?this.titulo="Finalizadas (incompletas)":this.titulo="Finalizadas":this.titulo="Finalizadas";break;default:this.status="PS",this.titulo="Por surtir",this.icono="fa-inbox"}this.title.setTitle("Entregas / Farmacia"),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){e.listar(e.paginaActual)}),this.listar(1),this.mensajeError=new v.a,this.mensajeExito=new v.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.entregasService.buscar(e.status,t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):s.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.entregasService.buscar(this.status,e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1;var t=e.data;for(var n in t)t[n].created_at=t[n].created_at.replace(" ","T");a.resultadosBusqueda=t,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var i=0;i<a.paginasTotalesBusqueda;i++)a.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{var i=n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación."),403==n.status?a.mensajeError.texto=i.error:a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,console.log("Cargando items."),this.cargando=!0,this.entregasService.lista(this.status,e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1;var a=e.data;for(var n in a)console.log(a[n].created_at.replace(" ","T")),a[n].created_at=a[n].created_at.replace(" ","T");t.pedidos=a,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var i=0;i<t.paginasTotales;i++)t.indicePaginas.push(i+1);console.log("Pedidos cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{var a=e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),403==e.status?t.mensajeError.texto=a.error:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e}();_=b([a.i(n.Component)({selector:"farmacia-entregas-lista",template:a("Ygs2"),styles:[a("BAmh")],providers:[g.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==i.b&&i.b)&&x||Object,"function"==typeof(j=void 0!==r.c&&r.c)&&j||Object,"function"==typeof(E=void 0!==g.a&&g.a)&&E||Object,"function"==typeof(I=void 0!==h.a&&h.a)&&I||Object])],_);var x,j,E,I},CUYW:function(e,t){e.exports='<section class="hero is-dark" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <!--<a title="Almacen" class="nav-item pull-left nav-hub-active"  routerLink="/almacen">\r\n            \r\n                  <img src="assets/hub-farmacia.svg" alt="icono">\r\n              \r\n                </a>-->\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/administrador-central" routerLinkActive="active">\r\n                      <!--<img src="http://bulma.io/images/bulma-type.png" alt="Bulma logo">-->\r\n                      <!--<span class="icon">\r\n                          <i class="fa fa-cog"></i>\r\n                      </span>--> \r\n                      <img src="assets/hub-administrador-central.svg" alt="icono">\r\n                      <h1 class="title">&nbsp;Administrador central</h1>\r\n                    </a>\r\n                </div>\r\n                <a class="nav-item is-hidden-tablet" (click)="toggleMenuLateral()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-navicon"></i>\r\n                    </span>\r\n                </a>\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>\r\n\r\n<div class="modal" [ngClass]="{\'is-active\': mostrarMenuLateral}">\r\n  <div class="modal-background" (click)="toggleMenuLateral()"></div>\r\n  <div class="modal-content">\r\n    <div class="card" style="width: 100%">\r\n        <div class="card-content">\r\n            <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n        </div>\r\n    </div>\r\n  </div>\r\n  <button class="modal-close" (click)="toggleMenuLateral()"></button>\r\n</div>'},Cd9f:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("Rvy0"),s=a("zhGp"),o=a("qbyw");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",component:s.a},{path:"dashboard",component:r.a,canActivate:[o.a]}],d=function(){function e(){}return e}();d=c([a.i(n.NgModule)({imports:[i.b.forRoot(l)],exports:[i.b]})],d)},Cdzd:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"td.causes{background-color:#cdff8c}td.no-causes{background-color:#ffa838}td.material-curacion{background-color:#ffff7c}.borrador{color:#aaa}.farmacia{color:#a8c0ff}.sin-surtir{color:#ddd}.surtiendo{color:#3273dc}.surtido{color:#4aba53}.expirado{color:#e8dd14}.cancelado{color:red}",""]),e.exports=e.exports.toString()},Cqnt:function(e,t){e.exports='<div style="padding:1em;" *ngIf="total>0 && total > resultadosPorPagina">\r\n    <nav class="pagination" >\r\n        <a class="pagination-previous" [ngClass]="{\'is-disabled\': 1 == paginaActual }" (click)="anterior()">Anterior</a>\r\n        <a class="pagination-next"  [ngClass]="{\'is-disabled\': paginasTotales <= paginaActual }" (click)="siguiente()">Siguiente</a>\r\n        <ul class="pagination-list" *ngIf="paginasTotales<=7">\r\n            <li *ngFor="let i of indicePaginas">\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': i == paginaActual }" (click)="listar(i)">{{ i }}</a>\r\n            </li>\r\n        </ul>\r\n\r\n        <ul class="pagination-list" *ngIf="paginaActual < 4 && paginasTotales > 7">\r\n            <li>\r\n                <a class="pagination-link" [ngClass]="{\'is-current\': 1 == paginaActual }" (click)="listar(1)">1</a>\r\n            </li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': 2== paginaActual }" (click)="listar(2)">2</a></li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': 3== paginaActual }" (click)="listar(3)">3</a></li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': 4== paginaActual }" (click)="listar(4)">4</a></li>\r\n            <li><span class="pagination-ellipsis">&hellip;</span></li>\r\n            <li >\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales == paginaActual }" (click)="listar(paginasTotales)">{{ paginasTotales }}</a>\r\n            </li>\r\n        </ul>\r\n\r\n        <ul class="pagination-list" *ngIf="paginaActual > paginasTotales - 4 && paginasTotales > 7">\r\n            <li>\r\n                <a class="pagination-link" [ngClass]="{\'is-current\': 1 == paginaActual }" (click)="listar(1)">1</a>\r\n            </li>\r\n            <li><span class="pagination-ellipsis">&hellip;</span></li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales - 3 == paginaActual }" (click)="listar(paginasTotales - 3)">{{ paginasTotales - 3 }}</a></li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales - 2 == paginaActual }" (click)="listar(paginasTotales - 2)">{{ paginasTotales - 2 }}</a></li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales - 1 == paginaActual }" (click)="listar(paginasTotales - 1)">{{ paginasTotales - 1 }}</a></li>\r\n        \r\n            <li >\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales == paginaActual }" (click)="listar(paginasTotales)">{{ paginasTotales }}</a>\r\n            </li>\r\n        </ul>\r\n\r\n        <ul class="pagination-list" *ngIf="paginaActual >= 4 && paginaActual <= paginasTotales - 4 && paginasTotales > 7">\r\n            <li>\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': 1 == paginaActual }" (click)="listar(1)">1</a>\r\n            </li>\r\n            <li><span class="pagination-ellipsis">&hellip;</span>\r\n            </li>\r\n            <li>\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginaActual-1 == paginaActual }" (click)="listar(paginaActual-1)">{{ paginaActual-1 }}</a>\r\n            </li>\r\n            <li>\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginaActual == paginaActual }" (click)="listar(paginaActual)">{{ paginaActual }}</a>\r\n            </li>\r\n            <li >\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginaActual+1 == paginaActual }" (click)="listar(paginaActual+1)">{{ paginaActual+1 }}</a>\r\n            </li>\r\n            <li><span class="pagination-ellipsis">&hellip;</span></li>\r\n            <li >\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales == paginaActual }" (click)="listar(paginasTotales)">{{ paginasTotales }}</a>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n</div>\r\n'},DBiG:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},DHza:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"DK+d":function(e,t){e.exports='<formulario #ctrl URL="mis-claves" titulo="Claves / Configuración" [dato]="dato"></formulario>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n  <div class="column is-one-quarter is-hidden-mobile">\r\n    <panel-control-menu-aside></panel-control-menu-aside>\r\n  </div>\r\n  <div class="column" style="padding:2em;">\r\n    <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n      <section class="hero is-primary">\r\n        <div class="hero-body">\r\n          <a class="button  is-primary" style="position:absolute;top: 6em;right: 3em;" (click)="ctrl.cargarDatos(); "  id="actualizar"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n          <div class="container is-fluid">\r\n            <h1 class="title">\r\n              <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n              <span *ngIf="ctrl.cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>\r\n              <!-- -->Mis claves\r\n            </h1>\r\n            <span style="text-align: right">Última actualización: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                <strong *ngIf="actualizado" >{{actualizacion | date}}</strong> \r\n                Por: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                <strong *ngIf="actualizado">{{actualizacion_usuario}} </strong> \r\n            </span>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n        <br>\r\n        <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>        &nbsp;<span>Cargando...</span></span>\r\n      </div>\r\n      <section class="section">\r\n        <!-- formulario -->\r\n        <form name="dato" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar(false)">\r\n          <a id="catalogos" (click)="ctrl.cargarCatalogo(\'tipos_claves\', \'insumos-auto\'); "></a>\r\n\r\n\r\n\r\n            <div class="box">\r\n              <article class="media">\r\n                <div class="media-content">\r\n                  <div class="content">\r\n                    <nav class="panel">\r\n                      <div class="panel-heading">\r\n                        <div class="field">\r\n                          <label for="Claves">\r\n                                Claves disponibles\r\n                            </label>\r\n                          <div style="height:15px;"></div>\r\n\r\n                          <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" \r\n                            id="buscarInsumo" value-property-name="clave"\r\n                            display-property-name="nombre" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                            (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                            type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n                        </div>\r\n                      </div>\r\n                    </nav>\r\n                    \r\n                    <nav class="panel" >\r\n                      <div class="panel-heading">\r\n                        <div class="field">\r\n                          <label for="MisClaves" style="padding-bottom: 5px">\r\n                              Mis claves\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                      <div class="content">\r\n                        <div class="card">\r\n                          <div class="columns" style="padding: 5px; padding-left: 15px">\r\n                            <div class="nav-left nav-menu">\r\n                              <p class="control" style="padding: 10px">\r\n                                <a class="button" [ngClass]="{ \'is-primary\': tipo == \'ME\' && es_causes == 1}" (click)="tipo=\'ME\'; es_causes = 1">\r\n                                  <span class="icon">\r\n                                    <i class="fa fa-medkit"></i>\r\n                                  </span>\r\n                                  <span>CAUSES</span>\r\n                                </a>\r\n                              </p>\r\n                              <p class="control" style="padding: 10px">\r\n                                <a class="button" [ngClass]="{ \'is-primary\': tipo == \'ME\' && es_causes == 0}" (click)="tipo= \'ME\'; es_causes = 0">\r\n                                  <span class="icon">\r\n                                    <i class="fa fa-medkit"></i>\r\n                                  </span>\r\n                                  <span>NO CAUSES</span>\r\n                                </a>\r\n                              </p>\r\n                              <p class="control" style="padding: 10px">\r\n                                <a class="button" [ngClass]="{ \'is-primary\': tipo == \'MC\' && es_causes == 0}" (click)="tipo=\'MC\'; es_causes = 0">\r\n                                  <span class="icon">\r\n                                    <i class="fa fa-medkit"></i>\r\n                                  </span>\r\n                                  <span>MATERIAL DE CURACION</span>\r\n                                </a>\r\n                              </p>\r\n                            </div>\r\n                            <label class="label" style="padding: 15px">\r\n                              Total de claves: {{ctrl.dato.get(\'clues_claves\').length}}\r\n                            </label>\r\n                          </div>\r\n                          <!-- AGRUPADO POR CAUSES/NOCAUSES -->\r\n                          <div>\r\n                            <div class="scroll">\r\n                              <div class="content" formArrayName="clues_claves"  *ngIf="ctrl.dato.get(\'clues_claves\').length > 0">\r\n                                <table class="table is-striped" style="padding: 20px;">\r\n                                  <tbody *ngFor="let val of  ctrl.dato.controls.clues_claves.controls ; let i=index;" >\r\n                                    <tr *ngIf="val.value.tipo==tipo && val.value.es_causes==es_causes" [formGroupName]="i">\r\n                                      <td>{{val.value.clave_insumo_medico}} </td>\r\n                                      <td>{{val.value.descripcion}} </td>\r\n                                      <td>{{val.value.tipo}} </td>\r\n                                      <td> </td>\r\n                                      <td><a class="delete" (click)="ctrl.quitar_form_array(ctrl.dato.controls.clues_claves, i)"></a></td>\r\n                                    </tr>\r\n                                  </tbody>\r\n                                </table>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </nav>\r\n            </div>\r\n          </div>\r\n          </article>\r\n    </div>\r\n  <br><br>\r\n  <div class="control is-grouped" style="float:left; padding:10px;">\r\n    <p class="control">\r\n      <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}"\r\n        [disabled]="ctrl.dato.invalid">Guardar</button>\r\n    </p>\r\n    <p class="control" *ngIf="ctrl.id">\r\n      <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}"\r\n        (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n    </p>\r\n    <p class="control">\r\n      <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n    </p>\r\n  </div>\r\n\r\n  </form>\r\n  </section>\r\n</div>\r\n</div>\r\n</div>'},DVw5:function(e,t,a){"use strict";var n=a("3j3K"),i=a("NVOs"),r=a("Qbdm"),s=a("5oXY"),o=a("kZql"),c=a("30gs"),l=a("3MNG"),d=a("lDdF");a.n(d);a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,a,n,i,r){var s=this;this.fb=e,this.crudService=t,this.route=a,this._sanitizer=n,this.notificacion=i,this._ngZone=r,this.modo="N",this.tab=1,this.cant_solicitada_valida=!1,this.sum_cant_lotes=!1,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.MinDate=new Date,this.MaxDate=new Date,this.tieneid=!1,this.cargando=!1,this.cargandoPdf=!1,this.autocompleListFormatter=function(e){var t='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4"> <small>'+e.descripcion+'</small></p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+e.clave+") \n              ";return 1==e.es_causes&&(t+='<label class="tag is-success" ><strong>Cause </strong></label>'),0==e.es_causes&&(t+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);"><strong>No Cause </strong> </label>'),1==e.es_unidosis&&(t+='<label class="tag is-warning" ><strong>Unidosis</strong></label>'),t+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",s._sanitizer.bypassSecurityTrustHtml(t)},this.es_unidosis=!1,this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0},this.mostrar_lote=[]}return e.prototype.ngOnInit=function(){var e=this,t=JSON.parse(localStorage.getItem("usuario"));document.getElementById("catalogos").click(),document.getElementById("actualizar").click(),t.clues_activa&&(this.insumos_term+="&clues="+t.clues_activa.clues),t.almacen_activo&&(this.insumos_term+="&almacen="+t.almacen_activo.id),this.pdfworker=new Worker("web-workers/farmacia/movimientos/salida.js");var a=this,n=this._ngZone;this.pdfworker.onmessage=function(e){n.run(function(){a.cargandoPdf=!1}),d.saveAs(a.base64ToBlob(e.data.base64,"application/pdf"),e.data.fileName)},this.dato=this.fb.group({id:[""],tipo_movimiento_id:["2",[i.Validators.required]],status:["FI"],fecha_movimiento:["",[i.Validators.required]],observaciones:[""],cancelado:[""],observaciones_cancelacion:[""],movimiento_metadato:this.fb.group({turno_id:["",[i.Validators.required]],servicio_id:["",[i.Validators.required]],persona_recibe:["",[i.Validators.required]]}),insumos:this.fb.array([]),insumos_negados:this.fb.array([])}),this.route.params.subscribe(function(t){t.id&&(e.tieneid=!0)}),this.form_insumos={tipo_movimiento_id:["",[i.Validators.required]]};var r=new Date;this.MinDate=new Date(r.getFullYear()-1,0,1),this.MaxDate=new Date(r.getFullYear(),r.getMonth(),r.getDate()),this.dato.get("fecha_movimiento").value?this.fecha_actual=this.dato.get("fecha_movimiento").value:(this.fecha_actual=r.getFullYear()+"-"+("00"+(r.getMonth()+1)).slice(-2)+"-"+r.getDate(),this.dato.get("fecha_movimiento").patchValue(this.fecha_actual))},e.prototype.abrirModal=function(e){document.getElementById(e).classList.add("is-active")},e.prototype.cancelarModal=function(e){document.getElementById(e).classList.remove("is-active")},e.prototype.select_insumo_autocomplete=function(e){var t=this,a=JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.crudService.lista(0,1e3,"comprobar-stock?almacen="+a.almacen_activo.id+"&clave="+e.clave).subscribe(function(a){for(var n=0,i=t.dato.get("insumos").value;n<i.length;n++){var r=i[n];if(0==a.length)break;if(r.clave==a[0].clave_insumo_medico)for(var s=0,o=r.lotes;s<o.length;s++)for(var c=o[s],l=0,d=a;l<d.length;l++){var u=d[l];if(c.lote==u.lote)try{c.cantidad>0&&("U"==r.modo_salida&&(u.existencia=u.existencia-c.cantidad/r.cantidad_x_envase),"N"==r.modo_salida&&(u.existencia=u.existencia-c.cantidad),u.existencia_unidosis=u.existencia*r.cantidad_x_envase)}catch(e){console.log(e)}}}t.lotes_insumo=a,t.insumo=e,document.getElementById("buscarInsumo").value="",document.getElementById("tituloModal").innerHTML=" "+e.descripcion+' <br>\n          <p aling="justify" style="font-size:12px">'+e.descripcion+'</p> \n          <p aling="justify" style="font-size:16px"> CANTIDAD POR ENVASE: '+(e.cantidad_x_envase?e.cantidad_x_envase:"Sin especificar")+"</p>",t.es_unidosis=e.es_unidosis,t.unidad_medida=e.unidad_medida,t.cargando=!1,t.abrirModal("verLotes")},function(e){t.cargando=!1})},e.prototype.agregarLoteIsumo=function(e){for(var t=this.dato.controls.insumos,a={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,cantidad:1,presentacion_nombre:this.insumo.presentacion_nombre,unidad_medida:this.insumo.unidad_medida,cantidad_x_envase:this.insumo.cantidad_x_envase?parseInt(this.insumo.cantidad_x_envase):1,cantidad_surtida:1,modo_salida:this.modo,cantidad_solicitada:e,cantidad_solicitada_unidosis:e,lotes:this.fb.array([])},n=!1,i=0,r=0,s=t.value;r<s.length;r++){var o=s[r];if(o.clave==this.insumo.clave&&(!0,o.modo_salida==this.modo)){n=!0;break}i++}n||t.push(this.fb.group(a));var c=i,l=t.controls[c];this.mostrar_lote[c]=!1;var d={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0};for(var u=0,p=this.lotes_insumo;u<p.length;u++){var o=p[u];if(o.cantidad>0){var m=!1;if(n)for(var f=0,g=l.controls.lotes.controls;f<g.length;f++){var h=g[f];if(h.controls.id.value==o.id){m=!0;var v=h.controls.cantidad.value+o.cantidad;h.controls.cantidad.value,o.cantidad;"N"==this.modo&&v>h.controls.existencia.value&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+h.controls.existencia.value,d),v=1*h.controls.existencia.value),"U"==this.modo&&v>h.controls.existencia_unidosis.value&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+h.controls.existencia_unidosis.value,d),v=1*h.controls.existencia_unidosis.value),h.controls.cantidad.patchValue(v);break}}m||(o.nuevo&&(o.existencia=1*o.cantidad),"N"==this.modo&&o.cantidad>o.existencia&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+o.existencia,d),o.cantidad=1*o.existencia),"U"==this.modo&&o.cantidad>o.existencia_unidosis&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+o.existencia_unidosis,d),o.cantidad=1*o.existencia_unidosis),l.controls.lotes.push(this.fb.group({id:o.id,nuevo:0|o.nuevo,codigo_barras:o.codigo_barras,lote:o.lote,fecha_caducidad:o.fecha_caducidad,existencia:o.nuevo?o.cantidad:o.existencia,cantidad:o.cantidad,existencia_unidosis:o.nuevo?o.cantidad:o.existencia_unidosis,modo_salida:this.modo})))}}for(var b=0,y=0,_=0,x=l.controls.lotes.value;_<x.length;_++){var h=x[_];b+=h.cantidad,y+=h.cantidad}if("N"==l.controls.modo_salida.value&&(l.controls.cantidad_surtida.patchValue(b),n)){var j=l.controls.cantidad_solicitada.value;e=Number(j)+Number(e),l.controls.cantidad_solicitada.patchValue(e)}if("U"==l.controls.modo_salida.value&&(l.controls.cantidad_surtida.patchValue(b),n)){var j=l.controls.cantidad_solicitada.value;e=Number(j)+Number(e),l.controls.cantidad_solicitada.patchValue(e)}this.cancelarModal("verLotes"),this.cancelarModal("negarExistencia"),this.cantidad_solicitadaBoxViewChildren.first.nativeElement.value="",this.cantidad_solicitadaBoxViewChildren.first.nativeElement.focus(),this.cant_solicitada_valida=!1,this.sum_cant_lotes=!1,this.modo="N"},e.prototype.ver_lotes_asignados=function(e){this.mostrar_lote[e]=!this.mostrar_lote[e]},e.prototype.agregarNuevoLote=function(){this.lotes_insumo.push({id:""+Math.floor(999*Math.random())+1,codigo_barras:"",lote:"",fecha_caducidad:"",existencia:"",cantidad:"",nuevo:1,existencia_unidosis:"",cantidad_unidosis:""})},e.prototype.eliminarLote=function(e){this.lotes_insumo.splice(e,1)},e.prototype.quitar_lote_insumo=function(e,t,a){var n=this.dato.controls.insumos,i=n.controls[e];i.controls.lotes.removeAt(a);var r=i.controls.cantidad_surtida.value-t.cantidad;i.controls.cantidad_surtida.patchValue(r)},e.prototype.validar_cantidad_lote=function(e,t,a,n){if("N"==n&&t.controls.cantidad.value>t.controls.existencia.value){var i={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+t.controls.existencia.value,i),t.controls.cantidad.patchValue(1*t.controls.existencia.value)}if("U"==n&&t.controls.cantidad.value>t.controls.existencia_unidosis.value){var i={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+t.controls.existencia_unidosis.value,i),t.controls.cantidad.patchValue(1*t.controls.existencia_unidosis.value)}for(var r=this.dato.controls.insumos,s=r.controls[e],o=0,c=0,l=s.controls.lotes.value;c<l.length;c++){o+=l[c].cantidad}s.controls.cantidad_surtida.patchValue(o)},e.prototype.comprobar_cant_lotes=function(){for(var e=0,t=0,a=this.lotes_insumo;t<a.length;t++){var n=a[t];n.cantidad&&(e=Number(e)+Number(n.cantidad))}this.sum_cant_lotes=e>0},e.prototype.comprobar_cant_solicitada=function(e){this.cant_solicitada_valida=e>0},e.prototype.quitar_punto=function(e){return!!this.is_numeric(e.key)},e.prototype.is_numeric=function(e){return/^\d+$/.test(e)},e.prototype.guardar_movimiento=function(){document.getElementById("guardarMovimiento").classList.add("is-active")},e.prototype.imprimir=function(){var e=JSON.parse(localStorage.getItem("usuario"));try{this.cargandoPdf=!0;var t={datos:this.dato.value,lista:this.dato.value.insumos,usuario:e};this.pdfworker.postMessage(JSON.stringify(t))}catch(e){this.cargandoPdf=!1}},e.prototype.base64ToBlob=function(e,t){for(var a=atob(e),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:t})},e}();u([a.i(n.ViewChildren)("cantidad_solicitada"),p("design:type",Object)],m.prototype,"cantidad_solicitadaBoxViewChildren",void 0),u([a.i(n.ViewChildren)("cantidad_solicitada_unidosis"),p("design:type",Object)],m.prototype,"cantidad_solicitada_unidosisBoxViewChildren",void 0),m=u([a.i(n.Component)({selector:"salidas-estandar-formulario",template:a("zT6u"),styles:[a("qOWO")],styles:["ngui-auto-complete {z-index: 999999 !important}"]}),p("design:paramtypes",["function"==typeof(f=void 0!==i.FormBuilder&&i.FormBuilder)&&f||Object,"function"==typeof(g=void 0!==c.a&&c.a)&&g||Object,"function"==typeof(h=void 0!==s.c&&s.c)&&h||Object,"function"==typeof(v=void 0!==r.d&&r.d)&&v||Object,"function"==typeof(b=void 0!==l.a&&l.a)&&b||Object,"function"==typeof(y=void 0!==n.NgZone&&n.NgZone)&&y||Object])],m);var f,g,h,v,b,y},DnYL:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("2Je8"),s=a("5oXY"),o=a("NVOs"),c=a("1APj"),l=(a.n(c),a("h0qH")),d=(a.n(l),a("aV5h")),u=(a.n(d),a("q3ik")),p=(a.n(u),a("+pb+")),m=(a.n(p),a("uCY4")),f=(a.n(m),a("6Yye")),g=(a.n(f),a("lDdF")),h=(a.n(g),a("kZql")),v=a("Nqas"),b=a("lgzy"),y=a("7MfY"),_=a("NAeX"),x=a("0H6m");a.d(t,"a",function(){return I});var j=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},E=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=function(){function e(e,t,a,n,i,r,s,o,c){this.title=e,this.location=t,this.router=a,this.route=n,this._ngZone=i,this.pedidosService=r,this.almacenesService=s,this.fb=o,this.cambiarEntornoService=c,this.cargando=!1,this.cargandoAlmacenes=!1,this.cargandoInsumos=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.mostrarImprimirDialogo=!1,this.mostrarCancelarDialogo=!1,this.tiposSubPedidos=[],this.subPedidos={},this.recepciones={},this.tieneRecepcionIniciada=!1,this.meses={1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"},this.dialogCancelarFechaTransferencia={},this.dialogCancelarMeses=[],this.errorCancelarPedido=!1,this.errorCancelarPedidoTexto="",this.cancelandoPedido=!1,this.formularioTitulo="Nuevo",this.esEditar=!1,this.mostrarModalInsumos=!1,this.porcentageTotalPedido=0,this.cargandoPdf={},this.errorEnPDF=!1}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Nuevo pedido / Almacén"),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){e.router.navigate(["/almacen/pedidos"])}),this.pdfworker=new Worker("web-workers/farmacia/pedidos/pedido-proveedor.js");var t=this,a=this._ngZone;this.pdfworker.onmessage=function(e){a.run(function(){console.log(e),t.cargandoPdf[e.data.tipoPedido]=!1}),g.saveAs(t.base64ToBlob(e.data.base64,"application/pdf"),e.data.fileName)},this.pdfworker.onerror=function(e){a.run(function(){console.log(e),t.errorEnPDF=!0})},this.pedido=new x.a(!0),this.route.params.subscribe(function(t){t.id?(e.cargando=!0,e.pedido.id=t.id,e.pedido.status="PS",e.esEditar=!0,e.formularioTitulo="Editar",e.pedidosService.ver(t.id).subscribe(function(t){e.pedido.datosImprimir=t,e.pedido.status=t.status;for(var a in t.insumos){var n=t.insumos[a],i=n.insumos_con_descripcion;i.cantidad=+n.cantidad_solicitada,i.cantidad_recibida=+n.cantidad_recibida||0,i.monto=+n.monto_solicitado,i.monto_recibido=+n.monto_recibido||0,i.precio=+n.precio_unitario,e.pedido.lista.push(i);var r=!1,s="SC";s=n.tipo_insumo.clave,"MC"==n.tipo_insumo.clave&&(r=!0),e.subPedidos[s]||(e.tiposSubPedidos.push(s),e.cargandoPdf[s]=!1,e.subPedidos[s]={titulo:n.tipo_insumo.nombre,clave_folio:s,claves:0,cantidad:0,monto:0,iva:0,tiene_iva:r,lista:[]}),e.subPedidos[s].claves++,e.subPedidos[s].cantidad+=i.cantidad,e.subPedidos[s].monto+=i.monto,e.subPedidos[s].lista.push(i)}if("EF"!=t.status)for(var a in t.recepciones)"BR"==t.recepciones[a].entrada.status&&(e.tieneRecepcionIniciada=!0);t.insumos=void 0,e.pedido.indexar(),e.pedido.listar(1);var o=(e.pedido.datosImprimir.total_claves_recibidas||0)/e.pedido.lista.length*100,c=(e.pedido.datosImprimir.total_cantidad_recibida||0)/e.pedido.totalInsumos*100,l=(e.pedido.datosImprimir.total_monto_recibido||0)/e.pedido.totalMonto*100;e.porcentageTotalPedido=(c+o+l)/3,e.cargando=!1},function(t){e.cargando=!1,e.mensajeError=new v.a(!0),e.mensajeError=new v.a(!0),e.mensajeError.mostrar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}),console.log("editar pedido")):console.log("nuevo pedido")})},e.prototype.obtenerDireccion=function(){if(this.pedido.status)return"PS"==this.pedido.status?"/almacen/pedidos/por-surtir":"ET"==this.pedido.status?"/almacen/pedidos/en-transito":"FI"==this.pedido.status?"/almacen/pedidos/finalizados":"EF"==this.pedido.status?"/almacen/pedidos/farmacia-subrogada":"EX"==this.pedido.status?"/almacen/pedidos/expirados":"EX-CA"==this.pedido.status?"/almacen/pedidos/expirados-cancelados":"/almacen/pedidos/todos"},e.prototype.buscar=function(e,t,a,n){var i=t.value;if(27==e.keyCode)return e.preventDefault(),e.stopPropagation(),t.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(e.preventDefault(),e.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(e){var t=n[e].input.value;if(""==t)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[e].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(e){}return i.includes(t.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(e,t){return e.length-t.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},e.prototype.mostrarFichaInformativa=function(e,t){e.preventDefault(),e.stopPropagation(),alert(t),console.log(t)},e.prototype.keyboardInput=function(e){32==e.keyCode&&e.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.mostrarModalInsumos=!0),39==e.keyCode&&(e.ctrlKey&&e.shiftKey||e.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaSiguiente():this.pedido.paginaSiguiente()),37==e.keyCode&&(e.ctrlKey&&e.shiftKey||e.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaAnterior():this.pedido.paginaAnterior())},e.prototype.imprimirExcel=function(){var e="token="+localStorage.getItem("token");window.open(h.a.API_URL+"/generar-excel-pedido/"+this.pedido.id+"?"+e)},e.prototype.imprimir=function(e){void 0===e&&(e="");try{this.cargandoPdf[e]=!0;var t={datos:this.pedido.datosImprimir,insumos:this.subPedidos[e]};this.pdfworker.postMessage(JSON.stringify(t))}catch(t){this.cargandoPdf[e]=!1,console.log(t)}},e.prototype.mostrarDialogo=function(){this.mostrarImprimirDialogo=!0},e.prototype.cerrarDialogo=function(){this.mostrarImprimirDialogo=!1},e.prototype.mostrarDialogoCancelarPedido=function(){this.dialogCancelarMeses=[],this.errorCancelarPedido=!1,this.errorCancelarPedidoTexto="Ocurrio un error al intentar cancelar el pedido";var e=this.pedido.datosImprimir.fecha.split("-"),t=new Date,a=(t.getFullYear(),t.getMonth()+1);parseInt(e[1]);this.dialogCancelarMeses.push({anio:parseInt(e[0]),mes:a,descripcion:this.meses[a]+" "+e[0]});for(var n=1;n<=2;n++)(a+=1)<=12&&this.dialogCancelarMeses.push({anio:parseInt(e[0]),mes:a,descripcion:this.meses[a]+" "+e[0]});this.dialogCancelarFechaTransferencia=this.dialogCancelarMeses[0],this.mostrarCancelarDialogo=!0},e.prototype.transferirRecurso=function(){var e=this,t=prompt("Para confirmar esta transacción, por favor escriba: CANCELAR PEDIDO");if("CANCELAR PEDIDO"!=t)return void(null!=t&&alert("Error al ingresar el texto para confirmar la transferencia."));this.cancelandoPedido=!0;var a={transferir_a_mes:this.dialogCancelarFechaTransferencia.mes,transferir_a_anio:this.dialogCancelarFechaTransferencia.anio};this.pedidosService.cancelarPedidoTransferir(this.pedido.datosImprimir.id,a).subscribe(function(t){e.pedido.status="EX-CA",e.cancelandoPedido=!1,e.mostrarCancelarDialogo=!1,e.errorCancelarPedido=!1},function(t){console.log(t),e.errorCancelarPedido=!0,e.cancelandoPedido=!1,e.mostrarCancelarDialogo=!0;try{var a=t.json();401==t.status&&(e.errorCancelarPedidoTexto="No tiene permiso para esta acción."),500==t.status&&(e.errorCancelarPedidoTexto="500 (Error interno del servidor)"),a.error&&(e.errorCancelarPedidoTexto=a.error)}catch(a){500==t.status?e.errorCancelarPedidoTexto="500 (Error interno del servidor)":e.errorCancelarPedidoTexto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.cerrarDialogoCancelarPedido=function(){this.mostrarCancelarDialogo=!1},e.prototype.base64ToBlob=function(e,t){for(var a=atob(e),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:t})},e.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},e}();I=j([a.i(n.Component)({selector:"app-ver",template:a("K2DH"),styles:[a("Au7A")],host:{"(window:keydown)":"keyboardInput($event)"}}),E("design:paramtypes",["function"==typeof(P=void 0!==i.b&&i.b)&&P||Object,"function"==typeof(C=void 0!==r.Location&&r.Location)&&C||Object,"function"==typeof(k=void 0!==s.a&&s.a)&&k||Object,"function"==typeof(S=void 0!==s.c&&s.c)&&S||Object,"function"==typeof(A=void 0!==n.NgZone&&n.NgZone)&&A||Object,"function"==typeof(q=void 0!==_.a&&_.a)&&q||Object,"function"==typeof(w=void 0!==y.a&&y.a)&&w||Object,"function"==typeof(R=void 0!==o.FormBuilder&&o.FormBuilder)&&R||Object,"function"==typeof(O=void 0!==b.a&&b.a)&&O||Object])],I);var P,C,k,S,A,q,w,R,O},"E/ad":function(e,t){e.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Laboratorio" class="nav-item pull-left nav-hub-active"  routerLink="/laboratorio">\r\n            \r\n            <img src="assets/hub-laboratorio.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left is-hidden-touch">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item">\r\n                <h1 class="title">&nbsp;Laboratorio</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <div class="nav-center">\r\n            <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n            </span>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},E3bb:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.cargando=!1}return e.prototype.ngOnInit=function(){},e}();s=i([a.i(n.Component)({selector:"admision-menu-lateral",template:a("NQph"),styles:[a("Julm")]}),r("design:paramtypes",[])],s)},ELSb:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),e.exports=e.exports.toString()},EhYa:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("TpXv"),s=a("bh45"),o=a("qbyw");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=[{path:"almacen/entradas-estandar",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"ver/:id",component:s.a}],canActivate:[o.a]}],d=function(){function e(){}return e}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},EknN:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("30gs"),s=a("NAeX"),o=a("Z7d5");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,a,n){var i=this;this.http=e,this.crudService=t,this.graficasService=a,this.pedidosService=n,this.surtido=1,this.grafica=1,this.presupuesto={},this.datosGraficas={},this.claves_categorias={},this.claves_causes={},this.claves_no_causes={},this.claves_mc={},this.grafica_categorias=[],this.grafica_causes=[],this.grafica_no_causes=[],this.grafica_mc=[],this.MinDate=new Date,this.MaxDate=new Date,this.grafica_opciones={chart:{type:"column"},xAxis:{categories:this.grafica_categorias},yAxis:{min:0,title:{text:"Total claves"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}},title:{text:"Entrega por insumos"},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}}},series:[{name:"Causes",data:this.grafica_causes},{name:"No Causes",data:this.grafica_no_causes},{name:"Material Curación",data:this.grafica_mc}]},this.claves={chart:{type:"column"},xAxis:{categories:this.grafica_categorias},yAxis:{min:0,title:{text:"Total claves"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}},title:{text:"Entrega por claves"},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}}},series:[{name:"Causes",data:this.grafica_causes},{name:"No Causes",data:this.grafica_no_causes},{name:"Material Curación",data:this.grafica_mc}]},this.insumos={chart:{type:"column"},xAxis:{categories:["2017-04-10","2017-04-15","2017-04-20","2017-04-25","2017-04-28","2017-04-30","2017-04-30","2017-04-30"]},yAxis:{min:0,title:{text:"Total insumos"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}},title:{text:"Entrega por insumos"},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}}},series:[{name:"Causes",data:[5,3,4,7,2,7,2,7]},{name:"No Causes",data:[2,2,3,2,1,0,2,7]},{name:"Material Curación",data:[3,4,4,2,5,3,2,7]}]},this.monto={chart:{type:"column"},xAxis:{categories:["2017-04-10","2017-04-15","2017-04-20","2017-04-25","2017-04-28","2017-04-30","2017-04-30","2017-04-30"]},yAxis:{min:0,title:{text:"Total monto"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}},title:{text:"Entrega por monto"},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}}},series:[{name:"Causes",data:[5,3,4,7,2,7,2,7]},{name:"No Causes",data:[2,2,3,2,1,0,2,7]},{name:"Material Curación",data:[3,4,4,2,5,3,2,7]}]},e.get("https://cdn.rawgit.com/gevgeny/angular2-highcharts/99c6324d/examples/aapl.json").subscribe(function(e){i.datos={title:{text:"AAPL Stock Price"},series:[{name:"AAPL",data:e.json(),tooltip:{valueDecimals:2}}]}})}return e.prototype.ngOnInit=function(){var e=this;this.usuario=JSON.parse(localStorage.getItem("usuario"));var t=new Date;this.MinDate=new Date(t.getFullYear()-1,0,1),this.MaxDate=new Date(t.getFullYear(),t.getMonth(),t.getDate()),this.fecha_actual=t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+t.getDate(),this.fecha_inicial_actual=t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-01",this.pedidosService.presupuesto().subscribe(function(t){e.presupuesto=t.data},function(e){console.log(e)}),this.graficasService.listaDatos().subscribe(function(t){e.datosGraficas=t,console.log(e.datosGraficas),console.log(e.datosGraficas.data)},function(e){console.log(e)}),this.jsonPrueba={claves:[{fecha:"2017-04-10",causes:150,no_causes:200,mat_curacion:50,total:320},{fecha:"2017-04-11",causes:500,no_causes:300,mat_curacion:800,total:320},{fecha:"2017-04-12",causes:900,no_causes:500,mat_curacion:1300,total:320}]},console.log(this.jsonPrueba);var a;for(a=0;a<this.jsonPrueba.claves.length;a++)this.grafica_categorias.push(this.jsonPrueba.claves[a].fecha),this.grafica_causes.push(this.jsonPrueba.claves[a].causes),this.grafica_no_causes.push(this.jsonPrueba.claves[a].no_causes),this.grafica_mc.push(this.jsonPrueba.claves[a].mat_curacion)},e.prototype.cambiarSurtido=function(e){this.surtido=e},e.prototype.cambiarGrafica=function(e){this.grafica=e},e}();d=c([a.i(n.Component)({selector:"app-graficas",template:a("ILDO"),styles:[a("Es1U")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.Http&&i.Http)&&u||Object,"function"==typeof(p=void 0!==r.a&&r.a)&&p||Object,"function"==typeof(m=void 0!==o.a&&o.a)&&m||Object,"function"==typeof(f=void 0!==s.a&&s.a)&&f||Object])],d);var u,p,m,f},Es1U:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"chart{display:block}div.scroll{background-color:#fff;height:400px;overflow:auto}",""]),e.exports=e.exports.toString()},F76a:function(e,t,a){"use strict";var n=a("3j3K"),i=a("lgzy");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.cambiarEntornoService=e,this.usuario={}}return e.prototype.ngOnInit=function(){var e=this;this.usuario=JSON.parse(localStorage.getItem("usuario")),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){e.usuario=JSON.parse(localStorage.getItem("usuario"))})},e.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},e}();o=r([a.i(n.Component)({selector:"administrador-proveedores-menu",template:a("bm2y"),styles:[a("DHza")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},FR06:function(e,t){e.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " \'is-primary\' " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    \r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Ingreso Paciente\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n             <section class="section">\r\n                <form name="form" novalidate [formGroup]="pacienteIngreso"  (ngSubmit)="enviar()">     \r\n                  <section class="section" style="background-color: #00d1b2;">\r\n                    <div class="container">\r\n                      <div class="heading">\r\n                        <h1 class="title" style="color: #FFF">Datos del Paciente</h1>\r\n                        <h2 class="subtitle" style="color: #FFF">\r\n                          ID: {{ id_paciente }}<BR>\r\n                          NOMBRE: {{ nombre_paciente }} <BR>\r\n                          LOCALIDAD: {{ localidad_paciente }}<BR>\r\n\r\n                        </h2>\r\n                      </div>\r\n                    </div>\r\n                  </section>\r\n                   <br>    \r\n                  <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Referido</label>\r\n                      \t<span class="select is-fullwidth">\r\n    \t\t                \t<select  formControlName="referido" name="referido" #referido (change)="valida_referido(referido.value)">\r\n    \t\t                \t\t<option value="1" selected="selected">SI</option>\r\n    \t\t                \t\t<option value="2">NO</option>\r\n    \t\t                \t</select>\r\n\t\t                    </span>\t\r\n\r\n\t                 \t<span class="icon is-small" *ngIf="pacienteIngreso.get(\'referido\').hasError(\'required\') && pacienteIngreso.get(\'referido\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="pacienteIngreso.get(\'referido\').hasError(\'required\') && pacienteIngreso.get(\'referido\').touched">Este campo es requerido.</span>                     \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right"  [hidden]="!nombre_conocido">\r\n                        <label class="label">Unidad Referida</label>\r\n                      \t<span class="select is-fullwidth">\r\n                          <select  formControlName="unidad_referido" name="unidad_referido">\r\n                              <option *ngFor="let item of UnidadesMedicas" value="{{item.clues}}">{{ item.nombre }} - {{ item.clues }}</option>\r\n                          </select>\r\n                        </span>\r\n    \t                  <span class="icon is-small" *ngIf="pacienteIngreso.get(\'unidad_referido\').hasError(\'required\') && pacienteIngreso.get(\'unidad_referido\').touched">\r\n    \t                    <i class="fa fa-warning"></i>\r\n    \t                  </span>\r\n    \t                  <span class="help is-danger" *ngIf="pacienteIngreso.get(\'unidad_referido\').hasError(\'required\') && pacienteIngreso.get(\'unidad_referido\').touched">Este campo es requerido.</span>\r\n                    </p>    \r\n\t                </div>\r\n\r\n                  <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Urgencia Calificada</label>\r\n                        <span class="select is-fullwidth">\r\n                          <select  formControlName="urgencia_calificada" name="urgencia_calificada" (change)="bloquea_formulario()" >\r\n                            <option value="1" selected="selected">SI</option>\r\n                            <option value="2">NO</option>\r\n                          </select>\r\n                        </span> \r\n                    <span class="icon is-small" *ngIf="pacienteIngreso.get(\'urgencia_calificada\').hasError(\'required\') && pacienteIngreso.get(\'urgencia_calificada\').touched">\r\n                        <i class="fa fa-warning"></i>\r\n                      </span>\r\n                      <span class="help is-danger" *ngIf="pacienteIngreso.get(\'urgencia_calificada\').hasError(\'required\') && pacienteIngreso.get(\'urgencia_calificada\').touched">Este campo es requerido.</span>                     \r\n                    </p>\r\n\r\n                    <p class="control is-expanded  has-icon has-icon-right" [hidden]="verForm">\r\n                        <label class="label">Triage Obstetrico</label>\r\n                        <span class="select is-fullwidth">\r\n                          <select  formControlName="registro_triage" name="registro_triage" #registro_triage >\r\n                            <option value="1" selected="selected">SI</option>\r\n                            <option value="2">NO</option>\r\n                          </select>\r\n                        </span> \r\n                    <span class="icon is-small" *ngIf="pacienteIngreso.get(\'registro_triage\').hasError(\'required\') && pacienteIngreso.get(\'registro_triage\').touched">\r\n                        <i class="fa fa-warning"></i>\r\n                      </span>\r\n                      <span class="help is-danger" *ngIf="pacienteIngreso.get(\'registro_triage\').hasError(\'required\') && pacienteIngreso.get(\'registro_triage\').touched">Este campo es requerido.</span>                     \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right" [hidden]="verForm">\r\n                        <label class="label">Lugar donde se encuentra</label>\r\n                        <span class="select is-fullwidth">\r\n                          <select  formControlName="estado_triage_id" name="estado_triage_id">\r\n                            <option *ngFor="let item of Triage" value="{{item.id}}">{{ item.id }} {{ item.descripcion }}</option>\r\n                          </select>\r\n                        </span> \r\n                    <span class="icon is-small" *ngIf="pacienteIngreso.get(\'estado_triage_id\').hasError(\'required\') && pacienteIngreso.get(\'estado_triage_id\').touched">\r\n                        <i class="fa fa-warning"></i>\r\n                      </span>\r\n                      <span class="help is-danger" *ngIf="pacienteIngreso.get(\'estado_triage_id\').hasError(\'required\') && pacienteIngreso.get(\'estado_triage_id\').touched">Este campo es requerido.</span>                     \r\n                    </p>\r\n                     <p class="control is-expanded  has-icon has-icon-right" [hidden]="verForm">\r\n                        <label class="label">Grado de Lesión</label>\r\n                        <span class="select is-fullwidth">\r\n                          <select  formControlName="grado_lesion_id" name="grado_lesion_id" >\r\n                              <option *ngFor="let item of GradoLesion" value="{{item.id}}">{{ item.descripcion }}</option>\r\n                          </select>\r\n                        </span> \r\n                    <span class="icon is-small" *ngIf="pacienteIngreso.get(\'grado_lesion_id\').hasError(\'required\') && pacienteIngreso.get(\'grado_lesion_id\').touched">\r\n                        <i class="fa fa-warning"></i>\r\n                      </span>\r\n                      <span class="help is-danger" *ngIf="pacienteIngreso.get(\'grado_lesion_id\').hasError(\'required\') && pacienteIngreso.get(\'grado_lesion_id\').touched">Este campo es requerido.</span>                     \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right" [hidden]="verForm">\r\n                        <label class="label">Fecha de ingreso</label>\r\n                        <input class="input"  type="text" name="fecha_ingreso" formControlName="fecha_ingreso" placeholder="aaaa-mm-dd" readonly="readonly">\r\n                          <span class="icon is-small" *ngIf="pacienteIngreso.get(\'fecha_ingreso\').hasError(\'required\') && pacienteIngreso.get(\'fecha_ingreso\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="pacienteIngreso.get(\'fecha_ingreso\').hasError(\'required\') && pacienteIngreso.get(\'fecha_ingreso\').touched">Este campo es requerido.</span>\r\n                         \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right" [hidden]="verForm">\r\n                        <label class="label">Hora de ingreso</label>\r\n                        <input class="input"  type="text" name="hora_ingreso" formControlName="hora_ingreso" placeholder="HH:mm" readonly="readonly">\r\n                          <span class="icon is-small" *ngIf="pacienteIngreso.get(\'hora_ingreso\').hasError(\'required\') && pacienteIngreso.get(\'hora_ingreso\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="pacienteIngreso.get(\'hora_ingreso\').hasError(\'required\') && pacienteIngreso.get(\'hora_ingreso\').touched">Este campo es requerido.</span>\r\n                         \r\n                    </p>\r\n                  </div>\r\n                  <br><br>\r\n                  <div class="control is-grouped">\r\n                    <p class="control" *ngIf="permiso_guardar">\r\n                      <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="pacienteIngreso.invalid">Guardar</button>\r\n                    </p>\r\n                    \r\n                    <p class="control">\r\n                      <a class="button is-white" (click)="regresar()" >Regresar</a>\r\n                    </p>\r\n                  </div>\r\n\r\n              </form>\r\n            </section>  \r\n        </div>\r\n    </div>    \r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},FbSt:function(e,t){e.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Catalogo" class="nav-item pull-left nav-hub-active"  routerLink="/almacen-articulos">\r\n            \r\n            <img src="assets/hub-almacen-articulos.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item" >\r\n                <h1 class="title">&nbsp;Artículos / Catálogos</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},FiFG:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();s=i([a.i(n.Component)({selector:"app-pedidos-jurisdiccionales",template:a("4xvr"),styles:[a("+3Pf")]}),r("design:paramtypes",[])],s)},Fobf:function(e,t,a){"use strict";var n=a("gdhx"),i=a("NVOs");a.d(t,"a",function(){return r});var r=(function(){function e(){}e}(),function(){function e(t){void 0===t&&(t=!1),this.lista=[],this.totalInsumos=0,this.totalMonto=0,this.totalMontoCauses=0,this.totalMontoNoCauses=0,this.totalMontoMaterialCuracion=0,this.paginacion=new n.a,this.activo=!1,this.cargando=!1,this.tieneError=function(e,t){return this.datos.get(e).hasError(t)&&this.datos.get(e).touched},this.inicializarDatos=function(e){void 0===e&&(e={});var t=e.fecha,a="";if(!e.fecha){var n=new Date,i=("0"+n.getDate()).slice(-2),r=("0"+(n.getMonth()+1)).slice(-2);t=n.getFullYear()+"-"+r+"-"+i}e.almacen_solicitante&&(a=e.almacen_solicitante),this.datos.setValue({almacen_solicitante:a,descripcion:"",observaciones:"",fecha:t})},this.obtenerDatosGuardar=function(){return{datos:this.datos.value,insumos:this.lista}},this.actualizarTotales=function(e){void 0===e&&(e=!1);var t;t=this.padre?this.padre:this,t.totalInsumos=0,t.totalMonto=0,t.totalMontoCauses=0,t.totalMontoNoCauses=0,t.totalMontoMaterialCuracion=0;var a=0,n=0,i=1;for(var r in t.lista)e&&(t.lista[r].lote=i++),t.totalInsumos+=+t.lista[r].cantidad,t.lista[r].monto&&(t.totalMonto+=t.lista[r].monto,"ME"==t.lista[r].tipo?t.lista[r].es_causes?t.totalMontoCauses+=t.lista[r].monto:t.totalMontoNoCauses+=t.lista[r].monto:"MC"==t.lista[r].tipo&&(t.totalMontoMaterialCuracion+=t.lista[r].monto,a+=t.lista[r].monto));a>0&&(n=16*a/100,t.totalMontoMaterialCuracion+=n,t.totalMonto+=n)},this.indexar=function(e){void 0===e&&(e=!0),e&&this.actualizarTotales(e),this.paginacion.totalPaginas=Math.ceil(this.lista.length/this.paginacion.resultadosPorPagina),this.paginacion.indice=[];for(var t=0;t<this.paginacion.totalPaginas;t++)this.paginacion.indice.push(t+1)},this.listar=function(e){void 0===e&&(e=1),this.paginacion.paginaActual=e;var t=(this.paginacion.paginaActual-1)*this.paginacion.resultadosPorPagina,a=t+this.paginacion.resultadosPorPagina;try{this.paginacion.lista=this.lista.slice(t,a)}catch(e){this.paginacion.lista=[]}},this.eliminarItem=function(e,t){var a=0;for(var n in this.lista){if(this.lista[n]===e){this.paginacion.lista.splice(t,1),this.lista.splice(a,1),this.indexar();var i=a+(this.paginacion.resultadosPorPagina-t)-1;if(this.lista[i]&&this.paginacion.lista.push(this.lista[i]),0==this.paginacion.lista.length&&(this.paginacion.paginaActual>1?this.listar(this.paginacion.paginaActual-1):this.listar(1)),this.padre){var r=this.padre.lista.indexOf(e),s=Math.ceil(r/this.padre.paginacion.resultadosPorPagina),o=(s-1)*this.padre.paginacion.resultadosPorPagina,c=r-o;if(this.padre.paginacion.paginaActual==s)this.padre.eliminarItem(e,c);else{var l=this.padre.paginacion.paginaActual;this.padre.listar(s),this.padre.eliminarItem(e,c),this.padre.listar(l),0==this.padre.paginacion.lista.length&&(this.padre.paginacion.paginaActual>1?this.padre.listar(this.padre.paginacion.paginaActual-1):this.padre.listar(1))}}return}a++}},t&&(this.filtro=new e,this.filtro.padre=this,this.fb=new i.FormBuilder,this.datos=this.fb.group({descripcion:["",[i.Validators.required]],fecha:["",[i.Validators.required]],almacen_solicitante:["",[i.Validators.required]],observaciones:""}),this.status="BR"),this.paginacion.resultadosPorPagina=10}return e.prototype.paginaSiguiente=function(){this.paginacion.paginaActual!=this.paginacion.totalPaginas&&this.listar(this.paginacion.paginaActual+1)},e.prototype.paginaAnterior=function(){1!=this.paginacion.paginaActual&&this.listar(this.paginacion.paginaActual-1)},e}())},GEou:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("+rFH"),o=a("1UDx"),c=a("Zit5"),l=a("w5f+"),d=a("am34"),u=a("6f/P"),p=a("52hV"),m=a("mpkG"),f=a("S9un"),g=a("7dwc");a.d(t,"a",function(){return v});var h=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},v=function(){function e(){}return e}();v=h([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,s.a,o.a,c.a],declarations:[l.a,d.a,u.a,g.a],providers:[p.a,m.a,f.a]})],v)},GMDI:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},GRYH:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("kZql"),s=a("Nqas"),o=a("2o5k");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t){this.title=e,this.apiService=t,this.cargando=!1,this.cargandoPresupuestos=!1,this.mensajeError=new s.a,this.mensajeExito=new s.a,this.q="",this.status=[],this.jurisdicciones=[],this.proveedores=[],this.statusSeleccionados=[],this.jurisdiccionesSeleccionadas=[],this.proveedoresSeleccionados=[],this.fecha_desde=null,this.fecha_hasta=null,this.sin_pedidos=!1,this.ordenarCauses="",this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.presupuesto={},this.lista=[],this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.showPedido=!1,this.datos_pedido={},this.recepciones=[],this.borrador=!0,this.cargaRecepciones=!1,this.verDialogoArchivos=!1,this.cargandoArchivos=!1,this.lista_archivos_pedido=[],this.tituloDialogoArchivos="",this.datosPedido={}}return e.prototype.ngOnInit=function(){this.mensajeError=new s.a,this.mensajeExito=new s.a,this.title.setTitle("Pedidos / Administrador central"),this.listar(1),this.cargarJurisdicciones(),this.cargarProveedores(),this.status=[{id:"BR",descripcion:"Borradores"},{id:"TR",descripcion:"En Tránsito"},{id:"PS",descripcion:"Por surtir"},{id:"FI",descripcion:"Finalizados"},{id:"EF",descripcion:"En Farmacia"},{id:"EX",descripcion:"Expirados"},{id:"EX-CA",descripcion:"Cancelados"}]},e.prototype.verInformacion=function(e){var t=this;this.cargaRecepciones=!0,this.datos_pedido={},this.datos_pedido=e,this.showPedido=!0,this.borrador=!0,this.apiService.verRecepciones(this.datos_pedido.pedido_id).subscribe(function(e){t.cargaRecepciones=!1,t.recepciones=e.recepciones,"BR"!=e.status&&(t.borrador=!1)},function(e){t.cargaRecepciones=!1,t.mensajeError.mostrar=!0,t.mensajeError.texto="Ocurrio uun error al ver la información por favor vuelva a intentarlo"})},e.prototype.regresarBorrador=function(e){var t=this;"PEDIDO BORRADOR"==prompt("Para confirmar que desea regresar el pedido a borrador, ingrese PEDIDO BORRADOR ")&&(this.cargaRecepciones=!0,this.apiService.pedidoBorrador(e).subscribe(function(e){t.cargaRecepciones=!1,t.showPedido=!1,t.mensajeExito.mostrar=!0,t.mensajeExito.texto="Se ha regresado correctamente el pedido a borrador",t.listar(1)},function(e){t.cargaRecepciones=!1,t.mensajeError.mostrar=!0,t.mensajeError.texto="Se ha encontrador un error al regresar a borrador el pedido, por favor vuelva a intentarlo "}))},e.prototype.borrarRecepcion=function(e){var t=this;"BORRAR RECEPCION"==prompt("Para confirmar que desea borrar la recepcion, ingrese BORRAR RECEPCION")&&(this.cargaRecepciones=!0,this.apiService.recepcionBorrador(e,1).subscribe(function(e){t.mensajeExito.mostrar=!0,t.mensajeExito.texto="Se ha borrado correctamente la recepcion de medicamento",t.listar(1),t.apiService.verRecepciones(e.id).subscribe(function(e){t.cargaRecepciones=!1,t.recepciones=e.recepciones,t.datos_pedido.total_claves_recibidas=e.total_claves_recibidas,t.datos_pedido.total_cantidad_recibida=e.total_cantidad_recibida,t.datos_pedido.total_monto_recibido=e.total_monto_recibido,"BR"!=e.status&&(t.borrador=!1)},function(e){t.cargaRecepciones=!1,t.mensajeError.mostrar=!0,t.mensajeError.texto="Ocurrio un error al cargar los datos de recepciones, por favor vuelva a intentarlo"})},function(e){t.cargaRecepciones=!1,t.mensajeError.mostrar=!0;try{var a=e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),500==e.status?t.mensajeError.texto=a.error:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(e){t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},e.prototype.regresarBorrarRecepcion=function(e){var t=this;"REGRESAR RECEPCION"==prompt("Para confirmar que desea regresar la recepcion, ingrese REGRESAR RECEPCION")&&(this.cargaRecepciones=!0,this.apiService.recepcionBorrador(e,2).subscribe(function(e){t.mensajeExito.mostrar=!0,t.mensajeExito.texto="Se ha borrado correctamente la recepcion de medicamento",t.listar(1),t.apiService.verRecepciones(e.id).subscribe(function(e){t.cargaRecepciones=!1,t.recepciones=e.recepciones,t.datos_pedido.total_claves_recibidas=e.total_claves_recibidas,t.datos_pedido.total_cantidad_recibida=e.total_cantidad_recibida,t.datos_pedido.total_monto_recibido=e.total_monto_recibido,"BR"!=e.status&&(t.borrador=!1)},function(e){t.cargaRecepciones=!1,t.mensajeError.mostrar=!0,t.mensajeError.texto="Ocurrio un error al cargar los datos de recepciones, por favor vuelva a intentarlo"})},function(e){t.cargaRecepciones=!1,t.mensajeError.mostrar=!0;try{var a=e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),500==e.status?t.mensajeError.texto=a.error:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(e){t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},e.prototype.cargarJurisdicciones=function(){var e=this;this.apiService.jurisdicciones().subscribe(function(t){e.jurisdicciones=t},function(e){})},e.prototype.cargarProveedores=function(){var e=this;this.apiService.proveedores().subscribe(function(t){e.proveedores=t},function(e){})},e.prototype.cambioSeleccionJurisdiccion=function(e){e==-1&&(this.jurisdiccionesSeleccionadas=[]),this.agregarJurisdiccion(e)},e.prototype.cambioSeleccionProveedor=function(e){e==-1&&(this.proveedoresSeleccionados=[]),this.agregarProveedor(e)},e.prototype.cambioSeleccionStatus=function(e){e==-1&&(this.statusSeleccionados=[]),this.agregarStatus(e)},e.prototype.agregarProveedor=function(e){if(e!=-1){for(var t in this.proveedoresSeleccionados)if(this.proveedoresSeleccionados[t].id==e)return;for(var t in this.proveedores)if(this.proveedores[t].id==e){this.proveedoresSeleccionados.push(this.proveedores[t]);break}}},e.prototype.agregarJurisdiccion=function(e){if(e!=-1){for(var t in this.jurisdiccionesSeleccionadas)if(this.jurisdiccionesSeleccionadas[t].id==e)return;for(var t in this.jurisdicciones)if(this.jurisdicciones[t].id==e){this.jurisdiccionesSeleccionadas.push(this.jurisdicciones[t]);break}}},e.prototype.agregarStatus=function(e){if(e!=-1){for(var t in this.statusSeleccionados)if(this.statusSeleccionados[t].id==e)return;for(var t in this.status)if(this.status[t].id==e){this.statusSeleccionados.push(this.status[t]);break}}},e.prototype.quitarProveedor=function(e){this.proveedoresSeleccionados.splice(e,1)},e.prototype.quitarJurisdiccion=function(e){this.jurisdiccionesSeleccionadas.splice(e,1)},e.prototype.quitarStatus=function(e){this.statusSeleccionados.splice(e,1)},e.prototype.filtrarQuery=function(e){13==e.keyCode&&this.listar(1)},e.prototype.toggleCauses=function(){switch(this.ordenarCauses){case"":this.ordenarCauses="ASC";break;case"ASC":this.ordenarCauses="DESC";break;case"DESC":this.ordenarCauses="";break;default:this.ordenarCauses=""}this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.listar(1)},e.prototype.toggleNoCauses=function(){switch(this.ordenarNoCauses){case"":this.ordenarNoCauses="ASC";break;case"ASC":this.ordenarNoCauses="DESC";break;case"DESC":this.ordenarNoCauses="";break;default:this.ordenarNoCauses=""}this.ordenarCauses="",this.ordenarMaterialCuracion="",this.listar(1)},e.prototype.toggleMaterialCuracion=function(){switch(this.ordenarMaterialCuracion){case"":this.ordenarMaterialCuracion="ASC";break;case"ASC":this.ordenarMaterialCuracion="DESC";break;case"DESC":this.ordenarMaterialCuracion="";break;default:this.ordenarMaterialCuracion=""}this.ordenarCauses="",this.ordenarNoCauses="",this.listar(1)},e.prototype.listar=function(e){var t=this;this.cargando=!0,this.paginaActual=e;var a=[];for(var n in this.proveedoresSeleccionados)a.push(this.proveedoresSeleccionados[n].id);var i=[];for(var n in this.jurisdiccionesSeleccionadas)i.push(this.jurisdiccionesSeleccionadas[n].id);var r=[];for(var n in this.statusSeleccionados)r.push(this.statusSeleccionados[n].id);var s={q:this.q,proveedores:a,jurisdicciones:i,status:r,page:this.paginaActual,per_page:this.resultadosPorPagina,ordenar_causes:this.ordenarCauses,ordenar_no_causes:this.ordenarNoCauses,ordenar_material_curacion:this.ordenarMaterialCuracion,fecha_desde:this.fecha_desde,fecha_hasta:this.fecha_hasta};this.cargandoPresupuestos=!0,this.apiService.presupuesto(s).subscribe(function(e){t.cargandoPresupuestos=!1,t.presupuesto=e.data,t.presupuesto.total_modificado=+e.data.causes_modificado+ +e.data.no_causes_modificado+ +e.data.material_curacion_modificado,t.presupuesto.total_comprometido=+e.data.causes_comprometido+ +e.data.no_causes_comprometido+ +e.data.material_curacion_comprometido,t.presupuesto.total_devengado=+e.data.causes_devengado+ +e.data.no_causes_devengado+ +e.data.material_curacion_devengado,t.presupuesto.total_disponible=+e.data.causes_disponible+ +e.data.no_causes_disponible+ +e.data.material_curacion_disponible},function(e){t.cargandoPresupuestos=!1,console.log(e)}),this.apiService.pedidos(s).subscribe(function(e){t.cargando=!1,t.lista=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Items cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.exportar=function(){var e="token="+localStorage.getItem("token")+"&ordenar_causes="+this.ordenarCauses+"&ordenar_no_causes="+this.ordenarNoCauses+"&ordenar_material_curacion="+this.ordenarMaterialCuracion;""!=this.q&&(e+="&q="+this.q);var t="";for(var a in this.proveedoresSeleccionados)""!=t&&(t+=","),t+=""+this.proveedoresSeleccionados[a].id;""!=t&&(e+="&proveedores="+t);var n="";for(var a in this.jurisdiccionesSeleccionadas)""!=n&&(n+=","),n+=""+this.jurisdiccionesSeleccionadas[a].id;""!=n&&(e+="&jurisdicciones="+n);var i="";for(var a in this.statusSeleccionados)""!=i&&(i+=","),i+=""+this.statusSeleccionados[a].id;""!=i&&(e+="&status="+i),null!=this.fecha_desde&&(e+="&fecha_desde="+this.fecha_desde),null!=this.fecha_hasta&&(e+="&fecha_hasta="+this.fecha_hasta),window.open(r.a.API_URL+"/administrador-central/pedidos-excel?"+e)},e.prototype.imprimirExcelItem=function(e){var t="token="+localStorage.getItem("token");window.open(r.a.API_URL+"/generar-excel-pedido/"+e+"?"+t)},e.prototype.cerrarDialogoArchivos=function(){this.verDialogoArchivos=!1,this.cargandoArchivos=!1,this.lista_archivos_pedido=[]},e.prototype.mostrarDialogoArchivos=function(e){var t=this;this.verDialogoArchivos=!0,this.cargandoArchivos=!0,this.tituloDialogoArchivos="Folio: "+e.folio,this.datosPedido={folio:e.folio,pedido_id:e.pedido_id},this.apiService.verArchivosPedidoProveedor(e.pedido_id).subscribe(function(e){t.lista_archivos_pedido=e,t.cargandoArchivos=!1},function(e){t.cargandoArchivos=!1,t.mensajeError=new s.a(!0),t.mensajeError.mostrar;try{var a=e.json();401==e.status?t.mensajeError.texto="No tiene permiso para hacer esta operación.":t.mensajeError.texto=a.error}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.descargar=function(e){var t=e.id,a="token="+localStorage.getItem("token"),n=this,i=window.open(r.a.API_URL+"/download-file/"+t+"?"+a),s=0,o=setInterval(function(){s+=1,i.closed?(clearInterval(o),n.mostrarDialogoArchivos(n.datosPedido),n.mensajeError.mostrar=!1,n.mensajeExito.mostrar=!0,n.mensajeExito.iniciarCuentaAtras(),n.mensajeExito.texto="Se ha descargado correctamente el archivo"):5==s&&(clearInterval(o),i.close(),n.mensajeError.mostrar=!0,n.mensajeError.iniciarCuentaAtras(),n.mensajeError.texto="Ocurrio un error al intentar descargar el archivo.")},1e3)},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e}();d=c([a.i(n.Component)({selector:"app-pedidos",template:a("TfzO"),styles:[a("Cdzd")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.b&&i.b)&&u||Object,"function"==typeof(p=void 0!==o.a&&o.a)&&p||Object])],d);var u,p},"Gb+q":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".estatus-rojo{color:red!important}.estatus-amarillo{color:orange!important}.estatus-verde{color:#23d160}.estatus-azul{color:#3273dc}.estatus-normal{color:#555}.proyecto-estatus-amarillo td a,.proyecto-estatus-amarillo th a{color:orange!important}.proyecto-estatus-rojo td a,.proyecto-estatus-rojo th a{color:red!important}.proyecto-estatus-verde td a,.proyecto-estatus-verde th a{color:#23d160!important}.proyecto-estatus-azul td a,.proyecto-estatus-azul th a{color:#3273dc!important}.proyecto-estatus-normal td a,.proyecto-estatus-normal th a{color:#555}",""]),e.exports=e.exports.toString()},GdSa:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("MT3+"),d=a("Zit5"),u=a("Qew2"),p=a("ldOH"),m=a("YwNg"),f=a("IBOI"),g=a("52hV"),h=a("VMPO"),v=a("ltyQ"),b=a("30gs"),y=a("nqnc"),_=a("nsII");a.n(_);a.d(t,"a",function(){return j});var x=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},j=function(){function e(){}return e}();j=x([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,h.a,v.a,y.a,f.a,_.NguiAutoCompleteModule],declarations:[p.a,m.a],providers:[g.a,b.a]})],j)},Gge2:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.title=e,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return e.prototype.ngOnInit=function(){this.title.setTitle("Almacén / Artículos"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[],this.accesosDirectos=[];var e=JSON.parse(localStorage.getItem("usuario")),t=e.permisos.split("|");if(t.length>0){for(var a in this.modulos)e:for(var n in t)if(t[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break e}for(var a in this.accesosDirectos)e:for(var n in t)if(t[n]==this.accesosDirectos[a].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[a]);break e}}},e}();o=r([a.i(n.Component)({selector:"app-index-almacen-articulos",template:a("iBfS"),styles:[a("oW6u")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},GiX5:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("vq80"),s=a("quI2"),o=a("qbyw");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=[{path:"almacen/salidas-recetas",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"ver/:id",component:s.a}],canActivate:[o.a]}],d=function(){function e(){}return e}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},Gip4:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("2Je8"),s=a("5oXY"),o=a("bCdj"),c=a("lgzy"),l=a("Nqas"),d=a("TtRd");a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,a,n,i,r){this.title=e,this.location=t,this.router=a,this.route=n,this.apiService=i,this.cambiarEntornoService=r,this.cargando=!1,this.guardando=!1,this.esEditar=!1,this.formularioTitulo="Nueva lista",this.errores={nombre:null,items:null},this.mensajeError=new l.a,this.mensajeExito=new l.a,this.mostrarModalInsumos=!1,this.listaClaveAgregadas=[]}return e.prototype.ngOnInit=function(){var e=this;this.lista=new d.a(!0),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){e.esEditar&&e.cargarLista()}),this.route.params.subscribe(function(t){t.id?(e.lista.id=t.id,e.cargarLista()):e.title.setTitle("Nueva lista")})},e.prototype.cargarLista=function(){var e=this;this.cargando=!0,this.esEditar=!0,this.formularioTitulo="Editar lista",this.title.setTitle("Editar lista"),this.apiService.ver(this.lista.id).subscribe(function(t){e.cargando=!1,console.log(t),e.lista.nombre=t.nombre;for(var a in t.detalles){var n=t.detalles[a],i=n.insumo_con_descripcion;e.lista.items.push(i),e.listaClaveAgregadas.push(i.clave)}e.lista.indexar(),e.lista.listar(1)},function(t){e.cargando=!1,e.mensajeError=new l.a(!0);try{t.json();401!=t.status&&403!=t.status||(e.mensajeError.texto="No tiene permiso para hacer esta operación.",e.router.navigate(["/administrador-central/claves-basicas/"]))}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}e.mensajeError.mostrar=!0})},e.prototype.toggleModalInsumos=function(){this.mostrarModalInsumos=!this.mostrarModalInsumos},e.prototype.buscar=function(e,t,a,n){var i=t.value;if(27==e.keyCode)return e.preventDefault(),e.stopPropagation(),t.value="",a.value="",this.lista.filtro.activo=!1,void(this.lista.filtro.items=[]);if(a.value!=i){if(e.preventDefault(),e.stopPropagation(),a.value=i,""==i)return this.lista.filtro.activo=!1,void(this.lista.filtro.items=[]);this.lista.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(e){var t=n[e].input.value;if(""==t)return"continue";var a=s.lista.items.filter(function(a){var i="",r=n[e].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(e){}return i.includes(t.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(e,t){return e.length-t.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.lista.filtro.items=l}else this.lista.filtro.items=r[0];this.lista.filtro.indexar(!1),this.lista.filtro.paginacion.paginaActual=1,this.lista.filtro.listar(1)}},e.prototype.eliminarInsumo=function(e,t,a){void 0===a&&(a=!1);var n=this.listaClaveAgregadas.indexOf(e.clave);this.listaClaveAgregadas.splice(n,1),a?this.lista.filtro.eliminarItem(e,t):this.lista.eliminarItem(e,t)},e.prototype.agregarItem=function(e){void 0===e&&(e={});var t=this.lista.paginacion.totalPaginas;this.lista.items.push(e),this.lista.indexar(),this.lista.paginacion.lista.length!=this.lista.paginacion.resultadosPorPagina||this.lista.paginacion.paginaActual!=t||this.lista.filtro.activo?this.lista.listar(this.lista.paginacion.paginaActual):this.lista.listar(this.lista.paginacion.paginaActual+1)},e.prototype.guardar=function(){var e=this;this.guardando=!0;var t={nombre:this.lista.nombre,items:[]};for(var a in this.lista.items)t.items.push(this.lista.items[a].clave);this.errores={nombre:null,items:null},this.esEditar?this.apiService.editar(this.lista.id,t).subscribe(function(t){e.guardando=!1},function(t){e.guardando=!1;try{var a=t.json();switch(e.mensajeError=new l.a(!0),t.status){case 401:e.mensajeError.texto="No tiee permiso para realizar esta acción.";break;case 409:e.mensajeError.texto="Verifique la información marcada de color rojo";for(var n in a.error)for(var i in a.error[n])e.errores[n]=a.error[n][i];break;case 500:e.mensajeError.texto="500 (Error interno del servidor)";break;default:e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}catch(t){e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}e.mensajeError.mostrar=!0}):this.apiService.crear(t).subscribe(function(t){e.guardando=!1,e.router.navigate(["/administrador-central/claves-basicas/editar/"+t.id])},function(t){e.guardando=!1;try{var a=t.json();switch(e.mensajeError=new l.a(!0),t.status){case 401:e.mensajeError.texto="No tiee permiso para realizar esta acción.";break;case 409:e.mensajeError.texto="Verifique la información marcada de color rojo";for(var n in a.error)for(var i in a.error[n])e.errores[n]=a.error[n][i];break;case 500:e.mensajeError.texto="500 (Error interno del servidor)";break;default:e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}catch(t){e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}e.mensajeError.mostrar=!0})},e}();m=u([a.i(n.Component)({selector:"app-formulario",template:a("hul6"),styles:[a("PjWh")],providers:[o.a]}),p("design:paramtypes",["function"==typeof(f=void 0!==i.b&&i.b)&&f||Object,"function"==typeof(g=void 0!==r.Location&&r.Location)&&g||Object,"function"==typeof(h=void 0!==s.a&&s.a)&&h||Object,"function"==typeof(v=void 0!==s.c&&s.c)&&v||Object,"function"==typeof(b=void 0!==o.a&&o.a)&&b||Object,"function"==typeof(y=void 0!==c.a&&c.a)&&y||Object])],m);var f,g,h,v,b,y},H4k4:function(e,t){e.exports="<app-graficas></app-graficas>"},Hc6D:function(e,t){e.exports='<menu-farmacia [modulo]="\'Pedidos jurisdiccionales\'" [icono]="\'assets/icono-pedidos-jurisdiccionales.svg\'" [url]="\'/almacen/pedidos-jurisdiccionales\'"></menu-farmacia>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile">\r\n      <div class="tile is-4 is-parent is-vertical ">\r\n        <div class="tile is-child">\r\n            <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n                <section class="hero is-primary" >\r\n                <h1 class="title" style="margin:0.5em;" >\r\n                    <span class="icon is-medium"><i class="fa fa-file-text"></i></span> {{formularioTitulo}} \r\n                </h1>\r\n                <a class="button is-success" title="Imprimir Excel" (click)="imprimirExcel(); " *ngIf="esEditar">\r\n                    <span class="icon"><i class="fa fa-file-excel-o"></i></span> &nbsp; Descargar Pedido en Excel\r\n                </a>\r\n                </section>\r\n\r\n                <div style="padding: 1em;">\r\n                <form name="form" novalidate [formGroup]="pedido.datos">\r\n                    <label class="label">Pedido para:</label>\r\n                    <p class="control">\r\n                        <span class="select is-fullwidth">\r\n                            <select name="almacen_solicitante" formControlName="almacen_solicitante" [ngClass]="{\'is-warning\': almacenes?.length == 0 }" (change)="cambioAlmacen()">\r\n                                <option *ngFor="let item of almacenes" value="{{item.id}}">{{ item.nombre }}</option>\r\n                            </select>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'almacen_solicitante\',\'required\')">Debe elegir el almacen solicitante.</span>\r\n                    </p>\r\n                    <p *ngIf="es_almacen_subrogado" class="subtitle is-6 is-info">\r\n                        Al concluir el pedido, los insumos capturados serán  asignados al inventario de la farmacia subrogada.\r\n                    </p>\r\n\r\n                    <label class="label">Nombre del Pedido:</label>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input type="text" class="input is-fullwidth" placeholder="Ej. Pedido del mes de Mayo" [ngClass]="{\'is-danger\': pedido.tieneError(\'descripcion\',\'required\')}" formControlName="descripcion"/>\r\n                        <span class="icon is-small" *ngIf="pedido.tieneError(\'descripcion\',\'required\')">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'descripcion\',\'required\')">Este campo es requerido.</span>\r\n                    </p>\r\n\r\n                    <label class="label">Fecha (aaaa-mm-dd):</label>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input type="text" class="input is-fullwidth" placeholder="aaaa-mm-dd" [ngClass]="{\'is-danger\': pedido.tieneError(\'fecha\',\'required\')}" formControlName="fecha" #fecha id="fecha" (keyup)="recargarPresupuesto(fecha.value)"/>\r\n                        <span class="icon is-small" *ngIf="pedido.tieneError(\'fecha\',\'required\')">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <!--span class="select is-fullwidth">\r\n                            <select [ngClass]="{\'is-danger\': pedido.tieneError(\'fecha\',\'required\')}" formControlName="fecha" #fecha id="fecha" (change)="recargarPresupuesto(fecha.value)">\r\n                                <option *ngFor="let item of fechasValidas" value="{{item.fecha}}">{{ item.descripcion }}</option>\r\n                            </select>\r\n                        </span-->\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'fecha\',\'required\')">Este campo es requerido.</span>\r\n                    </p>\r\n\r\n                    <div class="control">\r\n                    <textarea name="observaciones" class="textarea" placeholder="Observaciones"  formControlName="observaciones"></textarea>\r\n                    </div>\r\n                </form>\r\n\r\n                <label *ngIf="pedido.tipo_pedido != \'PI\' && esEditar" class="label">Datos del Proveedor:</label>\r\n                <div *ngIf="pedido.tipo_pedido != \'PI\' && esEditar" class="level-item">\r\n                    <div *ngIf="esEditar" >\r\n                    <p class="subtitle is-5">\r\n                        {{proveedor.nombre}}<br>\r\n                        <small>\r\n                        {{proveedor.contacto}}<br>\r\n                        {{proveedor.email}}<br>\r\n                        Cel: {{proveedor.celular}}\r\n                        </small>\r\n                    </p>\r\n                    </div>\r\n                </div>\r\n                <hr>\r\n\r\n                <div class="control is-grouped" style="padding-top:10px;" *ngIf="!cargando">\r\n                    <!--p class="control" *ngIf="esEditar">\r\n                        <a class="button is-success " [ngClass]="{ \'is-loading\': cargando, \'is-inverted\': !cargando }" (click)="imprimirExcel()" title="Imprimir Excel" ><span class="icon"><i class="fa fa-file-excel-o"></i></span></a>\r\n                    </p-->\r\n\r\n                    <p class="control">\r\n                        <a class="button is-primary " (click)="guardar()" [ngClass]="{\'is-loading\': guardando}" >Guardar</a>\r\n                    </p>\r\n                    <p class="control" *ngIf="esEditar">\r\n                        <a class="button is-danger " (click)="finalizar()" [ngClass]="{\'is-loading\': guardando}" ><span class="icon"><i class="fa fa-check"></i></span><span>Concluir</span></a>\r\n                    </p>\r\n                \r\n                    <!--p class="control" *ngIf="esEditar">\r\n                    <a class="button is-primary " [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }" (click)="imprimir()" ><span class="icon"><i class="fa fa-print"></i></span></a>\r\n                    </p-->\r\n                    <p class="control">\r\n                    <a class="button is-white" [ngClass]="{\'is-loading\': guardando}" routerLink="{{obtenerDireccion()}}" >Ir a la lista</a>\r\n                    </p>                \r\n                </div>\r\n                </div>\r\n            </div>\r\n            <br>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      <div class="tile is-parent is-vertical">\r\n        <div class="tile is-child is-12" >\r\n            <div class="tile is-parent" style="padding:0px;">\r\n                <div style="border-radius:0.5em; overflow:hidden; width:100%;">\r\n                    <table class="table" *ngIf="!cargandoPresupuestos" style="margin:0px;">\r\n                        <thead>\r\n                            <tr>\r\n                                <th></th>\r\n                                <th>Causes</th>\r\n                                <th>No Causes</th>\r\n                                <th>Material de curación</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <th>Disponible:</th>\r\n                                <td><span *ngIf="(presupuesto.causes_disponible - pedido.totalMontoCauses) <= 0" class="icon" style="color:red"><i class="fa fa-warning"></i></span>$<b>{{(presupuesto.causes_disponible - pedido.totalMontoCauses.toFixed(2)) | number: \'1.2-2\' }}</b></td>\r\n                                <td><span *ngIf="(presupuesto.no_causes_disponible - pedido.totalMontoNoCauses) <= 0" class="icon" style="color:red"><i class="fa fa-warning"></i></span>$<b>{{(presupuesto.no_causes_disponible - pedido.totalMontoNoCauses.toFixed(2)) | number: \'1.2-2\' }}</b></td>\r\n                                <td><span *ngIf="(presupuesto.material_curacion_disponible - pedido.totalMontoMaterialCuracion) <= 0" class="icon" style="color:red"><i class="fa fa-warning"></i></span>$<b>{{(presupuesto.material_curacion_disponible - pedido.totalMontoMaterialCuracion.toFixed(2)) | number: \'1.2-2\' }}</b></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="tile is-child" >\r\n          <div class="contenedor-pedido" >\r\n            <div class="top-bar" [ngClass]="{\'is-primary\':!pedido.filtro.activo,\'is-dark\': pedido.filtro.activo }">\r\n                <span *ngIf="!pedido.filtro.activo"><small><b>Mes:</b> {{ meses[mes] }} <b>Claves:</b> {{ pedido.lista.length | number }} <b>Insumos:</b> {{pedido.totalInsumos | number}} <b>Total:</b> $ {{ pedido.totalMonto | number: \'1.2-2\' }}</small></span>\r\n                <span *ngIf="pedido.filtro.activo"><span class="icon"><i class="fa fa-search"></i></span> Resultados: {{ pedido.filtro.lista.length }}</span>\r\n                <a class="button is-primary  is-pulled-right" [ngClass]="{ \'is-inverted\': pedido.filtro.activo }" style="margin-top:-0.25em;" title="Ctrl + espacio" (click)="toggleModalInsumos(); ">\r\n                    <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar Clave</span>\r\n                </a>\r\n            </div> \r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="guardando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-spinner fa-spin"></i></span> &nbsp;<span>Guardando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table is-unselectable" *ngIf="!cargando && !guardando" style="font-size: 0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                        <th class="is-hidden-mobile" style="width:118px;">\r\n                        <p class="control is-expanded" >\r\n                            <input type="hidden" #searchBoxClavePrevia >\r\n                            <input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave" (keyup)="buscar($event,searchBoxClave,searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>\r\n                        <th class="is-hidden-tablet">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                            \r\n                            <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>  \r\n                        <th style="vertical-align: middle;" class="is-hidden-mobile " >Descripcion</th>                  \r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                        <th style="text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Unidades médicas asignadas">Clues</abbr></th>\r\n                        <th  style="width:21px !important;"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                    <tr   *ngFor="let item of pedido.paginacion.lista; let i = index;">\r\n                        <td class="has-text-centered">{{ item.lote }}</td>\r\n                        <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                        \r\n                        <td>\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <div style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            </div>\r\n                        </td>\r\n\r\n                        <td style="width:100px !important;text-align:center;">\r\n                            <a (click)="toggleModalListaClues(item); ">{{ item.cantidad }}</a>\r\n                        </td>\r\n\r\n                        <td style="text-align: right;">\r\n                            $<b><abbr>{{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                        </td>\r\n                        <td style="width:100px !important; text-align:center">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.lista_clues.length }}</a>\r\n                        </td>\r\n                        <td style="width:70px !important;">\r\n                            <a (click)="toggleModalListaClues(item); "><span class="icon"><i class="fa fa-list"></i></span></a>\r\n                            <a (click)="eliminarInsumo(item,i,false)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                    </tr>      \r\n                </tbody>\r\n                <tbody *ngIf="pedido.filtro.activo">\r\n                    <tr  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;">\r\n                        <td class="has-text-centered">{{ item.lote }}</td>\r\n                        <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                        \r\n                        <td>\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <div style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            </div>\r\n                        </td>\r\n\r\n                        <td style="width:100px !important; text-align:center">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.cantidad }}</a>\r\n                        </td>\r\n\r\n                        <td style="width:78px !important;">\r\n                            $<b><abbr>{{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                        </td> \r\n                        <td style="width:100px !important; text-align:center">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.lista_clues.length }}</a>\r\n                        </td>\r\n                        <td style="width:70px !important;">\r\n                            <a (click)="toggleModalListaClues(item); "><span class="icon"><i class="fa fa-list"></i></span></a>\r\n                            <a (click)="eliminarInsumo(item,i,true)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>              \r\n            </table>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.lista.length" \r\n                    [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.paginacion.indice"\r\n                    (onSiguiente)="pedido.paginaSiguiente()" \r\n                    (onAnterior)="pedido.paginaAnterior()" \r\n                    (onListar)="pedido.listar($event)" \r\n                    *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.filtro.lista.length" \r\n                    [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                    (onSiguiente)="pedido.filtro.paginaSiguiente()" \r\n                    (onAnterior)="pedido.filtro.paginaAnterior()" \r\n                    (onListar)="pedido.filtro.listar($event)" \r\n                    *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n            \r\n            <br>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<buscar-insumos \r\n    *ngIf="mostrarModalInsumos" \r\n    (onCerrar)="mostrarModalInsumos = false" \r\n    (onEnviar)="agregarItem($event)" \r\n    [listaAgregadosConClues]="listaClaveAgregadas" \r\n    [conPrecios]="true" \r\n    [conClues]="true"></buscar-insumos>\r\n<pedidos-jurisdiccionales-lista-clues \r\n    *ngIf="mostrarModalListaClues" [insumo]="loteSeleccionado" \r\n    [listaClaveAgregadas]="listaClaveAgregadas" \r\n    (onCerrar)="mostrarModalListaClues = false"></pedidos-jurisdiccionales-lista-clues>'},Hd3x:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("pMSx"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"equipamiento",component:r.a,canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},HfqJ:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("NVOs"),s=a("5oXY");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,a,n){this.fb=e,this.router=t,this.route=a,this._sanitizer=n,this.tieneid=!1,this.tipos_almacen=[{id:"ALMPAL",nombre:"ALMPAL"},{id:"JURIS",nombre:"JURIS"},{id:"UNMED",nombre:"UNMED"},{id:"LAB",nombre:"LAB"},{id:"FARMACIA",nombre:"FARMACIA"},{id:"CENDIS",nombre:"CENDIS"}],this.niveles_almacen=[{id:1,nombre:"HACE PEDIDOS AL PROVEEDOR"},{id:2,nombre:"HACE PEDIDOS A OTRO ALMACEN DENTRO DE LA CLUES"}],this.tab=1}return e.prototype.ngOnInit=function(){var e=this;this.dato=this.fb.group({id:["",[r.Validators.required]],nombre:["",[r.Validators.required]],nivel_almacen:["",[r.Validators.required]],tipo_almacen:["",[r.Validators.required]],subrogado:[""],proveedor_id:[""],unidosis:[""],almacen_tipos_movimientos:this.fb.array([])}),this.form_almacen_tipos_movimientos={tipo_movimiento_id:["",[r.Validators.required]]},this.route.params.subscribe(function(t){t.id&&(e.tieneid=!0)}),document.getElementById("catalogos").click()},e.prototype.ngAfterViewInit=function(){setTimeout(function(){document.getElementById("initMover").click()},5e3)},e}();l=o([a.i(n.Component)({selector:"almacenes-formulario",template:a("d1I3")}),c("design:paramtypes",["function"==typeof(d=void 0!==r.FormBuilder&&r.FormBuilder)&&d||Object,"function"==typeof(u=void 0!==s.a&&s.a)&&u||Object,"function"==typeof(p=void 0!==s.c&&s.c)&&p||Object,"function"==typeof(m=void 0!==i.d&&i.d)&&m||Object])],l);var d,u,p,m},Hg6L:function(e,t,a){"use strict";var n=a("3j3K"),i=a("NAeX"),r=a("lgzy");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.pedidosService=e,this.cambiarEntornoService=t,this.cargando=!1,this.stats={todos:0,borradores:0,en_transito:0,por_surtir:0,finalizados:0,expirados:0,expirados_cancelados:0,farmacia:0}}return e.prototype.ngOnInit=function(){var e=this;this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){e.stats={todos:0,borradores:0,en_transito:0,por_surtir:0,finalizados:0,expirados:0,expirados_cancelados:0,farmacia:0},e.cargarStatsPedidos()}),this.cargarStatsPedidos()},e.prototype.cargarStatsPedidos=function(){var e=this;this.cargando=!0,this.pedidosService.stats().subscribe(function(t){e.cargando=!1,e.stats=t},function(t){e.cargando=!1,console.log(t)})},e.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},e}();c=s([a.i(n.Component)({selector:"menu-lateral",template:a("P2oc"),styles:[a("ew22")]}),o("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],c);var l,d},HpL6:function(e,t,a){"use strict";var n=a("3j3K"),i=a("NVOs"),r=a("Qbdm"),s=a("5oXY"),o=a("30gs"),c=a("3MNG");a.d(t,"a",function(){return u});var l=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,a,n,i){this.fb=e,this.crudService=t,this.route=a,this._sanitizer=n,this.notificacion=i,this.cargando=!1,this.tamano=0,this.tieneid=!1,this.foto=""}return e.prototype.ngOnInit=function(){JSON.parse(localStorage.getItem("usuario"));this.tamano=this.elementView.nativeElement.offsetHeight/2,this.dato=this.fb.group({json:[""],archivos:[""]})},e.prototype.abrirModal=function(e){document.getElementById(e).classList.add("is-active")},e.prototype.cancelarModal=function(e){document.getElementById(e).classList.remove("is-active")},e}();l([a.i(n.ViewChild)("mainScreen"),d("design:type","function"==typeof(p=void 0!==n.ElementRef&&n.ElementRef)&&p||Object)],u.prototype,"elementView",void 0),u=l([a.i(n.Component)({selector:"sincronizar-recetas-lista",template:a("JMwV"),styles:[a("iajj")]}),d("design:paramtypes",["function"==typeof(m=void 0!==i.FormBuilder&&i.FormBuilder)&&m||Object,"function"==typeof(f=void 0!==o.a&&o.a)&&f||Object,"function"==typeof(g=void 0!==s.c&&s.c)&&g||Object,"function"==typeof(h=void 0!==r.d&&r.d)&&h||Object,"function"==typeof(v=void 0!==c.a&&c.a)&&v||Object])],u);var p,m,f,g,h,v},IBOI:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("5oXY"),o=a("TCqv"),c=a("Uvud"),l=a("fjeY"),d=a("+ZDf"),u=a("Qew2"),p=a("8672"),m=a("qnXI");a.d(t,"a",function(){return g});var f=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},g=function(){function e(){}return e}();g=f([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,o.a,c.a,l.a,d.a,u.a,s.b],exports:[m.a],declarations:[p.a,m.a]})],g)},ILDO:function(e,t){e.exports='<menu-farmacia [modulo]="\'Dashboard salidas\'" [icono]="\'assets/icono-dashboard.svg\'"\r\n  [url]="\'/almacen/dashboard-salidas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n\r\n<div class="box" style="margin: 20px;">\r\n      <div class="columns">\r\n        <div class="column is-half">\r\n  <section class="section">\r\n          <div class="heading">\r\n            <h1 class="title">{{usuario.almacen_activo.nombre}}</h1>\r\n            <h2 class="subtitle">\r\n              {{usuario.clues_activa.clues}} <strong>{{usuario.clues_activa.nombre}}</strong>\r\n            </h2>\r\n          </div>\r\n  </section>\r\n        </div>\r\n        <div class="column">\r\n          <div class="field">\r\n            <label class="label">Fecha inicial:</label>\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <input class="input" [value]="fecha_inicial_actual" formControlName="fecha_inicial" [(ngModel)]="fecha_inicial" ngui-datetime-picker\r\n                  [min-date]="MinDate" [max-date]="MaxDate" date-only="true" \r\n                  placeholder="YYYY-MM-DD" />\r\n            </p>\r\n          </div>\r\n          <div class="field">\r\n            <label class="label">Fecha final:</label>\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <input class="input" [value]="fecha_actual" formControlName="fecha_final" [(ngModel)]="fecha_final" ngui-datetime-picker\r\n                  [min-date]="MinDate" [max-date]="MaxDate" date-only="true" \r\n                  placeholder="YYYY-MM-DD" />\r\n            </p>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n  <div class="card" style="margin: 20px; padding-left: 30px; padding-right: 70px">\r\n    <table class="table" style="margin:5px;">\r\n      <tbody>\r\n        <tr>\r\n          <th>Presupuesto Anual Causes:</th>\r\n          <th>\r\n            <div class="columns">\r\n              <div class="column">\r\n                <span class="tag is-primary is-medium">Autorizado: $ {{ presupuesto.causes_modificado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-warning is-medium">Comprometido: $ {{ presupuesto.causes_comprometido | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-danger is-medium">Devengado: $ {{ presupuesto.causes_devengado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-success is-medium">Disponible: $ {{ presupuesto.causes_disponible | number:\'1.2-2\' }}</span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th>Presupuesto Anual No Causes:</th>\r\n          <th>\r\n            <div class="columns">\r\n              <div class="column">\r\n                <span class="tag is-primary is-medium">Autorizado: $ {{ presupuesto.no_causes_modificado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-warning is-medium">Comprometido: $ {{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-danger is-medium">Devengado: $ {{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-success is-medium">Disponible: $ {{ presupuesto.no_causes_disponible | number:\'1.2-2\' }}</span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th>Presupuesto Anual Material de Curación:</th>\r\n          <th>\r\n            <div class="columns">\r\n              <div class="column">\r\n                <span class="tag is-primary is-medium">Autorizado: $ {{ presupuesto.material_curacion_modificado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-warning is-medium">Comprometido: $ {{ presupuesto.material_curacion_comprometido | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-danger is-medium">Devengado: $ {{ presupuesto.material_curacion_devengado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-success is-medium">Disponible: $ {{ presupuesto.material_curacion_disponible | number:\'1.2-2\' }}</span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  \r\n  <!-- Primera parte -->\r\n  <div class="columns">\r\n    <!-- Mes y total de recetas -->\r\n    <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 60px">\r\n      <div class="card">\r\n        <div class="card-content">\r\n          <div class="content">\r\n            <div class="label" style="text-align: center">\r\n              Mes:\r\n            </div>\r\n            <div class="label" style="text-align: center">\r\n              Total de recetas:\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- % surtido -->\r\n    <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 60px">\r\n      <!-- % Surtido por claves -->\r\n      <div class="card" [ngClass]="{\'is-hidden\': surtido == 2 || surtido == 3}">\r\n        <header class="card-header is-primary">\r\n          <p class="card-header-title">\r\n            Porcentaje de surtimiento\r\n          </p>\r\n            <div class="level-right">\r\n              <a (click)="cambiarSurtido(1)">\r\n                <div class="tag is-primary">Claves </div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(2)">\r\n                <div class="tag">Insumos </div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(3)">\r\n                <div class="tag">Monto </div>\r\n              </a>\r\n            </div>\r\n        </header>\r\n        <div class="card-content">\r\n          <div class="content scroll">\r\n            <table class="table">\r\n              <thead>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Cantidad solicitada">Solicitado</abbr></th>\r\n                  <th><abbr title="Cantidad surtida">Surtido</abbr></th>\r\n                  <th><abbr title="Porcentaje">%</abbr></th>\r\n                </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Cantidad solicitada">Solicitado</abbr></th>\r\n                  <th><abbr title="Cantidad surtida">Surtido</abbr></th>\r\n                  <th><abbr title="Porcentaje">%</abbr></th>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                <tr>\r\n                  <th>1</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>2</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>3</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>4</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>5</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>6</th>\r\n                  <td>550</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>7</th>\r\n                  <td>450</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>8</th>\r\n                  <td>400</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>9</th>\r\n                  <td>350</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>10</th>\r\n                  <td>300</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>11</th>\r\n                  <td>250</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>12</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>13</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>14</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>15</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>16</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>17</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>18</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>19</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>20</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- % Surtido por insumos -->\r\n      <div class="card" [ngClass]="{\'is-hidden\': surtido == 1 || surtido == 3 }">\r\n        <header class="card-header is-primary">\r\n          <p class="card-header-title">\r\n            Porcentaje de surtimiento\r\n          </p>\r\n          <div class="level-right">\r\n              <a (click)="cambiarSurtido(1)">\r\n                <div class="tag">Claves</div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(2)">\r\n                <div class="tag is-primary">Insumos</div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(3)">\r\n                <div class="tag">Monto</div>\r\n              </a>\r\n            </div>\r\n        </header>\r\n        <div class="card-content">\r\n          <div class="content scroll">\r\n            <table class="table">\r\n              <thead>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Cantidad solicitada">Solicitado</abbr></th>\r\n                  <th><abbr title="Cantidad surtida">Surtido</abbr></th>\r\n                  <th><abbr title="Porcentaje">%</abbr></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <th>1</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- % Surtido por monto -->\r\n      <div class="card" [ngClass]="{\'is-hidden\': surtido == 1 || surtido == 2}">\r\n        <header class="card-header is-primary">\r\n          <p class="card-header-title">\r\n            Porcentaje de surtimiento\r\n          </p>\r\n        </header>\r\n        <div class="card-content">\r\n          <div class="content">\r\n            <div class="level-right">\r\n              <a (click)="cambiarSurtido(1)">\r\n                <div class="tag">Claves</div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(2)">\r\n                <div class="tag">Insumos</div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(3)">\r\n                <div class="tag is-primary">Monto</div>\r\n              </a>\r\n            </div>\r\n            <table class="table">\r\n              <thead>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Cantidad solicitada">Solicitado</abbr></th>\r\n                  <th><abbr title="Cantidad surtida">Surtido</abbr></th>\r\n                  <th><abbr title="Porcentaje">%</abbr></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <th>1</th>\r\n                  <td>$ 500.00</td>\r\n                  <td>$ 250.00</td>\r\n                  <td>50</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!--  -->\r\n  <div class="columns">\r\n\r\n    <!-- Claves negadas -->\r\n    <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 60px">\r\n      <div class="card">\r\n        <header class="card-header">\r\n          <p class="card-header-title">\r\n            TOP - Claves negadas\r\n          </p>\r\n        </header>\r\n        <div class="card-content">\r\n          <div class="content scroll">\r\n            <table class="table">\r\n              <thead>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Clave">Clave</abbr></th>\r\n                  <th>Nombre</th>\r\n                  <th><abbr title="Cantidad">Cant.</abbr></th>\r\n                  <th><abbr title="Existencia">Exist.</abbr></th>\r\n                  <th><abbr title="Periodo de negacion">Negacion</abbr></th>\r\n                </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Clave">Clave</abbr></th>\r\n                  <th>Nombre</th>\r\n                  <th><abbr title="Cantidad">Cant.</abbr></th>\r\n                  <th><abbr title="Existencia">Exist.</abbr></th>\r\n                  <th><abbr title="Periodo de negacion">Negacion</abbr></th>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                <tr>\r\n                  <th>1</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>2</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>3</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>4</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>5</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>6</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>8</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>9</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>10</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>11</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>12</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>13</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>14</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>15</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Claves de mayor movimiento -->\r\n    <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 60px">\r\n      <div class="card">\r\n        <header class="card-header is-primary">\r\n          <p class="card-header-title">\r\n            TOP - Claves de mayor movimiento\r\n          </p>\r\n        </header>\r\n        <div class="card-content">\r\n          <div class="content scroll">\r\n            <table class="table">\r\n              <thead>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Clave">Clave</abbr></th>\r\n                  <th>Nombre</th>\r\n                  <th><abbr title="Consumo promedio mensual">CPM</abbr></th>\r\n                  <th><abbr title="Existencia actual">Exist.</abbr></th>\r\n                </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Clave">Clave</abbr></th>\r\n                  <th>Nombre</th>\r\n                  <th><abbr title="Consumo promedio mensual">CPM</abbr></th>\r\n                  <th><abbr title="Existencia actual">Exist.</abbr></th>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                <tr>\r\n                  <th>1</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>2</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>3</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>4</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>5</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>6</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>7</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>8</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>9</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>10</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>11</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>12</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>13</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>14</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>15</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Gráficas \r\n    <div class="columns">\r\n        <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 60px">\r\n        </div>\r\n        <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 70px">\r\n            <div class="card" style="align-items: center; align-content: center; align-self: center">\r\n                        <chart [options]="grafica_opciones"></chart>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    -->\r\n    \r\n  <!-- Claves -->\r\n  <div class="card" [ngClass]="{\'is-hidden\': grafica == 2 || grafica == 3}">\r\n    <div class="card-content">\r\n      <div class="content">\r\n        <div class="level-right">\r\n          <a (click)="cambiarGrafica(1)">\r\n            <div class="tag is-primary">Claves</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(2)">\r\n            <div class="tag">Insumos</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(3)">\r\n            <div class="tag">Monto</div>\r\n          </a>\r\n        </div>\r\n        <!-- Gráfica CLAVES -->\r\n        <div class="panel">\r\n          <chart [options]="claves"></chart>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Insumos -->\r\n  <div class="card" [ngClass]="{\'is-hidden\': grafica == 1 || grafica == 3}">\r\n    <div class="card-content">\r\n      <div class="content">\r\n        <div class="level-right">\r\n          <a (click)="cambiarGrafica(1)">\r\n            <div class="tag">Claves</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(2)">\r\n            <div class="tag is-primary">Insumos</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(3)">\r\n            <div class="tag">Monto</div>\r\n          </a>\r\n        </div>\r\n        <!-- Gráfica INSUMOS -->\r\n        <div class="panel">\r\n          <chart [options]="insumos"></chart>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Monto -->\r\n  <div class="card" [ngClass]="{\'is-hidden\': grafica == 1 || grafica == 2}">\r\n    <div class="card-content">\r\n      <div class="content">\r\n        <div class="level-right">\r\n          <a (click)="cambiarGrafica(1)">\r\n            <div class="tag">Claves</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(2)">\r\n            <div class="tag">Insumos</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(3)">\r\n            <div class="tag is-primary">Monto</div>\r\n          </a>\r\n        </div>\r\n        <!-- Gráfica MONTO -->\r\n        <div class="panel">\r\n          <chart [options]="monto"></chart>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'},IOyb:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("5oXY"),s=a("rCTf"),o=(a.n(s),a("EEr4")),c=(a.n(o),a("1APj")),l=(a.n(c),a("h0qH")),d=(a.n(l),a("aV5h")),u=(a.n(d),a("q3ik")),p=(a.n(u),a("+pb+")),m=(a.n(p),a("uCY4")),f=(a.n(m),a("6Yye")),g=(a.n(f),a("Q3Nn")),h=a("Nqas");a.d(t,"a",function(){return y});var v=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(){function e(e,t,a){this.title=e,this.route=t,this.entregasService=a,this.cargando=!1,this.mensajeError=new h.a,this.mensajeExito=new h.a,this.titulo="Historial",this.icono="f",this.pedidos=[],this.paginaActual=1,this.resultadosPorPagina=5,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new o.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=5,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Historial de entregas / Farmacia"),this.listar(1),this.mensajeError=new h.a,this.mensajeExito=new h.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.entregasService.buscar(null,t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):s.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.entregasService.buscar(null,e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1;var t=e.data;for(var n in t)t[n].created_at=t[n].created_at.replace(" ","T");a.resultadosBusqueda=t,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var i=0;i<a.paginasTotalesBusqueda;i++)a.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,console.log("Cargando items."),this.cargando=!0,this.entregasService.lista(null,e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1;var a=e.data;for(var n in a)console.log(a[n].created_at.replace(" ","T")),a[n].created_at=a[n].created_at.replace(" ","T");t.pedidos=a,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var i=0;i<t.paginasTotales;i++)t.indicePaginas.push(i+1);console.log("Pedidos cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e}();y=v([a.i(n.Component)({selector:"app-historial",template:a("X5mc"),styles:[a("R7g0")],providers:[g.a]}),b("design:paramtypes",["function"==typeof(_=void 0!==i.b&&i.b)&&_||Object,"function"==typeof(x=void 0!==r.c&&r.c)&&x||Object,"function"==typeof(j=void 0!==g.a&&g.a)&&j||Object])],y);var _,x,j},IWmU:function(e,t){e.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " \'is-primary\' " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    \r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Alta Paciente\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n             <section class="section">\r\n                <form name="form" novalidate [formGroup]="pacienteEgreso"  (ngSubmit)="enviar()">     \r\n                \r\n                  <section class="section" style="background-color: #00d1b2;">\r\n                    <div class="container">\r\n                      <div class="heading">\r\n                        <h1 class="title" style="color: #FFF">Datos del Paciente</h1>\r\n                        <h2 class="subtitle" style="color: #FFF">\r\n                          ID: {{ id_paciente }}<BR>\r\n                          NOMBRE: {{ nombre_paciente }} <BR>\r\n                          LOCALIDAD: {{ localidad_paciente }}<BR>\r\n                          FECHA DE INGRESO: {{ fecha_ingreso}}<br>\r\n                          AREA: {{ area_ingreso}}\r\n\r\n                        </h2>\r\n                      </div>\r\n                    </div>\r\n                  </section>\r\n\r\n                  <br>\r\n                  <div class="control is-grouped">  \r\n                    \r\n                    <p class="control is-expanded has-icon has-icon-right">\r\n                      <label class="label">Motivo Egreso</label> \r\n                      <span class="select is-fullwidth">\r\n                            <select  formControlName="motivo_egreso_id" name="motivo_egreso_id"  >\r\n                                <option *ngFor="let item of MotivoEgreso" value="{{item.id}}">{{ item.descripcion }} </option>\r\n                            </select>\r\n                            \r\n                        </span> \r\n                        <span class="icon is-small" *ngIf="pacienteEgreso.get(\'motivo_egreso_id\').hasError(\'required\') && pacienteEgreso.get(\'motivo_egreso_id\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pacienteEgreso.get(\'motivo_egreso_id\').hasError(\'required\') && pacienteEgreso.get(\'motivo_egreso_id\').touched">Este campo es requerido.</span>\r\n                    </p>\r\n                    <p class="control is-expanded has-icon has-icon-right">\r\n                      <label class="label">Fecha de egreso</label>    \r\n                        <input class="input" type="text" placeholder="aaaa-mm-dd" formControlName="fecha_egreso"  readonly="readonly"> \r\n                        <span class="icon is-small" *ngIf="pacienteEgreso.get(\'fecha_egreso\').hasError(\'required\') && pacienteEgreso.get(\'fecha_egreso\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="pacienteEgreso.get(\'fecha_egreso\').hasError(\'required\') && pacienteEgreso.get(\'fecha_egreso\').touched">Este campo es requerido.</span>               \r\n                    </p>\r\n                    <p class="control is-expanded has-icon has-icon-right">\r\n                      <label class="label">hora de egreso</label>    \r\n                        <input class="input" type="text" placeholder="00:00" formControlName="hora_egreso" readonly="readonly">\r\n                        <span class="icon is-small" *ngIf="pacienteEgreso.get(\'hora_egreso\').hasError(\'required\') && pacienteEgreso.get(\'hora_egreso\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="pacienteEgreso.get(\'hora_egreso\').hasError(\'required\') && pacienteEgreso.get(\'hora_egreso\').touched">Este campo es requerido.</span>\r\n                    </p>\r\n                  </div>\r\n                  <div class="control is-grouped">  \r\n                    \r\n                    <p class="control is-expanded has-icon has-icon-right">\r\n                      <label class="label">Contrareferencia</label> \r\n                      <span class="select is-fullwidth">\r\n                            <select  formControlName="contrareferencia" name="contrareferencia" #contrareferencia (change)="referido(contrareferencia.value)">\r\n                                <option value="1" selected="selected">SI</option>\r\n                                <option value="2">NO</option>\r\n                            </select>\r\n                            \r\n                        </span> \r\n                        <span class="icon is-small" *ngIf="pacienteEgreso.get(\'contrareferencia\').hasError(\'required\') && pacienteEgreso.get(\'contrareferencia\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pacienteEgreso.get(\'contrareferencia\').hasError(\'required\') && pacienteEgreso.get(\'contrareferencia\').touched">Este campo es requerido.</span>\r\n                    </p>\r\n                    <p class="control is-expanded has-icon has-icon-right">\r\n                      <label class="label">Unidad Contrareferencia</label> \r\n                      <span class="select is-fullwidth">\r\n                            <select  formControlName="unidad_referencia" name="unidad_referencia" >\r\n                                <option *ngFor="let item of UnidadesMedicas" value="{{item.clues}}">{{ item.nombre }} - {{ item.clues }}</option>\r\n                            </select>\r\n                            \r\n                        </span> \r\n                        <span class="icon is-small" *ngIf="pacienteEgreso.get(\'unidad_referencia\').hasError(\'required\') && pacienteEgreso.get(\'unidad_referencia\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pacienteEgreso.get(\'unidad_referencia\').hasError(\'required\') && pacienteEgreso.get(\'unidad_referencia\').touched">Este campo es requerido.</span>\r\n                    </p>\r\n                    \r\n                  </div>\r\n                  <br><br>\r\n                  <div class="control is-grouped">\r\n                    <p class="control">\r\n                      <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="pacienteEgreso.invalid">Guardar</button>\r\n                    </p>\r\n                    \r\n                    <p class="control">\r\n                      <a class="button is-white" (click)="regresar()" >Regresar</a>\r\n                    </p>\r\n                  </div>\r\n\r\n              </form>\r\n            </section>  \r\n        </div>\r\n    </div>    \r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},Iksp:function(e,t,a){"use strict";function n(){var e=a("504h");return a("VVDx")(e),e}var i=a("Qbdm"),r=a("3j3K"),s=a("NVOs"),o=a("Fzro"),c=a("BDfs"),l=(a.n(c),a("bu1r")),d=(a.n(l),a("gDrt")),u=(a.n(d),a("YWx4")),p=a("zhGp"),m=a("Rvy0"),f=a("+YJN"),g=a("qbyw"),h=a("NJ09"),v=a("52hV"),b=a("oafO"),y=a("2vVT"),_=(a.n(y),a("Cd9f")),x=a("Ycqj"),j=a("Uvud"),E=a("fjeY"),I=a("+ZDf"),P=a("Qew2"),C=a("/wGT"),k=a("i3h7"),S=a("GEou"),A=a("JqWR"),q=a("tz+m"),w=a("cMTe"),R=a("szl0"),O=a("Imlg"),B=a("r2dd"),M=a("7IuX"),N=a("L8B/"),F=a("RHrs"),D=a("z4T9"),L=a("NOMR"),T=a("RVJT"),z=a("J+e+"),U=a("mSAA"),V=a("5C2G"),K=a("alX+"),Y=a("0s9A"),J=a("5WLy"),$=a("s42p"),G=a("IBOI"),H=a("GdSa"),Z=a("AuZw"),X=a("bamM"),Q=a("PKVh"),W=a("mc9f");a.d(t,"a",function(){return te});var ee=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},te=function(){function e(){}return e}();te=ee([a.i(r.NgModule)({declarations:[u.a,p.a,m.a,f.a],imports:[i.a,s.FormsModule,o.HttpModule,c.ChartModule,_.a,j.a,E.a,I.a,P.a,q.a,A.a,S.a,w.a,O.a,B.a,R.a,C.a,k.a,M.a,F.a,D.a,L.a,T.a,z.a,V.a,K.a,U.a,Y.a,J.a,$.a,G.a,H.a,Z.a,X.a,N.a,W.a,Q.a,x.a],providers:[i.b,g.a,h.a,v.a,y.JwtHelper,b.a,{provide:l.HighchartsStatic,useFactory:n},d.Uploader],bootstrap:[u.a]})],te)},Imlg:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("2Y+A"),d=a("Zit5"),u=a("Qew2"),p=a("OvTu"),m=a("52hV"),f=a("l+S8"),g=a("30gs"),h=a("nqnc"),v=a("nsII");a.n(v);a.d(t,"a",function(){return y});var b=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},y=function(){function e(){}return e}();y=b([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,f.a,h.a,v.NguiAutoCompleteModule],declarations:[p.a],providers:[m.a,g.a]})],y)},"J+e+":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("EhYa"),d=a("Zit5"),u=a("Qew2"),p=a("TpXv"),m=a("bh45"),f=a("52hV"),g=a("RHrs"),h=a("30gs"),v=a("nqnc"),b=a("nsII"),y=(a.n(b),a("KR/G"));a.n(y);a.d(t,"a",function(){return x});var _=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},x=function(){function e(){}return e}();x=_([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,g.a,v.a,b.NguiAutoCompleteModule,y.NguiDatetimePickerModule],declarations:[p.a,m.a],providers:[f.a,h.a]})],x)},JMwV:function(e,t){e.exports='<formulario #ctrl URL="sincronizar-recetas" titulo="Sincronizar receta" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Sincronizar recetas\'" [icono]="\'assets/hub-farmacia-sub.svg\'" [url]="\'/farmacia-subrrogada/sincronizar-recetas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    \r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Salidas por recetas\r\n                            </h1>\r\n                        </div>\r\n                        <div class="is-hidden-touch">\r\n                            <div style="height:30px;"></div>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                            <!-- <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/farmacia-subrrogada/sincronizar-recetas/nuevo">\r\n                                    <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p> -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!cargando" style="min-width:100%; font-size:1em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th style="text-align:center;"></th>\r\n                        <th colspan="2" style="text-align:center;">Aceptados</th>\r\n                        <th class="causes" colspan="2" style="text-align:center;">Ignorados</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Folio/Nombre del Pedido/Unidad Medica</th>\r\n                        <th style="text-align:center;">Fecha</th>\r\n                        \r\n                        <th class="aceptados" style="text-align:center;">Recetas</th>\r\n                        <th class="aceptados" style="text-align:center;">Colectivos</th>\r\n\r\n                        <th class="ignorados" style="text-align:center;">Recetas</th>\r\n                        <th class="ignorados" style="text-align:center;">Colectivos</th>\r\n\r\n                        <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <td style="vertical-align: middle;">\r\n                            <strong>CSSSA018740-2017-PA-003</strong>\r\n                            <br>H. B. C. DR. RAFAEL ALFARO GONZÁLEZ PIJIJIAPAN<br>\r\n                            solicitud de pedido\r\n                        </td>\r\n                        <td style="text-align:center; vertical-align: middle;">\r\n                            2017-05-26<br>\r\n                        </td>\r\n                        <td class="aceptados" style="text-align:center; vertical-align: middle;">3</td>\r\n                        <td class="aceptados" style="text-align:center; vertical-align: middle;" >10</td>\r\n                        <td class="ignorados" style="text-align:center; vertical-align: middle;" >2</td>\r\n                        <td class="ignorados" style="text-align:center; vertical-align: middle;" >0</td>\r\n                        <td style="text-align:center; vertical-align: middle;">\r\n                            <button type="button" class="button" (click)="abrirModal(\'sincronizarRecetasJson\')" >\r\n                                <span class="icon"><i class="fa fa-upload"></i></span>\r\n                                <i class="fa fa-file-code-o" aria-hidden="true"></i>\r\n                            </button>\r\n                            <button type="button" class="button" (click)="abrirModal(\'sincronizarRecetasImagenes\')" >\r\n                                <span class="icon"><i class="fa fa-upload"></i></span>\r\n                                <i class="fa fa-file-image-o" aria-hidden="true"></i>\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                    <!--\r\n                    <tr *ngFor="let item of lista; let i=index"> \r\n                        \r\n                        <td style="vertical-align: middle;">\r\n                            <strong>{{ item.folio }}</strong>\r\n                            <br>{{item.unidad_medica}}\r\n                            <br>{{item.descripcion}}\r\n                        </td>\r\n                        \r\n                        <td style="text-align:center; vertical-align: middle;" [ngClass]="{\'estatus-rojo\':(item.status != \'EF\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}">\r\n                            {{ item.fecha_concluido | date:\'y-MM-dd\' }}<br>\r\n                            <span *ngIf="item.status != \'EF\'">\r\n                                [{{ item.fecha_expiracion | date:\'y-MM-dd\' }}]<br>\r\n                            </span>\r\n                            <strong *ngIf="item.status == \'PS\' && item.expira_en_dias >= 0">\r\n                                Expira <span *ngIf="item.expira_en_dias == 0">Hoy</span><span *ngIf="item.expira_en_dias > 0">en {{item.expira_en_dias}} día(s)</span>\r\n                            </strong>\r\n                            <strong *ngIf="item.status == \'EX\' && item.expira_en_dias < 0">\r\n                                <span *ngIf="item.status != \'EX-CA\'">Expirado  hace {{item.expira_en_dias*(-1)}} día(s)</span>\r\n                            </strong>\r\n                        </td>\r\n                        \r\n                        <td style="text-align:center; vertical-align: middle; white-space: nowrap;">{{ item.total_claves_recibidas }} / {{ item.total_claves_solicitadas }} <br> <strong>({{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}} %)</strong></td>\r\n                        <td style="text-align:center; vertical-align: middle;">$ {{ item.total_monto_recibido | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} <br> <strong>({{((item.total_monto_recibido/item.total_monto_solicitado)*100) | number:\'1.0-2\'}} %)</strong></td>\r\n\r\n                        <td class="causes"  style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_causes">{{ item.total_claves_causes_recibidas }} / {{ item.total_claves_causes }} <br> <strong>({{((item.total_claves_causes_recibidas/item.total_claves_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_causes"> </span>\r\n                        </td>\r\n                        <td class="causes"  style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_causes*1)">${{ item.total_monto_causes_recibido  | number:\'1.2-2\'}} / ${{ item.total_monto_causes  | number:\'1.2-2\'}} <br> <strong>({{((item.total_monto_causes_recibido/item.total_monto_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_causes*1)">  </span>\r\n                        </td>\r\n\r\n                        <td style="text-align:center; vertical-align: middle; width: 130px">\r\n                            <button type="button" class="button"  (click)="mostrarDialogoPedidos(item.pedido_id)" >\r\n                                <span class="icon is-small"><i class="fa fa-archive"></i></span>\r\n                            </button>\r\n                            \r\n                            <button type="button" class="button" [ngClass]="{\'descargado\':item.repositorio>0 }" (click)="mostrarDialogoArchivos(item.pedido_id, item.folio)" >\r\n                                <span class="icon is-small"><i class="fa fa-upload"></i></span><span class="tag" [ngClass]="{\'color_tag_descargas\':item.repositorio>0 }"><b>{{ item.repositorio }}</b></span>\r\n                            </button>\r\n                        </td>\r\n                    </tr> \r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="12" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>-->\r\n                </tbody>\r\n            </table>\r\n\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="sincronizarRecetasJson">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card"  style="width:80%; height: 75%; overflow: hidden;">\r\n        <header class="modal-card-head" style="background: #00d1b2;">\r\n                <div class="container is-fluid"  style="width:100%;">\r\n                    <h1 class="title" style="color:#FFF;">\r\n                        <span class="icon is-medium"><i class="fa fa-file-code-o"></i></span> \r\n                        Sincronizar recetas JSON\r\n                    </h1>\r\n                </div>     \r\n            <button class="delete" (click)="cancelarModal(\'sincronizarRecetasJson\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()" #mainScreen>\r\n                    <!-- Recetas JSON -->\r\n                    <div class="column">\r\n                        <div style="background: #FFF; border-radius: 1em; ">\r\n                            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                                <br>\r\n                                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                            </div>\r\n                            <section class="section" [style.height.px]="tamano">\r\n\r\n                                <div class="is-half">\r\n                                    <div class="field has-addons">\r\n                                        <label class="label">Archivo JSON:</label>\r\n                                        <div style="height:20px;"></div>\r\n                                        <p class="control is-expanded  has-icon has-icon-right" style="float:left; width: 95.1%;" >\r\n                                            <input class="input" type="file" (change)="ctrl.convertirJson($event, ctrl.dato.controls.json)" accept=".json, .txt">\r\n                                            <input type="hidden" formControlName="json">\r\n                                        </p>\r\n                                        <p class="control" style="float:left">\r\n                                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando, \'is-disabled\':ctrl.dato.controls.json.value == \'\'}" [disabled]="ctrl.error_json">Enviar</button>\r\n                                        </p>\r\n                                    </div>\r\n                                    \r\n                                </div>\r\n                                <figure class="highlight" style="width: 100%; height: 300px; overflow: auto;">\r\n                                    <pre>\r\n                                        <span class="help is-danger" *ngIf="ctrl.error_json">El archivo no es valido o no tiene el formato adecuado.</span>\r\n                                        <code class="language-json" data-lang="json">{{ ctrl.dato.controls.json.value | json }}</code>\r\n                                    </pre>                        \r\n                                </figure>\r\n                                <div class="box">\r\n                                    <span>Recetas aceptadas:</span> <span class="tag is-success">2</span>\r\n                                    &nbsp;&nbsp;&nbsp;<span>Colectivos aceptados:</span> <span class="tag is-success">2</span>\r\n                                    &nbsp;&nbsp;&nbsp;<span>Recetas ignoradas:</span> <span class="tag is-danger">2</span>\r\n                                    &nbsp;&nbsp;&nbsp;<span>Colectivos ignorados:</span> <span class="tag is-danger">0</span>\r\n                                </div>\r\n                                \r\n                            </section>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" [ngClass]="{\'is-disabled\':1==1}" (click)="agregarLoteIsumo(cantidad_solicitada.value)">Sincronizar recetas</a>\r\n            <a class="button" (click)="cancelarModal(\'sincronizarRecetasJson\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="sincronizarRecetasImagenes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card"  style="width:80%; height: 75%; overflow: hidden;">\r\n         <header class="modal-card-head" style="background: #00d1b2;">\r\n                <div class="container is-fluid"  style="width:100%;">\r\n                    <h1 class="title" style="color:#FFF;">\r\n                        <span class="icon is-medium"><i class="fa fa-file-image-o" aria-hidden="true"></i></span> \r\n                        Sincronizar recetas (Fotos)\r\n                    </h1>\r\n                </div>     \r\n            <button class="delete" (click)="cancelarModal(\'sincronizarRecetasImagenes\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()" #mainScreen>\r\n                <!-- Recetas JSON -->\r\n                <div class="column">\r\n                    <div style="background: #FFF; border-radius: 1em; ">\r\n                        <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                            <br>\r\n                            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                        </div>\r\n                        <section class="section" [style.height.px]="tamano">\r\n\r\n                            <div class="is-half">\r\n                                <div class="field has-addons">\r\n                                    <label class="label">Imagen Receta:</label>\r\n                                    <div style="height:20px;"></div>\r\n                                    <p class="control is-expanded  has-icon has-icon-right" style="float:left; width: 95.1%;" >\r\n                                        <input class="input" type="file" multiple (change)="ctrl.seleccionarImagenBase64($event, ctrl.dato.controls.archivos, true)" accept=".jpeg, .jpg, .gif, .bmp, .png">\r\n                                        <input type="hidden" formControlName="archivos">\r\n                                    </p>\r\n                                    <p class="control" style="float:left">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.controls.archivos.value == \'\'">Enviar</button>\r\n                                    </p>\r\n                                </div>\r\n                                \r\n                            </div>\r\n                            <figure class="highlight" style="width: 100%; height: 300px; overflow: auto;">\r\n                                <div *ngFor="let item of ctrl.dato.controls.archivos.value; let i=index">\r\n                                    <img  [src]="\'data:image/png;base64,\' + item" \r\n                                    width="10%" style="float:left; border-style: dashed; border-radius: 5px;" (click)="abrirModal(\'verFoto\', item)">\r\n                                </div>                        \r\n                            </figure>\r\n                            \r\n                        </section>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="agregarLoteIsumo(cantidad_solicitada.value)">Continuar</a>\r\n            <a class="button" (click)="cancelarModal(\'sincronizarRecetasImagenes\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},JdJA:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),e.exports=e.exports.toString()},"Jg/L":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},JqWR:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("S9un"),o=a("fcAu"),c=a("bd8H"),l=a("+rFH"),d=a("Zit5"),u=a("+tGU"),p=a("OuAt"),m=a("rGA5");a.d(t,"a",function(){return g});var f=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},g=function(){function e(){}return e}();g=f([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,l.a,d.a,u.a],declarations:[c.a,p.a,m.a],providers:[s.a,o.a]})],g)},Julm:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},K2DH:function(e,t){e.exports='<menu-farmacia [modulo]="\'Pedidos\'" [icono]="\'assets/icono-pedidos.svg\'" [url]="\'/almacen/pedidos\'"></menu-farmacia>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile">\r\n      <div class="tile is-4 is-parent is-vertical ">\r\n        <div class="tile is-child">\r\n            <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n                <section class="hero is-primary" [ngClass]="{\'is-primary\':pedido.status==\'PS\',\'is-success\':pedido.status==\'FI\',\'is-info\':pedido.status==\'EF\',\'is-warning\':pedido.status==\'EX\', \'is-danger\': pedido.status==\'EX-CA\'}" >\r\n                    <h1 *ngIf="pedido.status == \'PS\'" class="title" style="margin:0.5em;" >\r\n                        <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Pedido Por Surtir <span class="is-pulled-right">{{porcentageTotalPedido | number:\'1.0-2\'}} %</span>\r\n                    </h1>\r\n                    <h1 *ngIf="pedido.status == \'FI\'" class="title" style="margin:0.5em;" >\r\n                        <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Pedido Finalizado <span class="is-pulled-right">{{porcentageTotalPedido | number:\'1.0-2\'}} %</span>\r\n                    </h1>\r\n                    <h1 *ngIf="pedido.status == \'EF\'" class="title" style="margin:0.5em;" >\r\n                        <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Pedido En Farmacia <span class="is-pulled-right">{{porcentageTotalPedido | number:\'1.0-2\'}} %</span>\r\n                    </h1>\r\n                    <h1 *ngIf="pedido.status == \'EX\'" class="title" style="margin:0.5em;" >\r\n                        <span class="icon is-medium"><i class="fa fa-exclamation-circle"></i></span> Pedido Expirado <span class="is-pulled-right">{{porcentageTotalPedido | number:\'1.0-2\'}} %</span>\r\n                    </h1>\r\n                    <h1 *ngIf="pedido.status == \'EX-CA\'" class="title" style="margin:0.5em;" >\r\n                        <span class="icon is-medium"><i class="fa fa-exclamation-circle"></i></span> Pedido Cancelado <span class="is-pulled-right">{{porcentageTotalPedido | number:\'1.0-2\'}} %</span>\r\n                    </h1>\r\n                </section>\r\n                <section>\r\n                    <div class="control is-grouped">\r\n                        <a class="button is-success is-fullwidth is-outlined" title="Imprimir Excel" (click)="imprimirExcel(); " *ngIf="esEditar">\r\n                            <span class="icon"><i class="fa fa-file-excel-o"></i></span> &nbsp; Excel\r\n                        </a>\r\n                        <a class="button is-info is-fullwidth is-outlined" title="Imprimir PDF" (click)="mostrarDialogo(); " *ngIf="esEditar">\r\n                            <span class="icon"><i class="fa fa-print"></i></span> &nbsp; Pedido\r\n                        </a>\r\n                    </div>\r\n                </section>\r\n\r\n                <div style="padding: 1em;">\r\n                    <!--label class="label">Folio:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.folio:\'S/F\'}}"/>\r\n                    </p>\r\n                    <label class="label">Almacén:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.almacen_solicitante.nombre:\'Sin almacen asignado\'}}"/>\r\n                    </p>\r\n                    <label class="label">Nombre del Pedido:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.descripcion:\'\'}}"/>\r\n                    </p>\r\n                    <label class="label">Fecha:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.fecha:\'\'}}"/>\r\n                    </p>\r\n                    <div class="control">\r\n                        <textarea name="observaciones" class="textarea" placeholder="Observaciones"  readonly="readonly">{{(pedido.datosImprimir)?pedido.datosImprimir.observaciones:\'\'}}</textarea>\r\n                    </div-->\r\n\r\n                    <label class="label">Datos del Pedido:</label>\r\n                    <div *ngIf="pedido.datosImprimir" class="level-item">\r\n                        <p class="subtitle is-5">\r\n                            <strong>Folio: </strong> {{pedido.datosImprimir.folio}}<br>\r\n                            <strong>Almacén: </strong> {{pedido.datosImprimir.almacen_solicitante.nombre}}<br>\r\n                            <strong>Nombre del pedido: </strong> {{pedido.datosImprimir.descripcion}}<br>\r\n                            <strong>Fecha: </strong> {{pedido.datosImprimir.fecha}}<br>\r\n                            <strong>Observaciones: </strong> {{pedido.datosImprimir.observaciones}}<br>\r\n                        </p>\r\n                    </div>\r\n                    <hr>\r\n                    <label class="label">Datos del Proveedor:</label>\r\n                    <div *ngIf="pedido.datosImprimir" class="level-item">\r\n                        <input *ngIf="pedido.datosImprimir.almacen_proveedor" type="text" class="input is-fullwidth" readonly="readonly" value="{{pedido.datosImprimir.almacen_proveedor.nombre}}"/>\r\n                        <div *ngIf="pedido.datosImprimir.proveedor" >\r\n                        <p class="subtitle is-5">\r\n                            {{pedido.datosImprimir.proveedor.nombre}}<br>\r\n                            <small>\r\n                            {{pedido.datosImprimir.proveedor.contacto}}<br>\r\n                            {{pedido.datosImprimir.proveedor.email}}<br>\r\n                            Cel: {{pedido.datosImprimir.proveedor.celular}}\r\n                            </small>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                    <hr>\r\n                    <div class="control is-grouped" style="padding-top:10px;" *ngIf="!cargando">\r\n                        <p class="control" *ngIf="pedido.status != \'FI\' && pedido.datosImprimir.tipo_pedido_id == \'PA\' && pedido.status != \'EX-CA\'">\r\n                            <a class="button is-primary" routerLink="/almacen/pedidos/recepcion/{{pedido.id}}"> <span class="icon"><i class="fa fa-truck"></i></span> <span *ngIf="!tieneRecepcionIniciada">Recibir Pedido</span><span *ngIf="tieneRecepcionIniciada">Continuar Recepción</span></a>\r\n                        </p>\r\n\r\n                        <p class="control">\r\n                            <a class="button is-white" routerLink="{{obtenerDireccion()}}" >Ir a la lista</a>\r\n                        </p>                \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <br>\r\n        </div>\r\n        \r\n        <div class="tile is-child  notification is-white">\r\n        </div>\r\n      </div>\r\n\r\n      <div class="tile is-parent is-vertical">\r\n        <div class="tile is-child" >\r\n          <div class="contenedor-pedido" >\r\n            <div class="top-bar" [ngClass]="{\'is-primary\':!pedido.filtro.activo,\'is-dark\': pedido.filtro.activo }">\r\n                <span *ngIf="!pedido.filtro.activo">\r\n                    Claves: {{((pedido.datosImprimir)?(pedido.datosImprimir.total_claves_recibidas||0):0) | number:\'1.0\'}} de {{ pedido.lista.length | number }} \r\n                    Insumos: {{((pedido.datosImprimir)?(pedido.datosImprimir.total_cantidad_recibida||0):0) | number:\'1.0\'}} de {{pedido.totalInsumos | number}} \r\n                    Total: $ {{((pedido.datosImprimir)?(pedido.datosImprimir.total_monto_recibido||0):0) | number:\'1.2-2\'}} de $ {{ pedido.totalMonto | number: \'1.2-2\' }}\r\n                </span>\r\n                <span *ngIf="pedido.filtro.activo"><span class="icon"><i class="fa fa-search"></i></span> Resultados: {{ pedido.filtro.lista.length }}</span>\r\n                <!--a class="button is-primary  is-pulled-right" [ngClass]="{ \'is-inverted\': pedido.filtro.activo }" style="margin-top:-0.25em;" title="Recepciones" (click)="toggleModalRecepciones(); ">\r\n                    <span class="icon"><i class="fa fa-file"></i></span><span>Recepciones: {{pedido.datosImprimir.recepciones.length}}</span>\r\n                </a-->\r\n                <a *ngIf="pedido.status == \'EX\' && pedido.datosImprimir.tipo_pedido_id == \'PA\'" class="button is-danger is-pulled-right" (click)="mostrarDialogoCancelarPedido()"> <span class="icon"><i class="fa fa-ban"></i></span> <span>Cancelar Pedido</span></a>\r\n            </div> \r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em;">\r\n                <thead>\r\n                    <tr  >\r\n                        <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                        <th class="is-hidden-mobile" style="width:118px;">\r\n                        <p class="control is-expanded" >\r\n                            <input type="hidden" #searchBoxClavePrevia >\r\n                            <!--input class="input is-small" type="text" placeholder="Clave" #searchBoxClave id="search-box-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxClave, searchBoxClavePrevia,[{ input: searchBoxDescripcion, campos: [\'generico\',\'informacion.concentracion\',\'informacion.presentacion\']}, { input: searchBoxClave, campos: [\'clave\']}])"-->\r\n                            <input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxClave, searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>\r\n                        <!--th class="is-hidden-mobile">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionPrevia >\r\n                            <input class="input is-small" type="text" placeholder="Genérico" #searchBoxDescripcion id="search-box-descripcion-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcion,searchBoxDescripcionPrevia,[{ input: searchBoxDescripcion, campos: [\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}, { input: searchBoxClave, campos: [\'clave\']}])">\r\n                        </p>\r\n                        </th--> \r\n                        <th class="is-hidden-tablet">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                            <!--input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])"-->\r\n                            <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>  \r\n                        <th style="vertical-align: middle;" class="is-hidden-mobile is-hidden-tablet-only" >Descripcion</th>                  \r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                    <tr   *ngFor="let item of pedido.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ item.lote }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    \r\n                    <td>\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n                        <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        </div>\r\n                    </td>\r\n\r\n                    <!--td >\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <b>{{ item.generico_nombre }}</b> <br  class="is-hidden-mobile"><small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                        \r\n                        <div class="is-hidden-desktop" *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                        </div>\r\n                        <div class="is-hidden-desktop" *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div class="is-hidden-desktop" style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                        </div>\r\n                    </td> \r\n\r\n                    <td class="is-hidden-mobile is-hidden-tablet-only">\r\n                        <div *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                        </div>\r\n                        <div  *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                        </div>\r\n                    </td--> \r\n\r\n                    <td style="width:78px !important;">\r\n                        <p class="control is-expanded">\r\n                            {{item.cantidad_recibida | number}} / {{item.cantidad | number}}\r\n                        </p>\r\n                    </td>\r\n                    <td style="width:78px !important;">\r\n                        <b><abbr> ${{item.monto_recibido | number:\'1.2-2\'}} / ${{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                    </td> \r\n                    </tr>      \r\n                </tbody>\r\n                <tbody *ngIf="pedido.filtro.activo">\r\n                    <tr  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ item.lote }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    \r\n                    <td>\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n                        <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        </div>\r\n                    </td>\r\n\r\n                    <!--td >\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <b>{{ item.generico_nombre }}</b> <br  class="is-hidden-mobile"><small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                        \r\n                        <div class="is-hidden-desktop" *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                        </div>\r\n                        <div class="is-hidden-desktop" *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div class="is-hidden-desktop" style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                        </div>\r\n                    </td> \r\n\r\n                    <td class="is-hidden-mobile is-hidden-tablet-only">\r\n                        <div *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                        </div>\r\n                        <div  *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        </div>\r\n                    </td--> \r\n                    <td style="width:78px !important;">\r\n                        <p class="control is-expanded">\r\n                            {{item.cantidad_recibida | number}} / {{item.cantidad | number}}\r\n                        </p>\r\n                    </td>\r\n                    <td style="width:78px !important;">\r\n                        <b><abbr> ${{item.monto_recibido | number:\'1.2-2\'}} / ${{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                    </td> \r\n                    </tr>\r\n                </tbody>              \r\n            </table>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.lista.length" \r\n                    [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.paginacion.indice"\r\n                    (onSiguiente)="pedido.paginaSiguiente()" \r\n                    (onAnterior)="pedido.paginaAnterior()" \r\n                    (onListar)="pedido.listar($event)" \r\n                    *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.filtro.lista.length" \r\n                    [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                    (onSiguiente)="pedido.filtro.paginaSiguiente()" \r\n                    (onAnterior)="pedido.filtro.paginaAnterior()" \r\n                    (onListar)="pedido.filtro.listar($event)" \r\n                    *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n            <br>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarCancelarDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogoCancelarPedido()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #ff3860;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-ban"></i></span> Cancelar Pedido \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-danger" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogoCancelarPedido()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n          El pedido actual sera <strong>cancelado</strong>, y el recurso no utilzado estara disponible. Una vez cancelado este pedido ya no podran hacerse mas recepciones de insumos:\r\n          <table class="table" *ngIf="pedido.datosImprimir">\r\n              <thead>\r\n                <tr><th>Folio</th><th colspan="2">Nombre del Pedido</th><th>Fecha</th></tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr><td>{{pedido.datosImprimir.folio}}</td><td colspan="2">{{pedido.datosImprimir.descripcion}}</td><td>{{pedido.datosImprimir.fecha}}</td></tr>\r\n              </tbody>\r\n              <thead>\r\n                <tr><th>Almacén</th><th colspan="3">Observaciones:</th></tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr><td>{{pedido.datosImprimir.almacen_solicitante.nombre}}</td><td colspan="3">{{pedido.datosImprimir.observaciones}}</td></tr>\r\n              </tbody>\r\n              <thead>\r\n                  <tr><th>Total Monto del Pedido</th><th>Monto Recibido</th><th>Monto Disponible</th><th>Transferir a</th></tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                    <td>$ {{pedido.datosImprimir.total_monto_solicitado | number:\'1.2-2\'}}</td>\r\n                    <td>$ {{(pedido.datosImprimir.total_monto_recibido||0) | number:\'1.2-2\'}}</td>\r\n                    <td>$ {{(pedido.datosImprimir.total_monto_solicitado - (pedido.datosImprimir.total_monto_recibido||0)) | number:\'1.2-2\'}}</td>\r\n                    <td>\r\n                        <span class="select is-fullwidth">\r\n                            <select [(ngModel)]="dialogCancelarFechaTransferencia">\r\n                                <option *ngFor="let item of dialogCancelarMeses" [ngValue]="item">{{ item.descripcion }}</option>\r\n                            </select>\r\n                        </span>\r\n                    </td>\r\n                </tr>\r\n              </tbody>\r\n          </table>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        <span *ngIf="errorCancelarPedido" class="notification is-small is-danger is-inverted">{{errorCancelarPedidoTexto}}</span>\r\n        <button class="button is-medium is-primary is-pulled-right" [ngClass]="{\'is-loading\': cancelandoPedido}"  (click)="transferirRecurso()">\r\n            <span class="icon"><i class="fa fa-exchange"></i></span> &nbsp;Transferir Recurso\r\n        </button>\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarImprimirDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogo()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-print"></i></span> Imprimir Pedido \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogo()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="columns is-multiline">\r\n          <div class="column is-one-quarter" *ngFor="let tipo of tiposSubPedidos">\r\n            <div class="card">\r\n              <header class="card-header">\r\n                <p class="card-header-title">\r\n                  {{subPedidos[tipo].titulo}}\r\n                </p>\r\n              </header>\r\n              <div class="card-content">\r\n                <div class="content">\r\n                  <strong>Total claves</strong>: {{subPedidos[tipo].claves | number}} <br>\r\n                  <strong>Total unidades</strong>: {{subPedidos[tipo].cantidad | number}} <br>\r\n                  <strong>Total monto</strong>: $ {{subPedidos[tipo].monto + ((subPedidos[tipo].tiene_iva)?+subPedidos[tipo].monto*16/100:0) | number:\'1.2-2\'}}\r\n                </div>\r\n              </div>\r\n              <footer class="card-footer">\r\n                <!--a class="card-footer-item" (click)="imprimir(tipo)" [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }">\r\n                  <span class="icon is-medium"><i class="fa fa-file-pdf-o"></i></span>&nbsp;<span>Descargar/Imprimir</span>\r\n                </a-->\r\n                <a class="button is-primary is-fullwidth" [ngClass]="{ \'is-loading\': cargandoPdf[tipo], \'is-inverted\': !cargandoPdf[tipo] }" title="Imprimir Pedido" (click)="imprimir(tipo)">\r\n                    <span class="icon"><i class="fa fa-file-pdf-o"></i></span> &nbsp; Descargar/Imprimir\r\n                </a>\r\n              </footer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        <div class="notification is-danger is-small" *ngIf="errorEnPDF">\r\n            <button class="delete" (click)="errorEnPDF = false"></button>        \r\n            <b>Error:</b> Ocurrio un error al generar el PDF<br><br>\r\n        </div>\r\n    </footer>\r\n  </div>\r\n</div>'},"K77/":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},KNJT:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),e.exports=e.exports.toString()},KS36:function(e,t){e.exports='<aside class="menu" style="padding: 1em;">\r\n    <div *ngFor="let item of menuAutorizado">\r\n        <p class="menu-label">{{ item.titulo }}</p>\r\n        <ul class="menu-list">\r\n            <li *ngFor="let modulo of item.modulos">\r\n                <a routerLink="{{ modulo.url }}" routerLinkActive="is-active">\r\n                    <span class="icon" ><i class="fa {{ modulo.icono }}"></i></span>&nbsp;&nbsp;<span>{{ modulo.titulo }}</span>\r\n                </a>\r\n            </li>    \r\n        </ul>\r\n    </div>\r\n        \r\n</aside>'},KSqy:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),e.exports=e.exports.toString()},KqV1:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("Nqas"),s=a("2o5k");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t){this.title=e,this.apiService=t,this.cargando=!1,this.mensajeError=new r.a,this.mensajeExito=new r.a,this.estadisticasGlobales=[],this.listaEstadisticasProveedores=[],this.cargandoEstadisticasGlobales=!1,this.mostrarGraficas=!0}return e.prototype.ngOnInit=function(){this.mensajeError=new r.a,this.mensajeExito=new r.a,this.title.setTitle("Cumplimiento / Administrador central"),this.generarStats()},e.prototype.generarStats=function(){var e=this;this.cargandoEstadisticasGlobales=!0,this.apiService.cumplimientoStatsGlobales().subscribe(function(t){e.cargandoEstadisticasGlobales=!1,e.estadisticasGlobales=t,e.listaEstadisticasProveedores=[];for(var a in e.estadisticasGlobales)e.listaEstadisticasProveedores.push({proveedor_id:e.estadisticasGlobales[a].proveedor_id,proveedor:e.estadisticasGlobales[a].proveedor,cargando:!0,tipoDatos:"monto",data:[]}),e.generarStatsProveedor(e.listaEstadisticasProveedores.length-1)},function(t){e.cargandoEstadisticasGlobales=!1,console.log(t)})},e.prototype.generarStatsProveedor=function(e){var t=this,a=this.listaEstadisticasProveedores[e].proveedor_id;this.listaEstadisticasProveedores[e].cargando=!0,this.apiService.cumplimientoStatsProveedor(a).subscribe(function(a){t.listaEstadisticasProveedores[e].cargando=!1,t.listaEstadisticasProveedores[e].data=a,t.renderGrafica(e)},function(a){console.log(a),t.listaEstadisticasProveedores[e].cargando=!1})},e.prototype.renderGrafica=function(e){var t=[],a=[],n=[],i=[];for(var r in this.listaEstadisticasProveedores[e].data)t.push(this.listaEstadisticasProveedores[e].data[r].mes_nombre+" "+this.listaEstadisticasProveedores[e].data[r].anio),"claves"==this.listaEstadisticasProveedores[e].tipoDatos&&(a.push(Number(this.listaEstadisticasProveedores[e].data[r].claves_solicitadas)||0),n.push(Number(this.listaEstadisticasProveedores[e].data[r].claves_recibidas)||0),i.push(Number(this.listaEstadisticasProveedores[e].data[r].claves_cumplimiento)||0)),"insumos"==this.listaEstadisticasProveedores[e].tipoDatos&&(a.push(Number(this.listaEstadisticasProveedores[e].data[r].cantidad_solicitada)||0),n.push(Number(this.listaEstadisticasProveedores[e].data[r].cantidad_recibida)||0),i.push(Number(this.listaEstadisticasProveedores[e].data[r].cantidad_cumplimiento)||0)),"monto"==this.listaEstadisticasProveedores[e].tipoDatos&&(a.push(Number(this.listaEstadisticasProveedores[e].data[r].monto_solicitado)||0),n.push(Number(this.listaEstadisticasProveedores[e].data[r].monto_recibido)||0),i.push(Number(this.listaEstadisticasProveedores[e].data[r].monto_cumplimiento)||0));var s={};"claves"==this.listaEstadisticasProveedores[e].tipoDatos&&(s=[{title:{text:"Total claves"}},{title:{text:"% Cumplimiento"},labels:{format:"{value} %",style:{color:"#7cb5ec"}},max:100,opposite:!0}]),"insumos"==this.listaEstadisticasProveedores[e].tipoDatos&&(s=[{title:{text:"Total insumos"}},{title:{text:"% Cumplimiento"},labels:{format:"{value} %",style:{color:"#7cb5ec"}},max:100,opposite:!0}]),"monto"==this.listaEstadisticasProveedores[e].tipoDatos&&(s=[{title:{text:"Total en monto"}},{title:{text:"% Cumplimiento",style:{color:"#7cb5ec"}},labels:{format:"{value} %",style:{color:"#7cb5ec"}},max:100,opposite:!0}]),this.listaEstadisticasProveedores[e].options={chart:{zoomType:"xy"},xAxis:{categories:t,crosshair:!0},yAxis:s,tooltip:{shared:!0},legend:{align:"center",x:0,verticalAlign:"bottom",backgroundColor:"rgba(255,255,255,0.5)",shadow:!1},title:{text:"Cumplimiento del proveedor: "+this.listaEstadisticasProveedores[e].proveedor},subtitle:{text:"Cantidades expresadas en "+this.listaEstadisticasProveedores[e].tipoDatos},series:[{type:"column",name:"Pedido",data:a},{type:"column",name:"Entregado",data:n},{type:"column",name:"%",yAxis:1,data:i},{type:"spline",name:"Cumplimiento",yAxis:1,data:i,tooltip:{valueSuffix:"%"}}]}},e.prototype.parseNaN=function(e){return isNaN(e)?0:e},e.prototype.onResize=function(e){var t=this;this.mostrarGraficas=!1;try{setTimeout(function(){t.mostrarGraficas=!0})}catch(e){console.log(e)}},e}();l=o([a.i(n.Component)({selector:"app-cumplimiento",template:a("kqiz"),styles:[a("hnmW")],host:{"(window:resize)":"onResize($event)"}}),c("design:paramtypes",["function"==typeof(d=void 0!==i.b&&i.b)&&d||Object,"function"==typeof(u=void 0!==s.a&&s.a)&&u||Object])],l);var d,u},Kw80:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return r});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=function(){function e(){}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e}();r=i([a.i(n.Component)({selector:"salidas-recetas-lista",template:a("a/bf")})],r)},"L8B/":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("Qih7"),d=a("Zit5"),u=a("Qew2"),p=a("HpL6"),m=a("NE8Q"),f=a("NlcP"),g=a("52hV"),h=a("7IuX"),v=a("30gs"),b=a("nqnc"),y=a("nsII"),_=(a.n(y),a("KR/G"));a.n(_);a.d(t,"a",function(){return j});var x=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},j=function(){function e(){}return e}();j=x([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,h.a,b.a,y.NguiAutoCompleteModule,_.NguiDatetimePickerModule],declarations:[p.a,m.a,f.a],providers:[g.a,v.a]})],j)},LAUq:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},LBt1:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},LEUf:function(e,t){e.exports='<menu-farmacia [modulo]="\'Entregas\'" [icono]="\'assets/icono-entregas.svg\'" [url]="\'/almacen/entregas\'"></menu-farmacia>\r\n\r\n\r\n\r\n<div class="is-fullwidth has-text-centered" style="padding-top:70px;" *ngIf="cargando">\r\n  <br>\r\n  <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n  <br>\r\n  <br>\r\n</div>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile is-parent is-12 ">\r\n      <div class="tile is-child notification is-dark">\r\n        \r\n        <div class="columns">\r\n          <div class="column" >\r\n            <div style="padding:1em;">Pedido no. <strong style="color:#FFF;">{{ id }}</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lotes: {{ lotesSurtidos.length  }} / {{ pedido.lista.length }}</div>\r\n          </div>\r\n          <div class="column is-4" style="text-align:center; ">\r\n            <div style="margin:1em;">\r\n            <a  class="button is-primary" style="width:45%; margin-right:5%;" (click)="surtir()"> <span class="icon"><i class="fa fa-check-circle"></i></span> <span>Surtir</span></a>\r\n            <a  class="button is-white"  style="width:45%"  routerLink="/almacen/entregas/"> Cancelar</a>\r\n            </div>\r\n          </div>\r\n        </div>       \r\n      </div>\r\n    </div>\r\n    <div class="tile">\r\n      <div class="tile is-parent ">\r\n        <div class="tile is-child notification is-white" >\r\n          <div class="contenedor-tabla" >\r\n                      \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em; ">\r\n              <thead>\r\n                  <tr  [ngClass]="{ \'filtro\': pedido.filtro.activo}">\r\n                    <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                    <th>\r\n                      <p class="control is-expanded">\r\n                        <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                        <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])">\r\n                      </p>\r\n                    </th>  \r\n                    \r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Surtido">Surt.</abbr></th>\r\n                    <th  style="width:21px !important; text-align: center; vertical-align: middle;">Surtido</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                <tr class="item" *ngFor="let item of pedido.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                    <div class="item-detalle">\r\n                      <div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }}</th>                                  \r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>      \r\n              </tbody>\r\n              <tbody *ngIf="pedido.filtro.activo">\r\n                <tr class="item"  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                    <div class="item-detalle">\r\n                      <div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">0</th>                                  \r\n                  <td style="width:21px !important; text-align:center; color: gray"><span class="icon"><i class="fa fa-minus-circle"></i></span></td>\r\n                </tr>   \r\n              </tbody>              \r\n            </table>\r\n            <paginacion style=" width:100%; height:auto; bottom:0; left:0px; background:#FFF;"\r\n                [total]="pedido.lista.length" \r\n                [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.paginacion.indice"\r\n                (onSiguiente)="pedido.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.paginaAnterior(); limpiarStock();" \r\n                (onListar)="pedido.listar($event);limpiarStock();" \r\n                *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n\r\n            <paginacion \r\n                [total]="pedido.filtro.lista.length" \r\n                [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                (onSiguiente)="pedido.filtro.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.filtro.paginaAnterior();  limpiarStock();" \r\n                (onListar)="pedido.filtro.listar($event); limpiarStock();" \r\n                *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n\r\n\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n      <div class="tile is-parent is-vertical ">\r\n        <div class="tile is-child notification" style="background:#CCC;">\r\n          <div class="contenedor-tabla">\r\n            \r\n            <table class="table" *ngIf="!cargando" style="font-size: 0.8em;" >\r\n              <thead>\r\n                <tr>\r\n                  <td colspan="5">\r\n                    <h1 class="subtitle"><span class="icon"><i class="fa fa-archive"></i></span> Existencias</h1>\r\n                  </td>\r\n\r\n                </tr>\r\n                <tr>\r\n                  <td colspan="5">\r\n                    <p class="control">\r\n                      <input class="input" type="text" placeholder="Código" #searchBoxStock (keyup)="buscarStock($event, searchBoxStock , searchBoxStock.value)" (focus)="searchBoxStock.select()" >\r\n                    </p>\r\n                  </td>\r\n\r\n                </tr>\r\n              \r\n                <tr>\r\n                  <th>Código</th>\r\n                  <th>Marca</th>\r\n                  <th>Lote</th>\r\n                  <th>Caducidad</th>\r\n                  <th><abbr title="Cantidad">Cant.</abbr></th>                \r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                  <tr  class="is-unselectable item" *ngFor="let item of listaStock" (click)="asignarStock(item)" [ngClass]="{ \'asignado\': item.asignado }">\r\n                                      \r\n                    <td>{{ item.codigo_barras }}</td>\r\n                    <td>{{ item.marca.nombre }}</td>\r\n                    <td>{{ item.lote }}</td>\r\n                    <td>{{ item.fecha_caducidad | date:\'dd/MM/y\' }}</td>\r\n                    <td style="width:78px !important;">{{ item.existencia }}</td>   \r\n                  </tr>  \r\n                  <tr *ngIf="claveNoSolicitada">\r\n                    <td colspan="5">La clave de este producto no fue solicitada en el pedido.</td>\r\n                  </tr> \r\n                  <tr *ngIf="listaStock == 0 && itemSeleccionado == null && !cargando && !claveNoSolicitada">\r\n                    <td colspan="5">Sin resultados.</td>\r\n                  </tr> \r\n                  <tr *ngIf="listaStock == 0 && itemSeleccionado != null && !cargando && !claveNoSolicitada">\r\n                    <td colspan="5">No hay stock.</td>\r\n                  </tr>                    \r\n              </tbody>  \r\n            </table>\r\n\r\n            <div class="is-fullwidth has-text-centered" style="padding-top:0px;" *ngIf="cargandoStock">\r\n              <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n              <br>\r\n              <br>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="tile is-child  notification is-white">\r\n          <div class="contenedor-tabla">\r\n            <table class="table" *ngIf="!cargando && itemSeleccionado != null" style="font-size: 0.8em;" >\r\n              <thead>\r\n                  <tr style="background: #00d1b2;">\r\n                    <th style="color:#FFF !important;">Código</th>\r\n                    <th style="color:#FFF !important;">Marca</th>\r\n                    <th style="color:#FFF !important;">Lote</th>\r\n                    <th style="color:#FFF !important;">Caducidad</th>\r\n                    <th style="color:#FFF !important;"><abbr title="Cantidad">Cant.</abbr></th>  \r\n                    <th></th>              \r\n                  </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th colspan="4" style="text-align:right">\r\n                    <span *ngIf="itemSeleccionado.totalStockAsignado == itemSeleccionado.cantidad"><span class="icon is-small" ><i class="fa fa-check-circle"></i></span> <span>Completo &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> Total </span>\r\n                  </th>\r\n                  <td style="text-align:center">{{ itemSeleccionado.totalStockAsignado || 0 }} / {{ itemSeleccionado.cantidad }}</td>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                  <tr  class="is-unselectable" *ngFor="let item of itemSeleccionado.listaStockAsignado">\r\n                                      \r\n                    <td>{{ item.codigo_barras}}</td>\r\n                    <td>{{ item.marca.nombre }}</td>\r\n                    <td>{{ item.lote }}</td>\r\n                    <td>{{ item.fecha_caducidad | date:\'dd/MM/y\' }}</td>\r\n                    <td style="width:78px !important;">\r\n                        <p class="control is-expanded">\r\n                        <input class="input is-small has-text-centered"  type="number" min="1" max="{{item.existencia}}" placeholder="Cant" [(ngModel)]="item.cantidad" (change)="validarItemStock(item, true)" (keyup)="validarItemStock(item)">\r\n                        </p>\r\n                    </td> \r\n                    <td style="vertical-align: middle;" class="has-text-centered"><a  class="is-danger" (click)="eliminarStock(i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>                    \r\n                  </tr>\r\n                  \r\n                      \r\n              </tbody>  \r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n  </div>\r\n</div>\r\n  \r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n'},LSt6:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},LT4s:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},LeRw:function(e,t){e.exports='<formulario #ctrl URL="sincronizar-recetas" titulo="Sincronizar receta" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Sincronizar recetas\'" [icono]="\'assets/hub-farmacia-sub.svg\'" [url]="\'/farmacia-subrrogada/sincronizar-recetas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()" #mainScreen>\r\n    <!-- apartado de insumos -->\r\n    <div class="column" style="padding:1em;" >\r\n        <div style="background: #FFF; border-radius: 1em; ">\r\n            <section class="hero is-primary" >\r\n                <div class="hero-body" >\r\n                    \r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Recetas JSON\r\n                        </h1>\r\n\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section" [style.height.px]="tamano">\r\n\r\n                <div class="is-half">\r\n                    <div class="field has-addons">\r\n                        <label class="label">Archivo JSON:</label>\r\n                        <p class="control is-expanded  has-icon has-icon-right" style="float:left; width: 95.1%;" >\r\n                            <input class="input" type="file" (change)="ctrl.convertirJson($event, ctrl.dato.controls.json)" accept=".json, .txt">\r\n                            <input type="hidden" formControlName="json">\r\n                        </p>\r\n                        <p class="control" style="float:left">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.error_json">Enviar</button>\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div>                            \r\n                    <figure class="highlight" style="width: 100%;">\r\n                        \r\n                        <pre [style.height.px]="tamano/1.8">\r\n                            <span class="help is-danger" *ngIf="ctrl.error_json">El archivo no es valido o no tiene el formato adecuado.</span>\r\n                            <code class="language-json" data-lang="json">{{ ctrl.dato.controls.json.value | json }}</code>\r\n                        </pre>                        \r\n                    </figure>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="column" style="padding:1em;">\r\n        <div style="background: #FFF; border-radius: 1em; ">\r\n            <section class="hero is-primary" >\r\n                <div class="hero-body" >\r\n                    \r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Recetas Imagen\r\n                        </h1>\r\n\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section" >\r\n\r\n                <div class="is-half">\r\n                    <div class="field has-addons">\r\n                        <label class="label">Imagen Receta:</label>\r\n                        <p class="control is-expanded  has-icon has-icon-right" style="float:left; width: 95.1%;" >\r\n                            <input class="input" type="file" multiple (change)="ctrl.seleccionarImagenBase64($event, ctrl.dato.controls.archivos, true)" accept=".jpeg, .jpg, .gif, .bmp, .png">\r\n                            <input type="hidden" formControlName="archivos">\r\n                        </p>\r\n                        <p class="control" style="float:left">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.controls.archivos.value == \'\'">Enviar</button>\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </div>\r\n                <figure class="highlight" style="width: 100%;">\r\n                    <div *ngFor="let item of ctrl.dato.controls.archivos.value; let i=index">\r\n                        <img  [src]="\'data:image/png;base64,\' + item" \r\n                        width="10%" style="float:left; border-style: dashed; border-radius: 5px;" (click)="abrirModal(\'verFoto\', item)">\r\n                    </div>\r\n                </figure>\r\n                \r\n            </section>\r\n        </div>\r\n    </div>\r\n    \r\n</form>\r\n\r\n<div class="modal" id="verFoto">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-content">\r\n        <p class="image is-4by3">\r\n            <img [src]="\'data:image/jpg;base64,\' + foto" alt="Receta" />\r\n        </p>\r\n    </div>\r\n    <button type="button" class="modal-close" (click)="cancelarModal(\'verFoto\')"></button>\r\n</div>'},Lrjz:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},MCwA:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.usuario={}}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e}();i([a.i(n.Input)(),r("design:type",String)],s.prototype,"modulo",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"icono",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"url",void 0),s=i([a.i(n.Component)({selector:"menu-equipamiento",template:a("iqbP"),styles:[a("tmAL")]}),r("design:paramtypes",[])],s)},MOVZ:function(e,t){function a(e){throw new Error("Cannot find module '"+e+"'.")}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id="MOVZ"},"MT3+":function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("ldOH"),s=a("YwNg"),o=a("qbyw");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=[{path:"almacen-articulos/catalogos/unidades-medicas",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"editar/:id",component:s.a}],canActivate:[o.a]}],d=function(){function e(){}return e}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},MqZK:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("kZql"),s=a("Nqas"),o=a("lDdF"),c=(a.n(o),a("lgzy")),l=a("Npjp");a.d(t,"a",function(){return p});var d=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,a,n){this.title=e,this.apiService=t,this._ngZone=a,this.cambiarEntornoService=n,this.cargando=!1,this.cargandoPresupuestos=!1,this.mensajeError=new s.a,this.mensajeExito=new s.a,this.q="",this.status=[],this.meses=[],this.jurisdicciones=[],this.statusSeleccionados=[],this.jurisdiccionesSeleccionadas=[],this.mes=null,this.anio=null,this.sin_pedidos=!1,this.ordenarCauses="",this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.presupuesto={},this.datosPedido={},this.verDialogoPedido=!1,this.verDialogoArchivo=!1,this.tiposSubPedidos=[],this.subPedidos={},this.cargandoDatosPedido=!1,this.cargandoDatosArchivo=!0,this.lista=[],this.lista_repositorio=[],this.paginaActual=1,this.resultadosPorPagina=30,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.cargandoPdf={},this.errorEnPDF=!1,this.cargando_archivo=0,this.subir_archivo=!0}return e.prototype.ngOnInit=function(){var e=this;this.mensajeError=new s.a,this.mensajeExito=new s.a,this.title.setTitle("Pedidos / Administrador Proveedores"),this.pdfworker=new Worker("web-workers/farmacia/pedidos/pedido-proveedor.js");var t=this,a=this._ngZone;this.pdfworker.onmessage=function(e){a.run(function(){t.cargandoPdf[e.data.tipoPedido]=!1}),o.saveAs(t.base64ToBlob(e.data.base64,"application/pdf"),e.data.fileName)},this.pdfworker.onerror=function(e){a.run(function(){t.errorEnPDF=!0}),console.log(e)};var n=new Date;this.anio=n.getFullYear(),this.mes=n.getMonth()+1,this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){e.listar(1),e.cargarJurisdicciones()}),this.listar(1),this.cargarJurisdicciones(),this.status=[{id:"PS",descripcion:"Por surtir"},{id:"FI",descripcion:"Surtido"},{id:"EF",descripcion:"En Farmacia"},{id:"EX",descripcion:"Expirados"},{id:"EX-CA",descripcion:"Cancelados"}],this.meses=[{id:0,nombre:"Todos"},{id:1,nombre:"Enero"},{id:2,nombre:"Febrero"},{id:3,nombre:"Marzo"},{id:4,nombre:"Abril"},{id:5,nombre:"Mayo"},{id:6,nombre:"Junio"},{id:7,nombre:"Julio"},{id:8,nombre:"Agosto"},{id:9,nombre:"Septiembre"},{id:10,nombre:"Octubre"},{id:11,nombre:"Noviembre"},{id:12,nombre:"Diciembre"}]},e.prototype.cargarJurisdicciones=function(){var e=this;this.apiService.jurisdicciones().subscribe(function(t){e.jurisdicciones=t},function(e){})},e.prototype.cambioSeleccionJurisdiccion=function(e){e==-1&&(this.jurisdiccionesSeleccionadas=[]),this.agregarJurisdiccion(e)},e.prototype.cambioSeleccionStatus=function(e){e==-1&&(this.statusSeleccionados=[]),this.agregarStatus(e)},e.prototype.agregarJurisdiccion=function(e){if(e!=-1){for(var t in this.jurisdiccionesSeleccionadas)if(this.jurisdiccionesSeleccionadas[t].id==e)return;for(var t in this.jurisdicciones)if(this.jurisdicciones[t].id==e){this.jurisdiccionesSeleccionadas.push(this.jurisdicciones[t]);break}}},e.prototype.agregarStatus=function(e){if(e!=-1){for(var t in this.statusSeleccionados)if(this.statusSeleccionados[t].id==e)return;for(var t in this.status)if(this.status[t].id==e){this.statusSeleccionados.push(this.status[t]);break}}},e.prototype.quitarJurisdiccion=function(e){this.jurisdiccionesSeleccionadas.splice(e,1)},e.prototype.quitarStatus=function(e){this.statusSeleccionados.splice(e,1)},e.prototype.filtrarQuery=function(e){13==e.keyCode&&this.listar(1)},e.prototype.toggleCauses=function(){switch(this.ordenarCauses){case"":this.ordenarCauses="ASC";break;case"ASC":this.ordenarCauses="DESC";break;case"DESC":this.ordenarCauses="";break;default:this.ordenarCauses=""}this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.listar(1)},e.prototype.toggleNoCauses=function(){switch(this.ordenarNoCauses){case"":this.ordenarNoCauses="ASC";break;case"ASC":this.ordenarNoCauses="DESC";break;case"DESC":this.ordenarNoCauses="";break;default:this.ordenarNoCauses=""}this.ordenarCauses="",this.ordenarMaterialCuracion="",this.listar(1)},e.prototype.toggleMaterialCuracion=function(){switch(this.ordenarMaterialCuracion){case"":this.ordenarMaterialCuracion="ASC";break;case"ASC":this.ordenarMaterialCuracion="DESC";break;case"DESC":this.ordenarMaterialCuracion="";break;default:this.ordenarMaterialCuracion=""}this.ordenarCauses="",this.ordenarNoCauses="",this.listar(1)},e.prototype.listar=function(e){var t=this;this.cargando=!0,this.paginaActual=e;var a=[];for(var n in this.jurisdiccionesSeleccionadas)a.push(this.jurisdiccionesSeleccionadas[n].id);var i=[];for(var n in this.statusSeleccionados)i.push(this.statusSeleccionados[n].id);var r={q:this.q,mes:this.mes,anio:this.anio,jurisdicciones:a,status:i,page:this.paginaActual,per_page:this.resultadosPorPagina,ordenar_causes:this.ordenarCauses,ordenar_no_causes:this.ordenarNoCauses,ordenar_material_curacion:this.ordenarMaterialCuracion};this.cargandoPresupuestos=!0,this.apiService.presupuesto(r).subscribe(function(e){t.cargandoPresupuestos=!1,t.presupuesto=e.data,t.presupuesto.total_comprometido=+e.data.causes_comprometido+ +e.data.no_causes_comprometido+ +e.data.material_curacion_comprometido,t.presupuesto.total_devengado=+e.data.causes_devengado+ +e.data.no_causes_devengado+ +e.data.material_curacion_devengado,t.presupuesto.total_causes=+t.presupuesto.causes_comprometido+ +t.presupuesto.causes_devengado,t.presupuesto.total_no_causes=+t.presupuesto.no_causes_comprometido+ +t.presupuesto.no_causes_devengado,t.presupuesto.total_material_curacion=+t.presupuesto.material_curacion_comprometido+ +t.presupuesto.material_curacion_devengado,t.presupuesto.total_pedido=+t.presupuesto.total_comprometido+ +t.presupuesto.total_devengado},function(e){t.cargandoPresupuestos=!1,console.log(e)}),this.apiService.pedidos(r).subscribe(function(e){t.cargando=!1,t.lista=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Items cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{var a=e.json();401==e.status?t.mensajeError.texto="No tiene permiso para hacer esta operación.":t.mensajeError.texto=a.error}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.fileChanged=function(e){var t=e.target;this.tag=t},e.prototype.upload=function(){if(this.tag){this.subir_archivo=!1;var e=this.tag.files[0],t=new FormData;t.append("file",e,e.name),t.append("id_pedido",this.id_pedido);var a=new XMLHttpRequest;a.upload.addEventListener("progress",function(e){});var n=this;a.open("POST",r.a.API_URL+"/repository",!0),a.setRequestHeader("Authorization","Bearer "+localStorage.getItem("token"));var i=JSON.parse(localStorage.getItem("usuario"));i.proveedor_activo&&a.setRequestHeader("X-Proveedor-Id",i.proveedor_activo.id),a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&200===a.status&&n.actualiza_lista(),a.readyState===XMLHttpRequest.DONE&&200!=a.status&&(n.error_envio(),n.subir_archivo=!0),n.cargando_archivo=a.readyState},a.send(t)}else alert("ES NECESARIO ELEGIR UN ARCHIVO A SUBIR, VUELVA A INTENTARLO POR FAVOR")},e.prototype.actualiza_lista=function(){this.subir_archivo=!0,this.cargando_archivo=0,this.mostrarDialogoArchivos(this.id_pedido,this.nombre_pedido),this.mensajeExito.mostrar=!0,this.mensajeExito.iniciarCuentaAtras(),this.mensajeExito.texto="Se ha Guardado Exitosamente el documento";for(var e in this.lista)if(this.lista[e].pedido_id==this.id_pedido){this.lista[e].repositorio+=1;break}},e.prototype.error_envio=function(){this.mensajeError.mostrar=!0,this.mensajeError.texto="Ha ocurrido un error al enviar el archivo"},e.prototype.exportar=function(){var e="token="+localStorage.getItem("token")+"&ordenar_causes="+this.ordenarCauses+"&ordenar_no_causes="+this.ordenarNoCauses+"&ordenar_material_curacion="+this.ordenarMaterialCuracion,t=JSON.parse(localStorage.getItem("usuario"));t.proveedor_activo&&(e+="&proveedor="+t.proveedor_activo.id),""!=this.q&&(e+="&q="+this.q);var a="";for(var n in this.jurisdiccionesSeleccionadas)""!=a&&(a+=","),a+=""+this.jurisdiccionesSeleccionadas[n].id;""!=a&&(e+="&jurisdicciones="+a);var i="";for(var n in this.statusSeleccionados)""!=i&&(i+=","),i+=""+this.statusSeleccionados[n].id;""!=i&&(e+="&status="+i),null!=this.mes&&(e+="&mes="+this.mes),null!=this.anio&&(e+="&anio="+this.anio),window.open(r.a.API_URL+"/pedidos-administrador-proveedores-excel?"+e)},e.prototype.mostrarDialogoPedidos=function(e){var t=this;this.cargandoDatosPedido=!0,this.datosPedido={folio:e},this.tiposSubPedidos=[],this.subPedidos={},this.apiService.verPedido(e).subscribe(function(e){t.datosPedido=e;for(var a in e.insumos){var n=e.insumos[a],i=n.insumos_con_descripcion;i.cantidad=+n.cantidad_solicitada,i.monto=+n.monto_solicitado,i.precio=+n.precio_unitario;var r=!1,s="SC";s=n.tipo_insumo.clave,"MC"==n.tipo_insumo.clave&&(r=!0),t.subPedidos[s]||(t.tiposSubPedidos.push(s),t.cargandoPdf[s]=!1,t.subPedidos[s]={titulo:n.tipo_insumo.nombre,clave_folio:s,claves:0,cantidad:0,monto:0,iva:0,tiene_iva:r,lista:[]}),i.lote=t.subPedidos[s].lista.length+1,t.subPedidos[s].claves++,t.subPedidos[s].cantidad+=i.cantidad,t.subPedidos[s].monto+=i.monto,t.subPedidos[s].lista.push(i)}e.insumos=void 0,t.cargandoDatosPedido=!1},function(e){t.cargandoDatosPedido=!1,t.mensajeError=new s.a(!0),t.mensajeError.mostrar;try{var a=e.json();401==e.status?t.mensajeError.texto="No tiene permiso para hacer esta operación.":t.mensajeError.texto=a.error}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}),this.verDialogoPedido=!0},e.prototype.mostrarDialogoArchivos=function(e,t){var a=this;this.cargando_archivo=0,this.cargandoDatosArchivo=!0,this.datosPedido={folio:e},this.nombre_pedido=t,this.id_pedido=e,this.apiService.verArchivos(e).subscribe(function(e){a.lista_repositorio=e,a.cargandoDatosArchivo=!1},function(e){a.cargandoDatosArchivo=!1,a.mensajeError=new s.a(!0),a.mensajeError.mostrar;try{var t=e.json();401==e.status?a.mensajeError.texto="No tiene permiso para hacer esta operación.":a.mensajeError.texto=t.error}catch(t){500==e.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}),this.verDialogoArchivo=!0},e.prototype.eliminar_archivo=function(e){var t=this;confirm("¿Desea eliminar el archivo realmente?")&&this.apiService.eliminarArchivos(e).subscribe(function(e){t.mostrarDialogoArchivos(t.id_pedido,t.nombre_pedido),t.mensajeExito.mostrar=!0,t.mensajeExito.iniciarCuentaAtras(),t.mensajeExito.texto="Se ha Elimiinado Exitosamente el archivo";for(var a in t.lista)if(t.lista[a].pedido_id==t.id_pedido){t.lista[a].repositorio-=1;break}},function(e){t.mensajeError=new s.a(!0),t.mensajeError.mostrar;try{var a=e.json();401==e.status?t.mensajeError.texto="No tiene permiso para hacer esta operación.":t.mensajeError.texto=a.error}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.descargar=function(e){var t=e,a="token="+localStorage.getItem("token"),n=this,i=window.open(r.a.API_URL+"/download-file/"+t+"?"+a),s=0,o=setInterval(function(){s+=1,i.closed?(clearInterval(o),n.mostrarDialogoArchivos(n.id_pedido,n.nombre_pedido),n.mensajeError.mostrar=!1,n.mensajeExito.mostrar=!0,n.mensajeExito.iniciarCuentaAtras(),n.mensajeExito.texto="Se ha descargado correctamente el archivo"):5==s&&(clearInterval(o),i.close(),n.mensajeError.mostrar=!0,n.mensajeError.iniciarCuentaAtras(),n.mensajeError.texto="Ocurrio un error al intentar descargar el archivo.")},1e3)},e.prototype.imprimirExcelPedido=function(){var e="token="+localStorage.getItem("token");window.open(r.a.API_URL+"/generar-excel-pedido/"+this.datosPedido.id+"?"+e)},e.prototype.imprimirPedido=function(e){void 0===e&&(e="");try{this.cargandoPdf[e]=!0;var t={datos:this.datosPedido,insumos:this.subPedidos[e]};this.pdfworker.postMessage(JSON.stringify(t))}catch(t){this.cargandoPdf[e]=!1,console.log(t)}},e.prototype.cerrarDialogoPedidos=function(){this.verDialogoPedido=!1},e.prototype.cerrarDialogoArchivos=function(){this.verDialogoArchivo=!1},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.base64ToBlob=function(e,t){for(var a=atob(e),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:t})},e.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},e}();p=d([a.i(n.Component)({selector:"app-pedidos",template:a("dfbv"),styles:[a("/Y+D")]}),u("design:paramtypes",["function"==typeof(m=void 0!==i.b&&i.b)&&m||Object,"function"==typeof(f=void 0!==l.a&&l.a)&&f||Object,"function"==typeof(g=void 0!==n.NgZone&&n.NgZone)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object])],p);var m,f,g,h},MwdP:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),e.exports=e.exports.toString()},"N/oC":function(e,t){e.exports='<div class="modal" [ngClass]="{\'is-active\': mostrar}" >\r\n  <div class="modal-background" (click)="toggle()"></div>\r\n  <div class="modal-content">\r\n    <!-- Any other Bulma elements you want -->\r\n    <div class="card" style="width: 100%; border-radius: 1em; background: #222;">\r\n        <div class="card-content">\r\n            <div class="columns is-multiline is-mobile">\r\n\r\n                <div class="column is-one-quarter" *ngFor="let item of hubAutorizado" >\r\n                    <a href="#" title="{{ item.title }}" class="hub-item" routerLink="{{ item.routerLink }}" routerLinkActive="active">\r\n                        <figure class="image " style="height: auto; width: 100%; ">\r\n                           <img src="{{ item.icono }}" alt="{{ item.title }}">                            \r\n                        </figure>\r\n\r\n                        <span class="is-hidden-mobile">{{item.title}}</span>\r\n\r\n                    </a>\r\n                </div>\r\n                <!--div class="column is-one-quarter">\r\n                    <a href="#" title="Farmacia" class="hub-item" routerLink="/farmacia" routerLinkActive="active">\r\n                        <figure class="image" style="height: 100%; width: 100%;">\r\n                           <img src="assets/hub-farmacia.svg" alt="Almacén">\r\n                        </figure>\r\n                        <span class="is-hidden-mobile">Almacén</span>\r\n                    </a>\r\n                </div-->\r\n                <!--div class="column is-one-quarter">\r\n                    <a href="#" title="Almacén" class="hub-item" routerLink="/almacen" routerLinkActive="active">\r\n                        <figure class="image" style="height: 100%; width: 100%;">\r\n                           <img src="assets/hub-almacen.svg" alt="Almacén">\r\n                        </figure>\r\n                        <span class="is-hidden-mobile">Almacén</span>\r\n                    </a>\r\n                </div-->\r\n                \r\n                <!--div class="column is-one-quarter">\r\n                    <a href="#" title="Panel de control" class="hub-item" routerLink="/panel-control" routerLinkActive="active">\r\n                        <figure class="image" style="height: 100%; width: 100%;">\r\n                           <img src="assets/hub-panel-control.svg" alt="Panel de control">\r\n                        </figure>\r\n                        <span class="is-hidden-mobile">Panel de control</span>\r\n                    </a>\r\n                </div-->\r\n\r\n            </div>\r\n            \r\n        </div>\r\n    </div>\r\n  </div>\r\n  <button class="modal-close" (click)="toggle()"></button>\r\n</div>'},NAeX:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.stats=function(){return this.jwtRequest.get(l.URL_STATS,null,null).map(function(e){return e.json()})},e.prototype.presupuesto=function(e,t){void 0===e&&(e=0),void 0===t&&(t="");var a={};return e&&(a.mes=e),t&&(a.almacen=t),this.jwtRequest.get(l.URL_PRESUPUESTO,null,a).map(function(e){return e.json()})},e.prototype.buscar=function(e,t,a,n){return void 0===a&&(a=1),void 0===n&&(n=20),this.jwtRequest.get(l.URL,null,{status:e,q:t,page:a,per_page:n}).map(function(e){return e.json().data})},e.prototype.lista=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{status:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.ver=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){return e.json().data})},e.prototype.crear=function(e){return this.jwtRequest.post(l.URL,e).map(function(e){return e.json().data})},e.prototype.editar=function(e,t){return this.jwtRequest.put(l.URL,e,t).map(function(e){return e.json().data})},e.prototype.eliminar=function(e){return this.jwtRequest.delete(l.URL,e).map(function(e){return e.json().data})},e.prototype.cancelarPedidoTransferir=function(e,t){return void 0===t&&(t={}),this.jwtRequest.put(l.URL_CANCELAR,e,t).map(function(e){return e.json().data})},e}();c.URL="pedidos",c.URL_STATS="pedidos-stats",c.URL_PRESUPUESTO="pedidos-presupuesto",c.URL_CANCELAR="cancelar-pedido-transferir",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},NBQd:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.title=e,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return e.prototype.ngOnInit=function(){this.title.setTitle("Farmacia Subrrogada"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[],this.accesosDirectos=[{permiso:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk",icono:"assets/icono-sincronizar-receta.svg",titulo:"Sincronizar recetas",url:"/farmacia-subrrogada/sincronizar-recetas"},{permiso:"RZsvMjtPtpLWC8afsAFZsNnD9iXtiZC3",icono:"assets/icono-sincronizar-receta.svg",titulo:"Sincronizar recetas",url:"/farmacia-subrrogada/sincronizar-recetas"}];var e=JSON.parse(localStorage.getItem("usuario")),t=e.permisos.split("|");if(t.length>0){for(var a in this.modulos)e:for(var n in t)if(t[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break e}for(var a in this.accesosDirectos)e:for(var n in t)if(t[n]==this.accesosDirectos[a].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[a]);break e}}},e}();o=r([a.i(n.Component)({selector:"app-index-farmacia",template:a("mHS4"),styles:[a("JdJA")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},NE8Q:function(e,t,a){"use strict";var n=a("3j3K"),i=a("NVOs"),r=a("Qbdm"),s=a("5oXY"),o=a("kZql"),c=a("30gs"),l=a("3MNG");a.d(t,"a",function(){return p});var d=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,a,n,i){var r=this;this.fb=e,this.crudService=t,this.route=a,this._sanitizer=n,this.notificacion=i,this.tab=1,this.cargando=!1,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.MinDate=new Date,this.MaxDate=new Date,this.tieneid=!1,this.tipos_recetas=[{id:1,nombre:"Normal"},{id:2,nombre:"Controlado"}],this.autocompleListFormatter=function(e){var t='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4">'+e.nombre+" <small>"+e.descripcion+'</small></p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+e.clave+") \n              ";return e.es_causes&&(t+='<label class="tag is-success" ><strong>Cause </strong></label>'),e.es_causes||(t+='<label class="tag is-success" ><strong>No Cause </strong> </label>'),e.es_unidosis&&(t+='<label class="tag is-warning" ><strong>Unidosis</strong> </label>'),t+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",r._sanitizer.bypassSecurityTrustHtml(t)},this.es_unidosis=!1,this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0},this.mostrar_lote=[],this.mostrarCancelado=!1}return e.prototype.ngOnInit=function(){var e=this,t=JSON.parse(localStorage.getItem("usuario"));t.clues_activa&&(this.insumos_term+="&clues="+t.clues_activa.clues),t.almacen_activo&&(this.insumos_term+="&almacen="+t.almacen_activo.id),this.dato=this.fb.group({id:[""],tipo_movimiento_id:["5",[i.Validators.required]],status:["FI"],fecha_movimiento:["",[i.Validators.required]],observaciones:["",[i.Validators.required]],cancelado:[""],observaciones_cancelacion:[""],movimiento_metadato:this.fb.group({turno_id:["",[i.Validators.required]]}),receta:this.fb.group({folio:["",[i.Validators.required]],tipo_receta:["1",[i.Validators.required]],fecha_receta:["",[i.Validators.required]],doctor:["",[i.Validators.required]],paciente:["",[i.Validators.required]],diagnostico:["",[i.Validators.required]],imagen_receta:["",[i.Validators.required]]}),insumos:this.fb.array([])}),this.route.params.subscribe(function(t){t.id&&(e.tieneid=!0)}),this.form_insumos={tipo_movimiento_id:["",[i.Validators.required]]};var a=new Date;this.MinDate=new Date(a.getFullYear()-1,0,1),this.MaxDate=new Date(a.getFullYear(),a.getMonth(),a.getDate()),this.dato.get("fecha_movimiento").value?this.fecha_actual=this.dato.get("fecha_movimiento").value:(this.fecha_actual=a.getFullYear()+"-"+("00"+(a.getMonth()+1)).slice(-2)+"-"+a.getDate(),this.dato.get("fecha_movimiento").patchValue(this.fecha_actual)),document.getElementById("catalogos").click()},e.prototype.abrirModal=function(e){document.getElementById(e).classList.add("is-active")},e.prototype.cancelarModal=function(e){document.getElementById(e).classList.remove("is-active")},e.prototype.select_insumo_autocomplete=function(e){var t=this,a=JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.crudService.lista(0,1e3,"comprobar-stock?almacen="+a.almacen_activo.id+"&clave="+e.clave).subscribe(function(a){t.lotes_insumo=a,t.insumo=e,document.getElementById("buscarInsumo").value="",document.getElementById("tituloModal").innerHTML=" "+e.nombre+' <br><p aling="justify" style="font-size:12px">'+e.descripcion+"</p> ",t.es_unidosis=e.es_unidosis,t.cargando=!1,t.abrirModal("verLotes")},function(e){t.cargando=!1})},e.prototype.agregarLoteIsumo=function(){for(var e=this.dato.controls.insumos,t=!1,a=0,n=e.value;a<n.length;a++){var r=n[a];if(r.clave==this.insumo.clave){t=!0;break}}var s={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,cantidad:1,cantidad_x_envase:parseInt(this.insumo.cantidad_x_envase),dosis:["",[i.Validators.required]],frecuencia:["",[i.Validators.required]],duracion:["",[i.Validators.required]],cantidad_recetada:["",[i.Validators.required]],cantidad_surtida:1,lotes:this.fb.array([])};t||e.push(this.fb.group(s));var o=e.length-1,c=e.controls[o];this.mostrar_lote[o]=!1;var l={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0};for(var d=0,u=this.lotes_insumo;d<u.length;d++){var r=u[d];if(r.cantidad>0){var p=!1;if(t)for(var m=0,f=c.controls.lotes.controls;m<f.length;m++){var g=f[m];if(g.controls.id.value==r.id){p=!0;var h=g.controls.cantidad.value+r.cantidad;h>g.controls.existencia.value&&0==r.nuevo&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+g.controls.existencia.value,l),h=1*g.controls.existencia.value),g.controls.cantidad.patchValue(h);break}}p||(r.cantidad>r.existencia&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+r.existencia,l),r.cantidad=1*r.existencia),c.controls.lotes.push(this.fb.group({id:r.id,nuevo:0|r.nuevo,codigo_barras:r.codigo_barras,lote:r.lote,fecha_caducidad:r.fecha_caducidad,existencia:r.nuevo?r.cantidad:r.existencia,cantidad:r.cantidad})))}}for(var v=0,b=0,y=c.controls.lotes.value;b<y.length;b++){var g=y[b];v+=g.cantidad}c.controls.cantidad_surtida.patchValue(v),this.cancelarModal("verLotes")},e.prototype.ver_lotes_asignados=function(e){this.mostrar_lote[e]=!this.mostrar_lote[e]},e.prototype.agregarNuevoLote=function(){this.lotes_insumo.push({id:""+Math.floor(999*Math.random())+1,codigo_barras:"",lote:"",fecha_caducidad:"",existencia:"",cantidad:"",nuevo:1,existencia_unidosis:"",cantidad_unidosis:""})},e.prototype.eliminarLote=function(e){this.lotes_insumo.splice(e,1)},e.prototype.quitar_lote_insumo=function(e,t,a){var n=this.dato.controls.insumos,i=n.controls[e];i.controls.lotes.removeAt(a);var r=i.controls.cantidad_surtida.value-t.cantidad;i.controls.cantidad_surtida.patchValue(r)},e.prototype.validar_cantidad_lote=function(e,t,a){if(t.controls.cantidad.value>t.controls.existencia.value&&0==t.nuevo){var n={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+t.controls.existencia.value,n),t.controls.cantidad.patchValue(1*t.controls.existencia.value)}for(var i=this.dato.controls.insumos,r=i.controls[e],s=0,o=0,c=r.controls.lotes.value;o<c.length;o++){s+=c[o].cantidad}r.controls.cantidad_surtida.patchValue(s)},e}();p=d([a.i(n.Component)({selector:"sincronizar-recetas-formulario",template:a("r49I"),styles:["ngui-auto-complete {z-index: 999999 !important}"]}),u("design:paramtypes",["function"==typeof(m=void 0!==i.FormBuilder&&i.FormBuilder)&&m||Object,"function"==typeof(f=void 0!==c.a&&c.a)&&f||Object,"function"==typeof(g=void 0!==s.c&&s.c)&&g||Object,"function"==typeof(h=void 0!==r.d&&r.d)&&h||Object,"function"==typeof(v=void 0!==l.a&&l.a)&&v||Object])],p);var m,f,g,h,v},NJ09:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.router=e}return e.prototype.canActivate=function(e,t){var a=JSON.parse(localStorage.getItem("usuario"));if(!a.permisos)return this.router.navigate(["/"]),!1;var n=a.permisos.split("|");for(var i in n)if(e.data.key&&e.data.key==n[i])return!0;return this.router.navigate(["/"]),!1},e}();o=r([a.i(n.Injectable)(),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},NOMR:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("Zit5"),d=a("0cAy"),u=a("RHrs"),p=a("P3o5"),m=a("FiFG"),f=a("TEOz"),g=a("1smD"),h=a("TKQK"),v=a("7MfY"),b=a("ve71"),y=a("uJfw"),_=a("pk48"),x=a("RbyK"),j=a("B9VC"),E=a("qrhs");a.d(t,"a",function(){return P});var I=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},P=function(){function e(){}return e}();P=I([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,s.a,o.a,c.a,l.a,d.a,p.a,u.a],declarations:[m.a,f.a,g.a,_.a,x.a,j.a,E.a],providers:[h.a,v.a,b.a,y.a]})],P)},NQph:function(e,t){e.exports='<aside class="menu" style="padding: 1em;">\r\n    <p class="menu-label">\r\n        Admisión\r\n    </p>\r\n    \r\n    <a routerLink="/pacientes/modulo/verificacion" routerLinkActive="is-active" class="button is-primary is-inverted is-medium is-fullwidth" ><span class="icon"  ><i class="fa fa-plus"></i></span> <span>Nuevo Ingreso</span></a>\r\n    <br>\r\n\r\n    <ul class="menu-list">  \r\n        <li>\r\n            <a routerLinkActive="is-active" routerLink="/paciente/">\r\n                <span class="icon" ><i class="fa fa-user"></i></span> Pacientes\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                \r\n            </a>\r\n        </li>        \r\n        <li>\r\n            <a routerLinkActive="is-active" routerLink="/pacientes/modulo/verificacion">\r\n                <span class="icon" ><i class="fa fa-hospital-o"></i></span> Ingresos\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n               \r\n            </a>\r\n        </li>        \r\n        <li>\r\n            <a  routerLinkActive="is-active" routerLink="/pacientes/modulo/egreso">\r\n                <span class="icon"  ><i class="fa fa-arrow-right"></i></span> Egresos \r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n            </a>\r\n        </li>\r\n    </ul>        \r\n</aside>'},NhMh:function(e,t){e.exports='<menu-laboratorio></menu-laboratorio>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},NkF7:function(e,t){e.exports=""},NlcP:function(e,t,a){"use strict";var n=a("3j3K"),i=a("NVOs"),r=a("Qbdm"),s=a("5oXY"),o=a("30gs"),c=a("3MNG");a.d(t,"a",function(){return u});var l=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,a,n,i){this.fb=e,this.crudService=t,this.route=a,this._sanitizer=n,this.notificacion=i,this.cargando=!1,this.tamano=0,this.tieneid=!1,this.foto=""}return e.prototype.ngOnInit=function(){JSON.parse(localStorage.getItem("usuario"));this.tamano=this.elementView.nativeElement.offsetHeight/2,this.dato=this.fb.group({json:[""],archivos:[""]})},e.prototype.abrirModal=function(e,t){this.foto=t,document.getElementById(e).classList.add("is-active")},e.prototype.cancelarModal=function(e){document.getElementById(e).classList.remove("is-active")},e}();l([a.i(n.ViewChild)("mainScreen"),d("design:type","function"==typeof(p=void 0!==n.ElementRef&&n.ElementRef)&&p||Object)],u.prototype,"elementView",void 0),u=l([a.i(n.Component)({selector:"sincronizar-recetas-cargar",template:a("LeRw"),styles:["ngui-auto-complete {z-index: 999999 !important}"]}),d("design:paramtypes",["function"==typeof(m=void 0!==i.FormBuilder&&i.FormBuilder)&&m||Object,"function"==typeof(f=void 0!==o.a&&o.a)&&f||Object,"function"==typeof(g=void 0!==s.c&&s.c)&&g||Object,"function"==typeof(h=void 0!==r.d&&r.d)&&h||Object,"function"==typeof(v=void 0!==c.a&&c.a)&&v||Object])],u);var p,m,f,g,h,v},Npjp:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.jurisdicciones=function(){return this.jwtRequest.get("jurisdicciones").map(function(e){return e.json().data})},e.prototype.abasto=function(e){return void 0===e&&(e={}),this.jwtRequest.get("abasto",null,e).map(function(e){return e.json().data})},e.prototype.pedidos=function(e){return void 0===e&&(e={}),this.jwtRequest.get("pedidos-administrador-proveedores",null,e).map(function(e){return e.json().data})},e.prototype.verPedido=function(e){return this.jwtRequest.get("pedidos-administrador-proveedores-pedido",e,{}).map(function(e){return e.json().data})},e.prototype.verArchivos=function(e){return this.jwtRequest.get("repository",e,{}).map(function(e){return e.json().data})},e.prototype.eliminarArchivos=function(e){return this.jwtRequest.delete("repository",e,{}).map(function(e){return e.json().data})},e.prototype.descargarArchivos=function(e){return this.jwtRequest.get("repository-download",e,{}).map(function(e){return 0})},e.prototype.presupuesto=function(e){return this.jwtRequest.get("presupuesto-pedidos-administrador-proveedores",null,e).map(function(e){return e.json()})},e}();c=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(l=void 0!==i.Http&&i.Http)&&l||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],c);var l,d},Nqas:function(e,t,a){"use strict";var n=a("Gvdl");a.n(n);a.d(t,"a",function(){return i});var i=function(){function e(e,t){void 0===e&&(e=!1),void 0===t&&(t=6),this.titulo="",this.texto="",this.mostrar=!1,this.cuentaAtras=6,this.clase="",this.iniciarCuentaAtras=function(){var e=this,t=n.Observable.timer(7e3);n.Observable.timer(0,1e3).takeUntil(t).subscribe(function(t){e.cuentaAtras-=1,e.cuentaAtras<0&&(e.cuentaAtras=6,e.mostrar=!1)})},e&&this.iniciarCuentaAtras(),this.cuentaAtras=t}return e}()},NsC6:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=!1},ODik:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.mostrarMenuAside=!1,this.usuario={}}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e.prototype.toggleMenuAside=function(){this.mostrarMenuAside=!this.mostrarMenuAside},e}();s=i([a.i(n.Component)({selector:"panel-control-menu",template:a("jjES"),styles:[a("GMDI")]}),r("design:paramtypes",[])],s)},OKLB:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();s=i([a.i(n.Component)({selector:"app-pedidos",template:a("NkF7"),styles:[a("LAUq")]}),r("design:paramtypes",[])],s)},OMGn:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},OeE7:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("1tXu"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"configuracion/claves",redirectTo:"configuracion/claves",pathMatch:"full"},{path:"configuracion/claves",children:[{path:"",component:r.a}],canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},OuAt:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("5oXY"),s=a("S9un"),o=a("fcAu"),c=a("Nqas");a.d(t,"a",function(){return u});var l=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,a,n,i){this.title=e,this.router=t,this.route=a,this.apiService=n,this.permisosService=i,this.enviando=!1,this.cargando=!1,this.cargandoPermisos=!1,this.mensajeError=new c.a,this.mensajeExito=new c.a,this.errores={nombre:null,permisos:null},this.permisos=[],this.todosSeleccionados=!1,this.rol={nombre:"",permisos:[]}}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Nuevo rol / Panel de control"),this.mensajeError=new c.a,this.mensajeExito=new c.a,this.cargandoPermisos=!0,this.permisosService.lista().subscribe(function(t){e.permisos=t,e.cargandoPermisos=!1},function(t){console.log(t),e.cargandoPermisos=!1})},e.prototype.seleccionarTodos=function(){this.todosSeleccionados=!this.todosSeleccionados;for(var e in this.permisos)this.permisos[e].seleccionado=this.todosSeleccionados},e.prototype.guardar=function(){var e=this;this.enviando=!0,this.errores={nombre:null,permisos:null},this.rol.permisos=[];for(var t in this.permisos)this.permisos[t].seleccionado&&this.rol.permisos.push(this.permisos[t].id);this.apiService.crear(this.rol).subscribe(function(t){e.enviando=!1,e.router.navigate(["/panel-control/roles"])},function(t){try{var a=t.json();switch(e.mensajeError=new c.a(!0),t.status){case 401:e.mensajeError.texto="No tiee permiso para realizar esta acción.";break;case 409:e.mensajeError.texto="Verifique la información marcada de color rojo";for(var n in a.error)for(var i in a.error[n])e.errores[n]=a.error[n][i];break;case 500:e.mensajeError.texto="500 (Error interno del servidor)";break;default:e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}catch(t){e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}e.mensajeError.mostrar=!0,e.enviando=!1})},e}();u=l([a.i(n.Component)({selector:"app-nuevo",template:a("0g/f"),styles:[a("TQow")]}),d("design:paramtypes",["function"==typeof(p=void 0!==i.b&&i.b)&&p||Object,"function"==typeof(m=void 0!==r.a&&r.a)&&m||Object,"function"==typeof(f=void 0!==r.c&&r.c)&&f||Object,"function"==typeof(g=void 0!==s.a&&s.a)&&g||Object,"function"==typeof(h=void 0!==o.a&&o.a)&&h||Object])],u);var p,m,f,g,h},OvTu:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("NVOs"),s=a("5oXY");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,a,n){this.fb=e,this.router=t,this.route=a,this._sanitizer=n,this.tieneid=!1,this.tab=2}return e.prototype.ngOnInit=function(){var e=this,t=JSON.parse(localStorage.getItem("usuario"));this.dato=this.fb.group({clues:[t.clues_activa.clues,[r.Validators.required]],jurisdiccion_id:[t.clues_activa.jurisdiccion_id],nombre:[t.clues_activa.nombre],activa:[t.clues_activa.activa],director_id:[t.clues_activa.director_id],clues_turnos:this.fb.array([])}),this.route.params.subscribe(function(t){t.clues&&(e.tieneid=!0)}),document.getElementById("catalogos").click()},e.prototype.ngAfterViewInit=function(){var e=this;document.getElementById("actualizar").click(),setTimeout(function(){document.getElementById("initMover").click();var t=e.dato.controls.clues_turnos,a=0,n="",i="";if(0!=t.value.length){for(n=t.value[a].updated_at?t.value[a].updated_at:t.value[a].created_at,i=t.value[a].usuario_id,a=0;a<t.length;)t.value[a].updated_at>n&&(n=t.value[a].updated_at,i=t.value[a].usuario_id),a+=1;e.actualizacion=n,e.actualizacion_usuario=i,e.actualizado=!0}else e.actualizacion="Sin actualización",e.actualizacion_usuario="Sin actualización"},4e3)},e}();l=o([a.i(n.Component)({selector:"almacenes-formulario",template:a("6f0v")}),c("design:paramtypes",["function"==typeof(d=void 0!==r.FormBuilder&&r.FormBuilder)&&d||Object,"function"==typeof(u=void 0!==s.a&&s.a)&&u||Object,"function"==typeof(p=void 0!==s.c&&s.c)&&p||Object,"function"==typeof(m=void 0!==i.d&&i.d)&&m||Object])],l);var d,u,p,m},Oxla:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("5oXY"),s=a("2Je8"),o=a("NVOs"),c=a("1APj"),l=(a.n(c),a("h0qH")),d=(a.n(l),a("aV5h")),u=(a.n(d),a("q3ik")),p=(a.n(u),a("+pb+")),m=(a.n(p),a("uCY4")),f=(a.n(m),a("6Yye")),g=(a.n(f),a("Nqas")),h=a("7xfG");a.d(t,"a",function(){return y});var v=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(){function e(e,t,a,n,i,r){this.title=e,this.pacienteService=t,this.router=a,this.route=n,this.fb=i,this.location=r,this.cargando=!1,this.busquedaActivada=!1,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.pacientes=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[]}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Historial Paciente / Admisión"),this.mensajeError=new g.a,this.mensajeExito=new g.a;this.route.params.subscribe(function(t){e.id=t.id}),this.listar(1)},e.prototype.listar=function(e){var t=this;this.paginaActual=e,this.cargando=!0,this.pacienteService.historial(this.id,null).subscribe(function(e){t.cargando=!1,t.pacientes=e.ingreso,console.log(e.id),t.id_paciente=e.id,t.nombre_paciente=e.nombre,t.localidad_paciente=e.localidad.nombre+" ( "+e.localidad.municipio.nombre+" )"},function(e){t.cargando=!1,t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.regresar=function(){this.location.back()},e}();y=v([a.i(n.Component)({selector:"app-historial",template:a("kqq3"),styles:[a("jBlE")]}),b("design:paramtypes",["function"==typeof(_=void 0!==i.b&&i.b)&&_||Object,"function"==typeof(x=void 0!==h.a&&h.a)&&x||Object,"function"==typeof(j=void 0!==r.a&&r.a)&&j||Object,"function"==typeof(E=void 0!==r.c&&r.c)&&E||Object,"function"==typeof(I=void 0!==o.FormBuilder&&o.FormBuilder)&&I||Object,"function"==typeof(P=void 0!==s.Location&&s.Location)&&P||Object])],y);var _,x,j,E,I,P},P2oc:function(e,t){e.exports='<aside class="menu" style="padding: 1em;">\r\n    <!--  <p class="menu-label">\r\n        Pedidos\r\n    </p>-->\r\n    <a routerLink="/almacen/pedidos/nuevo" routerLinkActive="is-active" class="button is-primary is-inverted is-medium is-fullwidth"><span class="icon"  ><i class="fa fa-plus"></i></span> <span>Nuevo Pedido</span></a>\r\n    <br>\r\n    <ul class="menu-list">\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/todos" #todos routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-file"></i></span> Pedidos\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.todos>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': todos.className == \'is-active\', \'is-primary\': todos.className != \'is-active\' }">{{  stats.todos }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/borradores" #borradores routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-pencil-square-o"></i></span> Borradores\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.borradores>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': borradores.className == \'is-active\', \'is-primary\': borradores.className != \'is-active\' }">{{  stats.borradores }}</span>\r\n            </a>\r\n        </li>\r\n        <!--li>\r\n            <a routerLink="/almacen/pedidos/pendientes" #pendientes routerLinkActive="is-active">\r\n                <span class="icon"  ><i class="fa fa-minus-circle"></i></span> Pendientes\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.pendientes>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': pendientes.className == \'is-active\', \'is-warning\': pendientes.className != \'is-active\' }" >{{  stats.pendientes }}</span>\r\n            </a>             \r\n        </li-->\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/en-transito" #enTransito routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-clock-o"></i></span> En transito\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.en_transito>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': enTransito.className == \'is-active\', \'is-primary\': enTransito.className != \'is-active\' }">{{  stats.en_transito }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/por-surtir" #porSurtir routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-truck"></i></span> Por surtir\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.por_surtir>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': porSurtir.className == \'is-active\', \'is-primary\': porSurtir.className != \'is-active\' }">{{  stats.por_surtir }}</span>\r\n            </a>\r\n        </li>\r\n        <hr>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/finalizados" #finalizados routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-check-circle"></i></span> Finalizados\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.finalizados>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': finalizados.className == \'is-active\', \'is-success\': finalizados.className != \'is-active\' }">{{  stats.finalizados }}</span>\r\n            </a>\r\n            <!--ul>\r\n                <li><a routerLink="/almacen/pedidos/finalizados/completos" routerLinkActive="is-active">Completos</a></li>\r\n                <li><a routerLink="/almacen/pedidos/finalizados/incompletos" routerLinkActive="is-active">Incompletos</a></li>\r\n                <li><a routerLink="/almacen/pedidos/finalizados/cancelados" routerLinkActive="is-active">Cancelados</a></li>\r\n            </ul-->\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/expirados" #expirados routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-exclamation-circle"></i></span> Expirados\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.expirados>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': expirados.className == \'is-active\', \'is-warning\': expirados.className != \'is-active\' }">{{  stats.expirados }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/expirados-cancelados" #expiradosCancelados routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-times-circle"></i></span> Expirados - Cancelados\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.expirados_cancelados>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': expiradosCancelados.className == \'is-active\', \'is-danger\': expiradosCancelados.className != \'is-active\' }">{{  stats.expirados_cancelados }}</span>\r\n            </a>\r\n        </li>\r\n        <hr>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/farmacia-subrogada" #farmacia routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-building"></i></span> Farmacia Subrogada\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.farmacia>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': farmacia.className == \'is-active\', \'is-info\': farmacia.className != \'is-active\' }">{{  stats.farmacia }}</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n\r\n</aside>'},P3o5:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("1smD"),s=a("RbyK"),o=a("pk48"),c=a("B9VC"),l=a("qbyw"),d=a("NJ09");a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=[{path:"almacen/pedidos-jurisdiccionales",redirectTo:"/almacen/pedidos-jurisdiccionales/todos",pathMatch:"full"},{path:"almacen/pedidos-jurisdiccionales",children:[{path:"todos",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"borradores",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"en-transito",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"por-surtir",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"finalizados",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"finalizados/completos",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"finalizados/incompletos",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"finalizados/cancelados",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"expirados",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"nuevo",component:s.a,canActivate:[d.a],data:{key:"2nC6GUf6E737QwZSxuLORT6rZUDy5YUO"}},{path:"editar/:id",component:s.a,canActivate:[d.a],data:{key:"hytR4HSKgea9JJ1HEfjpfjijQ8UAtyQn"}},{path:"ver/:id",component:o.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"recepcion/:id",component:c.a,canActivate:[d.a],data:{key:"ipeaGitpjrNFRrB0SjP571C0Xw5tQULZ"}}],canActivate:[l.a]}],m=function(){function e(){}return e}();m=u([a.i(n.NgModule)({imports:[i.b.forChild(p)],exports:[i.b],providers:[]})],m)},P8Eb:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},PKVh:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Zit5"),o=a("52hV"),c=a("8DnP"),l=a("gqAS"),d=a("Wopk"),u=a("5qmi"),p=a("+U6h"),m=a("hrBO"),f=a("cbmf"),g=a("036B"),h=a("kKgL");a.d(t,"a",function(){return b});var v=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},b=function(){function e(){}return e}();b=v([a.i(n.NgModule)({imports:[i.CommonModule,d.a,c.a,l.a,s.a,r.ReactiveFormsModule],declarations:[u.a,f.a,g.a,h.a],providers:[o.a,p.a,m.a]})],b)},PbUY:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},PjWh:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333;position:relative}.contenedor-lista.con-tabs .top-bar{padding:.5em;border-radius:1em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-primary h1{color:#fff}.top-bar.is-danger{background:#ff3860;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-lista{background:#fff;border-radius:1em;overflow:hidden;margin:20px}tr.is-dark td,tr.is-dark th{background:#333;color:#fff}",""]),e.exports=e.exports.toString()},Q3Nn:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.stats=function(){return this.jwtRequest.get(l.URL_STATS,null,null).map(function(e){return e.json()})},e.prototype.buscar=function(e,t,a,n){return void 0===a&&(a=1),void 0===n&&(n=20),this.jwtRequest.get(l.URL,null,{status:e,q:t,page:a,per_page:n}).map(function(e){return e.json().data})},e.prototype.lista=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{status:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.ver=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){return e.json().data})},e.prototype.surtir=function(e){return this.jwtRequest.post(l.URL,e).map(function(e){return e.json().data})},e}();c.URL="entregas",c.URL_STATS="entregas-stats",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},Q4yS:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},QGuK:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return r});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=function(){function e(){}return e}();r=i([a.i(n.Component)({selector:"almacenes-lista",template:a("6u2E")})],r)},QUQJ:function(e,t){e.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Almacen" class="nav-item pull-left nav-hub-active"  routerLink="/almacen">\r\n            \r\n            <img src="assets/hub-farmacia.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left is-hidden-touch">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item">\r\n                <h1 class="title">&nbsp;Almacén</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <div class="nav-center">\r\n            <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n            </span>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},Qew2:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("lfxQ"),s=a("dE8T"),o=a("0CNa");a.d(t,"a",function(){return l});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=function(){function e(){}return e}();l=c([a.i(n.NgModule)({imports:[i.CommonModule],exports:[r.a,s.a,o.a],declarations:[r.a,s.a,o.a]})],l)},Qih7:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("HpL6"),s=a("NE8Q"),o=a("NlcP"),c=a("qbyw");a.d(t,"a",function(){return u});var l=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},d=[{path:"farmacia-subrrogada/sincronizar-recetas",children:[{path:"",component:r.a},{path:"nuevo",component:o.a},{path:"editar/:id",component:s.a}],canActivate:[c.a]}],u=function(){function e(){}return e}();u=l([a.i(n.NgModule)({imports:[i.b.forChild(d)],exports:[i.b],providers:[]})],u)},"R/vV":function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("ooTp"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"laboratorio",component:r.a,canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},R7g0:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},RHrs:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("v3jK"),o=a("Uvud"),c=a("fjeY"),l=a("+ZDf"),d=a("Qew2"),u=a("5f4D"),p=a("5xAd");a.d(t,"a",function(){return f});var m=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},f=function(){function e(){}return e}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},RVJT:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("Zit5"),d=a("0cAy"),u=a("RHrs"),p=a("cH28"),m=a("2hjq"),f=a("CR3P"),g=a("SASi"),h=a("2qAC"),v=a("IOyb");a.d(t,"a",function(){return y});var b=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},y=function(){function e(){}return e}();y=b([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a,u.a,p.a],declarations:[f.a,m.a,g.a,h.a,v.a]})],y)},RbyK:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("2Je8"),s=a("5oXY"),o=a("NVOs"),c=a("1APj"),l=(a.n(c),a("h0qH")),d=(a.n(l),a("aV5h")),u=(a.n(d),a("q3ik")),p=(a.n(u),a("+pb+")),m=(a.n(p),a("uCY4")),f=(a.n(m),a("6Yye")),g=(a.n(f),a("lDdF")),h=(a.n(g),a("kZql")),v=a("Nqas"),b=a("7MfY"),y=a("TKQK"),_=a("Fobf");a.d(t,"a",function(){return E});var x=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},j=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(){function e(e,t,a,n,i,r,s,o){this.title=e,this.location=t,this.router=a,this.route=n,this._ngZone=i,this.pedidosService=r,this.almacenesService=s,this.fb=o,this.cargando=!1,this.guardando=!1,this.cargandoAlmacenes=!1,this.cargandoInsumos=!1,this.cargandoPresupuestos=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.meses={0:"Sin seleccionar",1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"},this.formularioTitulo="Nuevo",this.esEditar=!1,this.mostrarModalInsumos=!1,this.listaClaveAgregadas=[],this.mostrarModalListaClues=!1,this.loteSeleccionado=null,this.presupuesto={causes_disponible:0,no_causes_disponible:0,material_curacion_disponible:0},this.mes=0,this.subrogados={},this.es_almacen_subrogado=!1,this.fechasValidas=[],this.proveedor={},this.cargandoPdf=!1}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Formulario pedido"),this.pdfworker=new Worker("web-workers/farmacia/pedidos/imprimir.js");var t=this,a=this._ngZone;this.pdfworker.onmessage=function(e){a.run(function(){t.cargandoPdf=!1}),g.saveAs(t.base64ToBlob(e.data.base64,"application/pdf"),e.data.fileName)},this.pdfworker.onerror=function(e){a.run(function(){t.cargandoPdf=!1}),console.log(e)},this.pedido=new _.a(!0);var n=new Date,i=n.getDate(),r=n.getMonth()+1;if(i<20){var s=("0"+i).slice(-2),o=("0"+r).slice(-2);this.fechasValidas.push({fecha:n.getFullYear()+"-"+o+"-"+s,descripcion:this.meses[r]+" "+n.getFullYear()})}var c=("0"+(r+1)).slice(-2),l=n.getFullYear();if(r+1==13){n.getFullYear();r=0}this.fechasValidas.push({fecha:l+"-"+c+"-01",descripcion:this.meses[r+1]+" "+n.getFullYear()}),this.route.params.subscribe(function(t){t.id?(e.cargando=!0,e.pedido.id=t.id,e.esEditar=!0,e.formularioTitulo="Editar",e.title.setTitle("Editar pedido"),e.pedidosService.ver(t.id).subscribe(function(t){e.pedido.datos.patchValue(t),e.pedido.status=t.status,e.proveedor=t.proveedor;var a=t.fecha.split("-"),n=parseInt(a[1]);e.cargarPresupuesto(n),e.cambioAlmacen();for(var i in t.insumos){var r=t.insumos[i],s=r.insumos_con_descripcion;s.cantidad=+r.cantidad_solicitada,s.monto=+r.monto_solicitado,s.precio=+r.precio_unitario,s.tipo_insumo_id=r.tipo_insumo_id,s.lista_clues=r.lista_clues,e.pedido.lista.push(s),e.listaClaveAgregadas.push({clave:s.clave,lista:[]}),console.log(r.lista_clues);var o=e.listaClaveAgregadas.length-1;for(var c in s.lista_clues)console.log(s.lista_clues[c]),e.listaClaveAgregadas[o].lista.push(s.lista_clues[c].clues)}e.pedido.indexar(),e.pedido.listar(1),e.cargando=!1},function(t){e.cargando=!1,e.mensajeError=new v.a(!0),e.mensajeError=new v.a(!0),e.mensajeError.mostrar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})):(e.title.setTitle("Nuevo pedido jurisdiccional"),e.cargarPresupuesto()),e.cargarAlmacenes()})},e.prototype.obtenerDireccion=function(){return"BR"==this.pedido.status?"/almacen/pedidos-jurisdiccionales/borradores":"/almacen/pedidos-jurisdiccionales/todos"},e.prototype.toggleModalInsumos=function(){this.mostrarModalInsumos=!this.mostrarModalInsumos},e.prototype.toggleModalListaClues=function(e){this.loteSeleccionado=e,this.mostrarModalListaClues=!this.mostrarModalListaClues},e.prototype.agregarItem=function(e){void 0===e&&(e={});var t=this.pedido.paginacion.totalPaginas,a=e.insumo,n=!1;for(var i in this.pedido.lista){var r=0;if(this.pedido.lista[i].clave==a.clave){n=!0,this.pedido.lista[i].lista_clues.push({clues:e.clues,nombre:e.nombre,cantidad:e.cantidad}),console.log(this.pedido.lista[i].lista_clues);for(var s in this.pedido.lista[i].lista_clues)r+=this.pedido.lista[i].lista_clues[s].cantidad;this.pedido.lista[i].cantidad=r,this.pedido.lista[i].monto=a.precio*r}}n||(a.lista_clues||(a.lista_clues=[]),a.lista_clues.push({clues:e.clues,nombre:e.nombre,cantidad:e.cantidad}),a.cantidad=e.cantidad,a.monto=a.cantidad*a.precio,this.pedido.lista.push(a)),this.pedido.indexar(),this.pedido.paginacion.lista.length!=this.pedido.paginacion.resultadosPorPagina||this.pedido.paginacion.paginaActual!=t||this.pedido.filtro.activo?this.pedido.listar(this.pedido.paginacion.paginaActual):this.pedido.listar(this.pedido.paginacion.paginaActual+1)},e.prototype.modificarItem=function(e){void 0===e&&(e={}),e.monto=e.cantidad*e.precio,this.pedido.actualizarTotales()},e.prototype.buscar=function(e,t,a,n){var i=t.value;if(27==e.keyCode)return e.preventDefault(),e.stopPropagation(),t.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(e.preventDefault(),e.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(e){var t=n[e].input.value;if(""==t)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[e].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(e){}return i.includes(t.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(e,t){return e.length-t.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},e.prototype.eliminarInsumo=function(e,t,a){void 0===a&&(a=!1);var n=this.listaClaveAgregadas.indexOf(e.clave);this.listaClaveAgregadas.splice(n,1),a?this.pedido.filtro.eliminarItem(e,t):this.pedido.eliminarItem(e,t)},e.prototype.mostrarFichaInformativa=function(e,t){e.preventDefault(),e.stopPropagation(),alert(t)},e.prototype.finalizar=function(){confirm("Atención el pedido ya no podra editarse, Esta seguro de concluir el pedido?")&&this.guardar(!0)},e.prototype.guardar=function(e){var t=this;void 0===e&&(e=!1),this.guardando=!0;var a;if(this.pedido.datos.invalid)return this.pedido.datos.get("almacen_solicitante").markAsTouched(),this.pedido.datos.get("descripcion").markAsTouched(),this.pedido.datos.get("fecha").markAsTouched(),this.guardando=!1,!1;if(a=this.pedido.obtenerDatosGuardar(),e){if(a.datos.status="CONCLUIR",this.presupuesto.causes_disponible-+this.pedido.totalMontoCauses.toFixed(2)<0||this.presupuesto.no_causes_disponible-+this.pedido.totalMontoNoCauses.toFixed(2)<0||this.presupuesto.material_curacion_disponible-+this.pedido.totalMontoMaterialCuracion.toFixed(2)<0)return this.guardando=!1,this.mensajeError=new v.a(!0),this.mensajeError.texto="Presupuesto insuficiente",this.mensajeError.mostrar=!0,!1}else a.datos.status="BR";this.esEditar?this.pedidosService.editar(this.pedido.id,a).subscribe(function(e){t.guardando=!1,"BR"!=e.status&&t.router.navigate(["/almacen/pedidos-jurisdiccionales/ver/"+e.id])},function(e){t.guardando=!1,t.mensajeError=new v.a(!0),t.mensajeError.texto="No especificado",t.mensajeError.mostrar=!0,console.log(t.pedido),"CONCLUIR"==t.pedido.status&&(t.pedido.status="BR");try{var a=e.json();console.log(a),401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==e.status&&a.error&&(t.mensajeError.texto=a.error,t.mensajeError.cuentaAtras=1e3)}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}}):this.pedidosService.crear(a).subscribe(function(e){t.guardando=!1,t.router.navigate(["/almacen/pedidos-jurisdiccionales/editar/"+e.id])},function(e){t.guardando=!1,console.log(e),t.mensajeError=new v.a(!0),t.mensajeError.texto="No especificado",t.mensajeError.mostrar=!0;try{var a=e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==e.status&&a.error&&(t.mensajeError.texto=a.error,t.mensajeError.cuentaAtras=1e3)}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}})},e.prototype.cambioAlmacen=function(){var e=this.pedido.datos.get("almacen_solicitante").value;this.subrogados[e]?this.es_almacen_subrogado=!0:this.es_almacen_subrogado=!1,this.cargarPresupuesto(this.mes)},e.prototype.cargarAlmacenes=function(){var e=this;this.cargandoAlmacenes=!0,this.almacenesService.catalogo(0).subscribe(function(t){e.cargandoAlmacenes=!1,e.almacenes=t;for(var a in t)1==t[a].subrogado&&"FARSBR"==t[a].tipo_almacen&&(e.subrogados[t[a].id]=!0);if(!e.esEditar){var n={};e.pedido.inicializarDatos(n)}console.log("Almacenes cargados."),0==e.almacenes.length?(e.mensajeAdvertencia=new v.a(!0),e.mensajeAdvertencia.texto="No hay almacenes registrados en el sistema, póngase en contacto con un administrador.",e.mensajeAdvertencia.mostrar=!0):(e.pedido.datos.patchValue({almacen_solicitante:e.almacenes[0].id}),e.cambioAlmacen())},function(t){e.cargandoAlmacenes=!1,e.mensajeError=new v.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para ver los almacenes."),500==t.status&&(e.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los almacenes")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los almacenes":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los almacenes"}})},e.prototype.recargarPresupuesto=function(e){var t=e.split("-");if(3==t.length){var a=t[1];2==a.length&&(a=parseInt(a))!=this.mes&&a>0&&a<13&&this.cargarPresupuesto(a)}},e.prototype.cargarPresupuesto=function(e){var t=this;if(void 0===e&&(e=0),0==e){e=(new Date).getMonth()+1}this.mes=e;var a=this.pedido.datos.get("almacen_solicitante").value;a&&(this.cargandoPresupuestos=!0,this.pedidosService.presupuesto(e,a).subscribe(function(e){t.cargando=!1,e.data?t.presupuesto=e.data:(t.presupuesto.causes_disponible=0,t.presupuesto.no_causes_disponible=0,t.presupuesto.material_curacion_disponible=0),t.cargandoPresupuestos=!1},function(e){t.cargando=!1,t.cargandoPresupuestos=!1,console.log(e)}))},e.prototype.keyboardInput=function(e){32==e.keyCode&&e.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.mostrarModalInsumos=!0),39==e.keyCode&&(e.ctrlKey&&e.shiftKey||e.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaSiguiente():this.pedido.paginaSiguiente()),37==e.keyCode&&(e.ctrlKey&&e.shiftKey||e.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaAnterior():this.pedido.paginaAnterior())},e.prototype.imprimirExcel=function(){var e="token="+localStorage.getItem("token");window.open(h.a.API_URL+"/generar-excel-pedido-jurisdiccional/"+this.pedido.id+"?"+e)},e.prototype.imprimir=function(){try{console.log(this.pedido),this.cargandoPdf=!0;var e={datos:{almacen:"solicitar",solicitante:"unidad",observaciones:"texto"},lista:this.pedido.lista};this.pdfworker.postMessage(JSON.stringify(e))}catch(e){this.cargandoPdf=!1,console.log(e)}},e.prototype.base64ToBlob=function(e,t){for(var a=atob(e),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:t})},e}();E=x([a.i(n.Component)({selector:"app-formulario",template:a("Hc6D"),styles:[a("tzMl")],host:{"(window:keydown)":"keyboardInput($event)"}}),j("design:paramtypes",["function"==typeof(I=void 0!==i.b&&i.b)&&I||Object,"function"==typeof(P=void 0!==r.Location&&r.Location)&&P||Object,"function"==typeof(C=void 0!==s.a&&s.a)&&C||Object,"function"==typeof(k=void 0!==s.c&&s.c)&&k||Object,"function"==typeof(S=void 0!==n.NgZone&&n.NgZone)&&S||Object,"function"==typeof(A=void 0!==y.a&&y.a)&&A||Object,"function"==typeof(q=void 0!==b.a&&b.a)&&q||Object,"function"==typeof(w=void 0!==o.FormBuilder&&o.FormBuilder)&&w||Object])],E);var I,P,C,k,S,A,q,w},RfYq:function(e,t){e.exports='<menu-equipamiento></menu-equipamiento>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},Rpt0:function(e,t){e.exports='<section class="hero is-primary" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/dashboard" routerLinkActive="active">\r\n                    <!--<img src="http://bulma.io/images/bulma-type.png" alt="Bulma logo">-->\r\n                    <span class="icon">\r\n                        <i class="fa fa-tachometer"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;Dashboard</h1>\r\n                    </a>\r\n                </div>\r\n\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},Rvy0:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.title=e,this.usuario={}}return e.prototype.ngOnInit=function(){this.title.setTitle("Dashboard"),this.usuario=JSON.parse(localStorage.getItem("usuario"))},e}();o=r([a.i(n.Component)({selector:"app-dashboard",template:a("Rpt0"),styles:[a("DBiG")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},S9un:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.lista=function(){return this.jwtRequest.get(l.URL).map(function(e){return e.json().data})},e.prototype.buscar=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.listaPaginada=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=20),this.jwtRequest.get(l.URL,null,{page:e,per_page:t}).map(function(e){return e.json().data})},e.prototype.ver=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){return e.json().data})},e.prototype.crear=function(e){return this.jwtRequest.post(l.URL,e).map(function(e){return e.json().data})},e.prototype.editar=function(e,t){return this.jwtRequest.put(l.URL,e,t).map(function(e){return e.json().data})},e.prototype.eliminar=function(e){return this.jwtRequest.delete(l.URL,e).map(function(e){return e.json().data})},e}();c.URL="roles",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},SASi:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("5oXY"),s=a("1APj"),o=(a.n(s),a("h0qH")),c=(a.n(o),a("aV5h")),l=(a.n(c),a("q3ik")),d=(a.n(l),a("+pb+")),u=(a.n(d),a("uCY4")),p=(a.n(u),a("6Yye")),m=(a.n(p),a("NAeX")),f=a("Q3Nn"),g=a("ve71"),h=a("0H6m"),v=a("Nqas");a.d(t,"a",function(){return _});var b=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,a,n,i,r){this.title=e,this.route=t,this.router=a,this.entregasService=n,this.pedidosService=i,this.stockService=r,this.cargando=!1,this.cargandoStock=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.lotesSurtidos=[],this.listaStock=[],this.claveInsumoSeleccionado=null,this.claveNoSolicitada=!1,this.itemSeleccionado=null}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Surtir pedido / Farmacia"),this.route.params.subscribe(function(t){e.id=t.id}),this.route.params.subscribe(function(t){e.id=t.id}),this.cargando=!0,this.pedidosService.ver(this.id).subscribe(function(t){e.cargando=!1,e.pedido=new h.a(!0),e.pedido.paginacion.resultadosPorPagina=10,e.pedido.filtro.paginacion.resultadosPorPagina=10;for(var a in t.insumos){var n=t.insumos[a],i=n.insumos_con_descripcion;null!=i&&(i.cantidad=+n.cantidad_solicitada,e.pedido.lista.push(i))}t.insumos=void 0,e.pedido.indexar(),e.pedido.listar(1)},function(t){e.cargando=!1,e.mensajeError=new v.a(!0),e.mensajeError=new v.a(!0),e.mensajeError.mostrar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.seleccionarItem=function(e){this.itemSeleccionado=e,this.buscarStockApi(null,e.clave)},e.prototype.buscar=function(e,t,a,n){var i=t.value;if(27==e.keyCode)return e.preventDefault(),e.stopPropagation(),t.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(e.preventDefault(),e.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(e){var t=n[e].input.value;if(""==t)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[e].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(e){}return i.includes(t.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(e,t){return e.length-t.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},e.prototype.buscarStockApi=function(e,t){var a=this;void 0===t&&(t=null),this.cargandoStock=!0,this.stockService.buscar(e,t).subscribe(function(e){if(a.cargandoStock=!1,a.claveNoSolicitada=!1,a.listaStock=e,e.length>0){a.claveInsumoSeleccionado=e[0].clave_insumo_medico;for(var t=!1,n=0;n<a.pedido.lista.length;n++)if(a.pedido.lista[n].clave==a.claveInsumoSeleccionado){a.pedido.filtro.activo=!1;var i=Math.ceil((n+1)/a.pedido.paginacion.resultadosPorPagina);a.pedido.listar(i),a.itemSeleccionado=a.pedido.lista[n],t=!0}t?a.verificarItemsAsignadosStockApi():(a.claveNoSolicitada=!0,a.listaStock=[])}else""!=a.searchBoxStockViewChildren.first.nativeElement.value&&(a.itemSeleccionado=null);console.log("Stock cargado.")},function(e){a.cargandoStock=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){};try{e.json();401==e.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==e.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.surtir=function(){var e=this,t=[];for(var a in this.pedido.lista)for(var n in this.pedido.lista[a].listaStockAsignado)t.push({id:this.pedido.lista[a].listaStockAsignado[n].id,cantidad:this.pedido.lista[a].listaStockAsignado[n].cantidad});var i={pedido_id:this.id,entrega:"Juan pérez jolote",recibe:"John Salch",observaciones:"Esto es una observacion",lista:t};this.entregasService.surtir(i).subscribe(function(t){e.cargando=!1,e.router.navigate(["/farmacia/entregas/ver/"+t.id])},function(t){e.cargando=!1,console.log(t),e.mensajeError=new v.a(!0),e.mensajeError.texto="No especificado",e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}})},e.prototype.buscarStock=function(e,t,a){return 13==e.keyCode&&(e.preventDefault(),e.stopPropagation(),""!=a&&(this.buscarStockApi(a),t.select(),!1))},e.prototype.limpiarStock=function(){this.listaStock=[],this.itemSeleccionado=null,this.searchBoxStockViewChildren.first.nativeElement.value=""},e.prototype.eliminarStock=function(e){this.itemSeleccionado.listaStockAsignado.splice(e,1),this.calcularTotalStockItem(),this.verificarItemsAsignadosStockApi()},e.prototype.asignarStock=function(e){null==this.itemSeleccionado.listaStockAsignado&&(this.itemSeleccionado.listaStockAsignado=[]);var t=0;for(var a in this.itemSeleccionado.listaStockAsignado){if(e.id==this.itemSeleccionado.listaStockAsignado[a].id)return;t+=this.itemSeleccionado.listaStockAsignado[a].cantidad}if(t<this.itemSeleccionado.cantidad){var n=this.itemSeleccionado.cantidad-t;e.existencia>n&&(e.cantidad=n),e.existencia<=n&&(e.cantidad=e.existencia),this.itemSeleccionado.listaStockAsignado.push(e),this.calcularTotalStockItem(),e.asignado=!0}},e.prototype.validarItemStock=function(e,t){if(void 0===t&&(t=!1),null==e.cantidad)return t&&this.asignarMaximoPosible(e),void this.calcularTotalStockItem();var a=parseInt(e.cantidad);return isNaN(a)?(this.asignarMaximoPosible(e),void this.calcularTotalStockItem()):a<=0?(this.asignarMaximoPosible(e),void this.calcularTotalStockItem()):(a>e.existencia&&(e.cantidad=e.existencia),this.verificarTotalStockItem()||this.asignarMaximoPosible(e),void this.calcularTotalStockItem())},e.prototype.asignarMaximoPosible=function(e){var t=0;for(var a in this.itemSeleccionado.listaStockAsignado)this.itemSeleccionado.listaStockAsignado[a]!=e&&(t+=this.itemSeleccionado.listaStockAsignado[a].cantidad);var n=this.itemSeleccionado.cantidad-t;n>=e.existencia&&(e.cantidad=e.existencia),n<e.existencia&&(e.cantidad=n)},e.prototype.verificarItemsAsignadosStockApi=function(){for(var e in this.listaStock){this.listaStock[e].asignado=!1;for(var t in this.itemSeleccionado.listaStockAsignado)if(this.itemSeleccionado.listaStockAsignado[t].id==this.listaStock[e].id){this.listaStock[e].asignado=!0;break}}},e.prototype.verificarTotalStockItem=function(){var e=0;for(var t in this.itemSeleccionado.listaStockAsignado)e+=this.itemSeleccionado.listaStockAsignado[t].cantidad;return this.itemSeleccionado.totalStockAsignado<=this.itemSeleccionado.cantidad},e.prototype.calcularTotalStockItem=function(){var e=0;for(var t in this.itemSeleccionado.listaStockAsignado)e+=this.itemSeleccionado.listaStockAsignado[t].cantidad;if(0==e){var a=0;for(var t in this.lotesSurtidos)this.lotesSurtidos[t].clave==this.itemSeleccionado.clave&&this.lotesSurtidos.splice(a,1),a++}else{var n=!1;for(var t in this.lotesSurtidos)this.lotesSurtidos[t].clave==this.itemSeleccionado.clave&&(n=!0,this.lotesSurtidos[t].cantidad=e);n||this.lotesSurtidos.push({clave:this.itemSeleccionado.clave,cantidad:e})}this.itemSeleccionado.totalStockAsignado=e},e.prototype.keyboardInput=function(e){32==e.keyCode&&e.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.searchBoxStockViewChildren.first.nativeElement.focus())},e}();b([a.i(n.ViewChildren)("searchBoxStock"),y("design:type",Object)],_.prototype,"searchBoxStockViewChildren",void 0),_=b([a.i(n.Component)({selector:"app-surtir",template:a("LEUf"),styles:[a("3cmH")],host:{"(window:keydown)":"keyboardInput($event)"},providers:[g.a,f.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==i.b&&i.b)&&x||Object,"function"==typeof(j=void 0!==r.c&&r.c)&&j||Object,"function"==typeof(E=void 0!==r.a&&r.a)&&E||Object,"function"==typeof(I=void 0!==f.a&&f.a)&&I||Object,"function"==typeof(P=void 0!==m.a&&m.a)&&P||Object,"function"==typeof(C=void 0!==g.a&&g.a)&&C||Object])],_);var x,j,E,I,P,C},SCY9:function(e,t){e.exports='<menu-farmacia [modulo]="\'Pedidos jurisdiccionales\'" [icono]="\'assets/icono-pedidos-jurisdiccionales.svg\'" [url]="\'/almacen/pedidos-jurisdiccionales\'"></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n      <menu-lateral></menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <table class="table" style="margin-bottom:0px;background-color:whitesmoke;">\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>Autorizado</th>\r\n                        <th>Comprometido</th>\r\n                        <th>Devengado</th>\r\n                        <th>Disponible</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <th><abbr title="Presupuesto Anual Causes">PAC</abbr></th>\r\n                        <td><span class="tag is-primary">$<b>{{ presupuesto.causes_modificado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-warning">$<b>{{ presupuesto.causes_comprometido | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-danger">$<b>{{ presupuesto.causes_devengado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-success">$<b>{{ presupuesto.causes_disponible | number:\'1.2-2\' }}</b></span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th><abbr title="Presupuesto Anual No Causes">PANC</abbr></th>\r\n                    <td><span class="tag is-primary">$<b>{{ presupuesto.no_causes_modificado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-warning">$<b>{{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-danger">$<b>{{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-success">$<b>{{ presupuesto.no_causes_disponible | number:\'1.2-2\' }}</b></span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th><abbr title="Presupuesto Anual Material de Curación">PAMC</abbr></th>\r\n                        <td><span class="tag is-primary">$<b>{{ presupuesto.material_curacion_modificado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-warning">$<b>{{ presupuesto.material_curacion_comprometido | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-danger">$<b>{{ presupuesto.material_curacion_devengado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-success">$<b>{{ presupuesto.material_curacion_disponible | number:\'1.2-2\' }}</b></span></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa {{ icono }}"></i></span> {{ titulo }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                            </p>\r\n                            <!--p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/almacen/pedidos/nuevo">\r\n                                <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p-->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th><abbr title="Folio del pedido">Folio</abbr></th>\r\n                        <th>Nombre del Pedido</th>\r\n                        <th>Fecha <span *ngIf="status == \'PS\'">(expiración)</span></th>\r\n                        <th>Claves</th>\r\n                        <th>Cantidad</th>\r\n                        <th>Monto</th>\r\n                        <th style="text-align:center;" width="1">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pedidos; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            <span class="icon"><i class="fa fa-{{(item.tipo_pedido_id==\'PA\')?\'hospital-o\':\'building\'}}"></i></span>\r\n                            {{ item.folio?item.folio:\'S/F\' }}</a>\r\n                        </th>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.descripcion }}</a></td>\r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.fecha | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias?item.expira_en_dias:\'hoy\'}})</span></a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_claves_recibidas || 0) | number }} / {{ item.total_claves_solicitadas | number }} [{{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_cantidad_recibida || 0) | number }} / {{ item.total_cantidad_solicitada | number }} [{{(item.total_cantidad_recibida/item.total_cantidad_solicitada)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            $ {{ (item.total_monto_recibido || 0) | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} [{{(item.total_monto_recibido/item.total_monto_solicitado)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando && item.status == \'BR\'" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                            <a *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias >= 0" routerLink="/almacen/pedidos-jurisdiccionales/recepcion/{{item.id}}" title="Recibir pedido"><span class="icon"><i class="fa fa-truck"></i></span></a>\r\n                            <span *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias < 0" class="tag is-danger" title="Expirado"><span class="icon"><i class="fa fa-exclamation"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'FI\'" class="is-success" title="Finalizado"><span class="icon"><i class="fa fa-check-circle"></i></span></span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf="pedidos.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.descripcion }}</a></td>\r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.created_at | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias}})</span></a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_claves_recibidas || 0) | number }} / {{ item.total_claves_solicitadas | number }} [{{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_cantidad_recibida || 0) | number }} / {{ item.total_cantidad_solicitada | number }} [{{(item.total_cantidad_recibida/item.total_cantidad_solicitada)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            $ {{ (item.total_monto_recibido || 0) | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} [{{(item.total_monto_recibido/item.total_monto_solicitado)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando && item.status == \'BR\'" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                            <a *ngIf="!item.cargando && item.status == \'PS\'" routerLink="/almacen/pedidos-jurisdiccionales/recepcion/{{item.id}}" title="Recibir pedido"><span class="icon"><i class="fa fa-truck"></i></span></a>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <!--p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p-->\r\n</div>'},SGRD:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},SgmE:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.usuario={},this.menu=[],this.menuAutorizado=[]}return e.prototype.ngOnInit=function(){this.menu=[{titulo:"Sincronización con servidor principal",modulos:[{permiso:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f",icono:"fa-cloud-upload",titulo:"Sincronización manual",url:"/panel-control/sync/manual"}]},{titulo:"Usuarios y privilegios",modulos:[{permiso:"mGKikN0aJaeF2XrHwwYK3XNw0f9CSZDe",icono:"fa-user",titulo:"Usuarios",url:"/panel-control/usuarios"},{permiso:"ICmOKw3HxhgRna4a78OP0QmKrIX0bNsp",icono:"fa-users",titulo:"Roles",url:"/panel-control/roles"},{permiso:"DYwQAxJbpHWw07zT09scEogUeFKFdGSu",icono:"fa-shield",titulo:"Permisos",url:"/panel-control/permisos"}]}],this.menuAutorizado=[{titulo:"Sincronización con servidor principal",modulos:[{icono:"fa-server",titulo:"Estatus de sincronización",url:"/panel-control/sync/estatus"}]}];var e=JSON.parse(localStorage.getItem("usuario")),t=e.permisos.split("|");if(t.length>0)for(var a in this.menu)for(var n in this.menu[a].modulos)e:for(var i in t)if(t[i]==this.menu[a].modulos[n].permiso){var r=this.initMenuAutorizadoPorItem(this.menu[a].titulo);r.modulos.push(this.menu[a].modulos[n]);break e}},e.prototype.initMenuAutorizadoPorItem=function(e){for(var t in this.menuAutorizado)if(e==this.menuAutorizado[t].titulo)return this.menuAutorizado[t];return this.menuAutorizado.push({titulo:e,modulos:[]}),this.menuAutorizado[this.menuAutorizado.length-1]},e}();s=i([a.i(n.Component)({selector:"admision-menu-aside",template:a("KS36"),styles:[a("Jg/L")]}),r("design:paramtypes",[])],s)},"T/4t":function(e,t){e.exports='<section class="hero is-primary" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/admision" routerLinkActive="active">\r\n                     <span class="icon">\r\n                        <i class="fa fa-user"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;Pacientes de <span style="font-size: 16pt"> ({{ DatoUnidad.unidades_medicas[0].clues }}) {{ DatoUnidad.unidades_medicas[0].nombre }}</span></h1> \r\n                    </a>\r\n                </div>\r\n                <a class="nav-item is-hidden-tablet" (click)="toggleMenuAside()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-navicon"></i>\r\n                    </span>\r\n                </a>\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>\r\n\r\n<div class="modal" [ngClass]="{\'is-active\': mostrarMenuAside}">\r\n  <div class="modal-background" (click)="toggleMenuAside()"></div>\r\n  <div class="modal-content">\r\n    <div class="card" style="width: 100%">\r\n        <div class="card-content">\r\n            <admision-menu-aside></admision-menu-aside>\r\n        </div>\r\n    </div>\r\n  </div>\r\n  <button class="modal-close" (click)="toggleMenuAside()"></button>\r\n</div>\r\n'},T603:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".item{cursor:pointer}.item.seleccionado{background:#ccc}.item.seleccionado .icon{color:#fff!important}.item.seleccionado .item-detalle{display:inherit}.item .item-detalle{display:none}.item.asignado{background:#ddd;color:#777}tr.filtro td,tr.filtro th{color:#fff;background:#4a4a4a!important}.contenedor-tabla{overflow:auto;width:100%;height:99%!important;display:block;position:absolute;left:0;top:0}.contenedor-tabla table{border-radius:3px}@media screen and (max-width:768px){.contenedor-tabla{position:relative}.tile.notification{padding:0!important}}",""]),e.exports=e.exports.toString()},TCqv:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("8672"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"almacen-articulos/catalogos",component:r.a,canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},TEOz:function(e,t,a){"use strict";var n=a("3j3K"),i=a("TKQK");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.pedidosService=e,this.cargando=!1,this.stats={todos:0,borradores:0,en_transito:0,por_surtir:0,finalizados:0,expirados:0,farmacia:0}}return e.prototype.ngOnInit=function(){var e=this;this.cargando=!0,this.pedidosService.stats().subscribe(function(t){e.cargando=!1,e.stats=t},function(t){e.cargando=!1,console.log(t)})},e}();o=r([a.i(n.Component)({selector:"menu-lateral",template:a("dnCL"),styles:[a("n/1k")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},TKQK:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.stats=function(){return this.jwtRequest.get(l.URL_STATS,null,null).map(function(e){return e.json()})},e.prototype.presupuesto=function(e,t){void 0===e&&(e=0),void 0===t&&(t="");var a={};return e&&(a.mes=e),t&&(a.almacen=t),this.jwtRequest.get(l.URL_PRESUPUESTO,null,a).map(function(e){return e.json()})},e.prototype.buscar=function(e,t,a,n){return void 0===a&&(a=1),void 0===n&&(n=20),this.jwtRequest.get(l.URL,null,{status:e,q:t,page:a,per_page:n}).map(function(e){return e.json().data})},e.prototype.lista=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{status:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.ver=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){return e.json().data})},e.prototype.crear=function(e){return this.jwtRequest.post(l.URL,e).map(function(e){return e.json().data})},e.prototype.editar=function(e,t){return this.jwtRequest.put(l.URL,e,t).map(function(e){return e.json().data})},e.prototype.eliminar=function(e){return this.jwtRequest.delete(l.URL,e).map(function(e){return e.json().data})},e}();c.URL="pedidos-jurisdiccionales",c.URL_STATS="pedidos-jurisdiccionales-stats",c.URL_PRESUPUESTO="pedidos-jurisdiccionales-presupuesto",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},TQow:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},TRu6:function(e,t){e.exports='<section class="hero is-dark" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/configuracion" routerLinkActive="active">\r\n                    <!--<img src="http://bulma.io/images/bulma-type.png" alt="Bulma logo">-->\r\n                     <span class="icon">\r\n                        <i class="fa fa-sliders"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;Configuración</h1>\r\n                    </a>\r\n                </div>\r\n                <a class="nav-item is-hidden-tablet" (click)="toggleMenuAside()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-navicon"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <div class="nav-center">\r\n                    <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                        <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n                    </span>\r\n                </div>\r\n\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>\r\n\r\n<div class="modal" [ngClass]="{\'is-active\': mostrarMenuAside}">\r\n  <div class="modal-background" (click)="toggleMenuAside()"></div>\r\n  <div class="modal-content">\r\n    <div class="card" style="width: 100%">\r\n        <div class="card-content">\r\n            <panel-control-menu-aside></panel-control-menu-aside>\r\n        </div>\r\n    </div>\r\n  </div>\r\n  <button class="modal-close" (click)="toggleMenuAside()"></button>\r\n</div>'},TfzO:function(e,t){e.exports='<administrador-central-menu></administrador-central-menu>\r\n\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <div style="height:50px;"></div>\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column" style="position:relative; overflow-x:hidden;">\r\n        <div style="height:60px;"></div>\r\n        <div style="background: #FFF; overflow:hidden; border-radius:1em; width:100%;margin-bottom:1em;">\r\n            <table class="table" *ngIf="!cargando" style="min-width:100%; font-size:0.8em; margin-bottom:0.2em;margin-top:0.2em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Presupuesto anual</th>\r\n                        <th style="text-align:center">Autorizado</th>\r\n                        <th style="text-align:center">Comprometido</th>\r\n                        <th style="text-align:center">Devengado</th>\r\n                        <th style="text-align:center">Disponible</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <th>Causes</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.causes_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.causes_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>No causes</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.no_causes_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.no_causes_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Material de curación</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.material_curacion_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.material_curacion_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.material_curacion_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.material_curacion_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Total</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.total_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.total_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.total_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.total_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n         </div>\r\n            \r\n        <section class="hero is-primary"  style="  border-radius:  1em  1em 0  0;" >\r\n            \r\n            <div class="hero-body" style="position:relative;">                    \r\n                \r\n                <a class="button  is-primary" *ngIf="!cargando" style="position:absolute; top:1em; right:1em;" (click)="exportar()"><span class="icon "><i class="fa fa-file-excel-o"></i></span> <span>Exportar</span></a>\r\n                <div class="container is-fluid">\r\n                    \r\n                    <h1 class="title">\r\n                        <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Pedidos\r\n                    </h1>\r\n                    \r\n                    <div class="control is-grouped">\r\n                    <p class="control is-expanded">\r\n                        <input class="input is-medium" type="text" placeholder="Buscar por CLUES ó Folio ó Nombre del pedido" [(ngModel)] = "q" (keyup)="filtrarQuery($event)">\r\n                    </p>\r\n                    </div>\r\n                    <div class="columns">                            \r\n                        <div class="column">\r\n                            <label>Proveedores:</label>\r\n                    \r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                <select #proveedoresSelect (change)="cambioSeleccionProveedor(proveedoresSelect.value)">\r\n                                    <option value="-1">Todos</option>\r\n                                    <option *ngFor="let item of proveedores" value="{{item.id}}">{{ item.nombre }}</option>\r\n                                </select>\r\n                                </span>\r\n                            </p>                   \r\n                        \r\n                        </div>\r\n                        <div class="column">\r\n                            <label>Jurisdicciones:</label>\r\n                            \r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                <select #js id="jurisdicciones"  (change)="cambioSeleccionJurisdiccion(js.value)">\r\n                                    <option value="-1">Todas</option>\r\n                                    <option *ngFor="let item of jurisdicciones" value="{{item.id}}">JS {{ item.numero }} - {{ item.nombre }}</option>\r\n                                </select>\r\n                                </span>\r\n                            </p>\r\n                                                    \r\n                            \r\n                        </div>\r\n                    </div>\r\n                    <div class="columns">                            \r\n                        <div class="column">\r\n                            <label>Status:</label>\r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                <select #statusSelect (change)="cambioSeleccionStatus(statusSelect.value)">\r\n                                    <option value="-1">Todos</option>\r\n                                    <option *ngFor="let item of status" value="{{item.id}}">{{ item.descripcion }}</option>\r\n                                </select>\r\n                                </span>\r\n                            </p>                   \r\n                        \r\n                        </div>\r\n                        <div class="column">\r\n                            <label for="jurisdicciones">Desde:</label>                             \r\n                            <p class="control is-expanded">\r\n                                <input class="input " type="date"  [(ngModel)] = "fecha_desde" >\r\n                            </p>\r\n                        </div>\r\n                        <div class="column">\r\n                            <label for="jurisdicciones">Hasta:</label>                             \r\n                            <p class="control is-expanded">\r\n                                <input class="input " type="date"  [(ngModel)] = "fecha_hasta" >\r\n                            </p>\r\n                        </div>\r\n                        <!--div class="column">\r\n                            <label>Sin Pedidos</label>\r\n                            <div class="control">\r\n                                <button class="button is-primary" (click)="sin_pedidos = !sin_pedidos"><span class="icon"><i class="fa" [ngClass]="{\'fa-check-square-o\': sin_pedidos, \'fa-square-o\':!sin_pedidos }"></i></span></button>\r\n                            </div>\r\n                        </div-->\r\n                    </div>\r\n\r\n                    <div *ngIf="jurisdiccionesSeleccionadas.length>0 || proveedoresSeleccionados.length>0 || statusSeleccionados.length>0">\r\n                        <h1 class="title is-6">Filtro aplicado:</h1>\r\n                        <span class="tag is-dark is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of proveedoresSeleccionados; let i = index">{{ item.nombre_corto }}<button class="delete is-small" (click)="quitarProveedor(i)"></button></span>\r\n                        <span class="tag is-white is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of jurisdiccionesSeleccionadas;  let i = index">JS {{ item.numero }}<button class="delete is-small" (click)="quitarJurisdiccion(i)"></button></span>\r\n                        <span class="tag is-warning is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of statusSeleccionados;  let i = index">{{ item.descripcion }}<button class="delete is-small" (click)="quitarStatus(i)"></button></span>\r\n                        \r\n                    </div>\r\n                    <nav class="level">\r\n                        <div class="level-left">\r\n                            <h1 class="title is-5">Resultados: <b>{{ total }}</b></h1>\r\n                        </div>\r\n                        <div class="level-right">\r\n                            <div class="block">\r\n                            <button class="button " *ngIf="jurisdiccionesSeleccionadas.length>0 || proveedoresSeleccionados.length>0  || statusSeleccionados.length>0 || q != \'\' || fecha_desde != null  || fecha_hasta != null " (click)="q = \'\'; jurisdiccionesSeleccionadas = []; proveedoresSeleccionados = []; statusSeleccionados =[]; js.value = -1; proveedoresSelect.value= -1; statusSelect.value = -1; fecha_desde = null; fecha_hasta = null; "><span class="icon"><i class="fa fa-times"></i></span> <span>Limpiar filtro</span></button>\r\n                            <button class="button is-primary is-inverted" (click)="listar(1)"><span class="icon"><i class="fa fa-filter"></i></span> <span>Filtrar</span></button>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n                \r\n                    \r\n                </div>\r\n            </div>\r\n        </section>\r\n        \r\n        <div  style="background: #FFF; overflow-x:auto; ">\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <table class="table" *ngIf="!cargando" style="min-width:100%; font-size:0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan="16" style="vertical-align: middle;">\r\n                            Status: \r\n                            <span class="icon sin-surtir"><i class="fa fa-circle"></i></span> Sin Surtir | \r\n                            <span class="icon surtiendo"><i class="fa fa-minus-circle"></i></span> Surtiendo | \r\n                            <span class="icon surtido"><i class="fa fa-check-circle"></i></span> Surtido | \r\n                            <span class="icon farmacia"><i class="fa fa-cubes"></i></span> Farmacia |\r\n                            <span class="icon expirado"><i class="fa fa-exclamation-circle"></i></span> Expirado |\r\n                            <span class="icon cancelado"><i class="fa fa-times-circle"></i></span> Cancelado\r\n                        </th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th colspan="6"></th>\r\n                        <th colspan="2">Total</th>\r\n                        <th colspan="2">Causes</th>\r\n                        <th colspan="2">No causes</th>\r\n                        <th colspan="2">Mat. de curación</th>\r\n                        <th colspan="2"></th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Status</th>\r\n                        <th>Proveedor</th>\r\n                        <th>Folio</th>\r\n                        <th>Nombre</th>\r\n                        <th>Unidad médica</th>\r\n                        <th>Fecha</th>\r\n                        <th>Claves</th>\r\n                        <th>Monto</th>\r\n                        <th>Claves</th>\r\n                        <th>Monto</th>\r\n                        <th>Claves</th>\r\n                        <th>Monto</th>\r\n                        <th>Claves</th>\r\n                        <th>Monto</th>  \r\n                        <th>Exportar</th>\r\n                        <th>Remisiones</th>                        \r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lista; let i=index">\r\n                        <td [ngClass]="{\'borrador\':item.status==\'BR\',\'surtido\':item.status==\'FI\',\'expirado\':item.status==\'EX\',\'cancelado\':item.status==\'EX-CA\',\'sin-surtir\':(item.total_cantidad_recibida==0 && item.status==\'PS\'),\'surtiendo\':(item.total_cantidad_recibida>0 && item.status==\'PS\'),\'farmacia\':item.status==\'EF\'}" style="text-align:center; vertical-align: middle;"><span class="icon is-medium"><i class="fa" [ngClass]="{\'fa-pencil\':item.status==\'BR\',\'fa-check-circle\':item.status==\'FI\',\'fa-times-circle\':item.status==\'EX-CA\',\'fa-exclamation-circle\':item.status==\'EX\',\'fa-circle\':(item.total_cantidad_recibida==0 && item.status == \'PS\'),\'fa-minus-circle\':(item.total_cantidad_recibida>0 && item.status == \'PS\'),\'fa-cubes\':item.status==\'EF\'}"></i></span></td>\r\n                        <td style="vertical-align: middle;">\r\n                        <!--<button type="button" *ngIf="item.status!=\'EX-CA\' && item.status!=\'EF\' && item.status!=\'BR\'" class="button is-warning is-small" (click)=\'verInformacion(item)\'><i class="fa fa-exclamation-triangle"></i></button>--> \r\n                        {{ item.proveedor }}</td>\r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="item.status!=\'EX-CA\' && item.status!=\'EF\' && item.status!=\'BR\'"><b><a class="surtiendo" (click)=\'verInformacion(item)\'>{{ (item.folio)?item.folio:\'S/F\' }}</a></b></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.status==\'EX-CA\' || item.status==\'EF\' || item.status==\'BR\'">{{ (item.folio)?item.folio:\'S/F\' }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.descripcion }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.unidad_medica }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.fecha_concluido | date:\'y-MM-dd\' }}</td>\r\n\r\n                        <td style="text-align:center; vertical-align: middle; white-space: nowrap;">{{ item.total_claves_recibidas }} / {{ item.total_claves_solicitadas }} <br> <strong>({{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}} %)</strong></td>\r\n                        <td style="text-align:center; vertical-align: middle;">${{ item.total_monto_recibido | number:\'1.2-2\' }} / ${{ item.total_monto_solicitado | number:\'1.2-2\' }} <br> <strong>({{((item.total_monto_recibido/item.total_monto_solicitado)*100) | number:\'1.0-2\'}} %)</strong></td>\r\n\r\n                        <td class="causes"  style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_causes">{{ item.total_claves_causes_recibidas }} / {{ item.total_claves_causes }} <br> <strong>({{((item.total_claves_causes_recibidas/item.total_claves_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_causes"> --- </span>\r\n                        </td>\r\n                        <td class="causes"  style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_causes*1)">${{ item.total_monto_causes_recibido  | number:\'1.2-2\'}} / ${{ item.total_monto_causes  | number:\'1.2-2\'}} <br> <strong>({{((item.total_monto_causes_recibido/item.total_monto_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_causes*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <td class="no-causes" style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_no_causes">{{ item.total_claves_no_causes_recibidas }} / {{ item.total_claves_no_causes }} <br> <strong>({{((item.total_claves_no_causes_recibidas/item.total_claves_no_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_no_causes"> --- </span>\r\n                        </td>\r\n                        <td class="no-causes" style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_no_causes*1)">${{ item.total_monto_no_causes_recibido  | number:\'1.2-2\'}} / ${{ item.total_monto_no_causes  | number:\'1.2-2\'}} <br> <strong>({{((item.total_monto_no_causes_recibido/item.total_monto_no_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_no_causes*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <td class="material-curacion" style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_material_curacion">{{ item.total_claves_material_curacion_recibidas }} / {{ item.total_claves_material_curacion }} <br> <strong>({{((item.total_claves_material_curacion_recibidas/item.total_claves_material_curacion)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_material_curacion"> --- </span>\r\n                        </td>\r\n                        <td class="material-curacion" style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_material_curacion*1)">${{ item.total_monto_material_curacion_recibido | number:\'1.2-2\' }} / ${{ item.total_monto_material_curacion | number:\'1.2-2\' }} <br> <strong>({{((item.total_monto_material_curacion_recibido/item.total_monto_material_curacion)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_material_curacion*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <!--td style="vertical-align: middle;">{{ item.status == \'BR\' ? \'Borrador\': item.status == \'TR\' ? \'En transito\': item.status == \'PS\' ? \'Por surtir\': item.status == \'FI\' ? \'Finalizado\': item.status == \'EX\' ? \'Expirado\': \'Otro\' }}</td-->\r\n\r\n                        <td style="vertical-align: middle; text-align:center;">\r\n                            <a (click)="imprimirExcelItem(item.pedido_id)"><span class="icon"><i class="fa fa-file-excel-o"></i></span></a> \r\n                            <!--a><span class="icon"><i class="fa fa-file-pdf-o"></i></span></a-->\r\n                        </td>\r\n                        <td style="vertical-align: middle; text-align:center;">\r\n                            <button type="button" class="button is-light" [ngClass]="{\'is-success\':item.numero_archivos > 0}" (click)="mostrarDialogoArchivos(item)">\r\n                                <span class="icon"><i class="fa fa-download"></i></span><span class="tag">{{ item.numero_archivos }}</span>\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div style="background: #FFF; border-radius: 0  0 1em  1em; width:100%;">\r\n        \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina"></paginacion>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="modal-pedido" class="modal is-active" [ngClass]="{\'is-active\': showPedido}">\r\n  <div class="modal-background"  (click)="showPedido = !showPedido"></div>\r\n  <div class="modal-card" style="width:60%; height: auto;">\r\n    <header class="modal-card-head" style="background-color: #00d1b2" >\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-user"></i></span> PEDIDO\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="showPedido = !showPedido"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n        <section class="section" style="padding:  1rem 1.5rem;">\r\n            <form name="form"  >\r\n                <table class="table">\r\n                    <thead>\r\n                        <th colspan="3">Datos Pedido</th>\r\n                         <th colspan="2">\r\n                                <button type="button" class="button is-warning" [ngClass]="{\'is-loading\': cargaRecepciones}" [disabled]="borrador" (click)=\'regresarBorrador(datos_pedido.pedido_id)\'><i class="fa fa-exclamation-triangle"></i> REGRESAR A BORRADOR</button>\r\n                            </th>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                <b>CLUES</b> <br>{{ datos_pedido.clues }}\r\n                            </td>\r\n                            <td>\r\n                                <b>FOLIO</b> <br>{{ datos_pedido.folio }}\r\n                            </td>\r\n                            <td>\r\n                                <b>FECHA</b> <br>{{ datos_pedido.fecha }}\r\n                            </td>\r\n                            <td>\r\n                                <b>FECHA EXPIRACION</b><br>{{ datos_pedido.fecha_expiracion }}\r\n                            </td>\r\n                           \r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <b>UNIDAD MEDICA:</b> \r\n                            </td>\r\n                            <td colspan="3">\r\n                                {{ datos_pedido.unidad_medica }}\r\n                            </td>\r\n                        </tr>\r\n                        <tr>    \r\n                            <td>\r\n                                <b>PROVEEDOR:</b>\r\n                            </td>\r\n                            <td colspan="3">\r\n                                {{ datos_pedido.proveedor }}\r\n                            </td>                            \r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan="4"><b>RESUMEN</b></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td><b>TOTAL CLAVES</b> <br>\r\n                                  {{ datos_pedido.total_claves_recibidas}} / {{ datos_pedido.total_claves_solicitadas}}\r\n                            </td>\r\n                            <td><b>TOTAL CANTIDAD INSUMOS</b> <br>\r\n                                {{ datos_pedido.total_cantidad_recibida}} / {{ datos_pedido.total_cantidad_solicitada}}\r\n                               \r\n                            </td>\r\n                            <td><b>TOTAL MONTO</b> <br>\r\n                                {{ datos_pedido.total_monto_recibido | currency:\'USD\':true:\'4.2-2\'}} / {{ datos_pedido.total_monto_solicitado | currency:\'USD\':true:\'4.2-2\'}}\r\n                            \r\n                            </td>\r\n\r\n                        </tr>\r\n                        \r\n                       \r\n                    </tbody>\r\n                </table>\r\n                <table class="table" >\r\n                    <thead>\r\n                        <th>ACTUALIZADO</th>\r\n                        <th>ESTATUS</th>\r\n                        <th>CLAVES</th> \r\n                        <th>CANTIDAD INSUMOS</th>\r\n                        <th>MONTO</th>\r\n                        <th>ACCIONES</th>\r\n                    </thead>\r\n                    <tbody *ngIf="!cargaRecepciones">\r\n                        \r\n                        <tr *ngFor="let item of recepciones; let i=index" >  \r\n                            <!--<td>{{ item.movimiento.created_at }}</td>-->                      \r\n                            <td>{{ item.movimiento_borrados.updated_at }}</td>                      \r\n                            \r\n                            <td *ngIf="item.movimiento_borrados.status == \'FI\'">FINALIZADO</td>                      \r\n                            <td *ngIf="item.movimiento_borrados.status == \'BR\'">BORRADOR</td> \r\n                            <td *ngIf="item.movimiento_borrados.status == \'FI\'">{{ item.total_claves }}</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'BR\'">--</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'FI\'">{{ item.total_cantidad }}</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'BR\'">--</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'FI\'">{{ item.total_monto | currency:\'USD\':true:\'4.2-2\'}}</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'BR\'">--</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'FI\'  && item.movimiento_borrados.deleted_at== null">\r\n                                <button type="button" class="button is-small is-danger" (click)=\'borrarRecepcion(item.movimiento_borrados.id)\' [disabled]=""><i class="fa fa-close"></i></button>\r\n                                <button type="button" class="button is-small is-primary" (click)=\'regresarBorrarRecepcion(item.movimiento_borrados.id)\' [disabled]=""><i class="fa fa-edit"></i></button>\r\n                            </td>                          \r\n                            <td *ngIf="item.movimiento_borrados.status == \'BR\' && item.movimiento_borrados.deleted_at== null"></td>\r\n                            <td *ngIf="item.movimiento_borrados.deleted_at!= null">\r\n                              <div class="block">\r\n                                  <span class="tag is-danger">\r\n                                    {{ item.borrado_por }} {{ item.borrado_al }}                                    \r\n                                  </span>\r\n                               </div>\r\n                            </td>\r\n                                                  \r\n                        </tr>\r\n                        <tr *ngIf="recepciones.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                    </tbody>\r\n                    <tbody>\r\n                        <tr *ngIf="cargaRecepciones">\r\n                            <td colspan="6" style="text-align: center;">\r\n                                <br>\r\n                                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                                <br>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>     \r\n             \r\n            </form>\r\n        </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': verDialogoArchivos}">\r\n  <div class="modal-background" (click)="cerrarDialogoArchivos()"></div>\r\n  <div class="modal-card" style="width:70%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-file"></i></span> {{tituloDialogoArchivos}} \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogoArchivos()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoArchivos">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando repositorio...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <div class="columns" *ngIf="!cargandoArchivos">\r\n          <table class="table" *ngIf="!cargandoArchivos" style="min-width:100%; font-size:0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th style="text-align:center;">Fecha Subido</th>\r\n                        <th style="text-align:center;">Nombre</th>\r\n                        <th style="text-align:center;">Peso</th>                        \r\n                        <th style="text-align:center;">Usuario</th>                        \r\n                        <th style="text-align:center;">Descargas</th>                        \r\n                        <th></th>\r\n                    </tr>\r\n                    \r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lista_archivos_pedido; let i=index"> \r\n                        <td style="text-align: center;"><strong>{{ item.created_at }}</strong></td>  \r\n                        <td style="text-align: center;"><strong>{{ item.nombre_archivo }}</strong></td>   \r\n                        <td style="text-align: center;"><strong>{{ (item.peso/1024) | number : \'1.2-2\' }} Kb ({{(item.peso/1048576) | number : \'1.2-2\' }} Mb)</strong></td>\r\n                        <td style="text-align: center;"><strong>{{ item.usuario_id }}</strong></td>   \r\n                         \r\n                        <td style="text-align: center;"><strong>{{ item.descargas }}</strong></td>   \r\n                        <td style="text-align: center;" *ngIf="!item.deleted_at"><button (click)=\'descargar(item)\' type="button" class="button is-primary"><i class="fa fa-download"></i></button></td>\r\n                        <td style="text-align: center;" *ngIf="item.deleted_at">\r\n                            <div class="block">\r\n                              <span class="tag is-danger">\r\n                                {{ item.usuario_deleted_id}} {{ item.deleted_at }}\r\n                              </span>\r\n                            </div>\r\n                        </td>   \r\n                    </tr>\r\n                    <tr *ngIf="lista_archivos_pedido.length == 0">\r\n                        <td colspan="12" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em; z-index: 10000;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto; z-index: 10000;" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n'},TpXv:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return r});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=function(){function e(){}return e}();r=i([a.i(n.Component)({selector:"salidas-recetas-lista",template:a("gM3R")})],r)},TtRd:function(e,t,a){"use strict";var n=a("gdhx");a.d(t,"a",function(){return i});var i=(function(){function e(){}e}(),function(){function e(t){void 0===t&&(t=!1),this.items=[],this.paginacion=new n.a,this.activo=!1,this.cargando=!1,this.tieneError=function(e,t){return this.datos.get(e).hasError(t)&&this.datos.get(e).touched},this.inicializarDatos=function(e){void 0===e&&(e={});var t=e.fecha,a="";if(!e.fecha){var n=new Date,i=("0"+n.getDate()).slice(-2),r=("0"+(n.getMonth()+1)).slice(-2);t=n.getFullYear()+"-"+r+"-"+i}e.almacen_solicitante&&(a=e.almacen_solicitante),this.datos.setValue({almacen_solicitante:a,descripcion:"",observaciones:"",fecha:t})},this.indexar=function(e){void 0===e&&(e=!0),this.paginacion.totalPaginas=Math.ceil(this.items.length/this.paginacion.resultadosPorPagina),this.paginacion.indice=[];for(var t=0;t<this.paginacion.totalPaginas;t++)this.paginacion.indice.push(t+1)},this.listar=function(e){void 0===e&&(e=1),this.paginacion.paginaActual=e;var t=(this.paginacion.paginaActual-1)*this.paginacion.resultadosPorPagina,a=t+this.paginacion.resultadosPorPagina;try{this.paginacion.lista=this.items.slice(t,a)}catch(e){this.paginacion.lista=[]}},this.eliminarItem=function(e,t){var a=0;for(var n in this.items){if(this.items[n]===e){this.paginacion.lista.splice(t,1),this.items.splice(a,1),this.indexar();var i=a+(this.paginacion.resultadosPorPagina-t)-1;if(this.items[i]&&this.paginacion.lista.push(this.items[i]),0==this.paginacion.lista.length&&(this.paginacion.paginaActual>1?this.listar(this.paginacion.paginaActual-1):this.listar(1)),this.padre){var r=this.padre.items.indexOf(e),s=Math.ceil(r/this.padre.paginacion.resultadosPorPagina),o=(s-1)*this.padre.paginacion.resultadosPorPagina,c=r-o;if(this.padre.paginacion.paginaActual==s)this.padre.eliminarItem(e,c);else{var l=this.padre.paginacion.paginaActual;this.padre.listar(s),this.padre.eliminarItem(e,c),this.padre.listar(l),0==this.padre.paginacion.items.length&&(this.padre.paginacion.paginaActual>1?this.padre.listar(this.padre.paginacion.paginaActual-1):this.padre.listar(1))}}return}a++}},t&&(this.filtro=new e,this.filtro.padre=this,this.tipo="CA"),this.paginacion.resultadosPorPagina=10}return e.prototype.paginaSiguiente=function(){this.paginacion.paginaActual!=this.paginacion.totalPaginas&&this.listar(this.paginacion.paginaActual+1)},e.prototype.paginaAnterior=function(){1!=this.paginacion.paginaActual&&this.listar(this.paginacion.paginaActual-1)},e}())},U77z:function(e,t){e.exports='<section class="hero is-warning" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/" routerLinkActive="active">\r\n                    <!--<img src="http://bulma.io/images/bulma-type.png" alt="Bulma logo">-->\r\n                    <span class="icon">\r\n                        <i class="fa fa-safari"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;404</h1>\r\n                    </a>\r\n                </div>\r\n\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>\r\n<section class="hero is-dark is-fullheight has-text-centered">\r\n  <div class="hero-body">\r\n    <div class="container">\r\n      <figure class="image" style="height: auto; width: 25%; display: inline-block;">\r\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" style="fill:#FFF;">\r\n        <path d="M42.128,22.257c0.01-0.192,0.015-0.378,0.015-0.561c0-7.251-5.899-13.149-13.15-13.149c-5.009,0-9.583,2.896-11.78,7.331\tc-1.134-0.751-2.464-1.154-3.857-1.154c-3.703,0-6.745,2.887-6.993,6.528C2.581,22.628,0,26.258,0,30.331C0,35.662,4.338,40,9.67,40\th31.428C46.006,40,50,36.007,50,31.099C50,26.539,46.553,22.769,42.128,22.257z M31,22c1.105,0,2,0.895,2,2c0,1.105-0.895,2-2,2\ts-2-0.895-2-2C29,22.895,29.895,22,31,22z M19,22c1.105,0,2,0.895,2,2c0,1.105-0.895,2-2,2s-2-0.895-2-2C17,22.895,17.895,22,19,22z M34.654,34.756C34.465,34.92,34.232,35,34,35c-0.279,0-0.559-0.117-0.756-0.346C33.214,34.62,29.99,31,25,31\tc-5.022,0-8.212,3.618-8.244,3.654c-0.361,0.418-0.993,0.462-1.41,0.102c-0.418-0.362-0.463-0.993-0.102-1.411\tC15.397,33.168,19.073,29,25,29s9.603,4.168,9.756,4.346C35.117,33.763,35.072,34.395,34.654,34.756z"></path>\r\n        </svg>\r\n      </figure>\r\n      <h1 class="title">¡Lo sentimos!</h1>\r\n      <h2 class="subtitle">El contenido que intentas buscar <strong>no existe</strong>.</h2>\r\n    </div>\r\n  </div>\r\n</section>\r\n\r\n'},UBJ0:function(e,t){e.exports='<formulario #ctrl URL="mis-servicios" titulo="Servicios / Configuración" [dato]="dato"></formulario>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <a class="button  is-primary" style="position:absolute;top: 6em;right: 3em;" (click)="ctrl.cargarDatos(); actualizarDatos(); ctrl.cargarCatalogo(\'tipos_servicios\', \'servicios\');" id="actualizar"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando" class="icon is-medium" ><i class="fa fa-refresh fa-spin"></i></span>                            \r\n                            <!-- --> Mis servicios\r\n                        </h1>\r\n                        <span style="text-align: right">Última actualización: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                            <strong *ngIf="actualizado" >{{actualizacion | date}}</strong> \r\n                            Por: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                            <strong *ngIf="actualizado">{{actualizacion_usuario}} </strong> \r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section">\r\n                <!-- formulario -->\r\n                <form name="dato" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar(false)">\r\n                    <div class="tabs is-boxed">\r\n                        <ul>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 2}">\r\n                                <a (click)="tab=2">\r\n                                    <span class="icon is-small"><i class="fa fa-home"></i></span>\r\n                                    <span>Tipos de servicios</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 2}">\r\n\r\n                        <div class="box" >\r\n                            <article class="media">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <div class="column is-5" style="float:left">\r\n                                            <nav class="panel">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="Movimientos" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.izquierda"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'izquierda\', ctrl.tipos_servicios)">\r\n                                                            <label for="Movimientos">\r\n                                                            Servicios disponibles\r\n                                                        </label>\r\n                                                        </div>\r\n                                                        <a id="catalogos" (click)="ctrl.cargarCatalogo(\'tipos_servicios\', \'servicios\'); "></a>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let val of ctrl.tipos_servicios; let i=index">          \r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{val.id}}" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.izquierda.indexOf(val) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'izquierda\', ctrl.tipos_servicios, val)">\r\n                                                            <label for="{{val.id}}">\r\n                                                                {{val.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                        <div class="column is-2" style="float:left" >\r\n                                            \r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.izquierda.length > 0}" \r\n                                                [disabled]="ctrl.izquierda.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'izquierda\', ctrl.dato.controls.clues_servicios.controls, ctrl.tipos_servicios, true)">></button>\r\n                                            </p>\r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.derecha.length > 0}" \r\n                                                [disabled]="ctrl.derecha.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'derecha\', ctrl.tipos_servicios, ctrl.dato.controls.clues_servicios.controls, false)"><</button>\r\n                                            </p>\r\n                                            \r\n                                        </div>                        \r\n                                        <div class="column is-5" style="float:left" >\r\n                                            <nav class="panel" formGroupName="clues_servicios">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="MisServicios" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.derecha"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'derecha\', ctrl.dato.controls.clues_servicios.controls)">\r\n                                                            <label for="MisServicios">\r\n                                                            Mis servicios\r\n                                                        </label>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let item of ctrl.dato.controls.clues_servicios.controls; let i2=index">          \r\n                                                    <div class="field" [formGroupName]="i2">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{item.value.id}}" class="styled" type="checkbox"\r\n                                                            [checked]="ctrl.derecha.indexOf(item) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'derecha\', ctrl.dato.controls.clues_servicios.controls, item)">\r\n                                                            <label for="{{item.value.id}}">\r\n                                                                {{item.value.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n                    <a (click)="ctrl.initMover(ctrl.dato.controls.clues_servicios.controls, ctrl.tipos_servicios); " id="initMover"></a>\r\n                    <br><br>\r\n                    <div class="control is-grouped" style="float:left; padding:10px;">\r\n                        <p class="control">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                        </p>\r\n                        <p class="control" *ngIf="ctrl.id">\r\n                            <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </form>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},UIlc:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("5oXY"),s=a("rCTf"),o=(a.n(s),a("EEr4")),c=(a.n(o),a("1APj")),l=(a.n(c),a("h0qH")),d=(a.n(l),a("aV5h")),u=(a.n(d),a("q3ik")),p=(a.n(u),a("+pb+")),m=(a.n(p),a("uCY4")),f=(a.n(m),a("6Yye")),g=(a.n(f),a("NAeX")),h=a("lgzy"),v=a("Nqas");a.d(t,"a",function(){return _});var b=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},_=function(){function e(e,t,a,n){this.title=e,this.route=t,this.pedidosService=a,this.cambiarEntornoService=n,this.cargando=!1,this.mensajeError=new v.a,this.mensajeExito=new v.a,this.titulo="Pedidos",this.icono="fa-file",this.pedidos=[],this.presupuesto=!1,this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new o.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=10,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return e.prototype.ngOnInit=function(){var e=this;switch(this.route.snapshot.url[0].path){case"borradores":this.status="BR",this.titulo="Borradores",this.icono="fa-pencil-square-o";break;case"en-transito":this.status="ET",this.titulo="En transito",this.icono="fa-clock-o";break;case"por-surtir":this.status="PS",this.titulo="Por surtir",this.icono="fa-truck";break;case"expirados":this.status="EX",this.titulo="Expirados",this.icono="fa-exclamation-circle";break;case"expirados-cancelados":this.status="EX-CA",this.titulo="Expirados - Cancelados",this.icono="fa-times-circle";break;case"farmacia-subrogada":this.status="EF",this.titulo="Farmacia Subrogada",this.icono="fa-building";break;case"finalizados":this.status="FI",this.icono="fa-check-circle",this.route.snapshot.url.length>1?"completos"==this.route.snapshot.url[1].path?this.titulo="Finalizados (completos)":"incompletos"==this.route.snapshot.url[1].path?this.titulo="Finalizados (incompletos)":"cancelados"==this.route.snapshot.url[1].path?this.titulo="Finalizados (cancelados)":this.titulo="Finalizados":this.titulo="Finalizados";break;default:this.titulo="Pedidos",this.icono="fa-file"}console.log("inicializar lista de pedidos"),this.title.setTitle("Pedidos"),this.cargarPresupuestoAnual(),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){console.log("subscripcion en lista de pedidos"),e.listar(e.paginaActual),e.cargarPresupuestoAnual()}),this.listar(1),this.mensajeError=new v.a,this.mensajeExito=new v.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.pedidosService.buscar(e.status,t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):s.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1;var a=t.data;for(var n in a)a[n].created_at=a[n].created_at.replace(" ","T");e.resultadosBusqueda=a,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var i=0;i<e.paginasTotalesBusqueda;i++)e.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")})},e.prototype.cargarPresupuestoAnual=function(){var e=this;this.pedidosService.presupuesto().subscribe(function(t){e.cargando=!1,e.presupuesto={},e.presupuesto.causes_modificado=+t.data.causes_modificado,e.presupuesto.causes_comprometido=+t.data.causes_comprometido,e.presupuesto.causes_devengado=+t.data.causes_devengado,e.presupuesto.causes_disponible=+t.data.causes_disponible,e.presupuesto.material_curacion_modificado=+t.data.material_curacion_modificado,e.presupuesto.material_curacion_comprometido=+t.data.material_curacion_comprometido,e.presupuesto.material_curacion_devengado=+t.data.material_curacion_devengado,e.presupuesto.material_curacion_disponible=+t.data.material_curacion_disponible,e.presupuesto.no_causes_modificado=+t.data.no_causes_modificado,e.presupuesto.no_causes_comprometido=+t.data.no_causes_comprometido,e.presupuesto.no_causes_devengado=+t.data.no_causes_devengado,e.presupuesto.no_causes_disponible=+t.data.no_causes_disponible},function(t){e.cargando=!1,console.log(t)})},e.prototype.obtenerDireccion=function(e,t){return"BR"==t?"/almacen/pedidos/editar/"+e:"/almacen/pedidos/ver/"+e},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.pedidosService.buscar(this.status,e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1;var t=e.data;for(var n in t)t[n].created_at=t[n].created_at.replace(" ","T");a.resultadosBusqueda=t,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var i=0;i<a.paginasTotalesBusqueda;i++)a.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,console.log("Cargando pedidos."),this.cargando=!0,this.pedidosService.lista(this.status,e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1,t.pedidos=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Pedidos cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.eliminar=function(e,t){var a=this;e.cargando=!0,confirm("Desea eliminar el pedido?")?this.pedidosService.eliminar(e.id).subscribe(function(n){e.cargando=!1,a.pedidos.splice(t,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new v.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="Pedido eliminado"},function(n){e.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(e,t)};try{var i=n.json();401==n.status?a.mensajeError.texto="No tiene permiso para hacer esta operación.":a.mensajeError.texto=i.error}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}):e.cargando=!1},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},e}();_=b([a.i(n.Component)({selector:"almacen-pedidos-lista",template:a("nh4S"),styles:[a("Gb+q")],providers:[g.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==i.b&&i.b)&&x||Object,"function"==typeof(j=void 0!==r.c&&r.c)&&j||Object,"function"==typeof(E=void 0!==g.a&&g.a)&&E||Object,"function"==typeof(I=void 0!==h.a&&h.a)&&I||Object])],_);var x,j,E,I},UduK:function(e,t){e.exports='<p>\r\n  editar works!\r\n</p>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" >\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:2em;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Editar rol\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="section" *ngIf="!cargando">\r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded">\r\n                    <input class="input is-medium" [(ngModel)]="rol.nombre"  [ngClass]="{ \'is-danger\': errores.nombre != null}"  type="text" placeholder="Nombre" >\r\n                </p>\r\n                <p class="control">\r\n                    <a class="button is-medium is-primary " [ngClass]="{ \'is-loading\': enviando}" (click)="guardar()" >\r\n                    <span class="icon"><i class="fa fa-save"></i></span><span>Guardar</span>\r\n                    </a>\r\n                </p><p class="control">\r\n                    <a class="button is-medium is-white " [ngClass]="{ \'is-disabled\': enviando}" routerLink="/panel-control/roles">Cancelar</a>\r\n                </p>\r\n                \r\n              </div>\r\n              <p class="help is-danger" *ngIf="errores.nombre == \'required\'">Por favor especifique el nombre del rol.</p>              \r\n              <p class="help is-danger" *ngIf="errores.nombre == \'unique\'">Este nombre ya fue utilizado, por favor elija otro.</p>              \r\n              <br>\r\n              <table class="table">\r\n                <thead>\r\n                  <tr>\r\n                    <td style="width:42px; cursor:pointer;" (click)="seleccionarTodos()">\r\n                      <span class="icon" style="color:#00d1b2"><i class="fa" [ngClass]="{ \'fa-square-o\': !todosSeleccionados, \'fa-check-square\': todosSeleccionados }"></i></span>\r\n                    </td>\r\n                    <td><span style="color:red" *ngIf="errores.permisos == \'required\'"><span class="icon"><i class="fa fa-exclamation-circle"></i></span> <span>Elija un permiso:</span></span><span *ngIf="errores.permisos == null">Permiso</span></td>\r\n                    <td>Grupo</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr *ngFor="let item of permisos" (click)="item.seleccionado = !item.seleccionado" style="cursor:pointer">\r\n                    <td><span class="icon"><i class="fa" [ngClass]="{ \'fa-square-o\': !item.seleccionado, \'fa-check-square\': item.seleccionado }"></i></span></td>\r\n                    <td>{{ item.descripcion }}</td>\r\n                    <td>{{ item.grupo }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n\r\n            </section>\r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>    \r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},Uvud:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("3XKf");a.d(t,"a",function(){return c});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=function(){function e(){}return e}();c=o([a.i(n.NgModule)({imports:[i.CommonModule,r.b],exports:[s.a],declarations:[s.a]})],c)},UxGz:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},V5SE:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("kZql"),s=a("Nqas"),o=a("2o5k");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t){this.title=e,this.apiService=t,this.cargando=!1,this.mensajeError=new s.a,this.mensajeExito=new s.a,this.listaMesesAnios=[],this.fecha=-1,this.estadisticasGlobales=[],this.listaEntregasEstadisticaDiaria=[],this.listaPedidosClues=[],this.cargandoFechas=!1,this.cargandoEstadisticasGlobales=!1,this.mostrarDialogoPedidos=!1,this.pedidosUnidadMedica=[],this.cargandoPedidosUnidadMedica=!1,this.mostrarGraficas=!0}return e.prototype.ngOnInit=function(){var e=this;this.mensajeError=new s.a,this.mensajeExito=new s.a,this.title.setTitle("Entregas del mes / Administrador central"),this.cargandoFechas=!0,this.apiService.mesesAniosPedidos().subscribe(function(t){e.cargandoFechas=!1,e.listaMesesAnios=t,e.listaMesesAnios.length>0&&(e.fecha=e.listaMesesAnios[0].fecha,e.generarStats())},function(t){e.cargandoFechas=!1,console.log(t)})},e.prototype.generarStats=function(){var e=this;if(!(this.listaMesesAnios.length<=0)){var t=this.fecha.split("/");if(2==t.length){var a={mes:t[0],anio:t[1]};this.cargandoEstadisticasGlobales=!0,this.apiService.entregasPedidosStatsMesesAnios(a).subscribe(function(t){e.cargandoEstadisticasGlobales=!1,e.estadisticasGlobales=t,e.listaEntregasEstadisticaDiaria=[],e.listaPedidosClues=[];for(var a in e.estadisticasGlobales)e.listaEntregasEstadisticaDiaria.push({proveedor_id:e.estadisticasGlobales[a].proveedor_id,proveedor:e.estadisticasGlobales[a].proveedor,cargando:!0,tipoDatos:"claves",data:[]}),e.listaPedidosClues.push({proveedor_id:e.estadisticasGlobales[a].proveedor_id,proveedor:e.estadisticasGlobales[a].proveedor_nombre_completo,cargando:!0,data:[]}),e.mostrarPedidosCluesProveedor(e.listaPedidosClues.length-1),e.generarStatsDiariasProveedor(e.listaEntregasEstadisticaDiaria.length-1)},function(t){e.cargandoEstadisticasGlobales=!1,console.log(t)})}}},e.prototype.mostrarPedidosCluesProveedor=function(e){var t=this,a=this.fecha.split("/");if(2==a.length){var n={mes:a[0],anio:a[1],proveedor_id:this.listaPedidosClues[e].proveedor_id};this.listaPedidosClues[e].cargando=!0,this.apiService.pedidosCluesMesAnio(n).subscribe(function(a){t.listaPedidosClues[e].cargando=!1,t.listaPedidosClues[e].data=a},function(a){console.log(a),t.listaPedidosClues[e].cargando=!1})}},e.prototype.generarStatsDiariasProveedor=function(e){var t=this,a=this.fecha.split("/");if(2==a.length){var n={mes:a[0],anio:a[1],proveedor_id:this.listaEntregasEstadisticaDiaria[e].proveedor_id};this.listaEntregasEstadisticaDiaria[e].cargando=!0,this.apiService.entregasPedidosStatsDiarias(n).subscribe(function(a){t.listaEntregasEstadisticaDiaria[e].cargando=!1,t.listaEntregasEstadisticaDiaria[e].data=a,t.renderGrafica(e)},function(a){console.log(a),t.listaEntregasEstadisticaDiaria[e].cargando=!1})}},e.prototype.renderGrafica=function(e){var t=[],a=[],n=[],i=[];for(var r in this.listaEntregasEstadisticaDiaria[e].data)t.push(this.listaEntregasEstadisticaDiaria[e].data[r].dia+" "+this.listaEntregasEstadisticaDiaria[e].data[r].mes_nombre),"claves"==this.listaEntregasEstadisticaDiaria[e].tipoDatos&&(a.push(this.listaEntregasEstadisticaDiaria[e].data[r].causes_claves||0),n.push(this.listaEntregasEstadisticaDiaria[e].data[r].no_causes_claves||0),i.push(this.listaEntregasEstadisticaDiaria[e].data[r].material_curacion_claves||0)),"insumos"==this.listaEntregasEstadisticaDiaria[e].tipoDatos&&(a.push(this.listaEntregasEstadisticaDiaria[e].data[r].causes_cantidad||0),n.push(this.listaEntregasEstadisticaDiaria[e].data[r].no_causes_cantidad||0),i.push(this.listaEntregasEstadisticaDiaria[e].data[r].material_curacion_cantidad||0)),"monto"==this.listaEntregasEstadisticaDiaria[e].tipoDatos&&(a.push(Number(this.listaEntregasEstadisticaDiaria[e].data[r].causes_monto)||0),n.push(Number(this.listaEntregasEstadisticaDiaria[e].data[r].no_causes_monto)||0),i.push(Number(this.listaEntregasEstadisticaDiaria[e].data[r].material_curacion_monto)||0));var s={};"claves"==this.listaEntregasEstadisticaDiaria[e].tipoDatos&&(s={min:0,title:{text:"Total claves"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}}),"insumos"==this.listaEntregasEstadisticaDiaria[e].tipoDatos&&(s={min:0,title:{text:"Total insumos"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}}),"monto"==this.listaEntregasEstadisticaDiaria[e].tipoDatos&&(s={min:0,title:{text:"Total en monto"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}}),this.listaEntregasEstadisticaDiaria[e].options={chart:{type:"column"},xAxis:{categories:t},yAxis:s,legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,backgroundColor:"white",borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},title:{text:"Entrega de insumos"},series:[{name:"Causes",data:a},{name:"No Causes",data:n},{name:"Material Curacion",data:i}]}},e.prototype.generarExcel=function(e,t){var a=this.fecha.split("/");if(2==a.length){console.log(a[0]);var n=(""+a[0]).length<2?"0"+a[0]:a[0],i=(new Date(a[1],a[0]-1,1),new Date(a[1],a[0],0)),s=a[1]+"-"+n+"-01",o=a[1]+"-"+n+"-"+i.getDate(),c="token="+localStorage.getItem("token")+"&q="+e+"&proveedores="+t+"&status=TR,PS,FI,EF,EX&fecha_desde="+s+"&fecha_hasta="+o;window.open(r.a.API_URL+"/administrador-central/pedidos-excel?"+c)}},e.prototype.verDialogoPedidos=function(e,t){var a=this;this.tituloDialogoPedidos=t.clues+" - "+t.unidad_medica,this.mostrarDialogoPedidos=!0;var n=this.fecha.split("/");if(2==n.length){var i={mes:n[0],anio:n[1],proveedor_id:e,clues:t.clues};this.cargandoPedidosUnidadMedica=!0,this.apiService.pedidosEntregasCluesMesAnio(i).subscribe(function(e){console.log(e);var t=[];for(var n in e){var i={folio:e[n].folio,nombre_pedido:e[n].descripcion,tipo_pedido_id:e[n].tipo_pedido_id,status:e[n].status,fecha:e[n].fecha,fecha_expiracion:e[n].fecha_expiracion,fecha_cancelacion:e[n].fecha_cancelacion,total_monto_solicitado:+e[n].total_monto_solicitado,total_monto_recibido:+e[n].total_monto_recibido,total_claves_solicitadas:+e[n].total_claves_solicitadas,total_claves_recibidas:+e[n].total_claves_recibidas,total_cantidad_solicitada:+e[n].total_cantidad_solicitada,total_cantidad_recibida:+e[n].total_cantidad_recibida,entregas:[]};if("PFS"!=e[n].tipo_pedido_id&&e[n].recepciones.length){var r=0,s=0,o=0,c={};for(var l in e[n].recepciones){var d=e[n].recepciones[l];if("FI"==d.entrada.status){var u={fecha:d.entrada.fecha_movimiento,total_claves:0,total_cantidad:0,total_monto:0,acumulado_claves:0,acumulado_cantidad:0,acumulado_monto:0},p={},m=0;for(var f in d.entrada.insumos_detalles){var g=d.entrada.insumos_detalles[f];u.total_cantidad+=+g.cantidad,u.total_monto+=+g.precio_total,"MC"==g.detalles.tipo&&(m+=+g.precio_total),p[g.clave_insumo_medico]||(p[g.clave_insumo_medico]=!0,u.total_claves+=1),c[g.clave_insumo_medico]||(c[g.clave_insumo_medico]=!0,r+=1)}m>0&&(u.total_monto+=16*m/100),s+=u.total_cantidad,o+=u.total_monto,u.acumulado_cantidad=s,u.acumulado_claves=r,u.acumulado_monto=o,i.entregas.push(u)}}}t.push(i)}a.pedidosUnidadMedica=t,console.log(t),a.cargandoPedidosUnidadMedica=!1},function(e){console.log(e),a.cargandoPedidosUnidadMedica=!1})}},e.prototype.cerrarDialogoPedidos=function(){this.mostrarDialogoPedidos=!1},e.prototype.parseNaN=function(e){return isNaN(e)?0:e},e.prototype.onResize=function(e){var t=this;this.mostrarGraficas=!1;try{setTimeout(function(){t.mostrarGraficas=!0})}catch(e){console.log(e)}},e}();d=c([a.i(n.Component)({selector:"app-entregas-mes",template:a("3+t1"),styles:[a("8J4Q")],host:{"(window:resize)":"onResize($event)"}}),l("design:paramtypes",["function"==typeof(u=void 0!==i.b&&i.b)&&u||Object,"function"==typeof(p=void 0!==o.a&&o.a)&&p||Object])],d);var u,p},VMPO:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("/SnB"),s=a("ltyQ"),o=a("Uvud"),c=a("fjeY");a.d(t,"a",function(){return d});var l=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},d=function(){function e(){}return e}();d=l([a.i(n.NgModule)({imports:[i.CommonModule,o.a,c.a,s.a],exports:[r.a],declarations:[r.a]})],d)},VPeQ:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.lista=function(e,t,a){return void 0===e&&(e=1),void 0===t&&(t=25),void 0===a&&(a=!1),this.jwtRequest.get(l.URL,null,{page:e,per_page:t,con_precios:a}).map(function(e){return e.json().data})},e.prototype.buscar=function(e,t,a,n,i){return void 0===t&&(t=1),void 0===a&&(a=25),void 0===n&&(n=!1),void 0===i&&(i=null),this.jwtRequest.get(l.URL,null,{q:e,page:t,per_page:a,con_precios:n,tipo:i}).map(function(e){return e.json().data})},e.prototype.clues=function(){return this.jwtRequest.get("unidades-medicas-dependientes",null,null).map(function(e){return e.json().data})},e}();c.URL="catalogo-insumos",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},VR2t:function(e,t,a){"use strict";var n=a("3j3K"),i=a("rCTf"),r=(a.n(i),a("EEr4")),s=(a.n(r),a("1APj")),o=(a.n(s),a("h0qH")),c=(a.n(o),a("aV5h")),l=(a.n(c),a("q3ik")),d=(a.n(l),a("+pb+")),u=(a.n(d),a("uCY4")),p=(a.n(u),a("6Yye")),m=(a.n(p),a("gDrt")),f=(a.n(m),a("vITn")),g=a("+/v9"),h=a("Nqas");a.d(t,"a",function(){return y});var v=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},b=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(){function e(e,t){this.apiService=e,this.uploaderService=t,this.mensajeError=new h.a,this.mensajeExito=new h.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new r.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=10,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[],this.errores={archivo:null},this.mostrarModalSubirArchivoSync=!1,this.mensajeErrorSync="",this.archivo=null,this.archivoSubido=!1,this.enviandoDatos=!1,this.progreso=0,this.cargando=!1}return e.prototype.ngOnInit=function(){var e=this;this.listar(1),this.mensajeError=new h.a,this.mensajeExito=new h.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.apiService.buscar(t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):i.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.apiService.buscar(e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1,a.resultadosBusqueda=e.data,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var t=0;t<a.paginasTotalesBusqueda;t++)a.indicePaginasBusqueda.push(t+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,console.log("Cargando items."),this.cargando=!0,this.apiService.listaPaginada(e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1,t.lista=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Items cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e.prototype.fileChange=function(e){var t=e.target.files;t.length>0&&(this.archivo=t[0])},e.prototype.reset=function(){this.errores={archivo:null},this.mensajeErrorSync="",this.archivoSubido=!1,this.archivo=null},e.prototype.adjuntar=function(){var e=this;if(this.archivo){this.errores={archivo:null},this.mensajeErrorSync="",this.archivoSubido=!1,this.enviandoDatos=!0;var t=new f.a(this.archivo);this.uploaderService.onSuccessUpload=function(t,a,n,i){e.archivoSubido=!0,e.listar(1),e.mostrarModalSubirArchivoSync=!1},this.uploaderService.onErrorUpload=function(t,a,n,i){var r=a.error;e.mensajeErrorSync=r},this.uploaderService.onCompleteUpload=function(t,a,n,i){e.enviandoDatos=!1},this.uploaderService.onProgressUpload=function(t,a){console.log(a),e.progreso=a},this.uploaderService.upload(t)}},e}();y=v([a.i(n.Component)({selector:"app-central",template:a("9LEW"),styles:[a("AWv4")],providers:[g.a]}),b("design:paramtypes",["function"==typeof(_=void 0!==g.a&&g.a)&&_||Object,"function"==typeof(x=void 0!==m.Uploader&&m.Uploader)&&x||Object])],y);var _,x},WB34:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("52hV"),s=a("nQIc"),o=a("lgzy");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,a,n){this.router=e,this.authService=t,this.bloquearPantallaService=a,this.cambiarEntornoService=n,this.mostrar=!1,this.usuario={},this.mostrarCambiarEntorno=!1}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e.prototype.toggle=function(){this.mostrar=!this.mostrar,this.mostrar&&(this.usuario=JSON.parse(localStorage.getItem("usuario")))},e.prototype.logout=function(){this.authService.logout(),this.router.navigate(["/login"])},e.prototype.bloquear=function(){this.bloquearPantallaService.bloquearPantalla(),this.mostrar=!1},e.prototype.seleccionarClues=function(e){this.mostrarCambiarEntorno=!0;for(var t in this.usuario.unidades_medicas)e==this.usuario.unidades_medicas[t].clues&&(this.usuario.clues_activa=this.usuario.unidades_medicas[t],this.usuario.clues_activa.almacenes.length>0?this.usuario.almacen_activo=this.usuario.clues_activa.almacenes[0]:this.usuario.almacen_activo=null)},e.prototype.seleccionarAlmacen=function(e){this.mostrarCambiarEntorno=!0;for(var t in this.usuario.clues_activa.almacenes)e==this.usuario.clues_activa.almacenes[t].id&&(this.usuario.almacen_activo=this.usuario.clues_activa.almacenes[t])},e.prototype.seleccionarProveedor=function(e){this.mostrarCambiarEntorno=!0;for(var t in this.usuario.proveedores)if(e==this.usuario.proveedores[t].id){this.usuario.proveedor_activo=this.usuario.proveedores[t];break}},e.prototype.cambiarEntorno=function(){localStorage.setItem("usuario",JSON.stringify(this.usuario)),this.mostrarCambiarEntorno=!1,this.cambiarEntornoService.cambiarEntorno()},e}();d=c([a.i(n.Component)({selector:"app-perfil",template:a("w40x"),styles:[a("+1oD")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.a&&i.a)&&u||Object,"function"==typeof(p=void 0!==r.a&&r.a)&&p||Object,"function"==typeof(m=void 0!==s.a&&s.a)&&m||Object,"function"==typeof(f=void 0!==o.a&&o.a)&&f||Object])],d);var u,p,m,f},WTnz:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},"Wf+u":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".bulma-select-multiple{width:100%;font-size:1em;border-color:#ddd;border-radius:.15em;box-shadow:inset 0 1px 2px hsla(0,0%,4%,.1)}.bulma-select-multiple:focus{border-color:#00d1b2;outline:none}.bulma-select-multiple.is-warning{width:100%;font-size:1em;border-color:#ffdd57;border-radius:.15em;box-shadow:inset 0 1px 2px hsla(0,0%,4%,.1)}.table tr.is-selected{background:#00d1b2!important;color:#fff!important}.table tr .icon{color:#00d1b2}.table tr.is-selected a .icon{color:#fff!important}",""]),e.exports=e.exports.toString()},Wopk:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("5qmi"),s=a("cbmf"),o=a("036B"),c=a("kKgL"),l=a("qbyw"),d=a("NJ09");a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=[{path:"pacientes/modulo",children:[{path:"egreso",component:r.a,canActivate:[d.a],data:{key:"CKXlt7sNZCiWBhvk33xqWEVTnv2lP022"}},{path:"egreso/:id",component:s.a,canActivate:[d.a],data:{key:"CKXlt7sNZCiWBhvk33xqWEVTnv2lP022"}},{path:"ingreso/:id",component:o.a,canActivate:[d.a],data:{key:"eS7qbng49qtMSs88wsflDnzMBVUfVMlc"}},{path:"verificacion",component:c.a,canActivate:[d.a],data:{key:"eS7qbng49qtMSs88wsflDnzMBVUfVMlc"}}],canActivate:[l.a]}],m=function(){function e(){}return e}();m=u([a.i(n.NgModule)({imports:[i.b.forChild(p)],exports:[i.b]})],m)},X5mc:function(e,t){e.exports='<menu-farmacia [modulo]="\'Entregas\'" [icono]="\'assets/icono-pedidos-alt.svg\'" [url]="\'/almacen/entregas\'"></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n      <menu-lateral></menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-history"></i></span> {{ titulo }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th>Folio</th>\r\n                    <th><abbr title="Número del pedido">Pedido</abbr></th>\r\n                    <th>Almacen solicitante:</th>\r\n                    <th>Fecha</th>\r\n                    <th>Hora</th>\r\n                    <th style="text-align:center;"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pedidos; let i=index">                       \r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.movimiento_pedido.pedido_id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.movimiento_pedido.pedido.almacen_solicitante.nombre}}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.created_at | date:\'dd/MM/y\' }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.created_at | date: \'HH:mm\'}}</a></td>\r\n                        <td></td>                        \r\n                    </tr>\r\n                    <tr *ngIf="pedidos.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.id }}</a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.movimiento_pedido.pedido_id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.movimiento_pedido.pedido.almacen_solicitante.nombre}}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.created_at | date:\'dd/MM/y\' }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.created_at | date: \'HH:mm\'}}</a></td>\r\n                        <td></td>                   \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n          \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>'},XGOn:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},XS25:function(e,t,a){"use strict";var n=a("2tFN"),i=(a.n(n),a("ChGr")),r=(a.n(i),a("ZSR1"));a.n(r)},XwcF:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("kZql"),s=a("Nqas"),o=a("2o5k");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t){this.title=e,this.apiService=t,this.cargando=!1,this.mensajeError=new s.a,this.mensajeExito=new s.a,this.clues="",this.jurisdicciones=[],this.proveedores=[],this.jurisdiccionesSeleccionadas=[],this.proveedoresSeleccionados=[],this.ordenarCauses="",this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[]}return e.prototype.ngOnInit=function(){this.mensajeError=new s.a,this.mensajeExito=new s.a,this.title.setTitle("Abasto / Administrador central"),this.listar(1),this.cargarJurisdicciones(),this.cargarProveedores()},e.prototype.cargarJurisdicciones=function(){var e=this;this.apiService.jurisdicciones().subscribe(function(t){e.jurisdicciones=t},function(e){})},e.prototype.cargarProveedores=function(){var e=this;this.apiService.proveedores().subscribe(function(t){console.log(t),e.proveedores=t},function(e){})},e.prototype.cambioSeleccionJurisdiccion=function(e){e==-1&&(this.jurisdiccionesSeleccionadas=[]),this.agregarJurisdiccion(e)},e.prototype.cambioSeleccionProveedor=function(e){e==-1&&(this.proveedoresSeleccionados=[]),this.agregarProveedor(e)},e.prototype.agregarProveedor=function(e){if(e!=-1){for(var t in this.proveedoresSeleccionados)if(this.proveedoresSeleccionados[t].id==e)return;for(var t in this.proveedores)if(this.proveedores[t].id==e){this.proveedoresSeleccionados.push(this.proveedores[t]);break}}},e.prototype.agregarJurisdiccion=function(e){if(e!=-1){for(var t in this.jurisdiccionesSeleccionadas)if(this.jurisdiccionesSeleccionadas[t].id==e)return;for(var t in this.jurisdicciones)if(this.jurisdicciones[t].id==e){this.jurisdiccionesSeleccionadas.push(this.jurisdicciones[t]);break}}},e.prototype.quitarProveedor=function(e){this.proveedoresSeleccionados.splice(e,1)},e.prototype.quitarJurisdiccion=function(e){this.jurisdiccionesSeleccionadas.splice(e,1)},e.prototype.filtrarClues=function(e){13==e.keyCode&&this.listar(1)},e.prototype.toggleCauses=function(){switch(this.ordenarCauses){case"":this.ordenarCauses="ASC";break;case"ASC":this.ordenarCauses="DESC";break;case"DESC":this.ordenarCauses="";break;default:this.ordenarCauses=""}this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.listar(1)},e.prototype.toggleNoCauses=function(){switch(this.ordenarNoCauses){case"":this.ordenarNoCauses="ASC";break;case"ASC":this.ordenarNoCauses="DESC";break;case"DESC":this.ordenarNoCauses="";break;default:this.ordenarNoCauses=""}this.ordenarCauses="",this.ordenarMaterialCuracion="",this.listar(1)},e.prototype.toggleMaterialCuracion=function(){switch(this.ordenarMaterialCuracion){case"":this.ordenarMaterialCuracion="ASC";break;case"ASC":this.ordenarMaterialCuracion="DESC";break;case"DESC":this.ordenarMaterialCuracion="";break;default:this.ordenarMaterialCuracion=""}this.ordenarCauses="",this.ordenarNoCauses="",this.listar(1)},e.prototype.listar=function(e){var t=this;this.cargando=!0,this.paginaActual=e;var a=[];for(var n in this.proveedoresSeleccionados)a.push(this.proveedoresSeleccionados[n].id);var i=[];for(var n in this.jurisdiccionesSeleccionadas)i.push(this.jurisdiccionesSeleccionadas[n].id);var r={clues:this.clues,proveedores:a,jurisdicciones:i,page:this.paginaActual,per_page:this.resultadosPorPagina,ordenar_causes:this.ordenarCauses,ordenar_no_causes:this.ordenarNoCauses,ordenar_material_curacion:this.ordenarMaterialCuracion};this.apiService.abasto(r).subscribe(function(e){t.cargando=!1,t.lista=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Items cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.exportar=function(){var e="token="+localStorage.getItem("token")+"&ordenar_causes="+this.ordenarCauses+"&ordenar_no_causes="+this.ordenarNoCauses+"&ordenar_material_curacion="+this.ordenarMaterialCuracion;""!=this.clues&&(e+="&clues="+this.clues);var t="";for(var a in this.proveedoresSeleccionados)""!=t&&(t+=","),t+=""+this.proveedoresSeleccionados[a].id;""!=t&&(e+="&proveedores="+t);var n="";for(var a in this.jurisdiccionesSeleccionadas)""!=n&&(n+=","),n+=""+this.jurisdiccionesSeleccionadas[a].id;""!=n&&(e+="&jurisdicciones="+n),window.open(r.a.API_URL+"/abasto-excel?"+e)},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e}();d=c([a.i(n.Component)({selector:"app-abasto",template:a("yBPq"),styles:[a("a6Kf")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.b&&i.b)&&u||Object,"function"==typeof(p=void 0!==o.a&&o.a)&&p||Object])],d);var u,p},YBXS:function(e,t){e.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Usuarios\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted " routerLink="/panel-control/usuarios/nuevo">\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th></th>\r\n                    <th><abbr title="Usuario ID">ID</abbr></th>\r\n                    <th>Nombre</th>\r\n                    <th>Servidor</th>\r\n                    <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of usuarios; let i=index">\r\n                        <th><a routerLink="/panel-control/usuarios/editar/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.nombre }} {{ item.apellidos }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.servidor_id }}</a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="usuarios.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th><a routerLink="/panel-control/usuarios/editar/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                    <th style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                    <td style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.nombre }} {{ item.apellidos }}</a></td>\r\n                    <td style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.servidor_id }}</a></td>\r\n                    <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n                    \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},YD97:function(e,t){e.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Almacen artículos" class="nav-item pull-left nav-hub-active"  routerLink="/almacen-articulos">\r\n            \r\n            <img src="assets/hub-almacen-articulos.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left is-hidden-touch">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item">\r\n                <h1 class="title">&nbsp;Artículos</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <div class="nav-center">\r\n            <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n            </span>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},YWx4:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){}return e}();s=i([a.i(n.Component)({selector:"app-root",template:a("5xMp"),styles:[a("okgc")]}),r("design:paramtypes",[])],s)},Ycqj:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("+YJN");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=[{path:"**",component:r.a}],c=function(){function e(){}return e}();c=s([a.i(n.NgModule)({imports:[i.b.forChild(o)],exports:[i.b]})],c)},Ygs2:function(e,t){e.exports='<menu-farmacia [modulo]="\'Entregas\'" [icono]="\'assets/icono-pedidos-alt.svg\'" [url]="\'/almacen/entregas\'"></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n      <menu-lateral></menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa {{ icono }}"></i></span> {{ titulo }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr title="Número del pedido">Pedido</abbr></th>\r\n                    <th>Solicitado por</th>\r\n                    <th>Fecha</th>\r\n                    <th>Hora</th>\r\n                    <th style="text-align:center;"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pedidos; let i=index">\r\n                       \r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.almacen_solicitante.nombre }} {{ item.apellidos }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.created_at | date:\'dd/MM/y\' }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.created_at | date: \'HH:mm\'}}</a></td>\r\n                        <td></td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="pedidos.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.id }}</a></th>\r\n                    <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.almacen_solicitante.nombre }} {{ item.apellidos }}</a></td>\r\n                    <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.created_at | date:\'dd/MM/y\' }}</a></td>\r\n                    <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.created_at | date: \'HH:mm\'}}</a></td>\r\n                     \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n          \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>'},YwNg:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("NVOs"),s=a("5oXY"),o=a("kZql");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,a,n){this.fb=e,this.router=t,this.route=a,this._sanitizer=n,this.tab=1,this.clues_term=o.a.API_URL+"/clues-auto?term=:keyword"}return e.prototype.ngOnInit=function(){this.dato=this.fb.group({nombre:["",[r.Validators.required]],clues:["",[r.Validators.required]],unidosis:[""],clues_servicios:this.fb.array([])}),this.form_clues_servicios={servicio_id:["",[r.Validators.required]]},document.getElementById("catalogos").click()},e}();d=c([a.i(n.Component)({selector:"unidades-medicas-formulario",template:a("4C4P")}),l("design:paramtypes",["function"==typeof(u=void 0!==r.FormBuilder&&r.FormBuilder)&&u||Object,"function"==typeof(p=void 0!==s.a&&s.a)&&p||Object,"function"==typeof(m=void 0!==s.c&&s.c)&&m||Object,"function"==typeof(f=void 0!==i.d&&i.d)&&f||Object])],d);var u,p,m,f},YyKe:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},Z7d5:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.lista=function(){return this.jwtRequest.get(""+l.URL,null).map(function(e){return e.json()})},e.prototype.listaDatos=function(){return this.jwtRequest.get(l.url+"?proveedor_id=3&fecha_inicial=2017-05-10&fecha_final=2017-06-30").map(function(e){return e.json()})},e}();c.URL="grafica-entregas",c.url="grafica-entregas",c.URL_STATS="movimiento-stats",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},ZLtL:function(e,t){e.exports='<formulario #ctrl URL="movimientos" titulo="Salida Receta" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Salida por receta\'" [icono]="\'assets/icono-salidas.svg\'" [url]="\'/almacen/salidas-recetas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()">\r\n    <div class="contenedor columns " style="height:100%">\r\n        <div class="column is-one-third" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <h1 *ngIf="!tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> {{ctrl.moduloTitulo}}\r\n                    </h1>\r\n                    <h1 *ngIf="tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> Folio {{ctrl.id}}\r\n                    </h1>\r\n\r\n\r\n                </section>\r\n                <div style="padding: 1em;">\r\n                    <nav class="nav">\r\n                        <div class="nav-right">\r\n                            <div class="nav-item">\r\n                                <div class="field is-grouped">\r\n                                    <p class="control" *ngIf="!tieneid" style="float:left">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                                    </p>\r\n                                    <p class="control" style="float:left">\r\n                                        <a *ngIf="tieneid" class="button is-primary is-inverted" (click)="imprimir()">\r\n                                            <span class="icon"><i class="fa fa-print"></i></span>\r\n                                        </a>\r\n                                        <a class="button" (click)="ctrl.regresar()">\r\n                                            Regresar\r\n                                        </a>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n\r\n                    <h3 class="title">\r\n                        <i class="fa fa-file"></i>\r\n                         Datos del movimiento\r\n                    </h3>\r\n                    <div >\r\n                        <div class="field">\r\n                            <label class="label">Fecha del movimiento:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n\r\n                                <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_movimiento\' formControlName="fecha_movimiento" ngui-datetime-picker\r\n                                    [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-danger\': ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched}"\r\n                                    placeholder="YYYY-MM-DD" />\r\n\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Observaciones:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched}"\r\n                                    placeholder="Observaciones" formControlName="observaciones"></textarea>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="control" *ngIf="mostrarCancelado">\r\n                            <!-- *ngIf -->\r\n                            <div class="field">\r\n                                <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                    <input type="checkbox" id="cancelado" class="styled" [checked]="ctrl.dato.get(\'cancelado\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'cancelado\').patchValue(ctrl.dato.get(\'cancelado\').value == \'1\' ? \'0\' : \'1\')">\r\n                                    <label for="cancelado">  Cancelado\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="field">\r\n                                <label class="label">Observaciones de cancelación:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched}"\r\n                                        placeholder="Observaciones de cancelacion" formControlName="observaciones_cancelacion"></textarea>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div formGroupName="movimiento_metadato">\r\n                            <div class="field"  >\r\n                                <label class="label">Turno:</label>\r\n                            </div><!-- SI carga los turnos -->\r\n                                <p  *ngIf="ctrl.turnos" class="control is-expanded  has-icon has-icon-right">\r\n                                    <select class="select" name="turno" formControlName="turno_id" [ngClass]="{\'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched}">\r\n                                        <option *ngFor="let item of ctrl.turnos.clues_turnos" value="{{item.id}}" [attr.selected]="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').value == item.id ">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <hr id="catalogos" (click)="ctrl.cargarCatalogo(\'turnos\', \'mis-turnos\');">\r\n                    <h3 class="title">\r\n                        <i class="fa fa-user-md"></i>\r\n                        Datos de la receta\r\n                    </h3>\r\n\r\n                    <div >\r\n                        <nav class="panel" formGroupName="receta">\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Folio:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched}"\r\n                                                placeholder="folio" formControlName="folio">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Tipo de receta:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n                                                <select class="select" name="tipo_receta" formControlName="tipo_receta" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched}">\r\n                                                    <option *ngFor="let item of tipos_recetas" value="{{item.id}}" >{{ item.nombre }}</option>\r\n                                                </select>\r\n\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    \r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Fecha de receta:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_receta\' formControlName="fecha_receta" ngui-datetime-picker\r\n                                                [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched}"\r\n                                                placeholder="YYYY-MM-DD" />\r\n\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Imagen:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input type="file" (change)="ctrl.seleccionarImagenBase64($event, ctrl.dato.controls.receta.controls.imagen_receta)">\r\n                                            <input type="hidden" placeholder="Imagen de la receta" formControlName="imagen_receta">\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Doctor:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched}"\r\n                                                placeholder="Doctor" formControlName="doctor">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Paciente:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched}"\r\n                                                placeholder="Paciente" formControlName="paciente">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Diagnostico:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched}"\r\n                                                placeholder="Diagnostico" formControlName="diagnostico"></textarea>\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="block" *ngIf="ctrl.dato.controls.receta.controls.imagen_receta.value != \'\'">\r\n                                <a class="button is-primary is-outlined is-fullwidth" (click)="abrirModal(\'verFoto\')">\r\n                                    <span class="icon">\r\n                                        <i class="fa fa-eye"> </i> \r\n                                    </span> \r\n                                    &nbsp; Ver receta\r\n                                </a>\r\n                            </div>\r\n\r\n                            <div class="modal" id="verFoto">\r\n                                <div class="modal-background"></div>\r\n                                <div class="modal-content">\r\n                                    <p class="image is-4by3">\r\n                                        <img [src]="\'data:image/jpg;base64,\'+ctrl.dato.controls.receta.controls.imagen_receta.value" alt="Receta" />\r\n                                    </p>\r\n                                </div>\r\n                                <button type="button" class="modal-close" (click)="cancelarModal(\'verFoto\')"></button>\r\n                            </div>\r\n                        </nav>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- apartado de insumos -->\r\n        <div class="column" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <div class="hero-body">\r\n                        <a class="button  is-primary" style="position:absolute; top:5em; right:3em;" (click)="ctrl.cargarDatos(dato);  "><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                        <div class="container is-fluid">\r\n                            <h1 class="title">\r\n                                <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                                <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Insumos\r\n                            </h1>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                    <br>\r\n                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                </div>\r\n                <section class="section">\r\n\r\n                    <div class="field has-addons has-addons-centered" *ngIf="!tieneid">\r\n\r\n                        <p class="control">\r\n                            <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" id="buscarInsumo" value-property-name="clave"\r\n                                display-property-name="descripcion" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                                (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                                type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n\r\n                        </p>\r\n\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div formArrayName="insumos">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos.controls; let i=index"  [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(230, 230, 232, 0.44)\' : \'\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <a *ngIf="!tieneid" class="is-danger" title="Quitar este elemento de la lista" style="float:right" (click)="ctrl.quitar_form_array(ctrl.dato.controls.insumos,i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                        <p>\r\n                                            <strong>\r\n                                                <span style="color:cornflowerblue">\r\n                                                    Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }} \r\n                                                </span>\r\n                                                Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="!ctrl.dato.controls.insumos.controls[i].controls.es_causes.value"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value"><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                        <a class="is-danger" title="Ver la lista de lotes de este articulo" style="float:right" (click)="ver_lotes_asignados(i)">\r\n                                            <span class="icon">\r\n                                                <i *ngIf="!mostrar_lote[i]" class="fa fa-plus"></i>\r\n                                                <i *ngIf="mostrar_lote[i]" class="fa fa-minus"></i>\r\n                                            </span>\r\n                                        </a>\r\n                                    </div>\r\n                                    <section *ngIf="mostrar_lote[i]">\r\n                                        <table class="table is-narrow is-bordered is-striped">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Lote</th>\r\n                                                    <th>Caducidad</th>\r\n                                                    <th>Codigo de barras</th>\r\n                                                    <th *ngIf="!tieneid">Existencia</th>\r\n                                                    <th>Cantidad</th>\r\n                                                    <th *ngIf="!tieneid"></th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody formArrayName="lotes">\r\n                                                <tr *ngFor="let val of ctrl.dato.controls.insumos.controls[i].controls.lotes.controls;  let i2 = index;">\r\n                                                    <td>{{val.value.lote}} </td>\r\n                                                    <td>{{val.value.fecha_caducidad}}</td>\r\n                                                    <td>{{val.value.codigo_barras}}</td>\r\n                                                    <td *ngIf="!tieneid">{{val.value.existencia}}</td>\r\n                                                    <td [formGroupName]="i2">\r\n                                                        <input *ngIf="!val.nuevo" class="input has-text-centered" [ngClass]="{\'is-disabled\': tieneid}" (keypress)="quitar_punto($event)" (blur)="validar_cantidad_lote(i, val, i2)" type="number" step="1" min="0" max="{{val.value.existencia}}"\r\n                                                            placeholder="Cantidad" formControlName="cantidad">\r\n                                                        <input *ngIf="val.nuevo" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2)" (keypress)="quitar_punto($event)" type="number" step="1" min="0" \r\n                                                            placeholder="Cantidad" formControlName="cantidad"></td>\r\n                                                    <td *ngIf="!tieneid">\r\n                                                        <a class="is-danger" title="Quitar este lote" (click)="quitar_lote_insumo(i, val.value, i2)">\r\n                                                            <span class="icon">\r\n                                                                <i class="fa fa-trash-o"></i>\r\n                                                            </span>\r\n                                                        </a>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </section>\r\n                                    <div class="level-left">\r\n                                        <div class="columns is-flex-desktop" style="width: 100%">\r\n                                            <div class="column is-2">\r\n                                                <p class="control is-expanded">\r\n                                                <label class="label">Dosis:</label>\r\n                                                    <input type="text" autofocus class="input" formControlName="dosis" (keypress)="quitar_punto($event)"  [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.dosis.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.dosis.touched}">\r\n                                                </p>\r\n                                            </div>\r\n                                            <div class="column is-auto">\r\n                                                    <p class="control is-expanded">\r\n                                                    <label class="label">Frecuencia (Hrs):</label>\r\n                                                        <input type="text" class="input" formControlName="frecuencia" (keypress)="quitar_punto($event)"  [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.frecuencia.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.frecuencia.touched}">\r\n                                                    </p>\r\n                                            </div>\r\n                                            <div class="column is-2">\r\n                                                <p class="control is-expanded">\r\n                                                <label class="label">Duración:</label>\r\n                                                    <input type="text" class="input" formControlName="duracion" (keypress)="quitar_punto($event)" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.duracion.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.duracion.touched}">\r\n                                                </p>\r\n                                            </div>\r\n                                            <div class="column  is-auto">\r\n                                                <p class="control is-expanded">\r\n                                                <label class="label">Cant. recetada:</label>\r\n                                                    <input type="text" class="input" formControlName="cantidad_recetada" (keypress)="quitar_punto($event)" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_recetada.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_recetada.touched}">\r\n                                                </p>\r\n                                            </div>\r\n                                            <div class="column is-auto">\r\n                                                <p class="control is-expanded">\r\n                                                <label class="label">Cant. surtida:</label>\r\n                                                    <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}">\r\n                                                    <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad" >\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n\r\n<div class="modal" id="verLotes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card" style="width: 60%;">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title" id="tituloModal"> </p>\r\n            <button type="button" class="delete" (click)="cancelarModal(\'verLotes\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <table class="table is-narrow is-bordered is-striped">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Lote</th>\r\n                        <th>Caducidad</th>\r\n                        <th>Codigo de barras</th>\r\n                        <th>Existencia</th>\r\n                        <th>Cantidad (normal)</th>\r\n                        <!-- \r\n                        <th *ngIf="es_unidosis">Existencia Unidosis</th>\r\n                        <th *ngIf="es_unidosis">Cantidad Unidosis</th>\r\n                        -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lotes_insumo;  let i = index;">\r\n                        <td *ngIf="!item.nuevo">{{item.lote}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Lote" [(ngModel)]="item.lote"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.fecha_caducidad}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="date" placeholder="Fecha de caducidad" [(ngModel)]="item.fecha_caducidad"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.codigo_barras}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Codigo de barras" [(ngModel)]="item.codigo_barras"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.existencia}}</td>\r\n                        <td *ngIf="item.nuevo"></td>\r\n                        <td>\r\n                            <input class="input has-text-centered " type="number" step="1" min="0" max="{{item.existencia}}" (keyup)="comprobar_cant_lotes()" (keypress)="quitar_punto($event)" (change)="comprobar_cant_lotes()" placeholder="Cantidad" [(ngModel)]="item.cantidad">\r\n                        </td>\r\n\r\n                        <!-- <td *ngIf="!item.nuevo && es_unidosis">{{item.existencia_unidosis}}</td> -->\r\n                        <td *ngIf="item.nuevo && es_unidosis"></td>\r\n\r\n                        <!-- \r\n                        <td *ngIf="es_unidosis">\r\n                            <input class="input has-text-centered " type="number" step="1" min="0" max="{{item.cantidad_unidosis}}" placeholder="Cantidad Unidosis" [(ngModel)]="item.cantidad_unidosis">\r\n                        </td> \r\n                        -->\r\n\r\n                        <td *ngIf="item.nuevo">\r\n                            <a class="delete" (click)=eliminarLote(i)></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n                \r\n            </table>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-dark" (click)="agregarNuevoLote()">Agregar nuevo lote</a>                            \r\n            <a class="button is-success" [ngClass]="{\'is-disabled\':!sum_cant_lotes}"  (click)="agregarLoteIsumo()">Aceptar</a>\r\n            <a class="button" (click)="cancelarModal(\'verLotes\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},Zit5:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("ok90");a.d(t,"a",function(){return o});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=function(){function e(){}return e}();o=s([a.i(n.NgModule)({imports:[i.CommonModule],exports:[r.a],declarations:[r.a]})],o)},"a/bf":function(e,t){e.exports='<listar #ctrl URL="movimientos?tipo=2" titulo="Salida  de almacén"></listar>\r\n<menu-farmacia [modulo]="\'Salidas  de almacén\'" [icono]="\'assets/icono-salidas.svg\'" [url]="\'/almacen/salidas-estandar\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n <!--\r\n     <div class="column is-one-quarter is-hidden-mobile">  -->\r\n        <!-- <menu-lateral (onEnviarTipo)=enviarTipo($event);></menu-lateral>  -->\r\n        <!--<aside class="menu" style="padding: 1em;">\r\n            <a routerLink="/almacen/salidas-estandar/nuevo" routerLinkActive="is-active" class="button is-primary is-inverted is-medium is-fullwidth"><span class="icon"  ><i class="fa fa-plus"></i></span> <span>Nueva Salida</span></a>\r\n            <br>\r\n            <ul class="menu-list">\r\n                <li>\r\n                    <a routerLink="/almacen/salidas-estandar" #estandar routerLinkActive="is-active">\r\n                        <span class="icon"><i class="fa fa-file"></i></span> Salida estandar\r\n                        <span class="icon is-pulled-right" *ngIf="ctrl.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                          -->\r\n                        <!-- <span class="tag is-pulled-right" [ngClass]="{ \'is-white\': estandar.className == \'is-active\', \'is-primary\': estandar.className != \'is-active\' }"></span> -->\r\n<!--                    </a>\r\n                </li>\r\n            </ul>\r\n\r\n        </aside>\r\n    </div>  -->\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    \r\n                    <div class="container is-fluid">\r\n                        <span></span>\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Salidas  de almacén\r\n                            </h1>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                            <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/almacen/salidas-estandar/nuevo">\r\n                                    <span class="icon"><i class="fa fa-plus"></i></span><span>Nueva salida</span>\r\n                                </a>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!ctrl.cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th style=" text-align: center;"><abbr title="Folio">Folio</abbr></th>\r\n                        <th>Servicio</th>\r\n                        <th>Turno</th>\r\n                        <th>Usuario</th>\r\n                        <th>Estatus</th>\r\n                        <th style=" text-align: center;">Creado</th>\r\n                        <th style=" text-align: center;">Actualizado</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.servicio.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.turno.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.status }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.updated_at | date:\'medium\'}} </a></td>\r\n                        <!--\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n                        -->\r\n\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.servicio.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.turno.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.status }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.created_at | date}} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.updated_at | date}} </a></td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},a6Kf:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},aegp:function(e,t){e.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " \'is-primary\' " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    \r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Editar Paciente\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <!-- Form Nuevo -->\r\n            <section class="section">\r\n\t            <form name="form" novalidate [formGroup]="paciente"  (ngSubmit)="enviar()">     \r\n\t            \r\n\t              <div class="control is-grouped">\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Nombre</label>\r\n\t                  <input class="input" autofocus type="text"  placeholder="Nombre" formControlName="nombre">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                \r\n\t              </div>\r\n\t              <div class="control is-grouped">\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Sexo</label>\r\n\t                \t<span class="select is-fullwidth">\r\n\t\t                \t<select  formControlName="sexo"  name="sexo">\r\n\t\t                \t\t<option value="1" selected="selected">MASCULINO</option>\r\n\t\t                \t\t<option value="2">FAMENINO</option>\r\n\t\t                \t</select>\r\n\r\n\t\t                </span>\t\r\n\t                 \t<span class="icon is-small" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">\r\n\t\t                     \t<i class="fa fa-warning"></i>\r\n\t\t                    </span>\r\n\t\t                    <span class="help is-danger" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                \t<label class="label">Teléfono</label>\r\n\t                  <input class="input" type="text" placeholder="Telefono" formControlName="telefono">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                <label class="label">Fecha Nacimiento</label>\r\n\t                  <input class="input" type="text" placeholder="AAAA/mm/dd" formControlName="fecha_nacimiento">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                \t<label class="label">Hora Nacimiento (si aplica)</label>\r\n\t                  <input class="input" type="text" placeholder="HH:mm" formControlName="hora_nacimiento">\r\n\t                 \r\n\t                </p>\r\n\t              </div>\r\n\t              <div class="control is-grouped">\r\n\t              \t\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Domicilio</label>\r\n\t                \t<input class="input" type="text" placeholder="Domicilio" formControlName="domicilio">\r\n\t                \t<span class="icon is-small" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">\r\n\t\t                    <i class="fa fa-warning"></i>\r\n\t\t                </span>\r\n\t\t                <span class="help is-danger" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">Este campo es requerido.</span>\r\n\t                 \r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                <label class="label">Colonia</label>\r\n\t                  <input class="input" type="text" placeholder="Colonia" formControlName="colonia">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t             </div>\r\n\t             <div class="control is-grouped">  \r\n\t             \t\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  <label class="label">Municipio</label> \r\n\t                  <span class="select is-fullwidth">\r\n\t\t                \t<select  formControlName="municipio_id" name="municipio_id" #municipio (change)="cargarLocalidades(municipio.value)">\r\n\t\t                \t\t<option *ngFor="let item of Municipios" value="{{item.id}}">{{ item.nombre }} </option>\r\n\t\t                \t</select>\r\n\t\t                \t\r\n\t\t                </span>\t\r\n\t\t                <span class="icon is-small" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  <label class="label">Localidad</label>\t\r\n\t                  <span class="select is-fullwidth">\r\n\t\t                \t<select formControlName="localidad_id" name="localidad_id">\r\n\t\t                \t\t<option *ngFor="let item of Localidades" value="{{item.id}}">{{ item.nombre }} </option>\r\n\t\t                \t</select>\r\n\t\t                \t\r\n\t\t                </span>\t\r\n\t\t                <span class="icon is-small" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">\r\n\t\t                     \t<i class="fa fa-warning"></i>\r\n\t\t                    </span>\r\n\t\t                <span class="help is-danger" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t              </div>\r\n\t              <div class="control is-grouped">   \r\n\t                \r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  \t<label class="label">No Expediente</label>\r\n\t\t                <input class="input" type="text" placeholder="No Expediente" formControlName="no_expediente">\r\n\t                    <span class="icon is-small" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">Este campo es requerido.</span>\r\n\t\t                \r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  \t<label class="label">No Afililación</label>\r\n\t\t                <input class="input" type="text" placeholder="No Afiliación" formControlName="no_afiliacion">\r\n\t                    <span class="icon is-small" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">Este campo es requerido.</span>\r\n\t\t                \r\n\t                </p>\r\n\t              </div>\r\n\r\n\t              <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Resposable Conocido</label>\r\n                        <span class="select is-fullwidth">\r\n                            <select formControlName="responsableconocido" name="responsableconocido" (change)="responsable()">\r\n                                <option value="1">SI</option>\r\n                                <option value="2">NO</option>\r\n                            </select>\r\n\r\n                        </span> \r\n                    </p>\r\n                  </div>\r\n                  <div [hidden]="verFormResponsable">\r\n                      <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                            <div class="container">\r\n                              <div class="heading">\r\n                                <h1 class="title">Datos del Responsable</h1>\r\n                              </div>\r\n                            </div>\r\n                        </section>  \r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Nombre</label>\r\n                          <input class="input" autofocus type="text"  placeholder="Nombre Responsable" formControlName="nombre_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Patentesco</label>\r\n                               <input class="input" autofocus type="text"  placeholder="Parentesco" formControlName="parentesco">\r\n                              <span class="icon is-small" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                              </span>\r\n                              <span class="help is-danger" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">Este campo es requerido.</span>\r\n\r\n                        </p>\r\n                         <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Domicilio</label>\r\n                            <input class="input" type="text" placeholder="Domicilio Responsable" formControlName="domicilio_responsable">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">Este campo es requerido.</span>\r\n                         \r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">Teléfono</label>\r\n                          <input class="input" type="text" placeholder="Telefono Responsable" formControlName="telefono_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                     \r\n                    </div> \r\n\t              <br><br>\r\n\t              <div class="control is-grouped">\r\n\t                <p class="control">\r\n\t                  <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="paciente.invalid">Guardar</button>\r\n\t                </p>\r\n\t                \r\n\t                <p class="control">\r\n\t                  <a class="button is-white" (click)="regresar()" >Regresar</a>\r\n\t                </p>\r\n\t              </div>\r\n\t          </form>\r\n\t        </section>  \r\n            <!--  Fin Nuevo  -->\r\n        </div>\r\n    </div>\r\n</div>    \r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <p><b>Error:</b> {{ mensajeError.texto }}<br></p>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-warning" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeAdvertencia.mostrar">\r\n    <button class="delete" (click)="mensajeAdvertencia.mostrar = false"></button>        \r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-warning"></i></span> <span>{{ mensajeAdvertencia.texto }}</span></p>\r\n    \r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeAdvertencia.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>    '},"alX+":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("05Le"),d=a("Zit5"),u=a("Qew2"),p=a("4PLu"),m=a("52hV"),f=a("RHrs"),g=a("30gs"),h=a("nqnc"),v=a("nsII"),b=(a.n(v),a("KR/G"));a.n(b);a.d(t,"a",function(){return _});var y=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},_=function(){function e(){}return e}();_=y([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,f.a,h.a,v.NguiAutoCompleteModule,b.NguiDatetimePickerModule],declarations:[p.a],providers:[m.a,g.a]})],_)},am34:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Qbdm"),o=a("5oXY"),c=a("52hV"),l=a("S9un"),d=a("mpkG"),u=a("Nqas");a.d(t,"a",function(){return f});var p=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=function(){function e(e,t,a,n,i,r,s){this.router=e,this.title=t,this.authService=a,this.location=n,this.rolesService=i,this.usuariosService=r,this.fb=s,this.usuarioRepetido=!1,this.usuarioInvalido=!1,this.cargando=!1,this.cargandoRoles=!1,this.cargandoUnidadesMedicas=!1,this.roles=[],this.unidadesMedicas=[],this.mensajeError=new u.a,this.mensajeAdvertencia=new u.a,this.mensajeExito=new u.a}return e.prototype.ngOnInit=function(){this.title.setTitle("Nuevo usuario / Panel de control"),this.cargarRoles(),this.cargarUnidadesMedicas(),this.usuario=this.fb.group({nombre:["",[r.Validators.required]],apellidos:["",[r.Validators.required]],id:["",[r.Validators.required]],password:["",[r.Validators.required]],confirmarPassword:["",[r.Validators.required]],avatar:["avatar-circled-user-male"],roles:[[],[r.Validators.required]],unidades_medicas:[[]],almacenes:[[]]})},e.prototype.enviar=function(){var e=this;if(this.usuario.get("password").value!=this.usuario.get("confirmarPassword").value)return!1;this.cargando=!0,this.usuariosService.crear(this.usuario.value).subscribe(function(t){e.cargando=!1,console.log("Usuario creado."),e.location.back()},function(t){e.cargando=!1,e.mensajeError=new u.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{var a=t.json();if(401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status){e.mensajeError.texto="Por favor verfique los campos marcados en rojo.",e.usuarioRepetido=!1,e.usuarioInvalido=!1;for(var n in a.error)for(var i in a.error[n])"id"==n&&"unique"==a.error[n][i]&&(e.usuarioRepetido=!0),"id"==n&&"email"==a.error[n][i]&&(e.usuarioInvalido=!0)}}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.cargarUnidadesMedicas=function(){var e=this;this.cargandoUnidadesMedicas=!0,this.usuariosService.listaUnidadesMedicas().subscribe(function(t){e.unidadesMedicas=t,e.cargandoUnidadesMedicas=!1,console.log("Unidades Médicas cargadas")},function(t){e.cargandoUnidadesMedicas=!1})},e.prototype.cargarRoles=function(){var e=this;this.cargandoRoles=!0,this.rolesService.lista().subscribe(function(t){e.cargandoRoles=!1,e.roles=t,console.log("Roles cargados."),0==e.roles.length&&(e.mensajeAdvertencia=new u.a(!0),e.mensajeAdvertencia.texto="\n            No hay roles registrados en el sistema, póngase en contacto con un administrador.",e.mensajeAdvertencia.mostrar=!0)},function(t){e.cargandoRoles=!1,e.mensajeError=new u.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para ver los roles."),500==t.status&&(e.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los roles")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los roles":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los roles"}})},e.prototype.regresar=function(){this.location.back()},e}();f=p([a.i(n.Component)({selector:"app-nuevo",template:a("x3bX"),styles:[a("8afZ")]}),m("design:paramtypes",["function"==typeof(g=void 0!==o.a&&o.a)&&g||Object,"function"==typeof(h=void 0!==s.b&&s.b)&&h||Object,"function"==typeof(v=void 0!==c.a&&c.a)&&v||Object,"function"==typeof(b=void 0!==i.Location&&i.Location)&&b||Object,"function"==typeof(y=void 0!==l.a&&l.a)&&y||Object,"function"==typeof(_=void 0!==d.a&&d.a)&&_||Object,"function"==typeof(x=void 0!==r.FormBuilder&&r.FormBuilder)&&x||Object])],f);var g,h,v,b,y,_,x},bAoB:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),e.exports=e.exports.toString()},bCdj:function(e,t,a){"use strict";var n=a("3j3K"),i=a("oafO");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=c=function(){function e(e){this.jwtRequest=e}return e.prototype.lista=function(){return this.jwtRequest.get(c.URL).map(function(e){return e.json().data})},e.prototype.buscar=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(c.URL,null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.listaPaginada=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=20),this.jwtRequest.get(c.URL,null,{page:e,per_page:t}).map(function(e){return e.json().data})},e.prototype.ver=function(e){return this.jwtRequest.get(c.URL,e,{}).map(function(e){return e.json().data})},e.prototype.crear=function(e){return this.jwtRequest.post(c.URL,e).map(function(e){return e.json().data})},e.prototype.editar=function(e,t){return this.jwtRequest.put(c.URL,e,t).map(function(e){return e.json().data})},e.prototype.eliminar=function(e){return this.jwtRequest.delete(c.URL,e).map(function(e){return e.json().data})},e.prototype.listaClues=function(e,t){return this.jwtRequest.get("administrador-central/claves-basicas-clues",e,t).map(function(e){return e.json().data})},e.prototype.agregarClues=function(e){return this.jwtRequest.post("administrador-central/claves-basicas-clues",e).map(function(e){return e.json().data})},e.prototype.eliminarClues=function(e){return this.jwtRequest.delete("administrador-central/claves-basicas-clues",e).map(function(e){return e.json().data})},e}();o.URL="administrador-central/claves-basicas",o=c=r([a.i(n.Injectable)(),s("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object])],o);var c,l},bCl8:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.mostrarMenuAside=!1,this.usuario={}}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e.prototype.toggleMenuAside=function(){this.mostrarMenuAside=!this.mostrarMenuAside},e}();s=i([a.i(n.Component)({selector:"panel-control-menu",template:a("TRu6"),styles:[a("LT4s")]}),r("design:paramtypes",[])],s)},bHPo:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("Gge2"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"almacen-articulos",component:r.a,canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},bamM:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Hd3x"),o=a("Uvud"),c=a("fjeY"),l=a("+ZDf"),d=a("Qew2"),u=a("pMSx"),p=a("MCwA");a.d(t,"a",function(){return f});var m=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},f=function(){function e(){}return e}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},bcdw:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("Kw80"),s=a("DVw5"),o=a("qbyw");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=[{path:"almacen/salidas-estandar",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"ver/:id",component:s.a}],canActivate:[o.a]}],d=function(){function e(){}return e}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},bd8H:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("rCTf"),s=(a.n(r),a("EEr4")),o=(a.n(s),a("1APj")),c=(a.n(o),a("h0qH")),l=(a.n(c),a("aV5h")),d=(a.n(l),a("q3ik")),u=(a.n(d),a("+pb+")),p=(a.n(u),a("uCY4")),m=(a.n(p),a("6Yye")),f=(a.n(m),a("S9un")),g=a("Nqas");a.d(t,"a",function(){return b});var h=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t){this.title=e,this.apiService=t,this.cargando=!1,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Roles / Panel de control"),this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.apiService.buscar(t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.apiService.buscar(e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1,a.resultadosBusqueda=e.data,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var t=0;t<a.paginasTotalesBusqueda;t++)a.indicePaginasBusqueda.push(t+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,console.log("Cargando items."),this.cargando=!0,this.apiService.listaPaginada(e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1,t.lista=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Items cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.eliminar=function(e,t){var a=this;e.cargando=!0,this.apiService.eliminar(e.id).subscribe(function(n){e.cargando=!1,a.lista.splice(t,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new g.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="item eliminado"},function(n){e.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e}();b=h([a.i(n.Component)({selector:"app-lista",template:a("ritK"),styles:[a("PbUY")]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==f.a&&f.a)&&_||Object])],b);var y,_},bh45:function(e,t,a){"use strict";var n=a("3j3K"),i=a("NVOs"),r=a("Qbdm"),s=a("5oXY"),o=a("kZql"),c=a("30gs"),l=a("3MNG"),d=a("lDdF");a.n(d);a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,a,n,i,r){var s=this;this.fb=e,this.crudService=t,this.route=a,this._sanitizer=n,this.notificacion=i,this._ngZone=r,this.tab=1,this.cargando=!1,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.MinDate=new Date,this.MaxDate=new Date,this.tieneid=!1,this.cargandoPdf=!1,this.autocompleListFormatter=function(e){var t='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4"><small>'+e.descripcion+'</small></p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+e.clave+") \n              ";return 1==e.es_causes&&(t+='<label class="tag is-success" ><strong>Cause </strong></label>'),0==e.es_causes&&(t+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);"><strong>No Cause </strong> </label>'),1==e.es_unidosis&&(t+='<label class="tag is-warning" ><strong>Unidosis</strong> </label>'),t+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",s._sanitizer.bypassSecurityTrustHtml(t)},this.es_unidosis=!1,this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0},this.mostrar_lote=[]}return e.prototype.ngOnInit=function(){var e=this,t=JSON.parse(localStorage.getItem("usuario"));t.clues_activa&&(this.insumos_term+="&clues="+t.clues_activa.clues),t.almacen_activo&&(this.insumos_term+="&almacen="+t.almacen_activo.id),this.pdfworker=new Worker("web-workers/farmacia/movimientos/imprimir-entrada.js");var a=this,n=this._ngZone;this.pdfworker.onmessage=function(e){n.run(function(){a.cargandoPdf=!1}),d.saveAs(a.base64ToBlob(e.data.base64,"application/pdf"),e.data.fileName)},this.dato=this.fb.group({id:[""],tipo_movimiento_id:["1",[i.Validators.required]],status:["FI"],fecha_movimiento:["",[i.Validators.required]],observaciones:[""],cancelado:[""],observaciones_cancelacion:[""],movimiento_metadato:this.fb.group({persona_recibe:["",[i.Validators.required]],servicio_id:[null],turno_id:[null]}),insumos:this.fb.array([])}),this.route.params.subscribe(function(t){t.id&&(e.tieneid=!0)}),this.form_insumos={tipo_movimiento_id:["",[i.Validators.required]]};var r=new Date;this.MinDate=new Date(r.getFullYear()-1,0,1),this.MaxDate=new Date(r.getFullYear(),r.getMonth(),r.getDate()),this.dato.get("fecha_movimiento").value?this.fecha_actual=this.dato.get("fecha_movimiento").value:(this.fecha_actual=r.getFullYear()+"-"+("00"+(r.getMonth()+1)).slice(-2)+"-"+r.getDate(),this.dato.get("fecha_movimiento").patchValue(this.fecha_actual))},e.prototype.abrirModal=function(e){document.getElementById(e).classList.add("is-active")},e.prototype.cancelarModal=function(e){document.getElementById(e).classList.remove("is-active")},e.prototype.select_insumo_autocomplete=function(e){JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.insumo=e,this.agregarLoteIsumo(),document.getElementById("buscarInsumo").value="",this.es_unidosis=e.es_unidosis,this.cargando=!1},e.prototype.agregarLoteIsumo=function(){var e,t=this.dato.controls.insumos;e=null==this.insumo.cantidad_x_envase?1:this.insumo.cantidad_x_envase;var a={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,lote:["",[i.Validators.required]],codigo_barras:[""],fecha_caducidad:["",[i.Validators.required]],cantidad:["",[i.Validators.required]],cantidad_x_envase:parseInt(e),cantidad_surtida:1};t.push(this.fb.group(a))},e.prototype.ver_lotes_asignados=function(e){this.mostrar_lote[e]=!this.mostrar_lote[e]},e.prototype.agregarNuevoLote=function(){this.lotes_insumo.push({id:""+Math.floor(999*Math.random())+1,codigo_barras:"",lote:"",fecha_caducidad:"",existencia:"",cantidad:"",nuevo:1,existencia_unidosis:"",cantidad_unidosis:""})},e.prototype.eliminarLote=function(e){this.lotes_insumo.splice(e,1)},e.prototype.quitar_lote_insumo=function(e,t,a){var n=this.dato.controls.insumos,i=n.controls[e];i.controls.lotes.removeAt(a);var r=i.controls.cantidad_surtida.value-t.cantidad;i.controls.cantidad_surtida.patchValue(r)},e.prototype.imprimir=function(){var e=JSON.parse(localStorage.getItem("usuario"));try{this.cargandoPdf=!0;var t={datos:this.dato.value,lista:this.dato.value.insumos,usuario:e};this.pdfworker.postMessage(JSON.stringify(t))}catch(e){this.cargandoPdf=!1}},e.prototype.base64ToBlob=function(e,t){for(var a=atob(e),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:t})},e}();m=u([a.i(n.Component)({selector:"salidas-estandar-formulario",template:a("3WqU"),styles:["ngui-auto-complete {z-index: 999999 !important}"]}),p("design:paramtypes",["function"==typeof(f=void 0!==i.FormBuilder&&i.FormBuilder)&&f||Object,"function"==typeof(g=void 0!==c.a&&c.a)&&g||Object,"function"==typeof(h=void 0!==s.c&&s.c)&&h||Object,"function"==typeof(v=void 0!==r.d&&r.d)&&v||Object,"function"==typeof(b=void 0!==l.a&&l.a)&&b||Object,"function"==typeof(y=void 0!==n.NgZone&&n.NgZone)&&y||Object])],m);var f,g,h,v,b,y},bm2y:function(e,t){e.exports='<section class="hero is-dark" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/administrador-proveedores" routerLinkActive="active">\r\n                      <img src="assets/hub-administrador-proveedores.svg" alt="icono">\r\n                      <h1 class="title">&nbsp;Administrador Proveedores</h1>\r\n                    </a>\r\n                </div>\r\n\r\n                <div class="nav-center">\r\n                    <span *ngIf="usuario.proveedor_activo" class="nav-item is-small">\r\n                        <span>{{usuario.proveedor_activo.nombre}}</span>\r\n                    </span>\r\n                </div>\r\n                \r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},bpii:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".rojo{color:red}",""]),e.exports=e.exports.toString()},c9Js:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),e.exports=e.exports.toString()},cDsx:function(e,t){e.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " \'is-primary\' " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Nuevo Paciente\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <!-- Form Nuevo -->\r\n            <section class="section">\r\n\t            <form name="form" novalidate [formGroup]="paciente"  (ngSubmit)="enviar()">     \r\n\t            \t<section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                        <div class="container">\r\n                          <div class="heading">\r\n                            <h1 class="title">Datos del Paciente</h1>\r\n                          </div>\r\n                        </div>\r\n                      </section>\r\n\t              <div class="control is-grouped">\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Nombre</label>\r\n\t                  <input class="input" autofocus type="text"  placeholder="Nombre" formControlName="nombre">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                \r\n\t              </div>\r\n\t              <div class="control is-grouped">\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Sexo</label>\r\n\t                \t<span class="select is-fullwidth">\r\n\t\t                \t<select  formControlName="sexo"  name="sexo">\r\n\t\t                \t\t<option value="1" selected="selected">MASCULINO</option>\r\n\t\t                \t\t<option value="2">FAMENINO</option>\r\n\t\t                \t</select>\r\n\r\n\t\t                </span>\t\r\n\t                 \t<span class="icon is-small" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">\r\n\t\t                     \t<i class="fa fa-warning"></i>\r\n\t\t                    </span>\r\n\t\t                    <span class="help is-danger" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                \t<label class="label">Teléfono</label>\r\n\t                  <input class="input" type="text" placeholder="Telefono" formControlName="telefono">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                <label class="label">Fecha Nacimiento</label>\r\n\t                  <input class="input" type="text" placeholder="aaaa-mm-dd" formControlName="fecha_nacimiento">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                \t<label class="label">Hora Nacimiento (si aplica)</label>\r\n\t                  <input class="input" type="text" placeholder="HH:mm" formControlName="hora_nacimiento">\r\n\t                  \r\n\t                </p>\r\n\t              </div>\r\n\t              <div class="control is-grouped">\r\n\t              \t\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Domicilio</label>\r\n\t                \t<input class="input" type="text" placeholder="Domicilio" formControlName="domicilio">\r\n\t                \t<span class="icon is-small" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">\r\n\t\t                    <i class="fa fa-warning"></i>\r\n\t\t                </span>\r\n\t\t                <span class="help is-danger" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">Este campo es requerido.</span>\r\n\t                 \r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                <label class="label">Colonia</label>\r\n\t                  <input class="input" type="text" placeholder="Colonia" formControlName="colonia">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t             </div>\r\n\t             <div class="control is-grouped">  \r\n\t             \t\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  <label class="label">Municipio</label> \r\n\t                  <span class="select is-fullwidth">\r\n\t\t                \t<select  formControlName="municipio_id" name="municipio_id" #municipio (change)="cargarLocalidades(municipio.value)">\r\n\t\t                \t\t<option *ngFor="let item of Municipios" value="{{item.id}}">{{ item.nombre }} </option>\r\n\t\t                \t</select>\r\n\t\t                \t\r\n\t\t                </span>\t\r\n\t\t                <span class="icon is-small" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  <label class="label">Localidad</label>\t\r\n\t                  <span class="select is-fullwidth">\r\n\t\t                \t<select formControlName="localidad_id" name="localidad_id">\r\n\t\t                \t\t<option *ngFor="let item of Localidades" value="{{item.id}}">{{ item.nombre }} </option>\r\n\t\t                \t</select>\r\n\t\t                \t\r\n\t\t                </span>\t\r\n\t\t                <span class="icon is-small" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">\r\n\t\t                     \t<i class="fa fa-warning"></i>\r\n\t\t                    </span>\r\n\t\t                <span class="help is-danger" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  \t<label class="label">No Expediente</label>\r\n\t\t                <input class="input" type="text" placeholder="No Expediente" formControlName="no_expediente">\r\n\t                    <span class="icon is-small" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">Este campo es requerido.</span>\r\n\t\t                \r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  \t<label class="label">No Afililación</label>\r\n\t\t                <input class="input" type="text" placeholder="No Afiliación" formControlName="no_afiliacion">\r\n\t                    <span class="icon is-small" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">Este campo es requerido.</span>\r\n\t\t                \r\n\t                </p>\r\n\t              </div>\r\n\t              <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Resposable Conocido</label>\r\n                        <span class="select is-fullwidth">\r\n                            <select formControlName="responsableconocido" name="responsableconocido" (change)="responsable()">\r\n                                <option value="1">SI</option>\r\n                                <option value="2">NO</option>\r\n                            </select>\r\n\r\n                        </span> \r\n                    </p>\r\n                  </div>\r\n                  <div [hidden]="verFormResponsable">\r\n                      <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                            <div class="container">\r\n                              <div class="heading">\r\n                                <h1 class="title">Datos del Responsable</h1>\r\n                              </div>\r\n                            </div>\r\n                        </section>  \r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Nombre</label>\r\n                          <input class="input" autofocus type="text"  placeholder="Nombre Responsable" formControlName="nombre_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Patentesco</label>\r\n                               <input class="input" autofocus type="text"  placeholder="Parentesco" formControlName="parentesco">\r\n                              <span class="icon is-small" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                              </span>\r\n                              <span class="help is-danger" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">Este campo es requerido.</span>\r\n\r\n                        </p>\r\n                         <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Domicilio</label>\r\n                            <input class="input" type="text" placeholder="Domicilio Responsable" formControlName="domicilio_responsable">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">Este campo es requerido.</span>\r\n                         \r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">Teléfono</label>\r\n                          <input class="input" type="text" placeholder="Telefono Responsable" formControlName="telefono_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                     \r\n                    </div>    \r\n\t              <br><br>\r\n\t              <div class="control is-grouped">\r\n\t                <p class="control">\r\n\t                  <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="paciente.invalid">Guardar</button>\r\n\t                </p>\r\n\t                \r\n\t                <p class="control">\r\n\t                  <a class="button is-white" (click)="regresar()" >Regresar</a>\r\n\t                </p>\r\n\t              </div>\r\n\t          </form>\r\n\t        </section>  \r\n            <!--  Fin Nuevo  -->\r\n        </div>\r\n    </div>\r\n</div>        \r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <p><b>Error:</b> {{ mensajeError.texto }}<br></p>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-warning" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeAdvertencia.mostrar">\r\n    <button class="delete" (click)="mensajeAdvertencia.mostrar = false"></button>        \r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-warning"></i></span> <span>{{ mensajeAdvertencia.texto }}</span></p>\r\n    \r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeAdvertencia.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div> '},cH28:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("qbyw"),s=a("CR3P"),o=a("IOyb"),c=a("SASi"),l=a("2qAC");a.d(t,"a",function(){return p});var d=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},u=[{path:"almacen/entregas",redirectTo:"/almacen/entregas/por-surtir",pathMatch:"full"},{path:"almacen/entregas",children:[{path:"por-surtir",component:s.a},{path:"finalizadas",component:s.a},{path:"finalizadas/completas",component:s.a},{path:"finalizadas/incompletas",component:s.a},{path:"finalizadas/canceladas",component:s.a},{path:"historial",component:o.a},{path:"surtir/:id",component:c.a},{path:"ver/:id",component:l.a}],canActivate:[r.a]}],p=function(){function e(){}return e}();p=d([a.i(n.NgModule)({imports:[i.b.forChild(u)],exports:[i.b]})],p)},cMTe:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("co2H"),d=a("Zit5"),u=a("Qew2"),p=a("QGuK"),m=a("HfqJ"),f=a("52hV"),g=a("l+S8"),h=a("30gs"),v=a("nqnc"),b=a("nsII");a.n(b);a.d(t,"a",function(){return _});var y=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},_=function(){function e(){}return e}();_=y([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,g.a,v.a,b.NguiAutoCompleteModule],declarations:[p.a,m.a],providers:[f.a,h.a]})],_)},cY0Z:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333}.contenedor-pedido.con-tabs .top-bar{padding:.5em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-pedido{background:#fff;border-radius:1em;overflow:hidden}.contenedor-pedido.con-tabs{border-top-left-radius:0!important;border-top-right-radius:0!important}",""]),e.exports=e.exports.toString()},cbmf:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("NVOs"),o=a("Qbdm"),c=a("52hV"),l=a("Nqas"),d=a("+U6h");a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,a,n,i,r,s){this.router=e,this.title=t,this.authService=a,this.route=n,this.location=i,this.pacienteEgresoService=r,this.fb=s,this.cargando=!1,this.cargandoMunicipios=!1,this.cargandoLocalidades=!1,this.cargandoMotivoEgreso=!1,this.cargandoUnidadesMedicas=!1,this.mensajeError=new l.a,this.mensajeAdvertencia=new l.a,this.mensajeExito=new l.a,this.Municipios=[],this.Localidades=[],this.MotivoEgreso=[],this.UnidadesMedicas=[]}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Alta Paciente / Admisión"),this.pacienteEgreso=this.fb.group({fecha_egreso:["",[s.Validators.required]],hora_egreso:["",[s.Validators.required]],contrareferencia:["2",[s.Validators.required]],unidad_referencia:["CSSS",[s.Validators.required]],motivo_egreso_id:["1",[s.Validators.required]]}),this.route.params.subscribe(function(t){e.id=t.id}),this.cargarDatos()},e.prototype.cargarMunicipios=function(e){var t=this;this.cargandoMunicipios=!0,this.pacienteEgresoService.listaMunicipios(e).subscribe(function(e){t.Municipios=e,t.cargandoMunicipios=!1,console.log("Municipios cargados")},function(e){t.cargandoMunicipios=!1})},e.prototype.cargarLocalidades=function(e,t){var a=this;this.cargandoLocalidades=!0,this.pacienteEgresoService.listaLocalidades(e,t).subscribe(function(e){a.Localidades=e,a.cargandoLocalidades=!1,console.log("Localidades cargados")},function(e){a.cargandoLocalidades=!1})},e.prototype.cargarMotivoEgreso=function(){var e=this;this.cargandoLocalidades=!0,this.pacienteEgresoService.listaMotivoEgreso().subscribe(function(t){e.MotivoEgreso=t,e.cargandoMotivoEgreso=!1,console.log(t)},function(t){e.cargandoMotivoEgreso=!1})},e.prototype.CargarUnidadesMedicas=function(e,t){var a=this;void 0===t&&(t=null),this.cargandoLocalidades=!0,this.pacienteEgresoService.listaUnidades(e,t).subscribe(function(e){a.UnidadesMedicas=e,a.cargandoUnidadesMedicas=!1},function(e){a.cargandoMotivoEgreso=!1})},e.prototype.cargarDatos=function(){var e=this;this.cargando=!0,console.log("Cargando usuario."),this.pacienteEgresoService.ver(this.id).subscribe(function(t){e.cargando=!1,e.datosCargados=!0,e.pacienteEgreso.patchValue(t);var a,n,i;e.id_paciente=t.id,e.nombre_paciente=t.nombre,t.localidad?e.localidad_paciente=t.localidad.nombre+" ( "+t.localidad.municipio.nombre+" )":e.localidad_paciente="DESCONOCIDO",e.fecha_ingreso=t.ingresoactivos[0].fecha_hora_ingreso,e.area_ingreso=t.ingresoactivos[0].estado_triage.descripcion,a=new Date,n=a.getHours(),i=a.getMinutes(),e.pacienteEgreso.patchValue({fecha_egreso:a.toJSON().slice(0,10),hora_egreso:n+":"+i}),e.cargarMotivoEgreso(),e.CargarUnidadesMedicas(1)},function(t){e.cargando=!1,e.mensajeError=new l.a(!0),e.mensajeError=new l.a(!0),e.mensajeError.mostrar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.referido=function(e){1==e?this.pacienteEgreso.patchValue({unidad_referencia:""}):this.pacienteEgreso.patchValue({unidad_referencia:"CSSS"})},e.prototype.enviar=function(){var e=this;this.cargando=!0,this.pacienteEgresoService.editar(this.id,this.pacienteEgreso.value).subscribe(function(t){e.cargando=!1,e.mensajeExito=new l.a(!0),e.mensajeExito.texto="Se han guardado los cambios.",e.mensajeExito.mostrar=!0,e.router.navigate(["/pacientes/modulo/egreso"])},function(t){e.cargando=!1,e.mensajeError=new l.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.regresar=function(){this.location.back()},e}();m=u([a.i(n.Component)({selector:"app-egreso",template:a("IWmU"),styles:[a("+3AU")]}),p("design:paramtypes",["function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(g=void 0!==o.b&&o.b)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object,"function"==typeof(v=void 0!==r.c&&r.c)&&v||Object,"function"==typeof(b=void 0!==i.Location&&i.Location)&&b||Object,"function"==typeof(y=void 0!==d.a&&d.a)&&y||Object,"function"==typeof(_=void 0!==s.FormBuilder&&s.FormBuilder)&&_||Object])],m);var f,g,h,v,b,y,_},ckf6:function(e,t){e.exports='<menu-farmacia [modulo]="\'Pedidos\'" [icono]="\'assets/icono-pedidos.svg\'" [url]="\'/almacen/pedidos\'"></menu-farmacia>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile">\r\n      <div class="tile is-4 is-parent is-vertical ">\r\n        <div class="tile is-child">\r\n            <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n                <section class="hero is-primary" >\r\n                <h1 class="title" style="margin:0.5em;" >\r\n                    <span class="icon is-medium"><i class="fa fa-file-text"></i></span> {{formularioTitulo}} \r\n                </h1>\r\n                <a class="button is-success" title="Imprimir Excel" (click)="imprimirExcel(); " *ngIf="esEditar">\r\n                    <span class="icon"><i class="fa fa-file-excel-o"></i></span> &nbsp; Descargar Pedido en Excel\r\n                </a>\r\n                </section>\r\n\r\n                <div style="padding: 1em;">\r\n                <form name="form" novalidate [formGroup]="pedido.datos">\r\n                    <label class="label">Pedido para:</label>\r\n                    <p class="control">\r\n                        <span class="select is-fullwidth">\r\n                            <select name="almacen_solicitante" formControlName="almacen_solicitante" [ngClass]="{\'is-warning\': almacenes?.length == 0 }" (change)="cambioAlmacen()"> \r\n                                <option *ngFor="let item of almacenes" value="{{item.id}}" [disabled]="deshabilitarAlmacen(item)">{{ item.nombre }}</option>\r\n                            </select>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'almacen_solicitante\',\'required\')">Debe elegir el almacen solicitante.</span>\r\n                    </p>\r\n                    <p *ngIf="es_almacen_subrogado" class="subtitle is-6 is-info">\r\n                        Al concluir el pedido, los insumos capturados serán  asignados al inventario de la farmacia subrogada.\r\n                    </p>\r\n\r\n                    <label class="label">Nombre del Pedido:</label>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input type="text" class="input is-fullwidth" placeholder="Ej. Pedido del mes de Mayo" [ngClass]="{\'is-danger\': pedido.tieneError(\'descripcion\',\'required\')}" formControlName="descripcion"/>\r\n                        <span class="icon is-small" *ngIf="pedido.tieneError(\'descripcion\',\'required\')">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'descripcion\',\'required\')">Este campo es requerido.</span>\r\n                    </p>\r\n\r\n                    <label class="label">Fecha (aaaa-mm-dd):</label>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <!--input type="text" class="input is-fullwidth" placeholder="aaaa-mm-dd" [ngClass]="{\'is-danger\': pedido.tieneError(\'fecha\',\'required\')}" formControlName="fecha" #fecha id="fecha" (keyup)="recargarPresupuesto(fecha.value)"/-->\r\n                        <span class="icon is-small" *ngIf="pedido.tieneError(\'fecha\',\'required\')">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="select is-fullwidth">\r\n                            <select [ngClass]="{\'is-danger\': pedido.tieneError(\'fecha\',\'required\')}" formControlName="fecha" #fecha id="fecha" (change)="recargarPresupuesto(fecha.value)">\r\n                                <option *ngFor="let item of fechasValidas" value="{{item.fecha}}">{{ item.descripcion }}</option>\r\n                            </select>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'fecha\',\'required\')">Este campo es requerido.</span>\r\n                    </p>\r\n\r\n                    <div class="control">\r\n                    <textarea name="observaciones" class="textarea" placeholder="Observaciones"  formControlName="observaciones"></textarea>\r\n                    </div>\r\n                </form>\r\n\r\n                <label *ngIf="pedido.tipo_pedido != \'PI\' && esEditar" class="label">Datos del Proveedor:</label>\r\n                <div *ngIf="pedido.tipo_pedido != \'PI\' && esEditar" class="level-item">\r\n                    <div *ngIf="esEditar" >\r\n                    <p class="subtitle is-5">\r\n                        {{proveedor.nombre}}<br>\r\n                        <small>\r\n                        {{proveedor.contacto}}<br>\r\n                        {{proveedor.email}}<br>\r\n                        Cel: {{proveedor.celular}}\r\n                        </small>\r\n                    </p>\r\n                    </div>\r\n                </div>\r\n                <hr>\r\n\r\n                <div class="control is-grouped" style="padding-top:10px;" *ngIf="!cargando">\r\n                    <!--p class="control" *ngIf="esEditar">\r\n                        <a class="button is-success " [ngClass]="{ \'is-loading\': cargando, \'is-inverted\': !cargando }" (click)="imprimirExcel()" title="Imprimir Excel" ><span class="icon"><i class="fa fa-file-excel-o"></i></span></a>\r\n                    </p-->\r\n\r\n                    <p class="control">\r\n                        <a class="button is-primary " (click)="guardar()" [ngClass]="{\'is-loading\': guardando}" >Guardar</a>\r\n                    </p>\r\n                    <p class="control" *ngIf="esEditar">\r\n                        <a class="button is-danger " (click)="finalizar()" [ngClass]="{\'is-loading\': guardando}" ><span class="icon"><i class="fa fa-check"></i></span><span>Concluir</span></a>\r\n                    </p>\r\n                \r\n                    <!--p class="control" *ngIf="esEditar">\r\n                    <a class="button is-primary " [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }" (click)="imprimir()" ><span class="icon"><i class="fa fa-print"></i></span></a>\r\n                    </p-->\r\n                    <p class="control">\r\n                    <a class="button is-white" [ngClass]="{\'is-loading\': guardando}" routerLink="{{obtenerDireccion()}}" >Ir a la lista</a>\r\n                    </p>                \r\n                </div>\r\n                </div>\r\n            </div>\r\n            <br>\r\n        </div>\r\n        \r\n        <div class="tile is-child  notification is-white">\r\n        </div>\r\n      </div>\r\n\r\n      <div class="tile is-parent is-vertical">\r\n        <div class="tile is-child is-12" >\r\n            <div class="tile is-parent" style="padding:0px;">\r\n                <article class="tile is-child notification is-info has-text-centered" style="padding:0.5rem 0.5rem 0.5rem 0.5rem">\r\n                    <div class="content" *ngIf="!cargandoPresupuestos">\r\n                        <span *ngIf="(totalMontoComprometidoCausesMaterial + (presupuesto.causes_disponible + presupuesto.material_curacion_disponible) - (pedido.totalMontoCauses + pedido.totalMontoMaterialCuracion)) < 0" class="icon is-large pull-right"><i class="fa fa-warning"></i></span>\r\n                        <p class="subtitle" style="font-weight:bold;">\r\n                            <small>\r\n                                Disponible Causes y Material de Curación:<br> \r\n                                $ {{ totalMontoComprometidoCausesMaterial + (presupuesto.causes_disponible - pedido.totalMontoCauses.toFixed(2)) + (presupuesto.material_curacion_disponible - pedido.totalMontoMaterialCuracion.toFixed(2)) | number: \'1.2-2\' }}\r\n                            </small>\r\n                        </p>\r\n                    </div>\r\n                    <div class="content" *ngIf="cargandoPresupuestos">\r\n                        <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span>\r\n                    </div>\r\n                </article>\r\n\r\n                <article class="tile is-child notification is-danger has-text-centered" style="padding:0.5rem 0.5rem 0.5rem 0.5rem">\r\n                    <div class="content" *ngIf="!cargandoPresupuestos">\r\n                        <span *ngIf="(totalMontoComprometidoNoCauses + presupuesto.no_causes_disponible - pedido.totalMontoNoCauses) < 0" class="icon is-large pull-right"><i class="fa fa-warning"></i></span>\r\n                        <p class="subtitle" style="font-weight:bold;">\r\n                            <small>\r\n                                Disponible No Causes:<br>  $ {{ totalMontoComprometidoNoCauses + (presupuesto.no_causes_disponible - pedido.totalMontoNoCauses.toFixed(2)) | number: \'1.2-2\' }}\r\n                            </small>\r\n                        </p>\r\n                    </div>\r\n                    <div class="content" *ngIf="cargandoPresupuestos">\r\n                        <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span>\r\n                    </div>\r\n                </article>\r\n            </div>\r\n        </div>\r\n        <div class="tile is-child" >\r\n          <div class="contenedor-pedido" >\r\n            <div class="top-bar" [ngClass]="{\'is-primary\':!pedido.filtro.activo,\'is-dark\': pedido.filtro.activo }">\r\n                <span *ngIf="!pedido.filtro.activo">\r\n                    <small>\r\n                        Mes: <strong style="color:white;">{{ meses[mes] }} </strong>\r\n                        Claves: <strong style="color:white;">{{ pedido.lista.length | number }} </strong>\r\n                        Insumos: <strong style="color:white;">{{pedido.totalInsumos | number}} </strong>\r\n                        Total: <strong style="color:white;">$ {{ pedido.totalMonto | number: \'1.2-2\' }}</strong>\r\n                    </small>\r\n                </span>\r\n                <span *ngIf="pedido.filtro.activo">\r\n                    <span class="icon"><i class="fa fa-search"></i></span> Resultados: {{ pedido.filtro.lista.length }}\r\n                </span>\r\n                <a class="button is-primary  is-pulled-right" *ngIf="almacenSeleccionado.id" [ngClass]="{ \'is-inverted\': pedido.filtro.activo }" style="margin-top:-0.25em;" title="Ctrl + espacio" (click)="toggleModalInsumos(); ">\r\n                    <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar Clave</span>\r\n                </a>\r\n            </div> \r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="guardando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-spinner fa-spin"></i></span> &nbsp;<span>Guardando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table is-unselectable" *ngIf="!cargando && !guardando" style="font-size: 0.8em;">\r\n                <thead>\r\n                    <tr  >\r\n                        <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                        <th class="is-hidden-mobile" style="width:118px;">\r\n                        <p class="control is-expanded" >\r\n                            <input type="hidden" #searchBoxClavePrevia >\r\n                            <!--input class="input is-small" type="text" placeholder="Clave" #searchBoxClave id="search-box-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxClave, searchBoxClavePrevia,[{ input: searchBoxDescripcion, campos: [\'generico\',\'informacion.concentracion\',\'informacion.presentacion\']}, { input: searchBoxClave, campos: [\'clave\']}])"-->\r\n                            <input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave" (keyup)="buscar($event,searchBoxClave,searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>\r\n                        <!--th class="is-hidden-mobile">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionPrevia >\r\n                            <input class="input is-small" type="text" placeholder="Genérico" #searchBoxDescripcion id="search-box-descripcion-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcion,searchBoxDescripcionPrevia,[{ input: searchBoxDescripcion, campos: [\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}, { input: searchBoxClave, campos: [\'clave\']}])">\r\n                        </p>\r\n                        </th--> \r\n                        <th class="is-hidden-tablet">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                            <!--input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])"-->\r\n                            <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>  \r\n                        <th style="vertical-align: middle;" class="is-hidden-mobile " >Descripcion</th>                  \r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;" *ngIf="esPedidoJurisdiccional"><abbr title="Unidades médicas asignadas">Clues</abbr></th>\r\n                        <th  style="width:21px !important;"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                    <tr   *ngFor="let item of pedido.paginacion.lista; let i = index;">\r\n                        <td class="has-text-centered">{{ item.lote }}</td>\r\n                        <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                        \r\n                        <td>\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n                            <div style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            </div>\r\n                        </td>\r\n\r\n                        <!--td >\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <b>{{ item.generico_nombre }}</b> <br  class="is-hidden-mobile"><small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                            \r\n                            <div class="is-hidden-desktop" *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                            <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                            <small><i>{{ item.informacion.contenido }} </i></small>\r\n                            </div>\r\n                            <div class="is-hidden-desktop" *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div class="is-hidden-desktop" style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            \r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            \r\n                            </div>\r\n                        </td> \r\n\r\n                        <td class="is-hidden-mobile is-hidden-tablet-only">\r\n                            <div *ngIf="(item.tipo == r\'ME\' && item.informacion)" style="line-height:1em;">\r\n                            <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                            <small><i>{{ item.informacion.contenido }} </i></small>\r\n                            </div>\r\n                            <div  *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            \r\n                            </div>\r\n                        </td-->\r\n\r\n\r\n                        <td style="width:100px !important;text-align:center;" *ngIf="esPedidoJurisdiccional">\r\n                            <a (click)="toggleModalListaClues(item); ">{{ item.cantidad }}</a>\r\n                        </td>\r\n\r\n\r\n                        <td style="width:100px !important;" *ngIf="!esPedidoJurisdiccional">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-small has-text-centered" [ngClass]="{\'is-danger\':erroresEnInsumos.lista[item.clave]}"  type="number" placeholder="Cant" (keyup)="modificarItem(item)" min="{{(item.cantidad_recibida)?item.cantidad_recibida:0}}" (change)="modificarItem(item)" [(ngModel)]="item.cantidad">\r\n                                <small *ngIf="item.cantidad_recibida">Recibido: <strong>{{item.cantidad_recibida}}</strong></small>\r\n                            </p>\r\n                        </td>\r\n                        \r\n                        <td style="width:78px !important;">\r\n                            <b>\r\n                                <abbr>${{item.monto | number:\'1.2-2\'}}</abbr>\r\n                            </b>\r\n                        </td>\r\n\r\n                        <td style="width:100px !important; text-align:center" *ngIf="esPedidoJurisdiccional">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.lista_clues.length }}</a>\r\n                        </td>\r\n                        <td style="width:70px !important;" *ngIf="esPedidoJurisdiccional">\r\n                            <a (click)="toggleModalListaClues(item); "><span class="icon"><i class="fa fa-list"></i></span></a>\r\n                            <a *ngIf="!item.cantidad_recibida" (click)="eliminarInsumo(item,i,false)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                       \r\n                        <td style="width:21px !important;"  *ngIf="!esPedidoJurisdiccional">\r\n                            <a *ngIf="!item.cantidad_recibida" (click)="eliminarInsumo(item,i)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                    </tr>      \r\n                </tbody>\r\n                <tbody *ngIf="pedido.filtro.activo">\r\n                    <tr  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;">\r\n                        <td class="has-text-centered">{{ item.lote }}</td>\r\n                        <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                        \r\n                        <td>\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n                            <div style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            </div>\r\n                        </td>\r\n\r\n                        <!--td >\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <b>{{ item.generico_nombre }}</b> <br  class="is-hidden-mobile"><small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                            \r\n                            <div class="is-hidden-desktop" *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                            <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                            <small><i>{{ item.informacion.contenido }} </i></small>\r\n                            </div>\r\n                            <div class="is-hidden-desktop" *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div class="is-hidden-desktop" style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            \r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            \r\n                            </div>\r\n                        </td> \r\n\r\n                        <td class="is-hidden-mobile is-hidden-tablet-only">\r\n                            <div *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                            <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                            <small><i>{{ item.informacion.contenido }} </i></small>\r\n                            </div>\r\n                            <div  *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            \r\n                            </div>\r\n                        </td--> \r\n\r\n                        <td style="width:100px !important;">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-small has-text-centered" [ngClass]="{\'is-danger\':erroresEnInsumos.lista[item.clave]}"  type="number" placeholder="Cant" (keyup)="modificarItem(item)" min="{{(item.cantidad_recibida)?item.cantidad_recibida:0}}" (change)="modificarItem(item)" [(ngModel)]="item.cantidad">\r\n                                <small *ngIf="item.cantidad_recibida">Recibido: <strong>{{item.cantidad_recibida}}</strong></small>\r\n                            </p>\r\n                        </td>\r\n\r\n                        <td style="width:78px !important;">\r\n                            <b>\r\n                                <abbr>${{item.monto | number:\'1.2-2\'}}</abbr>\r\n                            </b>\r\n                        </td> \r\n\r\n                        <td style="width:100px !important; text-align:center" *ngIf="esPedidoJurisdiccional">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.lista_clues.length }}</a>\r\n                        </td>\r\n\r\n                        <td style="width:70px !important;" *ngIf="esPedidoJurisdiccional">\r\n                            <a (click)="toggleModalListaClues(item); "><span class="icon"><i class="fa fa-list"></i></span></a>\r\n                            <a (click)="eliminarInsumo(item,i,true)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                        <td style="width:21px !important;" *ngIf="!esPedidoJurisdiccional">\r\n                            <a *ngIf="!item.cantidad_recibida" (click)="eliminarInsumo(item,i)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>              \r\n            </table>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.lista.length" \r\n                    [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.paginacion.indice"\r\n                    (onSiguiente)="pedido.paginaSiguiente()" \r\n                    (onAnterior)="pedido.paginaAnterior()" \r\n                    (onListar)="pedido.listar($event)" \r\n                    *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.filtro.lista.length" \r\n                    [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                    (onSiguiente)="pedido.filtro.paginaSiguiente()" \r\n                    (onAnterior)="pedido.filtro.paginaAnterior()" \r\n                    (onListar)="pedido.filtro.listar($event)" \r\n                    *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n            \r\n            <br>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<buscar-insumos \r\n    *ngIf="mostrarModalInsumos" \r\n    (onCerrar)="mostrarModalInsumos = false" \r\n    (onEnviar)="agregarItem($event)" \r\n    [listaAgregados]="listaClaveAgregadas" \r\n    [listaAgregadosConClues]="listaClaveAgregadas" \r\n    [conPrecios]="true"\r\n    [conClues]="esPedidoJurisdiccional"></buscar-insumos>\r\n    <pedidos-lista-clues *ngIf="esPedidoJurisdiccional && mostrarModalListaClues" [insumo]="loteSeleccionado" [listaClaveAgregadas]="listaClaveAgregadas" (onCerrar)="mostrarModalListaClues = false"></pedidos-lista-clues>'},co2H:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("QGuK"),s=a("HfqJ"),o=a("qbyw");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=[{path:"configuracion/almacenes",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"editar/:id",component:s.a}],canActivate:[o.a]}],d=function(){function e(){}return e}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},d1I3:function(e,t){e.exports='<formulario #ctrl URL="mis-almacenes" titulo="Almacenes / Configuración" [dato]="dato"></formulario>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <a class="button  is-primary" style="position:absolute; top:10em; right:3em;" (click)="ctrl.cargarDatos(); "><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                            {{ctrl.moduloTitulo}} almacen\r\n                        </h1>\r\n\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section">\r\n                <!-- formulario -->\r\n                <form name="dato" novalidate [formGroup]="ctrl.dato" (ngSubmit)="ctrl.enviar()">\r\n                    <div class="tabs is-boxed">\r\n                        <ul>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 1}">\r\n                                <a (click)="tab=1">\r\n                                    <span class="icon is-small"><i class="fa fa-file"></i></span>\r\n                                    <span>Datos del almacén</span>\r\n                                </a>\r\n                            </li>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 2}">\r\n                                <a (click)="tab=2">\r\n                                    <span class="icon is-small"><i class="fa fa-home"></i></span>\r\n                                    <span>Tipos de movimientos</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 1}">\r\n\r\n                        <div class="field">\r\n                            <label class="label">ID:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'id\').hasError(\'required\') && ctrl.dato.get(\'id\').touched}"\r\n                                    placeholder="id" formControlName="id" [readonly]="tieneid">\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'id\').hasError(\'required\') && ctrl.dato.get(\'id\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'id\').hasError(\'required\') && ctrl.dato.get(\'id\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Nombre:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched}"\r\n                                    placeholder="nombre" formControlName="nombre">\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Nivel de almacén:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <select class="select" formControlName="nivel_almacen" name="nivel_almacen"  [ngClass]="{\'is-warning\': nivel_almacen?.length ==0 }">\r\n                                    <option *ngFor="let item of niveles_almacen" value="{{item.id}}" >{{ item.nombre }}</option>\r\n                                </select>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'nivel_almacen\').hasError(\'required\') && ctrl.dato.get(\'nivel_almacen\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'nivel_almacen\').hasError(\'required\') && ctrl.dato.get(\'nivel_almacen\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Tipo de almacén:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <select class="select" formControlName="tipo_almacen" name="tipo_almacen" [ngClass]="{\'is-warning\': tipo_almacen?.length ==0 }">\r\n                                    <option *ngFor="let item of tipos_almacen" value="{{item.id}}" >{{ item.nombre }}</option>\r\n                                </select>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'tipo_almacen\').hasError(\'required\') && ctrl.dato.get(\'tipo_almacen\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'tipo_almacen\').hasError(\'required\') && ctrl.dato.get(\'tipo_almacen\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n\r\n                        <div class="field">\r\n                            <label class="label" id="catalogos" (click)="ctrl.cargarCatalogo(\'proveedores\', \'proveedor\'); ctrl.cargarCatalogo(\'tipos_movimientos\', \'tipo-movimiento\'); ">Proveedor:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <select class="select" name="proveedor_id" formControlName="proveedor_id" [ngClass]="{\'is-warning\': proveedor_id?.length ==0 }">\r\n                                    <option *ngFor="let item of ctrl.proveedores" value="{{item.id}}" >{{ item.nombre }}</option>\r\n                                </select>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <br>\r\n                        <div class="control is-grouped">\r\n                            <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                <input type="checkbox" id="subrogado" class="styled" [checked]="ctrl.dato.get(\'subrogado\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'subrogado\').patchValue(ctrl.dato.get(\'subrogado\').value == \'1\' ? \'0\' : \'1\')">\r\n                                <label for="subrogado">  Es Subrogado?\r\n                                </label>\r\n                            </div>\r\n\r\n                            <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                <input type="checkbox" id="unidosis" class="styled" [checked]="ctrl.dato.get(\'unidosis\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'unidosis\').patchValue(ctrl.dato.get(\'unidosis\').value == \'1\' ? \'0\' : \'1\')">\r\n                                <label for="unidosis">   Maneja unidosis?\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 2}">\r\n                        <!--\r\n                        <div formArrayName="almacen_tipos_movimientos">\r\n                            <div *ngFor="let item of ctrl.dato.controls.almacen_tipos_movimientos.controls; let i=index" class="column is-4" style="float:left">\r\n                                <nav class="panel" [formGroupName]="i">\r\n                                    <div class="panel-heading">\r\n                                        Tipo de movimiento {{i + 1}}\r\n                                        <a style="float:right" class="is-danger" (click)="ctrl.quitar_form_array(ctrl.dato.controls.almacen_tipos_movimientos, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                    </div>\r\n                                    <label class="panel-block">                                                  \r\n                                        <select class="select" name="tipo_movimiento_id" formControlName="tipo_movimiento_id" [ngClass]="{\'is-warning\': tipo_movimiento_id?.length ==0 }">\r\n                                            <option *ngFor="let val of ctrl.tipos_movimientos" value="{{val.id}}" >{{ val.nombre }}</option>\r\n                                        </select>\r\n                                        <span class="help is-danger" *ngIf="!ctrl.dato.controls.almacen_tipos_movimientos.controls[i].controls.tipo_movimiento_id.valid">Este campo es requerido.</span>                                            \r\n                                    </label>\r\n                                </nav>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="block">\r\n                            <a class="button is-primary is-outlined is-fullwidth" (click)="ctrl.agregar_form_array(ctrl.dato.controls.almacen_tipos_movimientos.controls, form_almacen_tipos_movimientos)">\r\n                                <span class="icon">\r\n                                    <i class="fa fa-plus"> </i> \r\n                                </span> \r\n                                &nbsp; Agregar\r\n                            </a>\r\n                        </div>\r\n                        -->\r\n\r\n                        <div class="box" >\r\n                            <article class="media">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <div class="column is-5" style="float:left">\r\n                                            <nav class="panel">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="Movimientos" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.izquierda"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'izquierda\', ctrl.tipos_movimientos)">\r\n                                                            <label for="Movimientos">\r\n                                                            Movimientos disponibles\r\n                                                        </label>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let val of ctrl.tipos_movimientos; let i=index">          \r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{val.id}}" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.izquierda.indexOf(val) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'izquierda\', ctrl.tipos_movimientos, val)">\r\n                                                            <label for="{{val.id}}">\r\n                                                                {{val.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                        <div class="column is-2" style="float:left" >\r\n                                            \r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.izquierda.length > 0}" \r\n                                                [disabled]="ctrl.izquierda.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'izquierda\', ctrl.dato.controls.almacen_tipos_movimientos.controls, ctrl.tipos_movimientos, true)">></button>\r\n                                            </p>\r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.derecha.length > 0}" \r\n                                                [disabled]="ctrl.derecha.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'derecha\', ctrl.tipos_movimientos, ctrl.dato.controls.almacen_tipos_movimientos.controls, false)"><</button>\r\n                                            </p>\r\n                                            \r\n                                        </div>                        \r\n                                        <div class="column is-5" style="float:left" >\r\n                                            <nav class="panel" formGroupName="almacen_tipos_movimientos">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="MisMovimientos" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.derecha"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'derecha\', ctrl.dato.controls.almacen_tipos_movimientos.controls)">\r\n                                                            <label for="MisMovimientos">\r\n                                                            Mis movimientos\r\n                                                        </label>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let item of ctrl.dato.controls.almacen_tipos_movimientos.controls; let i2=index">          \r\n                                                    <div class="field" [formGroupName]="i2">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{item.value.id}}" class="styled" type="checkbox"\r\n                                                            [checked]="ctrl.derecha.indexOf(item) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'derecha\', ctrl.dato.controls.almacen_tipos_movimientos.controls, item)">\r\n                                                            <label for="{{item.value.id}}">\r\n                                                                {{item.value.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n                    <a (click)="ctrl.initMover(ctrl.dato.controls.almacen_tipos_movimientos.controls, ctrl.tipos_movimientos); " id="initMover"></a>\r\n                    <br><br>\r\n                    <div class="control is-grouped" style="float:left; padding:10px;">\r\n                        <p class="control">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                        </p>\r\n                        <p class="control" *ngIf="ctrl.id">\r\n                            <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </form>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},d5JH:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("52hV"),s=a("nQIc");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t,a){var n=this;this.router=e,this.authService=t,this.bloquearPantallaService=a,this.usuario={},this.credenciales={},this.loading=!1,this.mensaje="",this.mostrarMensaje=!1,this.bloquearPantallaSuscription=a.pantallaBloqueada$.subscribe(function(e){e&&(localStorage.removeItem("token"),n.cargarCredenciales(),n.mostrar=!0)})}return e.prototype.ngOnInit=function(){null!=localStorage.getItem("bloquear_pantalla")&&(this.cargarCredenciales(),this.mostrar=!0)},e.prototype.cargarCredenciales=function(){this.usuario=JSON.parse(localStorage.getItem("usuario")),null!=this.usuario&&null!=this.usuario.id&&(this.credenciales.id=this.usuario.id)},e.prototype.login=function(){var e=this;this.loading=!0,this.mostrarMensaje=!1,this.authService.login(this.credenciales.id,this.credenciales.password).subscribe(function(t){e.loading=!1,e.mostrar=!1,e.credenciales.password="",e.bloquearPantallaService.desbloquearPantalla()},function(t){e.loading=!1,e.mostrarMensaje=!0,e.mensaje="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.";try{t.json();401==t.status&&(e.mensaje="Lo sentimos el usuario y/o contraseña no son válidos."),0==t.status&&(e.mensaje="Conexión rechazada."),500==t.status&&(e.mensaje="500 (Error interno del servidor)")}catch(a){500==t.status&&(e.mensaje="500 (Error interno del servidor)")}})},e.prototype.logout=function(){this.mostrar=!1,localStorage.removeItem("bloquear_pantalla"),this.authService.logout()},e}();l=o([a.i(n.Component)({selector:"app-bloquear-pantalla",template:a("6hLl"),styles:[a("0Kqi")]}),c("design:paramtypes",["function"==typeof(d=void 0!==i.a&&i.a)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object,"function"==typeof(p=void 0!==s.a&&s.a)&&p||Object])],l);var d,u,p},dCWM:function(e,t){e.exports='<menu-farmacia [modulo]="\'Pedidos\'" [icono]="\'assets/icono-pedidos.svg\'" [url]="\'/almacen/pedidos/por-surtir\'"></menu-farmacia>\r\n\r\n<div class="is-fullwidth has-text-centered" style="padding-top:70px;" *ngIf="cargando">\r\n  <br>\r\n  <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n  <br>\r\n  <br>\r\n</div>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile is-parent is-12 ">\r\n      <div class="tile is-child notification is-dark">\r\n        <div class="columns">\r\n          <div class="column" >\r\n            <div style="padding:1em;">\r\n              Folio: <a style="color:#FFFFFF !important; font-weight:bold;" routerLink="{{\'/almacen/pedidos/ver/\'+id}}">{{ folio }}</a>\r\n               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Claves Recibidas: {{ lotesSurtidos.length  }}<!-- / {{ pedido.lista.length }}-->\r\n               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span *ngIf="statusRecepcion == \'BR\'"><strong style="color:#FFF;">Recepción inciada</strong></span>\r\n               <span *ngIf="statusRecepcion == \'FI\'"><strong style="color:#FFF;">Recepción concluida</strong></span>\r\n            </div>\r\n          </div>\r\n          <div class="column is-4" style="text-align:right; " *ngIf="statusRecepcion != \'FI\'">\r\n            <div style="margin:1em;">\r\n            <a *ngIf="!guardando && statusRecepcion == \'BR\'" class="button is-primary" style="width:45%; margin-right:5%;" (click)="finalizar()"> <span class="icon"><i class="fa fa-check"></i></span> <span>Concluir</span></a>\r\n            <a  class="button is-white"  style="width:45%"  [ngClass]="{ \'is-loading\': guardando }"  (click)="guardar()"> <span class="icon"><i class="fa fa-save"></i></span> <span>Guardar</span></a>\r\n            </div>\r\n          </div>\r\n        </div>       \r\n      </div>\r\n    </div>\r\n    <div class="tile">\r\n      <div class="tile is-parent ">\r\n        <div class="tile is-child notification is-white" >\r\n          <div class="contenedor-tabla" >          \r\n            \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em; ">\r\n              <thead>\r\n                  <tr  [ngClass]="{ \'filtro\': pedido.filtro.activo}">\r\n                    <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                    <th>\r\n                      <p class="control is-expanded">\r\n                        <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                        <!--input class="input is-small" type="text" placeholder="Clave o Descripción" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])"-->\r\n                        <input class="input is-small" type="text" placeholder="Clave o Descripción" #searchBoxDescripcionClave id="search-box-descripcion-clave" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                      </p>\r\n                    </th>  \r\n                    \r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cantidad</abbr></th>\r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Surtido">Lotes</abbr></th>\r\n                    <th  style="width:21px !important; text-align: center; vertical-align: middle;">Surtido</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                <tr class="item" *ngFor="let item of pedido.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                      <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    <!--b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br-->\r\n                    <div class="item-detalle">\r\n                      <!--div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div-->\r\n                      \r\n\r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }} / {{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ (item.listaStockAsignado)?item.listaStockAsignado.length:0 }}</th>\r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>      \r\n              </tbody>\r\n              <tbody *ngIf="pedido.filtro.activo">\r\n                <tr class="item"  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <!--b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br-->\r\n                    <div class="item-detalle">\r\n                      <!--div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div-->\r\n\r\n                      <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }} / {{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ (item.listaStockAsignado)?item.listaStockAsignado.length:0 }}</th>\r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>   \r\n              </tbody>              \r\n            </table>\r\n            <paginacion style=" width:100%; height:auto; bottom:0; left:0px; background:#FFF;"\r\n                [total]="pedido.lista.length" \r\n                [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.paginacion.indice"\r\n                (onSiguiente)="pedido.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.paginaAnterior(); limpiarStock();" \r\n                (onListar)="pedido.listar($event);limpiarStock();" \r\n                *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n\r\n            <paginacion \r\n                [total]="pedido.filtro.lista.length" \r\n                [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                (onSiguiente)="pedido.filtro.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.filtro.paginaAnterior();  limpiarStock();" \r\n                (onListar)="pedido.filtro.listar($event); limpiarStock();" \r\n                *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="tile is-parent is-vertical ">\r\n        <div *ngIf="(capturarStock && (itemSeleccionado.cantidad_recibida < itemSeleccionado.cantidad))" class="tile is-child notification">\r\n          <div class="control is-grouped">\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <label class="label">Código de Barras</label>\r\n              <input class="input" autofocus type="text" placeholder="Código de Barras" [(ngModel)]="formStock.codigo_barras">\r\n            </p>\r\n            <!--p class="control has-icon has-icon-right">\r\n              <label class="label">Marca</label>\r\n              <span class="select is-expanded">\r\n                <select [(ngModel)]="formStock.marca">\r\n                  <option *ngFor="let item of marcas" [ngValue]="item">{{ item.nombre }}</option>\r\n                </select>\r\n              </span>\r\n            </p-->\r\n          </div>\r\n\r\n          <div class="control is-grouped">\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <label class="label">Lote</label>\r\n              <input class="input" autofocus type="text" placeholder="Lote" [(ngModel)]="formStock.lote">\r\n              <span *ngIf="erroresFormularioStock.lote.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.lote.error" class="help is-danger">{{erroresFormularioStock.lote.texto}}</span>\r\n            </p>\r\n            <p class="control is-expanded has-icon has-icon-right">\r\n              <label class="label">Caducidad (aaaa-mm-dd)</label>\r\n              <input class="input" type="text" placeholder="aaaa-mm-dd" [(ngModel)]="formStock.fecha_caducidad">\r\n              <span *ngIf="erroresFormularioStock.fecha_caducidad.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.fecha_caducidad.error" class="help is-danger">{{erroresFormularioStock.fecha_caducidad.texto}}</span>\r\n            </p>\r\n            <p class="control is-expanded has-icon has-icon-right">\r\n              <label class="label">Cantidad</label>\r\n              <input class="input" type="number" placeholder="Cantidad" [(ngModel)]="formStock.cantidad">\r\n              <span *ngIf="erroresFormularioStock.cantidad.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.cantidad.error" class="help is-danger">{{erroresFormularioStock.cantidad.texto}}</span>\r\n            </p>\r\n          </div>\r\n\r\n          <div class="control is-grouped is-pulled-right " >\r\n            <p class="control is-expanded">\r\n            </p>\r\n            <p class="control">\r\n                <button class="button is-medium is-primary " (click)="asignarStock()">\r\n                  <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar</span>\r\n                </button>\r\n            </p>\r\n            <p class="control">\r\n                <button class="button is-medium "  (click)="cancelarCapturaStock()">\r\n                  <span>Cancelar</span>\r\n                </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class="tile is-child  notification is-white">\r\n          <div class="contenedor-tabla">\r\n            <table class="table" *ngIf="!cargando && itemSeleccionado != null" style="font-size: 0.8em;" >\r\n              <thead>\r\n                  <tr style="background: #00d1b2;">\r\n                    <th style="color:#FFF !important;">Código</th>\r\n                    <!--th style="color:#FFF !important;">Marca</th-->\r\n                    <th style="color:#FFF !important;">Lote</th>\r\n                    <th style="color:#FFF !important;">Caducidad</th>\r\n                    <th style="color:#FFF !important;"><abbr title="Cantidad">Cant.</abbr></th>  \r\n                    <th></th>              \r\n                  </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th colspan="4" style="text-align:right">\r\n                    <span *ngIf="itemSeleccionado.totalStockAsignado == itemSeleccionado.cantidad"><span class="icon is-small" ><i class="fa fa-check-circle"></i></span> <span>Completo &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> Total </span>\r\n                  </th>\r\n                  <td style="text-align:center">{{ itemSeleccionado.totalStockAsignado || 0 }} / {{ itemSeleccionado.cantidad }}</td>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                  <tr  class="is-unselectable" *ngFor="let item of itemSeleccionado.listaStockAsignado">\r\n                    <td>{{ item.codigo_barras}}</td>\r\n                    <!--td>{{ item.marca.nombre }}</td-->\r\n                    <td>{{ item.lote }}</td>\r\n                    <td>{{ item.fecha_caducidad | date:\'dd/MM/y\' }}</td>\r\n                    <td style="width:150px !important;">\r\n                        <p class="control is-expanded">\r\n                        <input class="input is-small has-text-centered"  type="number" min="1" max="{{item.existencia}}" placeholder="Cant" [(ngModel)]="item.cantidad" (change)="validarItemStock(item, true)" (keyup)="validarItemStock(item)">\r\n                        </p>\r\n                    </td> \r\n                    <td style="vertical-align: middle;" class="has-text-centered"><a  class="is-danger" (click)="eliminarStock(item)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>                    \r\n                  </tr>\r\n              </tbody>  \r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n  </div>\r\n</div>\r\n  \r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogo()"></div>\r\n  <div class="modal-card" style="width:60%; height: 90%;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-check"></i></span> Finalizar Recepción \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogo()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <form name="form" novalidate [formGroup]="formularioRecepcion">\r\n          <label class="label">Nombre de quien entrega:</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" [ngClass]="{\'is-danger\': formularioTieneError(\'entrega\',\'required\')}" formControlName="entrega"/>\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'entrega\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'entrega\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n\r\n          <label class="label">Nombre de quien recibe:</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" [ngClass]="{\'is-danger\': formularioTieneError(\'recibe\',\'required\')}" formControlName="recibe"/>\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'recibe\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'recibe\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n\r\n          <label class="label">Fecha (aaaa-mm-dd):</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" placeholder="aaaa-mm-dd" [ngClass]="{\'is-danger\': formularioTieneError(\'fecha_movimiento\',\'required\')}" formControlName="fecha_movimiento" />\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'fecha_movimiento\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'fecha_movimiento\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n          \r\n          <div class="control">\r\n            <textarea name="observaciones" class="textarea" placeholder="Observaciones"  formControlName="observaciones"></textarea>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n      <div class="columns">\r\n          <div class="column" ></div>\r\n          <div class="column is-4" style="text-align:right; " *ngIf="statusRecepcion != \'FI\'">\r\n            <div style="margin:1em;">\r\n            <a  class="button is-primary" style="width:45%; margin-right:5%;" [ngClass]="{ \'is-loading\': guardando }"   (click)="guardar(true)"> <span class="icon"><i class="fa fa-check"></i></span> <span>Concluir</span></a>\r\n            </div>\r\n          </div>\r\n        </div> \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n'},dDZ5:function(e,t){e.exports='<menu-catalogo></menu-catalogo>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectos | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulos | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},dE8T:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return r});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=function(){function e(){}return e.prototype.transform=function(e,t){if(e){var a=e.reduce(function(e,a){return e[a[t]]?e[a[t]].push(a):e[a[t]]=[a],e},{});return Object.keys(a).map(function(e){return{key:e,value:a[e]}})}return[]},e}();r=i([a.i(n.Pipe)({name:"groupBy"})],r)},dLuj:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),e.exports=e.exports.toString()},dfbv:function(e,t){e.exports='<administrador-proveedores-menu></administrador-proveedores-menu>\r\n\r\n<div class="contenedor" style="height:100%; padding:0.75rem; padding-top:0rem;">\r\n    <!--div class="column" style="position:relative; overflow-x:hidden;"-->\r\n        <div style="height:60px;"></div>\r\n        <div style="background: #FFF; overflow:hidden; border-radius:1em; width:100%;margin-bottom:1em;">\r\n            <table class="table" style="min-width:100%; font-size:0.8em; margin-bottom:0.2em;margin-top:0.2em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Presupuesto</th>\r\n                        <th style="text-align:center">Causes</th>\r\n                        <th style="text-align:center">No causes</th>\r\n                        <th style="text-align:center">Material de curación</th>\r\n                        <th style="text-align:center">Total</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngIf="cargandoPresupuestos">\r\n                        <th colspan="5" style="text-align:center"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando Presupuesto...</th>\r\n                    </tr>\r\n                    <tr *ngIf="!cargandoPresupuestos">\r\n                        <td>Comprometido</td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.material_curacion_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.total_comprometido | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr *ngIf="!cargandoPresupuestos">\r\n                        <td>Devengado</td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.material_curacion_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.total_devengado | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr *ngIf="!cargandoPresupuestos">\r\n                        <td>Total Pedido</td>\r\n                        <td style="text-align:center"><span class="tag is-info">$ {{ presupuesto.total_causes | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-info">$ {{ presupuesto.total_no_causes | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-info">$ {{ presupuesto.total_material_curacion | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-info">$ {{ presupuesto.total_pedido | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!--table class="table" *ngIf="!cargando" style="min-width:100%; font-size:0.8em; margin-bottom:0.2em;margin-top:0.2em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Presupuesto</th>\r\n                        <th style="text-align:center">Autorizado</th>\r\n                        <th style="text-align:center">Comprometido</th>\r\n                        <th style="text-align:center">Devengado</th>\r\n                        <th style="text-align:center">Disponible</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <th>Causes</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.causes_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.causes_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>No causes</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.no_causes_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.no_causes_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Material de curación</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.material_curacion_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.material_curacion_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.material_curacion_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.material_curacion_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Total</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.total_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.total_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.total_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.total_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table-->\r\n         </div>\r\n            \r\n        <section class="hero is-primary"  style="  border-radius:  1em  1em 0  0;" >\r\n            \r\n            <div class="hero-body" style="position:relative;">                    \r\n                \r\n                <a class="button  is-primary" *ngIf="!cargando" style="position:absolute; top:1em; right:1em;" (click)="exportar()"><span class="icon "><i class="fa fa-file-excel-o"></i></span> <span>Exportar</span></a>\r\n                <div class="container is-fluid">\r\n                    \r\n                    <h1 class="title">\r\n                        <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Pedidos\r\n                    </h1>\r\n                    \r\n                    <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar por CLUES ó Folio ó Nombre del pedido" [(ngModel)] = "q" (keyup)="filtrarQuery($event)">\r\n                        </p>\r\n                        <!--div class="control">\r\n                            <button class="button is-primary" (click)="sin_pedidos = !sin_pedidos"><span class="icon"><i class="fa" [ngClass]="{\'fa-check-square-o\': sin_pedidos, \'fa-square-o\':!sin_pedidos }"></i></span> &nbsp;&nbsp;Sin pedidos</button>\r\n                        </div-->\r\n                    </div>\r\n                    <div class="columns">\r\n                        <div class="column">\r\n                            <label>Status:</label>\r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                <select #statusSelect (change)="cambioSeleccionStatus(statusSelect.value)">\r\n                                    <option value="-1">Todos</option>\r\n                                    <option *ngFor="let item of status" value="{{item.id}}">{{ item.descripcion }}</option>\r\n                                </select>\r\n                                </span>\r\n                            </p>                   \r\n                        </div>\r\n                        <div class="column">\r\n                            <label>Jurisdicciones:</label>\r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                <select #js id="jurisdicciones"  (change)="cambioSeleccionJurisdiccion(js.value)">\r\n                                    <option value="-1">Todas</option>\r\n                                    <option *ngFor="let item of jurisdicciones" value="{{item.id}}">JS {{ item.numero }} - {{ item.nombre }}</option>\r\n                                </select>\r\n                                </span>\r\n                            </p>\r\n                        </div>\r\n                        <div class="column">\r\n                            <label for="mes">Mes:</label>\r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                    <select [(ngModel)]="mes" name="mes">\r\n                                        <option *ngFor="let item of meses" [value]="item.id">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                </span>\r\n                            </p>\r\n                        </div>\r\n                        <div class="column">\r\n                            <label for="mes">Año:</label>\r\n                            <p class="control is-expanded">\r\n                                <input class="input" type="number" placeholder="2017" [(ngModel)] = "anio" (keyup)="filtrarQuery($event)">\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div *ngIf="jurisdiccionesSeleccionadas.length>0 || statusSeleccionados.length>0">\r\n                        <h1 class="title is-6">Filtro aplicado:</h1>\r\n                        <span class="tag is-white is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of jurisdiccionesSeleccionadas;  let i = index">JS {{ item.numero }}<button class="delete is-small" (click)="quitarJurisdiccion(i)"></button></span>\r\n                        <span class="tag is-warning is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of statusSeleccionados;  let i = index">{{ item.descripcion }}<button class="delete is-small" (click)="quitarStatus(i)"></button></span>\r\n                    </div>\r\n                    <nav class="level">\r\n                        <div class="level-left">\r\n                            <h1 class="title is-5">Resultados: <b>{{ total }}</b></h1>\r\n                        </div>\r\n                        <div class="level-right">\r\n                            <div class="block">\r\n                            <button class="button " *ngIf="jurisdiccionesSeleccionadas.length>0 || statusSeleccionados.length>0 || q != \'\' " (click)="q = \'\'; jurisdiccionesSeleccionadas = []; proveedoresSeleccionados = []; statusSeleccionados =[]; js.value = -1; statusSelect.value = -1;"><span class="icon"><i class="fa fa-times"></i></span> <span>Limpiar filtro</span></button>\r\n                            <button class="button is-primary is-inverted" (click)="listar(1)"><span class="icon"><i class="fa fa-filter"></i></span> <span>Filtrar</span></button>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n                \r\n                    \r\n                </div>\r\n            </div>\r\n        </section>\r\n        \r\n        <div  style="background: #FFF; overflow-x:auto; ">\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <table class="table" *ngIf="!cargando" style="min-width:100%; font-size:0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan="12">\r\n                            Status: \r\n                            <span class="icon sin-surtir"><i class="fa fa-circle"></i></span> Sin Surtir | \r\n                            <span class="icon surtiendo"><i class="fa fa-minus-circle"></i></span> Surtiendo | \r\n                            <span class="icon surtido"><i class="fa fa-check-circle"></i></span> Surtido | \r\n                            <span class="icon farmacia"><i class="fa fa-cubes"></i></span> Farmacia |\r\n                            <span class="icon expirado"><i class="fa fa-exclamation-circle"></i></span> Expirado |\r\n                            <span class="icon cancelado"><i class="fa fa-times-circle"></i></span> Cancelado\r\n                        </th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th></th>\r\n                        <th style="text-align:center;">Fecha</th>\r\n                        <th colspan="2" style="text-align:center;">Total</th>\r\n                        <th class="causes" colspan="2" style="text-align:center;">Causes</th>\r\n                        <th class="no-causes" colspan="2" style="text-align:center;">No causes</th>\r\n                        <th class="material-curacion" colspan="2" style="text-align:center;">Mat. de curación</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th style="text-align:center;">Status</th>\r\n                        <th>Folio/Nombre del Pedido/Unidad Medica</th>\r\n                        <!--th>Nombre</th>\r\n                        <th>Unidad médica</th-->\r\n                        <th style="text-align:center;">Pedido [Expiración]</th>\r\n                        \r\n                        <th style="text-align:center;">Claves</th>\r\n                        <th style="text-align:center;">Monto</th>\r\n\r\n                        <th class="causes" style="text-align:center;">Claves</th>\r\n                        <th class="causes" style="text-align:center;">Monto</th>\r\n\r\n                        <th class="no-causes" style="text-align:center;">Claves</th>\r\n                        <th class="no-causes" style="text-align:center;">Monto</th>\r\n\r\n                        <th class="material-curacion" style="text-align:center;">Claves</th>\r\n                        <th class="material-curacion" style="text-align:center;">Monto</th>\r\n\r\n                        <th style="text-align:center;">Archivos</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lista; let i=index"> \r\n                        <td [ngClass]="{\'surtido\':item.status==\'FI\',\'expirado\':item.status==\'EX\', \'cancelado\':item.status==\'EX-CA\',\'sin-surtir\':(item.total_cantidad_recibida==0 && item.status==\'PS\'),\'surtiendo\':(item.total_cantidad_recibida>0 && item.status==\'PS\'),\'farmacia\':item.status==\'EF\'}" style="text-align:center; vertical-align: middle;"><span class="icon is-medium"><i class="fa" [ngClass]="{\'fa-check-circle\':item.status==\'FI\',\'fa-times-circle\':item.status==\'EX-CA\',\'fa-exclamation-circle\':item.status==\'EX\',\'fa-circle\':(item.total_cantidad_recibida==0 && item.status == \'PS\'),\'fa-minus-circle\':(item.total_cantidad_recibida>0 && item.status == \'PS\'),\'fa-cubes\':item.status==\'EF\'}"></i></span></td>\r\n                        <td style="vertical-align: middle;"><strong>{{ item.folio }}</strong><br>{{item.unidad_medica}}<br>{{item.descripcion}}</td>\r\n                        <!--td style="vertical-align: middle;">{{ item.descripcion }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.unidad_medica }}</td-->\r\n                        <td style="text-align:center; vertical-align: middle;" [ngClass]="{\'estatus-rojo\':(item.status != \'EF\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}">\r\n                            {{ item.fecha_concluido | date:\'y-MM-dd\' }}<br>\r\n                            <span *ngIf="item.status != \'EF\'">\r\n                                [{{ item.fecha_expiracion | date:\'y-MM-dd\' }}]<br>\r\n                            </span>\r\n                            <strong *ngIf="item.status == \'PS\' && item.expira_en_dias >= 0">\r\n                                Expira <span *ngIf="item.expira_en_dias == 0">Hoy</span><span *ngIf="item.expira_en_dias > 0">en {{item.expira_en_dias}} día(s)</span>\r\n                            </strong>\r\n                            <strong *ngIf="item.status == \'EX\' && item.expira_en_dias < 0">\r\n                                <span *ngIf="item.status != \'EX-CA\'">Expirado  hace {{item.expira_en_dias*(-1)}} día(s)</span>\r\n                            </strong>\r\n                        </td>\r\n                        \r\n                        <td style="text-align:center; vertical-align: middle; white-space: nowrap;">{{ item.total_claves_recibidas }} / {{ item.total_claves_solicitadas }} <br> <strong>({{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}} %)</strong></td>\r\n                        <td style="text-align:center; vertical-align: middle;">$ {{ item.total_monto_recibido | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} <br> <strong>({{((item.total_monto_recibido/item.total_monto_solicitado)*100) | number:\'1.0-2\'}} %)</strong></td>\r\n\r\n                        <td class="causes"  style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_causes">{{ item.total_claves_causes_recibidas }} / {{ item.total_claves_causes }} <br> <strong>({{((item.total_claves_causes_recibidas/item.total_claves_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_causes"> --- </span>\r\n                        </td>\r\n                        <td class="causes"  style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_causes*1)">${{ item.total_monto_causes_recibido  | number:\'1.2-2\'}} / ${{ item.total_monto_causes  | number:\'1.2-2\'}} <br> <strong>({{((item.total_monto_causes_recibido/item.total_monto_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_causes*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <td class="no-causes" style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_no_causes">{{ item.total_claves_no_causes_recibidas }} / {{ item.total_claves_no_causes }} <br> <strong>({{((item.total_claves_no_causes_recibidas/item.total_claves_no_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_no_causes"> --- </span>\r\n                        </td>\r\n                        <td class="no-causes" style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_no_causes*1)">${{ item.total_monto_no_causes_recibido  | number:\'1.2-2\'}} / ${{ item.total_monto_no_causes  | number:\'1.2-2\'}} <br> <strong>({{((item.total_monto_no_causes_recibido/item.total_monto_no_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_no_causes*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <td class="material-curacion" style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_material_curacion">{{ item.total_claves_material_curacion_recibidas }} / {{ item.total_claves_material_curacion }} <br> <strong>({{((item.total_claves_material_curacion_recibidas/item.total_claves_material_curacion)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_material_curacion"> --- </span>\r\n                        </td>\r\n                        <td class="material-curacion" style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_material_curacion*1)">${{ item.total_monto_material_curacion_recibido | number:\'1.2-2\' }} / ${{ item.total_monto_material_curacion | number:\'1.2-2\' }} <br> <strong>({{((item.total_monto_material_curacion_recibido/item.total_monto_material_curacion)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_material_curacion*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <td style="text-align:center; vertical-align: middle; width: 130px">\r\n                            \r\n                            <button type="button" class="button"  (click)="mostrarDialogoPedidos(item.pedido_id)" >\r\n                                <span class="icon is-small"><i class="fa fa-archive"></i></span>\r\n                            </button>\r\n                            \r\n                            <button type="button" class="button" [ngClass]="{\'descargado\':item.repositorio>0 }" (click)="mostrarDialogoArchivos(item.pedido_id, item.folio)" >\r\n                                <span class="icon is-small"><i class="fa fa-upload"></i></span><span class="tag" [ngClass]="{\'color_tag_descargas\':item.repositorio>0 }"><b>{{ item.repositorio }}</b></span>\r\n                            </button>\r\n                            <!--a (click)="imprimirExcelItem(item.pedido_id)"><span class="icon"><i class="fa fa-file-excel-o"></i></span></a> <a><span class="icon"><i class="fa fa-file-pdf-o"></i></span></a-->\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="12" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div style="background: #FFF; border-radius: 0  0 1em  1em; width:100%;">\r\n        \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina"></paginacion>\r\n        </div>\r\n    <!--/div-->\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>\r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': verDialogoPedido}">\r\n  <div class="modal-background" (click)="cerrarDialogoPedidos()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-file"></i></span> {{datosPedido.folio}} \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogoPedidos()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoDatosPedido">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando datos del pedido...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <div class="columns is-multiline" *ngIf="!cargandoDatosPedido">\r\n          <div class="column is-one-quarter" *ngFor="let tipo of tiposSubPedidos">\r\n            <div class="card">\r\n              <header class="card-header">\r\n                <p class="card-header-title">\r\n                  {{subPedidos[tipo].titulo}}\r\n                </p>\r\n              </header>\r\n              <div class="card-content">\r\n                <div class="content">\r\n                  <strong>Total claves</strong>: {{subPedidos[tipo].claves | number}} <br>\r\n                  <strong>Total unidades</strong>: {{subPedidos[tipo].cantidad | number}} <br>\r\n                  <strong>Total monto</strong>: $ {{subPedidos[tipo].monto + ((subPedidos[tipo].tiene_iva)?+subPedidos[tipo].monto*16/100:0) | number:\'1.2-2\'}}\r\n                </div>\r\n              </div>\r\n              <footer class="card-footer">\r\n                <!--a class="card-footer-item" (click)="imprimirPedido(tipo)" [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }">\r\n                  <span class="icon is-medium"><i class="fa fa-file-pdf-o"></i></span>&nbsp;<span>Descargar/Imprimir</span>\r\n                </a-->\r\n                <a class="button is-primary is-fullwidth"  [ngClass]="{ \'is-loading\': cargandoPdf[tipo], \'is-inverted\': !cargandoPdf[tipo] }" title="Imprimir Pedido" (click)="imprimirPedido(tipo)">\r\n                    <span class="icon"><i class="fa fa-file-pdf-o"></i></span> &nbsp; Descargar/Imprimir\r\n                </a>\r\n              </footer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        <p class="control" *ngIf="!cargandoDatosPedido">\r\n            <button class="button is-medium is-primary " (click)="imprimirExcelPedido()" >\r\n            <span class="icon"><i class="fa fa-file-excel-o"></i></span><span>Excel del Pedido</span>\r\n            </button>\r\n        </p>\r\n        <div class="notification is-danger is-small" *ngIf="errorEnPDF">\r\n            <button class="delete" (click)="errorEnPDF = false"></button>        \r\n            <b>Error:</b> Ocurrio un error al generar el PDF<br><br>\r\n        </div>\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': verDialogoArchivo}">\r\n  <div class="modal-background" (click)="cerrarDialogoArchivos()"></div>\r\n  <div class="modal-card" style="width:70%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-file"></i></span> {{nombre_pedido}} \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogoArchivos()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoDatosArchivo">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando repositorio...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <div class="columns" *ngIf="!cargandoDatosArchivo">\r\n          <table class="table" *ngIf="!cargandoDatosArchivo" style="min-width:100%; font-size:0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th style="text-align:center;">Fecha Subido</th>\r\n                        <th style="text-align:center;">Nombre</th>\r\n                        <th style="text-align:center;">Peso</th>                        \r\n                        <th style="text-align:center;">Usuario</th>                        \r\n                        <th style="text-align:center;">Descargas</th>                        \r\n                        <th></th>\r\n                    </tr>\r\n                    \r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lista_repositorio; let i=index"> \r\n                        <td style="text-align: center;"><strong>{{ item.created_at }}</strong></td>  \r\n                        <td style="text-align: center;"><strong>{{ item.nombre_archivo }}</strong></td>   \r\n                        <td style="text-align: center;"><strong>{{ (item.peso/1024) | number : \'1.2-2\' }} Kb ({{(item.peso/1048576) | number : \'1.2-2\' }} Mb)</strong></td>   \r\n                        <td style="text-align: center;"><strong>{{ item.usuario_id }}</strong></td>   \r\n                         \r\n                        <td style="text-align: center;"><strong>{{ item.descargas }}</strong></td>   \r\n                        <td style="text-align: center;" *ngIf="!item.deleted_at">\r\n                        <button type="button" class="button is-primary"  (click)=\'descargar(item.id)\'><i class="fa fa-download"></i></button>\r\n                        <button type="button" class="button is-danger" (click)=\'eliminar_archivo(item.id)\'><i class="fa fa-close"></i></button></td>\r\n                        <td style="text-align: center;" *ngIf="item.deleted_at">\r\n                            <div class="block">\r\n                              <span class="tag is-danger">\r\n                                {{ item.usuario_deleted_id}} {{ item.deleted_at }}\r\n                                <!--button class="delete is-small"></button-->\r\n                              </span>\r\n                            </div>\r\n                        <!--<span class="tag is-danger"><button type="button" class="delete is-small"></button>{{ item.usuario_deleted_id}} {{ item.deleted_at }}</span>\r\n                        --></td>   \r\n                    </tr>\r\n                    <tr *ngIf="lista_repositorio.length == 0">\r\n                        <td colspan="12" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tfoot>\r\n                    <tr>\r\n                        <td colspan="6" style="text-align: center;"  *ngIf="!subir_archivo">\r\n                            <progress class="progress is-success" value="{{cargando_archivo}}" max="5"></progress>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td colspan="6"  style="text-align: center;" *ngIf="subir_archivo"> \r\n                            Subir Archivo <input type="file" (change)="fileChanged($event)" name="file" accept="application/pdf"><br><br>\r\n                            <button type="button" class="button is-primary" name="enviar" (click)="upload()">Subir Archivo</button>\r\n                        </td>\r\n\r\n                    </tr>\r\n                </tfoot>\r\n            </table>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n\r\n'},dnCL:function(e,t){e.exports='<aside class="menu" style="padding: 1em;">\r\n    <!--  <p class="menu-label">\r\n        Pedidos\r\n    </p>-->\r\n    <a routerLink="/almacen/pedidos-jurisdiccionales/nuevo" routerLinkActive="is-active" class="button is-primary is-inverted is-medium is-fullwidth"><span class="icon"  ><i class="fa fa-plus"></i></span> <span>Nuevo Pedido</span></a>\r\n    <br>\r\n    <ul class="menu-list">\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/todos" #todos routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-file"></i></span> Pedidos\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.todos>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': todos.className == \'is-active\', \'is-primary\': todos.className != \'is-active\' }">{{  stats.todos }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/borradores" #borradores routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-pencil-square-o"></i></span> Borradores\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.borradores>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': borradores.className == \'is-active\', \'is-primary\': borradores.className != \'is-active\' }">{{  stats.borradores }}</span>\r\n            </a>\r\n        </li>\r\n        <!--li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/pendientes" #pendientes routerLinkActive="is-active">\r\n                <span class="icon"  ><i class="fa fa-minus-circle"></i></span> Pendientes\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.pendientes>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': pendientes.className == \'is-active\', \'is-warning\': pendientes.className != \'is-active\' }" >{{  stats.pendientes }}</span>\r\n            </a>             \r\n        </li-->\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/en-transito" #enTransito routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-clock-o"></i></span> En transito\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.en_transito>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': enTransito.className == \'is-active\', \'is-primary\': enTransito.className != \'is-active\' }">{{  stats.en_transito }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/por-surtir" #porSurtir routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-truck"></i></span> Por surtir\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.por_surtir>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': porSurtir.className == \'is-active\', \'is-primary\': porSurtir.className != \'is-active\' }">{{  stats.por_surtir }}</span>\r\n            </a>\r\n        </li>\r\n        <hr>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/finalizados" #finalizados routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-check-circle"></i></span> Finalizados\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.finalizados>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': finalizados.className == \'is-active\', \'is-success\': finalizados.className != \'is-active\' }">{{  stats.finalizados }}</span>\r\n            </a>\r\n            <!--ul>\r\n                <li><a routerLink="/almacen/pedidos-jurisdiccionales/finalizados/completos" routerLinkActive="is-active">Completos</a></li>\r\n                <li><a routerLink="/almacen/pedidos-jurisdiccionales/finalizados/incompletos" routerLinkActive="is-active">Incompletos</a></li>\r\n                <li><a routerLink="/almacen/pedidos-jurisdiccionales/finalizados/cancelados" routerLinkActive="is-active">Cancelados</a></li>\r\n            </ul-->\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/expirados" #expirados routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-exclamation-circle"></i></span> Expirados\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.expirados>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': expirados.className == \'is-active\', \'is-danger\': expirados.className != \'is-active\' }">{{  stats.expirados }}</span>\r\n            </a>\r\n        </li>\r\n        <!--\r\n        <hr>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/farmacia-subrogada" #farmacia routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-building"></i></span> Farmacia Subrogada\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.farmacia>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': farmacia.className == \'is-active\', \'is-info\': farmacia.className != \'is-active\' }">{{  stats.farmacia }}</span>\r\n            </a>\r\n        </li>-->\r\n    </ul>\r\n\r\n</aside>'},eJTV:function(e,t){e.exports='<div class="modal is-active" >\r\n  <div class="modal-background" (click)="cerrar()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n   \r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      \r\n                    \r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-list"></i></span> Distribución de cantidades\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrar()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <table class="table is-unselectable" *ngIf="!cargando && !guardando" style="font-size: 0.8em; margin:0px !important">\r\n        <thead>\r\n            <tr  >\r\n                <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                <th class="is-hidden-mobile" style="width:118px;">Clave</th>\r\n                <th class="is-hidden-tablet">Clave o Genérico</th>  \r\n                <th style="vertical-align: middle;" class="is-hidden-mobile " >Descripcion</th>                  \r\n                <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                 <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Precio">Precio</abbr></th>\r\n                <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                <th  style="width:21px !important;"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n\r\n            <tr>\r\n                <td class="has-text-centered">{{ insumo.lote }}</td>\r\n                <td class="has-text-centered is-hidden-mobile">{{ insumo.clave }}</td>     \r\n                <td>\r\n                    <small class="is-hidden-tablet">{{ insumo.clave }} <br></small>\r\n                    <div style="line-height:1em;">\r\n                    <small>{{ insumo.descripcion }}</small>\r\n                    </div>\r\n                    <div style="padding: 0.5em 0 0.5em 0; ">\r\n                    <span *ngIf="(insumo.es_causes && insumo.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': insumo == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                    <span *ngIf="(!insumo.es_causes && insumo.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                    <span *ngIf="insumo.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                    <span *ngIf="insumo.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': insumo == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                    <span *ngIf="(insumo.tipo == \'ME\' && insumo.informacion)">\r\n                        <span *ngIf="insumo.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                        <span *ngIf="insumo.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                    </span>\r\n                    </div>\r\n                </td>                \r\n                <td style="width:100px !important;text-align:center;">{{ insumo.cantidad }}</td>\r\n                <td style="width:78px !important; text-align:center;">$<b><abbr>{{insumo.precio | number:\'1.2-2\'}}</abbr></b></td>\r\n                <td style="width:78px !important; text-align:center;">$<b><abbr>{{insumo.monto | number:\'1.2-2\'}}</abbr></b></td>\r\n            </tr>      \r\n        </tbody>\r\n      </table>\r\n      <hr style="margin:0px !important">\r\n      <table class="table" style="font-size: 0.8em;">\r\n        <thead>\r\n          <tr>\r\n            <th style="width:110px !important;">Clues ({{ insumo.lista_clues.length }})</th>\r\n            <th>Nombre</th>\r\n            <th style="width:90px !important;text-align:center">Cantidad</th>              \r\n            <th style="width:50px; text-align:right">Monto</th>  \r\n            <th  *ngIf="!lectura"></th> \r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor="let item of insumo.lista_clues; let i = index">\r\n            <td>{{ item.clues}}</td>\r\n            <td>{{ item.nombre}}</td>\r\n            <td style="width:100px !important;"  *ngIf="!lectura">\r\n                <p class="control is-expanded">\r\n                <input class="input is-small has-text-centered"  type="number" placeholder="Cant" (keyup)="actualizarTotales()" (mouseup)="actualizarTotales()" [(ngModel)]="item.cantidad">\r\n                </p>\r\n            </td>\r\n\r\n            <td style="width:100px !important; text-align:center;"  *ngIf="lectura">{{ item.cantidad }} </td>\r\n            <td style="text-align:right">$<b><abbr>{{insumo.precio * item.cantidad | number:\'1.2-2\'}}</abbr></b></td>\r\n            <td style="width:32px !important;" *ngIf="!lectura">\r\n                <a (click)="eliminarInsumo(item,i)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n            \r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-radius:0 0 0.8em 0.8em " ></footer>\r\n  </div>\r\n</div>\r\n'},ew22:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},fVqg:function(e,t){e.exports='<form name="form" novalidate [formGroup]="usuario"  (ngSubmit)="enviar()">     \r\n            \r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded  has-icon has-icon-right">\r\n                  <input class="input" autofocus type="text" [ngClass]="{\'is-danger\': usuario.get(\'nombre\').hasError(\'required\') && usuario.get(\'nombre\').touched}"  placeholder="Nombre" formControlName="nombre">\r\n                  <span class="icon is-small" *ngIf="usuario.get(\'nombre\').hasError(\'required\') && usuario.get(\'nombre\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'nombre\').hasError(\'required\') && usuario.get(\'nombre\').touched">Este campo es requerido.</span>\r\n                </p>\r\n                <p class="control is-expanded has-icon has-icon-right">\r\n                  <input class="input" type="text" placeholder="Apellidos" [ngClass]="{\'is-danger\': usuario.get(\'apellidos\').hasError(\'required\') && usuario.get(\'apellidos\').touched}" formControlName="apellidos">\r\n                  <span class="icon is-small" *ngIf="usuario.get(\'apellidos\').hasError(\'required\') && usuario.get(\'apellidos\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'apellidos\').hasError(\'required\') && usuario.get(\'apellidos\').touched">Este campo es requerido.</span>\r\n                </p>\r\n              </div>\r\n             \r\n              <h2 class="subtitle">Datos de la cuenta</h2>\r\n              <p class="control has-icon has-icon-right">\r\n                <input type="text" class="input" placeholder="Usuario" (ngModelChange)="usuarioRepetido = false; usuarioInvalido = false" [ngClass]="{\'is-danger\': (usuario.get(\'id\').hasError(\'required\') || usuarioRepetido || usuarioInvalido) && usuario.get(\'id\').touched}" formControlName="id">\r\n                <span class="icon is-small" *ngIf="(usuario.get(\'id\').hasError(\'required\') || usuarioRepetido || usuarioInvalido) && usuario.get(\'id\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                </span>\r\n                <span class="help is-danger" *ngIf="usuario.get(\'id\').hasError(\'required\') && usuario.get(\'id\').touched">Este campo es requerido.</span>\r\n                <span class="help is-danger" *ngIf="usuarioRepetido && usuario.get(\'id\').touched">Este usuario ya fue utilizado.</span>\r\n                <span class="help is-danger" *ngIf="usuarioInvalido && usuario.get(\'id\').touched">El usuario debe tener un formato de <b>email</b> válido.</span>\r\n              </p>\r\n              <p class="control" *ngIf="mostrarCambiarPassword">\r\n                  <label class="checkbox">\r\n                    <input type="checkbox" formControlName="cambiarPassword" (click)="toggleCambiarPassword()">\r\n                    Cambiar contraseña\r\n                  </label>\r\n                </p>\r\n              <div class="control is-grouped">\r\n                \r\n                <p class="control is-expanded has-icon has-icon-right">\r\n                  <input class="input" type="password" placeholder="Contraseña" [ngClass]="{\'is-danger\': (usuario.get(\'password\').hasError(\'required\') || (usuario.get(\'password\').value != usuario.get(\'confirmarPassword\').value && usuario.get(\'confirmarPassword\').touched)) && usuario.get(\'password\').touched}" formControlName="password">\r\n                  <span class="icon is-small" *ngIf="(usuario.get(\'password\').hasError(\'required\') || (usuario.get(\'password\').value != usuario.get(\'confirmarPassword\').value && usuario.get(\'confirmarPassword\').touched)) && usuario.get(\'password\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'password\').hasError(\'required\') && usuario.get(\'password\').touched">Este campo es requerido.</span>\r\n                  <span class="help is-danger" *ngIf="(usuario.get(\'password\').value != usuario.get(\'confirmarPassword\').value && usuario.get(\'confirmarPassword\').touched) && usuario.get(\'password\').touched">Las contraseñas no coinciden.</span>\r\n                </p>\r\n                <p class="control is-expanded has-icon has-icon-right">\r\n                  <input class="input" type="password" placeholder="Confirmar contraseña" [ngClass]="{\'is-danger\': usuario.get(\'confirmarPassword\').hasError(\'required\') && usuario.get(\'confirmarPassword\').touched}" formControlName="confirmarPassword">\r\n                  <span class="icon is-small" *ngIf="usuario.get(\'confirmarPassword\').hasError(\'required\') && usuario.get(\'confirmarPassword\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'confirmarPassword\').hasError(\'required\') && usuario.get(\'confirmarPassword\').touched">Este campo es requerido.</span>\r\n                </p>\r\n                \r\n              </div>\r\n\r\n              <!--<h2 class="subtitle">Roles</h2>\r\n              <div class="control" [ngClass]="{\'is-loading\': cargandoRoles}">\r\n \r\n                  <select  name="roles" formControlName="roles" multiple class="bulma-select-multiple" [ngClass]="{\'is-warning\': roles?.length ==0 }">\r\n                    <option *ngFor="let item of roles" value="{{item.id}}">{{ item.nombre }}</option>\r\n                  </select>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'roles\').hasError(\'required\') && usuario.get(\'roles\').touched">Debe elegir por lo menos un rol.</span>\r\n                  <span class="help " *ngIf="roles?.length == 0"><b>La lista de roles está vacía.</b> <a (click)="cargarRoles()"><span class="icon is-small"><i class="fa fa-refresh"></i></span> <span>Actualizar</span></a></span>\r\n              </div>\r\n-->\r\n              \r\n              <h2 class="subtitle">Configuración</h2>\r\n              <div class="tabs is-centered">\r\n                <ul>\r\n                  \r\n                  <li [ngClass]="{ \'is-active\' : tab == 1}"><a (click)="tab=1">Roles</a></li>\r\n                  <li [ngClass]="{ \'is-active\' : tab == 2}"><a (click)="tab=2">Clues / Almacenes</a></li>\r\n                  <li [ngClass]="{ \'is-active\' : tab == 3}"><a (click)="tab=3">Avatar</a></li>\r\n                </ul>\r\n              </div>\r\n       \r\n              <div  [ngClass]="{ \'is-hidden\': tab != 1}">\r\n                <div class="control" [ngClass]="{\'is-loading\': cargandoRoles}">\r\n\r\n                  <select  name="roles" formControlName="roles" multiple class="bulma-select-multiple" [ngClass]="{\'is-warning\': roles?.length ==0 }">\r\n                    <option *ngFor="let item of roles" value="{{item.id}}">{{ item.nombre }}</option>\r\n                  </select>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'roles\').hasError(\'required\') && usuario.get(\'roles\').touched">Debe elegir por lo menos un rol.</span>\r\n                  <span class="help " *ngIf="roles?.length == 0"><b>La lista de roles está vacía.</b> <a (click)="cargarRoles()"><span class="icon is-small"><i class="fa fa-refresh"></i></span> <span>Actualizar</span></a></span>\r\n                </div>\r\n              </div>\r\n              <div [ngClass]="{ \'is-hidden\': tab != 2}">\r\n                <div class="control is-grouped">\r\n                  <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                    <select #clues>\r\n                      <option *ngFor="let item of unidadesMedicas" value="{{item.clues}}">{{ item.nombre }} - {{item.clues}}</option>\r\n                    </select>\r\n                    </span>\r\n                  </p>\r\n                  <p class="control">\r\n                    <a class="button is-primary" (click)="agregarUnidadMedica(clues.value)"><span class="icon"><i class="fa fa-plus"></i></span></a>\r\n                  </p>                      \r\n                </div>\r\n                \r\n                <div class="columns is-gapless">\r\n                  <div class="column">\r\n                    <table class="table">\r\n                      <thead>\r\n                        <tr>\r\n                          <td colspan="2">CLUES</td>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        <tr style="cursor:pointer;" *ngFor="let item of unidadesMedicasAgregadas; let i = index" (click)="unidadMedicaSeleccionada=item" [ngClass]="{\'is-selected\':unidadMedicaSeleccionada && unidadMedicaSeleccionada.clues==item.clues }">\r\n                          <td>{{ item.nombre}}</td>\r\n                          <td style="width:1em;">\r\n                            <a (click)="eliminarClues($event,item,index)"><span class="icon is-small"><i class="fa fa-trash"></i></span> </a>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                  <div class="column">\r\n                    <table class="table">\r\n                      <thead>\r\n                        <tr>\r\n                          <td colspan="2">ALMACENES</td>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody *ngIf="unidadMedicaSeleccionada">\r\n                        <tr style="cursor:pointer;"*ngFor="let item of unidadMedicaSeleccionada.almacenes; let i = index" (click)="toggleAlmacen(item)" >\r\n                          \r\n                          <td style="width:1em;">\r\n                            <span class="icon"><i class="fa" [ngClass]="{\'fa-circle-thin\': !item.seleccionado, \'fa-check-circle\': item.seleccionado}" ></i></span>                            \r\n                          </td>\r\n                          <td>{{ item.nombre}}</td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n                                \r\n              </div>\r\n              <div [ngClass]="{ \'is-hidden\': tab != 3}">\r\n                <p class="control">                \r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-male" >\r\n                    <figure class="image is-64x64" >\r\n                      <img src="assets/avatar-circled-user-male.svg" alt="Avatar hombre">\r\n                    </figure>\r\n                  </label>\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-female"  >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-circled-user-female.svg" alt="Avatar mujer">\r\n                    </figure>\r\n                  </label>\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-male-skin-type-6" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-circled-user-male-skin-type-6.svg" alt="Avatar hombre piel tipo 6">\r\n                    </figure>\r\n                  </label>\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-female-skin-type-6" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-circled-user-female-skin-type-6.svg" alt="Avatar mujer piel tipo 6">\r\n                    </figure>\r\n                  </label>\r\n\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-collaborator-male" >\r\n                    <figure class="image is-64x64" >\r\n                      <img src="assets/avatar-circled-collaborator-male.svg" alt="Avatar hombre">\r\n                    </figure>\r\n                  </label>\r\n                  \r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-nurse" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-nurse.svg" alt="Avatar enfermera">\r\n                    </figure>\r\n                  </label>\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-doctor-male" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-circled-doctor-male.svg" alt="Avatar doctor">\r\n                    </figure>\r\n                  </label>\r\n\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-doctor-female" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-circled-doctor-female.svg" alt="Avatar doctora">\r\n                    </figure>\r\n                  </label>\r\n\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-cat" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-cat.svg" alt="Avatar de gato">\r\n                    </figure>\r\n                  </label>\r\n\r\n                  \r\n                </p>\r\n              </div>\r\n              \r\n              <br><br>\r\n              <div class="control is-grouped">\r\n                <p class="control">\r\n                  <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="usuario.invalid" >Guardar</button>\r\n                </p>\r\n                <p class="control">\r\n                  <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': cargando}" [disabled]="usuario.invalid" >Eliminar usuario</button>\r\n                </p>\r\n                <p class="control">\r\n                  <a class="button is-white" (click)="regresar()" >Regresar</a>\r\n                </p>\r\n              </div>\r\n          </form>'},fcAu:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.lista=function(){return this.jwtRequest.get(l.URL).map(function(e){return e.json().data})},e}();c.URL="permisos",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},fjeY:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("WB34"),o=a("lgzy");a.d(t,"a",function(){return l});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=function(){function e(){}return e}();l=c([a.i(n.NgModule)({imports:[i.CommonModule,r.b],exports:[s.a],providers:[o.a],declarations:[s.a]})],l)},g2pd:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("2Je8"),s=a("5oXY"),o=a("NVOs"),c=a("1APj"),l=(a.n(c),a("h0qH")),d=(a.n(l),a("aV5h")),u=(a.n(d),a("q3ik")),p=(a.n(u),a("+pb+")),m=(a.n(p),a("uCY4")),f=(a.n(m),a("6Yye")),g=(a.n(f),a("lDdF")),h=(a.n(g),a("kZql")),v=a("Nqas"),b=a("lgzy"),y=a("7MfY"),_=a("NAeX"),x=a("0H6m");a.d(t,"a",function(){return I});var j=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},E=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},I=function(){function e(e,t,a,n,i,r,s,o,c){this.title=e,this.location=t,this.router=a,this.route=n,this._ngZone=i,this.pedidosService=r,this.almacenesService=s,this.fb=o,this.cambiarEntornoService=c,this.cargando=!1,this.guardando=!1,this.cargandoAlmacenes=!1,this.cargandoInsumos=!1,this.cargandoPresupuestos=!1,this.erroresEnInsumos={lista:{},errores:0},this.esPedidoJurisdiccional=!1,this.esOficinaJurisdiccional=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.meses={0:"Sin seleccionar",1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"},this.formularioTitulo="Nuevo",this.esEditar=!1,this.totalMontoComprometidoCausesMaterial=0,this.totalMontoComprometidoNoCauses=0,this.mostrarModalInsumos=!1,this.listaClaveAgregadas=[],this.presupuesto={causes_disponible:0,no_causes_disponible:0,material_curacion_disponible:0},this.mes=0,this.subrogados={},this.es_almacen_subrogado=!1,this.almacenSeleccionado={},this.fechasValidas=[],this.proveedor={},this.cargandoPdf=!1,this.mostrarModalListaClues=!1,this.loteSeleccionado=null}return e.prototype.ngOnInit=function(){var e=this;"OA"==JSON.parse(localStorage.getItem("usuario")).clues_activa.tipo&&(this.esOficinaJurisdiccional=!0),this.title.setTitle("Formulario pedido"),this.pdfworker=new Worker("web-workers/farmacia/pedidos/imprimir.js");var t=this,a=this._ngZone;this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){e.router.navigate(["/almacen/pedidos"])}),this.pdfworker.onmessage=function(e){a.run(function(){t.cargandoPdf=!1}),g.saveAs(t.base64ToBlob(e.data.base64,"application/pdf"),e.data.fileName)},this.pdfworker.onerror=function(e){a.run(function(){t.cargandoPdf=!1}),console.log(e)},this.pedido=new x.a(!0),this.route.params.subscribe(function(t){if(t.id)e.cargando=!0,e.pedido.id=t.id,e.esEditar=!0,e.formularioTitulo="Editar",e.title.setTitle("Editar pedido"),e.pedidosService.ver(t.id).subscribe(function(t){var a=new Date,n=a.getDate(),i=a.getMonth()+1,r=t.fecha.split("-"),s=parseInt(r[1]);if(r[0]!=a.getFullYear()?e.fechasValidas.push({fecha:r[0]+"-"+r[1]+"-"+r[2],descripcion:e.meses[s]+" "+r[0]}):s<i&&e.fechasValidas.push({fecha:r[0]+"-"+r[1]+"-"+r[2],descripcion:e.meses[s]+" "+r[0]}),s==i&&r[0]==a.getFullYear())e.fechasValidas.push({fecha:r[0]+"-"+r[1]+"-"+r[2],descripcion:e.meses[s]+" "+r[0]});else if(n<20){var o=("0"+n).slice(-2),c=("0"+i).slice(-2);e.fechasValidas.push({fecha:a.getFullYear()+"-"+c+"-"+o,descripcion:e.meses[i]+" "+a.getFullYear()})}var l=a.getFullYear();13==(i+=1)&&(i=1,l=a.getFullYear()+1);var d=("0"+i).slice(-2);if(s==i&&r[0]==l?e.fechasValidas.push({fecha:r[0]+"-"+r[1]+"-"+r[2],descripcion:e.meses[s]+" "+r[0]}):e.fechasValidas.push({fecha:l+"-"+d+"-01",descripcion:e.meses[i]+" "+l}),t.presupuesto_apartado){var u=t.presupuesto_apartado;e.totalMontoComprometidoCausesMaterial=+u.causes_comprometido+ +u.causes_devengado+ +u.material_curacion_comprometido+ +u.material_curacion_devengado,e.totalMontoComprometidoNoCauses=+u.no_causes_comprometido+ +u.no_causes_devengado}e.pedido.datos.patchValue(t),e.pedido.status=t.status,e.proveedor=t.proveedor,e.cargarPresupuesto(s),e.cambioAlmacen();for(var p in t.insumos){var m=t.insumos[p],f=m.insumos_con_descripcion;if(f.cantidad=+m.cantidad_solicitada,f.monto=+m.monto_solicitado,f.precio=+m.precio_unitario,f.tipo_insumo_id=m.tipo_insumo_id,m.cantidad_recibida?f.cantidad_recibida=+m.cantidad_recibida:f.cantidad_recibida=0,"PJS"!=t.tipo_pedido_id)e.pedido.lista.push(f),e.listaClaveAgregadas.push(f.clave),e.esPedidoJurisdiccional=!1;else{e.esPedidoJurisdiccional=!0,f.lista_clues=m.lista_clues,e.pedido.lista.push(f),e.listaClaveAgregadas.push({clave:f.clave,lista:[]});var g=e.listaClaveAgregadas.length-1;for(var h in f.lista_clues)console.log(f.lista_clues[h]),e.listaClaveAgregadas[g].lista.push(f.lista_clues[h].clues)}}e.pedido.indexar(),e.pedido.listar(1),e.cargando=!1,e.cargarAlmacenes()},function(t){e.cargando=!1,e.mensajeError=new v.a(!0),e.mensajeError=new v.a(!0),e.mensajeError.mostrar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}});else{var a=new Date,n=a.getDate(),i=a.getMonth()+1;if(n<20){var r=("0"+n).slice(-2),s=("0"+i).slice(-2);e.fechasValidas.push({fecha:a.getFullYear()+"-"+s+"-"+r,descripcion:e.meses[i]+" "+a.getFullYear()})}var o=("0"+(i+1)).slice(-2),c=a.getFullYear();if(i+1==13){a.getFullYear();i=0}e.fechasValidas.push({fecha:c+"-"+o+"-01",descripcion:e.meses[i+1]+" "+a.getFullYear()}),e.title.setTitle("Nuevo pedido"),e.cargarPresupuesto(),e.cargarAlmacenes()}})},e.prototype.obtenerDireccion=function(){return"BR"==this.pedido.status?"/almacen/pedidos/borradores":"/almacen/pedidos/todos"},e.prototype.toggleModalInsumos=function(){this.mostrarModalInsumos=!this.mostrarModalInsumos},e.prototype.toggleModalListaClues=function(e){this.loteSeleccionado=e,this.mostrarModalListaClues=!this.mostrarModalListaClues},e.prototype.agregarItem=function(e){void 0===e&&(e={});var t=this.pedido.paginacion.totalPaginas;if(this.esPedidoJurisdiccional){var a=e.insumo,n=!1;for(var i in this.pedido.lista){var r=0;if(this.pedido.lista[i].clave==a.clave){n=!0,this.pedido.lista[i].lista_clues.push({clues:e.clues,nombre:e.nombre,cantidad:e.cantidad});for(var s in this.pedido.lista[i].lista_clues)r+=this.pedido.lista[i].lista_clues[s].cantidad;this.pedido.lista[i].cantidad=r,this.pedido.lista[i].monto=a.precio*r}}n||(a.lista_clues||(a.lista_clues=[]),a.lista_clues.push({clues:e.clues,nombre:e.nombre,cantidad:e.cantidad}),a.cantidad_recibida=0,a.cantidad=e.cantidad,a.monto=a.cantidad*a.precio,this.pedido.lista.push(a))}else e.cantidad_recibida||(e.cantidad_recibida=0),e.monto=e.cantidad*e.precio,this.pedido.lista.push(e);this.pedido.indexar(),this.pedido.paginacion.lista.length!=this.pedido.paginacion.resultadosPorPagina||this.pedido.paginacion.paginaActual!=t||this.pedido.filtro.activo?this.pedido.listar(this.pedido.paginacion.paginaActual):this.pedido.listar(this.pedido.paginacion.paginaActual+1)},e.prototype.modificarItem=function(e){void 0===e&&(e={}),e.monto=e.cantidad*e.precio,this.pedido.actualizarTotales(),this.erroresEnInsumos.lista[e.clave]&&(delete this.erroresEnInsumos.lista[e.clave],this.erroresEnInsumos.errores-=1),(e.cantidad<e.cantidad_recibida||e.cantidad<=0)&&(this.erroresEnInsumos.lista[e.clave]=!0,this.erroresEnInsumos.errores+=1),console.log(this.erroresEnInsumos)},e.prototype.buscar=function(e,t,a,n){var i=t.value;if(27==e.keyCode)return e.preventDefault(),e.stopPropagation(),t.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(e.preventDefault(),e.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(e){var t=n[e].input.value;if(""==t)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[e].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(e){}return i.includes(t.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(e,t){return e.length-t.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},e.prototype.deshabilitarAlmacen=function(e){return!!(this.esPedidoJurisdiccional&&this.pedido.lista.length>0&&this.subrogados[e.id])||!(!(this.esOficinaJurisdiccional&&this.pedido.lista.length>0)||this.subrogados[e.id])},e.prototype.eliminarInsumo=function(e,t,a){if(void 0===a&&(a=!1),e.cantidad_recibida>0)return!1;var n=this.listaClaveAgregadas.indexOf(e.clave);this.listaClaveAgregadas.splice(n,1),a?this.pedido.filtro.eliminarItem(e,t):this.pedido.eliminarItem(e,t),this.erroresEnInsumos.lista[e.clave]&&(delete this.erroresEnInsumos.lista[e.clave],this.erroresEnInsumos.errores-=1)},e.prototype.mostrarFichaInformativa=function(e,t){e.preventDefault(),e.stopPropagation(),alert(t)},e.prototype.finalizar=function(){var e=prompt("Atención el pedido ya no podra editarse, para confirmar que desea concluir el pedido por favor escriba: CONCLUIR PEDIDO");if("CONCLUIR PEDIDO"!=e)return null!=e&&alert("Error al ingresar el texto para confirmar la acción."),!1;this.guardar(!0)},e.prototype.guardar=function(e){var t=this;void 0===e&&(e=!1),this.guardando=!0;var a;if(this.mensajeError.mostrar=!1,this.pedido.datos.invalid)return this.pedido.datos.get("almacen_solicitante").markAsTouched(),this.pedido.datos.get("descripcion").markAsTouched(),this.pedido.datos.get("fecha").markAsTouched(),this.guardando=!1,!1;if(this.erroresEnInsumos.errores>0){var n=[];for(var i in this.erroresEnInsumos.lista)n.push(i);return this.mensajeError=new v.a(!1),this.mensajeError.texto="Se encontaron errores en los siguientes insumos: "+n.join(", "),this.mensajeError.mostrar=!0,this.guardando=!1,!1}if(a=this.pedido.obtenerDatosGuardar(),e){a.datos.status="CONCLUIR";var r=this.totalMontoComprometidoCausesMaterial+(this.presupuesto.causes_disponible-+this.pedido.totalMontoCauses.toFixed(2))+(this.presupuesto.material_curacion_disponible-+this.pedido.totalMontoMaterialCuracion.toFixed(2)),s=this.totalMontoComprometidoNoCauses+this.presupuesto.no_causes_disponible-+this.pedido.totalMontoNoCauses.toFixed(2);if(r<0||s<0)return this.guardando=!1,this.mensajeError=new v.a(!0),this.mensajeError.texto="Presupuesto insuficiente",this.mensajeError.mostrar=!0,!1}else a.datos.status="BR";this.esEditar?this.pedidosService.editar(this.pedido.id,a).subscribe(function(e){t.guardando=!1,"BR"!=e.status&&t.router.navigate(["/almacen/pedidos/ver/"+e.id])},function(e){t.guardando=!1,t.mensajeError=new v.a(!0),t.mensajeError.texto="No especificado",t.mensajeError.mostrar=!0,console.log(t.pedido),"CONCLUIR"==t.pedido.status&&(t.pedido.status="BR");try{var a=e.json();console.log(a),401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==e.status&&a.error&&(t.mensajeError.texto=a.error,t.mensajeError.cuentaAtras=1e3)}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}}):this.pedidosService.crear(a).subscribe(function(e){t.guardando=!1,t.router.navigate(["/almacen/pedidos/editar/"+e.id])},function(e){t.guardando=!1,console.log(e),t.mensajeError=new v.a(!0),t.mensajeError.texto="No especificado",t.mensajeError.mostrar=!0;try{var a=e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==e.status&&a.error&&(t.mensajeError.texto=a.error,t.mensajeError.cuentaAtras=1e3)}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}})},e.prototype.cambioAlmacen=function(){var e=this.pedido.datos.get("almacen_solicitante").value;this.subrogados[e]?this.es_almacen_subrogado=!0:this.es_almacen_subrogado=!1,this.cargarPresupuesto(this.mes),this.almacenSeleccionado={id:e,subrogado:this.es_almacen_subrogado},this.esOficinaJurisdiccional&&!this.subrogados[e]?this.esPedidoJurisdiccional=!0:this.esPedidoJurisdiccional=!1},e.prototype.cargarAlmacenes=function(){var e=this;this.cargandoAlmacenes=!0;var t=null;this.esPedidoJurisdiccional&&this.esEditar&&this.esOficinaJurisdiccional?t=0:!this.esPedidoJurisdiccional&&this.esEditar&&this.esOficinaJurisdiccional&&(t=1),this.almacenesService.catalogo(t).subscribe(function(t){e.cargandoAlmacenes=!1,e.almacenes=t;for(var a in t)1==t[a].subrogado&&"FARSBR"==t[a].tipo_almacen&&(e.subrogados[t[a].id]=!0);if(!e.esEditar){var n={};e.pedido.inicializarDatos(n)}console.log("Almacenes cargados."),0==e.almacenes.length?(e.mensajeAdvertencia=new v.a(!0),e.mensajeAdvertencia.texto="No hay almacenes registrados en el sistema, póngase en contacto con un administrador.",e.mensajeAdvertencia.mostrar=!0):e.esPedidoJurisdiccional},function(t){e.cargandoAlmacenes=!1,e.mensajeError=new v.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para ver los almacenes."),500==t.status&&(e.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los almacenes")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los almacenes":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los almacenes"}})},e.prototype.recargarPresupuesto=function(e){var t=e.split("-");if(3==t.length){var a=t[1];2==a.length&&(a=parseInt(a))!=this.mes&&a>0&&a<13&&this.cargarPresupuesto(a)}},e.prototype.cargarPresupuesto=function(e){var t=this;if(void 0===e&&(e=0),0==e){e=(new Date).getMonth()+1}this.mes=e;var a=this.pedido.datos.get("almacen_solicitante").value;a&&(this.cargandoPresupuestos=!0,this.pedidosService.presupuesto(e,a).subscribe(function(e){t.cargando=!1,e.data?t.presupuesto=e.data:(t.presupuesto.causes_disponible=0,t.presupuesto.no_causes_disponible=0,t.presupuesto.material_curacion_disponible=0),t.cargandoPresupuestos=!1},function(e){t.cargando=!1,t.cargandoPresupuestos=!1,console.log(e)}))},e.prototype.keyboardInput=function(e){32==e.keyCode&&e.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.mostrarModalInsumos=!0),39==e.keyCode&&(e.ctrlKey&&e.shiftKey||e.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaSiguiente():this.pedido.paginaSiguiente()),37==e.keyCode&&(e.ctrlKey&&e.shiftKey||e.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaAnterior():this.pedido.paginaAnterior())},e.prototype.imprimirExcel=function(){var e="token="+localStorage.getItem("token");window.open(h.a.API_URL+"/generar-excel-pedido/"+this.pedido.id+"?"+e)},e.prototype.imprimir=function(){try{console.log(this.pedido),this.cargandoPdf=!0;var e={datos:{almacen:"solicitar",solicitante:"unidad",observaciones:"texto"},lista:this.pedido.lista};this.pdfworker.postMessage(JSON.stringify(e))}catch(e){this.cargandoPdf=!1,console.log(e)}},e.prototype.base64ToBlob=function(e,t){for(var a=atob(e),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:t})},e.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},e}();I=j([a.i(n.Component)({selector:"app-formulario",template:a("ckf6"),styles:[a("cY0Z")],host:{"(window:keydown)":"keyboardInput($event)"}}),E("design:paramtypes",["function"==typeof(P=void 0!==i.b&&i.b)&&P||Object,"function"==typeof(C=void 0!==r.Location&&r.Location)&&C||Object,"function"==typeof(k=void 0!==s.a&&s.a)&&k||Object,"function"==typeof(S=void 0!==s.c&&s.c)&&S||Object,"function"==typeof(A=void 0!==n.NgZone&&n.NgZone)&&A||Object,"function"==typeof(q=void 0!==_.a&&_.a)&&q||Object,"function"==typeof(w=void 0!==y.a&&y.a)&&w||Object,"function"==typeof(R=void 0!==o.FormBuilder&&o.FormBuilder)&&R||Object,"function"==typeof(O=void 0!==b.a&&b.a)&&O||Object])],I);var P,C,k,S,A,q,w,R,O},g913:function(e,t){e.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Lista de Pacientes {{ Unidad }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted " routerLink="/paciente/nuevo">\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th></th>\r\n                    <th><abbr title="Paciente ID">ID</abbr></th>\r\n                    <th>Nombre</th>\r\n                    <th>Fecha Nacimiento</th>\r\n                    <th>Localidad (Municipio)</th>\r\n                    <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pacientes; let i=index">\r\n                        <th><a routerLink="/paciente/editar/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.fecha_nacimiento }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.localidad"><a routerLink="/paciente/editar/{{item.id}}">{{item.localidad.nombre }} ( {{item.localidad.municipio.nombre }} ) </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.localidad"><a routerLink="/paciente/editar/{{item.id}}">DESCONOCIDO</a></td>\r\n                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando">\r\n                                <i class="fa fa-circle-o-notch fa-spin"></i>\r\n                            </span>\r\n                            <a *ngIf="!item.cargando" class="is-primary" routerLink="/paciente/editar/{{item.id}}">\r\n                                <span class="icon"><i class="fa fa-edit"></i></span>\r\n                            </a>\r\n\r\n                            <span class="icon " *ngIf="item.cargando">\r\n                                <i class="fa fa-circle-o-notch fa-spin"></i>\r\n                            </span>\r\n                            <a *ngIf="!item.cargando" class="is-primary" routerLink="/paciente/historial/{{item.id}}">\r\n                                <span class="icon"><i class="fa fa-history"></i></span>\r\n                            </a>\r\n                        </td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="pacientes.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th><a routerLink="/paciente/editar/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                    <th style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                    <td style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.nombre }}</a></td>\r\n                    <td style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.fecha_nacimiento }} </a></td>\r\n                    <td style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.localidad.nombre }} ({{ item.localidad.municipio.nombre }})</a></td>\r\n                   <td style="vertical-align: middle;" class="has-text-centered">\r\n                        <span class="icon " *ngIf="item.cargando">\r\n                            <i class="fa fa-circle-o-notch fa-spin"></i>\r\n                        </span>\r\n                        <a *ngIf="!item.cargando" class="is-primary" routerLink="/paciente/editar/{{item.id}}">\r\n                            <span class="icon"><i class="fa fa-edit"></i></span>\r\n                        </a>\r\n\r\n                        <span class="icon " *ngIf="item.cargando">\r\n                            <i class="fa fa-circle-o-notch fa-spin"></i>\r\n                        </span>\r\n                        <a *ngIf="!item.cargando" class="is-primary" routerLink="/paciente/historial/{{item.id}}">\r\n                            <span class="icon"><i class="fa fa-history"></i></span>\r\n                        </a>    \r\n                        </td>\r\n                    \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n    </div>        \r\n   \r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},gM3R:function(e,t){e.exports='<listar #ctrl URL="movimientos?tipo=1" titulo="Entrada  de almacén"></listar>\r\n<menu-farmacia [modulo]="\'Entradas  de almacén\'" [icono]="\'assets/icono-entradas.svg\'" [url]="\'/almacen/entradas-estandar\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n     <!-- <div class="column is-one-quarter is-hidden-mobile">\r\n        <menu-lateral (onEnviarTipo)=enviarTipo($event);></menu-lateral>  \r\n        <aside class="menu" style="padding: 1em;">\r\n            <a routerLink="/almacen/entradas-estandar/nuevo" routerLinkActive="is-active" class="button is-primary is-inverted is-medium is-fullwidth"><span class="icon"  ><i class="fa fa-plus"></i></span> <span>Nueva Entrada</span></a>\r\n            <br>\r\n            <ul class="menu-list">\r\n                <li>\r\n                    <a routerLink="/almacen/entradas-estandar" #estandar routerLinkActive="is-active">\r\n                        <span class="icon"><i class="fa fa-file"></i></span> Entrada estandar\r\n                        <span class="icon is-pulled-right" *ngIf="ctrl.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                        --><!-- <span class="tag is-pulled-right" [ngClass]="{ \'is-white\': estandar.className == \'is-active\', \'is-primary\': estandar.className != \'is-active\' }"></span>\r\n                    </a>\r\n                </li>\r\n            </ul>\r\n\r\n        </aside>\r\n    </div> -->\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        <span></span>\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Entradas  de almacén\r\n                            </h1>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                            <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/almacen/entradas-estandar/nuevo">\r\n                                    <span class="icon"><i class="fa fa-plus"></i></span><span>Nueva Entrada</span>\r\n                                </a>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!ctrl.cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th style=" text-align: center;"><abbr title="Folio">Folio</abbr></th>\r\n                        <th>Usuario</th>\r\n                        <th>Estatus</th>\r\n                        <th style=" text-align: center;">Creado</th>\r\n                        <th style=" text-align: center;">Actualizado</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.status }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.created_at }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.updated_at | date:\'medium\'}} </a></td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                       <th style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.status }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.created_at }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.updated_at | date:\'medium\'}} </a></td>\r\n                        \r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},gdhx:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(){function e(){this.lista=[],this.paginaActual=1,this.resultadosPorPagina=5,this.totalPaginas=0,this.indice=[]}return e}()},gqAS:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("E3bb");a.d(t,"a",function(){return c});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=function(){function e(){}return e}();c=o([a.i(n.NgModule)({imports:[i.CommonModule,r.b],declarations:[s.a],exports:[s.a]})],c)},gza1:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.mostrarMenuAside=!1,this.usuario={}}return e.prototype.ngOnInit=function(){this.DatoUnidad=JSON.parse(localStorage.getItem("usuario")),this.usuario=JSON.parse(localStorage.getItem("usuario"))},e.prototype.toggleMenuAside=function(){this.mostrarMenuAside=!this.mostrarMenuAside},e}();s=i([a.i(n.Component)({selector:"admision-menu",template:a("T/4t"),styles:[a("WTnz")]}),r("design:paramtypes",[])],s)},"h7+X":function(e,t){e.exports='<aside class="menu" style="padding: 1em;">\r\n    <div *ngFor="let item of menuAutorizado">\r\n        <p class="menu-label">{{ item.titulo }}</p>\r\n        <ul class="menu-list">\r\n            <li *ngFor="let modulo of item.modulos">\r\n                <a routerLink="{{ modulo.url }}" routerLinkActive="is-active">\r\n                    <span class="icon" ><i class="fa {{ modulo.icono }}"></i></span>&nbsp;&nbsp;<span>{{ modulo.titulo }}</span>\r\n                </a>\r\n            </li>    \r\n        </ul>\r\n    </div>\r\n        \r\n</aside>'},hNLj:function(e,t){e.exports='<menu-farmacia [modulo]="\'Pedidos jurisdiccionales\'" [icono]="\'assets/icono-pedidos-jurisdiccionales.svg\'" [url]="\'/almacen/pedidos-jurisdiccionales/por-surtir\'"></menu-farmacia>\r\n\r\n<div class="is-fullwidth has-text-centered" style="padding-top:70px;" *ngIf="cargando">\r\n  <br>\r\n  <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n  <br>\r\n  <br>\r\n</div>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile is-parent is-12 ">\r\n      <div class="tile is-child notification is-dark">\r\n        <div class="columns">\r\n          <div class="column" >\r\n            <div style="padding:1em;">\r\n              Folio: <strong style="color:#FFF;">{{ folio }}</strong>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Claves Recibidas: {{ lotesSurtidos.length  }}<!-- / {{ pedido.lista.length }}-->\r\n               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span *ngIf="statusRecepcion == \'BR\'"><strong style="color:#FFF;">Recepción inciada</strong></span>\r\n               <span *ngIf="statusRecepcion == \'FI\'"><strong style="color:#FFF;">Recepción concluida</strong></span>\r\n            </div>\r\n          </div>\r\n          <div class="column is-4" style="text-align:right; " *ngIf="statusRecepcion != \'FI\'">\r\n            <div style="margin:1em;">\r\n            <a *ngIf="!guardando && statusRecepcion == \'BR\'" class="button is-primary" style="width:45%; margin-right:5%;" (click)="finalizar()"> <span class="icon"><i class="fa fa-check"></i></span> <span>Concluir</span></a>\r\n            <a  class="button is-white"  style="width:45%"  [ngClass]="{ \'is-loading\': guardando }"  (click)="guardar()"> <span class="icon"><i class="fa fa-save"></i></span> <span>Guardar</span></a>\r\n            </div>\r\n          </div>\r\n        </div>       \r\n      </div>\r\n    </div>\r\n    <div class="tile">\r\n      <div class="tile is-parent ">\r\n        <div class="tile is-child notification is-white" >\r\n          <div class="contenedor-tabla" >          \r\n            \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em; ">\r\n              <thead>\r\n                  <tr  [ngClass]="{ \'filtro\': pedido.filtro.activo}">\r\n                    <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                    <th>\r\n                      <p class="control is-expanded">\r\n                        <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                        <!--input class="input is-small" type="text" placeholder="Clave o Descripción" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])"-->\r\n                        <input class="input is-small" type="text" placeholder="Clave o Descripción" #searchBoxDescripcionClave id="search-box-descripcion-clave" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                      </p>\r\n                    </th>  \r\n                    \r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cantidad</abbr></th>\r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Surtido">Lotes</abbr></th>\r\n                    <th  style="width:21px !important; text-align: center; vertical-align: middle;">Surtido</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                <tr class="item" *ngFor="let item of pedido.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <!--b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br-->\r\n                    <div class="item-detalle">\r\n                      <!--div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div-->\r\n                      <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n\r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }} / {{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ (item.listaStockAsignado)?item.listaStockAsignado.length:0 }}</th>\r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>      \r\n              </tbody>\r\n              <tbody *ngIf="pedido.filtro.activo">\r\n                <tr class="item"  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <!--b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br-->\r\n                    <div class="item-detalle">\r\n                      <!--div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div-->\r\n\r\n                      <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }} / {{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ (item.listaStockAsignado)?item.listaStockAsignado.length:0 }}</th>\r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>   \r\n              </tbody>              \r\n            </table>\r\n            <paginacion style=" width:100%; height:auto; bottom:0; left:0px; background:#FFF;"\r\n                [total]="pedido.lista.length" \r\n                [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.paginacion.indice"\r\n                (onSiguiente)="pedido.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.paginaAnterior(); limpiarStock();" \r\n                (onListar)="pedido.listar($event);limpiarStock();" \r\n                *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n\r\n            <paginacion \r\n                [total]="pedido.filtro.lista.length" \r\n                [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                (onSiguiente)="pedido.filtro.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.filtro.paginaAnterior();  limpiarStock();" \r\n                (onListar)="pedido.filtro.listar($event); limpiarStock();" \r\n                *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="tile is-parent is-vertical ">\r\n        <div *ngIf="(capturarStock && (itemSeleccionado.cantidad_recibida < itemSeleccionado.cantidad))" class="tile is-child notification">\r\n          <div class="control is-grouped">\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <label class="label">Código de Barras</label>\r\n              <input class="input" autofocus type="text" placeholder="Código de Barras" [(ngModel)]="formStock.codigo_barras">\r\n            </p>\r\n            <!--p class="control has-icon has-icon-right">\r\n              <label class="label">Marca</label>\r\n              <span class="select is-expanded">\r\n                <select [(ngModel)]="formStock.marca">\r\n                  <option *ngFor="let item of marcas" [ngValue]="item">{{ item.nombre }}</option>\r\n                </select>\r\n              </span>\r\n            </p-->\r\n          </div>\r\n\r\n          <div class="control is-grouped">\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <label class="label">Lote</label>\r\n              <input class="input" autofocus type="text" placeholder="Lote" [(ngModel)]="formStock.lote">\r\n              <span *ngIf="erroresFormularioStock.lote.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.lote.error" class="help is-danger">{{erroresFormularioStock.lote.texto}}</span>\r\n            </p>\r\n            <p class="control is-expanded has-icon has-icon-right">\r\n              <label class="label">Caducidad (aaaa-mm-dd)</label>\r\n              <input class="input" type="text" placeholder="aaaa-mm-dd" [(ngModel)]="formStock.fecha_caducidad">\r\n              <span *ngIf="erroresFormularioStock.fecha_caducidad.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.fecha_caducidad.error" class="help is-danger">{{erroresFormularioStock.fecha_caducidad.texto}}</span>\r\n            </p>\r\n            <p class="control is-expanded has-icon has-icon-right">\r\n              <label class="label">Cantidad</label>\r\n              <input class="input" type="number" placeholder="Cantidad" [(ngModel)]="formStock.cantidad">\r\n              <span *ngIf="erroresFormularioStock.cantidad.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.cantidad.error" class="help is-danger">{{erroresFormularioStock.cantidad.texto}}</span>\r\n            </p>\r\n          </div>\r\n\r\n          <div class="control is-grouped is-pulled-right " >\r\n            <p class="control is-expanded">\r\n            </p>\r\n            <p class="control">\r\n                <button class="button is-medium is-primary " (click)="asignarStock()">\r\n                  <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar</span>\r\n                </button>\r\n            </p>\r\n            <p class="control">\r\n                <button class="button is-medium "  (click)="cancelarCapturaStock()">\r\n                  <span>Cancelar</span>\r\n                </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class="tile is-child  notification is-white">\r\n          <div class="contenedor-tabla">\r\n            <table class="table" *ngIf="!cargando && itemSeleccionado != null" style="font-size: 0.8em;" >\r\n              <thead>\r\n                  <tr style="background: #00d1b2;">\r\n                    <th style="color:#FFF !important;">Código</th>\r\n                    <!--th style="color:#FFF !important;">Marca</th-->\r\n                    <th style="color:#FFF !important;">Lote</th>\r\n                    <th style="color:#FFF !important;">Caducidad</th>\r\n                    <th style="color:#FFF !important;"><abbr title="Cantidad">Cant.</abbr></th>  \r\n                    <th></th>              \r\n                  </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th colspan="4" style="text-align:right">\r\n                    <span *ngIf="itemSeleccionado.totalStockAsignado == itemSeleccionado.cantidad"><span class="icon is-small" ><i class="fa fa-check-circle"></i></span> <span>Completo &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> Total </span>\r\n                  </th>\r\n                  <td style="text-align:center">{{ itemSeleccionado.totalStockAsignado || 0 }} / {{ itemSeleccionado.cantidad }}</td>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                  <tr  class="is-unselectable" *ngFor="let item of itemSeleccionado.listaStockAsignado">\r\n                    <td>{{ item.codigo_barras}}</td>\r\n                    <!--td>{{ item.marca.nombre }}</td-->\r\n                    <td>{{ item.lote }}</td>\r\n                    <td>{{ item.fecha_caducidad | date:\'dd/MM/y\' }}</td>\r\n                    <td style="width:150px !important;">\r\n                        <p class="control is-expanded">\r\n                        <input class="input is-small has-text-centered"  type="number" min="1" max="{{item.existencia}}" placeholder="Cant" [(ngModel)]="item.cantidad" (change)="validarItemStock(item, true)" (keyup)="validarItemStock(item)">\r\n                        </p>\r\n                    </td> \r\n                    <td style="vertical-align: middle;" class="has-text-centered"><a  class="is-danger" (click)="eliminarStock(item)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>                    \r\n                  </tr>\r\n              </tbody>  \r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n  </div>\r\n</div>\r\n  \r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogo()"></div>\r\n  <div class="modal-card" style="width:60%; height: 90%;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-check"></i></span> Finalizar Recepción \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogo()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <form name="form" novalidate [formGroup]="formularioRecepcion">\r\n          <label class="label">Nombre de quien entrega:</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" [ngClass]="{\'is-danger\': formularioTieneError(\'entrega\',\'required\')}" formControlName="entrega"/>\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'entrega\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'entrega\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n\r\n          <label class="label">Nombre de quien recibe:</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" [ngClass]="{\'is-danger\': formularioTieneError(\'recibe\',\'required\')}" formControlName="recibe"/>\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'recibe\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'recibe\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n\r\n          <label class="label">Fecha (aaaa-mm-dd):</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" placeholder="aaaa-mm-dd" [ngClass]="{\'is-danger\': formularioTieneError(\'fecha_movimiento\',\'required\')}" formControlName="fecha_movimiento" />\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'fecha_movimiento\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'fecha_movimiento\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n          \r\n          <div class="control">\r\n            <textarea name="observaciones" class="textarea" placeholder="Observaciones"  formControlName="observaciones"></textarea>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n      <div class="columns">\r\n          <div class="column" ></div>\r\n          <div class="column is-4" style="text-align:right; " *ngIf="statusRecepcion != \'FI\'">\r\n            <div style="margin:1em;">\r\n            <a  class="button is-primary" style="width:45%; margin-right:5%;" (click)="guardar(true)"> <span class="icon"><i class="fa fa-check"></i></span> <span>Concluir</span></a>\r\n            </div>\r\n          </div>\r\n        </div> \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n'},hRr9:function(e,t,a){"use strict";function n(){return a("504h")}var i=a("3j3K"),r=a("2Je8"),s=a("RHrs"),o=a("BDfs"),c=(a.n(o),a("bu1r")),l=(a.n(c),a("EknN")),d=a("52hV"),u=a("Z7d5"),p=a("KR/G");a.n(p);a.d(t,"a",function(){return f});var m=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},f=function(){function e(){}return e}();f=m([a.i(i.NgModule)({imports:[r.CommonModule,o.ChartModule,s.a,p.NguiDatetimePickerModule],providers:[d.a,u.a,{provide:c.HighchartsStatic,useFactory:n}],declarations:[l.a],exports:[l.a]})],f)},"hl/3":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},hnmW:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},hrBO:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.buscar=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.lista=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=20),this.jwtRequest.get(l.URL,null,{page:e,per_page:t}).map(function(e){return e.json().data})},e.prototype.listaCompleta=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=20),this.jwtRequest.get("admision/paciente-egreso",null,{page:e,per_page:t}).map(function(e){return e.json().data})},e.prototype.buscarCompleta=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get("admision/paciente-egreso",null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.listaMunicipios=function(e){return this.jwtRequest.get("admision/municipio",e,null).map(function(e){return e.json().data})},e.prototype.listaLocalidades=function(e,t){return this.jwtRequest.get("admision/localidad",t,{municipio_id:e}).map(function(e){return e.json().data})},e.prototype.listaMotivoEgreso=function(){return this.jwtRequest.get("admision/motivo-egreso",null,null).map(function(e){return e.json().data})},e.prototype.listaTriage=function(e){return this.jwtRequest.get("admision/triage",null,{triage_id:e}).map(function(e){return e.json().data})},e.prototype.listaGradoLesion=function(e){return this.jwtRequest.get("admision/grado-lesion",null,{grado_lesion_id:e}).map(function(e){return e.json().data})},e.prototype.listaUnidades=function(e,t){return this.jwtRequest.get("unidades-medicas",null,{lista:e,clues:t}).map(function(e){return e.json().data})},e.prototype.ver=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){return console.log(e.json().data),e.json().data})},e.prototype.editar=function(e,t){return this.jwtRequest.put(l.URL,e,t).map(function(e){return e.json().data})},e.prototype.ingreso=function(e,t){return this.jwtRequest.put("admision/admision",e,t).map(function(e){return e.json().data})},e.prototype.crear=function(e){return this.jwtRequest.post("admision/paciente-egreso",e).map(function(e){return e.json().data})},e}();c.URL="admision/paciente-egreso",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},hul6:function(e,t){e.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n     <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n   <div class="column" >\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <div class="contenedor-lista" *ngIf="!cargando">\r\n            <div class="top-bar is-primary" [ngClass]="{ \'is-danger\':  errores.items == \'required\' && lista.items.length == 0 }">\r\n                <h1 class="title" *ngIf="!busquedaActivada">\r\n                    <span class="icon is-medium"><i class="fa " [ngClass]="{\'fa-file\': !esEditar,  \'fa-pencil-square-o\': esEditar}"></i></span> {{ formularioTitulo }}\r\n                </h1>\r\n                <a class="button  is-primary"  style="position:absolute; top:1em; right:1em;" routerLink="/administrador-central/claves-basicas/"><span class="icon "><i class="fa fa-times"></i></span></a>\r\n                <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Nombre"  [ngClass]="{ \'is-danger\': errores.nombre != null}" [(ngModel)]="lista.nombre">\r\n                            <span class="help is-danger" *ngIf="errores.nombre == \'required\'">Este campo es requerido.</span>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-primary is-inverted is-medium" [ngClass]="{ \'is-disabled\': lista.items.length == 0 }" (click)="guardar()">\r\n                                <span class="icon"><i class="fa fa-save"></i></span><span>Guardar</span>\r\n                            </a>\r\n                        </p>\r\n                </div>\r\n            </div> \r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="guardando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-spinner fa-spin"></i></span> &nbsp;<span>Guardando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            \r\n\r\n            <table class="table is-unselectable" *ngIf="!cargando && !guardando" style="font-size: 0.8em;">\r\n                <thead>\r\n                    <tr  [ngClass]="{ \'is-dark\': lista.filtro.activo}">\r\n                        <th style="width:41px;vertical-align: middle;" class="has-text-centered" > Claves({{ lista.items.length | number }})</th>\r\n                        <th class="is-hidden-mobile" style="width:118px;">\r\n                        <p class="control is-expanded" >\r\n                            <input type="hidden" #searchBoxClavePrevia >                            \r\n                            <input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave" (keyup)="buscar($event,searchBoxClave,searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>\r\n                        <th class="is-hidden-tablet">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionClavePrevia >                            \r\n                            <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>  \r\n                        <th style="vertical-align: middle;" class="is-hidden-mobile "  >\r\n                            Descripcion                            \r\n                        </th>                  \r\n                        <td colspan="2"><a class="button  is-pulled-right" [ngClass]="{\'is-dark\': lista.filtro.activo, \'is-primary\': !lista.filtro.activo, \'is-inverted\': !lista.filtro.activo, \'is-danger\': errores.items == \'required\' && lista.items.length == 0 }" style="margin-top:-0.25em; font-weight:normal" title="Ctrl + espacio" (click)="toggleModalInsumos(); ">\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar Clave</span>\r\n                            </a>\r\n                        </td>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!lista.filtro.activo">\r\n                    <tr *ngIf="lista.paginacion.lista.length == 0"><td colspan="3">Lista vacía.</td></tr>\r\n                    <tr   *ngFor="let item of lista.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ i + 1 }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    <td colspan="2">\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                        </div>\r\n                    </td>\r\n                    <td style="width:21px !important;"><a (click)="eliminarInsumo(item,i)"><span class="icon"><i class="fa fa-trash"></i></span></a></td>\r\n                    </tr>      \r\n                </tbody>\r\n                <tbody *ngIf="lista.filtro.activo">\r\n                    <tr  *ngFor="let item of lista.filtro.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ item.lote }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    \r\n                    <td colspan="2">\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <div style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                        </div>\r\n                    </td>\r\n                    <td style="width:21px !important;"><a (click)="eliminarInsumo(item,i,true)"><span class="icon"><i class="fa fa-trash"></i></span></a></td>\r\n                    </tr>\r\n                </tbody>              \r\n            </table>\r\n            \r\n            <paginacion \r\n                    [total]="lista.items.length" \r\n                    [paginasTotales]="lista.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="lista.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="lista.paginacion.paginaActual" \r\n                    [indicePaginas]="lista.paginacion.indice"\r\n                    (onSiguiente)="lista.paginaSiguiente()" \r\n                    (onAnterior)="lista.paginaAnterior()" \r\n                    (onListar)="lista.listar($event)" \r\n                    *ngIf="lista.items.length > 0 && lista.items.length > lista.paginacion.resultadosPorPagina && !lista.filtro.activo"></paginacion>\r\n            \r\n            <paginacion \r\n                    [total]="lista.filtro.items.length" \r\n                    [paginasTotales]="lista.filtro.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="lista.filtro.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="lista.filtro.paginacion.paginaActual" \r\n                    [indicePaginas]="lista.filtro.paginacion.indice"\r\n                    (onSiguiente)="lista.filtro.paginaSiguiente()" \r\n                    (onAnterior)="lista.filtro.paginaAnterior()" \r\n                    (onListar)="lista.filtro.listar($event)" \r\n                    *ngIf="lista.filtro.items.length > 0 && lista.filtro.items.length > lista.filtro.paginacion.resultadosPorPagina && lista.filtro.activo"></paginacion>\r\n            \r\n            <br>\r\n        </div>\r\n   </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <!--p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p-->\r\n</div>\r\n<buscar-insumos *ngIf="mostrarModalInsumos" (onCerrar)="mostrarModalInsumos = false" (onEnviar)="agregarItem($event)" [listaAgregados]="listaClaveAgregadas" [conPrecios]="false" [conCantidad]="false"  ></buscar-insumos>'},i3h7:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("NVOs"),o=a("Uvud"),c=a("fjeY"),l=a("+ZDf"),d=a("Zit5"),u=a("pLck"),p=a("Npjp"),m=a("MqZK"),f=a("F76a");a.d(t,"a",function(){return h});var g=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},h=function(){function e(){}return e}();h=g([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.FormsModule,o.a,c.a,l.a,d.a,u.a],declarations:[m.a,f.a],providers:[p.a]})],h)},iBfS:function(e,t){e.exports='<menu-almacen-articulos></menu-almacen-articulos>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},iajj:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"td.aceptados{background-color:#cdff8c}td.ignorados{background-color:#ff756b}.cancelado{color:red}.descargado{background-color:#00d1b2}.color_tag_descargas{background-color:#fff}",""]),e.exports=e.exports.toString()},iqbP:function(e,t){e.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Equipamiento" class="nav-item pull-left nav-hub-active"  routerLink="/equipamiento">\r\n            \r\n            <img src="assets/hub-equipamiento.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left is-hidden-touch">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item">\r\n                <h1 class="title">&nbsp;Equipamiento</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <div class="nav-center">\r\n            <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n            </span>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},jBlE:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},jjES:function(e,t){e.exports='<section class="hero is-dark" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/panel-control" routerLinkActive="active">\r\n                    <!--<img src="http://bulma.io/images/bulma-type.png" alt="Bulma logo">-->\r\n                     <span class="icon">\r\n                        <i class="fa fa-cog"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;Panel de control</h1>\r\n                    </a>\r\n                </div>\r\n                <a class="nav-item is-hidden-tablet" (click)="toggleMenuAside()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-navicon"></i>\r\n                    </span>\r\n                </a>\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>\r\n\r\n<div class="modal" [ngClass]="{\'is-active\': mostrarMenuAside}">\r\n  <div class="modal-background" (click)="toggleMenuAside()"></div>\r\n  <div class="modal-content">\r\n    <div class="card" style="width: 100%">\r\n        <div class="card-content">\r\n            <panel-control-menu-aside></panel-control-menu-aside>\r\n        </div>\r\n    </div>\r\n  </div>\r\n  <button class="modal-close" (click)="toggleMenuAside()"></button>\r\n</div>'},jmua:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("NVOs"),o=a("Qbdm"),c=a("52hV"),l=a("Nqas"),d=a("7xfG");a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,a,n,i,r,s){this.router=e,this.title=t,this.authService=a,this.route=n,this.location=i,this.pacienteService=r,this.fb=s,this.cargando=!1,this.cargandoMunicipios=!1,this.cargandoLocalidades=!1,this.verFormResponsable=!1,this.mensajeError=new l.a,this.mensajeAdvertencia=new l.a,this.mensajeExito=new l.a,this.Municipios=[],this.Localidades=[]}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Editar Paciente / Admisión"),this.paciente=this.fb.group({nombre:["",[s.Validators.required]],fecha_nacimiento:["",[s.Validators.required]],hora_nacimiento:["",[]],domicilio:["",[s.Validators.required]],colonia:["",[s.Validators.required]],telefono:["",[s.Validators.required]],no_expediente:["",[s.Validators.required]],no_afiliacion:["",[s.Validators.required]],municipio_id:["",[s.Validators.required]],localidad_id:["",[s.Validators.required]],sexo:["",[s.Validators.required]],responsableconocido:["1",[s.Validators.required]],nombre_responsable:["",[s.Validators.required]],parentesco:["",[s.Validators.required]],domicilio_responsable:["",[s.Validators.required]],telefono_responsable:["",[s.Validators.required]]}),this.route.params.subscribe(function(t){e.id=t.id}),console.log(this.id),this.cargarDatos()},e.prototype.cargarMunicipios=function(){var e=this;this.cargandoMunicipios=!0,this.pacienteService.listaMunicipios().subscribe(function(t){e.Municipios=t,e.cargandoMunicipios=!1,console.log("Municipios cargados")},function(t){e.cargandoMunicipios=!1})},e.prototype.cargarLocalidades=function(e){var t=this;this.cargandoLocalidades=!0,this.pacienteService.listaLocalidades(e).subscribe(function(e){t.Localidades=e,t.cargandoLocalidades=!1,console.log("Localidades cargados")},function(e){t.cargandoLocalidades=!1})},e.prototype.cargarDatos=function(){var e=this;this.cargando=!0,console.log("Cargando usuario."),this.pacienteService.ver(this.id).subscribe(function(t){e.cargando=!1,e.datosCargados=!0,t.responsable?e.paciente.patchValue({nombre_responsable:t.responsable.nombre,parentesco:t.responsable.parentesco,domicilio_responsable:t.responsable.domicilio,telefono_responsable:t.responsable.telefono}):(e.verFormResponsable=!0,e.paciente.patchValue({responsableconocido:2,nombre_responsable:1,parentesco:"desconocido",domicilio_responsable:"conocido",telefono_responsable:"conocido"})),e.paciente.patchValue(t),e.cargarMunicipios(),e.cargarLocalidades(t.municipio_id)},function(t){e.cargando=!1,e.mensajeError=new l.a(!0),e.mensajeError=new l.a(!0),e.mensajeError.mostrar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.regresar=function(){this.location.back()},e.prototype.responsable=function(){this.verFormResponsable=!this.verFormResponsable,this.verFormResponsable?this.paciente.patchValue({nombre_responsable:1,parentesco:"desconocido",domicilio_responsable:"conocido",telefono_responsable:"conocido"}):this.paciente.patchValue({nombre_responsable:"",parentesco:"",domicilio_responsable:"",telefono_responsable:""})},e.prototype.enviar=function(){var e=this;this.cargando=!0,this.pacienteService.editar(this.id,this.paciente.value).subscribe(function(t){e.cargando=!1,console.log("Paciente editado."),e.mensajeExito=new l.a(!0),e.mensajeExito.texto="Se han guardado los cambios.",e.mensajeExito.mostrar=!0},function(t){e.cargando=!1,e.mensajeError=new l.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e}();m=u([a.i(n.Component)({selector:"app-editar",template:a("aegp"),styles:[a("Lrjz")]}),p("design:paramtypes",["function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(g=void 0!==o.b&&o.b)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object,"function"==typeof(v=void 0!==r.c&&r.c)&&v||Object,"function"==typeof(b=void 0!==i.Location&&i.Location)&&b||Object,"function"==typeof(y=void 0!==d.a&&d.a)&&y||Object,"function"==typeof(_=void 0!==s.FormBuilder&&s.FormBuilder)&&_||Object])],m);var f,g,h,v,b,y,_},"jo+T":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),e.exports=e.exports.toString()},k7TD:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("6p5m"),s=a("2gJf"),o=a("VR2t"),c=a("qbyw"),l=a("NJ09");a.d(t,"a",function(){return p});var d=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},u=[{path:"panel-control",redirectTo:"/panel-control/sync/estatus",pathMatch:"full"},{path:"panel-control/sync",children:[{path:"",redirectTo:"/panel-control/sync/estatus",pathMatch:"full"},{path:"estatus",component:r.a},{path:"local",component:s.a,canActivate:[l.a],data:{key:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f"}},{path:"central",component:o.a,canActivate:[l.a],data:{key:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f"}}],canActivate:[c.a]}],p=function(){function e(){}return e}();p=d([a.i(n.NgModule)({imports:[i.b.forChild(u)],exports:[i.b]})],p)},kKgL:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("rCTf"),s=(a.n(r),a("EEr4")),o=(a.n(s),a("2Je8")),c=a("5oXY"),l=a("NVOs"),d=a("1APj"),u=(a.n(d),a("h0qH")),p=(a.n(u),a("aV5h")),m=(a.n(p),a("q3ik")),f=(a.n(m),a("+pb+")),g=(a.n(f),a("uCY4")),h=(a.n(g),a("6Yye")),v=(a.n(h),a("Nqas")),b=a("+U6h");a.d(t,"a",function(){return x});var y=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},_=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},x=function(){function e(e,t,a,n,i,r){this.title=e,this.PacienteEgresoService=t,this.route=a,this.router=n,this.location=i,this.fb=r,this.cargando=!1,this.showDialog=!1,this.verForm=!1,this.verFormResponsable=!1,this.verFormArea=!0,this.mensajeError=new v.a,this.mensajeExito=new v.a,this.cargandoMunicipios=!1,this.cargandoLocalidades=!1,this.Municipios=[],this.Localidades=[],this.pacientes=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return e.prototype.ngOnInit=function(){var e=this;this.paciente=this.fb.group({conocido:["1",[l.Validators.required]],responsableconocido:["1",[l.Validators.required]],nombre:["",[l.Validators.required]],fecha_nacimiento:["",[l.Validators.required]],hora_nacimiento:["",[]],domicilio:["",[l.Validators.required]],colonia:["",[l.Validators.required]],telefono:["",[l.Validators.required]],no_expediente:["",[l.Validators.required]],no_afiliacion:["",[l.Validators.required]],municipio_id:["",[l.Validators.required]],localidad_id:["",[l.Validators.required]],sexo:["",[l.Validators.required]],nombre_responsable:["",[l.Validators.required]],parentesco:["",[l.Validators.required]],domicilio_responsable:["",[l.Validators.required]],telefono_responsable:["",[l.Validators.required]],area:["",[l.Validators.required]],trabajo_social:["",[]],juridico:["",[]],ministerio:["",[]]}),this.title.setTitle("Verificación / Admisión"),this.listar(1),this.mensajeError=new v.a,this.mensajeExito=new v.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."+t),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.PacienteEgresoService.buscarCompleta(t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")}),this.cargarMunicipios()},e.prototype.cargarMunicipios=function(){var e=this;this.cargandoMunicipios=!0,this.PacienteEgresoService.listaMunicipios().subscribe(function(t){e.Municipios=t,e.cargandoMunicipios=!1,console.log("Municipios cargados")},function(t){e.cargandoMunicipios=!1})},e.prototype.cargarLocalidades=function(e){var t=this;this.cargandoLocalidades=!0,this.PacienteEgresoService.listaLocalidades(e).subscribe(function(e){t.Localidades=e,t.cargandoLocalidades=!1,console.log("Localidades cargados")},function(e){t.cargandoLocalidades=!1})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.PacienteEgresoService.buscarCompleta(e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1,a.resultadosBusqueda=e.data,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var t=0;t<a.paginasTotalesBusqueda;t++)a.indicePaginasBusqueda.push(t+1);console.log("------"),console.log(e),console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,this.cargando=!0,this.PacienteEgresoService.listaCompleta(e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1,t.pacientes=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("pacientes cargados."),console.log(t.pacientes)},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paciente_conocido=function(){this.verForm=!this.verForm,this.verForm?this.paciente.patchValue({nombre:1,fecha_nacimiento:"1987-01-01",domicilio:"conocido",colonia:"conocido",telefono:"conocido",no_expediente:"conocido",no_afiliacion:"conocido",municipio_id:1,localidad_id:1,sexo:1}):this.paciente.patchValue({nombre:"",fecha_nacimiento:"",domicilio:"",colonia:"",telefono:"",no_expediente:"",no_afiliacion:"",municipio_id:0,localidad_id:0,sexo:1}),this.verFormResponsable&&this.verForm?(this.verFormArea=!1,this.paciente.patchValue({area:""})):(this.verFormArea=!0,this.paciente.patchValue({area:1}))},e.prototype.responsable=function(){this.verFormResponsable=!this.verFormResponsable,this.verFormResponsable?this.paciente.patchValue({nombre_responsable:1,parentesco:"1987-01-01",domicilio_responsable:"conocido",telefono_responsable:"conocido"}):this.paciente.patchValue({nombre_responsable:"",parentesco:"",domicilio_responsable:"",telefono_responsable:""}),this.verFormResponsable&&this.verForm?(this.verFormArea=!1,this.paciente.patchValue({area:""})):(this.verFormArea=!0,this.paciente.patchValue({area:1}))},e.prototype.verifica_area=function(){var e,t,a;e=this.paciente.controls.trabajo_social.value,t=this.paciente.controls.juridico.value,a=this.paciente.controls.ministerio.value,e||t||a?this.paciente.patchValue({area:1}):(this.paciente.patchValue({area:""}),console.log("no entro area"))},e.prototype.enviar=function(){var e,t=this;if(e=0,1!=this.paciente.controls.conocido.value&&1!=this.paciente.controls.responsableconocido.value){var a=void 0,n=void 0,i=void 0;a=this.paciente.controls.trabajo_social.value,n=this.paciente.controls.juridico.value,i=this.paciente.controls.ministerio.value,(a||n||i)&&(e=1)}else e=1;1==e&&this.PacienteEgresoService.crear(this.paciente.value).subscribe(function(e){t.cargando=!1,t.router.navigate(["/pacientes/modulo/ingreso/"+e.id])},function(e){t.cargando=!1,t.mensajeError=new v.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e}();x=y([a.i(n.Component)({selector:"app-verificacion",template:a("CMHd"),styles:[a("Q4yS")]}),_("design:paramtypes",["function"==typeof(j=void 0!==i.b&&i.b)&&j||Object,"function"==typeof(E=void 0!==b.a&&b.a)&&E||Object,"function"==typeof(I=void 0!==c.c&&c.c)&&I||Object,"function"==typeof(P=void 0!==c.a&&c.a)&&P||Object,"function"==typeof(C=void 0!==o.Location&&o.Location)&&C||Object,"function"==typeof(k=void 0!==l.FormBuilder&&l.FormBuilder)&&k||Object])],x);var j,E,I,P,C,k},kZql:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={production:!0,API_URL:"http://api.sial.saludchiapas.gob.mx"}},kqiz:function(e,t){e.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n        <br>\r\n        <nav class="level">\r\n            <div class="level-left">\r\n                <div class="level-item">\r\n                    <h1 class="title">\r\n                        <span class="icon is-medium"><i class="fa fa-thumbs-up"></i></span> Cumplimiento de proveedores\r\n                    </h1>\r\n                </div>\r\n            </div>\r\n\r\n        </nav>\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoEstadisticasGlobales">\r\n            <div class="notification is-white">\r\n                <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando estadisticas globales...</span>\r\n            </div>\r\n        </div>\r\n        <div class="columns is-multiline "  *ngIf="!cargandoEstadisticasGlobales">\r\n            <div class="column is-4" *ngFor="let item of estadisticasGlobales">\r\n                <div class="notification is-white">\r\n                    <h1 class="title" style="font-size:1.2em;  margin-bottom:0.2em;color:#00d1b2">${{ item.total_monto_solicitado | number:\'1.2-2\' }}</h1>\r\n                    <h1 class="title" style="font-size:0.8em; margin-bottom:0.2em;">{{ item.proveedor }}</h1>\r\n                    <hr style="margin: 0.2em 0">\r\n                    <nav class="level"><div class="level-left">Entregado</div><div class="level-right"><b>{{ item.porcentaje_entregado | number:\'1.2-2\' }}%</b></div></nav>\r\n                   \r\n                   \r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="columns is-multiline"  *ngIf="!cargandoEstadisticasGlobales">\r\n            <div class="column is-12" *ngFor="let item of listaEstadisticasProveedores; let  i = index">\r\n                \r\n                <div style="display:block; background:white; border-radius:0.2em; padding: 0.5em 0; min-height:471px" *ngIf="!item.cargando && item.options">\r\n                    <nav class="level" style="margin:1em;">\r\n                        <div class="level-left">\r\n                      <!--      <p><b>{{ item.proveedor }}</b> <small style="color:gray;">Estadística mensual</small></p>-->\r\n                        </div>\r\n                        <div class="level-right">\r\n                            <div>\r\n                                \r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'monto\' }" (click)="item.tipoDatos = \'monto\'; renderGrafica(i)">$ Monto</span>\r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'claves\' }" (click)="item.tipoDatos = \'claves\'; renderGrafica(i)">Claves</span> \r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'insumos\' }" (click)="item.tipoDatos = \'insumos\'; renderGrafica(i)">Insumos</span> \r\n                            </div>\r\n                            \r\n                        </div>\r\n                    </nav>\r\n                    <hr style="margin:0">\r\n                    <chart *ngIf="mostrarGraficas" [options]="item.options" style="display:block;"></chart>\r\n                </div>\r\n\r\n                <div class="is-fullwidth has-text-centered"  *ngIf="item.cargando ">\r\n                    <div class="notification is-white">\r\n                        <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando estadísticas diarias de: <b>{{item.proveedor}}</b>...</span>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},kqq3:function(e,t){e.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary" >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Historial del Paciente\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted "  (click)="regresar()">\r\n                            <span>Regresar</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <br>\r\n            <section class="section" style="background-color: #00d1b2;">\r\n                    <div class="container">\r\n                      <div class="heading">\r\n                        <h1 class="title" style="color: #FFF">Datos del Paciente</h1>\r\n                        <h2 class="subtitle" style="color: #FFF">\r\n                          ID: {{ id_paciente }}<BR>\r\n                          NOMBRE: {{ nombre_paciente }} <BR>\r\n                          LOCALIDAD: {{ localidad_paciente }}<BR>\r\n\r\n\r\n                        </h2>\r\n                      </div>\r\n                    </div>\r\n                  </section>\r\n            \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th></th>\r\n                    <th><abbr title="Paciente ID">ID</abbr></th>\r\n                    <th>Fecha Ingreso</th>\r\n                    <th>Area Ingreso</th>\r\n                    <th>Fecha Egreso</th>\r\n                    <th>Motivo Egreso</th>\r\n                    <th>Unidad</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  >\r\n                    <tr *ngFor="let item of pacientes; let i=index">\r\n                        <th><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></th>\r\n                        <th style="vertical-align: middle;">{{ item.id }}</th>\r\n                        <th style="vertical-align: middle;">{{ item.fecha_hora_ingreso }}</th>\r\n                        <th style="vertical-align: middle;">{{ item[\'estado_triage\'][\'descripcion\'] }}</th>\r\n                        <td style="vertical-align: middle;" *ngIf="item.fecha_hora_egreso">{{item.fecha_hora_egreso }}</td>\r\n                        <th style="vertical-align: middle;" *ngIf="!item.fecha_hora_egreso">--</th>\r\n\r\n                        <td style="vertical-align: middle;" *ngIf="item[\'motivo_egreso\']">{{item[\'motivo_egreso\'][\'descripcion\'] }}</td>\r\n                        <th style="vertical-align: middle;" *ngIf="!item[\'motivo_egreso\']">--</th>\r\n\r\n                        <td style="vertical-align: middle;" *ngIf="item[\'unidad\']">{{item[\'unidad\'][\'nombre\'] }}</td>\r\n                        <th style="vertical-align: middle;" *ngIf="!item[\'unidad\']">--</th>\r\n                        \r\n                        \r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="pacientes.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n               \r\n            </table>\r\n            \r\n            \r\n        </div>\r\n    </div>        \r\n   \r\n</div>\r\n\r\n'},"l+S8":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("5oXY"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("bCl8"),d=a("xTws");a.d(t,"a",function(){return p});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=function(){function e(){}return e}();p=u([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.a,o.a,c.a],declarations:[l.a,d.a],exports:[l.a,d.a]})],p)},lFr4:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.onCerrar=new n.EventEmitter,this.onEnviar=new n.EventEmitter,this.lectura=!1}return e.prototype.ngOnInit=function(){},e.prototype.actualizarTotales=function(){this.insumo.monto=0,this.insumo.cantidad=0;for(var e in this.insumo.lista_clues)this.insumo.monto+=this.insumo.lista_clues[e].cantidad*this.insumo.precio,this.insumo.cantidad+=this.insumo.lista_clues[e].cantidad},e.prototype.eliminarInsumo=function(e,t){for(var a in this.listaClaveAgregadas)if(this.listaClaveAgregadas[a].clave==this.insumo.clave){for(var n in this.listaClaveAgregadas[a].lista)if(this.insumo.lista_clues[t].clues==this.listaClaveAgregadas[a].lista[n]){this.listaClaveAgregadas[a].lista.splice(n,1);break}break}this.insumo.lista_clues.splice(t,1),this.actualizarTotales()},e.prototype.cerrar=function(){this.onCerrar.emit()},e}();i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onCerrar",void 0),i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onEnviar",void 0),i([a.i(n.Input)(),r("design:type",Boolean)],s.prototype,"lectura",void 0),i([a.i(n.Input)(),r("design:type",Object)],s.prototype,"insumo",void 0),i([a.i(n.Input)(),r("design:type",Array)],s.prototype,"listaClaveAgregadas",void 0),s=i([a.i(n.Component)({selector:"pedidos-lista-clues",template:a("3DCO"),styles:[a("OMGn")]}),r("design:paramtypes",[])],s)},lHm1:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},lO27:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".item{cursor:pointer}.item.seleccionado{background:#ccc}.item.seleccionado .icon{color:#fff!important}.item.seleccionado .item-detalle{display:inherit}.item .item-detalle{display:none}.item.asignado{background:#ddd;color:#777}tr.filtro td,tr.filtro th{color:#fff;background:#4a4a4a!important}.contenedor-tabla{overflow:auto;width:100%;height:99%!important;display:block;position:absolute;left:0;top:0}.contenedor-tabla table{border-radius:3px}@media screen and (max-width:768px){.contenedor-tabla{position:relative}.tile.notification{padding:0!important}}",""]),e.exports=e.exports.toString()},ldOH:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return r});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=function(){function e(){}return e}();r=i([a.i(n.Component)({selector:"unidades-medicas-lista",template:a("1+bc")})],r)},lfxQ:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return r});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=function(){function e(){}return e.prototype.transform=function(e,t){return e.filter(function(e){return e.titulo.toLowerCase().includes(t.toLowerCase())})},e}();r=i([a.i(n.Pipe)({name:"buscarModulo"})],r)},lgzy:function(e,t,a){"use strict";var n=a("3j3K"),i=a("EEr4");a.n(i);a.d(t,"a",function(){return s});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=function(){function e(){this.cambiarEntornoSource=new i.Subject,this.entornoCambiado$=this.cambiarEntornoSource.asObservable()}return e.prototype.cambiarEntorno=function(){console.log("Cambiaste de entorno"),this.cambiarEntornoSource.next(!0)},e}();s=r([a.i(n.Injectable)()],s)},ltyQ:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("6yM6"),s=a("5oXY");a.d(t,"a",function(){return c});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=function(){function e(){}return e}();c=o([a.i(n.NgModule)({imports:[i.CommonModule,s.b],exports:[r.a],declarations:[r.a]})],c)},mHS4:function(e,t){e.exports='<menu-farmacia></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},mSAA:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("GiX5"),d=a("Zit5"),u=a("Qew2"),p=a("vq80"),m=a("quI2"),f=a("52hV"),g=a("RHrs"),h=a("30gs"),v=a("nqnc"),b=a("nsII"),y=(a.n(b),a("KR/G"));a.n(y);a.d(t,"a",function(){return x});var _=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},x=function(){function e(){}return e}();x=_([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,g.a,v.a,b.NguiAutoCompleteModule,y.NguiDatetimePickerModule],declarations:[p.a,m.a],providers:[f.a,h.a]})],x)},mc9f:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Zit5"),o=a("52hV"),c=a("8DnP"),l=a("gqAS"),d=a("ogy2"),u=a("yfXU"),p=a("7xfG"),m=a("2LPf"),f=a("jmua"),g=a("Oxla");a.d(t,"a",function(){return v});var h=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},v=function(){function e(){}return e}();v=h([a.i(n.NgModule)({imports:[i.CommonModule,d.a,r.ReactiveFormsModule,s.a,c.a,l.a],declarations:[u.a,m.a,f.a,g.a],providers:[o.a,p.a]})],v)},mdz2:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("+bKV"),s=a("Gip4"),o=a("qbyw"),c=a("NJ09");a.d(t,"a",function(){return u});var l=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},d=[{path:"administrador-central/claves-basicas",children:[{path:"",component:r.a,canActivate:[c.a],data:{key:"r1RX6Yq7fc4CRRI2OJXIPxeBLW3lFP59"}},{path:"nueva",component:s.a,canActivate:[c.a],data:{key:"N9tkWbLzXzdoAyBzcgLc85JPXqvRNvUh"}},{path:"editar/:id",component:s.a,canActivate:[c.a],data:{key:"ityO3IAU1jhIlXnr9WPhINvdr09pQJry"}}],canActivate:[o.a]}],u=function(){function e(){}return e}();u=l([a.i(n.NgModule)({imports:[i.b.forChild(d)],exports:[i.b]})],u)},mpkG:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.buscar=function(e,t,a){return void 0===t&&(t=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:e,page:t,per_page:a}).map(function(e){return e.json().data})},e.prototype.lista=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=20),this.jwtRequest.get(l.URL,null,{page:e,per_page:t}).map(function(e){return e.json().data})},e.prototype.ver=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){var t=e.json().data,a=[];t.roles.map(function(e){a.push(""+e.id)});var n=[];t.unidades_medicas.map(function(e){n.push(e.clues)});var i=[];t.almacenes.map(function(e){i.push(e.id)});var r=t;return r.roles=a,r.unidades_medicas_objs=r.unidades_medicas,r.unidades_medicas=n,r.almacenes=i,r})},e.prototype.crear=function(e){return this.jwtRequest.post(l.URL,e).map(function(e){return e.json().data})},e.prototype.editar=function(e,t){return this.jwtRequest.put(l.URL,e,t).map(function(e){return e.json().data})},e.prototype.eliminar=function(e){return this.jwtRequest.delete(l.URL,e).map(function(e){return e.json().data})},e.prototype.listaUnidadesMedicas=function(){return this.jwtRequest.get("unidades-medicas",null,null).map(function(e){return e.json().data})},e}();c.URL="usuarios",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},mvg0:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".item{cursor:pointer}.item.seleccionado{background:#ccc}.item.seleccionado .icon{color:#fff!important}.item.seleccionado .item-detalle{display:inherit}.item .item-detalle{display:none}.item.asignado{background:#ddd;color:#777}tr.filtro td,tr.filtro th{color:#fff;background:#4a4a4a!important}.contenedor-tabla{overflow:auto;width:100%;height:99%!important;display:block;position:absolute;left:0;top:0}.contenedor-tabla table{border-radius:3px}@media screen and (max-width:768px){.contenedor-tabla{position:relative}.tile.notification{padding:0!important}}",""]),e.exports=e.exports.toString()},mz03:function(e,t){e.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n      \r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:1em;" >\r\n            <section class="hero is-primary"  >\r\n                \r\n                <div class="hero-body" style="position:relative;">                    \r\n                    \r\n                    \r\n                    <div class="container is-fluid">\r\n                        <nav class="level">\r\n                            <div class="level-left">\r\n                              <h1 class="title">\r\n                                  <span class="icon is-medium"><i class="fa fa-exchange"></i></span> $ Transferencias\r\n                              </h1>\r\n                            </div>\r\n                            <div class="level-right">\r\n                                <div class="block">                               \r\n                                  <button class="button is-primary is-inverted" (click)="nuevaTransferenciaArrastrarSaldos()"><span class="icon"><i class="fa fa-arrow-circle-up"></i></span> <span>Arrastrar saldos</span></button>\r\n                                  <button class="button is-primary is-inverted" (click)="nuevaTransferencia()"><span class="icon"><i class="fa fa-plus"></i></span> <span>Nueva transferencia</span></button>\r\n                                </div>\r\n                            </div>\r\n                        </nav>                        \r\n                        <div class="columns">                            \r\n                            <div class="column">\r\n                                <label for="jurisdicciones">Origen:</label>                       \r\n                                <p class="control is-expanded">\r\n                                    <input class="input " type="text" placeholder="CLUES / Nombre" [(ngModel)] = "filtro_clues_origen" >\r\n                                </p>                 \r\n                          \r\n                            </div>\r\n                            <div class="column">\r\n                                <label for="jurisdicciones">Destino:</label>                             \r\n                                <p class="control is-expanded">\r\n                                    <input class="input " type="text" placeholder="CLUES / Nombre" [(ngModel)] = "filtro_clues_destino">\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div class="columns">   \r\n                            <div class="column">\r\n                                <div class="columns">\r\n                                    <div class="column">\r\n                                        <label>Mes:</label>                       \r\n                                        <p class="control is-expanded">\r\n                                            <span class="select is-fullwidth">\r\n                                            <select [(ngModel)]="filtro_mes_origen">\r\n                                                <option value="-1">Todos</option>\r\n                                                <option *ngFor="let item of listaMeses" [value]="item.mes">{{ item.nombre }}</option>\r\n                                            </select>\r\n                                            </span>\r\n                                        </p> \r\n                                    </div>\r\n                                    <div class="column">\r\n                                        <label >Año:</label>                       \r\n                                        <p class="control is-expanded">\r\n                                            <span class="select is-fullwidth">\r\n                                            <select  [(ngModel)]="filtro_anio_origen">\r\n                                                <option value="-1" >Todos</option>\r\n                                                <option *ngFor="let item of listaAnios" [value]="item.anio">{{ item.anio }}</option>\r\n                                            </select>\r\n                                            </span>\r\n                                        </p> \r\n                                    </div>\r\n                                </div>                                \r\n                            </div>\r\n                            <div class="column">\r\n                                <div class="columns">\r\n                                    <div class="column">\r\n                                        <label>Mes:</label>                       \r\n                                        <p class="control is-expanded">\r\n                                            <span class="select is-fullwidth">\r\n                                            <select [(ngModel)]="filtro_mes_destino">\r\n                                                <option value="-1">Todos</option>\r\n                                                <option *ngFor="let item of listaMeses" [value]="item.mes">{{ item.nombre }}</option>\r\n                                            </select>\r\n                                            </span>\r\n                                        </p> \r\n                                    </div>\r\n                                    <div class="column">\r\n                                        <label >Año:</label>                       \r\n                                        <p class="control is-expanded">\r\n                                            <span class="select is-fullwidth">\r\n                                            <select  [(ngModel)]="filtro_anio_destino">\r\n                                                <option value="-1" >Todos</option>\r\n                                                <option *ngFor="let item of listaAnios" [value]="item.anio">{{ item.anio }}</option>\r\n                                            </select>\r\n                                            </span>\r\n                                        </p> \r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <nav class="level">\r\n                            <div class="level-left"></div>\r\n                            <div class="level-right">\r\n                                <div class="block">\r\n                                <button *ngIf=" filtro_clues_origen != \'\'|| filtro_clues_destino != \'\'  || filtro_mes_origen != -1 || filtro_anio_origen != -1 || filtro_mes_destino != -1 || filtro_anio_destino  != -1 " class="button is-primary" (click)="filtro_clues_origen = \'\'; filtro_clues_destino = \'\'; filtro_mes_origen = -1; filtro_anio_origen = -1; filtro_mes_destino = -1; filtro_anio_destino = -1;"><span class="icon"><i class="fa fa-times"></i></span> <span>Limpiar búsqueda</span></button>\r\n                                <button class="button is-primary is-inverted" (click)="listar(1)"><span class="icon"><i class="fa fa-search"></i></span> <span>Buscar</span></button>\r\n                                </div>\r\n                            </div>\r\n                        </nav>\r\n                    \r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            \r\n            <table class="table is-bordered is-striped has-text-centered" style="font-size:0.7em;" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan="3" style="text-align: center;">Origen</th>\r\n                        <th colspan="3" style="text-align: center;">Destino</th>\r\n                        <th colspan="3" style="text-align: center;">Presupuesto transferido</th>\r\n                        <th colspan="2"></th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th style="text-align: center;">Clues</th>\r\n                        <th style="text-align: center;">Mes</th>\r\n                        <th style="text-align: center;">Año</th>\r\n                        <th style="text-align: center;">Clues</th>\r\n                        <th style="text-align: center;">Mes</th>\r\n                        <th style="text-align: center;">Año</th>\r\n                        <th style="text-align: center;"><abbr title="Causes">CA</abbr></th>\r\n                        <th style="text-align: center;"><abbr title="No causes">NCA</abbr></th>\r\n                        <th style="text-align: center;"><abbr title="Material de curación">MC</abbr></th>                        \r\n                        <th style="text-align: center;">Usuario</th>\r\n                        <th style="text-align: center;">Fecha</th>                    \r\n                    </tr>\r\n                </thead>\r\n                \r\n                <tbody>\r\n                    <tr *ngFor="let item of lista; let i=index">                        \r\n                        <td style="vertical-align: middle; text-align: center;">\r\n                            <abbr title="{{ item.almacen_origen_nombre }}"><span class="icon is-small"><i class="fa fa-{{(item.almacen_origen_tipo == \'ALMPAL\')?\'hospital-o\':\'building\'}}"></i></span></abbr>\r\n                            <abbr title="{{ item.unidad_medica_origen }}">{{ item.clues_origen }}</abbr>\r\n                        </td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.mes_origen }}</td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.anio_origen }}</td>\r\n                        <td style="vertical-align: middle; text-align: center;">\r\n                            <abbr title="{{ item.almacen_destino_nombre }}"><span class="icon is-small"><i class="fa fa-{{(item.almacen_destino_tipo == \'ALMPAL\')?\'hospital-o\':\'building\'}}"></i></span></abbr>\r\n                            <abbr title="{{ item.unidad_medica_destino }}">{{ item.clues_destino }}</abbr>\r\n                        </td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.mes_destino }}</td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.anio_destino }}</td>\r\n                        <td style="vertical-align: middle; text-align: right;">{{ item.causes  | currency:\'USD\':true:\'1.2-2\' }}</td>\r\n                        <td style="vertical-align: middle; text-align: right;">{{ item.no_causes  | currency:\'USD\':true:\'1.2-2\'}}</td>\r\n                        <td style="vertical-align: middle; text-align: right;">{{ item.material_curacion | currency:\'USD\':true:\'1.2-2\' }}</td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.usuario_id }}</td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.created_at }}</td>\r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="11" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina"></paginacion>         \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<!-- Nueva Transferencia -->\r\n<div class="modal" [ngClass]="{ \'is-active\': mostrarVentanaNuevaTransferencia }">\r\n  <div class="modal-background" (click)="mostrarVentanaNuevaTransferencia = false"></div>\r\n  <div class="modal-card" style="width:95%; height: 100%;">\r\n    <header class="modal-card-head">\r\n      <p class="modal-card-title"><span class="icon"><i class="fa fa-exchange"></i></span> Nueva transferencia</p>\r\n      <button class="delete" (click)="mostrarVentanaNuevaTransferencia = false"></button>\r\n    </header>\r\n    <section class="modal-card-body">\r\n        <div class="columns">\r\n            <div class="column">\r\n                <label><b>Unidad Medica Origen:</b></label>\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                    <select #cluesOrigen  (change)="obtenerPresupuestoOrigen()"  [(ngModel)]="transaccion_clues_origen">\r\n                        <!--option [ngValue]="{clues:\'\'}" [selected]="true">Elija una unidad médica</option-->\r\n                        <option *ngFor="let item of listaClues" [ngValue]="item">{{ item.clues }} - {{ item.unidad_medica.nombre }}</option>\r\n                    </select>\r\n                    </span>\r\n                </p> \r\n\r\n                <label><b>Almacen Origen:</b></label>      \r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                    <select #almacenOrigen  (change)="obtenerPresupuestoOrigen()"  [(ngModel)]="transaccion_almacen_origen">\r\n                        <option value="">Elija una unidad médica</option>\r\n                        <option *ngFor="let item of listaAlmacenesOrigen" [value]="item.id">[{{item.clues}}] {{ item.nombre }}</option>\r\n                    </select>\r\n                    </span>\r\n                </p> \r\n\r\n                <div class="columns">\r\n                    <div class="column">\r\n                        <label>Mes:</label>                       \r\n                        <p class="control is-expanded">\r\n                            <span class="select is-fullwidth">\r\n                            <select #mesOrigen  (change)="obtenerPresupuestoOrigen()"  [(ngModel)]="transaccion_mes_origen">\r\n                                <option value="-1">Elija un mes</option>\r\n                                <option *ngFor="let item of listaMeses" [value]="item.mes">{{ item.nombre }}</option>\r\n                            </select>\r\n                            </span>\r\n                        </p> \r\n                    </div>\r\n                    <div class="column">\r\n                        <label >Año:</label>                       \r\n                        <p class="control is-expanded">\r\n                            <span class="select is-fullwidth">\r\n                            <select #anioOrigen (change)="obtenerPresupuestoOrigen()"  [(ngModel)]="transaccion_anio_origen">\r\n                                <option value="-1" *ngIf="listaAnios.length>1">Elija un año</option>\r\n                                <option *ngFor="let item of listaAnios" [value]="item.anio">{{ item.anio }}</option>\r\n                            </select>\r\n                            </span>\r\n                        </p> \r\n                    </div>\r\n                </div>\r\n                <table class="table" *ngIf="!datosOrigenValidos && !conPresupuestoOrigen">\r\n                    <tbody>\r\n                        <tr *ngIf="!conPresupuestoOrigen">\r\n                            <th>Este almacen no tiene presupuesto asignado en el mes especificado</th>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <table class="table" *ngIf="datosOrigenValidos">\r\n                    <thead>\r\n                        <tr><th colspan="2">Presupuesto origen (disponible):</th></tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf="conPresupuestoOrigen">\r\n                            <th>Causes</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoOrigen.causes < 0}"> <span *ngIf="cargandoPresupuestoOrigen"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoOrigen">{{ presupuestoOrigen.causes | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                        <tr *ngIf="conPresupuestoOrigen">\r\n                            <th>No causes</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoOrigen.no_causes < 0}"> <span *ngIf="cargandoPresupuestoOrigen"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoOrigen">{{ presupuestoOrigen.no_causes | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                        <tr *ngIf="conPresupuestoOrigen">\r\n                            <th>Material de curación</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoOrigen.material_curacion < 0}"> <span *ngIf="cargandoPresupuestoOrigen"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoOrigen">{{ presupuestoOrigen.material_curacion | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                    </tbody>                    \r\n                </table>\r\n            </div>\r\n            <div class="column is-1">\r\n                <div class="has-text-centered">\r\n                    <div class="field is-grouped">\r\n                        <p class="control">\r\n                            <a class="button is-large is-fullwidth" [ngClass]="{\'is-active\':ligarCluesOrigenDestino}" (click)="ligarCluesOrigenDestino = !ligarCluesOrigenDestino" title="Ligar la CLUES de Origen y Destino">\r\n                                <span class="icon is-large">\r\n                                <i class="fa" [ngClass]="{\'fa-lock\':ligarCluesOrigenDestino,\'fa-unlock\':!ligarCluesOrigenDestino}"></i>\r\n                                </span>\r\n                            </a>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>        \r\n            <div class="column">\r\n                <label ><b>Unidad Medica Destino:</b></label>\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                    <select #cluesDestino (change)="obtenerPresupuestoDestino()" [(ngModel)]="transaccion_clues_destino" [disabled]="ligarCluesOrigenDestino">\r\n                        <!--option value="">Elija una unidad médica</option-->\r\n                        <option *ngFor="let item of listaClues" [ngValue]="item">{{ item.clues }} - {{ item.unidad_medica.nombre }}</option>\r\n                    </select>\r\n                    </span>\r\n                </p>\r\n\r\n                <label ><b>Almacen Destino:</b></label>\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                    <select #almacenOrigen  (change)="obtenerPresupuestoDestino()"  [(ngModel)]="transaccion_almacen_destino">\r\n                        <option value="">Elija una unidad médica</option>\r\n                        <option *ngFor="let item of listaAlmacenesDestino" [value]="item.id">[{{item.clues}}] {{ item.nombre }}</option>\r\n                    </select>\r\n                    </span>\r\n                </p> \r\n\r\n                <div class="columns">\r\n                    <div class="column">\r\n                        <label >Mes:</label>                       \r\n                        <p class="control is-expanded">\r\n                            <span class="select is-fullwidth">\r\n                            <select #mesDestino (change)="obtenerPresupuestoDestino()" [(ngModel)]="transaccion_mes_destino">\r\n                                <option value="-1">Elija un mes</option>\r\n                                <option *ngFor="let item of listaMeses" [value]="item.mes">{{ item.nombre }}</option>\r\n                            </select>\r\n                            </span>\r\n                        </p> \r\n                    </div>\r\n                    <div class="column">\r\n                        <label>Año:</label>                       \r\n                        <p class="control is-expanded">\r\n                            <span class="select is-fullwidth">\r\n                            <select #anioDestino  (change)="obtenerPresupuestoDestino()" [(ngModel)]="transaccion_anio_destino">\r\n                                <option value="-1" *ngIf="listaAnios.length>1">Elija un año</option>\r\n                                <option *ngFor="let item of listaAnios" value="{{item.anio}}">{{ item.anio }}</option>\r\n                            </select>\r\n                            </span>\r\n                        </p> \r\n                    </div>\r\n                </div>\r\n                <table class="table" *ngIf="!datosDestinoValidos && !conPresupuestoDestino">\r\n                    <tbody>\r\n                        <tr *ngIf="!conPresupuestoDestino">\r\n                            <th>Este almacen no tiene presupuesto asignado en el mes especificado</th>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <table class="table" *ngIf="datosDestinoValidos">\r\n                    <thead>\r\n                        <tr><th colspan="2">Presupuesto destino (disponible):</th></tr>\r\n                    </thead>\r\n                     <tbody>\r\n                        <tr *ngIf="conPresupuestoDestino">\r\n                            <th>Causes</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoDestino.causes < 0}"> <span *ngIf="cargandoPresupuestoDestino"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoDestino">{{ presupuestoDestino.causes | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                        <tr *ngIf="conPresupuestoDestino">\r\n                            <th>No causes</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoDestino.no_causes < 0}"> <span *ngIf="cargandoPresupuestoDestino"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoDestino">{{ presupuestoDestino.no_causes | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                        <tr *ngIf="conPresupuestoDestino">\r\n                            <th>Material de curación</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoDestino.material_curacion < 0}"> <span *ngIf="cargandoPresupuestoDestino"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoDestino">{{ presupuestoDestino.material_curacion | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                    </tbody>                    \r\n                </table>\r\n            </div>\r\n        </div>\r\n        <div *ngIf="datosDestinoValidos && datosOrigenValidos">\r\n            <h1 class="title is-4">Presupuesto a transferir:</h1>\r\n            <div class="columns">\r\n                <div class="column">\r\n                    <div class="field">\r\n                        <label for="monto">Causes:</label>\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="$ 0.00" [(ngModel)] = "monto_transferir_causes" [ngClass]="{ \'is-danger\': errores_transferencia.causes != \'\' }" >\r\n                        </p>\r\n                        <p class="help is-danger" *ngIf="errores_transferencia.causes != \'\'">{{ errores_transferencia.causes }}</p>\r\n                    </div>        \r\n                </div>\r\n                <div class="column">\r\n                    <div class="field">\r\n                        <label for="monto">No Causes:</label>\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="$ 0.00" [(ngModel)] = "monto_transferir_no_causes" [ngClass]="{ \'is-danger\': errores_transferencia.no_causes != \'\' }" >\r\n                        </p> \r\n                        <p class="help is-danger" *ngIf="errores_transferencia.no_causes != \'\'">{{ errores_transferencia.no_causes }}</p>\r\n                    </div>        \r\n                </div>\r\n                <div class="column">\r\n                    <div class="field">\r\n                        <label for="monto">Material de curación:</label>\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="$ 0.00" [(ngModel)] = "monto_transferir_material_curacion" [ngClass]="{ \'is-danger\': errores_transferencia.material_curacion != \'\' }" >\r\n                        </p> \r\n                        <p class="help is-danger" *ngIf="errores_transferencia.material_curacion != \'\'">{{ errores_transferencia.material_curacion }}</p>\r\n                    </div>        \r\n                </div>\r\n            </div>\r\n        </div>\r\n      \r\n      \r\n    </section>\r\n    <footer class="modal-card-foot">\r\n      <a class="button is-danger" (click)="realizarTransferencia()" [ngClass]=" { \'is-loading\': enviando_transferencia, \'is-disabled\': !datosDestinoValidos || !datosOrigenValidos || ( (monto_transferir_causes == 0 || !monto_transferir_causes) && (monto_transferir_no_causes == 0 || !monto_transferir_no_causes) && (monto_transferir_material_curacion == 0 || !monto_transferir_material_curacion)  ) }"><span class="icon"><i class="fa fa-exchange"></i></span> <span>Realizar transferencia</span></a>\r\n      <a class="button" (click)="mostrarVentanaNuevaTransferencia = false">Cerrar</a>\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n\r\n<!-- Arrastrar Saldos -->\r\n<div class="modal" [ngClass]="{ \'is-active\': mostrarVentanaArrastrarSaldos }">\r\n  <div class="modal-background" (click)="mostrarVentanaArrastrarSaldos = false"></div>\r\n  <div class="modal-card" style="width:95%; height: 100%;">\r\n    <header class="modal-card-head">\r\n      <p class="modal-card-title"><span class="icon"><i class="fa fa-arrow-circle-up"></i></span> Transferir saldos al mes actual</p>\r\n      <button class="delete" (click)="mostrarVentanaArrastrarSaldos = false"></button>\r\n    </header>\r\n    <section class="modal-card-body">\r\n        <div class="field">\r\n            <label>Mes/Año:</label>                       \r\n            <p class="control is-expanded">\r\n                <span class="select is-fullwidth">\r\n                <select   (change)="obtenerCluesConSaldo()"  [(ngModel)]="fecha_arrastrar_saldos">\r\n                    <option value="-1">Elija una fecha:</option>\r\n                    <option *ngFor="let item of listaMesesAniosAnteriorFechaActual" [value]="item.fecha">{{ item.mes_nombre }}/{{ item.anio }}</option>\r\n                </select>\r\n                </span>\r\n            </p> \r\n        </div>\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargando_clues_con_saldo">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <table class="table" style="font-size:0.8em;" *ngIf="fecha_arrastrar_saldos != -1 && !cargando_clues_con_saldo">\r\n            <thead>\r\n                <tr>\r\n                    <td style="width:42px; cursor:pointer;" (click)="seleccionarTodasCluesConSaldo()">\r\n                      <span class="icon" style="color:#00d1b2"><i class="fa" [ngClass]="{ \'fa-square-o\': !todas_clues_con_saldo_seleccionadas, \'fa-check-square\': todas_clues_con_saldo_seleccionadas }"></i></span>\r\n                    </td>\r\n                    <th style="text-align: center;">Clues</th>\r\n                    <th >Nombre</th>\r\n                    <th style="text-align: center;"><abbr title="Causes">CA</abbr></th>\r\n                    <th style="text-align: center;"><abbr title="No causes">NCA</abbr></th>\r\n                    <th style="text-align: center;"><abbr title="Material de curación">MC</abbr></th>   \r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor="let item of listaCluesConSaldo" (click)="item.seleccionada = !item.seleccionada" style="cursor:pointer">\r\n                    <td><span class="icon"><i class="fa" [ngClass]="{ \'fa-square-o\': !item.seleccionada, \'fa-check-square\': item.seleccionada }"></i></span></td>\r\n                    <td style="text-align: center;">{{ item.clues }}</td>\r\n                    <td>{{ item.unidad_medica.nombre }}</td>\r\n                    <td style="text-align: right;">{{ item.causes_disponible | currency:\'USD\':true:\'1.2-2\' }}</td>\r\n                    <td style="text-align: right;">{{ item.no_causes_disponible | currency:\'USD\':true:\'1.2-2\' }}</td>\r\n                    <td style="text-align: right;">{{ item.material_curacion_disponible | currency:\'USD\':true:\'1.2-2\' }}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n      \r\n    </section>\r\n    <footer class="modal-card-foot">\r\n      <a class="button is-danger" (click)="transferirSaldosAlMesActual()" [ngClass]=" { \'is-disabled\': fecha_arrastrar_saldos == -1, \'is-loading\': enviando_transferencia_saldos_mes_actual  }"><span class="icon"><i class="fa fa-exchange"></i></span> <span> Transferir saldos al mes actual</span></a>\r\n      <a class="button" (click)="mostrarVentanaArrastrarSaldos = false">Cerrar</a>\r\n    </footer>\r\n  </div>\r\n</div>'},"n/1k":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},nJrw:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333;position:relative}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-primary h1{color:#fff}.top-bar.is-danger{background:#ff3860;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.top-bar.is-dark h1{color:#fff}",""]),e.exports=e.exports.toString()},nL84:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},nQIc:function(e,t,a){"use strict";var n=a("3j3K"),i=a("EEr4");a.n(i);a.d(t,"a",function(){return s});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=function(){function e(){this.bloquearPantallaSource=new i.Subject,this.pantallaBloqueada$=this.bloquearPantallaSource.asObservable()}return e.prototype.bloquearPantalla=function(){localStorage.removeItem("bloquear_pantalla"),localStorage.setItem("bloquear_pantalla","true"),this.bloquearPantallaSource.next(!0)},e.prototype.desbloquearPantalla=function(){localStorage.removeItem("bloquear_pantalla"),this.bloquearPantallaSource.next(!1)},e}();s=r([a.i(n.Injectable)()],s)},nh4S:function(e,t){e.exports='<menu-farmacia [modulo]="\'Pedidos\'" [icono]="\'assets/icono-pedidos.svg\'" [url]="\'/almacen/pedidos\'"></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n      <menu-lateral></menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; overflow:hidden; border-radius:1em; width:100%;margin-bottom:1em;">\r\n            <table class="table" style="min-width:100%; font-size:0.8em; margin-bottom:0.2em;margin-top:0.2em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Presupuesto anual</th>\r\n                        <th style="text-align:center">Autorizado</th>\r\n                        <th style="text-align:center">Comprometido</th>\r\n                        <th style="text-align:center">Devengado</th>\r\n                        <th style="text-align:center">Disponible</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngIf="!presupuesto">\r\n                        <th colspan="5" style="text-align:center"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando Presupuesto...</th>\r\n                    </tr>\r\n                    <tr *ngIf="presupuesto">\r\n                        <th>Causes y Materia de Curación</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ (presupuesto.causes_modificado + presupuesto.material_curacion_modificado) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning">$ {{ (presupuesto.causes_comprometido + presupuesto.material_curacion_comprometido) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ (presupuesto.causes_devengado + presupuesto.material_curacion_devengado) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ (presupuesto.causes_disponible + presupuesto.material_curacion_disponible) | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr *ngIf="presupuesto">\r\n                        <th>No causes</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.no_causes_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning">$ {{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.no_causes_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr *ngIf="presupuesto">\r\n                        <th>Total</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ ( presupuesto.no_causes_modificado + presupuesto.causes_modificado + presupuesto.material_curacion_modificado) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning">$ {{ ( presupuesto.no_causes_comprometido + presupuesto.causes_comprometido + presupuesto.material_curacion_comprometido) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ ( presupuesto.no_causes_devengado + presupuesto.causes_devengado + presupuesto.material_curacion_devengado) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ ( presupuesto.no_causes_disponible + presupuesto.causes_disponible + presupuesto.material_curacion_disponible) | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n         </div>\r\n\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa {{ icono }}"></i></span> {{ titulo }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                            </p>\r\n                            <!--p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/almacen/pedidos/nuevo">\r\n                                <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p-->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th><abbr title="Folio del pedido">Folio</abbr></th>\r\n                        <th>Nombre del Pedido</th>\r\n                        <th>Fecha <span *ngIf="status == \'PS\'">(expiración)</span></th>\r\n                        <th>Claves</th>\r\n                        <th>Cantidad</th>\r\n                        <th>Monto</th>\r\n                        <th style="text-align:center;" width="1">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pedidos; let i=index" [ngClass]="{\'proyecto-estatus-normal\':(item.status == \'BR\' || item.status == \'PS\'),\'proyecto-estatus-azul\':item.status == \'EF\',\'proyecto-estatus-rojo\':item.status == \'EX-CA\',\'proyecto-estatus-amarillo\':item.status == \'EX\',\'proyecto-estatus-verde\':item.status == \'FI\'}">\r\n                        <th style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            <span class="icon"><i class="fa fa-{{(item.tipo_pedido_id==\'PFS\')?\'building\':\'hospital-o\'}}"></i></span>\r\n                            {{ item.folio?item.folio:\'S/F\' }}</a>\r\n                        </th>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.descripcion }}</a></td>\r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.fecha | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias?item.expira_en_dias:\'hoy\'}})</span></a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_claves_recibidas || 0) | number }} / {{ item.total_claves_solicitadas | number }} [{{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_cantidad_recibida || 0) | number }} / {{ item.total_cantidad_solicitada | number }} [{{(item.total_cantidad_recibida/item.total_cantidad_solicitada)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            $ {{ (item.total_monto_recibido || 0) | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} [{{(item.total_monto_recibido/item.total_monto_solicitado)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando && item.status == \'BR\'" class="status-rojo" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                            <a *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias >= 0" routerLink="/almacen/pedidos/recepcion/{{item.id}}" title="Recibir pedido"><span class="icon"><i class="fa fa-truck"></i></span></a>\r\n                            <span *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias < 0" class="tag is-danger" title="Expirado"><span class="icon"><i class="fa fa-exclamation"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'FI\'" class="estatus-verde" title="Finalizado"><span class="icon"><i class="fa fa-check-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX-CA\'" class="estatus-rojo" title="Expirado - Cancelado"><span class="icon"><i class="fa fa-times-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX\'" class="estatus-amarillo" title="Expirado"><span class="icon"><i class="fa fa-exclamation-circle"></i></span></span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf="pedidos.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index" [ngClass]="{\'proyecto-estatus-normal\':item.status == \'BR\',\'proyecto-estatus-azul\':item.status == \'EF\',\'proyecto-estatus-rojo\':item.status == \'EX-CA\',\'proyecto-estatus-amarillo\':item.status == \'EX\',\'proyecto-estatus-verde\':item.status == \'FI\'}">\r\n                        <th style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            <span class="icon"><i class="fa fa-{{(item.tipo_pedido_id==\'PA\')?\'hospital-o\':\'building\'}}"></i></span>\r\n                            {{ item.folio?item.folio:\'S/F\' }}</a>\r\n                        </th>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.descripcion }}</a></td>\r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.fecha | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias?item.expira_en_dias:\'hoy\'}})</span></a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_claves_recibidas || 0) | number }} / {{ item.total_claves_solicitadas | number }} [{{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_cantidad_recibida || 0) | number }} / {{ item.total_cantidad_solicitada | number }} [{{(item.total_cantidad_recibida/item.total_cantidad_solicitada)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            $ {{ (item.total_monto_recibido || 0) | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} [{{(item.total_monto_recibido/item.total_monto_solicitado)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando && item.status == \'BR\'" class="status-rojo" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                            <a *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias >= 0" routerLink="/almacen/pedidos/recepcion/{{item.id}}" title="Recibir pedido"><span class="icon"><i class="fa fa-truck"></i></span></a>\r\n                            <span *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias < 0" class="tag is-danger" title="Expirado"><span class="icon"><i class="fa fa-exclamation"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'FI\'" class="estatus-verde" title="Finalizado"><span class="icon"><i class="fa fa-check-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX-CA\'" class="estatus-rojo" title="Expirado - Cancelado"><span class="icon"><i class="fa fa-times-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX\'" class="estatus-amarillo" title="Expirado"><span class="icon"><i class="fa fa-exclamation-circle"></i></span></span>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <!--p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p-->\r\n</div>'},nqnc:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("BmPo"),s=a("AD+J"),o=a("3MNG");a.d(t,"a",function(){return l});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=function(){function e(){}return e}();l=c([a.i(n.NgModule)({imports:[i.CommonModule,o.b.forRoot()],exports:[r.a,s.a],declarations:[r.a,s.a]})],l)},oW6u:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),e.exports=e.exports.toString()},oafO:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("5oXY"),s=a("Gvdl"),o=(a.n(s),a("2vVT")),c=(a.n(o),a("52hV")),l=a("nQIc"),d=a("kZql");a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,a,n,i){this.http=e,this.authService=t,this.bloquearPantallaService=a,this.router=n,this.jwtHelper=i}return e.prototype.get=function(e,t,a){void 0===t&&(t=null),void 0===a&&(a=null);var n=this.request("get",e,t,a);return n},e.prototype.post=function(e,t){return void 0===t&&(t=null),this.request("post",e,null,t)},e.prototype.put=function(e,t,a){return void 0===t&&(t=null),void 0===a&&(a=null),this.request("put",e,t,a)},e.prototype.delete=function(e,t,a){return void 0===t&&(t=null),void 0===a&&(a=null),this.request("delete",e,t)},e.prototype.request=function(e,t,a,n){var r=this;if(void 0===a&&(a=null),void 0===n&&(n={}),null==localStorage.getItem("token"))return null;var o=JSON.parse(localStorage.getItem("server_info")),c=(this.jwtHelper.decodeToken(localStorage.getItem("token")),JSON.parse(localStorage.getItem("usuario"))),l={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")};c.clues_activa&&(l["X-Clues"]=c.clues_activa.clues),c.almacen_activo&&(l["X-Almacen-Id"]=c.almacen_activo.id),c.proveedor_activo&&(l["X-Proveedor-Id"]=c.proveedor_activo.id);var u=new i.Headers(l);return new s.Observable(function(s){if(r.jwtHelper.isTokenExpired(localStorage.getItem("token"))){console.log("El token ha expirado. Comprobando caducidad para renovar.");var l=Number(o.token_refresh_ttl);l=Number.isNaN(l)?0:l;var p=r.jwtHelper.getTokenExpirationDate(localStorage.getItem("token")),m=new Date(p.getTime()+6e4*l),f=new Date;m.getTime()-f.getTime()<=0?(console.log("El token ha caducado completamente y no será posible renovarlo."),console.log("Bloqueando aplicación."),r.bloquearPantallaService.bloquearPantalla()):r.authService.refreshToken().subscribe(function(){console.log("Enviando petición con token renovado.");var o={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")};if(c.clues_activa&&(o["X-Clues"]=c.clues_activa.clues),c.almacen_activo&&(o["X-Almacen-Id"]=c.almacen_activo.id),c.proveedor_activo&&(o["X-Proveedor-Id"]=c.proveedor_activo.id),u=new i.Headers(o),"get"==e){var l=new i.URLSearchParams;if(null!=n)for(var p in n)n.hasOwnProperty(p)&&l.set(p,n[p]);null==a?r.http.get(d.a.API_URL+"/"+t,{headers:u,search:l}).subscribe(function(e){s.next(e)},function(e){s.error(e)}):r.http.get(d.a.API_URL+"/"+t+"/"+a,{headers:u,search:l}).subscribe(function(e){s.next(e)},function(e){s.error(e)})}"post"==e&&r.http.post(d.a.API_URL+"/"+t,n,{headers:u}).subscribe(function(e){s.next(e)},function(e){s.error(e)}),"put"==e&&null!=a&&r.http.put(d.a.API_URL+"/"+t+"/"+a,n,{headers:u}).subscribe(function(e){s.next(e)},function(e){s.error(e)}),"delete"==e&&null!=a&&r.http.delete(d.a.API_URL+"/"+t+"/"+a,{headers:u}).subscribe(function(e){s.next(e)},function(e){s.error(e)})},function(e){console.log("Token caducado. Se intento renovar pero el servidor no lo permitió, debido a que se superó el tiempo límite."),console.log("Bloqueando aplicación."),r.bloquearPantallaService.bloquearPantalla()})}else{if("get"==e){var g=new i.URLSearchParams;if(null!=n)for(var h in n)n.hasOwnProperty(h)&&g.set(h,n[h]);null==a?r.http.get(d.a.API_URL+"/"+t,{headers:u,search:g}).subscribe(function(e){s.next(e)},function(e){s.error(e)}):r.http.get(d.a.API_URL+"/"+t+"/"+a,{headers:u,search:g}).subscribe(function(e){s.next(e)},function(e){s.error(e)})}"post"==e&&r.http.post(d.a.API_URL+"/"+t,n,{headers:u}).subscribe(function(e){s.next(e)},function(e){s.error(e)}),"put"==e&&null!=a&&r.http.put(d.a.API_URL+"/"+t+"/"+a,n,{headers:u}).subscribe(function(e){s.next(e)},function(e){s.error(e)}),"delete"==e&&null!=a&&r.http.delete(d.a.API_URL+"/"+t+"/"+a,{headers:u}).subscribe(function(e){s.next(e)},function(e){s.error(e)})}})},e}();m=u([a.i(n.Injectable)(),p("design:paramtypes",["function"==typeof(f=void 0!==i.Http&&i.Http)&&f||Object,"function"==typeof(g=void 0!==c.a&&c.a)&&g||Object,"function"==typeof(h=void 0!==l.a&&l.a)&&h||Object,"function"==typeof(v=void 0!==r.a&&r.a)&&v||Object,"function"==typeof(b=void 0!==o.JwtHelper&&o.JwtHelper)&&b||Object])],m);var f,g,h,v,b},ogy2:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("yfXU"),s=a("2LPf"),o=a("jmua"),c=a("Oxla"),l=a("qbyw"),d=a("NJ09");a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=[{path:"paciente",children:[{path:"",component:r.a,canActivate:[d.a],data:{key:"XE1pZJV6ZprLc0vP45Pkkpm2UlOJEBqV"}},{path:"nuevo",component:s.a,canActivate:[d.a],data:{key:"XE1pZJV6ZprLc0vP45Pkkpm2UlOJEBqV"}},{path:"editar/:id",component:o.a,canActivate:[d.a],data:{key:"XE1pZJV6ZprLc0vP45Pkkpm2UlOJEBqV"}},{path:"historial/:id",component:c.a,canActivate:[d.a],data:{key:"XE1pZJV6ZprLc0vP45Pkkpm2UlOJEBqV"}}],canActivate:[l.a]}],m=function(){function e(){}return e}();m=u([a.i(n.NgModule)({imports:[i.b.forChild(p)],exports:[i.b]})],m)},ok90:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.onSiguiente=new n.EventEmitter,this.onAnterior=new n.EventEmitter,this.onListar=new n.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.siguiente=function(){console.log("siguiente"),this.onSiguiente.emit()},e.prototype.anterior=function(){console.log("anterior"),this.onAnterior.emit()},e.prototype.listar=function(e){void 0===e&&(e=1),console.log("listar:"+e),this.onListar.emit(e)},e}();i([a.i(n.Input)(),r("design:type",Number)],s.prototype,"total",void 0),i([a.i(n.Input)(),r("design:type",Number)],s.prototype,"paginasTotales",void 0),i([a.i(n.Input)(),r("design:type",Number)],s.prototype,"resultadosPorPagina",void 0),i([a.i(n.Input)(),r("design:type",Number)],s.prototype,"paginaActual",void 0),i([a.i(n.Input)(),r("design:type",Array)],s.prototype,"indicePaginas",void 0),i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onSiguiente",void 0),i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onAnterior",void 0),i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onListar",void 0),s=i([a.i(n.Component)({selector:"paginacion",template:a("Cqnt"),styles:[a("1vcR")]}),r("design:paramtypes",[])],s)},okgc:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},ooTp:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.title=e,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return e.prototype.ngOnInit=function(){this.title.setTitle("Almacén / Laboratorio"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[],this.accesosDirectos=[];var e=JSON.parse(localStorage.getItem("usuario")),t=e.permisos.split("|");if(t.length>0){for(var a in this.modulos)e:for(var n in t)if(t[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break e}for(var a in this.accesosDirectos)e:for(var n in t)if(t[n]==this.accesosDirectos[a].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[a]);break e}}},e}();o=r([a.i(n.Component)({selector:"app-index-laboratorio",template:a("NhMh"),styles:[a("MwdP")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},osje:function(e,t){e.exports='<listar #ctrl URL="inventario" titulo="Inventario"></listar>\r\n<menu-farmacia [modulo]="\'Inventario\'" [icono]="\'assets/icono-salidas.svg\'" [url]="\'/almacen/inventario\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    \r\n                    <div class="container is-fluid">\r\n                        <span></span>\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Inventario\r\n                            </h1>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!ctrl.cargando" style="min-width:100%; font-size:1.2em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th style="text-align: center;">Clave</th>\r\n                        <th>Descripción</th>\r\n                        <th style="text-align: right;">Existencia</th>\r\n                        <th style="text-align: right;">Existencia Unidosis</th>\r\n                        <th style="text-align: center;">Actualizado</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.clave_insumo_medico }}</a></th>\r\n                        <td style="vertical-align: middle;">\r\n                            <a (click)="select_insumo_autocomplete(item)">\r\n                                <p class="title is-5"> <small>{{ item.descripcion }} </small></p>\r\n                                    <p class="subtitle is-6">\r\n                                        <label *ngIf="item.es_causes==1" class="tag is-success" ><strong>Causes </strong></label>\r\n                                        <label *ngIf="item.es_causes==0" class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);">\r\n                                            <strong>No Causes </strong> \r\n                                        </label>\r\n                                        <label *ngIf="item.es_unidosis==1" class="tag is-warning" ><strong>Unidosis</strong></label>\r\n                                    </p>\r\n                            </a>\r\n                        </td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.existencia }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.existencia_unidosis }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.updated_at | date}} </a></td>\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.clave_insumo_medico }}</a></th>\r\n                        <td style="vertical-align: middle;">\r\n                            <a (click)="select_insumo_autocomplete(item)">\r\n                                <p class="title is-5"> <small>{{ item.descripcion }} </small></p>\r\n                                    <p class="subtitle is-6">\r\n                                        <label *ngIf="item.es_causes==1" class="tag is-success" ><strong>Causes </strong></label>\r\n                                        <label *ngIf="item.es_causes==0" class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);">\r\n                                            <strong>No Causes </strong> \r\n                                        </label>\r\n                                        <label *ngIf="item.es_unidosis==1" class="tag is-warning" ><strong>Unidosis</strong></label>\r\n                                    </p>\r\n                            </a>\r\n                        </td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.existencia }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.existencia_unidosis }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.updated_at | date}} </a></td>\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="modal" id="verLotes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card" style="width: 60%;">\r\n        <header class="modal-card-head" style="background: #00d1b2;">\r\n            <p class="modal-card-title" style="width: 200px; color:#FFF;">\r\n                <span class="icon is-medium"><i class="fa fa-medkit"></i></span> &nbsp; \r\n                <span class="title" style="color:#FFF;">Insumo médico</span> \r\n            </p>\r\n            <button type="button" class="delete" (click)="cancelarModal(\'verLotes\');"></button>\r\n        </header>\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title" id="tituloModal" style="width: 200px"> </p>\r\n        <!--     <button type="button" class="delete" (click)="cancelarModal(\'verLotes\');"></button> -->\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <label class="label">Lotes disponibles:</label>\r\n            <table class="table is-narrow is-bordered is-striped">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Lote</th>\r\n                        <th>Caducidad</th>\r\n                        <th>Código de barras</th>\r\n                        <th>Existencia</th>\r\n                        <th>Existencia Unidosis</th> \r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lotes_insumo;  let i = index;">\r\n                        <td>{{item.lote}}</td>\r\n                        <td>{{item.fecha_caducidad}}</td>\r\n                        <td>{{item.codigo_barras}}</td>\r\n                        <td>{{item.existencia}}</td>\r\n                        <td>{{item.existencia_unidosis}}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="cancelarModal(\'verLotes\');">Aceptar</a>\r\n            <a class="button" (click)="cancelarModal(\'verLotes\');">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},ospG:function(e,t,a){"use strict";var n=a("3j3K"),i=a("rCTf"),r=(a.n(i),a("EEr4")),s=(a.n(r),a("1APj")),o=(a.n(s),a("h0qH")),c=(a.n(o),a("aV5h")),l=(a.n(c),a("q3ik")),d=(a.n(l),a("+pb+")),u=(a.n(d),a("uCY4")),p=(a.n(u),a("6Yye")),m=(a.n(p),a("Nqas")),f=a("VPeQ");a.d(t,"a",function(){return v});var g=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},h=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},v=function(){function e(e){this.buscarInsumosService=e,this.onCerrar=new n.EventEmitter,this.onEnviar=new n.EventEmitter,this.listaAgregadosConClues=[],this.conPrecios=!1,this.conCantidad=!0,this.conClues=!1,this.tipo=null,this.cargando=!1,this.insumos=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new r.Subject,this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.listaClues=[],this.clues=-1,this.listaCluesUtilizadasConInsumo=[],this.mensajeError=new m.a,this.mensajeAgregado=new m.a,this.cantidadValida=!1}return e.prototype.ngOnInit=function(){var e=this;console.log("Se supone me vuelvo a ejectuar"),console.log(this.listaAgregadosConClues);var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."),e.ultimoTerminoBuscado=t,e.paginaActual=1,e.cargando=!0,t?e.buscarInsumosService.buscar(t,e.paginaActual,e.resultadosPorPagina,e.conPrecios,e.tipo):i.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError=new m.a,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listar(t.ultimoTerminoBuscado,t.paginaActual)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),0==e.status&&(t.mensajeError.texto="El servidor no responde.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resetItemSeleccionado(),e.insumos=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Búsqueda cargada.")}),console.log(this.conClues),this.conClues&&this.buscarInsumosService.clues().subscribe(function(t){e.listaClues=t},function(e){console.log(e)})},e.prototype.ngAfterViewInit=function(){var e=this;try{setTimeout(function(){e.searchBoxViewChildren.first.nativeElement.focus()})}catch(e){console.log(e)}},e.prototype.cerrar=function(){this.searchBoxViewChildren.first.nativeElement.value="",this.onCerrar.emit()},e.prototype.resetItemSeleccionado=function(){this.cantidadBoxViewChildren.first.nativeElement.value="",this.insumoSeleccionado=null,this.cantidadValida=!1},e.prototype.seleccionar=function(e){var t=this;if(this.insumoSeleccionado=e,this.cantidadBoxViewChildren.first.nativeElement.disabled=!1,this.conClues){this.listaCluesUtilizadasConInsumo=[];for(var a in this.listaAgregadosConClues)if(this.listaAgregadosConClues[a].clave==e.clave){for(var n in this.listaAgregadosConClues[a].lista)this.listaCluesUtilizadasConInsumo.push(this.listaAgregadosConClues[a].lista[n]);break}try{setTimeout(function(){t.cluesSelectViewChildren.first.nativeElement.focus()})}catch(e){console.log(e)}}else this.cantidadBoxViewChildren.first.nativeElement.focus()},e.prototype.comprobarCantidad=function(e){return""==e.replace(/ /g,"")?(this.cantidadValida=!1,!1):isNaN(e)?(this.cantidadValida=!1,!1):0!=e%1?(this.cantidadValida=!1,!1):(this.cantidadValida=!0,!0)},e.prototype.enviar=function(e){var t=this;if(e.preventDefault(),console.log(this.clues),!this.conClues&&this.listaAgregados.indexOf(this.insumoSeleccionado.clave)>=0)return this.mensajeError=new m.a(!0,2),this.mensajeError.texto="El insumo seleccionado ya se encuentra en la lista",void(this.mensajeError.mostrar=!0);if(this.conClues){var a=!1;if("TODAS"==this.clues){this.listaAgregadosConClues.push({clave:this.insumoSeleccionado.clave,lista:[]});var n=this.listaAgregadosConClues.length-1;console.log(n);for(var i in this.listaClues){this.listaAgregadosConClues[n].lista.push(this.listaClues[i].clues);var r={insumo:this.insumoSeleccionado,clues:this.listaClues[i].clues,nombre:this.listaClues[i].nombre,cantidad:Number(this.cantidadBoxViewChildren.first.nativeElement.value)};console.log(r),this.listaCluesUtilizadasConInsumo.push(this.listaClues[i].clues),this.onEnviar.emit(r)}this.mensajeAgregado=new m.a(!0,2),this.mensajeAgregado.mostrar=!0,this.cluesSelectViewChildren.first.nativeElement.value=-1,this.cantidadBoxViewChildren.first.nativeElement.value="",this.clues=-1;try{setTimeout(function(){t.searchBoxViewChildren.first.nativeElement.focus()})}catch(e){console.log(e)}}else{for(var i in this.listaAgregadosConClues)if(this.listaAgregadosConClues[i].clave==this.insumoSeleccionado.clave){if(a=!0,this.listaAgregadosConClues[i].lista.indexOf(this.clues)>=0)return this.mensajeError=new m.a(!0,2),this.mensajeError.texto="La unidad seleccionada ya tiene asignado ese insumo asignado",void(this.mensajeError.mostrar=!0);this.listaAgregadosConClues[i].lista.push(this.clues);break}a||this.listaAgregadosConClues.push({clave:this.insumoSeleccionado.clave,lista:[this.clues]});var s={clues:"",nombre:""};for(var i in this.listaClues)this.listaClues[i].clues==this.clues&&(s.clues=this.clues,s.nombre=this.listaClues[i].nombre);var o={insumo:this.insumoSeleccionado,clues:this.clues,nombre:s.nombre,cantidad:Number(this.cantidadBoxViewChildren.first.nativeElement.value)};this.mensajeAgregado=new m.a(!0,2),this.mensajeAgregado.mostrar=!0,this.onEnviar.emit(o),this.listaCluesUtilizadasConInsumo.push(this.clues),this.cluesSelectViewChildren.first.nativeElement.value=-1,this.clues=-1;try{setTimeout(function(){t.cluesSelectViewChildren.first.nativeElement.focus()})}catch(e){console.log(e)}}}else this.mensajeAgregado=new m.a(!0,2),this.mensajeAgregado.mostrar=!0,this.insumoSeleccionado.cantidad=this.cantidadBoxViewChildren.first.nativeElement.value,this.onEnviar.emit(this.insumoSeleccionado),this.searchBoxViewChildren.first.nativeElement.focus(),this.listaAgregados.push(this.insumoSeleccionado.clave),this.resetItemSeleccionado()},e.prototype.buscar=function(e){this.terminosBusqueda.next(e),this.mensajeError.mostrar=!1},e.prototype.listar=function(e,t){var a=this;this.paginaActual=t,this.resetItemSeleccionado(),console.log("Cargando insumos."),this.cargando=!0,this.buscarInsumosService.buscar(e,t,this.resultadosPorPagina,this.conPrecios,this.tipo).subscribe(function(e){a.cargando=!1,a.insumos=e.data,a.total=0|e.total,a.paginasTotales=Math.ceil(a.total/a.resultadosPorPagina),a.indicePaginas=[];for(var t=0;t<a.paginasTotales;t++)a.indicePaginas.push(t+1);console.log("Insumos cargados."),console.log(a.insumos)},function(e){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=a.listar;try{e.json();401==e.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==e.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.mostrarFichaInformativa=function(e,t){e.preventDefault(),e.stopPropagation(),alert(t),console.log(t)},e.prototype.paginaSiguiente=function(e){this.paginaActual!=this.paginasTotales&&(this.resetItemSeleccionado(),this.listar(e,this.paginaActual+1))},e.prototype.paginaAnterior=function(e){1!=this.paginaActual&&(this.resetItemSeleccionado(),this.listar(e,this.paginaActual-1))},e.prototype.keyboardInput=function(e){27==e.keyCode&&(event.preventDefault(),event.stopPropagation(),this.cerrar()),39==e.keyCode&&(e.ctrlKey&&e.shiftKey||e.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.paginaSiguiente(this.searchBoxViewChildren.first.nativeElement.value)),37==e.keyCode&&(e.ctrlKey&&e.shiftKey||e.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.paginaAnterior(this.searchBoxViewChildren.first.nativeElement.value))},e.prototype.seleccionarClues=function(e){var t=this;this.clues=e;try{setTimeout(function(){t.cantidadBoxViewChildren.first.nativeElement.focus()})}catch(e){console.log(e)}},e}();g([a.i(n.ViewChildren)("searchBox"),h("design:type",Object)],v.prototype,"searchBoxViewChildren",void 0),g([a.i(n.ViewChildren)("cantidadBox"),h("design:type",Object)],v.prototype,"cantidadBoxViewChildren",void 0),g([a.i(n.ViewChildren)("cluesSelect"),h("design:type",Object)],v.prototype,"cluesSelectViewChildren",void 0),g([a.i(n.Output)(),h("design:type",Object)],v.prototype,"onCerrar",void 0),g([a.i(n.Output)(),h("design:type",Object)],v.prototype,"onEnviar",void 0),g([a.i(n.Input)(),h("design:type",Object)],v.prototype,"listaAgregados",void 0),g([a.i(n.Input)(),h("design:type",Array)],v.prototype,"listaAgregadosConClues",void 0),g([a.i(n.Input)(),h("design:type",Boolean)],v.prototype,"conPrecios",void 0),g([a.i(n.Input)(),h("design:type",Boolean)],v.prototype,"conCantidad",void 0),g([a.i(n.Input)(),h("design:type",Boolean)],v.prototype,"conClues",void 0),g([a.i(n.Input)(),h("design:type",String)],v.prototype,"tipo",void 0),v=g([a.i(n.Component)({selector:"buscar-insumos",template:a("BXa0"),styles:[a("v9or")],host:{"(document:keydown)":"keyboardInput($event)"}}),h("design:paramtypes",["function"==typeof(b=void 0!==f.a&&f.a)&&b||Object])],v);var b},pATY:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},pLck:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("qbyw"),s=a("NJ09"),o=a("MqZK");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=[{path:"administrador-proveedores",redirectTo:"/administrador-proveedores/pedidos",pathMatch:"full"},{path:"administrador-proveedores",children:[{path:"pedidos",component:o.a,canActivate:[s.a],data:{key:"MrL06vIO12iNhchP14h57Puvg71eUmYb"}}],canActivate:[r.a]}],d=function(){function e(){}return e}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b]})],d)},pLyH:function(e,t){e.exports='<aside class="menu" style="padding: 1em;">\r\n    <div *ngFor="let item of menuAutorizado">\r\n        <p class="menu-label">{{ item.titulo }}</p>\r\n        <ul class="menu-list">\r\n            <li *ngFor="let modulo of item.modulos">\r\n                <a routerLink="{{ modulo.url }}" routerLinkActive="is-active">\r\n                    <span class="icon" ><i class="fa {{ modulo.icono }}"></i></span>&nbsp;&nbsp;<span>{{ modulo.titulo }}</span>\r\n                </a>\r\n            </li>    \r\n        </ul>\r\n    </div>\r\n        \r\n</aside>'},pMSx:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.title=e,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return e.prototype.ngOnInit=function(){this.title.setTitle("Almacén / Equipamiento"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[],this.accesosDirectos=[];var e=JSON.parse(localStorage.getItem("usuario")),t=e.permisos.split("|");if(t.length>0){for(var a in this.modulos)e:for(var n in t)if(t[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break e}for(var a in this.accesosDirectos)e:for(var n in t)if(t[n]==this.accesosDirectos[a].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[a]);break e}}},e}();o=r([a.i(n.Component)({selector:"app-index-equipamiento",template:a("RfYq"),styles:[a("bAoB")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},pcQR:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.usuario={}}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e}();i([a.i(n.Input)(),r("design:type",String)],s.prototype,"modulo",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"icono",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"url",void 0),s=i([a.i(n.Component)({selector:"menu-farmacia",template:a("C64X"),styles:[a("KNJT")]}),r("design:paramtypes",[])],s)},pcVL:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("0ySm"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"configuracion",redirectTo:"configuracion/servicios",pathMatch:"full"},{path:"configuracion/servicios",children:[{path:"",component:r.a}],canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},pk48:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("2Je8"),s=a("5oXY"),o=a("NVOs"),c=a("1APj"),l=(a.n(c),a("h0qH")),d=(a.n(l),a("aV5h")),u=(a.n(d),a("q3ik")),p=(a.n(u),a("+pb+")),m=(a.n(p),a("uCY4")),f=(a.n(m),a("6Yye")),g=(a.n(f),a("lDdF")),h=(a.n(g),a("kZql")),v=a("Nqas"),b=a("7MfY"),y=a("TKQK"),_=a("Fobf");a.d(t,"a",function(){return E});var x=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},j=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},E=function(){function e(e,t,a,n,i,r,s){this.title=e,this.location=t,this.route=a,this._ngZone=n,this.pedidosService=i,this.almacenesService=r,this.fb=s,this.cargando=!1,this.cargandoAlmacenes=!1,this.cargandoInsumos=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.mostrarImprimirDialogo=!1,this.tiposSubPedidos=[],this.subPedidos={},this.formularioTitulo="Nuevo",this.esEditar=!1,this.mostrarModalInsumos=!1,this.cargandoPdf=!1,this.mostrarModalListaClues=!1,this.loteSeleccionado=null}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Nuevo pedido / Almacén"),this.pdfworker=new Worker("web-workers/farmacia/pedidos/pedido-proveedor.js");var t=this,a=this._ngZone;this.pdfworker.onmessage=function(e){a.run(function(){t.cargandoPdf=!1}),g.saveAs(t.base64ToBlob(e.data.base64,"application/pdf"),e.data.fileName)},this.pdfworker.onerror=function(e){a.run(function(){t.cargandoPdf=!1}),console.log(e)},this.pedido=new _.a(!0),this.route.params.subscribe(function(t){t.id?(e.cargando=!0,e.pedido.id=t.id,e.pedido.status="PS",e.esEditar=!0,e.formularioTitulo="Editar",e.pedidosService.ver(t.id).subscribe(function(t){e.pedido.datosImprimir=t,e.pedido.status=t.status;for(var a in t.insumos){var n=t.insumos[a],i=n.insumos_con_descripcion;i.cantidad=+n.cantidad_solicitada,i.monto=+n.monto_solicitado,i.precio=+n.precio_unitario,i.lista_clues=n.lista_clues,e.pedido.lista.push(i);var r=!1,s="SC";s=n.tipo_insumo.clave,"MC"==n.tipo_insumo.clave&&(r=!0),e.subPedidos[s]||(e.tiposSubPedidos.push(s),e.subPedidos[s]={titulo:n.tipo_insumo.nombre,clave_folio:s,claves:0,cantidad:0,monto:0,iva:0,tiene_iva:r,lista:[]}),e.subPedidos[s].claves++,e.subPedidos[s].cantidad+=i.cantidad,e.subPedidos[s].monto+=i.monto,e.subPedidos[s].lista.push(i)}t.insumos=void 0,e.pedido.indexar(),e.pedido.listar(1),e.cargando=!1},function(t){e.cargando=!1,e.mensajeError=new v.a(!0),e.mensajeError=new v.a(!0),e.mensajeError.mostrar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}),console.log("editar pedido")):console.log("nuevo pedido")})},e.prototype.obtenerDireccion=function(){if(this.pedido.datosImprimir)return"PS"==this.pedido.datosImprimir.status?"/almacen/pedidos-jurisdiccionales/por-surtir":"ET"==this.pedido.datosImprimir.status?"/almacen/pedidos-jurisdiccionales/en-transito":"FI"==this.pedido.datosImprimir.status?"/almacen/pedidos-jurisdiccionales/finalizados":"EF"==this.pedido.datosImprimir.status?"/almacen/pedidos-jurisdiccionales/farmacia-subrogada":"/almacen/pedidos-jurisdiccionales/todos"},e.prototype.buscar=function(e,t,a,n){var i=t.value;if(27==e.keyCode)return e.preventDefault(),e.stopPropagation(),t.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(e.preventDefault(),e.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(e){var t=n[e].input.value;if(""==t)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[e].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(e){}return i.includes(t.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(e,t){return e.length-t.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},e.prototype.mostrarFichaInformativa=function(e,t){e.preventDefault(),e.stopPropagation(),alert(t),console.log(t)},e.prototype.keyboardInput=function(e){32==e.keyCode&&e.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.mostrarModalInsumos=!0),39==e.keyCode&&(e.ctrlKey&&e.shiftKey||e.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaSiguiente():this.pedido.paginaSiguiente()),37==e.keyCode&&(e.ctrlKey&&e.shiftKey||e.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaAnterior():this.pedido.paginaAnterior())},e.prototype.toggleModalListaClues=function(e){this.loteSeleccionado=e,this.mostrarModalListaClues=!this.mostrarModalListaClues},e.prototype.imprimirExcel=function(){var e="token="+localStorage.getItem("token");window.open(h.a.API_URL+"/generar-excel-pedido-jurisdiccional/"+this.pedido.id+"?"+e)},e.prototype.imprimir=function(e){void 0===e&&(e="");try{this.cargandoPdf=!0;var t={datos:this.pedido.datosImprimir,insumos:this.subPedidos[e]};this.pdfworker.postMessage(JSON.stringify(t))}catch(e){this.cargandoPdf=!1,console.log(e)}},e.prototype.mostrarDialogo=function(){this.mostrarImprimirDialogo=!0},e.prototype.cerrarDialogo=function(){this.mostrarImprimirDialogo=!1},e.prototype.base64ToBlob=function(e,t){for(var a=atob(e),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:t})},e}();E=x([a.i(n.Component)({selector:"app-ver",template:a("uH4E"),styles:[a("s1aj")],host:{"(window:keydown)":"keyboardInput($event)"}}),j("design:paramtypes",["function"==typeof(I=void 0!==i.b&&i.b)&&I||Object,"function"==typeof(P=void 0!==r.Location&&r.Location)&&P||Object,"function"==typeof(C=void 0!==s.c&&s.c)&&C||Object,"function"==typeof(k=void 0!==n.NgZone&&n.NgZone)&&k||Object,"function"==typeof(S=void 0!==y.a&&y.a)&&S||Object,"function"==typeof(A=void 0!==b.a&&b.a)&&A||Object,"function"==typeof(q=void 0!==o.FormBuilder&&o.FormBuilder)&&q||Object])],E);var I,P,C,k,S,A,q},q7HC:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("8gFY"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"almacen/dashboard-salidas",children:[{path:"",component:r.a}],canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b]})],l)},qGi7:function(e,t){e.exports='<div class="modal is-active">\r\n    <div class="modal-background login-background"></div>\r\n    <div class="modal-content">\r\n        <div class="card" style=" border-radius:1em; overflow: hidden">\r\n            <div class="card-image" >\r\n                <figure class="image " style="border-radius: 1em 1em 0em 0em; overflow: hidden;">\r\n                    <img src="assets/bg-login_salud.svg" alt="Image">\r\n                </figure>\r\n            </div>\r\n            <div class="card-content">\r\n                <form name="form" (ngSubmit)="!loading && login()">\r\n                    <h1 class="title has-text-centered">Bienvenido</h1>\r\n                    <h2 class="subtitle has-text-centered">Esta app esta diseñada especialmente para ti.</h2>\r\n                    <div class="notification is-danger" *ngIf="mostrarMensaje">\r\n                        <a class="delete" (click)="mostrarMensaje = false"></a>\r\n                        <b>Error:</b> {{ mensaje }}\r\n                    </div>\r\n                    <p class="control has-icon">\r\n                        <input class="input is-medium" [ngClass]="{\'is-danger\': mensaje}" type="text" name="id" id="id" placeholder="Usuario" [(ngModel)]="credenciales.id"  autofocus>\r\n                        <span class="icon is-small">\r\n                        <i class="fa fa-user"></i>\r\n                        </span>\r\n                    </p>\r\n                    <p class="control has-icon">\r\n                        <input class="input is-medium" [ngClass]="{\'is-danger\': mensaje}" type="password" name="password" id="password" placeholder="Contraseña" [(ngModel)]="credenciales.password">\r\n                        <span class="icon is-small">\r\n                        <i class="fa fa-lock"></i>\r\n                        </span>\r\n                    </p>\r\n                    <p class="control" >\r\n                        <button class="button is-primary is-large is-fullwidth" [ngClass]="{\'is-loading\': loading}" >Iniciar sesión</button>\r\n                    </p>\r\n                    <p class="control" *ngIf="saludIdDisponible">\r\n                        <button class="button is-info is-large is-fullwidth">Conectar con Salud ID</button>\r\n                    </p>\r\n                    <p class="control">\r\n                        <a class="button is-white is-fullwidth" >Olvidé mi contraseña</a>\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},qOWO:function(e,t){},qVFN:function(e,t){e.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <nav class="level">\r\n                            <div class="level-left">\r\n                                <h1 class="title">\r\n                                    <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-desktop"></i></span>\r\n                                    <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                                    Servidor local\r\n                                </h1>\r\n                            </div>\r\n                        </nav> \r\n                        <div class="block">                               \r\n                            <a class="button is-primary is-inverted" [ngClass]="{ \'is-loading\': sincronizandoEnLinea }" (click)="sincronizarEnLinea()">\r\n                                <span class="icon"><i class="fa fa-exchange"></i></span><span>Sincronizar en línea</span>\r\n                            </a>\r\n                            <a class="button is-primary is-inverted" [ngClass]="{ \'is-disabled\': sincronizandoEnLinea }" (click)="descargarSync()">\r\n                                <span class="icon"><i class="fa fa-download"></i></span><span>Descargar sincronización</span>\r\n                            </a>\r\n                            <a class="button is-primary is-inverted" [ngClass]="{ \'is-disabled\': sincronizandoEnLinea }">\r\n                                <span class="icon"><i class="fa fa-upload"></i></span><span>Cargar confirmación</span>\r\n                            </a>\r\n                        </div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n                        <!--\r\n                        <nav class="level">\r\n\t\t\t\t\t\t\t<p class="level-item has-text-centered">\r\n\t\t\t\t\t\t\t\t<a class="button is-primary is-inverted" [ngClass]="{ \'is-loading\': sincronizandoEnLinea }" (click)="sincronizarEnLinea()">\r\n\t\t\t\t\t\t\t\t\t<span class="icon"><i class="fa fa-exchange"></i></span><span>Sincronizar en línea</span>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</p>\r\n                            <p class="level-item has-text-centered">\r\n                                <a class="button is-primary is-inverted" [ngClass]="{ \'is-disabled\': sincronizandoEnLinea }" (click)="descargarSync()">\r\n                                    <span class="icon"><i class="fa fa-download"></i></span><span>Descargar sincronización</span>\r\n                                </a>\r\n                            </p>\r\n                            <p class="level-item has-text-centered">\r\n                                <a class="button is-primary is-inverted" [ngClass]="{ \'is-disabled\': sincronizandoEnLinea }">\r\n                                    <span class="icon"><i class="fa fa-upload"></i></span><span>Cargar confirmación</span>\r\n                                </a>\r\n                            </p>\r\n                        </nav>-->\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section >\r\n                <table class="table">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t<th>SERVIDOR</th>\r\n\t\t\t\t\t\t\t<th>NOMBRE</th>\r\n\t\t\t\t\t\t\t<th>FECHA DE GENERACIÓN</th>\r\n\t\t\t\t\t\t\t<th>FECHA DE SINCRONIZACIÓN</th>\r\n\t\t\t\t\t\t</tr>\r\n                    </thead>\r\n                    <tbody  *ngIf="!busquedaActivada">\r\n                        <tr *ngFor="let item of lista; let i=index">  \r\n                            <td>{{ item.id }}</td>   \r\n                            <td>{{ item.servidor_id }}</td>                      \r\n                            <td>{{ item.servidor_nombre }}</td> \r\n                            <td>{{ item.fecha_generacion }}</td>  \r\n                            <td>{{ item.created_at }}</td>                                                  \r\n                        </tr>\r\n                        <tr *ngIf="lista.length == 0">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                        </tr>\r\n                    </tbody>\r\n                    <tbody *ngIf="busquedaActivada">\r\n                        <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                            <td>{{ item.id }}</td>   \r\n                            <td>{{ item.servidor_id }}</td>                      \r\n                            <td>{{ item.servidor_nombre }}</td> \r\n                            <td>{{ item.fecha_generacion }}</td>  \r\n                            <td>{{ item.created_at }}</td> \r\n                        </tr>\r\n\r\n                        <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <!-- Paginación para la lista  -->\r\n                <paginacion \r\n                    [total]="total" \r\n                    [paginasTotales]="paginasTotales" \r\n                    [resultadosPorPagina]="resultadosPorPagina" \r\n                    [paginaActual]="paginaActual" \r\n                    [indicePaginas]="indicePaginas"\r\n                    (onSiguiente)="paginaSiguiente()" \r\n                    (onAnterior)="paginaAnterior()" \r\n                    (onListar)="listar($event)" \r\n                    *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n                <!-- Paginación para la búsqueda  -->\r\n                <paginacion \r\n                    [total]="totalBusqueda" \r\n                    [paginasTotales]="paginasTotalesBusqueda" \r\n                    [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                    [paginaActual]="paginaActualBusqueda" \r\n                    [indicePaginas]="indicePaginasBusqueda"\r\n                    (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                    (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                    (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                    *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n            </section>\r\n        </div>\r\n        \r\n       \r\n       \r\n    </div>\r\n</div>\r\n\r\n<div class="modal" [ngClass]="{ \'is-active\': mostrarLogAutoSync }">\r\n    <div class="modal-background" (click)="mostrarLogAutoSync = !mostrarLogAutoSync"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n        <p class="modal-card-title">¡Sincronización exitosa!</p>\r\n        <button class="delete" (click)="mostrarLogAutoSync = !mostrarLogAutoSync"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <h3>Detalles de la sincronización</h3>\r\n                <pre>{{ logAutoSync }}</pre>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n        <a class="button" (click)="mostrarLogAutoSync = !mostrarLogAutoSync">Cerrar</a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>     \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n\r\n'},qVyk:function(e,t){e.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:20px">\r\n            <div class="top-bar is-primary" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } ">\r\n                <h1 class="title" *ngIf="!busquedaActivada">\r\n                    <span class="icon is-medium"><i class="fa fa-check-square"></i></span> Claves básicas\r\n                </h1>\r\n                <h1 class="title" *ngIf="busquedaActivada">\r\n                    <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                </h1>\r\n                <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                <div class="control is-grouped">\r\n                    <p class="control is-expanded">\r\n                        <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                    </p>\r\n                    <p class="control">\r\n                        <a class="button is-medium is-primary is-inverted " routerLink="/administrador-central/claves-basicas/nueva">\r\n                        <span class="icon"><i class="fa fa-plus"></i></span><span>Nueva</span>\r\n                        </a>\r\n                    </p>\r\n                </div>\r\n            </div> \r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th>Nombre</th>\r\n                    <th style="text-align:center; width:100px"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of lista; let i=index">                        \r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/claves-basicas/editar/{{item.id}}">{{ item.nombre }}</a></td>                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando" class="button is-inverted is-primary"(click)="mostrarUnidadesMedicas(item, i)" title="Ver unidades médicas asignadas"><span class="icon"><i class="fa fa-list-alt"></i></span></a>\r\n                            <a *ngIf="!item.cargando" class="button is-white" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                        </td>                        \r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <td style="vertical-align: middle;"><a routerLink="/administrador-central/claves-basicas/editar/{{item.id}}">{{ item.nombre }}</a></td>                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando"  (click)="mostrarUnidadesMedicas(item, i)" title="Ver unidades médicas asignadas"><span class="icon"><i class="fa fa-list-alt"></i></span></a>\r\n                            <a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n<claves-basicas-lista-clues *ngIf="mostrarModalClues" [lista]="listaSeleccionada" (onCerrar)="mostrarModalClues = false"></claves-basicas-lista-clues>'},qbyw:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY");a.d(t,"a",function(){return o});var r=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=function(){function e(e){this.router=e}return e.prototype.canActivate=function(e,t){return!!localStorage.getItem("token")||(this.router.navigate(["login"],{queryParams:{returnUrl:t.url}}),!1)},e}();o=r([a.i(n.Injectable)(),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},qnXI:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.usuario={}}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e}();i([a.i(n.Input)(),r("design:type",String)],s.prototype,"modulo",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"icono",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"url",void 0),s=i([a.i(n.Component)({selector:"menu-catalogo",template:a("FbSt"),styles:[a("jo+T")]}),r("design:paramtypes",[])],s)},qrhs:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.onCerrar=new n.EventEmitter,this.onEnviar=new n.EventEmitter,this.lectura=!1}return e.prototype.ngOnInit=function(){},e.prototype.actualizarTotales=function(){this.insumo.monto=0,this.insumo.cantidad=0;for(var e in this.insumo.lista_clues)this.insumo.monto+=this.insumo.lista_clues[e].cantidad*this.insumo.precio,this.insumo.cantidad+=this.insumo.lista_clues[e].cantidad},e.prototype.eliminarInsumo=function(e,t){for(var a in this.listaClaveAgregadas)if(this.listaClaveAgregadas[a].clave==this.insumo.clave){for(var n in this.listaClaveAgregadas[a].lista)if(this.insumo.lista_clues[t].clues==this.listaClaveAgregadas[a].lista[n]){this.listaClaveAgregadas[a].lista.splice(n,1);break}break}this.insumo.lista_clues.splice(t,1),this.actualizarTotales()},e.prototype.cerrar=function(){this.onCerrar.emit()},e}();i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onCerrar",void 0),i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onEnviar",void 0),i([a.i(n.Input)(),r("design:type",Boolean)],s.prototype,"lectura",void 0),i([a.i(n.Input)(),r("design:type",Object)],s.prototype,"insumo",void 0),i([a.i(n.Input)(),r("design:type",Array)],s.prototype,"listaClaveAgregadas",void 0),s=i([a.i(n.Component)({selector:"pedidos-jurisdiccionales-lista-clues",template:a("eJTV"),styles:[a("BBcz")]}),r("design:paramtypes",[])],s)},qtMW:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".estatus-rojo{color:red}.estatus-amarillo{color:orange}",""]),e.exports=e.exports.toString()},quI2:function(e,t,a){"use strict";var n=a("3j3K"),i=a("NVOs"),r=a("Qbdm"),s=a("5oXY"),o=a("kZql"),c=a("30gs"),l=a("3MNG"),d=a("lDdF");a.n(d);a.d(t,"a",function(){return m});var u=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},m=function(){function e(e,t,a,n,i,r){var s=this;this.fb=e,this.crudService=t,this.route=a,this._sanitizer=n,this.notificacion=i,this._ngZone=r,this.tab=1,this.cargando=!1,this.sum_cant_lotes=!1,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.MinDate=new Date,this.MaxDate=new Date,this.mostrarCancelado=!1,this.tieneid=!1,this.cargandoPdf=!1,this.tipos_recetas=[{id:1,nombre:"Normal"},{id:2,nombre:"Controlado"}],this.autocompleListFormatter=function(e){var t='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4">'+e.descripcion+'</p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+e.clave+") \n              ";return 1==e.es_causes&&(t+='<label class="tag is-success" ><strong>Cause </strong></label>'),0==e.es_causes&&(t+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);" ><strong>No Cause </strong> </label>'),1==e.es_unidosis&&(t+='<label class="tag is-warning" ><strong>Unidosis</strong> </label>'),t+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",s._sanitizer.bypassSecurityTrustHtml(t)},this.es_unidosis=!1,this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0},this.mostrar_lote=[]}return e.prototype.ngOnInit=function(){var e=this,t=JSON.parse(localStorage.getItem("usuario"));t.clues_activa&&(this.insumos_term+="&clues="+t.clues_activa.clues),t.almacen_activo&&(this.insumos_term+="&almacen="+t.almacen_activo.id),this.pdfworker=new Worker("web-workers/farmacia/movimientos/receta.js");var a=this,n=this._ngZone;this.pdfworker.onmessage=function(e){n.run(function(){a.cargandoPdf=!1}),d.saveAs(a.base64ToBlob(e.data.base64,"application/pdf"),e.data.fileName)},this.dato=this.fb.group({id:[""],tipo_movimiento_id:["5",[i.Validators.required]],status:["FI"],fecha_movimiento:["",[i.Validators.required]],observaciones:[""],cancelado:[""],observaciones_cancelacion:[""],movimiento_metadato:this.fb.group({turno_id:["",[i.Validators.required]]}),receta:this.fb.group({folio:["",[i.Validators.required]],tipo_receta:["1",[i.Validators.required]],fecha_receta:["",[i.Validators.required]],doctor:["",[i.Validators.required]],paciente:["",[i.Validators.required]],diagnostico:["",[i.Validators.required]],imagen_receta:["",[i.Validators.required]]}),insumos:this.fb.array([])}),this.route.params.subscribe(function(t){t.id&&(e.tieneid=!0)}),this.form_insumos={tipo_movimiento_id:["",[i.Validators.required]]};var r=new Date;this.MinDate=new Date(r.getFullYear()-1,0,1),this.MaxDate=new Date(r.getFullYear(),r.getMonth(),r.getDate()),this.dato.get("fecha_movimiento").value?this.fecha_actual=this.dato.get("fecha_movimiento").value:(this.fecha_actual=r.getFullYear()+"-"+("00"+(r.getMonth()+1)).slice(-2)+"-"+r.getDate(),this.dato.get("fecha_movimiento").patchValue(this.fecha_actual)),document.getElementById("catalogos").click()},e.prototype.abrirModal=function(e){document.getElementById(e).classList.add("is-active")},e.prototype.cancelarModal=function(e){document.getElementById(e).classList.remove("is-active")},e.prototype.select_insumo_autocomplete=function(e){var t=this,a=JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.crudService.lista(0,1e3,"comprobar-stock?almacen="+a.almacen_activo.id+"&clave="+e.clave).subscribe(function(a){t.lotes_insumo=a,t.insumo=e,document.getElementById("buscarInsumo").value="",document.getElementById("tituloModal").innerHTML=" "+e.descripcion+' <br>\n          <p aling="justify" style="font-size:12px">CANTIDAD POR ENVASE: '+e.cantidad_x_envase+"</p> ",t.es_unidosis=e.es_unidosis,t.cargando=!1,t.abrirModal("verLotes")},function(e){t.cargando=!1})},e.prototype.agregarLoteIsumo=function(){for(var e=this.dato.controls.insumos,t={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,cantidad:1,cantidad_x_envase:parseInt(this.insumo.cantidad_x_envase),dosis:["",[i.Validators.required]],frecuencia:["",[i.Validators.required]],duracion:["",[i.Validators.required]],cantidad_recetada:["",[i.Validators.required]],cantidad_surtida:1,lotes:this.fb.array([])},a=!1,n=0,r=e.value;n<r.length;n++){var s=r[n];if(s.clave==this.insumo.clave){a=!0;break}}a||e.push(this.fb.group(t));var o=e.length-1,c=e.controls[o];this.mostrar_lote[o]=!1;var l={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0};for(var d=0,u=this.lotes_insumo;d<u.length;d++){var s=u[d];if(s.cantidad>0){var p=!1;if(a)for(var m=0,f=c.controls.lotes.controls;m<f.length;m++){var g=f[m];if(g.controls.id.value==s.id){p=!0;var h=g.controls.cantidad.value+s.cantidad;s.nuevo&&(s.existencia=1*s.cantidad),h>g.controls.existencia.value&&0==s.nuevo&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+g.controls.existencia.value,l),h=1*g.controls.existencia.value),g.controls.cantidad.patchValue(h);break}}p||(s.nuevo&&(s.existencia=1*s.cantidad),s.cantidad>s.existencia&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+s.existencia,l),s.cantidad=1*s.existencia),c.controls.lotes.push(this.fb.group({id:s.id,nuevo:0|s.nuevo,codigo_barras:s.codigo_barras?s.codigo_barras:"",lote:s.lote,fecha_caducidad:s.fecha_caducidad,existencia:s.nuevo?s.cantidad:s.existencia,cantidad:s.cantidad})))}}for(var v=0,b=0,y=c.controls.lotes.value;b<y.length;b++){var g=y[b];v+=g.cantidad}c.controls.cantidad_surtida.patchValue(v),this.cancelarModal("verLotes"),this.sum_cant_lotes=!1},e.prototype.ver_lotes_asignados=function(e){this.mostrar_lote[e]=!this.mostrar_lote[e]},e.prototype.agregarNuevoLote=function(){this.lotes_insumo.push({id:""+Math.floor(999*Math.random())+1,codigo_barras:"",lote:"",fecha_caducidad:"",existencia:"",cantidad:"",nuevo:1,existencia_unidosis:"",cantidad_unidosis:""})},e.prototype.eliminarLote=function(e){this.lotes_insumo.splice(e,1)},e.prototype.quitar_lote_insumo=function(e,t,a){var n=this.dato.controls.insumos,i=n.controls[e];i.controls.lotes.removeAt(a);var r=i.controls.cantidad_surtida.value-t.cantidad;i.controls.cantidad_surtida.patchValue(r)},e.prototype.validar_cantidad_lote=function(e,t,a){if(t.controls.cantidad.value>t.controls.existencia.value&&0==t.nuevo){var n={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+t.controls.existencia.value,n),t.controls.cantidad.patchValue(1*t.controls.existencia.value)}for(var i=this.dato.controls.insumos,r=i.controls[e],s=0,o=0,c=r.controls.lotes.value;o<c.length;o++){s+=c[o].cantidad}r.controls.cantidad_surtida.patchValue(s)},e.prototype.comprobar_cant_lotes=function(){for(var e=0,t=0,a=this.lotes_insumo;t<a.length;t++){var n=a[t];n.cantidad&&(e=Number(e)+Number(n.cantidad))}this.sum_cant_lotes=e>0},e.prototype.quitar_punto=function(e){return!!this.is_numeric(e.key)},e.prototype.is_numeric=function(e){return/^\d+$/.test(e)},e.prototype.imprimir=function(){var e=JSON.parse(localStorage.getItem("usuario"));try{this.cargandoPdf=!0;var t={datos:this.dato.value,lista:this.dato.value.insumos,usuario:e};this.pdfworker.postMessage(JSON.stringify(t))}catch(e){this.cargandoPdf=!1,console.log(e)}},e.prototype.base64ToBlob=function(e,t){for(var a=atob(e),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:t})},e}();m=u([a.i(n.Component)({selector:"salidas-recetas-formulario",template:a("ZLtL"),styles:["ngui-auto-complete {z-index: 999999 !important}"]}),p("design:paramtypes",["function"==typeof(f=void 0!==i.FormBuilder&&i.FormBuilder)&&f||Object,"function"==typeof(g=void 0!==c.a&&c.a)&&g||Object,"function"==typeof(h=void 0!==s.c&&s.c)&&h||Object,"function"==typeof(v=void 0!==r.d&&r.d)&&v||Object,"function"==typeof(b=void 0!==l.a&&l.a)&&b||Object,"function"==typeof(y=void 0!==n.NgZone&&n.NgZone)&&y||Object])],m);var f,g,h,v,b,y},r2dd:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("OeE7"),d=a("Zit5"),u=a("Qew2"),p=a("1tXu"),m=a("52hV"),f=a("l+S8"),g=a("30gs"),h=a("nqnc"),v=a("nsII");a.n(v);a.d(t,"a",function(){return y});var b=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},y=function(){function e(){}return e}();y=b([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,f.a,h.a,v.NguiAutoCompleteModule],declarations:[p.a],providers:[m.a,g.a]})],y)},r49I:function(e,t){e.exports='<formulario #ctrl URL="sincronizar-recetas" titulo="Sincronizar receta" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Sincronizar recetas\'" [icono]="\'assets/hub-farmacia-sub.svg\'" [url]="\'/farmacia-subrrogada/sincronizar-recetas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()">\r\n    <div class="contenedor columns " style="height:100%">\r\n        <div class="column is-one-third" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <h1 class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> {{ctrl.moduloTitulo}}\r\n                    </h1>\r\n\r\n\r\n                </section>\r\n                <div style="padding: 1em;">\r\n                    <nav class="nav">\r\n                        <div class="nav-right nav-menu">\r\n                            <div class="nav-item">\r\n                                <div class="field is-grouped">\r\n                                    <p class="control" *ngIf="!tieneid" style="float:left">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                                    </p>\r\n                                    <p class="control" style="float:left">\r\n                                        <a class="button" (click)="ctrl.regresar()">\r\n                                            Regresar\r\n                                        </a>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n\r\n                    <h3 class="title">\r\n                        <i class="fa fa-file"></i>\r\n                         Datos del movimiento\r\n                    </h3>\r\n                    <div >\r\n                        <div class="field">\r\n                            <label class="label">Fecha del movimiento:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n\r\n                                <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_movimiento\' formControlName="fecha_movimiento" ngui-datetime-picker\r\n                                    [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-danger\': ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched}"\r\n                                    placeholder="YYYY-MM-DD" />\r\n\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Observaciones:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched}"\r\n                                    placeholder="Observaciones" formControlName="observaciones"></textarea>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="control" *ngIf="mostrarCancelado"> \r\n                            <!-- *ngIf -->\r\n                            <div class="field">\r\n                                <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                    <input type="checkbox" id="cancelado" class="styled" [checked]="ctrl.dato.get(\'cancelado\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'cancelado\').patchValue(ctrl.dato.get(\'cancelado\').value == \'1\' ? \'0\' : \'1\')">\r\n                                    <label for="cancelado">  Cancelado\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="field">\r\n                                <label class="label">Observaciones de cancelación:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched}"\r\n                                        placeholder="Observaciones de cancelacion" formControlName="observaciones_cancelacion"></textarea>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div formGroupName="movimiento_metadato">\r\n                            <div class="field"  >\r\n                                <label class="label">Turno:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <select class="select" name="turno" formControlName="turno_id" [ngClass]="{\'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched}">\r\n                                        <option *ngFor="let item of ctrl.turnos" value="{{item.id}}" [attr.selected]="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').value == item.id ">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <hr id="catalogos" (click)="ctrl.cargarCatalogo(\'turnos\', \'turnos\'); ">\r\n                    <h3 class="title">\r\n                        <i class="fa fa-user-md"></i>\r\n                        Datos de la receta\r\n                    </h3>\r\n\r\n                    <div >\r\n                        <nav class="panel" formGroupName="receta">\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Folio:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched}"\r\n                                                placeholder="folio" formControlName="folio">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Tipo de receta:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n                                                <select class="select" name="tipo_receta" formControlName="tipo_receta" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched}">\r\n                                                    <option *ngFor="let item of tipos_recetas" value="{{item.id}}" >{{ item.nombre }}</option>\r\n                                                </select>\r\n\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    \r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Fecha de receta:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_receta\' formControlName="fecha_receta" ngui-datetime-picker\r\n                                                [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched}"\r\n                                                placeholder="YYYY-MM-DD" />\r\n\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Imagen:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input type="file" (change)="ctrl.seleccionarImagenBase64($event, ctrl.dato.controls.receta.controls.imagen_receta)">\r\n                                            <input type="hidden" placeholder="Imagen de la receta" formControlName="imagen_receta">\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Doctor:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched}"\r\n                                                placeholder="Doctor" formControlName="doctor">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Paciente:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched}"\r\n                                                placeholder="Paciente" formControlName="paciente">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Diagnostico:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched}"\r\n                                                placeholder="Diagnostico" formControlName="diagnostico"></textarea>\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="block" *ngIf="ctrl.dato.controls.receta.controls.imagen_receta.value != \'\'">\r\n                                <a class="button is-primary is-outlined is-fullwidth" (click)="abrirModal(\'verFoto\')">\r\n                                    <span class="icon">\r\n                                        <i class="fa fa-eye"> </i> \r\n                                    </span> \r\n                                    &nbsp; Ver receta\r\n                                </a>\r\n                            </div>\r\n\r\n                            <div class="modal" id="verFoto">\r\n                                <div class="modal-background"></div>\r\n                                <div class="modal-content">\r\n                                    <p class="image is-4by3">\r\n                                        <img [src]="\'data:image/jpg;base64,\'+ctrl.dato.controls.receta.controls.imagen_receta.value" alt="Receta" />\r\n                                    </p>\r\n                                </div>\r\n                                <button type="button" class="modal-close" (click)="cancelarModal(\'verFoto\')"></button>\r\n                            </div>\r\n                        </nav>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- apartado de insumos -->\r\n        <div class="column" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <div class="hero-body">\r\n                        <a class="button  is-primary" style="position:absolute; top:5em; right:3em;" (click)="ctrl.cargarDatos(dato);  "><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                        <div class="container is-fluid">\r\n                            <h1 class="title">\r\n                                <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                                <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Insumos\r\n                            </h1>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                    <br>\r\n                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                </div>\r\n                <section class="section">\r\n\r\n                    <div class="field has-addons has-addons-centered" *ngIf="!tieneid">\r\n\r\n                        <p class="control">\r\n                            <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" id="buscarInsumo" value-property-name="clave"\r\n                                display-property-name="nombre" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                                (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                                type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n\r\n                        </p>\r\n\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div formArrayName="insumos">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos.controls; let i=index"  [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(230, 230, 232, 0.44)\' : \'\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <a *ngIf="!tieneid" class="is-danger" title="Quitar este elemento de la lista" style="float:right" (click)="ctrl.quitar_form_array(\'insumos\', i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                        <p>\r\n                                            <strong>\r\n                                                <span style="color:cornflowerblue">\r\n                                                    Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }} \r\n                                                </span>\r\n                                                Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.nombre.value}}\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="!ctrl.dato.controls.insumos.controls[i].controls.es_causes.value"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value"><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                        <a class="is-danger" title="Ver la lista de lotes de este articulo" style="float:right" (click)="ver_lotes_asignados(i)">\r\n                                            <span class="icon">\r\n                                                <i *ngIf="!mostrar_lote[i]" class="fa fa-plus"></i>\r\n                                                <i *ngIf="mostrar_lote[i]" class="fa fa-minus"></i>\r\n                                            </span>\r\n                                        </a>\r\n                                    </div>\r\n                                    <section *ngIf="mostrar_lote[i]">\r\n                                        <table class="table is-narrow is-bordered is-striped">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Lote</th>\r\n                                                    <th>Caducidad</th>\r\n                                                    <th>Codigo de barras</th>\r\n                                                    <th *ngIf="!tieneid">Existencia</th>\r\n                                                    <th>Cantidad</th>\r\n                                                    <th *ngIf="!tieneid"></th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody formArrayName="lotes">\r\n                                                <tr *ngFor="let val of ctrl.dato.controls.insumos.controls[i].controls.lotes.controls;  let i2 = index;">\r\n                                                    <td>{{val.value.lote}} </td>\r\n                                                    <td>{{val.value.fecha_caducidad}}</td>\r\n                                                    <td>{{val.value.codigo_barras}}</td>\r\n                                                    <td *ngIf="!tieneid">{{val.value.existencia}}</td>\r\n                                                    <td [formGroupName]="i2">\r\n                                                        <input *ngIf="!val.nuevo" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2)" type="number" step="1" min="0" max="{{val.value.existencia}}"\r\n                                                            placeholder="Cantidad" formControlName="cantidad">\r\n                                                        <input *ngIf="val.nuevo" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2)" type="number" step="1" min="0" \r\n                                                            placeholder="Cantidad" formControlName="cantidad"></td>\r\n                                                    <td *ngIf="!tieneid">\r\n                                                        <a class="is-danger" title="Quitar este lote" (click)="quitar_lote_insumo(i, val.value, i2)">\r\n                                                            <span class="icon">\r\n                                                                <i class="fa fa-trash-o"></i>\r\n                                                            </span>\r\n                                                        </a>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </section>\r\n                                    <nav class="level is-mobile">\r\n                                        <div class="level-left">\r\n                                            <a class="level-item">\r\n                                                <div class="field">\r\n                                                    <label class="label">Dosis:</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input type="text" class="input" formControlName="dosis" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.dosis.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.dosis.touched}">\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                            <a class="level-item">\r\n                                                <div class="field">\r\n                                                    <label class="label">Frecuencia (Horas):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input type="text" class="input" formControlName="frecuencia" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.frecuencia.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.frecuencia.touched}">\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                            <a class="level-item">\r\n                                                <div class="field">\r\n                                                    <label class="label">Duración:</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input type="text" class="input" formControlName="duracion" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.duracion.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.duracion.touched}">\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                            <a class="level-item">\r\n                                                <div class="field">\r\n                                                    <label class="label">Cant. recetada:</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input type="text" class="input" formControlName="cantidad_recetada" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_recetada.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_recetada.touched}">\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                            <a class="level-item">\r\n                                                <div class="field">\r\n                                                    <label class="label">Cant. surtida:</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad" >\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                        </div>\r\n                                    </nav>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n\r\n<div class="modal" id="verLotes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card" style="width: 60%;">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title" id="tituloModal"> </p>\r\n            <button type="button" class="delete" (click)="cancelarModal(\'verLotes\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <table class="table is-narrow is-bordered is-striped">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Lote</th>\r\n                        <th>Caducidad</th>\r\n                        <th>Codigo de barras</th>\r\n                        <th>Existencia</th>\r\n                        <th>Cantidad</th>\r\n                        <th *ngIf="es_unidosis">Existencia Unidosis</th>\r\n                        <th *ngIf="es_unidosis">Cantidad Unidosis</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lotes_insumo;  let i = index;">\r\n                        <td *ngIf="!item.nuevo">{{item.lote}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Lote" [(ngModel)]="item.lote"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.fecha_caducidad}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="date" placeholder="Fecha de caducidad" [(ngModel)]="item.fecha_caducidad"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.codigo_barras}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Codigo de barras" [(ngModel)]="item.codigo_barras"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.existencia}}</td>\r\n                        <td *ngIf="item.nuevo"></td>\r\n                        <td>\r\n                            <input class="input has-text-centered " type="number" step="1" min="0" max="{{item.existencia}}" placeholder="Cantidad" [(ngModel)]="item.cantidad">\r\n                        </td>\r\n\r\n                        <td *ngIf="!item.nuevo && es_unidosis">{{item.existencia_unidosis}}</td>\r\n                        <td *ngIf="item.nuevo && es_unidosis"></td>\r\n\r\n                        <td *ngIf="es_unidosis">\r\n                            <input class="input has-text-centered " type="number" step="1" min="0" max="{{item.cantidad_unidosis}}" placeholder="Cantidad Unidosis" [(ngModel)]="item.cantidad_unidosis">\r\n                        </td>\r\n\r\n                        <td *ngIf="item.nuevo">\r\n                            <a class="delete" (click)=eliminarLote(i)></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n                \r\n            </table>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-dark" (click)="agregarNuevoLote()">Agregar nuevo lote</a>                            \r\n            <a class="button is-success" (click)="agregarLoteIsumo()">Aceptar</a>\r\n            <a class="button" (click)="cancelarModal(\'verLotes\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},rGA5:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("5oXY"),s=a("S9un"),o=a("fcAu"),c=a("Nqas");a.d(t,"a",function(){return u});var l=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},d=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,a,n,i){this.title=e,this.router=t,this.route=a,this.apiService=n,this.permisosService=i,this.id=null,this.cargando=!1,this.enviando=!1,this.cargandoPermisos=!1,this.mensajeError=new c.a,this.mensajeExito=new c.a,this.errores={nombre:null,permisos:null},this.permisos=[],this.todosSeleccionados=!1,this.rol={nombre:"",permisos:[]}}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Editar / Panel de control"),this.route.params.subscribe(function(t){e.id=+t.id}),this.mensajeError=new c.a,this.mensajeExito=new c.a,this.cargando=!0,this.apiService.ver(this.id).subscribe(function(t){e.rol.nombre=t.nombre,e.cargarPermisos(t.permisos),e.cargando=!1},function(t){console.log(t),e.cargando=!1})},e.prototype.cargarPermisos=function(e){var t=this;void 0===e&&(e=[]),this.cargandoPermisos=!0,this.permisosService.lista().subscribe(function(a){t.permisos=a;for(var n in t.permisos)e:for(var i in e)if(e[i].id==t.permisos[n].id){t.permisos[n].seleccionado=!0;break e}t.cargandoPermisos=!1},function(e){console.log(e),t.cargandoPermisos=!1})},e.prototype.seleccionarTodos=function(){this.todosSeleccionados=!this.todosSeleccionados;for(var e in this.permisos)this.permisos[e].seleccionado=this.todosSeleccionados},e.prototype.guardar=function(){var e=this;this.enviando=!0,this.errores={nombre:null,permisos:null},this.rol.permisos=[];for(var t in this.permisos)this.permisos[t].seleccionado&&this.rol.permisos.push(this.permisos[t].id);this.apiService.editar(this.id,this.rol).subscribe(function(t){e.enviando=!1,e.mensajeExito=new c.a(!0),e.mensajeExito.texto="Se han guardado los cambios.",e.mensajeExito.mostrar=!0},function(t){try{var a=t.json();switch(e.mensajeError=new c.a(!0),t.status){case 401:e.mensajeError.texto="No tiee permiso para realizar esta acción.";break;case 409:e.mensajeError.texto="Verifique la información marcada de color rojo";for(var n in a.error)for(var i in a.error[n])e.errores[n]=a.error[n][i];break;case 500:e.mensajeError.texto="500 (Error interno del servidor)";break;default:e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}catch(t){e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}e.mensajeError.mostrar=!0,e.enviando=!1})},e}();u=l([a.i(n.Component)({selector:"app-editar",template:a("UduK"),styles:[a("XGOn")]}),d("design:paramtypes",["function"==typeof(p=void 0!==i.b&&i.b)&&p||Object,"function"==typeof(m=void 0!==r.a&&r.a)&&m||Object,"function"==typeof(f=void 0!==r.c&&r.c)&&f||Object,"function"==typeof(g=void 0!==s.a&&s.a)&&g||Object,"function"==typeof(h=void 0!==o.a&&o.a)&&h||Object])],u);var p,m,f,g,h},rOUf:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".hub-item{width:100%;text-align:center;display:block;color:#fff!important;font-size:.8em}",""]),e.exports=e.exports.toString()},ritK:function(e,t){e.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Roles\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted " routerLink="/panel-control/roles/nuevo">\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th>Nombre</th>\r\n                    <th style="text-align:center; width:60px"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of lista; let i=index">                        \r\n                        <td style="vertical-align: middle;"><a routerLink="/panel-control/roles/editar/{{item.id}}">{{ item.nombre }}</a></td>                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>                        \r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <td style="vertical-align: middle;"><a routerLink="/panel-control/roles/editar/{{item.id}}">{{ item.nombre }}</a></td>                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},s1aj:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333}.contenedor-pedido.con-tabs .top-bar{padding:.5em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-pedido{background:#fff;border-radius:1em;overflow:hidden}.contenedor-pedido.con-tabs{border-top-left-radius:0!important;border-top-right-radius:0!important}",""]),e.exports=e.exports.toString()},s42p:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("bHPo"),o=a("Uvud"),c=a("fjeY"),l=a("+ZDf"),d=a("Qew2"),u=a("Gge2"),p=a("BSeR");a.d(t,"a",function(){return f});var m=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},f=function(){function e(){}return e}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},skTu:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.usuario={},this.menu=[],this.menuAutorizado=[]}return e.prototype.ngOnInit=function(){var e=JSON.parse(localStorage.getItem("usuario")),t=e.permisos.split("|");if(this.menu=[{titulo:"Sincronización con servidor principal",modulos:[{permiso:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f",icono:"fa-cloud",titulo:"Servidor central",url:"/panel-control/sync/central"},{permiso:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f",icono:"fa-desktop",titulo:"Servidor local",url:"/panel-control/sync/local"}]},{titulo:"Usuarios y privilegios",modulos:[{permiso:"mGKikN0aJaeF2XrHwwYK3XNw0f9CSZDe",icono:"fa-user",titulo:"Usuarios",url:"/panel-control/usuarios"},{permiso:"ICmOKw3HxhgRna4a78OP0QmKrIX0bNsp",icono:"fa-users",titulo:"Roles",url:"/panel-control/roles"},{permiso:"DYwQAxJbpHWw07zT09scEogUeFKFdGSu",icono:"fa-shield",titulo:"Permisos",url:"/panel-control/permisos"}]}],this.menuAutorizado=[{titulo:"Sincronización con servidor principal",modulos:[{icono:"fa-server",titulo:"Estatus",url:"/panel-control/sync/estatus"}]}],t.length>0)for(var a in this.menu)for(var n in this.menu[a].modulos)e:for(var i in t)if(t[i]==this.menu[a].modulos[n].permiso){var r=this.initMenuAutorizadoPorItem(this.menu[a].titulo);r.modulos.push(this.menu[a].modulos[n]);break e}},e.prototype.initMenuAutorizadoPorItem=function(e){for(var t in this.menuAutorizado)if(e==this.menuAutorizado[t].titulo)return this.menuAutorizado[t];return this.menuAutorizado.push({titulo:e,modulos:[]}),this.menuAutorizado[this.menuAutorizado.length-1]},e}();s=i([a.i(n.Component)({selector:"panel-control-menu-aside",template:a("pLyH"),styles:[a("LSt6")]}),r("design:paramtypes",[])],s)},stKu:function(e,t){e.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-server"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Estatus del servidor\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="section">\r\n                <h1 class="title">Próximamente</h1>\r\n                <p>En esta sección se desplegarán varias opciones cuando tengamos muchos servidores.</p>\r\n            </section>\r\n        </div>\r\n        \r\n       \r\n       \r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n'},szl0:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("pcVL"),d=a("Zit5"),u=a("Qew2"),p=a("0ySm"),m=a("52hV"),f=a("l+S8"),g=a("30gs"),h=a("nqnc"),v=a("nsII");a.n(v);a.d(t,"a",function(){return y});var b=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},y=function(){function e(){}return e}();y=b([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,f.a,h.a,v.NguiAutoCompleteModule],declarations:[p.a],providers:[m.a,g.a]})],y)},tPtL:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("Nqas"),s=a("2o5k");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(){function e(e,t){this.title=e,this.apiService=t,this.cargando=!1,this.mensajeError=new r.a,this.mensajeExito=new r.a,this.filtro_clues_origen="",this.filtro_clues_destino="",this.filtro_mes_origen=-1,this.filtro_anio_origen=-1,this.filtro_mes_destino=-1,this.filtro_anio_destino=-1,this.ligarCluesOrigenDestino=!0,this.listaClues=[],this.listaMeses=[],this.listaAnios=[],this.listaAlmacenesOrigen=[],this.listaAlmacenesDestino=[],this.listaCluesConSaldo=[],this.listaMesesAniosAnteriorFechaActual=[],this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.mostrarVentanaNuevaTransferencia=!1,this.monto_transferir_causes=null,this.monto_transferir_no_causes=null,this.monto_transferir_material_curacion=null,this.transaccion_clues_origen={clues:""},this.transaccion_clues_destino={clues:""},this.transaccion_almacen_origen="",this.transaccion_almacen_destino="",this.transaccion_mes_origen=-1,this.transaccion_mes_destino=-1,this.transaccion_anio_origen=-1,this.transaccion_anio_destino=-1,this.datosOrigenValidos=!1,this.datosDestinoValidos=!1,this.conPresupuestoOrigen=!0,this.conPresupuestoDestino=!0,this.cargandoPresupuestoOrigen=!1,this.cargandoPresupuestoDestino=!1,this.presupuestoOrigen={causes:0,no_causes:0,material_curacion:0},this.presupuestoDestino={causes:0,no_causes:0,material_curacion:0},this.errores_transferencia={causes:"",no_causes:"",material_curacion:""},this.enviando_transferencia=!1,this.mostrarVentanaArrastrarSaldos=!1,this.fecha_arrastrar_saldos=-1,this.todas_clues_con_saldo_seleccionadas=!1,this.cargando_clues_con_saldo=!1,this.enviando_transferencia_saldos_mes_actual=!1}return e.prototype.ngOnInit=function(){this.mensajeError=new r.a,this.mensajeExito=new r.a,this.title.setTitle("Transferencias / Administrador central"),this.listar(1),this.cargarUnidadesMedicas(),this.cargarMeses(),this.cargarAnios(),this.cargarMesesAniosAnteriorMesActual()},e.prototype.cargarUnidadesMedicas=function(){var e=this;this.apiService.unidadesMedicasConPresupuesto().subscribe(function(t){e.listaClues=t},function(e){console.log(e)})},e.prototype.cargarMeses=function(){var e=this;this.apiService.mesesPresupuestoActual().subscribe(function(t){e.listaMeses=t},function(e){console.log(e)})},e.prototype.cargarAnios=function(){var e=this;this.apiService.aniosPresupuestoActual().subscribe(function(t){1==t.length&&(e.transaccion_anio_origen=t[0].anio,e.transaccion_anio_destino=t[0].anio),e.listaAnios=t},function(e){console.log(e)})},e.prototype.cargarMesesAniosAnteriorMesActual=function(){var e=this;this.apiService.mesesAniosAnteriorFechaActual().subscribe(function(t){e.listaMesesAniosAnteriorFechaActual=t},function(e){console.log(e)})},e.prototype.listar=function(e){var t=this;this.cargando=!0,this.paginaActual=e;var a={clues_origen:this.filtro_clues_origen,mes_origen:this.filtro_mes_origen,anio_origen:this.filtro_anio_origen,clues_destino:this.filtro_clues_destino,mes_destino:this.filtro_mes_destino,anio_destino:this.filtro_anio_destino,page:this.paginaActual,per_page:this.resultadosPorPagina};this.apiService.transferenciasLista(a).subscribe(function(e){t.cargando=!1,t.lista=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Items cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.nuevaTransferencia=function(){this.monto_transferir_causes=null,this.monto_transferir_no_causes=null,this.monto_transferir_material_curacion=null,this.transaccion_clues_origen={clues:""},this.transaccion_almacen_origen="",this.datosOrigenValidos=!1,this.transaccion_clues_destino={clues:""},this.transaccion_almacen_destino="",this.datosDestinoValidos=!1,this.transaccion_mes_origen=-1,this.transaccion_mes_destino=-1,this.errores_transferencia={causes:"",no_causes:"",material_curacion:""},this.mostrarVentanaNuevaTransferencia=!0},e.prototype.realizarTransferencia=function(){var e=this;if(this.transaccion_clues_origen.clues==this.transaccion_clues_destino.clues&&this.transaccion_anio_origen==this.transaccion_anio_destino&&this.transaccion_mes_origen==this.transaccion_mes_destino&&this.transaccion_almacen_origen==this.transaccion_almacen_destino)return void alert("No se puede realizar la transferencia. Los datos de origen y destino son los mismos.");if(this.errores_transferencia={causes:"",no_causes:"",material_curacion:""},null!=this.monto_transferir_causes&&(isNaN(Number(this.monto_transferir_causes))&&(this.errores_transferencia.causes="El monto debe ser un número válido (sólo numeros decimales sin coma)."),this.monto_transferir_causes>this.presupuestoOrigen.causes&&(console.log(this.monto_transferir_causes+":"+this.presupuestoOrigen.causes),this.errores_transferencia.causes="El monto no puede ser mayor al presupuesto disponible del origen."),this.monto_transferir_causes<0&&(this.errores_transferencia.causes="El monto no puede ser menor a 0.")),null!=this.monto_transferir_no_causes&&(isNaN(Number(this.monto_transferir_no_causes))&&(this.errores_transferencia.no_causes="El monto debe ser un número válido (sólo numeros decimales sin coma)."),this.monto_transferir_no_causes>this.presupuestoOrigen.no_causes&&(this.errores_transferencia.no_causes="El monto no puede ser mayor al presupuesto disponible del origen."),this.monto_transferir_no_causes<0&&(this.errores_transferencia.no_causes="El monto no puede ser menor a 0.")),null!=this.monto_transferir_material_curacion&&(isNaN(Number(this.monto_transferir_material_curacion))&&(this.errores_transferencia.material_curacion="El monto debe ser un número válido (sólo numeros decimales sin coma)."),this.monto_transferir_material_curacion>this.presupuestoOrigen.material_curacion&&(this.errores_transferencia.material_curacion="El monto no puede ser mayor al presupuesto disponible del origen."),this.monto_transferir_material_curacion<0&&(this.errores_transferencia.material_curacion="El monto no puede ser menor a 0.")),""==this.errores_transferencia.causes&&""==this.errores_transferencia.no_causes&&""==this.errores_transferencia.material_curacion){var t={clues_origen:this.transaccion_clues_origen.clues,clues_destino:this.transaccion_clues_destino.clues,almacen_origen:this.transaccion_almacen_origen,almacen_destino:this.transaccion_almacen_destino,mes_origen:this.transaccion_mes_origen,mes_destino:this.transaccion_mes_destino,anio_origen:this.transaccion_anio_origen,anio_destino:this.transaccion_anio_destino,causes:this.monto_transferir_causes,no_causes:this.monto_transferir_no_causes,material_curacion:this.monto_transferir_material_curacion};if("TRANSFERIR"!=prompt("Para confirmar esta transacción, por favor escriba: TRANSFERIR"))return void alert("Error al ingresar el texto para confirmar la transferencia.");this.enviando_transferencia=!0,this.apiService.transferirPresupuesto(t).subscribe(function(t){e.datosOrigenValidos=!1,e.listar(1),e.obtenerPresupuestoDestino(),e.enviando_transferencia=!1},function(t){console.log(t),e.enviando_transferencia=!1})}},e.prototype.obtenerPresupuestoOrigen=function(){this.datosOrigenValidos=!1,0!=this.listaAlmacenesOrigen.length&&this.transaccion_clues_origen.clues==this.listaAlmacenesOrigen[0].clues||(this.transaccion_almacen_origen="",this.listaAlmacenesOrigen=this.transaccion_clues_origen.unidad_medica.almacenes),this.transaccion_mes_origen!=-1&&this.transaccion_anio_origen!=-1&&""!=this.transaccion_clues_origen.clues&&""!=this.transaccion_almacen_origen&&(this.datosOrigenValidos=!0,this.cargarPresupuestoUnidadMedica(!0,!1,this.transaccion_clues_origen.clues,this.transaccion_almacen_origen,this.transaccion_mes_origen,this.transaccion_anio_origen)),this.ligarCluesOrigenDestino&&this.transaccion_clues_destino!=this.transaccion_clues_origen&&(this.transaccion_clues_destino=this.transaccion_clues_origen,this.obtenerPresupuestoDestino())},e.prototype.obtenerPresupuestoDestino=function(){this.datosDestinoValidos=!1,0!=this.listaAlmacenesDestino.length&&this.transaccion_clues_destino.clues==this.listaAlmacenesDestino[0].clues||(this.transaccion_almacen_destino="",this.listaAlmacenesDestino=this.transaccion_clues_destino.unidad_medica.almacenes),this.transaccion_mes_destino!=-1&&this.transaccion_anio_destino!=-1&&""!=this.transaccion_clues_destino.clues&&""!=this.transaccion_almacen_destino&&(this.datosDestinoValidos=!0,this.cargarPresupuestoUnidadMedica(!1,!0,this.transaccion_clues_destino.clues,this.transaccion_almacen_destino,this.transaccion_mes_destino,this.transaccion_anio_destino))},e.prototype.cargarPresupuestoUnidadMedica=function(e,t,a,n,i,r){var s=this;e?(this.conPresupuestoOrigen=!0,this.cargandoPresupuestoOrigen=!0):t&&(this.conPresupuestoDestino=!0,this.cargandoPresupuestoDestino=!0);var o={clues:a,almacen:n,mes:i,anio:r};this.apiService.presupuestoUnidadMedica(o).subscribe(function(a){e&&(a?(s.presupuestoOrigen.causes=Number(a.causes_disponible),s.presupuestoOrigen.no_causes=Number(a.no_causes_disponible),s.presupuestoOrigen.material_curacion=Number(a.material_curacion_disponible)):(s.conPresupuestoOrigen=!1,s.datosOrigenValidos=!1),s.cargandoPresupuestoOrigen=!1),t&&(a?(s.presupuestoDestino.causes=Number(a.causes_disponible),s.presupuestoDestino.no_causes=Number(a.no_causes_disponible),s.presupuestoDestino.material_curacion=Number(a.material_curacion_disponible)):(s.conPresupuestoDestino=!1,s.datosDestinoValidos=!1),s.cargandoPresupuestoDestino=!1)},function(a){console.log(a),s.mensajeError.mostrar=!0,s.mensajeError.texto="Ocurrio un error durante la petición.",e?s.cargandoPresupuestoOrigen=!1:t&&(s.cargandoPresupuestoDestino=!1)})},e.prototype.nuevaTransferenciaArrastrarSaldos=function(){this.mostrarVentanaArrastrarSaldos=!0},e.prototype.seleccionarTodasCluesConSaldo=function(){this.todas_clues_con_saldo_seleccionadas=!this.todas_clues_con_saldo_seleccionadas;for(var e in this.listaCluesConSaldo)this.listaCluesConSaldo[e].seleccionada=this.todas_clues_con_saldo_seleccionadas},e.prototype.obtenerCluesConSaldo=function(){var e=this;if(this.fecha_arrastrar_saldos!=-1){var t=this.fecha_arrastrar_saldos.split("/");if(2==t.length){var a={mes:t[0],anio:t[1],clues_con_saldo:!0};this.cargando_clues_con_saldo=!0,this.listaCluesConSaldo=[],this.apiService.unidadesMedicasConPresupuesto(a).subscribe(function(t){e.cargando_clues_con_saldo=!1,e.listaCluesConSaldo=t},function(t){console.log(t),e.cargando_clues_con_saldo=!1})}}},e.prototype.transferirSaldosAlMesActual=function(){var e=this;if(this.fecha_arrastrar_saldos!=-1){var t=this.fecha_arrastrar_saldos.split("/");if(2==t.length){var a={mes:t[0],anio:t[1],lista_clues:[]},n=!1;for(var i in this.listaCluesConSaldo)this.listaCluesConSaldo[i].seleccionada&&(n=!0,a.lista_clues.push(this.listaCluesConSaldo[i].clues));if(n){"TRANSFERIR"==prompt("Para confirmar esta transacción, por favor escriba: TRANSFERIR")&&(this.enviando_transferencia_saldos_mes_actual=!0,this.apiService.transferirSaldosAlMesActual(a).subscribe(function(t){e.listar(1),e.mostrarVentanaArrastrarSaldos=!1,e.fecha_arrastrar_saldos=-1,e.todas_clues_con_saldo_seleccionadas=!1,e.listaCluesConSaldo=[],e.enviando_transferencia_saldos_mes_actual=!1},function(t){console.log(t),e.enviando_transferencia_saldos_mes_actual=!1}))}}}},e}();l=o([a.i(n.Component)({selector:"app-transferencias-recursos",template:a("mz03"),styles:[a("bpii")]}),c("design:paramtypes",["function"==typeof(d=void 0!==i.b&&i.b)&&d||Object,"function"==typeof(u=void 0!==s.a&&s.a)&&u||Object])],l);var d,u},tYEV:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),e.exports=e.exports.toString()},tjBx:function(e,t){e.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Editar usuario\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section">\r\n            <panel-control-usuarios-form *ngIf="datosCargados"\r\n                [mostrarCambiarPassword]="true"\r\n                [usuario]="usuario"             \r\n                [roles]="roles" \r\n                [unidadesMedicasEdicion] = "unidadesMedicasEdicion"\r\n                [unidadesMedicas]="unidadesMedicas" \r\n                [usuarioRepetido]="usuarioRepetido"\r\n                [usuarioInvalido]="usuarioInvalido"\r\n                [cargando]="cargando"\r\n                [cargandoRoles]="cargandoRoles"\r\n                (onEnviar)="enviar()"\r\n                (onRegresar)="regresar()"\r\n                (onToggleCambiarPassword)="toggleCambiarPassword()"\r\n                (onCargarRoles)="cargarRoles()"\r\n            ></panel-control-usuarios-form>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <p><b>Error:</b> {{ mensajeError.texto }}<br></p>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-warning" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeAdvertencia.mostrar">\r\n    <button class="delete" (click)="mensajeAdvertencia.mostrar = false"></button>        \r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-warning"></i></span> <span>{{ mensajeAdvertencia.texto }}</span></p>\r\n    \r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeAdvertencia.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>'},tmAL:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),e.exports=e.exports.toString()},"tz+m":function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("+rFH"),s=a("Zit5"),o=a("k7TD"),c=a("6p5m"),l=a("2gJf"),d=a("+/v9"),u=a("VR2t");a.d(t,"a",function(){return m});var p=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},m=function(){function e(){}return e}();m=p([a.i(n.NgModule)({imports:[i.CommonModule,o.a,r.a,s.a],declarations:[c.a,l.a,u.a],providers:[d.a]})],m)},tzMl:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333}.contenedor-pedido.con-tabs .top-bar{padding:.5em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-pedido{background:#fff;border-radius:1em;overflow:hidden}.contenedor-pedido.con-tabs{border-top-left-radius:0!important;border-top-right-radius:0!important}",""]),e.exports=e.exports.toString()},uH4E:function(e,t){e.exports='<menu-farmacia [modulo]="\'Pedidos jurisdiccionales\'" [icono]="\'assets/icono-pedidos-jurisdiccionales.svg\'" [url]="\'/almacen/pedidos-jurisdiccionales\'"></menu-farmacia>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile">\r\n      <div class="tile is-4 is-parent is-vertical ">\r\n        <div class="tile is-child">\r\n            <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n                <section class="hero is-primary" >\r\n                <h1 class="title" style="margin:0.5em;" >\r\n                    <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Detalles del pedido\r\n                </h1>\r\n                <div class="control is-grouped">\r\n                    <a class="button is-success is-fullwidth" title="Imprimir Excel" (click)="imprimirExcel(); " *ngIf="esEditar">\r\n                        <span class="icon"><i class="fa fa-file-excel-o"></i></span> <span>Excel</span>\r\n                    </a>\r\n                    <a class="button is-info is-fullwidth" [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }" title="Imprimir PDF" (click)="mostrarDialogo(); " *ngIf="esEditar">\r\n                        <span class="icon"><i class="fa fa-print"></i></span> <span>Imprimir</span>\r\n                    </a>\r\n                </div>\r\n                </section>\r\n\r\n                <div style="padding: 1em;">\r\n                    <label class="label">Folio:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.folio:\'S/F\'}}"/>\r\n                    </p>\r\n\r\n                    <label class="label">Almacén:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.almacen_solicitante.nombre:\'Sin almacen asignado\'}}"/>\r\n                    </p>\r\n\r\n                    <label class="label">Nombre del Pedido:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.descripcion:\'\'}}"/>\r\n                    </p>\r\n\r\n                    <label class="label">Fecha:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.fecha:\'\'}}"/>\r\n                    </p>\r\n\r\n                    <div class="control">\r\n                        <textarea name="observaciones" class="textarea" placeholder="Observaciones"  readonly="readonly">{{(pedido.datosImprimir)?pedido.datosImprimir.observaciones:\'\'}}</textarea>\r\n                    </div>\r\n\r\n                    <label class="label">Datos del Proveedor:</label>\r\n                    <div *ngIf="pedido.datosImprimir" class="level-item">\r\n                        <input *ngIf="pedido.datosImprimir.almacen_proveedor" type="text" class="input is-fullwidth" readonly="readonly" value="{{pedido.datosImprimir.almacen_proveedor.nombre}}"/>\r\n                        <div *ngIf="pedido.datosImprimir.proveedor" >\r\n                        <p class="subtitle is-5">\r\n                            {{pedido.datosImprimir.proveedor.nombre}}<br>\r\n                            <small>\r\n                            {{pedido.datosImprimir.proveedor.contacto}}<br>\r\n                            {{pedido.datosImprimir.proveedor.email}}<br>\r\n                            Cel: {{pedido.datosImprimir.proveedor.celular}}\r\n                            </small>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                    <hr>\r\n                    <div class="control is-grouped" style="padding-top:10px;" *ngIf="!cargando">\r\n                        <p class="control" *ngIf="pedido.status != \'FI\' && pedido.datosImprimir.tipo_pedido_id == \'PA\'">\r\n                        <a class="button is-primary" routerLink="/almacen/pedidos-jurisdiccionales/recepcion/{{pedido.id}}"> <span class="icon"><i class="fa fa-truck"></i></span> <span>Recibir Pedido</span></a>\r\n                        </p>\r\n                        <p class="control">\r\n                        <a class="button is-white" routerLink="{{obtenerDireccion()}}" >Ir a la lista</a>\r\n                        </p>                \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <br>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="tile is-parent is-vertical">\r\n        <div class="tile is-child" >\r\n          <div class="contenedor-pedido" >\r\n            <div class="top-bar" [ngClass]="{\'is-primary\':!pedido.filtro.activo,\'is-dark\': pedido.filtro.activo }">\r\n                <span *ngIf="!pedido.filtro.activo">Claves: {{ pedido.lista.length }} Insumos: {{pedido.totalInsumos | number}} Total: $ {{ pedido.totalMonto | number: \'1.2-2\' }}</span>\r\n                <span *ngIf="pedido.filtro.activo"><span class="icon"><i class="fa fa-search"></i></span> Resultados: {{ pedido.filtro.lista.length }}</span>                \r\n            </div> \r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em;">\r\n                <thead>\r\n                    <tr  >\r\n                        <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                        <th class="is-hidden-mobile" style="width:118px;">\r\n                        <p class="control is-expanded" >\r\n                            <input type="hidden" #searchBoxClavePrevia >                            \r\n                            <input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxClave, searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>\r\n                        <th class="is-hidden-tablet">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionClavePrevia >                            \r\n                            <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>  \r\n                        <th style="vertical-align: middle;" class="is-hidden-mobile " >Descripcion</th>                  \r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Unidades médicas asignadas">Clues</abbr></th>\r\n                        <th  style="width:21px !important;"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                    <tr   *ngFor="let item of pedido.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ item.lote }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    \r\n                    <td>\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        {{item.tipo}}\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        </div>\r\n                    </td>\r\n\r\n                    <td style="width:78px !important;text-align:center;">\r\n                        <a (click)="toggleModalListaClues(item); ">{{ item.cantidad }}</a>\r\n                    </td>\r\n\r\n                    <td style="text-align: right;">\r\n                            $<b><abbr>{{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                        </td>\r\n                        <td style="width:100px !important; text-align:center">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.lista_clues.length }}</a>\r\n                        </td>\r\n                        <td style="width:48px !important;">\r\n                            <a (click)="toggleModalListaClues(item); "><span class="icon"><i class="fa fa-list"></i></span></a>\r\n                        </td>\r\n                    </tr>      \r\n                </tbody>\r\n                <tbody *ngIf="pedido.filtro.activo">\r\n                    <tr  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ item.lote }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    \r\n                    <td>\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        </div>\r\n                    </td>\r\n                    <td style="width:78px !important; text-align:center;">\r\n                        <a (click)="toggleModalListaClues(item); ">{{ item.cantidad }}</a>\r\n                    </td>\r\n                    <td style="width:78px !important;">\r\n                        <b><abbr>$ {{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                    </td> \r\n                    </tr>\r\n                </tbody>              \r\n            </table>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.lista.length" \r\n                    [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.paginacion.indice"\r\n                    (onSiguiente)="pedido.paginaSiguiente()" \r\n                    (onAnterior)="pedido.paginaAnterior()" \r\n                    (onListar)="pedido.listar($event)" \r\n                    *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.filtro.lista.length" \r\n                    [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                    (onSiguiente)="pedido.filtro.paginaSiguiente()" \r\n                    (onAnterior)="pedido.filtro.paginaAnterior()" \r\n                    (onListar)="pedido.filtro.listar($event)" \r\n                    *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n            <br>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>    \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarImprimirDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogo()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-print"></i></span> Imprimir Pedido \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogo()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="columns">\r\n          <div class="column is-one-quarter" *ngFor="let tipo of tiposSubPedidos">\r\n            <div class="card">\r\n              <header class="card-header">\r\n                <p class="card-header-title">\r\n                  {{subPedidos[tipo].titulo}}\r\n                </p>\r\n              </header>\r\n              <div class="card-content">\r\n                <div class="content">\r\n                  <strong>Total claves</strong>: {{subPedidos[tipo].claves | number}} <br>\r\n                  <strong>Total unidades</strong>: {{subPedidos[tipo].cantidad | number}} <br>\r\n                  <strong>Total monto</strong>: $ {{subPedidos[tipo].monto + ((subPedidos[tipo].tiene_iva)?+subPedidos[tipo].monto*16/100:0) | number:\'1.2-2\'}}\r\n                </div>\r\n              </div>\r\n              <footer class="card-footer">\r\n                <a class="card-footer-item" (click)="imprimir(tipo)" [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }">\r\n                  <span class="icon is-medium"><i class="fa fa-file-pdf-o"></i></span>&nbsp;<span>Descargar/Imprimir</span>\r\n                </a>\r\n              </footer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<pedidos-jurisdiccionales-lista-clues *ngIf="mostrarModalListaClues" [insumo]="loteSeleccionado" [listaClaveAgregadas]="listaClaveAgregadas" [lectura]="true" (onCerrar)="mostrarModalListaClues = false"></pedidos-jurisdiccionales-lista-clues>'},uJfw:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.verRecepcionPedido=function(e){return this.jwtRequest.get(l.URL,e,{}).map(function(e){return e.json().data})},e.prototype.guardarRecepcionPedido=function(e,t){return this.jwtRequest.put(l.URL,e,t).map(function(e){return e.json().data})},e}();c.URL="recepcion-pedido",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},v3jK:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("5f4D"),s=a("qbyw");a.d(t,"a",function(){return l});var o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=[{path:"almacen",component:r.a,canActivate:[s.a]}],l=function(){function e(){}return e}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},v9or:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".mensaje-agregar{position:absolute;width:auto;bottom:0;right:1em;opacity:0;animation:mostrar .2s forwards ease-out;-webkit-animation:mostrar .2s forwards ease-out}@-webkit-keyframes mostrar{0%{bottom:0;opacity:0}to{bottom:3em;opacity:1}}@keyframes mostrar{0%{bottom:0;opacity:0}to{bottom:3em;opacity:1}}.item-seleccionado{background:#f5f5f5!important;font-weight:700!important}.is-disabled{color:#ddd}",""]),e.exports=e.exports.toString()},vITn:function(e,t,a){"use strict";var n=a("3j3K"),i=a("gDrt"),r=(a.n(i),a("kZql"));a.d(t,"a",function(){return l});var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),o=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=function(e){function t(t){var a=e.call(this)||this;return a.url=r.a.API_URL+"/sync/importar",a.headers={Authorization:"Bearer "+localStorage.getItem("token")},a.file=t,a.alias="sync",a}return s(t,e),t}(i.UploadItem);l=o([a.i(n.Injectable)(),c("design:paramtypes",[Object])],l)},vYWY:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("NVOs"),s=a("5oXY"),o=a("1APj"),c=(a.n(o),a("h0qH")),l=(a.n(c),a("aV5h")),d=(a.n(l),a("q3ik")),u=(a.n(d),a("+pb+")),p=(a.n(u),a("uCY4")),m=(a.n(p),a("6Yye")),f=(a.n(m),a("NAeX")),g=a("9o2x"),h=a("ve71"),v=a("lgzy"),b=a("0H6m"),y=a("Nqas");a.d(t,"a",function(){return j});var _=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},x=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},j=function(){function e(e,t,a,n,i,s,o){this.title=e,this.route=t,this.pedidosService=a,this.recepcionService=n,this.stockService=i,this.router=s,this.cambiarEntornoService=o,this.cargando=!1,this.guardando=!1,this.cargandoStock=!1,this.capturarStock=!1,this.mostrarDialogo=!1,this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}},this.statusRecepcion="NV",this.mensajeError=new y.a,this.mensajeAdvertencia=new y.a,this.mensajeExito=new y.a,this.formStock={},this.lotesSurtidos=[],this.listaStock=[],this.claveInsumoSeleccionado=null,this.claveNoSolicitada=!1,this.itemSeleccionado=null,this.formularioTieneError=function(e,t){return this.formularioRecepcion.get(e).hasError(t)&&this.formularioRecepcion.get(e).touched},this.fb=new r.FormBuilder;var c=new Date,l=("0"+c.getDate()).slice(-2),d=("0"+(c.getMonth()+1)).slice(-2),u=c.getFullYear()+"-"+d+"-"+l;this.formularioRecepcion=this.fb.group({entrega:["",[r.Validators.required]],recibe:["",[r.Validators.required]],fecha_movimiento:[u,[r.Validators.required]],observaciones:""})}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Surtir pedido / Almacén"),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){e.router.navigate(["/almacen/pedidos"])}),this.route.params.subscribe(function(t){e.id=t.id}),this.cargando=!0,this.recepcionService.verRecepcionPedido(this.id).subscribe(function(t){e.cargando=!1,e.pedido=new b.a(!0),e.pedido.paginacion.resultadosPorPagina=10,e.pedido.filtro.paginacion.resultadosPorPagina=10,e.folio=t.folio;var a={};if(1==t.recepciones.length){var n=t.recepciones[0].entrada_abierta.insumos;for(var i in n){var r=n[i];a[r.stock.clave_insumo_medico]||(a[r.stock.clave_insumo_medico]={cantidad:0,stock:[]}),a[r.stock.clave_insumo_medico].cantidad+=+r.cantidad,r.stock.cantidad=+r.cantidad,a[r.stock.clave_insumo_medico].stock.push(r.stock)}for(var s in a)e.lotesSurtidos.push({clave:s,cantidad:a[s].cantidad});e.statusRecepcion="BR"}"FI"==t.status&&(e.statusRecepcion="FI");for(var o in t.insumos){var c=t.insumos[o],r=c.insumos_con_descripcion;if(r.cantidad=+c.cantidad_solicitada,r.cantidad_recibida=+c.cantidad_recibida,r.monto=+c.monto_solicitado,r.precio=+c.precio_unitario,r.totalStockAsignado=+c.cantidad_recibida,a[r.clave]){r.listaStockAsignado=[],r.totalStockAsignado+=a[r.clave].cantidad;for(var l in a[r.clave].stock){var d=a[r.clave].stock[l];r.listaStockAsignado.push({codigo_barras:d.codigo_barras,lote:d.lote,fecha_caducidad:d.fecha_caducidad,cantidad:d.cantidad})}}e.pedido.lista.push(r)}t.insumos=void 0,e.pedido.datosImprimir=t,e.pedido.indexar(),e.pedido.listar(1)},function(t){e.cargando=!1,e.mensajeError=new y.a(!0),e.mensajeError.mostrar;try{var a=t.json();401==t.status?e.mensajeError.texto="No tiene permiso para hacer esta operación.":e.mensajeError.texto=a.error}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.seleccionarItem=function(e){this.itemSeleccionado=e,this.capturarStock=!0,this.formStock={},this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}}},e.prototype.buscar=function(e,t,a,n){var i=t.value;if(27==e.keyCode)return e.preventDefault(),e.stopPropagation(),t.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(e.preventDefault(),e.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(e){var t=n[e].input.value;if(""==t)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[e].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(e){}return i.includes(t.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(e,t){return e.length-t.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},e.prototype.buscarStockApi=function(e,t){var a=this;void 0===t&&(t=null),this.cargandoStock=!0,this.stockService.buscar(e,t).subscribe(function(e){if(a.cargandoStock=!1,a.claveNoSolicitada=!1,a.listaStock=e,e.length>0){a.claveInsumoSeleccionado=e[0].clave_insumo_medico;for(var t=!1,n=0;n<a.pedido.lista.length;n++)if(a.pedido.lista[n].clave==a.claveInsumoSeleccionado){a.pedido.filtro.activo=!1;var i=Math.ceil((n+1)/a.pedido.paginacion.resultadosPorPagina);a.pedido.listar(i),a.itemSeleccionado=a.pedido.lista[n],t=!0}t?a.verificarItemsAsignadosStockApi():(a.claveNoSolicitada=!0,a.listaStock=[])}console.log("Stock cargado.")},function(e){a.cargandoStock=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){};try{e.json();401==e.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==e.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.finalizar=function(){this.mostrarDialogo=!0},e.prototype.cerrarDialogo=function(){this.mostrarDialogo=!1},e.prototype.guardar=function(e){var t=this;void 0===e&&(e=!1),this.guardando=!0;var a;if(e){if(this.formularioRecepcion.get("entrega").markAsTouched(),this.formularioRecepcion.get("recibe").markAsTouched(),this.formularioRecepcion.get("fecha_movimiento").markAsTouched(),!this.formularioRecepcion.valid)return!1;var n=prompt("Atención la recepción ya no podra editarse, para confirmar que desea concluir la recepción por favor escriba: CONCLUIR RECEPCION");if("CONCLUIR RECEPCION"!=n)return null!=n&&alert("Error al ingresar el texto para confirmar la acción."),this.guardando=!1,!1;a=this.formularioRecepcion.value,a.status="FI",a.stock=[]}else a={status:"BR",observaciones:"",stock:[]};for(var i in this.pedido.lista){var r=this.pedido.lista[i];if(r.totalStockAsignado>0)for(var s in r.listaStockAsignado){var o={clave_insumo_medico:r.clave,lote:r.listaStockAsignado[s].lote,fecha_caducidad:r.listaStockAsignado[s].fecha_caducidad,cantidad:r.listaStockAsignado[s].cantidad,existencia:r.listaStockAsignado[s].cantidad,codigo_barras:r.listaStockAsignado[s].codigo_barras,precio_unitario:0,precio_total:0};a.stock.push(o)}}this.recepcionService.guardarRecepcionPedido(this.pedido.datosImprimir.id,a).subscribe(function(e){t.mostrarDialogo=!1,t.guardando=!1,t.mensajeExito=new y.a(!0),"FI"==a.status?(t.statusRecepcion="FI",t.mensajeExito.texto="Recepción Finalizada"):(t.statusRecepcion="BR",t.mensajeExito.texto="Datos Guardados"),t.mensajeExito.mostrar=!0,console.log("Recepción guardada")},function(e){t.guardando=!1,t.mostrarDialogo=!1,console.log(e),t.mensajeError=new y.a(!0),t.mensajeError.texto="No especificado",t.mensajeError.mostrar=!0;try{var a=e.json();console.log(a),401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==e.status&&a.error&&(t.mensajeError.texto=a.error,t.mensajeError.cuentaAtras=1e3)}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}}),console.log(a)},e.prototype.buscarStock=function(e,t,a){return 13==e.keyCode&&(e.preventDefault(),e.stopPropagation(),""!=a&&(this.buscarStockApi(a),t.select(),!1))},e.prototype.limpiarStock=function(){this.capturarStock=!1,this.listaStock=[],this.itemSeleccionado=null},e.prototype.eliminarStock=function(e){var t=this.itemSeleccionado.listaStockAsignado.indexOf(e);this.itemSeleccionado.listaStockAsignado.splice(t,1),this.calcularTotalStockItem(),this.verificarItemsAsignadosStockApi()},e.prototype.asignarStock=function(){this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}};var e=0;if(this.formStock.cantidad?this.formStock.cantidad<=0&&(this.erroresFormularioStock.cantidad={error:!0,texto:"La cantidad recibida debe ser mayor a 0."},e++):(this.erroresFormularioStock.cantidad={error:!0,texto:"Este campo es requerido."},e++),this.itemSeleccionado.tiene_fecha_caducidad&&!this.formStock.fecha_caducidad)this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"Este campo es requerido."},e++;else if(this.formStock.fecha_caducidad){var t=this.formStock.fecha_caducidad.split("-"),a=!1;if(3!=t.length?a=!0:4!=t[0].length||2!=t[1].length||2!=t[2].length?a=!0:parseInt(t[1])<1||parseInt(t[1])>12?a=!0:(parseInt(t[2])<1||parseInt(t[2])>31)&&(a=!0),a)this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"El formato de fecha no es correcto."},e++;else{var n=new Date,i=new Date(t[0],parseInt(t[1])-1,parseInt(t[2])),r=void 0;r=12*(i.getFullYear()-n.getFullYear()),r-=n.getMonth(),r+=i.getMonth(),r<6&&(this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"La fecha de caducidad no puede ser menor a 6 meses."},e++),console.log(r)}}if(this.formStock.lote||(this.erroresFormularioStock.lote={error:!0,texto:"Este campo es requerido."},e++),e)return!1;null==this.itemSeleccionado.listaStockAsignado&&(this.itemSeleccionado.listaStockAsignado=[]);var s=this.itemSeleccionado.cantidad_recibida;for(var o in this.itemSeleccionado.listaStockAsignado)s+=this.itemSeleccionado.listaStockAsignado[o].cantidad;s+=this.formStock.cantidad,s<=this.itemSeleccionado.cantidad?(this.itemSeleccionado.totalStockAsignado=s,this.itemSeleccionado.listaStockAsignado.push({codigo_barras:this.formStock.codigo_barras,lote:this.formStock.lote,fecha_caducidad:this.formStock.fecha_caducidad,cantidad:this.formStock.cantidad}),this.resetearFormStock(),this.calcularTotalStockItem()):this.erroresFormularioStock.cantidad={error:!0,texto:"La cantidad recibida supera la cantidad solicitada."}},e.prototype.cancelarCapturaStock=function(){this.resetearFormStock(!0)},e.prototype.resetearFormStock=function(e){void 0===e&&(e=!1),e?this.formStock={}:(this.formStock.lote=void 0,this.formStock.fecha_caducidad=void 0,this.formStock.cantidad=void 0)},e.prototype.validarItemStock=function(e,t){if(void 0===t&&(t=!1),null==e.cantidad)return t&&this.asignarMaximoPosible(e),void this.calcularTotalStockItem();var a=parseInt(e.cantidad);return isNaN(a)?(this.asignarMaximoPosible(e),void this.calcularTotalStockItem()):a<=0?(this.asignarMaximoPosible(e),void this.calcularTotalStockItem()):(a>e.existencia&&(e.cantidad=e.existencia),this.verificarTotalStockItem()||this.asignarMaximoPosible(e),void this.calcularTotalStockItem())},e.prototype.asignarMaximoPosible=function(e){var t=0;for(var a in this.itemSeleccionado.listaStockAsignado)this.itemSeleccionado.listaStockAsignado[a]!=e&&(t+=this.itemSeleccionado.listaStockAsignado[a].cantidad);var n=this.itemSeleccionado.cantidad-t;n>=e.existencia&&(e.cantidad=e.existencia),n<e.existencia&&(e.cantidad=n)},e.prototype.verificarItemsAsignadosStockApi=function(){for(var e in this.listaStock){this.listaStock[e].asignado=!1;for(var t in this.itemSeleccionado.listaStockAsignado)if(this.itemSeleccionado.listaStockAsignado[t].id==this.listaStock[e].id){this.listaStock[e].asignado=!0;break}}},e.prototype.verificarTotalStockItem=function(){var e=0;for(var t in this.itemSeleccionado.listaStockAsignado)e+=this.itemSeleccionado.listaStockAsignado[t].cantidad;return this.itemSeleccionado.totalStockAsignado<=this.itemSeleccionado.cantidad},e.prototype.calcularTotalStockItem=function(){var e=this.itemSeleccionado.cantidad_recibida;for(var t in this.itemSeleccionado.listaStockAsignado)e+=this.itemSeleccionado.listaStockAsignado[t].cantidad;if(0==e){var a=0;for(var t in this.lotesSurtidos)this.lotesSurtidos[t].clave==this.itemSeleccionado.clave&&this.lotesSurtidos.splice(a,1),a++}else{var n=!1;for(var t in this.lotesSurtidos)this.lotesSurtidos[t].clave==this.itemSeleccionado.clave&&(n=!0,this.lotesSurtidos[t].cantidad=e);n||this.lotesSurtidos.push({clave:this.itemSeleccionado.clave,cantidad:e})}this.itemSeleccionado.totalStockAsignado=e},e.prototype.keyboardInput=function(e){32==e.keyCode&&e.ctrlKey&&(event.preventDefault(),event.stopPropagation())},e.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},e}();j=_([a.i(n.Component)({selector:"app-recepcion",template:a("dCWM"),styles:[a("T603")]}),x("design:paramtypes",["function"==typeof(E=void 0!==i.b&&i.b)&&E||Object,"function"==typeof(I=void 0!==s.c&&s.c)&&I||Object,"function"==typeof(P=void 0!==f.a&&f.a)&&P||Object,"function"==typeof(C=void 0!==g.a&&g.a)&&C||Object,"function"==typeof(k=void 0!==h.a&&h.a)&&k||Object,"function"==typeof(S=void 0!==s.a&&s.a)&&S||Object,"function"==typeof(A=void 0!==v.a&&v.a)&&A||Object])],j);var E,I,P,C,k,S,A},ve71:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Fzro"),r=a("oafO");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=l=function(){function e(e,t){this.http=e,this.jwtRequest=t}return e.prototype.buscar=function(e,t){return void 0===t&&(t=null),this.jwtRequest.get(l.URL,null,{q:e,clave:t}).map(function(e){return e.json().data})},e}();c.URL="stock",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},vq80:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return r});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=function(){function e(){}return e}();r=i([a.i(n.Component)({selector:"salidas-recetas-lista",template:a("wL7n")})],r)},w40x:function(e,t){e.exports='<div class="modal" [ngClass]="{\'is-active\': mostrar}">\r\n    <div class="modal-background" (click)="toggle()"></div>\r\n    <div class="modal-content">\r\n\r\n        <header class="modal-card-head" style="background: white !important;">\r\n            <p class="modal-card-title"><span class="icon"><i class="fa fa-user-circle"></i></span> Mi cuenta</p>\r\n            <button class="delete" (click)="toggle()"></button>\r\n        </header>\r\n        <section class="modal-card-body has-text-centered">\r\n            <nav class="level">\r\n                <div class="level-item has-text-centered">\r\n                    <figure class="image is-128x128" style="position:relative;">\r\n                        <img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar">\r\n                        <a class="button is-primary is-inverted" style="position: absolute; top: 0px; right:-2em;"><span class="icon"><i class="fa fa-edit"></i></span></a>\r\n                    </figure>\r\n\r\n                </div>\r\n\r\n            </nav>\r\n            <h1 class="title">{{ usuario.nombre }} {{ usuario.apellidos }}</h1>\r\n            <h2 class="subtitle"><span class="icon"><i class="fa fa-user-circle"></i></span> {{usuario.id}}</h2>\r\n\r\n            <div class="field " *ngIf="usuario.unidades_medicas.length > 0">\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                        <select (change)="seleccionarClues($event.target.value)">\r\n                            <option *ngFor="let um of usuario.unidades_medicas" value="{{ um.clues }}" [selected]="usuario.clues_activa && usuario.clues_activa.clues== um.clues">{{ um.clues }} {{ um.nombre}}</option>\r\n                        </select>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n\r\n            <div class="field" *ngIf="usuario.clues_activa && usuario.clues_activa.almacenes && usuario.clues_activa.almacenes.length > 0">\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                        <select (change)="seleccionarAlmacen($event.target.value)">\r\n                            <option *ngFor="let almacen of usuario.clues_activa.almacenes" value="{{ almacen.id }}" [selected]="usuario.almacen_activo.id== almacen.id">{{ almacen.nombre }}</option>\r\n                        </select>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n\r\n            <div class="field " *ngIf="usuario.proveedores">\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                        <select (change)="seleccionarProveedor($event.target.value)">\r\n                            <option *ngFor="let proveedor of usuario.proveedores" value="{{ proveedor.id }}" [selected]="usuario.proveedor_activo && usuario.proveedor_activo.id == proveedor.id">{{ proveedor.nombre }}</option>\r\n                        </select>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n\r\n            <a *ngIf="mostrarCambiarEntorno" class="button  is-medium is-fullwidth is-primary" (click)="cambiarEntorno()"><span class="icon"><i class="fa fa-exchange"></i></span><span>Cambiar entorno</span></a>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button  is-medium is-fullwidth " (click)="bloquear()"><span class="icon"><i class="fa fa-lock"></i></span><span>Bloquear aplicación</span></a>\r\n            <a class="button is-danger is-medium is-fullwidth is-outlined" (click)="logout()"><span class="icon"><i class="fa fa-sign-out"></i></span><span>Cerrar sesión</span></a><br>\r\n\r\n        </footer>\r\n    </div>\r\n</div>'},"w5f+":function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("rCTf"),s=(a.n(r),a("EEr4")),o=(a.n(s),a("1APj")),c=(a.n(o),a("h0qH")),l=(a.n(c),a("aV5h")),d=(a.n(l),a("q3ik")),u=(a.n(d),a("+pb+")),p=(a.n(u),a("uCY4")),m=(a.n(p),a("6Yye")),f=(a.n(m),a("mpkG")),g=a("Nqas");a.d(t,"a",function(){return b});var h=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t){this.title=e,this.usuariosService=t,this.cargando=!1,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.usuarios=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Usuarios / Panel de control"),this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.usuariosService.buscar(t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.usuariosService.buscar(e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1,a.resultadosBusqueda=e.data,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var t=0;t<a.paginasTotalesBusqueda;t++)a.indicePaginasBusqueda.push(t+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,console.log("Cargando usuarios."),this.cargando=!0,this.usuariosService.lista(e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1,t.usuarios=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Usuarios cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.eliminar=function(e,t){var a=this;e.cargando=!0,this.usuariosService.eliminar(e.id).subscribe(function(n){e.cargando=!1,a.usuarios.splice(t,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new g.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="Usuario eliminado"},function(n){e.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e}();b=h([a.i(n.Component)({selector:"usuarios-lista",template:a("YBXS"),styles:[a("5bTO")]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==f.a&&f.a)&&_||Object])],b);var y,_},wL7n:function(e,t){e.exports='<listar #ctrl URL="movimientos?tipo=5" titulo="Salida Receta"></listar>\r\n<menu-farmacia [modulo]="\'Salidas por recetas\'" [icono]="\'assets/icono-salidas.svg\'" [url]="\'/almacen/salidas-recetas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n     <!-- <div class="column is-one-quarter is-hidden-mobile">\r\n        <menu-lateral (onEnviarTipo)=enviarTipo($event);></menu-lateral>  -->\r\n        <!-- <aside class="menu" style="padding: 1em;">\r\n            <a routerLink="/almacen/salidas-recetas/nuevo" routerLinkActive="is-active" class="button is-primary is-inverted is-medium is-fullwidth"><span class="icon"  ><i class="fa fa-plus"></i></span> <span>Nueva Receta</span></a>\r\n            <br>\r\n            <ul class="menu-list">\r\n                <li>\r\n                    <a routerLink="/almacen/salidas-recetas" #receta routerLinkActive="is-active">\r\n                        <span class="icon"><i class="fa fa-pencil-square-o"></i></span> Salida por receta\r\n                        <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                        --><!-- <span class="tag is-pulled-right" [ngClass]="{ \'is-white\': receta.className == \'is-active\', \'is-primary\': receta.className != \'is-active\' }"></span> -->\r\n                   <!--  </a>\r\n                </li>\r\n            </ul>\r\n\r\n        </aside>\r\n    </div>-->\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Salidas por recetas\r\n                            </h1>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                            <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/almacen/salidas-recetas/nuevo">\r\n                                    <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table is-responsive" *ngIf="!ctrl.cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th><abbr title="Folio de receta">Folio</abbr></th>\r\n                        <th>Turno</th>\r\n                        <th>Usuario</th>\r\n                        <th>Estatus</th>\r\n                        <th style=" text-align: center;">Creado</th>\r\n                        <th style=" text-align: center;">Actualizado</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.movimiento_metadato.turno.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.status }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.updated_at | date:\'medium\'}} </a></td>\r\n\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.movimiento_metadato.turno.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.status }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.updated_at | date:\'medium\'}} </a></td>\r\n\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},waBZ:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"",""]),e.exports=e.exports.toString()},ww4W:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.usuario={}}return e.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},e}();i([a.i(n.Input)(),r("design:type",String)],s.prototype,"modulo",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"icono",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"url",void 0),s=i([a.i(n.Component)({selector:"menu-laboratorio",template:a("E/ad"),styles:[a("KSqy")]}),r("design:paramtypes",[])],s)},x35b:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(a("XS25"),a("3j3K")),i=a("O61y"),r=a("Iksp");a("kZql").a.production&&a.i(n.enableProdMode)(),a.i(i.a)().bootstrapModule(r.a)},x3bX:function(e,t){e.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-plus"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Nuevo usuario\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="section">\r\n            <panel-control-usuarios-form \r\n                [usuario]="usuario" \r\n                [roles]="roles" \r\n                [unidadesMedicas]="unidadesMedicas" \r\n                [usuarioRepetido]="usuarioRepetido"\r\n                [usuarioInvalido]="usuarioInvalido"\r\n                [cargando]="cargando"\r\n                [cargandoRoles]="cargandoRoles"\r\n                (onEnviar)="enviar()"\r\n                (onRegresar)="regresar()"\r\n                (onCargarRoles)="cargarRoles()"\r\n            ></panel-control-usuarios-form>\r\n            </section>\r\n        </div>\r\n        \r\n       \r\n       \r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <p><b>Error:</b> {{ mensajeError.texto }}<br></p>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>      \r\n</div>\r\n\r\n<div class="notification is-warning" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeAdvertencia.mostrar">\r\n    <button class="delete" (click)="mensajeAdvertencia.mostrar = false"></button>        \r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-warning"></i></span> <span>{{ mensajeAdvertencia.texto }}</span></p>\r\n    \r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeAdvertencia.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n'},xTws:function(e,t,a){"use strict";var n=a("3j3K");a.d(t,"a",function(){return s});var i=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=function(){function e(){this.usuario={},this.menu=[],this.menuAutorizado=[]}return e.prototype.ngOnInit=function(){var e=JSON.parse(localStorage.getItem("usuario")),t=e.permisos.split("|");if(this.menu=[{titulo:"Configuración",modulos:[{permiso:"Ki9kBghgqYsY17kqL620GWYl0bpeU6TB",icono:"fa-hospital-o",titulo:"Mis servicios",url:"/configuracion/servicios"},{permiso:"9dKCEyujSdLQF2CbpjXiWKeap0NlJCzw",icono:"fa-clock-o",titulo:"Mis turnos",url:"/configuracion/turnos"},{permiso:"BnB3LhrDbKNBrbQaeB2BPXKGrLEYrEw7",icono:"fa-medkit",titulo:"Mis claves",url:"/configuracion/claves"}]}],this.menuAutorizado=[],t.length>0)for(var a in this.menu)for(var n in this.menu[a].modulos)e:for(var i in t)if(t[i]==this.menu[a].modulos[n].permiso){var r=this.initMenuAutorizadoPorItem(this.menu[a].titulo);r.modulos.push(this.menu[a].modulos[n]);break e}},e.prototype.initMenuAutorizadoPorItem=function(e){for(var t in this.menuAutorizado)if(e==this.menuAutorizado[t].titulo)return this.menuAutorizado[t];return this.menuAutorizado.push({titulo:e,modulos:[]}),this.menuAutorizado[this.menuAutorizado.length-1]},e}();s=i([a.i(n.Component)({selector:"panel-control-menu-aside",template:a("h7+X"),styles:[a("hl/3")]}),r("design:paramtypes",[])],s)},xfgp:function(e,t,a){"use strict";var n=a("3j3K"),i=a("bCdj"),r=a("Nqas");a.d(t,"a",function(){return c});var s=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e){this.apiService=e,this.onCerrar=new n.EventEmitter,this.onEnviar=new n.EventEmitter,this.cargando=!1,this.cargandoUnidadesMedicasSinAsignar=!1,this.edica=!1,this.mensajeError=new r.a,this.mensajeAgregado=new r.a,this.unidadesMedicasSinAsignar=[],this.unidadesMedicas=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.clues="-1"}return e.prototype.ngOnInit=function(){this.listar(this.paginaActual),this.cargarUnidadesMedicasSinAsignar()},e.prototype.cerrar=function(){this.onCerrar.emit()},e.prototype.cargarUnidadesMedicasSinAsignar=function(){var e=this;this.cargandoUnidadesMedicasSinAsignar=!0,this.apiService.listaClues(this.lista.id,{sin_asignar:!0}).subscribe(function(t){e.cargandoUnidadesMedicasSinAsignar=!1,e.unidadesMedicasSinAsignar=t,console.log("Items cargados.")},function(t){e.cargandoUnidadesMedicasSinAsignar=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.cargarUnidadesMedicasSinAsignar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,console.log("Cargando items."),this.cargando=!0,this.apiService.listaClues(this.lista.id,{page:e,per_page:this.resultadosPorPagina}).subscribe(function(e){t.cargando=!1,t.unidadesMedicas=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Items cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.paginaActual!=this.paginasTotales&&this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){1!=this.paginaActual&&this.listar(this.paginaActual-1)},e.prototype.eliminar=function(e,t){var a=this;e.cargando=!0,this.apiService.eliminarClues(e.id).subscribe(function(e){a.unidadesMedicas.splice(t,1),a.cargarUnidadesMedicasSinAsignar()},function(t){e.cargando=!1,a.mensajeError.mostrar=!0;try{t.json();401==t.status?a.mensajeError.texto="No tiene permiso para hacer esta operación.":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(e){console.log("No se puede interpretar el error"),500==t.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.seleccionarClues=function(e){this.clues=e},e.prototype.agregar=function(e){var t=this;if(e.preventDefault(),"-1"!=this.clues){var a={};if("TODAS"!=this.clues)a={claves_basicas_id:this.lista.id,clues:this.clues};else{var n=[];for(var i in this.unidadesMedicasSinAsignar)n.push(this.unidadesMedicasSinAsignar[i].clues);a={claves_basicas_id:this.lista.id,lista_clues:n}}this.agregandoUnidadMedica=!0,this.apiService.agregarClues(a).subscribe(function(e){console.log(e),t.clues=-1,t.agregandoUnidadMedica=!1,t.cargarUnidadesMedicasSinAsignar(),t.listar(1)},function(e){t.agregandoUnidadMedica=!1,t.mensajeError.mostrar=!0;try{e.json();401==e.status?t.mensajeError.texto="No tiene permiso para hacer esta operación.":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})}},e}();s([a.i(n.Output)(),o("design:type",Object)],c.prototype,"onCerrar",void 0),s([a.i(n.Output)(),o("design:type",Object)],c.prototype,"onEnviar",void 0),s([a.i(n.Input)(),o("design:type",Object)],c.prototype,"lista",void 0),c=s([a.i(n.Component)({selector:"claves-basicas-lista-clues",template:a("y05F"),styles:[a("2IuD")]}),o("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object])],c);var l},xlUK:function(e,t){e.exports='<section  class="top-nav hero is-primary">\r\n            \r\n    <nav class="nav">\r\n        <a title="Catalogo" class="nav-item pull-left nav-hub-active"  routerLink="/almacen-articulos/catalogos" routerLinkActive="is-active">\r\n            \r\n            <img src="assets/hub-almacen-articulos.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left">\r\n            \r\n            <a class="nav-item" routerLink="/almacen-articulos/catalogos" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;Unidades Médicas</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},y05F:function(e,t){e.exports='<div class="modal is-active">\r\n\t<div class="modal-background" (click)="cerrar()"></div>\r\n\t<div class="modal-card" style="width:95%; height:100%;">\r\n\t\t<header class="modal-card-head" style="background: #00d1b2;">\r\n\t\t\t<div class="container is-fluid" style="width:100%;">\r\n\t\t\t\t<h1 class="title" style="color:#FFF;">\r\n\t\t\t\t\tClues asignadas a: <b>{{ lista.nombre }}</b>\r\n\t\t\t\t</h1>\r\n\t\t\t</div>\r\n\t\t\t<a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrar()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n\t\t</header>\r\n\t\t<section class="modal-card-body" style="padding:0px;">\r\n\r\n\t\t\t<div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n\t\t\t\t<br>\r\n\t\t\t\t<span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n\t\t\t\t<br>\r\n\t\t\t\t<br>\r\n\t\t\t</div>\r\n\r\n\t\t\t<table class="table" *ngIf="!cargando" style="font-size: 0.8em;">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Clues</th>\r\n\t\t\t\t\t\t<th>Nombre</th>\r\n\t\t\t\t\t\t<th>Fecha</th>\r\n\t\t\t\t\t\t<th>Por usuario</th>\r\n\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr *ngFor="let item of unidadesMedicas; let i = index">\r\n\t\t\t\t\t\t<td>{{ item.clues }}</td>\r\n\t\t\t\t\t\t<td>{{ item.nombre }}</td>\r\n\t\t\t\t\t\t<td>{{ item.created_at }}</td>\r\n\t\t\t\t\t\t<td>{{ item.usuario_id }}</td>\r\n\t\t\t\t\t\t<td style="width:70px !important;">\r\n\t\t\t\t\t\t\t<span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n\t\t\t\t\t\t\t<a (click)="eliminar(item,i)" *ngIf="!item.cargando"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr *ngIf="unidadesMedicas.length == 0">\r\n\t\t\t\t\t\t<td colspan="4" style="vertical-align: middle; color:#888;">No hay unidades médicas asiganadas a esta lista.</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<br>\r\n\r\n\t\t</section>\r\n\t\t<footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em ">\r\n\r\n\t\t\t<paginacion [total]="total" [paginasTotales]="paginasTotales" [resultadosPorPagina]="resultadosPorPagina" [paginaActual]="paginaActual"\r\n\t\t\t [indicePaginas]="indicePaginas" (onSiguiente)="paginaSiguiente()" (onAnterior)="paginaAnterior()" (onListar)="listar($event)"\r\n\t\t\t *ngIf="total > 0 && total > resultadosPorPagina "></paginacion>\r\n\r\n\r\n\r\n\t\t\t<div class="notification is-dark is-unselectable mensaje-agregar" [ngClass]="{ \'mostrar\': mensajeAgregado.mostrar}" *ngIf="mensajeAgregado.mostrar"\r\n\t\t\t (click)="mensajeAgregado.mostrar=false">\r\n\t\t\t\t<span class="icon"><i class="fa fa-check-circle"></i></span> <span>Agregado</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<form (submit)="agregar($event)">\r\n\t\t\t\t<div class="control is-grouped">\r\n\t\t\t\t\t<p class="control is-expanded " [ngClass]="{ \'is-loading\': cargandoUnidadesMedicasSinAsignar }">\r\n\t\t\t\t\t\t<span class="select is-fullwidth" >              \r\n\t\t\t\t\t\t\t<select (change)="seleccionarClues($event.target.value)" #cluesSelect  [disabled]="unidadesMedicasSinAsignar.length == 0 || agregandoUnidadMedica">\r\n\t\t\t\t\t\t\t<option value="-1">Seleccione una clues</option>\r\n\t\t\t\t\t\t\t<option value="TODAS" *ngIf="unidadesMedicasSinAsignar.length > 1">Todas las unidades médicas</option>\r\n\t\t\t\t\t\t\t<option *ngFor="let um of unidadesMedicasSinAsignar" value="{{ um.clues }}" >{{ um.clues }} - {{ um.nombre }}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p class="control">\r\n\t\t\t\t\t\t<button [disabled]="clues == -1 || unidadesMedicasSinAsignar.length == 0" [ngClass]="{ \'is-loading\': agregandoUnidadMedica }" class="button is-primary">\r\n\t\t\t\t\t\t\t<span class="icon"><i class="fa fa-plus"></i></span><span>Agregar</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</form>\r\n\t\t</footer>\r\n\r\n\t\t<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n\t\t\t<button class="delete" (click)="mensajeError.mostrar = false"></button>\r\n\t\t\t<b>Error:</b> {{ mensajeError.texto }}\r\n\t\t</div>\r\n\t</div>\r\n</div>'},yBPq:function(e,t){e.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n      \r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary"  >\r\n                \r\n                <div class="hero-body" style="position:relative;">                    \r\n                    \r\n                    <a class="button  is-primary" *ngIf="!cargando" style="position:absolute; top:1em; right:1em;" (click)="exportar()"><span class="icon "><i class="fa fa-file-excel-o"></i></span> <span>Exportar</span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-line-chart"></i></span> Abasto\r\n                        </h1>\r\n                        \r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar por CLUES" [(ngModel)] = "clues" (keyup)="filtrarClues($event)">\r\n                        </p>\r\n                        </div>\r\n                        <div class="columns">                            \r\n                            <div class="column">\r\n                                <label for="jurisdicciones">Proveedores:</label>\r\n                       \r\n                                <p class="control is-expanded">\r\n                                    <span class="select is-fullwidth">\r\n                                    <select #proveedoresSelect (change)="cambioSeleccionProveedor(proveedoresSelect.value)">\r\n                                        <option value="-1">Todos</option>\r\n                                        <option *ngFor="let item of proveedores" value="{{item.id}}">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                    </span>\r\n                                </p>                   \r\n                          \r\n                            </div>\r\n                            <div class="column">\r\n                                <label for="jurisdicciones">Jurisdicciones:</label>\r\n                             \r\n                                <p class="control is-expanded">\r\n                                    <span class="select is-fullwidth">\r\n                                    <select #js id="jurisdicciones"  (change)="cambioSeleccionJurisdiccion(js.value)">\r\n                                        <option value="-1">Todas</option>\r\n                                        <option *ngFor="let item of jurisdicciones" value="{{item.id}}">JS {{ item.numero }} - {{ item.nombre }}</option>\r\n                                    </select>\r\n                                    </span>\r\n                                </p>\r\n                                                       \r\n                               \r\n                            </div>\r\n                        </div>\r\n                        <div *ngIf="jurisdiccionesSeleccionadas.length>0 || proveedoresSeleccionados.length>0">\r\n                            <h1 class="title is-6">Filtro aplicado:</h1>\r\n                            <span class="tag is-dark is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of proveedoresSeleccionados; let i = index">{{ item.nombre_corto }}<button class="delete is-small" (click)="quitarProveedor(i)"></button></span>\r\n                            <span class="tag is-white is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of jurisdiccionesSeleccionadas;  let i = index">JS {{ item.numero }}<button class="delete is-small" (click)="quitarJurisdiccion(i)"></button></span>\r\n                            \r\n                        </div>\r\n                        <nav class="level">\r\n                            <div class="level-left"><h1 class="title is-5">Resultados: <b>{{ total }}</b></h1></div>\r\n                            <div class="level-right">\r\n                                <div class="block">\r\n                                <button class="button " *ngIf="jurisdiccionesSeleccionadas.length>0 || proveedoresSeleccionados.length>0 || clues != \'\'" (click)="clues = \'\'; jurisdiccionesSeleccionadas = []; proveedoresSeleccionados = []; js.value = -1; proveedoresSelect.value= -1 "><span class="icon"><i class="fa fa-times"></i></span> <span>Limpiar filtro</span></button>\r\n                                <button class="button is-primary is-inverted" (click)="listar(1)"><span class="icon"><i class="fa fa-filter"></i></span> <span>Filtrar</span></button>\r\n                                </div>\r\n                            </div>\r\n                        </nav>\r\n                    \r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th>Proveedor</th>\r\n                    <th>Clues</th>\r\n                    <th>Nombre</th>\r\n                    <th style="cursor:pointer" (click)="toggleCauses()"><span><abbr title="Causes">CA</abbr></span><span class="icon is-small"><i class="fa" [ngClass]="{ \'fa-sort\': ordenarCauses == \'\', \'fa-sort-asc\': ordenarCauses == \'ASC\', \'fa-sort-desc\': ordenarCauses == \'DESC\' }"></i></span></th>\r\n                    <th style="cursor:pointer" (click)="toggleNoCauses()"><abbr title="No causes">NCA</abbr><span class="icon is-small"><i class="fa" [ngClass]="{ \'fa-sort\': ordenarNoCauses == \'\', \'fa-sort-asc\': ordenarNoCauses == \'ASC\', \'fa-sort-desc\': ordenarNoCauses == \'DESC\' }"></i></span></th>\r\n                    <th style="cursor:pointer" (click)="toggleMaterialCuracion()"><abbr title="Material de curación">MC</abbr><span class="icon is-small"><i class="fa" [ngClass]="{ \'fa-sort\': ordenarMaterialCuracion == \'\', \'fa-sort-asc\': ordenarMaterialCuracion == \'ASC\', \'fa-sort-desc\': ordenarMaterialCuracion == \'DESC\' }"></i></span></th>\r\n                    </tr>\r\n                </thead>\r\n                \r\n                <tbody>\r\n                    <tr *ngFor="let item of lista; let i=index">                        \r\n                        <td style="vertical-align: middle;">{{ item.proveedor }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.clues }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.unidad_medica }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.porcentaje_causes }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.porcentaje_no_causes }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.porcentaje_material_curacion }}</td>\r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina"></paginacion>\r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},yfXU:function(e,t,a){"use strict";var n=a("3j3K"),i=a("Qbdm"),r=a("rCTf"),s=(a.n(r),a("EEr4")),o=(a.n(s),a("1APj")),c=(a.n(o),a("h0qH")),l=(a.n(c),a("aV5h")),d=(a.n(l),a("q3ik")),u=(a.n(d),a("+pb+")),p=(a.n(u),a("uCY4")),m=(a.n(p),a("6Yye")),f=(a.n(m),a("Nqas")),g=a("7xfG");a.d(t,"a",function(){return b});var h=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(){function e(e,t){this.title=e,this.pacienteService=t,this.cargando=!1,this.mensajeError=new f.a,this.mensajeExito=new f.a,this.pacientes=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return e.prototype.ngOnInit=function(){var e=this;this.title.setTitle("Pacientes / Admisión"),this.listar(1),this.mensajeError=new f.a,this.mensajeExito=new f.a;var t=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(t){return console.log("Cargando búsqueda."+t),e.busquedaActivada=""!=t,e.ultimoTerminoBuscado=t,e.paginaActualBusqueda=1,e.cargando=!0,t?e.pacienteService.buscar(t,e.paginaActualBusqueda,e.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=function(){t.listarBusqueda(t.ultimoTerminoBuscado,t.paginaActualBusqueda)};try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(t){e.cargando=!1,e.resultadosBusqueda=t.data,e.totalBusqueda=0|t.total,e.paginasTotalesBusqueda=Math.ceil(e.totalBusqueda/e.resultadosPorPaginaBusqueda),e.indicePaginasBusqueda=[];for(var a=0;a<e.paginasTotalesBusqueda;a++)e.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},e.prototype.buscar=function(e){this.terminosBusqueda.next(e)},e.prototype.listarBusqueda=function(e,t){var a=this;this.paginaActualBusqueda=t,console.log("Cargando búsqueda."),this.cargando=!0,this.pacienteService.buscar(e,t,this.resultadosPorPaginaBusqueda).subscribe(function(e){a.cargando=!1,a.resultadosBusqueda=e.data,a.totalBusqueda=0|e.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var t=0;t<a.paginasTotalesBusqueda;t++)a.indicePaginasBusqueda.push(t+1);console.log("------"),console.log(e),console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(e,t)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.listar=function(e){var t=this;this.paginaActual=e,this.cargando=!0,this.pacienteService.lista(e,this.resultadosPorPagina).subscribe(function(e){t.cargando=!1,t.pacientes=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("pacientes cargados.")},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},e.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},e.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},e.prototype.paginaSiguienteBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda+1)},e.prototype.paginaAnteriorBusqueda=function(e){this.listarBusqueda(e,this.paginaActualBusqueda-1)},e}();b=h([a.i(n.Component)({selector:"app-lista",template:a("g913"),styles:[a("8Kb3")]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==g.a&&g.a)&&_||Object])],b);var y,_},ypsv:function(e,t){e.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Lista de Pacientes Ingresados\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th></th>\r\n                    <th><abbr title="Paciente ID">ID</abbr></th>\r\n                    <th>Nombre</th>\r\n                    <th>Fecha Nacimiento</th>\r\n                    <th>Localidad (Municipio)</th>\r\n                    <th>Fecha Ingreso</th>\r\n                    <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pacientesEgreso; let i=index">\r\n                        <th><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">{{ item.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">{{ item.fecha_nacimiento }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.localidad"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">{{item.localidad.nombre }} ( {{item.localidad.municipio.nombre }} ) </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.localidad"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">DESCONOCIDO</a></td>\r\n\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">{{item.ingresoactivos[0].fecha_hora_ingreso}} </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/egreso/{{item.id}}"> </a></td>\r\n                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-primary" routerLink="/pacientes/modulo/egreso/{{item.id}}"><span class="icon"><i class="fa fa-hospital-o"></i></span></a></td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="pacientesEgreso.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.fecha_nacimiento }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.localidad.nombre }} ( {{item.localidad.municipio.nombre }} ) </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.ingresoactivos[0].fecha_hora_ingreso}} </a></td>\r\n\r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="!item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">DESCONOCIDO</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"> </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-primary" routerLink="/pacientes/modulo/ingreso/{{item.id}}"><span class="icon"><i class="fa fa-hospital-o"></i></span></a></td>\r\n                        \r\n                    \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n    </div>        \r\n   \r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},ywVL:function(e,t){e.exports='<menu-farmacia></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},z4T9:function(e,t,a){"use strict";var n=a("3j3K"),i=a("2Je8"),r=a("NVOs"),s=a("Uvud"),o=a("fjeY"),c=a("+ZDf"),l=a("Zit5"),d=a("0cAy"),u=a("RHrs"),p=a("BqOv"),m=a("OKLB"),f=a("Hg6L"),g=a("UIlc"),h=a("NAeX"),v=a("7MfY"),b=a("ve71"),y=a("9o2x"),_=a("DnYL"),x=a("g2pd"),j=a("vYWY"),E=a("lFr4");a.d(t,"a",function(){return P});var I=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},P=function(){function e(){}return e}();P=I([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,s.a,o.a,c.a,l.a,d.a,p.a,u.a],declarations:[m.a,f.a,g.a,_.a,x.a,j.a,E.a],providers:[h.a,v.a,b.a,y.a]})],P)},zT6u:function(e,t){e.exports='<formulario #ctrl URL="movimientos" titulo="Salida  de almacén" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Salida de almacén\'" [icono]="\'assets/icono-salidas.svg\'" [url]="\'/almacen/salidas-estandar\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato">\r\n    <div class="contenedor columns " style="height:100%">\r\n        <div class="column is-one-third" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <h1 *ngIf="!tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> {{ctrl.moduloTitulo}}\r\n                    </h1>\r\n                    <h1 *ngIf="tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> Folio {{ctrl.id}}\r\n                    </h1>\r\n\r\n\r\n                </section>\r\n                <div style="padding: 1em;">\r\n                    <nav class="nav">\r\n                        <div class="nav-right">\r\n                            <div class="nav-item">\r\n                                <div class="field is-grouped">\r\n                                    <p class="control" *ngIf="!tieneid" style="float:left">\r\n                                        <button class="button is-primary" (click)="guardar_movimiento()"\r\n                                        [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                                    </p>\r\n                                    <p class="control" style="float:left">\r\n                                        <a *ngIf="tieneid" class="button is-primary is-inverted" (click)="imprimir()">\r\n                                            <span class="icon"><i class="fa fa-print"></i></span>\r\n                                        </a>\r\n                                        <a class="button" (click)="ctrl.regresar()">\r\n                                            Regresar\r\n                                        </a>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n\r\n                    <h3 class="title">\r\n                        <i class="fa fa-file"></i>\r\n                         Datos del movimiento\r\n                    </h3>\r\n                    <div >\r\n                        <div class="field">\r\n                            <label class="label">Fecha del movimiento:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n\r\n                                <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_movimiento\' formControlName="fecha_movimiento" ngui-datetime-picker\r\n                                    [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched}"\r\n                                    placeholder="YYYY-MM-DD" />\r\n\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Observaciones:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <textarea class="textarea" type="text" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched}"\r\n                                    placeholder="Observaciones" formControlName="observaciones"></textarea>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="control" *ngIf="mostrarCancelado">\r\n                            <!-- *ngIf -->\r\n                            <div class="field">\r\n                                <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                    <input type="checkbox" id="cancelado" class="styled" [checked]="ctrl.dato.get(\'cancelado\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'cancelado\').patchValue(ctrl.dato.get(\'cancelado\').value == \'1\' ? \'0\' : \'1\')">\r\n                                    <label for="cancelado">  Cancelado\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="field">\r\n                                <label class="label">Observaciones de cancelación:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched}"\r\n                                        placeholder="Observaciones de cancelacion" formControlName="observaciones_cancelacion"></textarea>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <a id="actualizar" (click)="ctrl.cargarCatalogo(\'servicios\',\'mis-servicios\'); "></a>\r\n                    <hr id="catalogos" (click)="ctrl.cargarCatalogo(\'turnos\', \'mis-turnos\'); "> \r\n\r\n                    <div >\r\n                        <nav class="panel"  formGroupName="movimiento_metadato">\r\n\r\n                            <div class="field">\r\n                                <label class="label">Turno:</label>\r\n                                <!-- NO carga los turnos -->\r\n                                <div class="field" *ngIf="!ctrl.turnos">\r\n                                    <span *ngIf="ctrl.cargando" class="tag is-primary is-medium">Cargando turnos. <i class="fa fa-refresh fa-spin" aria-hidden="true"></i></span>\r\n                                    <span *ngIf="!ctrl.cargando"class="tag is-medium"><a id="actualizar"  *ngIf="!ctrl.cargando" (click)="ctrl.cargarCatalogo(\'turnos\', \'mis-turnos\'); ">No se pudieron cargar los turnos. <i class="fa fa-refresh" aria-hidden="true"></i></a></span>\r\n                                    \r\n                                    <p></p>\r\n                                </div>\r\n                                <!-- SI carga los turnos -->\r\n                                <p  *ngIf="ctrl.turnos" class="control is-expanded  has-icon has-icon-right">\r\n                                    <select class="select" name="turno" formControlName="turno_id" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched}">\r\n                                        <option *ngFor="let item of ctrl.turnos.clues_turnos" value="{{item.id}}" [attr.selected]="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').value == item.id ">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n                            <!-- SERVICIOS -->\r\n                            <div class="field">\r\n                                <label class="label">Servicio que recibe:</label>\r\n                                <!-- NO carga los SERVICIOS -->\r\n                                <div class="field" *ngIf="!ctrl.servicios">\r\n                                    <span *ngIf="ctrl.cargando" class="tag is-primary is-medium">Cargando servicios. <i class="fa fa-refresh fa-spin" aria-hidden="true"></i></span>\r\n                                    <span *ngIf="!ctrl.cargando"class="tag is-medium">No se pudieron cargar los servicios.</span>\r\n                                    <a id="actualizar" *ngIf="!ctrl.cargando" (click)="ctrl.cargarCatalogo(\'servicios\', \'mis-servicios\'); "><i class="fa fa-refresh is-medium" aria-hidden="true"></i></a>\r\n                                </div>\r\n                                <!-- SI carga los SERVICIOS -->\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <select *ngIf="ctrl.servicios" class="select" name="servicio_id" formControlName="servicio_id" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').touched}">\r\n                                        <option *ngFor="let item of ctrl.servicios.clues_servicios" value="{{item.id}}" [attr.selected]="ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').value == item.id ">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n\r\n                            <div class="field">\r\n                                <label class="label">Persona que recibe:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <input class="input" type="text" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched}"\r\n                                        placeholder="Persona que recibe" formControlName="persona_recibe">\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </nav>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- apartado de insumos -->\r\n        <div class="column" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <div class="hero-body">\r\n                        <a class="button  is-primary" style="position:absolute; top:5em; right:3em;" (click)="ctrl.cargarDatos();  "><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                        <div class="container is-fluid">\r\n                            <h1 class="title">\r\n                                <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                                <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Insumos\r\n                            </h1>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                    <br>\r\n                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                </div>\r\n                <section class="section">\r\n\r\n                    <div class="field has-addons has-addons-centered" *ngIf="!tieneid">\r\n\r\n                        <p class="control">\r\n                            <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" id="buscarInsumo" value-property-name="clave"\r\n                                display-property-name="descripcion" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                                (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                                type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n\r\n                        </p>\r\n\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div formArrayName="insumos_negados">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos_negados.controls; let i=index" [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(231, 242, 22, 0.4)\' :  \'rgba(231, 242, 22, 0.4)\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                       \r\n                                        <p>\r\n                                            <strong>\r\n                                                <span style="color: red"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>\r\n                                            \r\n                                                <span style="color:cornflowerblue">\r\n                                                    Clave: {{ ctrl.dato.controls.insumos_negados.controls[i].controls.clave.value }} \r\n                                                </span>\r\n                                                Nombre: {{ctrl.dato.controls.insumos_negados.controls[i].controls.descripcion.value}}\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.es_causes.value"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="!ctrl.dato.controls.insumos_negados.controls[i].controls.es_causes.value"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.es_unidosis.value == 1\r\n                                                "><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos_negados.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                    </div>\r\n                                    <nav class="level is-mobile">\r\n                                        <div class="level-left">\r\n                                            <a class="level-item" >\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.modo_salida.value == \'N\'">\r\n                                                    <!-- cambiar a formControlName="cantidad_solicitada"  -->\r\n                                                    <label class="label">Cant. solicitada (Normal):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" class="input" formControlName="cantidad_solicitada" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_solicitada.hasError(\'required\') && ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_solicitada.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_solicitada" >\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div class="field" *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.modo_salida.value == \'U\'">\r\n                                                    <!-- cambiar a formControlName="cantidad_solicitada_unidosis"  -->\r\n                                                    <label class="label">Cant. solicitada unidosis ({{insumo.unidad_medida}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" class="input" formControlName="cantidad_solicitada_unidosis" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_solicitada_unidosis.hasError(\'required\') && ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_solicitada_unidosis.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_solicitada_unidosis" >\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                        </div>\r\n                                        <div class="level-right">\r\n                                            <a class="level-item" >\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.modo_salida.value == \'N\'">\r\n                                                    <label class="label" *ngIf="tieneid">Cant. surtida:</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. a surtir:</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_surtida.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" >\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.modo_salida.value == \'U\'">\r\n                                                    <label class="label" *ngIf="tieneid">Cant. surtida (unidosis):</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. a surtir (unidosis):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida_unidosis" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_surtida_unidosis.hasError(\'required\') && ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_surtida_unidosis.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida_unidosis" >\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n\r\n                                        </div>\r\n                                    </nav>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style="height:50px;"></div>\r\n\r\n                    <div formArrayName="insumos">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos.controls; let i=index" [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(230, 230, 232, 0.44)\' : \'\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <a *ngIf="!tieneid" class="is-danger" title="Quitar este elemento de la lista" style="float:right" (click)="ctrl.quitar_form_array(ctrl.dato.controls.insumos,i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                        <p>\r\n                                            <strong>\r\n                                                <span style="color:cornflowerblue">\r\n                                                    Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }} \r\n                                                </span>\r\n                                                Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 1"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 0"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value == 1\r\n                                                "><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                        <a class="is-danger" title="Ver la lista de lotes de este articulo" style="float:right" (click)="ver_lotes_asignados(i)">\r\n                                            <span class="icon">\r\n                                                <i *ngIf="!mostrar_lote[i]" class="fa fa-plus"></i>\r\n                                                <i *ngIf="mostrar_lote[i]" class="fa fa-minus"></i>\r\n                                            </span>\r\n                                        </a>\r\n                                    </div>\r\n                                    <section *ngIf="mostrar_lote[i]">\r\n                                        <table class="table is-narrow is-bordered is-striped">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Lote</th>\r\n                                                    <th>Caducidad</th>\r\n                                                    <th>Codigo de barras</th>\r\n                                                    <th *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'N\'">Existencia</th>\r\n                                                    <th *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'U\'">Existencia Unidosis</th>\r\n                                                    \r\n                                                    <th *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'N\'">Cantidad normal</th>\r\n                                                    <th *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'U\'">Cantidad unidosis</th>\r\n                                                    <th *ngIf="!tieneid"></th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody formArrayName="lotes">\r\n                                                <tr *ngFor="let val of ctrl.dato.controls.insumos.controls[i].controls.lotes.controls;  let i2 = index;">\r\n                                                    <td>{{val.value.lote}}</td>\r\n                                                    <td>{{val.value.fecha_caducidad}}</td>\r\n                                                    <td>{{val.value.codigo_barras}}</td>\r\n                                                    <td *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'N\'">{{val.value.existencia}}</td>\r\n                                                    <td *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'U\'">{{val.value.existencia_unidosis}}</td>\r\n                                                    <td [formGroupName]="i2">\r\n                                                        <input  *ngIf="val.value.modo_salida == \'N\'" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2, modo)" type="number" step="1" min="0" max="{{val.value.existencia}}"\r\n                                                            placeholder="Cantidad" formControlName="cantidad">\r\n                                                        <input  *ngIf="val.value.modo_salida == \'U\'" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2, modo)" type="number" step="1" min="0" max="{{val.value.existencia_unidosis}}"\r\n                                                            placeholder="Cantidad unidosis" formControlName="cantidad"></td>\r\n                                                    <td *ngIf="!tieneid">\r\n                                                        <a class="is-danger" title="Quitar este lote" (click)="quitar_lote_insumo(i, val.value, i2)">\r\n                                                            <span class="icon">\r\n                                                                <i class="fa fa-trash-o"></i>\r\n                                                            </span>\r\n                                                        </a>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </section>\r\n                                    <nav class="level is-mobile">\r\n                                        <div class="level-left">\r\n                                            <a class="level-item" >\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'N\'">\r\n                                                    <!-- cambiar a formControlName="cantidad_solicitada"  -->\r\n                                                    <label class="label" *ngIf="tieneid">Cant. solicitada ({{ctrl.dato.get("insumos").value[i].detalles.informacion_ampliada.presentacion_nombre}}):</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. solicitada ({{ctrl.dato.controls.insumos.controls[i].controls.presentacion_nombre.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" class="input" formControlName="cantidad_solicitada" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_solicitada.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_solicitada.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_solicitada" >\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div class="field" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'U\'">\r\n                                                    <!-- cambiar a formControlName="cantidad_solicitada_unidosis"  -->\r\n                                                    <label class="label">Cant. solicitada unidosis ({{ctrl.dato.controls.insumos.controls[i].controls.unidad_medida.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" class="input" formControlName="cantidad_solicitada" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_solicitada.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_solicitada.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_solicitada" >\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                        </div>\r\n                                        <div class="level-right">\r\n                                            <a class="level-item" >\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'N\'">\r\n                                                    <label class="label" *ngIf="tieneid">Cant. surtida ({{ctrl.dato.get("insumos").value[i].detalles.informacion_ampliada.presentacion_nombre}}):</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. a surtir ({{ctrl.dato.controls.insumos.controls[i].controls.presentacion_nombre.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad" >\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'U\'">\r\n                                                    <label class="label" *ngIf="tieneid">Cant. surtida ():</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. a surtir unidosis ({{ctrl.dato.controls.insumos.controls[i].controls.unidad_medida.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad" >\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n\r\n                                        </div>\r\n                                    </nav>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n\r\n<div class="modal" id="verLotes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card" style="width: 60%;">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title" id="tituloModal" style="width: 200px"> </p>\r\n            <button type="button" class="delete" (click)="cancelarModal(\'verLotes\'); modo = \'N\';"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="columns">\r\n                <div class="column is-two-thirds">\r\n                    <div class="columns">\r\n                        <div class="column is-4">\r\n                            <label class="label" style="font-size: large;float: left;margin-right: 6%;">Modo salida: </label>\r\n                        </div>\r\n                        <div class="b-checkbox is-info is-circular">\r\n                            <div class="column is-auto">\r\n                                <input class="styled" type="radio" id="modo_n" [checked]="modo == \'N\'" (click)="modo = \'N\'" [value]="\'N\'" name="modo">                                    \r\n                                <label for="modo_n">\r\n                                    <span class="tag is-large" [ngClass]="{\'is-success\':modo == \'N\'}">Normal</span>\r\n                                </label>\r\n                            </div>\r\n                            <div *ngIf="es_unidosis == 1" class="column is-auto">\r\n                                <input class="styled" type="radio" id="modo_u" [checked]="modo == \'U\'" (click)="modo = \'U\'" [value]="\'U\'" name="modo">                                    \r\n                                <label for="modo_u">\r\n                                    <span class="tag is-large" [ngClass]="{\'is-success\':modo == \'U\'}">Unidosis</span>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="column">\r\n                    <div class="field is-horizontal">\r\n                        <label class="label" *ngIf="modo == \'N\'">Cant. solicitada:</label>\r\n                        <label class="label" *ngIf="modo == \'U\'">Cant. solicitada ({{insumo.unidad_medida}}):</label>\r\n                        <input class="input has-text-centered" (keypress)="quitar_punto($event)" (change)="comprobar_cant_solicitada(cantidad_solicitada.value)" type="number" step="1" min="0" \r\n                            placeholder="Cantidad" #cantidad_solicitada id="cantidad_solicitada" \r\n                            name="cantidad_solicitada" (keyup)="comprobar_cant_solicitada(cantidad_solicitada.value)">\r\n                       <!-- <input style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}"> -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <table class="table is-narrow is-bordered is-striped">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Lote</th>\r\n                        <th>Caducidad</th>\r\n                        <th>Codigo de barras</th>\r\n                        <th *ngIf="modo == \'N\'">Existencia</th>\r\n                        <th *ngIf="modo == \'N\'">Cantidad</th>\r\n                        <th *ngIf="modo == \'U\'">Existencia Unidosis ({{insumo.unidad_medida}})</th> \r\n                        <th *ngIf="modo == \'U\'">Cantidad Unidosis ({{insumo.unidad_medida}})</th> \r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lotes_insumo;  let i = index;">\r\n                        <td *ngIf="!item.nuevo">{{item.lote}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Lote" [(ngModel)]="item.lote"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.fecha_caducidad}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="date" placeholder="Fecha de caducidad" [(ngModel)]="item.fecha_caducidad"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.codigo_barras}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Codigo de barras" [(ngModel)]="item.codigo_barras"></td>\r\n                        <td *ngIf="!item.nuevo && modo == \'N\'">{{item.existencia}}</td>\r\n                        <td *ngIf="!item.nuevo && modo == \'U\'">{{item.existencia_unidosis}}</td>\r\n                        <td *ngIf="item.nuevo "></td>\r\n                        <td >\r\n                            <input class="input has-text-centered" type="number" step="1" min="0" (keypress)="quitar_punto($event)"  (keyup)="comprobar_cant_lotes()" (change)="comprobar_cant_lotes()" max="{{item.existencia}}" placeholder="Cantidad" [(ngModel)]="item.cantidad">\r\n                        </td>\r\n                        <td *ngIf="item.nuevo">\r\n                            <a class="delete" (click)=eliminarLote(i)></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-dark" *ngIf="modo==\'N\'" (click)="agregarNuevoLote()">Agregar nuevo lote</a>                            \r\n            <a class="button is-success" [ngClass]="{\'is-disabled\':!cant_solicitada_valida || !sum_cant_lotes}" (click)="agregarLoteIsumo(cantidad_solicitada.value)">Aceptar</a>\r\n            <a class="button" (click)="cancelarModal(\'verLotes\'); modo = \'N\';">Cancelar</a>\r\n            <div class="card-footer-item"></div>\r\n            <a *ngIf="!sum_cant_lotes" class="card-footer-item button is-danger" [ngClass]="{\'is-disabled\':!cant_solicitada_valida}" (click)="abrirModal(\'negarExistencia\')"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>&nbsp;\r\n Negar existencia</a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="negarExistencia">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\r\n            <button class="delete" (click)="cancelarModal(\'negarExistencia\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <h1>¿Esta seguro de negar la existencia del insumo?</h1>\r\n                <p>Ya no se podra cambiar la cantidad negada</p>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="agregarLoteIsumo(cantidad_solicitada.value)">Continuar</a>\r\n            <a class="button" (click)="cancelarModal(\'negarExistencia\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="guardarMovimiento">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\r\n            <button class="delete" (click)="cancelarModal(\'guardarMovimiento\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <h1>¿Esta seguro de guardar la salida?</h1>\r\n                <p>Ya no se podrá realizar cambios</p>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="ctrl.enviar(); cancelarModal(\'guardarMovimiento\')">Continuar</a>\r\n            <a class="button" (click)="cancelarModal(\'guardarMovimiento\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},zhGp:function(e,t,a){"use strict";var n=a("3j3K"),i=a("5oXY"),r=a("52hV"),s=a("nQIc"),o=a("NsC6");a.d(t,"a",function(){return d});var c=this&&this.__decorate||function(e,t,a,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(r<3?i(s):r>3?i(t,a,s):i(t,a))||s);return r>3&&s&&Object.defineProperty(t,a,s),s},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(e,t,a,n){var i=this;this.route=e,this.router=t,this.authService=a,this.bloquearPantallaService=n,this.credenciales={},this.loading=!1,this.mensaje="",this.mostrarMensaje=!1,this.bloquearPantallaSuscription=n.pantallaBloqueada$.subscribe(function(e){e||(console.log("Redirigiendo desde login por desbloqueo de pantalla"),i.returnUrl=i.route.snapshot.queryParams.returnUrl||"/",i.router.navigate([i.returnUrl]))})}return e.prototype.ngOnInit=function(){this.saludIdDisponible=o.a,this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"},e.prototype.login=function(){var e=this;this.loading=!0,this.mostrarMensaje=!1,this.authService.login(this.credenciales.id,this.credenciales.password).subscribe(function(t){var a=JSON.parse(localStorage.getItem("usuario"));e.loading=!1,a.modulo_inicio?e.router.navigate([a.modulo_inicio]):e.router.navigate([e.returnUrl]),localStorage.removeItem("bloquear_pantalla")},function(t){e.loading=!1,e.mostrarMensaje=!0,e.mensaje="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.";try{t.json();401==t.status&&(e.mensaje="Lo sentimos el usuario y/o contraseña no son válidos."),0==t.status&&(e.mensaje="Conexión rechazada."),500==t.status&&(e.mensaje="500 (Error interno del servidor)")}catch(a){500==t.status&&(e.mensaje="500 (Error interno del servidor)")}})},e}();d=c([a.i(n.Component)({selector:"app-login",template:a("qGi7"),styles:[a("4I9T")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.c&&i.c)&&u||Object,"function"==typeof(p=void 0!==i.a&&i.a)&&p||Object,"function"==typeof(m=void 0!==r.a&&r.a)&&m||Object,"function"==typeof(f=void 0!==s.a&&s.a)&&f||Object])],d);var u,p,m,f}},[0]);