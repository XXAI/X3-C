webpackJsonp([0],{"+MOH":function(t,e,a){"use strict";var n=a("/oeL"),i=a("bKpL"),r=(a.n(i),a("rlar")),s=(a.n(r),a("/zHi")),o=(a.n(s),a("S7im")),c=(a.n(o),a("azLz")),l=(a.n(c),a("MBEm")),d=(a.n(l),a("5v8a")),u=(a.n(d),a("Pic8")),p=(a.n(u),a("xpf9")),m=(a.n(p),a("Fwzv")),f=(a.n(m),a("bDzX")),g=a("p5Ee"),h=a("WdPz"),v=a("gHRf");a.d(e,"a",function(){return _});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_=function(){function t(t,e){this.apiService=t,this.uploaderService=e,this.mensajeError=new v.a,this.mensajeExito=new v.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new r.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=10,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[],this.errores={archivo:null},this.mostrarModalSubirArchivoSync=!1,this.mensajeErrorSync="",this.archivo=null,this.archivoSubido=!1,this.enviandoDatos=!1,this.progreso=0,this.cargando=!1,this.sincronizandoEnLinea=!1,this.subiendoConfirmacion=!1,this.mostrarLogAutoSync=!1}return t.prototype.ngOnInit=function(){var t=this;this.listar(1),this.mensajeError=new v.a,this.mensajeExito=new v.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.apiService.buscar(e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):i.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.apiService.buscar(t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0,this.apiService.listaPaginada(t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.lista=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t.prototype.descargarSync=function(){var t="token="+localStorage.getItem("token");window.open(g.a.API_URL+"/sync/manual/?"+t)},t.prototype.fileChange=function(t){var e=t.target.files;e.length>0&&(this.archivo=e[0])},t.prototype.reset=function(){this.errores={archivo:null},this.mensajeErrorSync="",this.archivoSubido=!1,this.archivo=null},t.prototype.adjuntar=function(){var t=this;if(this.archivo){this.errores={archivo:null},this.mensajeErrorSync="",this.archivoSubido=!1,this.enviandoDatos=!0;var e=new f.a(this.archivo);this.uploaderService.onSuccessUpload=function(e,a,n,i){t.archivoSubido=!0,t.listar(1),t.mostrarModalSubirArchivoSync=!1},this.uploaderService.onErrorUpload=function(e,a,n,i){var r=a.error;t.mensajeErrorSync=r},this.uploaderService.onCompleteUpload=function(e,a,n,i){t.enviandoDatos=!1},this.uploaderService.onProgressUpload=function(e,a){console.log(a),t.progreso=a},this.uploaderService.upload(e)}},t.prototype.sincronizarEnLinea=function(){var t=this;confirm("¿Estás seguro que quieres sincronizar con el servidor central?")&&(this.sincronizandoEnLinea=!0,this.logAutoSync="",this.apiService.auto().subscribe(function(e){t.sincronizandoEnLinea=!1,t.listar(1),t.logAutoSync=e,t.mostrarLogAutoSync=!0,console.log(e)},function(e){t.sincronizandoEnLinea=!1;try{var a=e.json();t.logAutoSync=a.data,t.mostrarLogAutoSync=!0,401==e.status?t.mensajeError.texto="No tiene permiso para hacer esta operación.":500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}t.mensajeError.mostrar=!0}))},t}();_=b([a.i(n.Component)({selector:"app-local",template:a("7EPX"),styles:[a("jlwQ")],providers:[h.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==h.a&&h.a)&&x||Object,"function"==typeof(j=void 0!==m.Uploader&&m.Uploader)&&j||Object])],_);var x,j},"+sjf":function(t,e){t.exports='<menu-farmacia [modulo]="\'Pedidos\'" [icono]="\'assets/icono-pedidos.svg\'" [url]="\'/almacen/pedidos\'"></menu-farmacia>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile">\r\n      <div class="tile is-4 is-parent is-vertical ">\r\n        <div class="tile is-child">\r\n            <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n                <section class="hero is-primary" [ngClass]="{\'is-primary\':pedido.status==\'PS\',\'is-success\':pedido.status==\'FI\',\'is-info\':pedido.status==\'EF\',\'is-warning\':pedido.status==\'EX\', \'is-danger\': pedido.status==\'EX-CA\'}" >\r\n                    <h1 *ngIf="pedido.status == \'PS\'" class="title" style="margin:0.5em;" >\r\n                        <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Pedido Por Surtir <span class="is-pulled-right">{{porcentageTotalPedido | number:\'1.0-2\'}} %</span>\r\n                    </h1>\r\n                    <h1 *ngIf="pedido.status == \'FI\'" class="title" style="margin:0.5em;" >\r\n                        <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Pedido Finalizado <span class="is-pulled-right">{{porcentageTotalPedido | number:\'1.0-2\'}} %</span>\r\n                    </h1>\r\n                    <h1 *ngIf="pedido.status == \'EF\'" class="title" style="margin:0.5em;" >\r\n                        <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Pedido En Farmacia <span class="is-pulled-right">{{porcentageTotalPedido | number:\'1.0-2\'}} %</span>\r\n                    </h1>\r\n                    <h1 *ngIf="pedido.status == \'EX\'" class="title" style="margin:0.5em;" >\r\n                        <span class="icon is-medium"><i class="fa fa-exclamation-circle"></i></span> Pedido Expirado <span class="is-pulled-right">{{porcentageTotalPedido | number:\'1.0-2\'}} %</span>\r\n                    </h1>\r\n                    <h1 *ngIf="pedido.status == \'EX-CA\'" class="title" style="margin:0.5em;" >\r\n                        <span class="icon is-medium"><i class="fa fa-exclamation-circle"></i></span> Pedido Cancelado <span class="is-pulled-right">{{porcentageTotalPedido | number:\'1.0-2\'}} %</span>\r\n                    </h1>\r\n                </section>\r\n                <section>\r\n                    <div class="control is-grouped">\r\n                        <a class="button is-success is-fullwidth is-outlined" title="Imprimir Excel" (click)="imprimirExcel(); " *ngIf="esEditar">\r\n                            <span class="icon"><i class="fa fa-file-excel-o"></i></span> &nbsp; Excel\r\n                        </a>\r\n                        <a class="button is-info is-fullwidth is-outlined" title="Imprimir PDF" (click)="mostrarDialogo(); " *ngIf="esEditar">\r\n                            <span class="icon"><i class="fa fa-print"></i></span> &nbsp; Pedido\r\n                        </a>\r\n                    </div>\r\n                </section>\r\n\r\n                <div style="padding: 1em;">\r\n                    <!--label class="label">Folio:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.folio:\'S/F\'}}"/>\r\n                    </p>\r\n                    <label class="label">Almacén:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.almacen_solicitante.nombre:\'Sin almacen asignado\'}}"/>\r\n                    </p>\r\n                    <label class="label">Nombre del Pedido:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.descripcion:\'\'}}"/>\r\n                    </p>\r\n                    <label class="label">Fecha:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.fecha:\'\'}}"/>\r\n                    </p>\r\n                    <div class="control">\r\n                        <textarea name="observaciones" class="textarea" placeholder="Observaciones"  readonly="readonly">{{(pedido.datosImprimir)?pedido.datosImprimir.observaciones:\'\'}}</textarea>\r\n                    </div-->\r\n\r\n                    <label class="label">Datos del Pedido:</label>\r\n                    <div *ngIf="pedido.datosImprimir" class="level-item">\r\n                        <p class="subtitle is-5">\r\n                            <strong>Folio: </strong> {{pedido.datosImprimir.folio}}<br>\r\n                            <strong>Almacén: </strong> {{pedido.datosImprimir.almacen_solicitante.nombre}}<br>\r\n                            <strong>Nombre del pedido: </strong> {{pedido.datosImprimir.descripcion}}<br>\r\n                            <strong>Fecha: </strong> {{pedido.datosImprimir.fecha}}<br>\r\n                            <strong>Observaciones: </strong> {{pedido.datosImprimir.observaciones}}<br>\r\n                        </p>\r\n                    </div>\r\n                    <hr>\r\n                    <label class="label">Datos del Proveedor:</label>\r\n                    <div *ngIf="pedido.datosImprimir" class="level-item">\r\n                        <input *ngIf="pedido.datosImprimir.almacen_proveedor" type="text" class="input is-fullwidth" readonly="readonly" value="{{pedido.datosImprimir.almacen_proveedor.nombre}}"/>\r\n                        <div *ngIf="pedido.datosImprimir.proveedor" >\r\n                        <p class="subtitle is-5">\r\n                            {{pedido.datosImprimir.proveedor.nombre}}<br>\r\n                            <small>\r\n                            {{pedido.datosImprimir.proveedor.contacto}}<br>\r\n                            {{pedido.datosImprimir.proveedor.email}}<br>\r\n                            Cel: {{pedido.datosImprimir.proveedor.celular}}\r\n                            </small>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                    <hr>\r\n                    <div class="control is-grouped" style="padding-top:10px;" *ngIf="!cargando">\r\n                        <p class="control" *ngIf="pedido.status != \'FI\' && pedido.datosImprimir.tipo_pedido_id == \'PA\' && pedido.status != \'EX-CA\'">\r\n                            <a class="button is-primary" routerLink="/almacen/pedidos/recepcion/{{pedido.id}}"> <span class="icon"><i class="fa fa-truck"></i></span> <span *ngIf="!tieneRecepcionIniciada">Recibir Pedido</span><span *ngIf="tieneRecepcionIniciada">Continuar Recepción</span></a>\r\n                        </p>\r\n\r\n                        <p class="control">\r\n                            <a class="button is-white" routerLink="{{obtenerDireccion()}}" >Ir a la lista</a>\r\n                        </p>                \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <br>\r\n        </div>\r\n        \r\n        <div class="tile is-child  notification is-white">\r\n        </div>\r\n      </div>\r\n\r\n      <div class="tile is-parent is-vertical">\r\n        <div class="tile is-child" >\r\n          <div class="contenedor-pedido" >\r\n            <div class="top-bar" [ngClass]="{\'is-primary\':!pedido.filtro.activo,\'is-dark\': pedido.filtro.activo }">\r\n                <span *ngIf="!pedido.filtro.activo">\r\n                    Claves: {{((pedido.datosImprimir)?(pedido.datosImprimir.total_claves_recibidas||0):0) | number:\'1.0\'}} de {{ pedido.lista.length | number }} \r\n                    Insumos: {{((pedido.datosImprimir)?(pedido.datosImprimir.total_cantidad_recibida||0):0) | number:\'1.0\'}} de {{pedido.totalInsumos | number}} \r\n                    Total: $ {{((pedido.datosImprimir)?(pedido.datosImprimir.total_monto_recibido||0):0) | number:\'1.2-2\'}} de $ {{ pedido.totalMonto | number: \'1.2-2\' }}\r\n                </span>\r\n                <span *ngIf="pedido.filtro.activo"><span class="icon"><i class="fa fa-search"></i></span> Resultados: {{ pedido.filtro.lista.length }}</span>\r\n                <!--a class="button is-primary  is-pulled-right" [ngClass]="{ \'is-inverted\': pedido.filtro.activo }" style="margin-top:-0.25em;" title="Recepciones" (click)="toggleModalRecepciones(); ">\r\n                    <span class="icon"><i class="fa fa-file"></i></span><span>Recepciones: {{pedido.datosImprimir.recepciones.length}}</span>\r\n                </a-->\r\n                <a *ngIf="pedido.status == \'EX\' && pedido.datosImprimir.tipo_pedido_id == \'PA\'" class="button is-danger is-pulled-right" (click)="mostrarDialogoCancelarPedido()"> <span class="icon"><i class="fa fa-ban"></i></span> <span>Cancelar Pedido</span></a>\r\n            </div> \r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em;">\r\n                <thead>\r\n                    <tr  >\r\n                        <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                        <th class="is-hidden-mobile" style="width:118px;">\r\n                        <p class="control is-expanded" >\r\n                            <input type="hidden" #searchBoxClavePrevia >\r\n                            <!--input class="input is-small" type="text" placeholder="Clave" #searchBoxClave id="search-box-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxClave, searchBoxClavePrevia,[{ input: searchBoxDescripcion, campos: [\'generico\',\'informacion.concentracion\',\'informacion.presentacion\']}, { input: searchBoxClave, campos: [\'clave\']}])"-->\r\n                            <input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxClave, searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>\r\n                        <!--th class="is-hidden-mobile">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionPrevia >\r\n                            <input class="input is-small" type="text" placeholder="Genérico" #searchBoxDescripcion id="search-box-descripcion-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcion,searchBoxDescripcionPrevia,[{ input: searchBoxDescripcion, campos: [\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}, { input: searchBoxClave, campos: [\'clave\']}])">\r\n                        </p>\r\n                        </th--> \r\n                        <th class="is-hidden-tablet">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                            <!--input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])"-->\r\n                            <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>  \r\n                        <th style="vertical-align: middle;" class="is-hidden-mobile is-hidden-tablet-only" >Descripcion</th>                  \r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                    <tr   *ngFor="let item of pedido.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ item.lote }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    \r\n                    <td>\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n                        <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        </div>\r\n                    </td>\r\n\r\n                    <!--td >\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <b>{{ item.generico_nombre }}</b> <br  class="is-hidden-mobile"><small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                        \r\n                        <div class="is-hidden-desktop" *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                        </div>\r\n                        <div class="is-hidden-desktop" *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div class="is-hidden-desktop" style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                        </div>\r\n                    </td> \r\n\r\n                    <td class="is-hidden-mobile is-hidden-tablet-only">\r\n                        <div *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                        </div>\r\n                        <div  *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                        </div>\r\n                    </td--> \r\n\r\n                    <td style="width:78px !important;">\r\n                        <p class="control is-expanded">\r\n                            {{item.cantidad_recibida | number}} / {{item.cantidad | number}}\r\n                        </p>\r\n                    </td>\r\n                    <td style="width:78px !important;">\r\n                        <b><abbr> ${{item.monto_recibido | number:\'1.2-2\'}} / ${{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                    </td> \r\n                    </tr>      \r\n                </tbody>\r\n                <tbody *ngIf="pedido.filtro.activo">\r\n                    <tr  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ item.lote }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    \r\n                    <td>\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n                        <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        </div>\r\n                    </td>\r\n\r\n                    <!--td >\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <b>{{ item.generico_nombre }}</b> <br  class="is-hidden-mobile"><small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                        \r\n                        <div class="is-hidden-desktop" *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                        </div>\r\n                        <div class="is-hidden-desktop" *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div class="is-hidden-desktop" style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                        </div>\r\n                    </td> \r\n\r\n                    <td class="is-hidden-mobile is-hidden-tablet-only">\r\n                        <div *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                        </div>\r\n                        <div  *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        </div>\r\n                    </td--> \r\n                    <td style="width:78px !important;">\r\n                        <p class="control is-expanded">\r\n                            {{item.cantidad_recibida | number}} / {{item.cantidad | number}}\r\n                        </p>\r\n                    </td>\r\n                    <td style="width:78px !important;">\r\n                        <b><abbr> ${{item.monto_recibido | number:\'1.2-2\'}} / ${{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                    </td> \r\n                    </tr>\r\n                </tbody>              \r\n            </table>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.lista.length" \r\n                    [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.paginacion.indice"\r\n                    (onSiguiente)="pedido.paginaSiguiente()" \r\n                    (onAnterior)="pedido.paginaAnterior()" \r\n                    (onListar)="pedido.listar($event)" \r\n                    *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.filtro.lista.length" \r\n                    [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                    (onSiguiente)="pedido.filtro.paginaSiguiente()" \r\n                    (onAnterior)="pedido.filtro.paginaAnterior()" \r\n                    (onListar)="pedido.filtro.listar($event)" \r\n                    *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n            <br>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarCancelarDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogoCancelarPedido()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #ff3860;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-ban"></i></span> Cancelar Pedido \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-danger" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogoCancelarPedido()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n          El pedido actual sera <strong>cancelado</strong>, y el recurso no utilzado estara disponible. Una vez cancelado este pedido ya no podran hacerse mas recepciones de insumos:\r\n          <table class="table" *ngIf="pedido.datosImprimir">\r\n              <thead>\r\n                <tr><th>Folio</th><th colspan="2">Nombre del Pedido</th><th>Fecha</th></tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr><td>{{pedido.datosImprimir.folio}}</td><td colspan="2">{{pedido.datosImprimir.descripcion}}</td><td>{{pedido.datosImprimir.fecha}}</td></tr>\r\n              </tbody>\r\n              <thead>\r\n                <tr><th>Almacén</th><th colspan="3">Observaciones:</th></tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr><td>{{pedido.datosImprimir.almacen_solicitante.nombre}}</td><td colspan="3">{{pedido.datosImprimir.observaciones}}</td></tr>\r\n              </tbody>\r\n              <thead>\r\n                  <tr><th>Total Monto del Pedido</th><th>Monto Recibido</th><th>Monto Disponible</th><th>Transferir a</th></tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                    <td>$ {{pedido.datosImprimir.total_monto_solicitado | number:\'1.2-2\'}}</td>\r\n                    <td>$ {{(pedido.datosImprimir.total_monto_recibido||0) | number:\'1.2-2\'}}</td>\r\n                    <td>$ {{(pedido.datosImprimir.total_monto_solicitado - (pedido.datosImprimir.total_monto_recibido||0)) | number:\'1.2-2\'}}</td>\r\n                    <td>\r\n                        <span class="select is-fullwidth">\r\n                            <select [(ngModel)]="dialogCancelarFechaTransferencia">\r\n                                <option *ngFor="let item of dialogCancelarMeses" [ngValue]="item">{{ item.descripcion }}</option>\r\n                            </select>\r\n                        </span>\r\n                    </td>\r\n                </tr>\r\n              </tbody>\r\n          </table>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        <span *ngIf="errorCancelarPedido" class="notification is-small is-danger is-inverted">{{errorCancelarPedidoTexto}}</span>\r\n        <button class="button is-medium is-primary is-pulled-right" [ngClass]="{\'is-loading\': cancelandoPedido}"  (click)="transferirRecurso()">\r\n            <span class="icon"><i class="fa fa-exchange"></i></span> &nbsp;Transferir Recurso\r\n        </button>\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarImprimirDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogo()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-print"></i></span> Imprimir Pedido \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogo()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="columns is-multiline">\r\n          <div class="column is-one-quarter" *ngFor="let tipo of tiposSubPedidos">\r\n            <div class="card">\r\n              <header class="card-header">\r\n                <p class="card-header-title">\r\n                  {{subPedidos[tipo].titulo}}\r\n                </p>\r\n              </header>\r\n              <div class="card-content">\r\n                <div class="content">\r\n                  <strong>Total claves</strong>: {{subPedidos[tipo].claves | number}} <br>\r\n                  <strong>Total unidades</strong>: {{subPedidos[tipo].cantidad | number}} <br>\r\n                  <strong>Total monto</strong>: $ {{subPedidos[tipo].monto + ((subPedidos[tipo].tiene_iva)?+subPedidos[tipo].monto*16/100:0) | number:\'1.2-2\'}}\r\n                </div>\r\n              </div>\r\n              <footer class="card-footer">\r\n                <!--a class="card-footer-item" (click)="imprimir(tipo)" [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }">\r\n                  <span class="icon is-medium"><i class="fa fa-file-pdf-o"></i></span>&nbsp;<span>Descargar/Imprimir</span>\r\n                </a-->\r\n                <a class="button is-primary is-fullwidth" [ngClass]="{ \'is-loading\': cargandoPdf[tipo], \'is-inverted\': !cargandoPdf[tipo] }" title="Imprimir Pedido" (click)="imprimir(tipo)">\r\n                    <span class="icon"><i class="fa fa-file-pdf-o"></i></span> &nbsp; Descargar/Imprimir\r\n                </a>\r\n              </footer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        <div class="notification is-danger is-small" *ngIf="errorEnPDF">\r\n            <button class="delete" (click)="errorEnPDF = false"></button>        \r\n            <b>Error:</b> Ocurrio un error al generar el PDF<br><br>\r\n        </div>\r\n    </footer>\r\n  </div>\r\n</div>'},"/0pc":function(t,e,a){"use strict";var n=a("/oeL"),i=a("bbdN");a.n(i);a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this._ngZone=t,this.fecha_desde="",this.fecha_hasta="",this.usuario_lista="",this.cargandoPdf=!1}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.pdfworker=new Worker("web-workers/inventario/lista-ajuste-menos.js");var t=this,e=this._ngZone;this.pdfworker.onmessage=function(a){e.run(function(){t.cargandoPdf=!1}),i.saveAs(t.base64ToBlob(a.data.base64,"application/pdf"),a.data.fileName)}},t.prototype.export_excel=function(){var t="<table><tr><th colspan='7'><h1>Ajuste de inventario más</h1></th></tr><tr><th>Desde: "+this.fecha_desde+"</th><th>Hasta: "+this.fecha_hasta+"</th><th>Usuario: "+this.usuario_lista+"</th></tr><tr><th colspan='7'></th></tr></table>";t+=document.getElementById("exportable").innerHTML;var e=new Blob([t],{type:"text/comma-separated-values;charset=utf-8"});try{i.saveAs(e,"LISTA_AJUSTE_MAS.xls")}catch(t){console.log(t)}},t.prototype.imprimir=function(){try{var t={lista:this.dato,usuario:this.usuario,fecha_desde:this.fecha_desde,fecha_hasta:this.fecha_hasta,usuario_lista:this.usuario_lista};this.pdfworker.postMessage(JSON.stringify(t))}catch(t){this.cargandoPdf=!1}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();r([a.i(n.ViewChildren)("tr"),s("design:type",Object)],o.prototype,"tr",void 0),r([a.i(n.ViewChildren)("sr"),s("design:type",Object)],o.prototype,"sr",void 0),o=r([a.i(n.Component)({selector:"app-ajuste-mas-inventario",template:a("mLYF")}),s("design:paramtypes",["function"==typeof(c=void 0!==n.NgZone&&n.NgZone)&&c||Object])],o);var c},"/1w0":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"/BVB":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"/K6b":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("xWpI"),s=a("YvVs"),o=a("D9tw"),c=a("2qAn");a.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},d=[{path:"administrador-central/validacion-pedidos-alternos",children:[{path:"",component:r.a,canActivate:[c.a],data:{key:"ICmOKw3HxhgRna4a78OP0QmKrIX0bNsp"}},{path:":id",component:s.a}],canActivate:[o.a]}],u=function(){function t(){}return t}();u=l([a.i(n.NgModule)({imports:[i.b.forChild(d)],exports:[i.b]})],u)},"/L0i":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("pPg0"),o=a("M4Um"),c=a("LLho"),l=a("L4oa"),d=a("TvXF"),u=a("AHor"),p=a("BFvY"),m=a("ajxl"),f=a("wW11"),g=a("ckLH");a.d(e,"a",function(){return v});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=function(){function t(){}return t}();v=h([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,s.a,o.a,c.a],declarations:[l.a,d.a,u.a,g.a],providers:[p.a,m.a,f.a]})],v)},"/dPQ":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("qbdv"),o=a("bm2B"),c=a("p5Ee"),l=a("bKpL"),d=(a.n(l),a("rlar")),u=(a.n(d),a("/zHi")),p=(a.n(u),a("S7im")),m=(a.n(p),a("azLz")),f=(a.n(m),a("MBEm")),g=(a.n(f),a("5v8a")),h=(a.n(g),a("Pic8")),v=(a.n(h),a("xpf9")),b=(a.n(v),a("w0bh")),y=a("gHRf");a.d(e,"a",function(){return j});var _=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},x=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},j=function(){function t(t,e,a,n,i,r){this.router=t,this.location=e,this.route=a,this.title=n,this.avanceService=i,this.fb=r,this.cargando=!1,this.showAgregarAvance=!1,this.privilegio_usuario=!1,this.mensajeError=new y.a,this.mensajeExito=new y.a,this.id_avance_detalle="0",this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.detalles=[],this.usuarios=[],this.usuarios_privilegios=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new d.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[],this.cargando_archivo=0,this.subir_archivo=!0}return t.prototype.ngOnInit=function(){var t=this;this.avance=this.fb.group({archivo:["",[]],porcentaje:["",[o.Validators.required]],comentario:["",[o.Validators.required]]}),this.usuario_form=this.fb.group({usuario_id:["",[o.Validators.required]],agregar:["",[]],editar:["",[]],eliminar:["",[]],avance_id:["",[]]}),this.title.setTitle("Temas / Avance"),this.mensajeError=new y.a,this.mensajeExito=new y.a;var e=this;this.route.params.subscribe(function(e){t.id_avance=e.id}),this.listar(1),this.cargar_usuarios();var a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."+e),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.avanceService.buscar_detalle(t.id_avance,e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):l.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.cargar_usuarios=function(){var t=this;this.cargando=!0,this.avanceService.usuarios(this.id_avance).subscribe(function(e){t.cargando=!1,t.usuarios_privilegios=e.data_lista,t.usuarios=e.usuarios,t.privilegio_usuario=e.privilegio},function(e){t.cargando=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.listar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.eliminar_usuario_avance=function(t){var e=this;confirm("¿Realmente Desea eliminar")&&(this.cargando=!0,this.avanceService.elimina_usuarios(t).subscribe(function(t){e.cargar_usuarios()},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},t.prototype.agregar_usuario=function(){var t=this;this.cargando=!0,this.usuario_form.patchValue({avance_id:this.id_avance}),this.avanceService.crear_usuario(this.usuario_form.value).subscribe(function(e){t.cargando=!1,t.mensajeExito=new y.a(!0),t.mensajeExito.texto="Se han guardado los cambios.",t.mensajeExito.mostrar=!0,t.cargar_usuarios(),t.usuario_form.patchValue({usuario_id:"",agregar:"",editar:"",eliminar:""})},function(e){t.cargando=!1,t.mensajeError=new y.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,this.cargando=!0,this.avanceService.lista_detalles(this.id_avance,t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.detalles=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1)},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,this.cargando=!0,this.avanceService.buscar_detalle(this.id_avance,t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){console.log(t),a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1)},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.fileChanged=function(t){var e=t.target;this.tag=e},t.prototype.upload=function(){if(this.tag){console.log(this.avance.value),this.subir_archivo=!1;var t=this.tag.files[0],e=new FormData;e.append("file",t,t.name),e.append("porcentaje",this.avance.value.porcentaje),e.append("comentario",this.avance.value.comentario),e.append("avance_id",this.id_avance);var a=new XMLHttpRequest;a.upload.addEventListener("progress",function(t){});var n=this;a.open("POST",c.a.API_URL+"/avance_repository",!0),a.setRequestHeader("Authorization","Bearer "+localStorage.getItem("token"));var i=JSON.parse(localStorage.getItem("usuario"));i.proveedor_activo&&a.setRequestHeader("X-Proveedor-Id",i.proveedor_activo.id),a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&200===a.status&&(n.mensajeExito=new y.a(!0),n.mensajeExito.mostrar=!0,n.mensajeExito.texto="Se  guardo correctamente el avance",n.listar(1),n.showAgregarAvance=!n.showAgregarAvance,n.avance.patchValue({porcentaje:"",comentario:"",archivo:""})),a.readyState===XMLHttpRequest.DONE&&200!=a.status&&(n.error_envio(a),n.subir_archivo=!0),n.cargando_archivo=a.readyState},a.send(e)}else alert("ES NECESARIO ELEGIR UN ARCHIVO A SUBIR, VUELVA A INTENTARLO POR FAVOR")},t.prototype.error_envio=function(t){console.log(t),this.mensajeError=new y.a(!0),this.mensajeError.mostrar=!0,500==t.status?this.mensajeError.texto=t.responseText:this.mensajeError.texto="Ha ocurrido un error al enviar el archivo"},t.prototype.eliminar_avance=function(t){var e=this;confirm("¿Realmente desea eliminar este avance?")&&(this.cargando=!0,this.avanceService.eliminar(t).subscribe(function(t){e.cargando=!1,e.listar(1),e.mensajeExito=new y.a(!0),e.mensajeExito.mostrar=!0,e.mensajeExito.texto="Se ha eliminado satisfactoriamente el avance"},function(t){e.cargando=!1,e.mensajeError=new y.a(!0),e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},t.prototype.descargar=function(t){var e=t,a="token="+localStorage.getItem("token");window.open(c.a.API_URL+"/download-file-avance/"+e+"?"+a)},t.prototype.view=function(t){var e=t,a="token="+localStorage.getItem("token");window.open(c.a.API_URL+"/view-file-avance/"+e+"?"+a)},t.prototype.regresar=function(){this.location.back()},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();j=_([a.i(n.Component)({selector:"app-detalle",template:a("UOMw"),styles:[a("SsYK")]}),x("design:paramtypes",["function"==typeof(P=void 0!==r.a&&r.a)&&P||Object,"function"==typeof(I=void 0!==s.Location&&s.Location)&&I||Object,"function"==typeof(E=void 0!==r.c&&r.c)&&E||Object,"function"==typeof(k=void 0!==i.b&&i.b)&&k||Object,"function"==typeof(C=void 0!==b.a&&b.a)&&C||Object,"function"==typeof(A=void 0!==o.FormBuilder&&o.FormBuilder)&&A||Object])],j);var P,I,E,k,C,A},"/dc3":function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" >\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:2em;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-plus"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Nuevo rol\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="section">\r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded">\r\n                    <input class="input is-medium" [(ngModel)]="rol.nombre"  [ngClass]="{ \'is-danger\': errores.nombre != null}"  type="text" placeholder="Nombre" >\r\n                </p>\r\n                <p class="control">\r\n                    <a class="button is-medium is-primary " [ngClass]="{ \'is-loading\': enviando}" (click)="guardar()" >\r\n                    <span class="icon"><i class="fa fa-save"></i></span><span>Guardar</span>\r\n                    </a>\r\n                </p><p class="control">\r\n                    <a class="button is-medium is-white " [ngClass]="{ \'is-disabled\': enviando}" routerLink="/panel-control/roles">Cancelar</a>\r\n                </p>\r\n                \r\n              </div>\r\n              <p class="help is-danger" *ngIf="errores.nombre == \'required\'">Por favor especifique el nombre del rol.</p>              \r\n              <p class="help is-danger" *ngIf="errores.nombre == \'unique\'">Este nombre ya fue utilizado, por favor elija otro.</p>              \r\n              <br>\r\n              <table class="table">\r\n                <thead>\r\n                  <tr>\r\n                    <td style="width:42px; cursor:pointer;" (click)="seleccionarTodos()">\r\n                      <span class="icon" style="color:#00d1b2"><i class="fa" [ngClass]="{ \'fa-square-o\': !todosSeleccionados, \'fa-check-square\': todosSeleccionados }"></i></span>\r\n                    </td>\r\n                    <td><span style="color:red" *ngIf="errores.permisos == \'required\'"><span class="icon"><i class="fa fa-exclamation-circle"></i></span> <span>Elija un permiso:</span></span><span *ngIf="errores.permisos == null">Permiso</span></td>\r\n                    <td>Grupo</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr *ngFor="let item of permisos" (click)="item.seleccionado = !item.seleccionado" style="cursor:pointer">\r\n                    <td><span class="icon"><i class="fa" [ngClass]="{ \'fa-square-o\': !item.seleccionado, \'fa-check-square\': item.seleccionado }"></i></span></td>\r\n                    <td>{{ item.descripcion }}</td>\r\n                    <td>{{ item.grupo }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n\r\n            </section>\r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br> \r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},"/kvg":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),t.exports=t.exports.toString()},"/pxZ":function(t,e,a){"use strict";var n=a("/oeL"),i=a("2cH3");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.cambiarEntornoService=t,this.usuario={}}return t.prototype.ngOnInit=function(){var t=this;this.usuario=JSON.parse(localStorage.getItem("usuario")),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.usuario=JSON.parse(localStorage.getItem("usuario"))})},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();r([a.i(n.Input)(),s("design:type",String)],o.prototype,"modulo",void 0),r([a.i(n.Input)(),s("design:type",String)],o.prototype,"icono",void 0),r([a.i(n.Input)(),s("design:type",String)],o.prototype,"url",void 0),o=r([a.i(n.Component)({selector:"menu-farmacia",template:a("moX+"),styles:[a("L3hd")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},"/tik":function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.mostrarMenuLateral=!1,this.usuario={}}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t.prototype.toggleMenuLateral=function(){this.mostrarMenuLateral=!this.mostrarMenuLateral},t}();s=i([a.i(n.Component)({selector:"administrador-central-menu",template:a("eiSl"),styles:[a("lJ2T")]}),r("design:paramtypes",[])],s)},0:function(t,e,a){t.exports=a("cDNt")},"08MF":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("qbdv"),s=a("BkNc"),o=a("bm2B"),c=a("/zHi"),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("bbdN")),h=(a.n(g),a("p5Ee")),v=a("gHRf"),b=a("2cH3"),y=a("mkhf"),_=a("1Lkp"),x=a("sYIv");a.d(e,"a",function(){return I});var j=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},P=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},I=function(){function t(t,e,a,n,i,r,s,o,c){this.title=t,this.location=e,this.router=a,this.route=n,this._ngZone=i,this.pedidosService=r,this.almacenesService=s,this.fb=o,this.cambiarEntornoService=c,this.cargando=!1,this.guardando=!1,this.cargandoAlmacenes=!1,this.cargandoInsumos=!1,this.cargandoPresupuestos=!1,this.erroresEnInsumos={lista:{},errores:0},this.esPedidoJurisdiccional=!1,this.esOficinaJurisdiccional=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.meses={0:"Sin seleccionar",1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"},this.formularioTitulo="Nuevo",this.esEditar=!1,this.totalMontoComprometidoCausesMaterial=0,this.totalMontoComprometidoNoCauses=0,this.mostrarModalInsumos=!1,this.listaClaveAgregadas=[],this.presupuesto={causes_disponible:0,no_causes_disponible:0,material_curacion_disponible:0},this.mes=0,this.subrogados={},this.es_almacen_subrogado=!1,this.almacenSeleccionado={},this.fechasValidas=[],this.proveedor={},this.cargandoPdf=!1,this.mostrarModalListaClues=!1,this.loteSeleccionado=null}return t.prototype.ngOnInit=function(){var t=this;"OA"==JSON.parse(localStorage.getItem("usuario")).clues_activa.tipo&&(this.esOficinaJurisdiccional=!0),this.title.setTitle("Formulario pedido"),this.pdfworker=new Worker("web-workers/farmacia/pedidos/imprimir.js");var e=this,a=this._ngZone;this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.router.navigate(["/almacen/pedidos"])}),this.pdfworker.onmessage=function(t){a.run(function(){e.cargandoPdf=!1}),g.saveAs(e.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.pdfworker.onerror=function(t){a.run(function(){e.cargandoPdf=!1}),console.log(t)},this.pedido=new x.a(!0),this.route.params.subscribe(function(e){if(e.id)t.cargando=!0,t.pedido.id=e.id,t.esEditar=!0,t.formularioTitulo="Editar",t.title.setTitle("Editar pedido"),t.pedidosService.ver(e.id).subscribe(function(e){var a=new Date,n=a.getDate(),i=a.getMonth()+1,r=e.fecha.split("-"),s=parseInt(r[1]);if(r[0]!=a.getFullYear()?t.fechasValidas.push({fecha:r[0]+"-"+r[1]+"-"+r[2],descripcion:t.meses[s]+" "+r[0]}):s<i&&t.fechasValidas.push({fecha:r[0]+"-"+r[1]+"-"+r[2],descripcion:t.meses[s]+" "+r[0]}),s==i&&r[0]==a.getFullYear())t.fechasValidas.push({fecha:r[0]+"-"+r[1]+"-"+r[2],descripcion:t.meses[s]+" "+r[0]});else if(n<20){var o=("0"+n).slice(-2),c=("0"+i).slice(-2);t.fechasValidas.push({fecha:a.getFullYear()+"-"+c+"-"+o,descripcion:t.meses[i]+" "+a.getFullYear()})}var l=a.getFullYear();13==(i+=1)&&(i=1,l=a.getFullYear()+1);var d=("0"+i).slice(-2);if(s==i&&r[0]==l?t.fechasValidas.push({fecha:r[0]+"-"+r[1]+"-"+r[2],descripcion:t.meses[s]+" "+r[0]}):t.fechasValidas.push({fecha:l+"-"+d+"-01",descripcion:t.meses[i]+" "+l}),e.presupuesto_apartado){var u=e.presupuesto_apartado;t.totalMontoComprometidoCausesMaterial=+u.causes_comprometido+ +u.causes_devengado+ +u.material_curacion_comprometido+ +u.material_curacion_devengado,t.totalMontoComprometidoNoCauses=+u.no_causes_comprometido+ +u.no_causes_devengado}t.pedido.datos.patchValue(e),t.pedido.status=e.status,t.proveedor=e.proveedor,t.cargarPresupuesto(s),t.cambioAlmacen();for(var p in e.insumos){var m=e.insumos[p],f=m.insumos_con_descripcion;if(f.cantidad=+m.cantidad_solicitada,f.monto=+m.monto_solicitado,f.precio=+m.precio_unitario,f.tipo_insumo_id=m.tipo_insumo_id,m.cantidad_recibida?f.cantidad_recibida=+m.cantidad_recibida:f.cantidad_recibida=0,"PJS"!=e.tipo_pedido_id)t.pedido.lista.push(f),t.listaClaveAgregadas.push(f.clave),t.esPedidoJurisdiccional=!1;else{t.esPedidoJurisdiccional=!0,f.lista_clues=m.lista_clues,t.pedido.lista.push(f),t.listaClaveAgregadas.push({clave:f.clave,lista:[]});var g=t.listaClaveAgregadas.length-1;for(var h in f.lista_clues)console.log(f.lista_clues[h]),t.listaClaveAgregadas[g].lista.push(f.lista_clues[h].clues)}}t.pedido.indexar(),t.pedido.listar(1),t.cargando=!1,t.cargarAlmacenes()},function(e){t.cargando=!1,t.mensajeError=new v.a(!0),t.mensajeError=new v.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}});else{var a=new Date,n=a.getDate(),i=a.getMonth()+1;if(n<20){var r=("0"+n).slice(-2),s=("0"+i).slice(-2);t.fechasValidas.push({fecha:a.getFullYear()+"-"+s+"-"+r,descripcion:t.meses[i]+" "+a.getFullYear()})}var o=("0"+(i+1)).slice(-2),c=a.getFullYear();if(i+1==13){a.getFullYear();i=0}t.fechasValidas.push({fecha:c+"-"+o+"-01",descripcion:t.meses[i+1]+" "+a.getFullYear()}),t.title.setTitle("Nuevo pedido"),t.cargarPresupuesto(),t.cargarAlmacenes()}})},t.prototype.obtenerDireccion=function(){return"BR"==this.pedido.status?"/almacen/pedidos/borradores":"/almacen/pedidos/todos"},t.prototype.toggleModalInsumos=function(){this.mostrarModalInsumos=!this.mostrarModalInsumos},t.prototype.toggleModalListaClues=function(t){this.loteSeleccionado=t,this.mostrarModalListaClues=!this.mostrarModalListaClues},t.prototype.agregarItem=function(t){void 0===t&&(t={});var e=this.pedido.paginacion.totalPaginas;if(this.esPedidoJurisdiccional){var a=t.insumo,n=!1;for(var i in this.pedido.lista){var r=0;if(this.pedido.lista[i].clave==a.clave){n=!0,this.pedido.lista[i].lista_clues.push({clues:t.clues,nombre:t.nombre,cantidad:t.cantidad});for(var s in this.pedido.lista[i].lista_clues)r+=this.pedido.lista[i].lista_clues[s].cantidad;this.pedido.lista[i].cantidad=r,this.pedido.lista[i].monto=a.precio*r}}n||(a.lista_clues||(a.lista_clues=[]),a.lista_clues.push({clues:t.clues,nombre:t.nombre,cantidad:t.cantidad}),a.cantidad_recibida=0,a.cantidad=t.cantidad,a.monto=a.cantidad*a.precio,this.pedido.lista.push(a))}else t.cantidad_recibida||(t.cantidad_recibida=0),t.monto=t.cantidad*t.precio,this.pedido.lista.push(t);this.pedido.indexar(),this.pedido.paginacion.lista.length!=this.pedido.paginacion.resultadosPorPagina||this.pedido.paginacion.paginaActual!=e||this.pedido.filtro.activo?this.pedido.listar(this.pedido.paginacion.paginaActual):this.pedido.listar(this.pedido.paginacion.paginaActual+1)},t.prototype.modificarItem=function(t){void 0===t&&(t={}),t.monto=t.cantidad*t.precio,this.pedido.actualizarTotales(),this.erroresEnInsumos.lista[t.clave]&&(delete this.erroresEnInsumos.lista[t.clave],this.erroresEnInsumos.errores-=1),(t.cantidad<t.cantidad_recibida||t.cantidad<=0)&&(this.erroresEnInsumos.lista[t.clave]=!0,this.erroresEnInsumos.errores+=1),console.log(this.erroresEnInsumos)},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},t.prototype.deshabilitarAlmacen=function(t){return!!(this.esPedidoJurisdiccional&&this.pedido.lista.length>0&&this.subrogados[t.id])||!(!(this.esOficinaJurisdiccional&&this.pedido.lista.length>0)||this.subrogados[t.id])},t.prototype.eliminarInsumo=function(t,e,a){if(void 0===a&&(a=!1),t.cantidad_recibida>0)return!1;var n=this.listaClaveAgregadas.indexOf(t.clave);this.listaClaveAgregadas.splice(n,1),a?this.pedido.filtro.eliminarItem(t,e):this.pedido.eliminarItem(t,e),this.erroresEnInsumos.lista[t.clave]&&(delete this.erroresEnInsumos.lista[t.clave],this.erroresEnInsumos.errores-=1)},t.prototype.mostrarFichaInformativa=function(t,e){t.preventDefault(),t.stopPropagation(),alert(e)},t.prototype.finalizar=function(){var t=prompt("Atención el pedido ya no podra editarse, para confirmar que desea concluir el pedido por favor escriba: CONCLUIR PEDIDO");if("CONCLUIR PEDIDO"!=t)return null!=t&&alert("Error al ingresar el texto para confirmar la acción."),!1;this.guardar(!0)},t.prototype.guardar=function(t){var e=this;void 0===t&&(t=!1),this.guardando=!0;var a;if(this.mensajeError.mostrar=!1,this.pedido.datos.invalid)return this.pedido.datos.get("almacen_solicitante").markAsTouched(),this.pedido.datos.get("descripcion").markAsTouched(),this.pedido.datos.get("fecha").markAsTouched(),this.guardando=!1,!1;if(this.erroresEnInsumos.errores>0){var n=[];for(var i in this.erroresEnInsumos.lista)n.push(i);return this.mensajeError=new v.a(!1),this.mensajeError.texto="Se encontaron errores en los siguientes insumos: "+n.join(", "),this.mensajeError.mostrar=!0,this.guardando=!1,!1}if(a=this.pedido.obtenerDatosGuardar(),t){a.datos.status="CONCLUIR";var r=this.totalMontoComprometidoCausesMaterial+(this.presupuesto.causes_disponible-+this.pedido.totalMontoCauses.toFixed(2))+(this.presupuesto.material_curacion_disponible-+this.pedido.totalMontoMaterialCuracion.toFixed(2)),s=this.totalMontoComprometidoNoCauses+this.presupuesto.no_causes_disponible-+this.pedido.totalMontoNoCauses.toFixed(2);if(r<0||s<0)return this.guardando=!1,this.mensajeError=new v.a(!0),this.mensajeError.texto="Presupuesto insuficiente",this.mensajeError.mostrar=!0,!1}else a.datos.status="BR";this.esEditar?this.pedidosService.editar(this.pedido.id,a).subscribe(function(t){e.guardando=!1,"BR"!=t.status&&e.router.navigate(["/almacen/pedidos/ver/"+t.id])},function(t){e.guardando=!1,e.mensajeError=new v.a(!0),e.mensajeError.texto="No especificado",e.mensajeError.mostrar=!0,console.log(e.pedido),"CONCLUIR"==e.pedido.status&&(e.pedido.status="BR");try{var a=t.json();console.log(a),401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==t.status&&a.error&&(e.mensajeError.texto=a.error,e.mensajeError.cuentaAtras=1e3)}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}}):this.pedidosService.crear(a).subscribe(function(t){e.guardando=!1,e.router.navigate(["/almacen/pedidos/editar/"+t.id])},function(t){e.guardando=!1,console.log(t),e.mensajeError=new v.a(!0),e.mensajeError.texto="No especificado",e.mensajeError.mostrar=!0;try{var a=t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==t.status&&a.error&&(e.mensajeError.texto=a.error,e.mensajeError.cuentaAtras=1e3)}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}})},t.prototype.cambioAlmacen=function(){var t=this.pedido.datos.get("almacen_solicitante").value;this.subrogados[t]?this.es_almacen_subrogado=!0:this.es_almacen_subrogado=!1,this.cargarPresupuesto(this.mes),this.almacenSeleccionado={id:t,subrogado:this.es_almacen_subrogado},this.esOficinaJurisdiccional&&!this.subrogados[t]?this.esPedidoJurisdiccional=!0:this.esPedidoJurisdiccional=!1},t.prototype.cargarAlmacenes=function(){var t=this;this.cargandoAlmacenes=!0;var e=null;this.esPedidoJurisdiccional&&this.esEditar&&this.esOficinaJurisdiccional?e=0:!this.esPedidoJurisdiccional&&this.esEditar&&this.esOficinaJurisdiccional&&(e=1),this.almacenesService.catalogo(e).subscribe(function(e){t.cargandoAlmacenes=!1,t.almacenes=e;for(var a in e)1==e[a].subrogado&&"FARSBR"==e[a].tipo_almacen&&(t.subrogados[e[a].id]=!0);if(!t.esEditar){var n={};t.pedido.inicializarDatos(n)}console.log("Almacenes cargados."),0==t.almacenes.length?(t.mensajeAdvertencia=new v.a(!0),t.mensajeAdvertencia.texto="No hay almacenes registrados en el sistema, póngase en contacto con un administrador.",t.mensajeAdvertencia.mostrar=!0):t.esPedidoJurisdiccional},function(e){t.cargandoAlmacenes=!1,t.mensajeError=new v.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para ver los almacenes."),500==e.status&&(t.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los almacenes")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los almacenes":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los almacenes"}})},t.prototype.recargarPresupuesto=function(t){var e=t.split("-");if(3==e.length){var a=e[1];2==a.length&&(a=parseInt(a))!=this.mes&&a>0&&a<13&&this.cargarPresupuesto(a)}},t.prototype.cargarPresupuesto=function(t){var e=this;if(void 0===t&&(t=0),0==t){t=(new Date).getMonth()+1}this.mes=t;var a=this.pedido.datos.get("almacen_solicitante").value;a&&(this.cargandoPresupuestos=!0,this.pedidosService.presupuesto(t,a).subscribe(function(t){e.cargando=!1,t.data?e.presupuesto=t.data:(e.presupuesto.causes_disponible=0,e.presupuesto.no_causes_disponible=0,e.presupuesto.material_curacion_disponible=0),e.cargandoPresupuestos=!1},function(t){e.cargando=!1,e.cargandoPresupuestos=!1,console.log(t)}))},t.prototype.keyboardInput=function(t){32==t.keyCode&&t.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.mostrarModalInsumos=!0),39==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaSiguiente():this.pedido.paginaSiguiente()),37==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaAnterior():this.pedido.paginaAnterior())},t.prototype.imprimirExcel=function(){var t="token="+localStorage.getItem("token");window.open(h.a.API_URL+"/generar-excel-pedido/"+this.pedido.id+"?"+t)},t.prototype.imprimir=function(){try{console.log(this.pedido),this.cargandoPdf=!0;var t={datos:{almacen:"solicitar",solicitante:"unidad",observaciones:"texto"},lista:this.pedido.lista};this.pdfworker.postMessage(JSON.stringify(t))}catch(t){this.cargandoPdf=!1,console.log(t)}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();I=j([a.i(n.Component)({selector:"app-formulario",template:a("IxAd"),styles:[a("XuYP")],host:{"(window:keydown)":"keyboardInput($event)"}}),P("design:paramtypes",["function"==typeof(E=void 0!==i.b&&i.b)&&E||Object,"function"==typeof(k=void 0!==r.Location&&r.Location)&&k||Object,"function"==typeof(C=void 0!==s.a&&s.a)&&C||Object,"function"==typeof(A=void 0!==s.c&&s.c)&&A||Object,"function"==typeof(S=void 0!==n.NgZone&&n.NgZone)&&S||Object,"function"==typeof(q=void 0!==_.a&&_.a)&&q||Object,"function"==typeof(w=void 0!==y.a&&y.a)&&w||Object,"function"==typeof(R=void 0!==o.FormBuilder&&o.FormBuilder)&&R||Object,"function"==typeof(B=void 0!==b.a&&b.a)&&B||Object])],I);var E,k,C,A,S,q,w,R,B},"0HzE":function(t,e){t.exports='<div class="modal" [ngClass]="{\'is-active\': mostrar}" >\r\n  <div class="modal-background" (click)="toggle()"></div>\r\n  <div class="modal-content">\r\n    <!-- Any other Bulma elements you want -->\r\n    <div class="card" style="width: 100%; border-radius: 1em; background: #222;">\r\n        <div class="card-content">\r\n            <div class="columns is-multiline is-mobile">\r\n\r\n                <div class="column is-one-quarter" *ngFor="let item of hubAutorizado" >\r\n                    <a href="#" title="{{ item.title }}" class="hub-item" routerLink="{{ item.routerLink }}" routerLinkActive="active">\r\n                        <figure class="image " style="height: auto; width: 100%; ">\r\n                           <img src="{{ item.icono }}" alt="{{ item.title }}">                            \r\n                        </figure>\r\n\r\n                        <span class="is-hidden-mobile">{{item.title}}</span>\r\n\r\n                    </a>\r\n                </div>\r\n                <!--div class="column is-one-quarter">\r\n                    <a href="#" title="Farmacia" class="hub-item" routerLink="/farmacia" routerLinkActive="active">\r\n                        <figure class="image" style="height: 100%; width: 100%;">\r\n                           <img src="assets/hub-farmacia.svg" alt="Almacén">\r\n                        </figure>\r\n                        <span class="is-hidden-mobile">Almacén</span>\r\n                    </a>\r\n                </div-->\r\n                <!--div class="column is-one-quarter">\r\n                    <a href="#" title="Almacén" class="hub-item" routerLink="/almacen" routerLinkActive="active">\r\n                        <figure class="image" style="height: 100%; width: 100%;">\r\n                           <img src="assets/hub-almacen.svg" alt="Almacén">\r\n                        </figure>\r\n                        <span class="is-hidden-mobile">Almacén</span>\r\n                    </a>\r\n                </div-->\r\n                \r\n                <!--div class="column is-one-quarter">\r\n                    <a href="#" title="Panel de control" class="hub-item" routerLink="/panel-control" routerLinkActive="active">\r\n                        <figure class="image" style="height: 100%; width: 100%;">\r\n                           <img src="assets/hub-panel-control.svg" alt="Panel de control">\r\n                        </figure>\r\n                        <span class="is-hidden-mobile">Panel de control</span>\r\n                    </a>\r\n                </div-->\r\n\r\n            </div>\r\n            \r\n        </div>\r\n    </div>\r\n  </div>\r\n  <button class="modal-close" (click)="toggle()"></button>\r\n</div>'},"0IzD":function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={}}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t}();i([a.i(n.Input)(),r("design:type",String)],s.prototype,"modulo",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"icono",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"url",void 0),s=i([a.i(n.Component)({selector:"menu-almacen-articulos",template:a("WgRO"),styles:[a("/kvg")]}),r("design:paramtypes",[])],s)},"0LBx":function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.stats=function(){return this.jwtRequest.get(l.URL_STATS,null,null).map(function(t){return t.json()})},t.prototype.buscar=function(t,e,a,n){return void 0===a&&(a=1),void 0===n&&(n=20),this.jwtRequest.get(l.URL,null,{status:t,q:e,page:a,per_page:n}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{status:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return t.json().data})},t.prototype.surtir=function(t){return this.jwtRequest.post(l.URL,t).map(function(t){return t.json().data})},t}();c.URL="entregas",c.URL_STATS="entregas-stats",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},"0PTN":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("9rY/"),s=a("m57g"),o=a("qEG/"),c=a("D9tw"),l=a("2qAn");a.d(e,"a",function(){return p});var d=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},u=[{path:"panel-control/roles",children:[{path:"",component:r.a,canActivate:[l.a],data:{key:"ICmOKw3HxhgRna4a78OP0QmKrIX0bNsp"}},{path:"nuevo",component:s.a,canActivate:[l.a],data:{key:"hA2wLCnNDQ5Z1OtvdW8lgX5D6wkM6zBE"}},{path:"editar/:id",component:o.a,canActivate:[l.a],data:{key:"9Z9XwxmNbrISFyF5sJkU3HyGUssSPfU5"}}],canActivate:[c.a]}],p=function(){function t(){}return t}();p=d([a.i(n.NgModule)({imports:[i.b.forChild(u)],exports:[i.b],providers:[]})],p)},"0SS7":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"0SZc":function(t,e){t.exports='<app-menu-inventario></app-menu-inventario>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},"0ZDZ":function(t,e){t.exports='<listar #ctrl URL="movimientos?tipo=2&fecha_desde={{fecha_desde}}&fecha_hasta={{fecha_hasta}}&turno={{turno}}&servicio={{servicio}}&recibe={{recibe}}" titulo="Salida  de almacén"></listar>\r\n<menu-farmacia [modulo]="\'Salidas  de almacén\'" [icono]="\'assets/icono-salidas.svg\'" [url]="\'/almacen/salidas-estandar\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <nav class="level">\r\n                        <div class="level-left"></div>\r\n                        <!-- Right side -->\r\n                        <div class="level-right">\r\n                            <p class="level-item"><a class="button is-dark is-medium" routerLink="nuevo" *ngIf="ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nueva salida</span></a></p>\r\n                            <p class="level-item"><a class="button is-primary is-medium" routerLink="nuevo" *ngIf="!ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nueva salida</span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item">&nbsp;</p>\r\n                        </div>\r\n                    </nav> \r\n                    <div class="container is-fluid" id="titulo">\r\n                        <span></span>\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Salidas  de almacén\r\n                            </h1>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <div class="control">\r\n                                <div class="field">   \r\n                                    <label class="label">Desde:</label>                         \r\n                                    <input  style="width: 150px;" class="input is-medium" [(ngModel)]=\'fecha_desde\' ngui-datetime-picker date-only="true" placeholder="YYYY-MM-DD" />\r\n                                </div>\r\n                            </div>\r\n                            <div class="control is-expanded" >\r\n                                <div class="field">   \r\n                                    <label class="label">Hasta:</label>                         \r\n                                    <input style="width: 150px;" class="input is-medium" [(ngModel)]=\'fecha_hasta\' ngui-datetime-picker date-only="true" placeholder="YYYY-MM-DD" />\r\n                                </div>\r\n                            </div>\r\n                            <div class="control is-expanded" *ngIf="!ctrl.cargando && ctrl.dato">                                \r\n                                <div class="field">\r\n                                    <label class="label">Turno:</label>\r\n                                    <div class="select is-medium">\r\n                                        <select class="select is-medium" [(ngModel)]="turno" #tr>\r\n                                            <option value="">Todos</option>\r\n                                            <option *ngFor="let val of ctrl.dato[ctrl.dato.length-1].turnos_disponibles" value="{{val.id}}" >{{ val.nombre }}</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="control is-expanded" *ngIf="!ctrl.cargando && ctrl.dato">\r\n                                <div class="field ">\r\n                                    <label class="label">Servicio:</label>\r\n                                    <div class="select is-medium ">\r\n                                        <select class="select is-medium" [(ngModel)]="servicio" #sr>\r\n                                            <option value="">Todos</option>\r\n                                            <option *ngFor="let val of ctrl.dato[ctrl.dato.length-1].servicios_disponibles" value="{{val.id}}" >{{ val.nombre }}</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="control is-expanded">\r\n                                <div class="field">   \r\n                                    <label class="label">Recibe:</label>                         \r\n                                    <input class="input is-medium" type="text" placeholder="Persona que recibe" [(ngModel)]="recibe">\r\n                                </div>\r\n                            </div>\r\n                            <div class="control">\r\n                                <div class="field">  \r\n                                <label class="label">&nbsp;</label>\r\n                                <button class="button is-default is-medium" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="recibe=\'\';servicio=\'\'; turno=\'\'; fecha_desde=\'\'; fecha_hasta=\'\';" >Limpiar</button>\r\n                                </div>\r\n                            </div>\r\n                            <div class="control">\r\n                                <div class="field">  \r\n                                <label class="label">&nbsp;</label>\r\n                                <button class="button is-info is-medium" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.listar(1)" >Filtrar</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            \r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <span id="exportable">\r\n            <table class="table" *ngIf="!ctrl.cargando " >\r\n                <thead>\r\n                    <tr>\r\n                        <th style=" text-align: center;"><abbr title="Folio">Fecha</abbr></th>\r\n                        <th style=" text-align: center;"><abbr title="Folio">Folio</abbr></th>\r\n                        <th>Servicio</th>\r\n                        <th>Turno</th>\r\n                        <th>Insumos</th>\r\n                        <th>Recibe</th>\r\n                        <th>Entregó</th>\r\n                        <th style=" text-align: center;">Capturado</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada && ctrl.dato;">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.fecha_movimiento }}</a></th>\r\n                        <th *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td *ngIf="item.movimiento_metadato && (i+1)<ctrl.dato.length" style="vertical-align: middle;" ><a *ngIf="item.movimiento_metadato.servicio.nombre"  routerLink="/almacen/salidas-estandar/ver/{{item.id}}" >{{ item.movimiento_metadato.servicio.nombre }} </a></td>\r\n                        <td *ngIf="!item.movimiento_metadato && (i+1)<ctrl.dato.length" style="vertical-align: middle;" >No disponible</td>\r\n                        <td *ngIf="item.movimiento_metadato && (i+1)<ctrl.dato.length" style="vertical-align: middle;"><a *ngIf="item.movimiento_metadato.turno.nombre"  routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.turno.nombre }} </a></td>\r\n                        <td *ngIf="!item.movimiento_metadato && (i+1)<ctrl.dato.length" style="vertical-align: middle;" >No disponible</td>\r\n                        <td *ngIf="(i+1)<ctrl.dato.length"> <a routerLink="/almacen/salidas-estandar/ver/{{item.id}}"> <p> Claves: {{item.numero_claves}}</p> <p> Insumos: {{item.numero_insumos}}</p> </a> </td>\r\n                        <td *ngIf="item.movimiento_metadato && (i+1)<ctrl.dato.length" style="vertical-align: middle;" ><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.persona_recibe }}</a></td>\r\n                        <td *ngIf="!item.movimiento_metadato && (i+1)<ctrl.dato.length" style="vertical-align: middle;" >No disponible</td>\r\n                        <td *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>                        \r\n                        <td *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                        <!--\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n                        -->\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada && ctrl.dato">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;" *ngIf="item.movimiento_metadato"><a *ngIf="item.movimiento_metadato.servicio.nombre" routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.servicio.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.movimiento_metadato">No disponible</td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.movimiento_metadato"><a *ngIf="item.movimiento_metadato.turno.nombre" routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.turno.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.movimiento_metadato">No disponible</td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.status }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.created_at | date}} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.updated_at | date}} </a></td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            </span>\r\n            <div *ngIf="!ctrl.dato" style="height:130px;"></div>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},"0eWM":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bKpL"),s=(a.n(r),a("rlar")),o=(a.n(s),a("/zHi")),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("WdPz")),g=a("gHRf");a.d(e,"a",function(){return b});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e){this.title=t,this.apiService=e,this.cargando=!1,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Estatus del servidor / Panel de control"),this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0;var a={q:e,page:t.paginaActualBusqueda,per_page:t.resultadosPorPaginaBusqueda,estatus:!0};return e?t.apiService.buscarServidores(a):r.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0;var n={q:t,page:this.paginaActualBusqueda,per_page:this.resultadosPorPaginaBusqueda,estatus:!0};this.apiService.buscarServidores(n).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0;var a={page:t,per_page:this.resultadosPorPagina,estatus:!0};this.apiService.servidores(a).subscribe(function(t){e.cargando=!1,e.lista=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t}();b=h([a.i(n.Component)({selector:"app-estatus",template:a("AYZA"),styles:[a("3yDS")]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==f.a&&f.a)&&_||Object])],b);var y,_},"0siG":function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.mostrarMenuAside=!1,this.usuario={}}return t.prototype.ngOnInit=function(){this.DatoUnidad=JSON.parse(localStorage.getItem("usuario")),this.usuario=JSON.parse(localStorage.getItem("usuario"))},t.prototype.toggleMenuAside=function(){this.mostrarMenuAside=!this.mostrarMenuAside},t}();s=i([a.i(n.Component)({selector:"admision-menu",template:a("vpEl"),styles:[a("VQIX")]}),r("design:paramtypes",[])],s)},"0zW+":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("7njn"),d=a("LLho"),u=a("Px6Q"),p=a("xrMq"),m=a("W3I+"),f=a("BFvY"),g=a("F1l5"),h=a("K4kt"),v=a("CWbX"),b=a("oSQj"),y=(a.n(b),a("evA2"));a.n(y);a.d(e,"a",function(){return x});var _=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},x=function(){function t(){}return t}();x=_([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,g.a,v.a,b.NguiAutoCompleteModule,y.NguiDatetimePickerModule],declarations:[p.a,m.a],providers:[f.a,h.a]})],x)},"12Vl":function(t,e){t.exports='<menu-catalogo></menu-catalogo>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectos | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulos | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},"1Da8":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("bm2B"),o=a("fc+i"),c=a("BFvY"),l=a("gHRf"),d=a("WEl6");a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(t,e,a,n,i,r,s){this.router=t,this.title=e,this.authService=a,this.route=n,this.location=i,this.pacienteEgresoService=r,this.fb=s,this.cargando=!1,this.cargandoMunicipios=!1,this.cargandoLocalidades=!1,this.cargandoMotivoEgreso=!1,this.cargandoUnidadesMedicas=!1,this.mensajeError=new l.a,this.mensajeAdvertencia=new l.a,this.mensajeExito=new l.a,this.Municipios=[],this.Localidades=[],this.MotivoEgreso=[],this.UnidadesMedicas=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Alta Paciente / Admisión"),this.pacienteEgreso=this.fb.group({fecha_egreso:["",[s.Validators.required]],hora_egreso:["",[s.Validators.required]],contrareferencia:["2",[s.Validators.required]],unidad_referencia:["CSSS",[s.Validators.required]],motivo_egreso_id:["1",[s.Validators.required]]}),this.route.params.subscribe(function(e){t.id=e.id}),this.cargarDatos()},t.prototype.cargarMunicipios=function(t){var e=this;this.cargandoMunicipios=!0,this.pacienteEgresoService.listaMunicipios(t).subscribe(function(t){e.Municipios=t,e.cargandoMunicipios=!1,console.log("Municipios cargados")},function(t){e.cargandoMunicipios=!1})},t.prototype.cargarLocalidades=function(t,e){var a=this;this.cargandoLocalidades=!0,this.pacienteEgresoService.listaLocalidades(t,e).subscribe(function(t){a.Localidades=t,a.cargandoLocalidades=!1,console.log("Localidades cargados")},function(t){a.cargandoLocalidades=!1})},t.prototype.cargarMotivoEgreso=function(){var t=this;this.cargandoLocalidades=!0,this.pacienteEgresoService.listaMotivoEgreso().subscribe(function(e){t.MotivoEgreso=e,t.cargandoMotivoEgreso=!1,console.log(e)},function(e){t.cargandoMotivoEgreso=!1})},t.prototype.CargarUnidadesMedicas=function(t,e){var a=this;void 0===e&&(e=null),this.cargandoLocalidades=!0,this.pacienteEgresoService.listaUnidades(t,e).subscribe(function(t){a.UnidadesMedicas=t,a.cargandoUnidadesMedicas=!1},function(t){a.cargandoMotivoEgreso=!1})},t.prototype.cargarDatos=function(){var t=this;this.cargando=!0,console.log("Cargando usuario."),this.pacienteEgresoService.ver(this.id).subscribe(function(e){t.cargando=!1,t.datosCargados=!0,t.pacienteEgreso.patchValue(e);var a,n,i;t.id_paciente=e.id,t.nombre_paciente=e.nombre,e.localidad?t.localidad_paciente=e.localidad.nombre+" ( "+e.localidad.municipio.nombre+" )":t.localidad_paciente="DESCONOCIDO",t.fecha_ingreso=e.ingresoactivos[0].fecha_hora_ingreso,t.area_ingreso=e.ingresoactivos[0].estado_triage.descripcion,a=new Date,n=a.getHours(),i=a.getMinutes(),t.pacienteEgreso.patchValue({fecha_egreso:a.toJSON().slice(0,10),hora_egreso:n+":"+i}),t.cargarMotivoEgreso(),t.CargarUnidadesMedicas(1)},function(e){t.cargando=!1,t.mensajeError=new l.a(!0),t.mensajeError=new l.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.referido=function(t){1==t?this.pacienteEgreso.patchValue({unidad_referencia:""}):this.pacienteEgreso.patchValue({unidad_referencia:"CSSS"})},t.prototype.enviar=function(){var t=this;this.cargando=!0,this.pacienteEgresoService.editar(this.id,this.pacienteEgreso.value).subscribe(function(e){t.cargando=!1,t.mensajeExito=new l.a(!0),t.mensajeExito.texto="Se han guardado los cambios.",t.mensajeExito.mostrar=!0,t.router.navigate(["/pacientes/modulo/egreso"])},function(e){t.cargando=!1,t.mensajeError=new l.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.regresar=function(){this.location.back()},t}();m=u([a.i(n.Component)({selector:"app-egreso",template:a("3fy6"),styles:[a("ZNEg")]}),p("design:paramtypes",["function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(g=void 0!==o.b&&o.b)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object,"function"==typeof(v=void 0!==r.c&&r.c)&&v||Object,"function"==typeof(b=void 0!==i.Location&&i.Location)&&b||Object,"function"==typeof(y=void 0!==d.a&&d.a)&&y||Object,"function"==typeof(_=void 0!==s.FormBuilder&&s.FormBuilder)&&_||Object])],m);var f,g,h,v,b,y,_},"1IEk":function(t,e){t.exports='<div class="modal is-active">\r\n    <div class="modal-background login-background"></div>\r\n    <div class="modal-content">\r\n        <div class="card" style=" border-radius:1em; overflow: hidden">\r\n            <div class="card-image" >\r\n                <figure class="image " style="border-radius: 1em 1em 0em 0em; overflow: hidden;">\r\n                    <img src="assets/bg-login_salud.svg" alt="Image">\r\n                </figure>\r\n            </div>\r\n            <div class="card-content">\r\n                <form name="form" (ngSubmit)="!loading && login()">\r\n                    <h1 class="title has-text-centered">Bienvenido</h1>\r\n                    <h2 class="subtitle has-text-centered">Esta app esta diseñada especialmente para ti.</h2>\r\n                    <div class="notification is-danger" *ngIf="mostrarMensaje">\r\n                        <a class="delete" (click)="mostrarMensaje = false"></a>\r\n                        <b>Error:</b> {{ mensaje }}\r\n                    </div>\r\n                    <p class="control has-icon">\r\n                        <input class="input is-medium" [ngClass]="{\'is-danger\': mensaje}" type="text" name="id" id="id" placeholder="Usuario" [(ngModel)]="credenciales.id"  autofocus>\r\n                        <span class="icon is-small">\r\n                        <i class="fa fa-user"></i>\r\n                        </span>\r\n                    </p>\r\n                    <p class="control has-icon">\r\n                        <input class="input is-medium" [ngClass]="{\'is-danger\': mensaje}" type="password" name="password" id="password" placeholder="Contraseña" [(ngModel)]="credenciales.password">\r\n                        <span class="icon is-small">\r\n                        <i class="fa fa-lock"></i>\r\n                        </span>\r\n                    </p>\r\n                    <p class="control" >\r\n                        <button class="button is-primary is-large is-fullwidth" [ngClass]="{\'is-loading\': loading}" >Iniciar sesión</button>\r\n                    </p>\r\n                    <p class="control" *ngIf="saludIdDisponible">\r\n                        <button class="button is-info is-large is-fullwidth">Conectar con Salud ID</button>\r\n                    </p>\r\n                    <p class="control">\r\n                        <a class="button is-white is-fullwidth" >Olvidé mi contraseña</a>\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>'},"1Lkp":function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.stats=function(){return this.jwtRequest.get(l.URL_STATS,null,null).map(function(t){return t.json()})},t.prototype.presupuesto=function(t,e){void 0===t&&(t=0),void 0===e&&(e="");var a={};return t&&(a.mes=t),e&&(a.almacen=e),this.jwtRequest.get(l.URL_PRESUPUESTO,null,a).map(function(t){return t.json()})},t.prototype.buscar=function(t,e,a,n){return void 0===a&&(a=1),void 0===n&&(n=20),this.jwtRequest.get(l.URL,null,{status:t,q:e,page:a,per_page:n}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{status:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return t.json().data})},t.prototype.crear=function(t){return this.jwtRequest.post(l.URL,t).map(function(t){return t.json().data})},t.prototype.editar=function(t,e){return this.jwtRequest.put(l.URL,t,e).map(function(t){return t.json().data})},t.prototype.eliminar=function(t){return this.jwtRequest.delete(l.URL,t).map(function(t){return t.json().data})},t.prototype.cancelarPedidoTransferir=function(t,e){return void 0===e&&(e={}),this.jwtRequest.put(l.URL_CANCELAR,t,e).map(function(t){return t.json().data})},t}();c.URL="pedidos",c.URL_STATS="pedidos-stats",c.URL_PRESUPUESTO="pedidos-presupuesto",c.URL_CANCELAR="cancelar-pedido-transferir",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},"1ei5":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("bm2B"),o=a("fc+i"),c=a("BFvY"),l=a("gHRf"),d=a("WEl6");a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(t,e,a,n,i,r,s){this.router=t,this.title=e,this.authService=a,this.route=n,this.location=i,this.pacienteEgresoService=r,this.fb=s,this.cargando=!1,this.cargandoUnidadesMedicas=!1,this.cargandotriage=!1,this.cargandoGradoLesion=!1,this.permiso_guardar=!0,this.verForm=!1,this.mensajeError=new l.a,this.mensajeAdvertencia=new l.a,this.mensajeExito=new l.a,this.UnidadesMedicas=[],this.Triage=[],this.GradoLesion=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Ingreso Paciente / Admisión"),this.pacienteIngreso=this.fb.group({referido:["2",[s.Validators.required]],unidad_referido:["",[s.Validators.required]],urgencia_calificada:["1",[s.Validators.required]],registro_triage:["1",[s.Validators.required]],estado_triage_id:["1",[s.Validators.required]],grado_lesion_id:["1",[s.Validators.required]],fecha_ingreso:["",[s.Validators.required]],hora_ingreso:["",[s.Validators.required]]}),this.route.params.subscribe(function(e){t.id=e.id}),this.cargarDatos()},t.prototype.bloquea_formulario=function(){this.verForm=!this.verForm,this.verForm?this.pacienteIngreso.patchValue({registro_triage:2,estado_triage_id:1,grado_lesion_id:0}):this.pacienteIngreso.patchValue({registro_triage:2,estado_triage_id:1,grado_lesion_id:1})},t.prototype.valida_referido=function(t){1==t?(this.nombre_conocido=!0,this.pacienteIngreso.patchValue({unidad_referido:""})):(this.pacienteIngreso.patchValue({unidad_referido:"CSSS"}),this.nombre_conocido=!1)},t.prototype.CargarUnidadesMedicas=function(t,e){var a=this;this.cargandoUnidadesMedicas=!0,console.log(t+" - "+e),this.pacienteEgresoService.listaUnidades(t,e).subscribe(function(t){a.UnidadesMedicas=t,a.cargandoUnidadesMedicas=!1},function(t){a.cargandoUnidadesMedicas=!1})},t.prototype.CargarGradoLesion=function(t){var e=this;this.cargandoGradoLesion=!0,this.pacienteEgresoService.listaGradoLesion(t).subscribe(function(t){e.pacienteIngreso.patchValue({grado_lesion_id:t[0].id}),e.GradoLesion=t,e.cargandoGradoLesion=!1},function(t){e.cargandoGradoLesion=!1})},t.prototype.CargarLugarTriage=function(t){var e=this;this.cargandotriage=!0,this.pacienteEgresoService.listaTriage(t).subscribe(function(t){e.Triage=t,e.pacienteIngreso.patchValue({estado_triage_id:t[0].id}),e.cargandotriage=!1},function(t){e.cargandotriage=!1})},t.prototype.cargarDatos=function(){var t=this;this.cargando=!0,this.pacienteEgresoService.ver(this.id).subscribe(function(e){t.cargando=!1,t.datosCargados=!0;var a,n,i,r,s,o,c,l,d;e.ingresoactivos.length>0?(e.referido=e.ingresoactivos[0].referido,e.urgencia_calificada=e.ingresoactivos[0].urgencia_calificada,e.registro_triage=e.ingresoactivos[0].registro_triage,e.fecha_ingreso=e.ingresoactivos[0].fecha_hora_ingreso.substr(0,10),e.hora_ingreso=e.ingresoactivos[0].fecha_hora_ingreso.substr(10,6),1==e.ingresoactivos[0].referido?(e.unidad_referido=e.ingresoactivos[0].unidad_referido,t.nombre_conocido=!0):e.unidad_referido="css",a=e.ingresoactivos[0].clues,n=e.ingresoactivos[0].estado_triage_id,i=e.ingresoactivos[0].grado_lesion_id,t.pacienteIngreso.patchValue(e),r=e.id,s=e.nombre,o=e.localidad?e.localidad.nombre+" ("+e.localidad.municipio.nombre+")":"DESCONOCIDO",t.permiso_guardar=!1):(c=new Date,l=c.getHours(),d=c.getMinutes(),r=e.id,s=e.nombre,o=e.localidad?e.localidad.nombre+" ("+e.localidad.municipio.nombre+")":"DESCONOCIDO",t.pacienteIngreso.patchValue({fecha_ingreso:c.toJSON().slice(0,10),hora_ingreso:l+":"+d}),t.pacienteIngreso.patchValue({unidad_referido:"CSSS"})),t.CargarUnidadesMedicas(1,a),t.CargarLugarTriage(n),t.CargarGradoLesion(i),t.id_paciente=r,t.nombre_paciente=s,t.localidad_paciente=o},function(e){t.cargando=!1,t.mensajeError=new l.a(!0),t.mensajeError=new l.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.enviar=function(){var t=this;this.cargando=!0,this.pacienteEgresoService.ingreso(this.id,this.pacienteIngreso.value).subscribe(function(e){t.cargando=!1,console.log("Paciente editado."),t.mensajeExito=new l.a(!0),t.mensajeExito.texto="Se han guardado los cambios.",t.mensajeExito.mostrar=!0,t.location.back()},function(e){t.cargando=!1,t.mensajeError=new l.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.regresar=function(){this.location.back()},t}();m=u([a.i(n.Component)({selector:"app-ingreso",template:a("8jfm"),styles:[a("FV3d")]}),p("design:paramtypes",["function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(g=void 0!==o.b&&o.b)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object,"function"==typeof(v=void 0!==r.c&&r.c)&&v||Object,"function"==typeof(b=void 0!==i.Location&&i.Location)&&b||Object,"function"==typeof(y=void 0!==d.a&&d.a)&&y||Object,"function"==typeof(_=void 0!==s.FormBuilder&&s.FormBuilder)&&_||Object])],m);var f,g,h,v,b,y,_},"1oVA":function(t,e,a){"use strict";function n(){return a("RaCy")}var i=a("/oeL"),r=a("qbdv"),s=a("F1l5"),o=a("TNb/"),c=(a.n(o),a("LxmL")),l=(a.n(c),a("zDUb")),d=a("BFvY"),u=a("HpF0"),p=a("evA2");a.n(p);a.d(e,"a",function(){return f});var m=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},f=function(){function t(){}return t}();f=m([a.i(i.NgModule)({imports:[r.CommonModule,o.ChartModule,s.a,p.NguiDatetimePickerModule],providers:[d.a,u.a,{provide:c.HighchartsStatic,useFactory:n}],declarations:[l.a],exports:[l.a]})],f)},"1qpo":function(t,e){t.exports='<aside class="menu" style="padding: 1em;">\r\n    <!--  <p class="menu-label">\r\n        Pedidos\r\n    </p>-->\r\n    <a routerLink="/almacen/pedidos-jurisdiccionales/nuevo" routerLinkActive="is-active" class="button is-primary is-inverted is-medium is-fullwidth"><span class="icon"  ><i class="fa fa-plus"></i></span> <span>Nuevo Pedido</span></a>\r\n    <br>\r\n    <ul class="menu-list">\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/todos" #todos routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-file"></i></span> Pedidos\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.todos>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': todos.className == \'is-active\', \'is-primary\': todos.className != \'is-active\' }">{{  stats.todos }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/borradores" #borradores routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-pencil-square-o"></i></span> Borradores\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.borradores>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': borradores.className == \'is-active\', \'is-primary\': borradores.className != \'is-active\' }">{{  stats.borradores }}</span>\r\n            </a>\r\n        </li>\r\n        <!--li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/pendientes" #pendientes routerLinkActive="is-active">\r\n                <span class="icon"  ><i class="fa fa-minus-circle"></i></span> Pendientes\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.pendientes>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': pendientes.className == \'is-active\', \'is-warning\': pendientes.className != \'is-active\' }" >{{  stats.pendientes }}</span>\r\n            </a>             \r\n        </li-->\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/en-transito" #enTransito routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-clock-o"></i></span> En transito\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.en_transito>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': enTransito.className == \'is-active\', \'is-primary\': enTransito.className != \'is-active\' }">{{  stats.en_transito }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/por-surtir" #porSurtir routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-truck"></i></span> Por surtir\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.por_surtir>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': porSurtir.className == \'is-active\', \'is-primary\': porSurtir.className != \'is-active\' }">{{  stats.por_surtir }}</span>\r\n            </a>\r\n        </li>\r\n        <hr>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/finalizados" #finalizados routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-check-circle"></i></span> Finalizados\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.finalizados>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': finalizados.className == \'is-active\', \'is-success\': finalizados.className != \'is-active\' }">{{  stats.finalizados }}</span>\r\n            </a>\r\n            <!--ul>\r\n                <li><a routerLink="/almacen/pedidos-jurisdiccionales/finalizados/completos" routerLinkActive="is-active">Completos</a></li>\r\n                <li><a routerLink="/almacen/pedidos-jurisdiccionales/finalizados/incompletos" routerLinkActive="is-active">Incompletos</a></li>\r\n                <li><a routerLink="/almacen/pedidos-jurisdiccionales/finalizados/cancelados" routerLinkActive="is-active">Cancelados</a></li>\r\n            </ul-->\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/expirados" #expirados routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-exclamation-circle"></i></span> Expirados\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.expirados>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': expirados.className == \'is-active\', \'is-danger\': expirados.className != \'is-active\' }">{{  stats.expirados }}</span>\r\n            </a>\r\n        </li>\r\n        <!--\r\n        <hr>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos-jurisdiccionales/farmacia-subrogada" #farmacia routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-building"></i></span> Farmacia Subrogada\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.farmacia>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': farmacia.className == \'is-active\', \'is-info\': farmacia.className != \'is-active\' }">{{  stats.farmacia }}</span>\r\n            </a>\r\n        </li>-->\r\n    </ul>\r\n\r\n</aside>'},"1u8X":function(t,e){t.exports='<menu-farmacia [modulo]="\'Dashboard salidas\'" [icono]="\'assets/icono-dashboard.svg\'"\r\n  [url]="\'/almacen/dashboard-salidas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n\r\n<div class="box" style="margin: 20px;">\r\n      <div class="columns">\r\n        <div class="column is-half">\r\n  <section class="section">\r\n          <div class="heading">\r\n            <h1 class="title">{{usuario.almacen_activo.nombre}}</h1>\r\n            <h2 class="subtitle">\r\n              {{usuario.clues_activa.clues}} <strong>{{usuario.clues_activa.nombre}}</strong>\r\n            </h2>\r\n          </div>\r\n  </section>\r\n        </div>\r\n        <div class="column">\r\n          <div class="field">\r\n            <label class="label">Fecha inicial:</label>\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <input class="input" [value]="fecha_inicial_actual" formControlName="fecha_inicial" [(ngModel)]="fecha_inicial" ngui-datetime-picker\r\n                  [min-date]="MinDate" [max-date]="MaxDate" date-only="true" \r\n                  placeholder="YYYY-MM-DD" />\r\n            </p>\r\n          </div>\r\n          <div class="field">\r\n            <label class="label">Fecha final:</label>\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <input class="input" [value]="fecha_actual" formControlName="fecha_final" [(ngModel)]="fecha_final" ngui-datetime-picker\r\n                  [min-date]="MinDate" [max-date]="MaxDate" date-only="true" \r\n                  placeholder="YYYY-MM-DD" />\r\n            </p>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n\r\n  <div class="card" style="margin: 20px; padding-left: 30px; padding-right: 70px">\r\n    <table class="table" style="margin:5px;">\r\n      <tbody>\r\n        <tr>\r\n          <th>Presupuesto Anual Causes:</th>\r\n          <th>\r\n            <div class="columns">\r\n              <div class="column">\r\n                <span class="tag is-primary is-medium">Autorizado: $ {{ presupuesto.causes_modificado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-warning is-medium">Comprometido: $ {{ presupuesto.causes_comprometido | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-danger is-medium">Devengado: $ {{ presupuesto.causes_devengado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-success is-medium">Disponible: $ {{ presupuesto.causes_disponible | number:\'1.2-2\' }}</span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th>Presupuesto Anual No Causes:</th>\r\n          <th>\r\n            <div class="columns">\r\n              <div class="column">\r\n                <span class="tag is-primary is-medium">Autorizado: $ {{ presupuesto.no_causes_modificado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-warning is-medium">Comprometido: $ {{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-danger is-medium">Devengado: $ {{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-success is-medium">Disponible: $ {{ presupuesto.no_causes_disponible | number:\'1.2-2\' }}</span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n        </tr>\r\n        <tr>\r\n          <th>Presupuesto Anual Material de Curación:</th>\r\n          <th>\r\n            <div class="columns">\r\n              <div class="column">\r\n                <span class="tag is-primary is-medium">Autorizado: $ {{ presupuesto.material_curacion_modificado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-warning is-medium">Comprometido: $ {{ presupuesto.material_curacion_comprometido | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-danger is-medium">Devengado: $ {{ presupuesto.material_curacion_devengado | number:\'1.2-2\' }}</span>\r\n              </div>\r\n              <div class="column">\r\n                <span class="tag is-success is-medium">Disponible: $ {{ presupuesto.material_curacion_disponible | number:\'1.2-2\' }}</span>\r\n              </div>\r\n            </div>\r\n          </th>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  \r\n  <!-- Primera parte -->\r\n  <div class="columns">\r\n    <!-- Mes y total de recetas -->\r\n    <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 60px">\r\n      <div class="card">\r\n        <div class="card-content">\r\n          <div class="content">\r\n            <div class="label" style="text-align: center">\r\n              Mes:\r\n            </div>\r\n            <div class="label" style="text-align: center">\r\n              Total de recetas:\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- % surtido -->\r\n    <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 60px">\r\n      <!-- % Surtido por claves -->\r\n      <div class="card" [ngClass]="{\'is-hidden\': surtido == 2 || surtido == 3}">\r\n        <header class="card-header is-primary">\r\n          <p class="card-header-title">\r\n            Porcentaje de surtimiento\r\n          </p>\r\n            <div class="level-right">\r\n              <a (click)="cambiarSurtido(1)">\r\n                <div class="tag is-primary">Claves </div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(2)">\r\n                <div class="tag">Insumos </div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(3)">\r\n                <div class="tag">Monto </div>\r\n              </a>\r\n            </div>\r\n        </header>\r\n        <div class="card-content">\r\n          <div class="content scroll">\r\n            <table class="table">\r\n              <thead>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Cantidad solicitada">Solicitado</abbr></th>\r\n                  <th><abbr title="Cantidad surtida">Surtido</abbr></th>\r\n                  <th><abbr title="Porcentaje">%</abbr></th>\r\n                </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Cantidad solicitada">Solicitado</abbr></th>\r\n                  <th><abbr title="Cantidad surtida">Surtido</abbr></th>\r\n                  <th><abbr title="Porcentaje">%</abbr></th>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                <tr>\r\n                  <th>1</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>2</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>3</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>4</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>5</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>6</th>\r\n                  <td>550</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>7</th>\r\n                  <td>450</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>8</th>\r\n                  <td>400</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>9</th>\r\n                  <td>350</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>10</th>\r\n                  <td>300</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>11</th>\r\n                  <td>250</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>12</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>13</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>14</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>15</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>16</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>17</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>18</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>19</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>20</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- % Surtido por insumos -->\r\n      <div class="card" [ngClass]="{\'is-hidden\': surtido == 1 || surtido == 3 }">\r\n        <header class="card-header is-primary">\r\n          <p class="card-header-title">\r\n            Porcentaje de surtimiento\r\n          </p>\r\n          <div class="level-right">\r\n              <a (click)="cambiarSurtido(1)">\r\n                <div class="tag">Claves</div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(2)">\r\n                <div class="tag is-primary">Insumos</div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(3)">\r\n                <div class="tag">Monto</div>\r\n              </a>\r\n            </div>\r\n        </header>\r\n        <div class="card-content">\r\n          <div class="content scroll">\r\n            <table class="table">\r\n              <thead>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Cantidad solicitada">Solicitado</abbr></th>\r\n                  <th><abbr title="Cantidad surtida">Surtido</abbr></th>\r\n                  <th><abbr title="Porcentaje">%</abbr></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <th>1</th>\r\n                  <td>500</td>\r\n                  <td>250</td>\r\n                  <td>50</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- % Surtido por monto -->\r\n      <div class="card" [ngClass]="{\'is-hidden\': surtido == 1 || surtido == 2}">\r\n        <header class="card-header is-primary">\r\n          <p class="card-header-title">\r\n            Porcentaje de surtimiento\r\n          </p>\r\n        </header>\r\n        <div class="card-content">\r\n          <div class="content">\r\n            <div class="level-right">\r\n              <a (click)="cambiarSurtido(1)">\r\n                <div class="tag">Claves</div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(2)">\r\n                <div class="tag">Insumos</div>\r\n              </a>\r\n              <a (click)="cambiarSurtido(3)">\r\n                <div class="tag is-primary">Monto</div>\r\n              </a>\r\n            </div>\r\n            <table class="table">\r\n              <thead>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Cantidad solicitada">Solicitado</abbr></th>\r\n                  <th><abbr title="Cantidad surtida">Surtido</abbr></th>\r\n                  <th><abbr title="Porcentaje">%</abbr></th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr>\r\n                  <th>1</th>\r\n                  <td>$ 500.00</td>\r\n                  <td>$ 250.00</td>\r\n                  <td>50</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!--  -->\r\n  <div class="columns">\r\n\r\n    <!-- Claves negadas -->\r\n    <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 60px">\r\n      <div class="card">\r\n        <header class="card-header">\r\n          <p class="card-header-title">\r\n            TOP - Claves negadas\r\n          </p>\r\n        </header>\r\n        <div class="card-content">\r\n          <div class="content scroll">\r\n            <table class="table">\r\n              <thead>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Clave">Clave</abbr></th>\r\n                  <th>Nombre</th>\r\n                  <th><abbr title="Cantidad">Cant.</abbr></th>\r\n                  <th><abbr title="Existencia">Exist.</abbr></th>\r\n                  <th><abbr title="Periodo de negacion">Negacion</abbr></th>\r\n                </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Clave">Clave</abbr></th>\r\n                  <th>Nombre</th>\r\n                  <th><abbr title="Cantidad">Cant.</abbr></th>\r\n                  <th><abbr title="Existencia">Exist.</abbr></th>\r\n                  <th><abbr title="Periodo de negacion">Negacion</abbr></th>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                <tr>\r\n                  <th>1</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>2</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>3</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>4</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>5</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>6</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>8</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>9</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>10</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>11</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>12</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>13</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>14</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>15</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                  <td>2017-04-10</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Claves de mayor movimiento -->\r\n    <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 60px">\r\n      <div class="card">\r\n        <header class="card-header is-primary">\r\n          <p class="card-header-title">\r\n            TOP - Claves de mayor movimiento\r\n          </p>\r\n        </header>\r\n        <div class="card-content">\r\n          <div class="content scroll">\r\n            <table class="table">\r\n              <thead>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Clave">Clave</abbr></th>\r\n                  <th>Nombre</th>\r\n                  <th><abbr title="Consumo promedio mensual">CPM</abbr></th>\r\n                  <th><abbr title="Existencia actual">Exist.</abbr></th>\r\n                </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th>No.</th>\r\n                  <th><abbr title="Clave">Clave</abbr></th>\r\n                  <th>Nombre</th>\r\n                  <th><abbr title="Consumo promedio mensual">CPM</abbr></th>\r\n                  <th><abbr title="Existencia actual">Exist.</abbr></th>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                <tr>\r\n                  <th>1</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>2</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>3</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>4</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>5</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>6</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>7</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>8</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>9</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>10</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>11</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>12</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>13</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>14</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n                <tr>\r\n                  <th>15</th>\r\n                  <td>010.000.0104.00</td>\r\n                  <td>PARACETAMOL</td>\r\n                  <td>100</td>\r\n                  <td>50</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Gráficas \r\n    <div class="columns">\r\n        <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 60px">\r\n        </div>\r\n        <div class="column is-half" style="margin: 10px; padding-left: 20px; padding-right: 70px">\r\n            <div class="card" style="align-items: center; align-content: center; align-self: center">\r\n                        <chart [options]="grafica_opciones"></chart>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    -->\r\n    \r\n  <!-- Claves -->\r\n  <div class="card" [ngClass]="{\'is-hidden\': grafica == 2 || grafica == 3}">\r\n    <div class="card-content">\r\n      <div class="content">\r\n        <div class="level-right">\r\n          <a (click)="cambiarGrafica(1)">\r\n            <div class="tag is-primary">Claves</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(2)">\r\n            <div class="tag">Insumos</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(3)">\r\n            <div class="tag">Monto</div>\r\n          </a>\r\n        </div>\r\n        <!-- Gráfica CLAVES -->\r\n        <div class="panel">\r\n          <chart [options]="claves"></chart>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Insumos -->\r\n  <div class="card" [ngClass]="{\'is-hidden\': grafica == 1 || grafica == 3}">\r\n    <div class="card-content">\r\n      <div class="content">\r\n        <div class="level-right">\r\n          <a (click)="cambiarGrafica(1)">\r\n            <div class="tag">Claves</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(2)">\r\n            <div class="tag is-primary">Insumos</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(3)">\r\n            <div class="tag">Monto</div>\r\n          </a>\r\n        </div>\r\n        <!-- Gráfica INSUMOS -->\r\n        <div class="panel">\r\n          <chart [options]="insumos"></chart>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <!-- Monto -->\r\n  <div class="card" [ngClass]="{\'is-hidden\': grafica == 1 || grafica == 2}">\r\n    <div class="card-content">\r\n      <div class="content">\r\n        <div class="level-right">\r\n          <a (click)="cambiarGrafica(1)">\r\n            <div class="tag">Claves</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(2)">\r\n            <div class="tag">Insumos</div>\r\n          </a>\r\n          <a (click)="cambiarGrafica(3)">\r\n            <div class="tag is-primary">Monto</div>\r\n          </a>\r\n        </div>\r\n        <!-- Gráfica MONTO -->\r\n        <div class="panel">\r\n          <chart [options]="monto"></chart>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'},"1vRS":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("bm2B"),o=a("fc+i"),c=a("BFvY"),l=a("gHRf"),d=a("GtVU");a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(t,e,a,n,i,r,s){this.router=t,this.title=e,this.authService=a,this.route=n,this.location=i,this.pacienteService=r,this.fb=s,this.cargando=!1,this.cargandoMunicipios=!1,this.cargandoLocalidades=!1,this.verFormResponsable=!1,this.Municipios=[],this.Localidades=[],this.mensajeError=new l.a,this.mensajeAdvertencia=new l.a,this.mensajeExito=new l.a}return t.prototype.ngOnInit=function(){this.title.setTitle("Nuevo Paciente / Admisión"),this.paciente=this.fb.group({nombre:["",[s.Validators.required]],fecha_nacimiento:["",[s.Validators.required]],hora_nacimiento:["",[]],domicilio:["",[s.Validators.required]],colonia:["",[s.Validators.required]],telefono:["",[s.Validators.required]],no_expediente:["",[s.Validators.required]],no_afiliacion:["",[s.Validators.required]],municipio_id:["",[s.Validators.required]],localidad_id:["",[s.Validators.required]],sexo:["1",[s.Validators.required]],responsableconocido:["1",[s.Validators.required]],nombre_responsable:["",[s.Validators.required]],parentesco:["",[s.Validators.required]],domicilio_responsable:["",[s.Validators.required]],telefono_responsable:["",[s.Validators.required]]}),this.cargarMunicipios()},t.prototype.enviar=function(){var t=this;this.cargando=!0,this.pacienteService.crear(this.paciente.value).subscribe(function(e){t.cargando=!1,console.log("Usuario creado."),t.location.back()},function(e){t.cargando=!1,t.mensajeError=new l.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{var a=e.json();if(401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status){t.mensajeError.texto="Por favor verfique los campos marcados en rojo.";for(var n in a.error)for(var i in a.error[n]);}}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.cargarMunicipios=function(){var t=this;this.cargandoMunicipios=!0,this.pacienteService.listaMunicipios().subscribe(function(e){t.Municipios=e,t.cargandoMunicipios=!1,console.log("Municipios cargados")},function(e){t.cargandoMunicipios=!1})},t.prototype.cargarLocalidades=function(t){var e=this;this.cargandoLocalidades=!0,this.pacienteService.listaLocalidades(t).subscribe(function(t){e.Localidades=t,e.cargandoLocalidades=!1,console.log("Localidades cargados")},function(t){e.cargandoLocalidades=!1})},t.prototype.regresar=function(){this.location.back()},t.prototype.responsable=function(){this.verFormResponsable=!this.verFormResponsable,this.verFormResponsable?this.paciente.patchValue({nombre_responsable:1,parentesco:"1987-01-01",domicilio_responsable:"conocido",telefono_responsable:"conocido"}):this.paciente.patchValue({nombre_responsable:"",parentesco:"",domicilio_responsable:"",telefono_responsable:""})},t}();m=u([a.i(n.Component)({selector:"app-nuevo",template:a("SAhN"),styles:[a("KWMu")]}),p("design:paramtypes",["function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(g=void 0!==o.b&&o.b)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object,"function"==typeof(v=void 0!==r.c&&r.c)&&v||Object,"function"==typeof(b=void 0!==i.Location&&i.Location)&&b||Object,"function"==typeof(y=void 0!==d.a&&d.a)&&y||Object,"function"==typeof(_=void 0!==s.FormBuilder&&s.FormBuilder)&&_||Object])],m);var f,g,h,v,b,y,_},"1yot":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("LLho"),d=a("F1l5"),u=a("7YyF"),p=a("td4t"),m=a("9BlR"),f=a("FTUj"),g=a("7W7s"),h=a("cq/0");a.d(e,"a",function(){return b});var v=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},b=function(){function t(){}return t}();b=v([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,p.a,s.a,o.a,c.a,l.a,d.a,u.a,g.a],declarations:[m.a,f.a,h.a]})],b)},"1z/4":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("pKVG"),o=a("oeHx"),c=a("G8gi"),l=a("f5Uh"),d=a("Px6Q"),u=a("hHbS"),p=a("O4Hv");a.d(e,"a",function(){return f});var m=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},f=function(){function t(){}return t}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},"2Gpn":function(t,e){},"2LGo":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"2Q/Z":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".rojo{color:red}",""]),t.exports=t.exports.toString()},"2Wqg":function(t,e){t.exports='<div class="modal is-active">\r\n\t<div class="modal-background" (click)="cerrar()"></div>\r\n\t<div class="modal-card" style="width:95%; height:100%;">\r\n\t\t<header class="modal-card-head" style="background: #00d1b2;">\r\n\t\t\t<div class="container is-fluid" style="width:100%;">\r\n\t\t\t\t<h1 class="title" style="color:#FFF;">\r\n\t\t\t\t\tClues asignadas a: <b>{{ lista.nombre }}</b>\r\n\t\t\t\t</h1>\r\n\t\t\t</div>\r\n\t\t\t<a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrar()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n\t\t</header>\r\n\t\t<section class="modal-card-body" style="padding:0px;">\r\n\r\n\t\t\t<div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n\t\t\t\t<br>\r\n\t\t\t\t<span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n\t\t\t\t<br>\r\n\t\t\t\t<br>\r\n\t\t\t</div>\r\n\r\n\t\t\t<table class="table" *ngIf="!cargando" style="font-size: 0.8em;">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Clues</th>\r\n\t\t\t\t\t\t<th>Nombre</th>\r\n\t\t\t\t\t\t<th>Fecha</th>\r\n\t\t\t\t\t\t<th>Por usuario</th>\r\n\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr *ngFor="let item of unidadesMedicas; let i = index">\r\n\t\t\t\t\t\t<td>{{ item.clues }}</td>\r\n\t\t\t\t\t\t<td>{{ item.nombre }}</td>\r\n\t\t\t\t\t\t<td>{{ item.created_at }}</td>\r\n\t\t\t\t\t\t<td>{{ item.usuario_id }}</td>\r\n\t\t\t\t\t\t<td style="width:70px !important;">\r\n\t\t\t\t\t\t\t<span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n\t\t\t\t\t\t\t<a (click)="eliminar(item,i)" *ngIf="!item.cargando"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr *ngIf="unidadesMedicas.length == 0">\r\n\t\t\t\t\t\t<td colspan="4" style="vertical-align: middle; color:#888;">No hay unidades médicas asiganadas a esta lista.</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<br>\r\n\r\n\t\t</section>\r\n\t\t<footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em ">\r\n\r\n\t\t\t<paginacion [total]="total" [paginasTotales]="paginasTotales" [resultadosPorPagina]="resultadosPorPagina" [paginaActual]="paginaActual"\r\n\t\t\t [indicePaginas]="indicePaginas" (onSiguiente)="paginaSiguiente()" (onAnterior)="paginaAnterior()" (onListar)="listar($event)"\r\n\t\t\t *ngIf="total > 0 && total > resultadosPorPagina "></paginacion>\r\n\r\n\r\n\r\n\t\t\t<div class="notification is-dark is-unselectable mensaje-agregar" [ngClass]="{ \'mostrar\': mensajeAgregado.mostrar}" *ngIf="mensajeAgregado.mostrar"\r\n\t\t\t (click)="mensajeAgregado.mostrar=false">\r\n\t\t\t\t<span class="icon"><i class="fa fa-check-circle"></i></span> <span>Agregado</span>\r\n\t\t\t</div>\r\n\r\n\t\t\t<form (submit)="agregar($event)">\r\n\t\t\t\t<div class="control is-grouped">\r\n\t\t\t\t\t<p class="control is-expanded " [ngClass]="{ \'is-loading\': cargandoUnidadesMedicasSinAsignar }">\r\n\t\t\t\t\t\t<span class="select is-fullwidth" >              \r\n\t\t\t\t\t\t\t<select (change)="seleccionarClues($event.target.value)" #cluesSelect  [disabled]="unidadesMedicasSinAsignar.length == 0 || agregandoUnidadMedica">\r\n\t\t\t\t\t\t\t<option value="-1">Seleccione una clues</option>\r\n\t\t\t\t\t\t\t<option value="TODAS" *ngIf="unidadesMedicasSinAsignar.length > 1">Todas las unidades médicas</option>\r\n\t\t\t\t\t\t\t<option *ngFor="let um of unidadesMedicasSinAsignar" value="{{ um.clues }}" >{{ um.clues }} - {{ um.nombre }}</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p class="control">\r\n\t\t\t\t\t\t<button [disabled]="clues == -1 || unidadesMedicasSinAsignar.length == 0" [ngClass]="{ \'is-loading\': agregandoUnidadMedica }" class="button is-primary">\r\n\t\t\t\t\t\t\t<span class="icon"><i class="fa fa-plus"></i></span><span>Agregar</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</form>\r\n\t\t</footer>\r\n\r\n\t\t<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n\t\t\t<button class="delete" (click)="mensajeError.mostrar = false"></button>\r\n\t\t\t<b>Error:</b> {{ mensajeError.texto }}\r\n\t\t</div>\r\n\t</div>\r\n</div>'},"2cH3":function(t,e,a){"use strict";var n=a("/oeL"),i=a("rlar");a.n(i);a.d(e,"a",function(){return s});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=function(){function t(){this.cambiarEntornoSource=new i.Subject,this.entornoCambiado$=this.cambiarEntornoSource.asObservable()}return t.prototype.cambiarEntorno=function(){console.log("Cambiaste de entorno"),this.cambiarEntornoSource.next(!0)},t}();s=r([a.i(n.Injectable)()],s)},"2oZm":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("wW11"),o=a("HDjA"),c=a("9rY/"),l=a("pPg0"),d=a("LLho"),u=a("0PTN"),p=a("m57g"),m=a("qEG/");a.d(e,"a",function(){return g});var f=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},g=function(){function t(){}return t}();g=f([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,l.a,d.a,u.a],declarations:[c.a,p.a,m.a],providers:[s.a,o.a]})],g)},"2qAn":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.router=t}return t.prototype.canActivate=function(t,e){var a=JSON.parse(localStorage.getItem("usuario"));if(!a.permisos)return this.router.navigate(["/"]),!1;var n=a.permisos.split("|");for(var i in n)if(t.data.key&&t.data.key==n[i])return!0;return this.router.navigate(["/"]),!1},t}();o=r([a.i(n.Injectable)(),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},"2x2r":function(t,e){t.exports='<formulario #ctrl URL="sincronizar-recetas" titulo="Sincronizar receta" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Sincronizar recetas\'" [icono]="\'assets/hub-farmacia-sub.svg\'" [url]="\'/farmacia-subrrogada/sincronizar-recetas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()">\r\n    <div class="contenedor columns " style="height:100%">\r\n        <div class="column is-one-third" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <h1 class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> {{ctrl.moduloTitulo}}\r\n                    </h1>\r\n\r\n\r\n                </section>\r\n                <div style="padding: 1em;">\r\n                    <nav class="nav">\r\n                        <div class="nav-right nav-menu">\r\n                            <div class="nav-item">\r\n                                <div class="field is-grouped">\r\n                                    <p class="control" *ngIf="!tieneid" style="float:left">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                                    </p>\r\n                                    <p class="control" style="float:left">\r\n                                        <a class="button" (click)="ctrl.regresar()">\r\n                                            Regresar\r\n                                        </a>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n\r\n                    <h3 class="title">\r\n                        <i class="fa fa-file"></i>\r\n                         Datos del movimiento\r\n                    </h3>\r\n                    <div >\r\n                        <div class="field">\r\n                            <label class="label">Fecha del movimiento:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n\r\n                                <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_movimiento\' formControlName="fecha_movimiento" ngui-datetime-picker\r\n                                    [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-danger\': ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched}"\r\n                                    placeholder="YYYY-MM-DD" />\r\n\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Observaciones:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched}"\r\n                                    placeholder="Observaciones" formControlName="observaciones"></textarea>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="control" *ngIf="mostrarCancelado"> \r\n                            <!-- *ngIf -->\r\n                            <div class="field">\r\n                                <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                    <input type="checkbox" id="cancelado" class="styled" [checked]="ctrl.dato.get(\'cancelado\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'cancelado\').patchValue(ctrl.dato.get(\'cancelado\').value == \'1\' ? \'0\' : \'1\')">\r\n                                    <label for="cancelado">  Cancelado\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="field">\r\n                                <label class="label">Observaciones de cancelación:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched}"\r\n                                        placeholder="Observaciones de cancelacion" formControlName="observaciones_cancelacion"></textarea>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div formGroupName="movimiento_metadato">\r\n                            <div class="field"  >\r\n                                <label class="label">Turno:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <select class="select" name="turno" formControlName="turno_id" [ngClass]="{\'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched}">\r\n                                        <option *ngFor="let item of ctrl.turnos" value="{{item.id}}" [attr.selected]="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').value == item.id ">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <hr id="catalogos" (click)="ctrl.cargarCatalogo(\'turnos\', \'turnos\'); ">\r\n                    <h3 class="title">\r\n                        <i class="fa fa-user-md"></i>\r\n                        Datos de la receta\r\n                    </h3>\r\n\r\n                    <div >\r\n                        <nav class="panel" formGroupName="receta">\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Folio:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched}"\r\n                                                placeholder="folio" formControlName="folio">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Tipo de receta:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n                                                <select class="select" name="tipo_receta" formControlName="tipo_receta" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched}">\r\n                                                    <option *ngFor="let item of tipos_recetas" value="{{item.id}}" >{{ item.nombre }}</option>\r\n                                                </select>\r\n\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    \r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Fecha de receta:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_receta\' formControlName="fecha_receta" ngui-datetime-picker\r\n                                                [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched}"\r\n                                                placeholder="YYYY-MM-DD" />\r\n\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Imagen:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input type="file" (change)="ctrl.seleccionarImagenBase64($event, ctrl.dato.controls.receta.controls.imagen_receta)">\r\n                                            <input type="hidden" placeholder="Imagen de la receta" formControlName="imagen_receta">\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Doctor:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched}"\r\n                                                placeholder="Doctor" formControlName="doctor">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Paciente:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched}"\r\n                                                placeholder="Paciente" formControlName="paciente">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Diagnostico:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched}"\r\n                                                placeholder="Diagnostico" formControlName="diagnostico"></textarea>\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="block" *ngIf="ctrl.dato.controls.receta.controls.imagen_receta.value != \'\'">\r\n                                <a class="button is-primary is-outlined is-fullwidth" (click)="abrirModal(\'verFoto\')">\r\n                                    <span class="icon">\r\n                                        <i class="fa fa-eye"> </i> \r\n                                    </span> \r\n                                    &nbsp; Ver receta\r\n                                </a>\r\n                            </div>\r\n\r\n                            <div class="modal" id="verFoto">\r\n                                <div class="modal-background"></div>\r\n                                <div class="modal-content">\r\n                                    <p class="image is-4by3">\r\n                                        <img [src]="\'data:image/jpg;base64,\'+ctrl.dato.controls.receta.controls.imagen_receta.value" alt="Receta" />\r\n                                    </p>\r\n                                </div>\r\n                                <button type="button" class="modal-close" (click)="cancelarModal(\'verFoto\')"></button>\r\n                            </div>\r\n                        </nav>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- apartado de insumos -->\r\n        <div class="column" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <div class="hero-body">\r\n                        <a class="button  is-primary" style="position:absolute; top:5em; right:3em;" (click)="ctrl.cargarDatos(dato);  "><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                        <div class="container is-fluid">\r\n                            <h1 class="title">\r\n                                <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                                <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Insumos\r\n                            </h1>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                    <br>\r\n                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                </div>\r\n                <section class="section">\r\n\r\n                    <div class="field has-addons has-addons-centered" *ngIf="!tieneid">\r\n\r\n                        <p class="control">\r\n                            <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" id="buscarInsumo" value-property-name="clave"\r\n                                display-property-name="nombre" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                                (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                                type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n\r\n                        </p>\r\n\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div formArrayName="insumos">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos.controls; let i=index"  [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(230, 230, 232, 0.44)\' : \'\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <a *ngIf="!tieneid" class="is-danger" title="Quitar este elemento de la lista" style="float:right" (click)="ctrl.quitar_form_array(\'insumos\', i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                        <p>\r\n                                            <strong>\r\n                                                <span style="color:cornflowerblue">\r\n                                                    Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }} \r\n                                                </span>\r\n                                                Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.nombre.value}}\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="!ctrl.dato.controls.insumos.controls[i].controls.es_causes.value"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value"><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                        <a class="is-danger" title="Ver la lista de lotes de este articulo" style="float:right" (click)="ver_lotes_asignados(i)">\r\n                                            <span class="icon">\r\n                                                <i *ngIf="!mostrar_lote[i]" class="fa fa-plus"></i>\r\n                                                <i *ngIf="mostrar_lote[i]" class="fa fa-minus"></i>\r\n                                            </span>\r\n                                        </a>\r\n                                    </div>\r\n                                    <section *ngIf="mostrar_lote[i]">\r\n                                        <table class="table is-narrow is-bordered is-striped">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Lote</th>\r\n                                                    <th>Caducidad</th>\r\n                                                    <th>Codigo de barras</th>\r\n                                                    <th *ngIf="!tieneid">Existencia</th>\r\n                                                    <th>Cantidad</th>\r\n                                                    <th *ngIf="!tieneid"></th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody formArrayName="lotes">\r\n                                                <tr *ngFor="let val of ctrl.dato.controls.insumos.controls[i].controls.lotes.controls;  let i2 = index;">\r\n                                                    <td>{{val.value.lote}} </td>\r\n                                                    <td>{{val.value.fecha_caducidad}}</td>\r\n                                                    <td>{{val.value.codigo_barras}}</td>\r\n                                                    <td *ngIf="!tieneid">{{val.value.existencia}}</td>\r\n                                                    <td [formGroupName]="i2">\r\n                                                        <input *ngIf="!val.nuevo" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2)" type="number" step="1" min="0" max="{{val.value.existencia}}"\r\n                                                            placeholder="Cantidad" formControlName="cantidad">\r\n                                                        <input *ngIf="val.nuevo" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2)" type="number" step="1" min="0" \r\n                                                            placeholder="Cantidad" formControlName="cantidad"></td>\r\n                                                    <td *ngIf="!tieneid">\r\n                                                        <a class="is-danger" title="Quitar este lote" (click)="quitar_lote_insumo(i, val.value, i2)">\r\n                                                            <span class="icon">\r\n                                                                <i class="fa fa-trash-o"></i>\r\n                                                            </span>\r\n                                                        </a>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </section>\r\n                                    <nav class="level is-mobile">\r\n                                        <div class="level-left">\r\n                                            <a class="level-item">\r\n                                                <div class="field">\r\n                                                    <label class="label">Dosis:</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input type="text" class="input" formControlName="dosis" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.dosis.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.dosis.touched}">\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                            <a class="level-item">\r\n                                                <div class="field">\r\n                                                    <label class="label">Frecuencia (Horas):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input type="text" class="input" formControlName="frecuencia" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.frecuencia.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.frecuencia.touched}">\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                            <a class="level-item">\r\n                                                <div class="field">\r\n                                                    <label class="label">Duración:</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input type="text" class="input" formControlName="duracion" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.duracion.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.duracion.touched}">\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                            <a class="level-item">\r\n                                                <div class="field">\r\n                                                    <label class="label">Cant. recetada:</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input type="text" class="input" formControlName="cantidad_recetada" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_recetada.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_recetada.touched}">\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                            <a class="level-item">\r\n                                                <div class="field">\r\n                                                    <label class="label">Cant. surtida:</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad" >\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                        </div>\r\n                                    </nav>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n\r\n<div class="modal" id="verLotes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card" style="width: 60%;">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title" id="tituloModal"> </p>\r\n            <button type="button" class="delete" (click)="cancelarModal(\'verLotes\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <table class="table is-narrow is-bordered is-striped">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Lote</th>\r\n                        <th>Caducidad</th>\r\n                        <th>Codigo de barras</th>\r\n                        <th>Existencia</th>\r\n                        <th>Cantidad</th>\r\n                        <th *ngIf="es_unidosis">Existencia Unidosis</th>\r\n                        <th *ngIf="es_unidosis">Cantidad Unidosis</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lotes_insumo;  let i = index;">\r\n                        <td *ngIf="!item.nuevo">{{item.lote}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Lote" [(ngModel)]="item.lote"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.fecha_caducidad}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="date" placeholder="Fecha de caducidad" [(ngModel)]="item.fecha_caducidad"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.codigo_barras}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Codigo de barras" [(ngModel)]="item.codigo_barras"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.existencia}}</td>\r\n                        <td *ngIf="item.nuevo"></td>\r\n                        <td>\r\n                            <input class="input has-text-centered " type="number" step="1" min="0" max="{{item.existencia}}" placeholder="Cantidad" [(ngModel)]="item.cantidad">\r\n                        </td>\r\n\r\n                        <td *ngIf="!item.nuevo && es_unidosis">{{item.existencia_unidosis}}</td>\r\n                        <td *ngIf="item.nuevo && es_unidosis"></td>\r\n\r\n                        <td *ngIf="es_unidosis">\r\n                            <input class="input has-text-centered " type="number" step="1" min="0" max="{{item.cantidad_unidosis}}" placeholder="Cantidad Unidosis" [(ngModel)]="item.cantidad_unidosis">\r\n                        </td>\r\n\r\n                        <td *ngIf="item.nuevo">\r\n                            <a class="delete" (click)=eliminarLote(i)></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n                \r\n            </table>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-dark" (click)="agregarNuevoLote()">Agregar nuevo lote</a>                            \r\n            <a class="button is-success" (click)="agregarLoteIsumo()">Aceptar</a>\r\n            <a class="button" (click)="cancelarModal(\'verLotes\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},"39ze":function(t,e){t.exports='<menu-farmacia [modulo]="\'Entregas\'" [icono]="\'assets/icono-entregas.svg\'" [url]="\'/almacen/entregas\'"></menu-farmacia>\r\n\r\n\r\n\r\n<div class="is-fullwidth has-text-centered" style="padding-top:70px;" *ngIf="cargando">\r\n  <br>\r\n  <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n  <br>\r\n  <br>\r\n</div>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile is-parent is-12 ">\r\n      <div class="tile is-child notification is-dark">\r\n        \r\n        <div class="columns">\r\n          <div class="column" >\r\n            <div style="padding:1em;">Pedido no. <strong style="color:#FFF;">{{ id }}</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lotes: {{ lotesSurtidos.length  }} / {{ pedido.lista.length }}</div>\r\n          </div>\r\n          <div class="column is-4" style="text-align:center; ">\r\n            <div style="margin:1em;">\r\n            <a  class="button is-primary" style="width:45%; margin-right:5%;" (click)="surtir()"> <span class="icon"><i class="fa fa-check-circle"></i></span> <span>Surtir</span></a>\r\n            <a  class="button is-white"  style="width:45%"  routerLink="/almacen/entregas/"> Cancelar</a>\r\n            </div>\r\n          </div>\r\n        </div>       \r\n      </div>\r\n    </div>\r\n    <div class="tile">\r\n      <div class="tile is-parent ">\r\n        <div class="tile is-child notification is-white" >\r\n          <div class="contenedor-tabla" >\r\n                      \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em; ">\r\n              <thead>\r\n                  <tr  [ngClass]="{ \'filtro\': pedido.filtro.activo}">\r\n                    <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                    <th>\r\n                      <p class="control is-expanded">\r\n                        <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                        <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])">\r\n                      </p>\r\n                    </th>  \r\n                    \r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Surtido">Surt.</abbr></th>\r\n                    <th  style="width:21px !important; text-align: center; vertical-align: middle;">Surtido</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                <tr class="item" *ngFor="let item of pedido.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                    <div class="item-detalle">\r\n                      <div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }}</th>                                  \r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>      \r\n              </tbody>\r\n              <tbody *ngIf="pedido.filtro.activo">\r\n                <tr class="item"  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                    <div class="item-detalle">\r\n                      <div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">0</th>                                  \r\n                  <td style="width:21px !important; text-align:center; color: gray"><span class="icon"><i class="fa fa-minus-circle"></i></span></td>\r\n                </tr>   \r\n              </tbody>              \r\n            </table>\r\n            <paginacion style=" width:100%; height:auto; bottom:0; left:0px; background:#FFF;"\r\n                [total]="pedido.lista.length" \r\n                [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.paginacion.indice"\r\n                (onSiguiente)="pedido.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.paginaAnterior(); limpiarStock();" \r\n                (onListar)="pedido.listar($event);limpiarStock();" \r\n                *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n\r\n            <paginacion \r\n                [total]="pedido.filtro.lista.length" \r\n                [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                (onSiguiente)="pedido.filtro.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.filtro.paginaAnterior();  limpiarStock();" \r\n                (onListar)="pedido.filtro.listar($event); limpiarStock();" \r\n                *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n\r\n\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n      <div class="tile is-parent is-vertical ">\r\n        <div class="tile is-child notification" style="background:#CCC;">\r\n          <div class="contenedor-tabla">\r\n            \r\n            <table class="table" *ngIf="!cargando" style="font-size: 0.8em;" >\r\n              <thead>\r\n                <tr>\r\n                  <td colspan="5">\r\n                    <h1 class="subtitle"><span class="icon"><i class="fa fa-archive"></i></span> Existencias</h1>\r\n                  </td>\r\n\r\n                </tr>\r\n                <tr>\r\n                  <td colspan="5">\r\n                    <p class="control">\r\n                      <input class="input" type="text" placeholder="Código" #searchBoxStock (keyup)="buscarStock($event, searchBoxStock , searchBoxStock.value)" (focus)="searchBoxStock.select()" >\r\n                    </p>\r\n                  </td>\r\n\r\n                </tr>\r\n              \r\n                <tr>\r\n                  <th>Código</th>\r\n                  <th>Marca</th>\r\n                  <th>Lote</th>\r\n                  <th>Caducidad</th>\r\n                  <th><abbr title="Cantidad">Cant.</abbr></th>                \r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                  <tr  class="is-unselectable item" *ngFor="let item of listaStock" (click)="asignarStock(item)" [ngClass]="{ \'asignado\': item.asignado }">\r\n                                      \r\n                    <td>{{ item.codigo_barras }}</td>\r\n                    <td>{{ item.marca.nombre }}</td>\r\n                    <td>{{ item.lote }}</td>\r\n                    <td>{{ item.fecha_caducidad | date:\'dd/MM/y\' }}</td>\r\n                    <td style="width:78px !important;">{{ item.existencia }}</td>   \r\n                  </tr>  \r\n                  <tr *ngIf="claveNoSolicitada">\r\n                    <td colspan="5">La clave de este producto no fue solicitada en el pedido.</td>\r\n                  </tr> \r\n                  <tr *ngIf="listaStock == 0 && itemSeleccionado == null && !cargando && !claveNoSolicitada">\r\n                    <td colspan="5">Sin resultados.</td>\r\n                  </tr> \r\n                  <tr *ngIf="listaStock == 0 && itemSeleccionado != null && !cargando && !claveNoSolicitada">\r\n                    <td colspan="5">No hay stock.</td>\r\n                  </tr>                    \r\n              </tbody>  \r\n            </table>\r\n\r\n            <div class="is-fullwidth has-text-centered" style="padding-top:0px;" *ngIf="cargandoStock">\r\n              <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n              <br>\r\n              <br>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="tile is-child  notification is-white">\r\n          <div class="contenedor-tabla">\r\n            <table class="table" *ngIf="!cargando && itemSeleccionado != null" style="font-size: 0.8em;" >\r\n              <thead>\r\n                  <tr style="background: #00d1b2;">\r\n                    <th style="color:#FFF !important;">Código</th>\r\n                    <th style="color:#FFF !important;">Marca</th>\r\n                    <th style="color:#FFF !important;">Lote</th>\r\n                    <th style="color:#FFF !important;">Caducidad</th>\r\n                    <th style="color:#FFF !important;"><abbr title="Cantidad">Cant.</abbr></th>  \r\n                    <th></th>              \r\n                  </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th colspan="4" style="text-align:right">\r\n                    <span *ngIf="itemSeleccionado.totalStockAsignado == itemSeleccionado.cantidad"><span class="icon is-small" ><i class="fa fa-check-circle"></i></span> <span>Completo &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> Total </span>\r\n                  </th>\r\n                  <td style="text-align:center">{{ itemSeleccionado.totalStockAsignado || 0 }} / {{ itemSeleccionado.cantidad }}</td>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                  <tr  class="is-unselectable" *ngFor="let item of itemSeleccionado.listaStockAsignado">\r\n                                      \r\n                    <td>{{ item.codigo_barras}}</td>\r\n                    <td>{{ item.marca.nombre }}</td>\r\n                    <td>{{ item.lote }}</td>\r\n                    <td>{{ item.fecha_caducidad | date:\'dd/MM/y\' }}</td>\r\n                    <td style="width:78px !important;">\r\n                        <p class="control is-expanded">\r\n                        <input class="input is-small has-text-centered"  type="number" min="1" max="{{item.existencia}}" placeholder="Cant" [(ngModel)]="item.cantidad" (change)="validarItemStock(item, true)" (keyup)="validarItemStock(item)">\r\n                        </p>\r\n                    </td> \r\n                    <td style="vertical-align: middle;" class="has-text-centered"><a  class="is-danger" (click)="eliminarStock(i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>                    \r\n                  </tr>\r\n                  \r\n                      \r\n              </tbody>  \r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n  </div>\r\n</div>\r\n  \r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n'},"3fy6":function(t,e){t.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " \'is-primary\' " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    \r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Alta Paciente\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n             <section class="section">\r\n                <form name="form" novalidate [formGroup]="pacienteEgreso"  (ngSubmit)="enviar()">     \r\n                \r\n                  <section class="section" style="background-color: #00d1b2;">\r\n                    <div class="container">\r\n                      <div class="heading">\r\n                        <h1 class="title" style="color: #FFF">Datos del Paciente</h1>\r\n                        <h2 class="subtitle" style="color: #FFF">\r\n                          ID: {{ id_paciente }}<BR>\r\n                          NOMBRE: {{ nombre_paciente }} <BR>\r\n                          LOCALIDAD: {{ localidad_paciente }}<BR>\r\n                          FECHA DE INGRESO: {{ fecha_ingreso}}<br>\r\n                          AREA: {{ area_ingreso}}\r\n\r\n                        </h2>\r\n                      </div>\r\n                    </div>\r\n                  </section>\r\n\r\n                  <br>\r\n                  <div class="control is-grouped">  \r\n                    \r\n                    <p class="control is-expanded has-icon has-icon-right">\r\n                      <label class="label">Motivo Egreso</label> \r\n                      <span class="select is-fullwidth">\r\n                            <select  formControlName="motivo_egreso_id" name="motivo_egreso_id"  >\r\n                                <option *ngFor="let item of MotivoEgreso" value="{{item.id}}">{{ item.descripcion }} </option>\r\n                            </select>\r\n                            \r\n                        </span> \r\n                        <span class="icon is-small" *ngIf="pacienteEgreso.get(\'motivo_egreso_id\').hasError(\'required\') && pacienteEgreso.get(\'motivo_egreso_id\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pacienteEgreso.get(\'motivo_egreso_id\').hasError(\'required\') && pacienteEgreso.get(\'motivo_egreso_id\').touched">Este campo es requerido.</span>\r\n                    </p>\r\n                    <p class="control is-expanded has-icon has-icon-right">\r\n                      <label class="label">Fecha de egreso</label>    \r\n                        <input class="input" type="text" placeholder="aaaa-mm-dd" formControlName="fecha_egreso"  readonly="readonly"> \r\n                        <span class="icon is-small" *ngIf="pacienteEgreso.get(\'fecha_egreso\').hasError(\'required\') && pacienteEgreso.get(\'fecha_egreso\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="pacienteEgreso.get(\'fecha_egreso\').hasError(\'required\') && pacienteEgreso.get(\'fecha_egreso\').touched">Este campo es requerido.</span>               \r\n                    </p>\r\n                    <p class="control is-expanded has-icon has-icon-right">\r\n                      <label class="label">hora de egreso</label>    \r\n                        <input class="input" type="text" placeholder="00:00" formControlName="hora_egreso" readonly="readonly">\r\n                        <span class="icon is-small" *ngIf="pacienteEgreso.get(\'hora_egreso\').hasError(\'required\') && pacienteEgreso.get(\'hora_egreso\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="pacienteEgreso.get(\'hora_egreso\').hasError(\'required\') && pacienteEgreso.get(\'hora_egreso\').touched">Este campo es requerido.</span>\r\n                    </p>\r\n                  </div>\r\n                  <div class="control is-grouped">  \r\n                    \r\n                    <p class="control is-expanded has-icon has-icon-right">\r\n                      <label class="label">Contrareferencia</label> \r\n                      <span class="select is-fullwidth">\r\n                            <select  formControlName="contrareferencia" name="contrareferencia" #contrareferencia (change)="referido(contrareferencia.value)">\r\n                                <option value="1" selected="selected">SI</option>\r\n                                <option value="2">NO</option>\r\n                            </select>\r\n                            \r\n                        </span> \r\n                        <span class="icon is-small" *ngIf="pacienteEgreso.get(\'contrareferencia\').hasError(\'required\') && pacienteEgreso.get(\'contrareferencia\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pacienteEgreso.get(\'contrareferencia\').hasError(\'required\') && pacienteEgreso.get(\'contrareferencia\').touched">Este campo es requerido.</span>\r\n                    </p>\r\n                    <p class="control is-expanded has-icon has-icon-right">\r\n                      <label class="label">Unidad Contrareferencia</label> \r\n                      <span class="select is-fullwidth">\r\n                            <select  formControlName="unidad_referencia" name="unidad_referencia" >\r\n                                <option *ngFor="let item of UnidadesMedicas" value="{{item.clues}}">{{ item.nombre }} - {{ item.clues }}</option>\r\n                            </select>\r\n                            \r\n                        </span> \r\n                        <span class="icon is-small" *ngIf="pacienteEgreso.get(\'unidad_referencia\').hasError(\'required\') && pacienteEgreso.get(\'unidad_referencia\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pacienteEgreso.get(\'unidad_referencia\').hasError(\'required\') && pacienteEgreso.get(\'unidad_referencia\').touched">Este campo es requerido.</span>\r\n                    </p>\r\n                    \r\n                  </div>\r\n                  <br><br>\r\n                  <div class="control is-grouped">\r\n                    <p class="control">\r\n                      <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="pacienteEgreso.invalid">Guardar</button>\r\n                    </p>\r\n                    \r\n                    <p class="control">\r\n                      <a class="button is-white" (click)="regresar()" >Regresar</a>\r\n                    </p>\r\n                  </div>\r\n\r\n              </form>\r\n            </section>  \r\n        </div>\r\n    </div>    \r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},"3jTA":function(t,e){t.exports='<listar #ctrl URL="movimientos?tipo=1&fecha_desde={{fecha_desde}}&fecha_hasta={{fecha_hasta}}&recibe={{recibe}}" titulo="Entrada  de almacén"></listar>\r\n<menu-farmacia [modulo]="\'Entradas  de almacén\'" [icono]="\'assets/icono-entradas.svg\'" [url]="\'/almacen/entradas-estandar\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%;">\r\n    <div class="column" style="padding:2em;  z-index: initial;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <nav class="level">\r\n                        <div class="level-left"></div>\r\n                        <!-- Right side -->\r\n                        <div class="level-right">\r\n                            <p class="level-item"><a class="button is-dark is-medium" routerLink="nuevo" *ngIf="ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nueva entrada</span></a></p>\r\n                            <p class="level-item"><a class="button is-primary is-medium" routerLink="nuevo" *ngIf="!ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nueva entrada</span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item">&nbsp;</p>\r\n                        </div>\r\n                    </nav>               \r\n                    <div class="container is-fluid">\r\n                        <span></span>\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Entradas  de almacén\r\n                            </h1>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <div class="control" style="z-index: 1000;">\r\n                                <div class="field">   \r\n                                    <label class="label">Desde:</label>                         \r\n                                    <input  style="width: 150px; z-index: 1000;" class="input is-medium" [(ngModel)]=\'fecha_desde\' ngui-datetime-picker date-only="true" placeholder="YYYY-MM-DD" />\r\n                                </div>\r\n                            </div>\r\n                            <div class="control is-expanded" style="z-index: 1000;">\r\n                                <div class="field">   \r\n                                    <label class="label">Hasta:</label>                         \r\n                                    <input style="width: 150px; z-index: 1000;" class="input is-medium" [(ngModel)]=\'fecha_hasta\' ngui-datetime-picker date-only="true" placeholder="YYYY-MM-DD" />\r\n                                </div>\r\n                            </div>\r\n                            <!--\r\n                            <div class="control is-expanded" *ngIf="!ctrl.cargando && ctrl.dato">                                \r\n                                <div class="field">\r\n                                    <label class="label">Turno:</label>\r\n                                    <div class="select is-medium">\r\n                                        <select class="select is-medium" [(ngModel)]="turno" #tr>\r\n                                            <option value="">Todos</option>\r\n                                            <option *ngFor="let val of ctrl.dato[ctrl.dato.length-1].turnos_disponibles" value="{{val.id}}" >{{ val.nombre }}</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="control is-expanded" *ngIf="!ctrl.cargando && ctrl.dato">\r\n                                <div class="field ">\r\n                                    <label class="label">Servicio:</label>\r\n                                    <div class="select is-medium ">\r\n                                        <select class="select is-medium" [(ngModel)]="servicio" #sr>\r\n                                            <option value="">Todos</option>\r\n                                            <option *ngFor="let val of ctrl.dato[ctrl.dato.length-1].servicios_disponibles" value="{{val.id}}" >{{ val.nombre }}</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            -->\r\n                            <div class="control is-expanded">\r\n                                <div class="field">   \r\n                                    <label class="label">Recibe:</label>                         \r\n                                    <input class="input is-medium" type="text" placeholder="Persona que recibe" [(ngModel)]="recibe">\r\n                                </div>\r\n                            </div>\r\n                            <div class="control">\r\n                                <div class="field">  \r\n                                <label class="label">&nbsp;</label>\r\n                                <button class="button is-default is-medium" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="recibe=\'\';fecha_desde=\'\'; fecha_hasta=\'\';" >Limpiar</button>\r\n                                </div>\r\n                            </div>\r\n                            <div class="control">\r\n                                <div class="field">  \r\n                                <label class="label">&nbsp;</label>\r\n                                <button class="button is-info is-medium" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.listar(1)" >Filtrar</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            \r\n        <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <span id="exportable">\r\n            <table class="table" *ngIf="!ctrl.cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th style=" text-align: center;"><abbr title="Folio">Fecha</abbr></th>\r\n                        <th style=" text-align: center;"><abbr title="Folio">Folio</abbr></th>\r\n                        <th>Insumos</th>\r\n                        <th>Recibe</th>\r\n                        <th>Usuario</th>\r\n                        <th style=" text-align: center;">Capturado</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada && ctrl.dato">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.fecha_movimiento }}</a></th>\r\n                        <th *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td *ngIf="item.numero_claves && item.numero_insumos && (i+1)<ctrl.dato.length"> <a routerLink="/almacen/entradas-estandar/ver/{{item.id}}"> <p> Claves: {{item.numero_claves}}</p> <p> Insumos: {{item.numero_insumos}}</p> </a> </td>\r\n                        <td *ngIf="!item.numero_claves && !item.numero_insumos && (i+1)<ctrl.dato.length"> No disponible</td>\r\n                        <td *ngIf="item.movimiento_metadato && (i+1)<ctrl.dato.length" style="vertical-align: middle;" ><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.persona_recibe }}</a></td>\r\n                        <td *ngIf="!item.movimiento_metadato && (i+1)<ctrl.dato.length" style="vertical-align: middle;" >No disponible</td>\r\n                        <td *ngIf="!item.movimiento_metadato && (i+1)<ctrl.dato.length" style="vertical-align: middle;" >No disponible</td>\r\n                        <td *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>                        \r\n                        <td *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                        <!--\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n                        -->\r\n                    </tr>\r\n                    <tr *ngIf="!ctrl.dato">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada && ctrl.dato">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;" *ngIf="item.movimiento_metadato"><a *ngIf="item.movimiento_metadato.servicio.nombre" routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.servicio.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.movimiento_metadato">No disponible</td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.movimiento_metadato"><a *ngIf="item.movimiento_metadato.turno.nombre" routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.movimiento_metadato.turno.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.movimiento_metadato">No disponible</td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.status }} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.created_at | date}} </a></td>\r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/entradas-estandar/ver/{{item.id}}">{{ item.updated_at | date}} </a></td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </span>\r\n        <div *ngIf="!ctrl.dato" style="height:130px;"></div>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},"3x/1":function(t,e){t.exports='<aside class="menu" style="padding: 1em;">\r\n    <div *ngFor="let item of menuAutorizado">\r\n        <p class="menu-label">{{ item.titulo }}</p>\r\n        <ul class="menu-list">\r\n            <li *ngFor="let modulo of item.modulos">\r\n                <a routerLink="{{ modulo.url }}" routerLinkActive="is-active">\r\n                    <span class="icon" ><i class="fa {{ modulo.icono }}"></i></span>&nbsp;&nbsp;<span>{{ modulo.titulo }}</span>\r\n                </a>\r\n            </li>    \r\n        </ul>\r\n    </div>\r\n        \r\n</aside>'},"3yDS":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".warning td{background:#ffd8e4;color:#a0003e;border-bottom:1px solid #a0003e}",""]),t.exports=t.exports.toString()},"4A07":function(t,e,a){"use strict";var n=a("/oeL"),i=a("hu6k");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.apiService=t,this.cargando=!1,this.mostrarLog=!1,this.logActualizacion=""}return t.prototype.ngOnInit=function(){},t.prototype.actualizarViaGit=function(){var t=this;this.apiService.actualizarViaGit().subscribe(function(e){t.cargando=!1,t.logActualizacion=e,t.mostrarLog=!0},function(e){t.cargando=!1,console.log(e)})},t}();o=r([a.i(n.Component)({selector:"app-actualizar-sistema",template:a("Ahcj"),styles:[a("W4JN")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},"4gLc":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"4iiM":function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" >\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:2em;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-plus"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Nuevo servidor\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="section">\r\n                <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input class="input is-medium" [(ngModel)]="servidor.id"  [ngClass]="{ \'is-danger\': errores.id != null}"  type="text" placeholder="ID" >\r\n                        \r\n                        <span class="icon is-small" *ngIf="errores.id == \'required\' || errores.id == \'unique\'">\r\n                        <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="errores.id == \'required\'">Por favor especifique el ID del servidor.</span>\r\n                        <span class="help is-danger" *ngIf="errores.id == \'unique\'">Este ID ya fue utilizado, por favor elija otro.</span>              \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input class="input is-medium" [(ngModel)]="servidor.nombre"  [ngClass]="{ \'is-danger\': errores.nombre != null}"  type="text" placeholder="Nombre" >\r\n                        \r\n                        <span class="icon is-small" *ngIf="errores.nombre == \'required\'">\r\n                        <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="errores.nombre == \'required\'">Por favor especifique el nombre del servidor.</span>\r\n                    </p>\r\n                </div>\r\n                <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input class="input is-medium" [(ngModel)]="servidor.secret_key"  [ngClass]="{ \'is-danger\': errores.secret_key != null}"  type="text" placeholder="Secret key" >\r\n                        \r\n                        <span class="icon is-small" *ngIf="errores.secret_key == \'required\'">\r\n                        <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="errores.secret_key == \'required\'">Por favor especifique el ID del servidor.</span>                            \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input class="input is-medium" [(ngModel)]="servidor.periodo_sincronizacion"  [ngClass]="{ \'is-danger\': errores.periodo_sincronizacion != null}"  type="text" placeholder="Periodo de sincronización (Horas)" >\r\n                        \r\n                        <span class="icon is-small" *ngIf="errores.periodo_sincronizacion == \'required\' || errores.periodo_sincronizacion == \'integer\'">\r\n                        <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="errores.periodo_sincronizacion == \'required\'">Por favor especifique el periodo de sincronización.</span>                            \r\n                        <span class="help is-danger" *ngIf="errores.periodo_sincronizacion == \'integer\'">Por favor el periodo de sincronizacion debe estar expresado en horas y en números enteros. Por ejemplo: 24.</span>                            \r\n                    </p>\r\n                </div>\r\n                <div class="field">\r\n                    <div class="control  ">\r\n                        <label class="checkbox">\r\n                        <input type="checkbox" [(ngModel)]="servidor.tiene_internet">\r\n                        Tiene internet\r\n                        </label> &nbsp; \r\n                        <label class="checkbox">\r\n                        <input type="checkbox" [(ngModel)]="servidor.principal">\r\n                        Es el principal\r\n                        </label>\r\n                    </div>\r\n                </div>   \r\n                <br>\r\n                    \r\n                <div class="control is-grouped">\r\n                    \r\n                    <p class="control">\r\n                        <a class="button is-medium is-primary " [ngClass]="{ \'is-loading\': enviando}" (click)="guardar()" >\r\n                        <span class="icon"><i class="fa fa-save"></i></span><span>Guardar</span>\r\n                        </a>\r\n                    </p><p class="control">\r\n                        <a class="button is-medium is-white " [ngClass]="{ \'is-disabled\': enviando}" routerLink="/panel-control/sync/servidores">Cancelar</a>\r\n                    </p>                    \r\n                </div>\r\n                           \r\n              \r\n              <br>\r\n              \r\n\r\n\r\n            </section>\r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br> \r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},"4n6J":function(t,e){t.exports='<formulario #ctrl URL="movimientos" titulo="Sincronizar receta" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Salida por receta\'" [icono]="\'assets/icono-salidas.svg\'" [url]="\'/almacen/salidas-recetas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()">\r\n    <div class="contenedor columns " style="height:100%">\r\n        <div class="column is-one-third" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <h1 *ngIf="!tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> {{ctrl.moduloTitulo}}\r\n                    </h1>\r\n                    <h1 *ngIf="tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> Folio {{ctrl.id}}\r\n                    </h1>\r\n\r\n\r\n                </section>\r\n                <div style="padding: 1em;">\r\n                    <nav class="nav">\r\n                        <div class="nav-right">\r\n                            <div class="nav-item">\r\n                                <div class="field is-grouped">\r\n                                    <p class="control" *ngIf="!tieneid" style="float:left">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                                    </p>\r\n                                    <p class="control" style="float:left">\r\n                                        <a *ngIf="tieneid" class="button is-primary is-inverted" (click)="imprimir()">\r\n                                            <span class="icon"><i class="fa fa-print"></i></span>\r\n                                        </a>\r\n                                        <a class="button" (click)="ctrl.regresar()">\r\n                                            Regresar\r\n                                        </a>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n\r\n                    <h3 class="title">\r\n                        <i class="fa fa-file"></i>\r\n                         Datos del movimiento\r\n                    </h3>\r\n                    <div >\r\n                        <div class="field">\r\n                            <label class="label">Fecha del movimiento:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n\r\n                                <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_movimiento\' formControlName="fecha_movimiento" ngui-datetime-picker\r\n                                    [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-danger\': ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched}"\r\n                                    placeholder="YYYY-MM-DD" />\r\n\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Observaciones:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched}"\r\n                                    placeholder="Observaciones" formControlName="observaciones"></textarea>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="control" *ngIf="mostrarCancelado">\r\n                            <!-- *ngIf -->\r\n                            <div class="field">\r\n                                <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                    <input type="checkbox" id="cancelado" class="styled" [checked]="ctrl.dato.get(\'cancelado\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'cancelado\').patchValue(ctrl.dato.get(\'cancelado\').value == \'1\' ? \'0\' : \'1\')">\r\n                                    <label for="cancelado">  Cancelado\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="field">\r\n                                <label class="label">Observaciones de cancelación:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched}"\r\n                                        placeholder="Observaciones de cancelacion" formControlName="observaciones_cancelacion"></textarea>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div formGroupName="movimiento_metadato">\r\n                            <div class="field"  >\r\n                                <label class="label">Turno:</label>\r\n                            </div><!-- SI carga los turnos -->\r\n                                <p  *ngIf="ctrl.turnos" class="control is-expanded  has-icon has-icon-right">\r\n                                    <select class="select" name="turno" formControlName="turno_id" [ngClass]="{\'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched}">\r\n                                        <option *ngFor="let item of ctrl.turnos.clues_turnos" value="{{item.id}}" [attr.selected]="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').value == item.id ">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <hr id="catalogos" (click)="ctrl.cargarCatalogo(\'turnos\', \'mis-turnos\');">\r\n                    <h3 class="title">\r\n                        <i class="fa fa-user-md"></i>\r\n                        Datos de la receta\r\n                    </h3>\r\n\r\n                    <div >\r\n                        <nav class="panel" formGroupName="receta">\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Folio:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched}"\r\n                                                placeholder="folio" formControlName="folio">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'folio\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'folio\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Tipo de receta:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n                                                <select class="select" name="tipo_receta" formControlName="tipo_receta" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched}">\r\n                                                    <option *ngFor="let item of tipos_recetas" value="{{item.id}}" >{{ item.nombre }}</option>\r\n                                                </select>\r\n\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'tipo_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'tipo_receta\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n\r\n                                    \r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Fecha de receta:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_receta\' formControlName="fecha_receta" ngui-datetime-picker\r\n                                                [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched}"\r\n                                                placeholder="YYYY-MM-DD" />\r\n\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'fecha_receta\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'fecha_receta\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class="column is-half">\r\n                                    <div class="field">\r\n                                        <label class="label">Imagen:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input type="file" (change)="ctrl.seleccionarImagenBase64($event, ctrl.dato.controls.receta.controls.imagen_receta)" accept="image/*" >\r\n                                            <input type="hidden" placeholder="Imagen de la receta" formControlName="imagen_receta">\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Doctor:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched}"\r\n                                                placeholder="Doctor" formControlName="doctor">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'doctor\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'doctor\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Paciente:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched}"\r\n                                                placeholder="Paciente" formControlName="paciente">\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'paciente\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'paciente\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="columns" style="width:100%">\r\n                                <div class="column ">\r\n                                    <div class="field">\r\n                                        <label class="label">Diagnostico:</label>\r\n                                        <p class="control is-expanded  has-icon has-icon-right">\r\n                                            <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched}"\r\n                                                placeholder="Diagnostico" formControlName="diagnostico"></textarea>\r\n                                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched">\r\n                                                <i class="fa fa-warning"></i>\r\n                                            </span>\r\n                                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'receta\').get(\'diagnostico\').hasError(\'required\') && ctrl.dato.get(\'receta\').get(\'diagnostico\').touched">Este campo es requerido.</span>\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class="block" *ngIf="ctrl.dato.controls.receta.controls.imagen_receta.value != \'\'">\r\n                                <a class="button is-primary is-outlined is-fullwidth" (click)="abrirModal(\'verFoto\')">\r\n                                    <span class="icon">\r\n                                        <i class="fa fa-eye"> </i> \r\n                                    </span> \r\n                                    &nbsp; Ver receta\r\n                                </a>\r\n                            </div>\r\n\r\n                            <div class="modal" id="verFoto">\r\n                                <div class="modal-background"></div>\r\n                                <div class="modal-content">\r\n                                    <p class="image is-4by3">\r\n                                        <img [src]="\'data:image/jpg;base64,\'+ctrl.dato.controls.receta.controls.imagen_receta.value" alt="Receta" />\r\n                                    </p>\r\n                                </div>\r\n                                <button type="button" class="modal-close" (click)="cancelarModal(\'verFoto\')"></button>\r\n                            </div>\r\n                        </nav>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- apartado de insumos -->\r\n        <div class="column" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <div class="hero-body">\r\n                        <nav class="level">\r\n                            <div class="level-left"></div>\r\n                            <!-- Right side -->\r\n                            <div class="level-right">\r\n                                <p class="level-item"><a class="button is-primary" (click)="ctrl.regresar()">Regresar</a></p>\r\n                                <p class="level-item" *ngIf="tieneid"><a class="button is-primary" routerLink="/almacen/salidas-recetas/nuevo" *ngIf="!ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nueva receta</span></a></p>\r\n                                <p class="level-item" *ngIf="tieneid"><a *ngIf="tieneid" class="button is-primary" (click)="imprimir()"><span class="icon"><i class="fa fa-print"></i></span></a></p>\r\n                                <p class="level-item" *ngIf="!tieneid">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid"> <span class="icon"><i class="fa fa-floppy-o" aria-hidden="true"></i></span> &nbsp; Guardar</button>\r\n                                </p>\r\n                                <p class="level-item"><a class="button is-primary" title="Actualizar" (click)="ctrl.cargarDatos(dato);"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                                <p class="level-item">&nbsp;</p>\r\n                            </div>\r\n                        </nav>\r\n                        \r\n                        <div class="container is-fluid">\r\n                            <h1 class="title">\r\n                                <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                                <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Insumos\r\n                            </h1>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                    <br>\r\n                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                </div>\r\n                <section class="section">\r\n\r\n                    <div class="field has-addons has-addons-centered" *ngIf="!tieneid">\r\n\r\n                        <p class="control">\r\n                            <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" id="buscarInsumo" value-property-name="clave"\r\n                                display-property-name="descripcion" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                                (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                                type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n\r\n                        </p>\r\n\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div formArrayName="insumos">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos.controls; let i=index"  [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(230, 230, 232, 0.44)\' : \'\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <a *ngIf="!tieneid" class="is-danger" title="Quitar este elemento de la lista" style="float:right" (click)="ctrl.quitar_form_array(ctrl.dato.controls.insumos,i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                        <p>\r\n                                            <strong>\r\n                                                <span style="color:cornflowerblue">\r\n                                                    Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }} \r\n                                                </span>\r\n                                                Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="!ctrl.dato.controls.insumos.controls[i].controls.es_causes.value"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value"><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                        <a class="is-danger" title="Ver la lista de lotes de este articulo" style="float:right" (click)="ver_lotes_asignados(i)">\r\n                                            <span class="icon">\r\n                                                <i *ngIf="!mostrar_lote[i]" class="fa fa-plus"></i>\r\n                                                <i *ngIf="mostrar_lote[i]" class="fa fa-minus"></i>\r\n                                            </span>\r\n                                        </a>\r\n                                    </div>\r\n                                    <section *ngIf="mostrar_lote[i]">\r\n                                        <table class="table is-narrow is-bordered is-striped">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Lote</th>\r\n                                                    <th>Caducidad</th>\r\n                                                    <th>Codigo de barras</th>\r\n                                                    <th *ngIf="!tieneid">Existencia</th>\r\n                                                    <th>Cantidad</th>\r\n                                                    <th *ngIf="!tieneid"></th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody formArrayName="lotes">\r\n                                                <tr *ngFor="let val of ctrl.dato.controls.insumos.controls[i].controls.lotes.controls;  let i2 = index;">\r\n                                                    <td>{{val.value.lote}} </td>\r\n                                                    <td>{{val.value.fecha_caducidad}}</td>\r\n                                                    <td>{{val.value.codigo_barras}}</td>\r\n                                                    <td *ngIf="!tieneid">{{val.value.existencia}}</td>\r\n                                                    <td [formGroupName]="i2">\r\n                                                        <input *ngIf="!val.nuevo" class="input has-text-centered" [ngClass]="{\'is-disabled\': tieneid}" (keypress)="quitar_punto($event)" (blur)="validar_cantidad_lote(i, val, i2)" type="number" step="1" min="0" max="{{val.value.existencia}}"\r\n                                                            placeholder="Cantidad" formControlName="cantidad">\r\n                                                        <input *ngIf="val.nuevo" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2)" (keypress)="quitar_punto($event)" type="number" step="1" min="0" \r\n                                                            placeholder="Cantidad" formControlName="cantidad"></td>\r\n                                                    <td *ngIf="!tieneid">\r\n                                                        <a class="is-danger" title="Quitar este lote" (click)="quitar_lote_insumo(i, val.value, i2)">\r\n                                                            <span class="icon">\r\n                                                                <i class="fa fa-trash-o"></i>\r\n                                                            </span>\r\n                                                        </a>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </section>\r\n                                    <div class="level-left">\r\n                                        <div class="columns is-flex-desktop" style="width: 100%">\r\n                                            <div class="column is-2">\r\n                                                <p class="control is-expanded">\r\n                                                <label class="label">Dosis:</label>\r\n                                                    <input type="text" autofocus class="input" formControlName="dosis" (keypress)="quitar_punto($event)"  [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.dosis.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.dosis.touched}">\r\n                                                </p>\r\n                                            </div>\r\n                                            <div class="column is-auto">\r\n                                                    <p class="control is-expanded">\r\n                                                    <label class="label">Frecuencia (Hrs):</label>\r\n                                                        <input type="text" class="input" formControlName="frecuencia" (keypress)="quitar_punto($event)"  [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.frecuencia.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.frecuencia.touched}">\r\n                                                    </p>\r\n                                            </div>\r\n                                            <div class="column is-2">\r\n                                                <p class="control is-expanded">\r\n                                                <label class="label">Duración (días):</label>\r\n                                                    <input type="text" class="input" formControlName="duracion" (keypress)="quitar_punto($event)" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.duracion.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.duracion.touched}">\r\n                                                </p>\r\n                                            </div>\r\n                                            <div class="column  is-auto">\r\n                                                <p class="control is-expanded">\r\n                                                <label class="label">Cant. recetada:</label>\r\n                                                    <input type="text" class="input" formControlName="cantidad_recetada" (keypress)="quitar_punto($event)" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_recetada.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_recetada.touched}">\r\n                                                </p>\r\n                                            </div>\r\n                                            <div class="column is-auto">\r\n                                                <p class="control is-expanded">\r\n                                                <label class="label">Cant. surtida:</label>\r\n                                                    <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}">\r\n                                                    <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad" >\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n\r\n<div class="modal" id="verLotes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card" style="width: 60%;">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title" id="tituloModal"> </p>\r\n            <button type="button" class="delete" (click)="cancelarModal(\'verLotes\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <table class="table is-narrow is-bordered is-striped">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Lote</th>\r\n                        <th>Caducidad</th>\r\n                        <th>Codigo de barras</th>\r\n                        <th>Existencia</th>\r\n                        <th>Cantidad (normal)</th>\r\n                        <!-- \r\n                        <th *ngIf="es_unidosis">Existencia Unidosis</th>\r\n                        <th *ngIf="es_unidosis">Cantidad Unidosis</th>\r\n                        -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lotes_insumo;  let i = index;">\r\n                        <td *ngIf="!item.nuevo">{{item.lote}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Lote" [(ngModel)]="item.lote"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.fecha_caducidad}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="date" placeholder="Fecha de caducidad" [(ngModel)]="item.fecha_caducidad"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.codigo_barras}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Codigo de barras" [(ngModel)]="item.codigo_barras"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.existencia}}</td>\r\n                        <td *ngIf="item.nuevo"></td>\r\n                        <td>\r\n                            <input class="input has-text-centered " type="number" step="1" min="0" max="{{item.existencia}}" (keyup)="comprobar_cant_lotes()" (keypress)="quitar_punto($event)" (change)="comprobar_cant_lotes()" placeholder="Cantidad" [(ngModel)]="item.cantidad">\r\n                        </td>\r\n\r\n                        <!-- <td *ngIf="!item.nuevo && es_unidosis">{{item.existencia_unidosis}}</td> -->\r\n                        <td *ngIf="item.nuevo && es_unidosis"></td>\r\n\r\n                        <!-- \r\n                        <td *ngIf="es_unidosis">\r\n                            <input class="input has-text-centered " type="number" step="1" min="0" max="{{item.cantidad_unidosis}}" placeholder="Cantidad Unidosis" [(ngModel)]="item.cantidad_unidosis">\r\n                        </td> \r\n                        -->\r\n\r\n                        <td *ngIf="item.nuevo">\r\n                            <a class="delete" (click)=eliminarLote(i)></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n                \r\n            </table>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-dark" (click)="agregarNuevoLote()">Agregar nuevo lote</a>                            \r\n            <a class="button is-success" [ngClass]="{\'is-disabled\':!sum_cant_lotes}"  (click)="agregarLoteIsumo()">Aceptar</a>\r\n            <a class="button" (click)="cancelarModal(\'verLotes\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},"4sn+":function(t,e){t.exports='<listar #ctrl URL="inventario?buscar_en={{buscar_en}}&seleccionar={{seleccionar}}&tipo={{tipo}}" titulo="Inventario"></listar>\r\n<app-menu-inventario [modulo]="\'Existencia de insumos médicos\'" [icono]="\'assets/icono-salidas.svg\'" [url]="\'/almacen/inventario\'"></app-menu-inventario>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                     <nav class="level">\r\n                        <div class="level-left">\r\n                            <p class="level-item">&nbsp;</p>\r\n                            <p class="level-item b-checkbox is-info is-circular">\r\n                                <input class="styled" type="radio" id="buscar_en_mis_claves" #claves [checked]="buscar_en == \'MIS_CLAVES\'" (click)="buscar_en = \'MIS_CLAVES\'" [value]="\'MIS_CLAVES\'" name="buscar_en">                                    \r\n                                <label for="buscar_en_mis_claves">\r\n                                    <span class="tag is-large" [ngClass]="{\'is-dark\':buscar_en == \'MIS_CLAVES\'}">Mis claves</span>\r\n                                </label> \r\n                            </p>\r\n                            <p class="level-item  b-checkbox is-circular">\r\n                                <input class="styled" type="radio" id="buscar_en_todas_claves" #claves [checked]="buscar_en == \'TODAS_LAS_CLAVES\'" (click)="buscar_en = \'TODAS_LAS_CLAVES\'" [value]="\'TODAS_LAS_CLAVES\'" name="buscar_en">                                    \r\n                                <label for="buscar_en_todas_claves">\r\n                                    <span class="tag is-large" [ngClass]="{\'is-dark\':buscar_en == \'TODAS_LAS_CLAVES\'}">Todas las claves</span>\r\n                                </label>    \r\n                            </p>\r\n                            <p class="level-item">&nbsp;</p>\r\n                            <p class="level-item field">\r\n                                <span class="control">\r\n                                    <span class="select is-medium">\r\n                                        <select name="seleccion" #s (change)="seleccionar = s.value">\r\n                                            <option value="TODO" selected>Todo</option>\r\n                                            <option value="EXISTENTE">Existentes</option>\r\n                                            <option value="NO_EXISTENTE">No existentes</option>\r\n                                        </select>\r\n                                    </span>\r\n                                </span>\r\n                            </p>\r\n                            <p class="level-item field">\r\n                                <span class="control">\r\n                                    <span class="select is-medium">\r\n                                        <select name="seleccion" #t (change)="tipo = t.value">\r\n                                            <option value="TODO" selected>Todos los insumos</option>\r\n                                            <option value="ME">Medicamentos</option>\r\n                                            <option value="MC">Material de curación</option>\r\n                                            <option value="AD">Auxiliar diagnóstico</option>\r\n                                        </select>\r\n                                    </span>\r\n                                </span>\r\n                            </p>\r\n                            <p class="level-item">&nbsp;</p>\r\n                            <p class="level-item">\r\n                                <button class="button is-medium" (click)="ctrl.listar(1)"><span class="icon"><i class="fa fa-filter"></i></span> <span>Filtrar</span></button>\r\n                            </p> \r\n                        </div>\r\n                        <!-- Right side -->\r\n                        <div class="level-right">\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                            \r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item">&nbsp;</p>\r\n                        </div>\r\n                    </nav>\r\n                    <div class="container is-fluid">\r\n                        <span></span>\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Inventario\r\n                            </h1>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <span id="exportable">\r\n                <table class="table" *ngIf="!ctrl.cargando" style="min-width:100%; font-size:1.2em;">\r\n                    <thead>\r\n                        <tr>\r\n                            <th style="text-align: center;">Clave</th>\r\n                            <th>Descripción</th>\r\n                            <th title="Consumo Promedio del Día">C.P.D.</th>\r\n                            <th title="Consumo Promedio Semanal">C.P.S.</th>\r\n                            <th title="Consumo Promedio Mensual">C.P.M.</th>\r\n                            <th style="text-align: right;">Existencia</th>\r\n                            <th style="text-align: right;">Existencia Unidosis</th>\r\n                            <th style="text-align: center;">Actualizado</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody *ngIf="!ctrl.busquedaActivada">\r\n                        <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                            <th style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.clave_insumo_medico }}</a></th>\r\n                            <td style="vertical-align: middle;">\r\n                                <a (click)="select_insumo_autocomplete(item)">\r\n                                    <p class="title is-5"> <small>{{ item.descripcion }} </small></p>\r\n                                        <p class="subtitle is-6">\r\n                                            <label *ngIf="item.es_causes==1" class="tag is-success" ><strong>Causes </strong></label>\r\n                                            <label *ngIf="item.es_causes==0" class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);">\r\n                                                <strong>No Causes </strong> \r\n                                            </label>\r\n                                            <label *ngIf="item.es_unidosis==1" class="tag is-warning" ><strong>Unidosis</strong></label>\r\n                                        </p>\r\n                                </a>\r\n                            </td>\r\n                            <td>--</td>\r\n                            <td>--</td>\r\n                            <td>--</td>\r\n                            <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)" style="font-size:1.2em;" class="help" [ngClass]="{\'is-danger\': item.existencia == 0}">{{ item.existencia }} </a></td>\r\n                            <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)" style="font-size:1.2em;" class="help" [ngClass]="{\'is-danger\': item.existencia_unidosis == 0}">{{ item.existencia_unidosis }} </a></td>\r\n                            <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.updated_at | date}} </a></td>\r\n                        </tr>\r\n                        <tr *ngIf="ctrl.dato.length == 0">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                        </tr>\r\n                    </tbody>\r\n                    <tbody *ngIf="ctrl.busquedaActivada">\r\n                        <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                            <th style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.clave_insumo_medico }}</a></th>\r\n                            <td style="vertical-align: middle;">\r\n                                <a (click)="select_insumo_autocomplete(item)">\r\n                                    <p class="title is-5"> <small>{{ item.descripcion }} </small></p>\r\n                                        <p class="subtitle is-6">\r\n                                            <label *ngIf="item.es_causes==1" class="tag is-success" ><strong>Causes </strong></label>\r\n                                            <label *ngIf="item.es_causes==0" class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);">\r\n                                                <strong>No Causes </strong> \r\n                                            </label>\r\n                                            <label *ngIf="item.es_unidosis==1" class="tag is-warning" ><strong>Unidosis</strong></label>\r\n                                        </p>\r\n                                </a>\r\n                            </td>\r\n                            <td>--</td>\r\n                            <td>--</td>\r\n                            <td>--</td>\r\n                            <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)" style="font-size:1.2em;" class="help" [ngClass]="{\'is-danger\': item.existencia == 0}">{{ item.existencia }} </a></td>\r\n                            <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)" style="font-size:1.2em;" class="help" [ngClass]="{\'is-danger\': item.existencia_unidosis == 0}">{{ item.existencia_unidosis }} </a></td>\r\n                            <td style="vertical-align: middle; text-align: center;"><a (click)="select_insumo_autocomplete(item)">{{ item.updated_at | date}} </a></td>\r\n                        </tr>\r\n                        <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </span>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="modal" id="verLotes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card" style="width: 60%;">\r\n        <header class="modal-card-head" style="background: #00d1b2;">\r\n            <p class="modal-card-title" style="width: 200px; color:#FFF;">\r\n                <span class="icon is-medium"><i class="fa fa-medkit"></i></span> &nbsp; \r\n                <span class="title" style="color:#FFF;">Insumo médico</span> \r\n            </p>\r\n            <button type="button" class="delete" (click)="cancelarModal(\'verLotes\');"></button>\r\n        </header>\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title" id="tituloModal" style="width: 200px"> </p>\r\n        <!--     <button type="button" class="delete" (click)="cancelarModal(\'verLotes\');"></button> -->\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <label class="label">Lotes disponibles:</label>\r\n            <table class="table is-narrow is-bordered is-striped">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Lote</th>\r\n                        <th>Caducidad</th>\r\n                        <th>Código de barras</th>\r\n                        <th>Existencia</th>\r\n                        <th>Existencia Unidosis</th> \r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lotes_insumo;  let i = index;">\r\n                        <td>{{item.lote}}</td>\r\n                        <td>{{item.fecha_caducidad}}</td>\r\n                        <td>{{item.codigo_barras}}</td>\r\n                        <td>{{item.existencia}}</td>\r\n                        <td>{{item.existencia_unidosis}}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="cancelarModal(\'verLotes\');">Aceptar</a>\r\n            <a class="button" (click)="cancelarModal(\'verLotes\');">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},"4u/i":function(t,e){t.exports='<menu-equipamiento></menu-equipamiento>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},"54EC":function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n\t\t\r\n\t\t<div style="background: #FFF; border-radius: 1em; overflow: hidden; margin-top:1em;">\r\n\t\t\t\r\n\t\t\t<section class="hero is-primary" [ngClass]="{ \'is-success\': pedido.proveedor_id != null}">\r\n\t\t\t\t<h1 class="title" style="margin:0.5em;" *ngIf="pedido.proveedor_id == null">\r\n\t\t\t\t\t<span class="icon is-medium"><i class="fa fa-check-square-o"></i></span> Asignar proveedor Pedido alterno \r\n\t\t\t\t</h1>\r\n\t\t\t\t<h1 class="title" style="margin:0.5em;" *ngIf="pedido.proveedor_id != null">\r\n\t\t\t\t\t<span class="icon is-medium"><i class="fa fa-check-circle"></i></span> Proveedor asignado a pedido alterno\r\n\t\t\t\t</h1>\r\n\t\t\t</section>\r\n\t\t\r\n\t\t\t<div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<br>\r\n\t\t\t</div>\r\n\t\t\t<table class="table"  *ngIf="!cargando">\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Folio:</th>\r\n\t\t\t\t\t\t<td>{{pedido.datosImprimir.folio}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Almacén:</th>\r\n\t\t\t\t\t\t<td>{{pedido.datosImprimir.almacen_solicitante.nombre}} / {{pedido.datosImprimir.unidad_medica.nombre}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Nombre del pedido:</th>\r\n\t\t\t\t\t\t<td>{{pedido.datosImprimir.descripcion}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Fecha:</th>\r\n\t\t\t\t\t\t<td>{{pedido.datosImprimir.fecha}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Observaciones:</th>\r\n\t\t\t\t\t\t<td>{{pedido.datosImprimir.observaciones}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t\t<hr>\r\n\t\t\t<table class="table"  *ngIf="!cargando">\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Proveedor:</th>\r\n\t\t\t\t\t\t<td colspan="2">\r\n\t\t\t\t\t\t\t<div class="control is-expanded " [ngClass]="{ \'is-loading\': cargandoProveedores }">\r\n\t\t\t\t\t\t\t\t<div class="select is-fullwidth">\r\n\t\t\t\t\t\t\t\t\t<select>\r\n\t\t\t\t\t\t\t\t\t\t<option value ="-1">Selecciona un proveedor</option>\r\n\t\t\t\t\t\t\t\t\t\t<option *ngFor="let item of proveedores" value="{{item.id}}">{{ item.nombre }}</option>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Firma 1:</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div class="field">\r\n\t\t\t\t\t\t\t\t<div class="control">\r\n\t\t\t\t\t\t\t\t\t<input class="input" type="text" placeholder="Nombre">\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div class="field">\r\n\t\t\t\t\t\t\t\t<div class="control">\r\n\t\t\t\t\t\t\t\t\t<input class="input" type="text" placeholder="Cargo">\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Firma 2:</th>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div class="field">\r\n\t\t\t\t\t\t\t\t<div class="control">\r\n\t\t\t\t\t\t\t\t\t<input class="input" type="text" placeholder="Nombre">\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<div class="field">\r\n\t\t\t\t\t\t\t\t<div class="control">\r\n\t\t\t\t\t\t\t\t\t<input class="input" type="text" placeholder="Cargo">\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t</tbody>\t\r\n\t\t\t</table>\r\n\t\t\t<hr>\r\n\t\t\t<div class="control " style="padding-left:10px;" *ngIf="!cargando">\t\t\t\r\n\t\t\t\t\t<a class="button is-success" *ngIf="pedido.proveedor_id == null" title="Asignar Proveedor" (click)="asignar(); " [ngClass]="{\'is-loading\': asignando}" >\r\n\t\t\t\t\t\t<span class="icon"><i class="fa fa-check"></i></span> &nbsp; Asignar proveedor\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<a class="button is-white" title="Imprimir Excel" (click)="imprimirExcel();" [ngClass]="{\'is-disabled\': asignando}">\r\n\t\t\t\t\t\t<span class="icon"><i class="fa fa-file-excel-o"></i></span> &nbsp; Excel\r\n\t\t\t\t\t</a>\t\t\t\r\n\t\t\t\t\t<a class="button is-white  " title="Imprimir PDF" (click)="mostrarDialogo(); " [ngClass]="{\'is-disabled\': asignando}">\r\n\t\t\t\t\t\t<span class="icon"><i class="fa fa-print"></i></span> &nbsp; PDF\r\n\t\t\t\t\t</a>\t\t\t\t\r\n\t\t\t\t\t<a class="button is-white" routerLink="/administrador-central/validacion-pedidos-alternos/" [ngClass]="{\'is-disabled\': asignando}" >Regresar</a>\t\t\t                \r\n\t\t\t</div>\r\n\t\t\t<section>\r\n\t\t\t\t<div class="control is-grouped">\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t\t<br>\r\n\t\t<div class="contenedor-pedido" >\r\n\t\t\t<div class="top-bar" [ngClass]="{\'is-primary\':!pedido.filtro.activo,\'is-dark\': pedido.filtro.activo }">\r\n\t\t\t\t<span *ngIf="!pedido.filtro.activo">\r\n\t\t\t\t\tClaves: {{ pedido.lista.length | number }}\r\n\t\t\t\t\tInsumos: {{pedido.totalInsumos | number}} \r\n\t\t\t\t\tTotal: $ {{ pedido.totalMonto | number: \'1.2-2\' }}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span *ngIf="pedido.filtro.activo"><span class="icon"><i class="fa fa-search"></i></span> Resultados: {{ pedido.filtro.lista.length }}</span>\r\n\t\t\t\t<!--a class="button is-primary  is-pulled-right" [ngClass]="{ \'is-inverted\': pedido.filtro.activo }" style="margin-top:-0.25em;" title="Recepciones" (click)="toggleModalRecepciones(); ">\r\n\t\t\t\t\t<span class="icon"><i class="fa fa-file"></i></span><span>Recepciones: {{pedido.datosImprimir.recepciones.length}}</span>\r\n\t\t\t\t</a-->\r\n\t\t\t\t<a *ngIf="pedido.status == \'EX\' && pedido.datosImprimir.tipo_pedido_id == \'PA\'" class="button is-danger is-pulled-right" (click)="mostrarDialogoCancelarPedido()"> <span class="icon"><i class="fa fa-ban"></i></span> <span>Cancelar Pedido</span></a>\r\n\t\t\t</div> \r\n\r\n\t\t\t<div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n\t\t\t\t<br>\r\n\t\t\t\t<span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n\t\t\t\t<br>\r\n\t\t\t\t<br>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em;">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr  >\r\n\t\t\t\t\t\t<th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n\t\t\t\t\t\t<th class="is-hidden-mobile" style="width:118px;">\r\n\t\t\t\t\t\t<p class="control is-expanded" >\r\n\t\t\t\t\t\t\t<input type="hidden" #searchBoxClavePrevia >\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxClave, searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t<th class="is-hidden-tablet">\r\n\t\t\t\t\t\t<p class="control is-expanded">\r\n\t\t\t\t\t\t\t<input type="hidden" #searchBoxDescripcionClavePrevia >\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</th>  \r\n\t\t\t\t\t\t<th style="vertical-align: middle;" class="is-hidden-mobile is-hidden-tablet-only" >Descripcion</th>                  \r\n\t\t\t\t\t\t<th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n\t\t\t\t\t\t<th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody *ngIf="!pedido.filtro.activo">\r\n\r\n\t\t\t\t\t<tr   *ngFor="let item of pedido.paginacion.lista; let i = index;">\r\n\t\t\t\t\t<td class="has-text-centered">{{ item.lote }}</td>\r\n\t\t\t\t\t<td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n\t\t\t\t\t\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n\t\t\t\t\t\t<div style="line-height:1em;">\r\n\t\t\t\t\t\t<small>{{ item.descripcion }}</small>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style="padding: 0.5em 0 0.5em 0; ">\r\n\t\t\t\t\t\t<span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n\t\t\t\t\t\t<span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n\t\t\t\t\t\t<span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n\t\t\t\t\t\t<span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n\t\t\t\t\t\t<span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n\t\t\t\t\t\t\t<span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n\t\t\t\t\t\t\t<span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\r\n\r\n\t\t\t\t\t<td style="width:78px !important;">\r\n\t\t\t\t\t\t<p class="control is-expanded">\r\n\t\t\t\t\t\t\t{{item.cantidad | number}}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td style="width:78px !important;">\r\n\t\t\t\t\t\t<b><abbr>${{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n\t\t\t\t\t</td> \r\n\t\t\t\t\t</tr>      \r\n\t\t\t\t</tbody>\r\n\t\t\t\t<tbody *ngIf="pedido.filtro.activo">\r\n\t\t\t\t\t<tr  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;">\r\n\t\t\t\t\t<td class="has-text-centered">{{ item.lote }}</td>\r\n\t\t\t\t\t<td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n\t\t\t\t\t\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n\t\t\t\t\t\t<!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n\t\t\t\t\t\t<div style="line-height:1em;">\r\n\t\t\t\t\t\t<small>{{ item.descripcion }}</small>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style="padding: 0.5em 0 0.5em 0; ">\r\n\t\t\t\t\t\t<span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n\t\t\t\t\t\t<span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n\t\t\t\t\t\t<span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n\t\t\t\t\t\t<span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n\t\t\t\t\t\t<span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n\t\t\t\t\t\t\t<span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n\t\t\t\t\t\t\t<span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t<td style="width:78px !important;">\r\n\t\t\t\t\t\t<p class="control is-expanded">\r\n\t\t\t\t\t\t\t{{item.cantidad | number}}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td style="width:78px !important;">\r\n\t\t\t\t\t\t<b><abbr>${{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n\t\t\t\t\t</td> \r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>              \r\n\t\t\t</table>\r\n\t\t\t\r\n\t\t\t<paginacion \r\n\t\t\t\t\t[total]="pedido.lista.length" \r\n\t\t\t\t\t[paginasTotales]="pedido.paginacion.totalPaginas" \r\n\t\t\t\t\t[resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n\t\t\t\t\t[paginaActual]="pedido.paginacion.paginaActual" \r\n\t\t\t\t\t[indicePaginas]="pedido.paginacion.indice"\r\n\t\t\t\t\t(onSiguiente)="pedido.paginaSiguiente()" \r\n\t\t\t\t\t(onAnterior)="pedido.paginaAnterior()" \r\n\t\t\t\t\t(onListar)="pedido.listar($event)" \r\n\t\t\t\t\t*ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n\t\t\t\r\n\t\t\t<paginacion \r\n\t\t\t\t\t[total]="pedido.filtro.lista.length" \r\n\t\t\t\t\t[paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n\t\t\t\t\t[resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n\t\t\t\t\t[paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n\t\t\t\t\t[indicePaginas]="pedido.filtro.paginacion.indice"\r\n\t\t\t\t\t(onSiguiente)="pedido.filtro.paginaSiguiente()" \r\n\t\t\t\t\t(onAnterior)="pedido.filtro.paginaAnterior()" \r\n\t\t\t\t\t(onListar)="pedido.filtro.listar($event)" \r\n\t\t\t\t\t*ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n\t\t\t<br>\r\n\t\t</div>\r\n      \r\n     \r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarImprimirDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogo()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-print"></i></span> Imprimir Pedido \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogo()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="columns is-multiline">\r\n          <div class="column is-one-quarter" *ngFor="let tipo of tiposSubPedidos">\r\n            <div class="card">\r\n              <header class="card-header">\r\n                <p class="card-header-title">\r\n                  {{subPedidos[tipo].titulo}}\r\n                </p>\r\n              </header>\r\n              <div class="card-content">\r\n                <div class="content">\r\n                  <strong>Total claves</strong>: {{subPedidos[tipo].claves | number}} <br>\r\n                  <strong>Total unidades</strong>: {{subPedidos[tipo].cantidad | number}} <br>\r\n                  <strong>Total monto</strong>: $ {{subPedidos[tipo].monto + ((subPedidos[tipo].tiene_iva)?+subPedidos[tipo].monto*16/100:0) | number:\'1.2-2\'}}\r\n                </div>\r\n              </div>\r\n              <footer class="card-footer">\r\n                <!--a class="card-footer-item" (click)="imprimir(tipo)" [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }">\r\n                  <span class="icon is-medium"><i class="fa fa-file-pdf-o"></i></span>&nbsp;<span>Descargar/Imprimir</span>\r\n                </a-->\r\n                <a class="button is-primary is-fullwidth" [ngClass]="{ \'is-loading\': cargandoPdf[tipo], \'is-inverted\': !cargandoPdf[tipo] }" title="Imprimir Pedido" (click)="imprimir(tipo)">\r\n                    <span class="icon"><i class="fa fa-file-pdf-o"></i></span> &nbsp; Descargar/Imprimir\r\n                </a>\r\n              </footer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        <div class="notification is-danger is-small" *ngIf="errorEnPDF">\r\n            <button class="delete" (click)="errorEnPDF = false"></button>        \r\n            <b>Error:</b> Ocurrio un error al generar el PDF<br><br>\r\n        </div>\r\n    </footer>\r\n  </div>\r\n</div>'},"58ut":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("WdPz"),o=a("gHRf");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,a,n){this.title=t,this.router=e,this.route=a,this.apiService=n,this.id=null,this.enviando=!1,this.cargando=!1,this.mensajeError=new o.a,this.mensajeExito=new o.a,this.errores={id:null,nombre:null,secret_key:null,tiene_internet:null,version:null,periodo_sincronizacion:null},this.permisos=[],this.todosSeleccionados=!1,this.servidor={id:"",nombre:"",secret_key:"",tiene_internet:!1,version:"",periodo_sincronizacion:null,principal:!1}}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Editar servidor / Panel de control"),this.mensajeError=new o.a,this.mensajeExito=new o.a,this.route.params.subscribe(function(e){t.id=e.id}),this.cargando=!0,this.apiService.verServidor(this.id).subscribe(function(e){t.servidor.tiene_internet=e.tiene_internet,t.servidor.principal=e.principal,t.servidor.secret_key=e.secret_key,t.servidor.periodo_sincronizacion=e.periodo_sincronizacion,t.servidor.nombre=e.nombre,t.servidor.id=e.id,t.cargando=!1},function(e){console.log(e),t.cargando=!1})},t.prototype.seleccionarTodos=function(){this.todosSeleccionados=!this.todosSeleccionados;for(var t in this.permisos)this.permisos[t].seleccionado=this.todosSeleccionados},t.prototype.guardar=function(){var t=this;this.enviando=!0,this.errores={id:null,nombre:null,secret_key:null,tiene_internet:null,version:null,periodo_sincronizacion:null},this.apiService.editarServidor(this.id,this.servidor).subscribe(function(e){t.enviando=!1,t.router.navigate(["/panel-control/sync/servidores/editar/"+e.id])},function(e){try{var a=e.json();switch(t.mensajeError=new o.a(!0),e.status){case 401:t.mensajeError.texto="No tiene permiso para realizar esta acción.";break;case 409:t.mensajeError.texto="Verifique la información marcada de color rojo";for(var n in a.error)for(var i in a.error[n])t.errores[n]=a.error[n][i];break;case 500:t.mensajeError.texto="500 (Error interno del servidor)";break;default:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}catch(e){t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}t.mensajeError.mostrar=!0,t.enviando=!1})},t}();d=c([a.i(n.Component)({selector:"app-editar",template:a("Xy5P"),styles:[a("ejtG")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.b&&i.b)&&u||Object,"function"==typeof(p=void 0!==r.a&&r.a)&&p||Object,"function"==typeof(m=void 0!==r.c&&r.c)&&m||Object,"function"==typeof(f=void 0!==s.a&&s.a)&&f||Object])],d);var u,p,m,f},"5Rc+":function(t,e,a){"use strict";a.d(e,"a",function(){return n});var n=function(){function t(){this.lista=[],this.paginaActual=1,this.resultadosPorPagina=5,this.totalPaginas=0,this.indice=[]}return t}()},"5bJP":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"5wAI":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("bKpL"),o=(a.n(s),a("rlar")),c=(a.n(o),a("/zHi")),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("0LBx")),h=a("2cH3"),v=a("gHRf");a.d(e,"a",function(){return _});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_=function(){function t(t,e,a,n){this.title=t,this.route=e,this.entregasService=a,this.cambiarEntornoService=n,this.cargando=!1,this.mensajeError=new v.a,this.mensajeExito=new v.a,this.status="PS",this.titulo="",this.icono="f",this.pedidos=[],this.paginaActual=1,this.resultadosPorPagina=5,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new o.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=5,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;switch(this.route.snapshot.url[0].path){case"finalizadas":this.status="FI",this.icono="fa-check-circle",this.route.snapshot.url.length>1?"completas"==this.route.snapshot.url[1].path?this.titulo="Finalizadas (completas)":"incompletas"==this.route.snapshot.url[1].path?this.titulo="Finalizadas (incompletas)":this.titulo="Finalizadas":this.titulo="Finalizadas";break;default:this.status="PS",this.titulo="Por surtir",this.icono="fa-inbox"}this.title.setTitle("Entregas / Farmacia"),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.listar(t.paginaActual)}),this.listar(1),this.mensajeError=new v.a,this.mensajeExito=new v.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.entregasService.buscar(t.status,e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):s.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.entregasService.buscar(this.status,t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1;var e=t.data;for(var n in e)e[n].created_at=e[n].created_at.replace(" ","T");a.resultadosBusqueda=e,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var i=0;i<a.paginasTotalesBusqueda;i++)a.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{var i=n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación."),403==n.status?a.mensajeError.texto=i.error:a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0,this.entregasService.lista(this.status,t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1;var a=t.data;for(var n in a)console.log(a[n].created_at.replace(" ","T")),a[n].created_at=a[n].created_at.replace(" ","T");e.pedidos=a,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var i=0;i<e.paginasTotales;i++)e.indicePaginas.push(i+1);console.log("Pedidos cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{var a=t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),403==t.status?e.mensajeError.texto=a.error:e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();_=b([a.i(n.Component)({selector:"farmacia-entregas-lista",template:a("rb23"),styles:[a("0SS7")],providers:[g.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==i.b&&i.b)&&x||Object,"function"==typeof(j=void 0!==r.c&&r.c)&&j||Object,"function"==typeof(P=void 0!==g.a&&g.a)&&P||Object,"function"==typeof(I=void 0!==h.a&&h.a)&&I||Object])],_);var x,j,P,I},"6Akt":function(t,e,a){"use strict";var n=a("5Rc+"),i=a("bm2B");a.d(e,"a",function(){return r});var r=(function(){function t(){}t}(),function(){function t(e){void 0===e&&(e=!1),this.lista=[],this.totalInsumos=0,this.totalMonto=0,this.totalMontoCauses=0,this.totalMontoNoCauses=0,this.totalMontoMaterialCuracion=0,this.paginacion=new n.a,this.activo=!1,this.cargando=!1,this.tieneError=function(t,e){return this.datos.get(t).hasError(e)&&this.datos.get(t).touched},this.inicializarDatos=function(t){void 0===t&&(t={});var e=t.fecha,a="";if(!t.fecha){var n=new Date,i=("0"+n.getDate()).slice(-2),r=("0"+(n.getMonth()+1)).slice(-2);e=n.getFullYear()+"-"+r+"-"+i}t.almacen_solicitante&&(a=t.almacen_solicitante),this.datos.setValue({almacen_solicitante:a,descripcion:"",observaciones:"",fecha:e})},this.obtenerDatosGuardar=function(){return{datos:this.datos.value,insumos:this.lista}},this.actualizarTotales=function(t){void 0===t&&(t=!1);var e;e=this.padre?this.padre:this,e.totalInsumos=0,e.totalMonto=0,e.totalMontoCauses=0,e.totalMontoNoCauses=0,e.totalMontoMaterialCuracion=0;var a=0,n=0,i=1;for(var r in e.lista)t&&(e.lista[r].lote=i++),e.totalInsumos+=+e.lista[r].cantidad,e.lista[r].monto&&(e.totalMonto+=e.lista[r].monto,"ME"==e.lista[r].tipo?e.lista[r].es_causes?e.totalMontoCauses+=e.lista[r].monto:e.totalMontoNoCauses+=e.lista[r].monto:"MC"==e.lista[r].tipo&&(e.totalMontoMaterialCuracion+=e.lista[r].monto,a+=e.lista[r].monto));a>0&&(n=16*a/100,e.totalMontoMaterialCuracion+=n,e.totalMonto+=n)},this.indexar=function(t){void 0===t&&(t=!0),t&&this.actualizarTotales(t),this.paginacion.totalPaginas=Math.ceil(this.lista.length/this.paginacion.resultadosPorPagina),this.paginacion.indice=[];for(var e=0;e<this.paginacion.totalPaginas;e++)this.paginacion.indice.push(e+1)},this.listar=function(t){void 0===t&&(t=1),this.paginacion.paginaActual=t;var e=(this.paginacion.paginaActual-1)*this.paginacion.resultadosPorPagina,a=e+this.paginacion.resultadosPorPagina;try{this.paginacion.lista=this.lista.slice(e,a)}catch(t){this.paginacion.lista=[]}},this.eliminarItem=function(t,e){var a=0;for(var n in this.lista){if(this.lista[n]===t){this.paginacion.lista.splice(e,1),this.lista.splice(a,1),this.indexar();var i=a+(this.paginacion.resultadosPorPagina-e)-1;if(this.lista[i]&&this.paginacion.lista.push(this.lista[i]),0==this.paginacion.lista.length&&(this.paginacion.paginaActual>1?this.listar(this.paginacion.paginaActual-1):this.listar(1)),this.padre){var r=this.padre.lista.indexOf(t),s=Math.ceil(r/this.padre.paginacion.resultadosPorPagina),o=(s-1)*this.padre.paginacion.resultadosPorPagina,c=r-o;if(this.padre.paginacion.paginaActual==s)this.padre.eliminarItem(t,c);else{var l=this.padre.paginacion.paginaActual;this.padre.listar(s),this.padre.eliminarItem(t,c),this.padre.listar(l),0==this.padre.paginacion.lista.length&&(this.padre.paginacion.paginaActual>1?this.padre.listar(this.padre.paginacion.paginaActual-1):this.padre.listar(1))}}return}a++}},e&&(this.filtro=new t,this.filtro.padre=this,this.fb=new i.FormBuilder,this.datos=this.fb.group({descripcion:["",[i.Validators.required]],fecha:["",[i.Validators.required]],almacen_solicitante:["",[i.Validators.required]],observaciones:""}),this.status="BR"),this.paginacion.resultadosPorPagina=10}return t.prototype.paginaSiguiente=function(){this.paginacion.paginaActual!=this.paginacion.totalPaginas&&this.listar(this.paginacion.paginaActual+1)},t.prototype.paginaAnterior=function(){1!=this.paginacion.paginaActual&&this.listar(this.paginacion.paginaActual-1)},t}())},"6K3r":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"6Nnr":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("ciSs"),d=a("LLho"),u=a("Px6Q"),p=a("c3Uv"),m=a("nUrr"),f=a("BFvY"),g=a("F1l5"),h=a("K4kt"),v=a("CWbX"),b=a("oSQj"),y=(a.n(b),a("evA2"));a.n(y);a.d(e,"a",function(){return x});var _=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},x=function(){function t(){}return t}();x=_([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,g.a,v.a,b.NguiAutoCompleteModule,y.NguiDatetimePickerModule],declarations:[p.a,m.a],providers:[f.a,h.a]})],x)},"6R1e":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("F4bb"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"configuracion",redirectTo:"configuracion/servicios",pathMatch:"full"},{path:"configuracion/servicios",children:[{path:"",component:r.a}],canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},"6Zkj":function(t,e){t.exports='<formulario #ctrl URL="unidades-medicas" titulo="UM / Catalogo" [dato]="dato"></formulario>\r\n<articulos-catalogo-menu></articulos-catalogo-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <a class="button  is-primary" style="position:absolute; top:10em; right:3em;" (click)="ctrl.cargarDatos(); "><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                            {{ctrl.moduloTitulo}} unidad médica\r\n                        </h1>\r\n\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section">\r\n                <!-- formulario -->\r\n                <form name="dato" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()">\r\n                    <div class="tabs is-boxed">\r\n                        <ul>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 1}">\r\n                                <a (click)="tab=1">\r\n                                    <span class="icon is-small"><i class="fa fa-file"></i></span>\r\n                                    <span>Datos de la unidad</span>\r\n                                </a>\r\n                            </li>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 2}">\r\n                                <a (click)="tab=2">\r\n                                    <span class="icon is-small"><i class="fa fa-home"></i></span>\r\n                                    <span>Servicios</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 1}">\r\n\r\n                        <div class="field" id="catalogos" (click)="ctrl.cargarCatalogo(\'servicios\', \'servicios\'); ">\r\n                            <label class="label">Clues:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'clues\').hasError(\'required\') && ctrl.dato.get(\'clues\').touched}"\r\n                                    placeholder="clues" formControlName="clues">\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'clues\').hasError(\'required\') && ctrl.dato.get(\'clues\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'clues\').hasError(\'required\') && ctrl.dato.get(\'clues\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Nombre:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched}"\r\n                                    placeholder="nombre" formControlName="nombre">\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>                    \r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 2}">\r\n                        \r\n                        <div formArrayName="clues_servicios">\r\n                            <div *ngFor="let item of ctrl.dato.controls.clues_servicios.controls; let i=index" class="column is-4" style="float:left">\r\n                                <nav class="panel" [formGroupName]="i">\r\n                                    <div class="panel-heading">\r\n                                        Servicio {{i + 1}} \r\n                                        <a style="float:right" class="is-danger" (click)="ctrl.quitar_form_array(\'clues_servicios\', i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>                                              \r\n                                    </div>\r\n                                    <label class="panel-block" >                                                  \r\n                                        <select class="select" name="servicio_id" formControlName="servicio_id" [ngClass]="{\'is-warning\': servicio_id?.length ==0 }">\r\n                                            <option *ngFor="let val of ctrl.servicios" value="{{val.id}}" >{{ val.nombre }}</option>\r\n                                        </select>\r\n                                        <span class="help is-danger" *ngIf="!ctrl.dato.controls.clues_servicios.controls[i].controls.servicio_id.valid">Este campo es requerido.</span>                                            \r\n                                    </label>                                    \r\n                                </nav>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="block">\r\n                            <a class="button is-primary is-outlined is-fullwidth" (click)="ctrl.agregar_form_array(\'clues_servicios\', form_clues_servicios)">\r\n                                <span class="icon">\r\n                                    <i class="fa fa-plus"> </i> \r\n                                </span> \r\n                                &nbsp; Agregar\r\n                            </a>\r\n                        </div>\r\n                        \r\n                    </div>\r\n\r\n                    \r\n\r\n                    <br><br>\r\n                    <div class="control is-grouped">\r\n                        <p class="control">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                        </p>\r\n                        <p class="control" *ngIf="ctrl.id">\r\n                            <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n                        </p>\r\n                    </div>\r\n\r\n                </form>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>'},"6oSH":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("bKpL"),o=(a.n(s),a("rlar")),c=(a.n(o),a("/zHi")),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("0LBx")),h=a("gHRf");a.d(e,"a",function(){return y});var v=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},b=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},y=function(){function t(t,e,a){this.title=t,this.route=e,this.entregasService=a,this.cargando=!1,this.mensajeError=new h.a,this.mensajeExito=new h.a,this.titulo="Historial",this.icono="f",this.pedidos=[],this.paginaActual=1,this.resultadosPorPagina=5,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new o.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=5,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Historial de entregas / Farmacia"),this.listar(1),this.mensajeError=new h.a,this.mensajeExito=new h.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.entregasService.buscar(null,e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):s.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.entregasService.buscar(null,t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1;var e=t.data;for(var n in e)e[n].created_at=e[n].created_at.replace(" ","T");a.resultadosBusqueda=e,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var i=0;i<a.paginasTotalesBusqueda;i++)a.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0,this.entregasService.lista(null,t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1;var a=t.data;for(var n in a)console.log(a[n].created_at.replace(" ","T")),a[n].created_at=a[n].created_at.replace(" ","T");e.pedidos=a,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var i=0;i<e.paginasTotales;i++)e.indicePaginas.push(i+1);console.log("Pedidos cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();y=v([a.i(n.Component)({selector:"app-historial",template:a("H6Ec"),styles:[a("qQhy")],providers:[g.a]}),b("design:paramtypes",["function"==typeof(_=void 0!==i.b&&i.b)&&_||Object,"function"==typeof(x=void 0!==r.c&&r.c)&&x||Object,"function"==typeof(j=void 0!==g.a&&g.a)&&j||Object])],y);var _,x,j},"7+oM":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"7EPX":function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <nav class="level">\r\n                            <div class="level-left">\r\n                                <h1 class="title">\r\n                                    <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-desktop"></i></span>\r\n                                    <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                                    Servidor local\r\n                                </h1>\r\n                            </div>\r\n                        </nav> \r\n                        <div class="block">                               \r\n                            <a class="button is-primary is-inverted" [ngClass]="{ \'is-loading\': sincronizandoEnLinea }" (click)="sincronizarEnLinea()">\r\n                                <span class="icon"><i class="fa fa-exchange"></i></span><span>Sincronizar en línea</span>\r\n                            </a>\r\n                            <a class="button is-primary is-inverted" [ngClass]="{ \'is-disabled\': sincronizandoEnLinea }" (click)="descargarSync()">\r\n                                <span class="icon"><i class="fa fa-download"></i></span><span>Descargar sincronización</span>\r\n                            </a>\r\n                            <a class="button is-primary is-inverted" [ngClass]="{ \'is-disabled\': sincronizandoEnLinea }" (click)="mostrarModalSubirArchivoSync = true;">\r\n                                <span class="icon"><i class="fa fa-upload"></i></span><span>Cargar confirmación</span>\r\n                            </a>\r\n                        </div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n                        <!--\r\n                        <nav class="level">\r\n\t\t\t\t\t\t\t<p class="level-item has-text-centered">\r\n\t\t\t\t\t\t\t\t<a class="button is-primary is-inverted" [ngClass]="{ \'is-loading\': sincronizandoEnLinea }" (click)="sincronizarEnLinea()">\r\n\t\t\t\t\t\t\t\t\t<span class="icon"><i class="fa fa-exchange"></i></span><span>Sincronizar en línea</span>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</p>\r\n                            <p class="level-item has-text-centered">\r\n                                <a class="button is-primary is-inverted" [ngClass]="{ \'is-disabled\': sincronizandoEnLinea }" (click)="descargarSync()">\r\n                                    <span class="icon"><i class="fa fa-download"></i></span><span>Descargar sincronización</span>\r\n                                </a>\r\n                            </p>\r\n                            <p class="level-item has-text-centered">\r\n                                <a class="button is-primary is-inverted" [ngClass]="{ \'is-disabled\': sincronizandoEnLinea }">\r\n                                    <span class="icon"><i class="fa fa-upload"></i></span><span>Cargar confirmación</span>\r\n                                </a>\r\n                            </p>\r\n                        </nav>-->\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section >\r\n                <table class="table">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t<th>SERVIDOR</th>\r\n\t\t\t\t\t\t\t<th>NOMBRE</th>\r\n\t\t\t\t\t\t\t<th>FECHA DE GENERACIÓN</th>\r\n                            <th>FECHA DE SINCRONIZACIÓN</th>\r\n                            <th>USUARIO</th>\r\n\t\t\t\t\t\t</tr>\r\n                    </thead>\r\n                    <tbody  *ngIf="!busquedaActivada">\r\n                        <tr *ngFor="let item of lista; let i=index">  \r\n                            <td>{{ item.id }}</td>   \r\n                            <td>{{ item.servidor_id }}</td>                      \r\n                            <td>{{ item.servidor_nombre }}</td> \r\n                            <td>{{ item.fecha_generacion }}</td>  \r\n                            <td>{{ item.created_at }}</td> \r\n                            <td>{{ item.usuario_id }}</td>                                                  \r\n                        </tr>\r\n                        <tr *ngIf="lista.length == 0">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                        </tr>\r\n                    </tbody>\r\n                    <tbody *ngIf="busquedaActivada">\r\n                        <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                            <td>{{ item.id }}</td>   \r\n                            <td>{{ item.servidor_id }}</td>                      \r\n                            <td>{{ item.servidor_nombre }}</td> \r\n                            <td>{{ item.fecha_generacion }}</td>  \r\n                            <td>{{ item.created_at }}</td> \r\n                            <td>{{ item.usuario_id }}</td> \r\n                        </tr>\r\n\r\n                        <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <!-- Paginación para la lista  -->\r\n                <paginacion \r\n                    [total]="total" \r\n                    [paginasTotales]="paginasTotales" \r\n                    [resultadosPorPagina]="resultadosPorPagina" \r\n                    [paginaActual]="paginaActual" \r\n                    [indicePaginas]="indicePaginas"\r\n                    (onSiguiente)="paginaSiguiente()" \r\n                    (onAnterior)="paginaAnterior()" \r\n                    (onListar)="listar($event)" \r\n                    *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n                <!-- Paginación para la búsqueda  -->\r\n                <paginacion \r\n                    [total]="totalBusqueda" \r\n                    [paginasTotales]="paginasTotalesBusqueda" \r\n                    [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                    [paginaActual]="paginaActualBusqueda" \r\n                    [indicePaginas]="indicePaginasBusqueda"\r\n                    (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                    (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                    (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                    *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n            </section>\r\n        </div>\r\n        \r\n       \r\n       \r\n    </div>\r\n</div>\r\n\r\n<div class="modal" [ngClass]="{ \'is-active\': mostrarLogAutoSync }">\r\n    <div class="modal-background" (click)="mostrarLogAutoSync = !mostrarLogAutoSync"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n        <p class="modal-card-title">Detalles de la sincronización</p>\r\n        <button class="delete" (click)="mostrarLogAutoSync = !mostrarLogAutoSync"></button>\r\n        </header>\r\n        <section class="modal-card-body is-paddingless">\r\n            <div class="content">\r\n                <pre>{{ logAutoSync }}</pre>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n        <a class="button" (click)="mostrarLogAutoSync = !mostrarLogAutoSync">Cerrar</a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n<div class="modal"  [ngClass]="{ \'is-active\': mostrarModalSubirArchivoSync }">\r\n  <div class="modal-background" (click)="mostrarModalSubirArchivoSync =!mostrarModalSubirArchivoSync"></div>\r\n  <div class="modal-card">\r\n    <header class="modal-card-head">\r\n      <p class="modal-card-title"><span class="icon"><i class="fa fa-cloud-upload"></i></span> Subir archivo de sincronización manual</p>\r\n      <button class="delete" (click)="mostrarModalSubirArchivoSync = !mostrarModalSubirArchivoSync"></button>\r\n    </header>\r\n    <section class="modal-card-body">        \r\n        <div class="notification is-danger" *ngIf="mensajeErrorSync!=\'\'"><span class="icon"><i class="fa fa-exclamation-circle"></i></span> {{ mensajeErrorSync }}</div>\r\n       \r\n        <div class="field" [ngClass]="{ \'is-hidden\' : enviandoDatos || documentoSubido }">\r\n            <label for="sync" class="label" [ngClass]="{ \'is-danger\': errores.archivo != null }">Elige el archivo sync.XXXX.zip</label>            \r\n            <input class="input-file" type="file" #archivoInput  name="sync" id="sync" style="width:100%" [disabled]="documentoSubido" (change)="fileChange($event)" accept=".zip">            \r\n            <p class="help is-danger" *ngIf="errores.archivo == \'required\'">Debe elegir un archivo.</p>\r\n            <p class="help is-danger" *ngIf="errores.archivo == \'max\'">El archivo no puede ser superior a los <b>10MB</b>.</p>\r\n            <p class="help is-danger" *ngIf="errores.archivo == \'mimetypes\'">El tipo de archivo no es valido, verifique que tenga las siguientes extensiones: .zip</p>\r\n        </div>\r\n        <div *ngIf="enviandoDatos || documentoSubido">\r\n            <h1 class="subtitle" *ngIf="enviandoDatos">Subiendo documento...</h1>\r\n            <h1 class="subtitle" *ngIf="documentoSubido && !enviandoDatos"><span class="icon"><i class="fa fa-check-circle"></i></span> ¡El documento se ha subido exitosamente!</h1>\r\n            <progress class="progress is-primary" value="{{ progreso }}" max="100">{{ progreso}}%</progress>\r\n        </div>\r\n    </section>\r\n    <footer class="modal-card-foot">\r\n        <a class="button is-primary" [ngClass]="{ \'is-disabled\' : !archivo || enviandoDatos  }" *ngIf="!documentoSubido" (click)="adjuntar()">Adjuntar</a>\r\n        <a class="button is-primary" [ngClass]="{ \'is-disabled\' : !archivo || enviandoDatos  }" *ngIf="documentoSubido" (click)="reset()">Adjuntar otro documento</a>\r\n        <a class="button" [ngClass]="{ \'is-disabled\' : enviandoDatos  }" (click)="mostrarModalSubirArchivoSync = !mostrarModalSubirArchivoSync">Cerrar</a>      \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;z-index:9999;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>     \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>'},"7W7s":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("bm2B"),o=a("TNb/"),c=(a.n(o),a("oeHx")),l=a("G8gi"),d=a("f5Uh"),u=a("LLho"),p=a("D3zc"),m=a("B2Nl"),f=a("VTbq"),g=a("DtLY"),h=a("/tik"),v=a("rQqo"),b=a("Fiuh"),y=a("VQxF"),_=a("jp5I");a.d(e,"a",function(){return j});var x=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},j=function(){function t(){}return t}();j=x([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.FormsModule,c.a,l.a,d.a,u.a,p.a,o.ChartModule],exports:[v.a,h.a],declarations:[m.a,f.a,g.a,h.a,v.a,y.a,_.a],providers:[b.a]})],j)},"7YyF":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("LLho"),s=a("ZnYA"),o=a("ModC");a.d(e,"a",function(){return l});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=function(){function t(){}return t}();l=c([a.i(n.NgModule)({imports:[i.CommonModule,r.a],exports:[s.a],declarations:[s.a],providers:[o.a]})],l)},"7gzm":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bm2B"),s=a("BkNc");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,a,n){this.fb=t,this.router=e,this.route=a,this._sanitizer=n,this.tieneid=!1,this.tipos_almacen=[{id:"ALMPAL",nombre:"ALMPAL"},{id:"JURIS",nombre:"JURIS"},{id:"UNMED",nombre:"UNMED"},{id:"LAB",nombre:"LAB"},{id:"FARMACIA",nombre:"FARMACIA"},{id:"CENDIS",nombre:"CENDIS"}],this.niveles_almacen=[{id:1,nombre:"HACE PEDIDOS AL PROVEEDOR"},{id:2,nombre:"HACE PEDIDOS A OTRO ALMACEN DENTRO DE LA CLUES"}],this.tab=1}return t.prototype.ngOnInit=function(){var t=this;this.dato=this.fb.group({id:["",[r.Validators.required]],nombre:["",[r.Validators.required]],nivel_almacen:["",[r.Validators.required]],tipo_almacen:["",[r.Validators.required]],subrogado:[""],proveedor_id:[""],unidosis:[""],almacen_tipos_movimientos:this.fb.array([])}),this.form_almacen_tipos_movimientos={tipo_movimiento_id:["",[r.Validators.required]]},this.route.params.subscribe(function(e){e.id&&(t.tieneid=!0)}),document.getElementById("catalogos").click()},t.prototype.ngAfterViewInit=function(){setTimeout(function(){document.getElementById("initMover").click()},5e3)},t}();l=o([a.i(n.Component)({selector:"almacenes-formulario",template:a("xhHN")}),c("design:paramtypes",["function"==typeof(d=void 0!==r.FormBuilder&&r.FormBuilder)&&d||Object,"function"==typeof(u=void 0!==s.a&&s.a)&&u||Object,"function"==typeof(p=void 0!==s.c&&s.c)&&p||Object,"function"==typeof(m=void 0!==i.d&&i.d)&&m||Object])],l);var d,u,p,m},"7njn":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("xrMq"),s=a("W3I+"),o=a("D9tw");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"almacen/salidas-recetas",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"ver/:id",component:s.a}],canActivate:[o.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},"7rYK":function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.mostrarMenuAside=!1,this.usuario={}}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t.prototype.toggleMenuAside=function(){this.mostrarMenuAside=!this.mostrarMenuAside},t}();s=i([a.i(n.Component)({selector:"panel-control-menu",template:a("CUfC"),styles:[a("amuA")]}),r("design:paramtypes",[])],s)},"7ssS":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("Gbfn"),d=a("LLho"),u=a("Px6Q"),p=a("rxeu"),m=a("pMm4"),f=a("BFvY"),g=a("F1l5"),h=a("K4kt"),v=a("CWbX"),b=a("oSQj"),y=(a.n(b),a("evA2"));a.n(y);a.d(e,"a",function(){return x});var _=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},x=function(){function t(){}return t}();x=_([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,g.a,v.a,b.NguiAutoCompleteModule,y.NguiDatetimePickerModule],declarations:[p.a,m.a],providers:[f.a,h.a]})],x)},"7y7K":function(t,e){t.exports='<menu-farmacia [modulo]="\'Pedidos\'" [icono]="\'assets/icono-pedidos.svg\'" [url]="\'/almacen/pedidos\'"></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n      <menu-lateral></menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; overflow:hidden; border-radius:1em; width:100%;margin-bottom:1em;">\r\n            <table class="table" style="min-width:100%; font-size:0.8em; margin-bottom:0.2em;margin-top:0.2em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Presupuesto anual</th>\r\n                        <th style="text-align:center">Autorizado</th>\r\n                        <th style="text-align:center">Comprometido</th>\r\n                        <th style="text-align:center">Devengado</th>\r\n                        <th style="text-align:center">Disponible</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngIf="!presupuesto">\r\n                        <th colspan="5" style="text-align:center"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando Presupuesto...</th>\r\n                    </tr>\r\n                    <tr *ngIf="presupuesto">\r\n                        <th>Causes y Materia de Curación</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ (presupuesto.causes_modificado + presupuesto.material_curacion_modificado) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning">$ {{ (presupuesto.causes_comprometido + presupuesto.material_curacion_comprometido) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ (presupuesto.causes_devengado + presupuesto.material_curacion_devengado) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ (presupuesto.causes_disponible + presupuesto.material_curacion_disponible) | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr *ngIf="presupuesto">\r\n                        <th>No causes</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.no_causes_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning">$ {{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.no_causes_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr *ngIf="presupuesto">\r\n                        <th>Total</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ ( presupuesto.no_causes_modificado + presupuesto.causes_modificado + presupuesto.material_curacion_modificado) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning">$ {{ ( presupuesto.no_causes_comprometido + presupuesto.causes_comprometido + presupuesto.material_curacion_comprometido) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ ( presupuesto.no_causes_devengado + presupuesto.causes_devengado + presupuesto.material_curacion_devengado) | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ ( presupuesto.no_causes_disponible + presupuesto.causes_disponible + presupuesto.material_curacion_disponible) | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n         </div>\r\n\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa {{ icono }}"></i></span> {{ titulo }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                            </p>\r\n                            <!--p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/almacen/pedidos/nuevo">\r\n                                <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p-->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th><abbr title="Folio del pedido">Folio</abbr></th>\r\n                        <th>Nombre del Pedido</th>\r\n                        <th>Fecha <span *ngIf="status == \'PS\'">(expiración)</span></th>\r\n                        <th>Claves</th>\r\n                        <th>Cantidad</th>\r\n                        <th>Monto</th>\r\n                        <th style="text-align:center;" width="1">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pedidos; let i=index" [ngClass]="{\'proyecto-estatus-normal\':(item.status == \'BR\' || item.status == \'PS\'),\'proyecto-estatus-azul\':item.status == \'EF\',\'proyecto-estatus-rojo\':item.status == \'EX-CA\',\'proyecto-estatus-amarillo\':item.status == \'EX\',\'proyecto-estatus-verde\':item.status == \'FI\'}">\r\n                        <th style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            <span class="icon"><i class="fa fa-{{(item.tipo_pedido_id==\'PFS\')?\'building\':\'hospital-o\'}}"></i></span>\r\n                            {{ item.folio?item.folio:\'S/F\' }}</a>\r\n                        </th>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.descripcion }}</a></td>\r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.fecha | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias?item.expira_en_dias:\'hoy\'}})</span></a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_claves_recibidas || 0) | number }} / {{ item.total_claves_solicitadas | number }} [{{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_cantidad_recibida || 0) | number }} / {{ item.total_cantidad_solicitada | number }} [{{(item.total_cantidad_recibida/item.total_cantidad_solicitada)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            $ {{ (item.total_monto_recibido || 0) | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} [{{(item.total_monto_recibido/item.total_monto_solicitado)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando && item.status == \'BR\'" class="status-rojo" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                            <a *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias >= 0" routerLink="/almacen/pedidos/recepcion/{{item.id}}" title="Recibir pedido"><span class="icon"><i class="fa fa-truck"></i></span></a>\r\n                            <span *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias < 0" class="tag is-danger" title="Expirado"><span class="icon"><i class="fa fa-exclamation"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'FI\'" class="estatus-verde" title="Finalizado"><span class="icon"><i class="fa fa-check-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX-CA\'" class="estatus-rojo" title="Expirado - Cancelado"><span class="icon"><i class="fa fa-times-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX\'" class="estatus-amarillo" title="Expirado"><span class="icon"><i class="fa fa-exclamation-circle"></i></span></span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf="pedidos.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index" [ngClass]="{\'proyecto-estatus-normal\':item.status == \'BR\',\'proyecto-estatus-azul\':item.status == \'EF\',\'proyecto-estatus-rojo\':item.status == \'EX-CA\',\'proyecto-estatus-amarillo\':item.status == \'EX\',\'proyecto-estatus-verde\':item.status == \'FI\'}">\r\n                        <th style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            <span class="icon"><i class="fa fa-{{(item.tipo_pedido_id==\'PA\')?\'hospital-o\':\'building\'}}"></i></span>\r\n                            {{ item.folio?item.folio:\'S/F\' }}</a>\r\n                        </th>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.descripcion }}</a></td>\r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.fecha | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias?item.expira_en_dias:\'hoy\'}})</span></a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_claves_recibidas || 0) | number }} / {{ item.total_claves_solicitadas | number }} [{{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_cantidad_recibida || 0) | number }} / {{ item.total_cantidad_solicitada | number }} [{{(item.total_cantidad_recibida/item.total_cantidad_solicitada)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            $ {{ (item.total_monto_recibido || 0) | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} [{{(item.total_monto_recibido/item.total_monto_solicitado)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando && item.status == \'BR\'" class="status-rojo" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                            <a *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias >= 0" routerLink="/almacen/pedidos/recepcion/{{item.id}}" title="Recibir pedido"><span class="icon"><i class="fa fa-truck"></i></span></a>\r\n                            <span *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias < 0" class="tag is-danger" title="Expirado"><span class="icon"><i class="fa fa-exclamation"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'FI\'" class="estatus-verde" title="Finalizado"><span class="icon"><i class="fa fa-check-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX-CA\'" class="estatus-rojo" title="Expirado - Cancelado"><span class="icon"><i class="fa fa-times-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX\'" class="estatus-amarillo" title="Expirado"><span class="icon"><i class="fa fa-exclamation-circle"></i></span></span>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <!--p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p-->\r\n</div>'},"8EhF":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("bH5l"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"inventario/existencias",children:[{path:"",component:r.a}],canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},"8H38":function(t,e,a){"use strict";var n=a("/oeL"),i=a("bm2B"),r=a("fc+i"),s=a("BkNc"),o=a("K4kt"),c=a("gHRf"),l=a("hN3r");a.d(e,"a",function(){return p});var d=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,a,n,i){this.fb=t,this.crudService=e,this.route=a,this._sanitizer=n,this.notificacion=i,this.cargando=!1,this.tamano=0,this.error_json=!1,this.recetas_resultado=!1,this.mensajeResponse=new c.a,this.titulo="Sincronizar recetas",this.tieneid=!1,this.foto="",this.options={position:["bottom","left"],timeOut:2e3,lastOnBottom:!0}}return t.prototype.ngOnInit=function(){JSON.parse(localStorage.getItem("usuario"));this.dato2=this.fb.group({json:[""],archivos:[""],pedido:["00011"]})},t.prototype.abrirModal=function(t,e){document.getElementById(t).classList.add("is-active"),this.pedido_id=e},t.prototype.cancelarModal=function(t){document.getElementById(t).classList.remove("is-active"),this.dato2.patchValue({json:"",archivos:"",pedido:""}),this.jsonBoxViewChildren.first.nativeElement.value="",this.pedido_id="",this.recetas_resultado=!1,this.json_valido=""},t.prototype.convertirJson=function(t,e,a){e.patchValue(""),this.error_json=!1;var n=t.target.files,i=n[0],r=this;if(n&&i){var s="",o=new FileReader;o.readAsBinaryString(i),o.onload=function(t){return function(t){try{s=JSON.parse(t.target.result),e.patchValue(s)}catch(t){r.error_json=!0}}}()}},t.prototype.enviarDatos=function(t){var e=this;this.cargando=!0,this.dato2.patchValue({pedido:this.pedido_id});var a=this.dato2.getRawValue();this.crudService.crear(a,t).subscribe(function(t){e.cargando=!1,t.data&&(e.json_valido=t.data),e.recetas_resultado=!0,e.mensajeResponse.texto="Validación realizada.",e.mensajeResponse.mostrar=!0,e.mensajeResponse.clase="success",e.mensaje(2)},function(t){e.cargando=!1;try{var a=t.json();if(401===t.status&&(e.mensajeResponse.texto="No tiene permiso para hacer esta operación."),409===t.status){e.mensajeResponse.texto="Por favor verfique los campos marcados en rojo.",e.mensajeResponse.clase="warning",e.mensaje(8);for(var n in a.error)for(var i in a.error[n])for(var r in a.error[n][i])e.mensajeResponse.titulo=n,e.mensajeResponse.texto=a.error[n][i][r],e.mensajeResponse.clase="error",e.mensaje(3)}}catch(a){500==t.status?e.mensajeResponse.texto="500 (Error interno del servidor)":e.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.sincronizarReceta=function(t){var e=this;this.cargando=!0,this.dato2.patchValue({pedido:this.pedido_id});var a=this.dato2.getRawValue();this.crudService.crear(a,"procesar-json-proveedor").subscribe(function(a){e.cargando=!1,e.cancelarModal(t),e.mensajeResponse.texto="Se han sincronizado las recetas.",e.mensajeResponse.mostrar=!0,e.mensajeResponse.clase="success",e.mensaje(2)},function(t){e.cargando=!1;try{var a=t.json();if(401==t.status&&(e.mensajeResponse.texto="No tiene permiso para hacer esta operación."),409==t.status){e.mensajeResponse.texto="Por favor verfique los campos marcados en rojo.",e.mensajeResponse.clase="warning",e.mensaje(8);for(var n in a.error)for(var i in a.error[n])e.mensajeResponse.titulo=n,e.mensajeResponse.texto=a.error[n][i],e.mensajeResponse.clase="error",e.mensaje(3)}}catch(a){500==t.status?e.mensajeResponse.texto="500 (Error interno del servidor)":e.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.mensaje=function(t,e){void 0===t&&(t=6),void 0===e&&(e=["bottom","left"]);var a={showProgressBar:!0,pauseOnHover:!1,clickToClose:!0,maxLength:this.mensajeResponse.texto.length};this.options={position:e,timeOut:1e3*t,lastOnBottom:!0},""==this.mensajeResponse.titulo&&(this.mensajeResponse.titulo=this.titulo),"alert"==this.mensajeResponse.clase&&this.notificacion.alert(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"success"==this.mensajeResponse.clase&&this.notificacion.success(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"info"==this.mensajeResponse.clase&&this.notificacion.info(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"warning"!=this.mensajeResponse.clase&&"warn"!=this.mensajeResponse.clase||this.notificacion.warn(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"error"!=this.mensajeResponse.clase&&"danger"!=this.mensajeResponse.clase||this.notificacion.error(this.mensajeResponse.titulo,this.mensajeResponse.texto,a)},t}();d([a.i(n.ViewChildren)("json"),u("design:type",Object)],p.prototype,"jsonBoxViewChildren",void 0),p=d([a.i(n.Component)({selector:"sincronizar-recetas-lista",template:a("iX7h"),styles:[a("lG9v")]}),u("design:paramtypes",["function"==typeof(m=void 0!==i.FormBuilder&&i.FormBuilder)&&m||Object,"function"==typeof(f=void 0!==o.a&&o.a)&&f||Object,"function"==typeof(g=void 0!==s.c&&s.c)&&g||Object,"function"==typeof(h=void 0!==r.d&&r.d)&&h||Object,"function"==typeof(v=void 0!==l.b&&l.b)&&v||Object])],p);var m,f,g,h,v},"8jfm":function(t,e){t.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " \'is-primary\' " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    \r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Ingreso Paciente\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n             <section class="section">\r\n                <form name="form" novalidate [formGroup]="pacienteIngreso"  (ngSubmit)="enviar()">     \r\n                  <section class="section" style="background-color: #00d1b2;">\r\n                    <div class="container">\r\n                      <div class="heading">\r\n                        <h1 class="title" style="color: #FFF">Datos del Paciente</h1>\r\n                        <h2 class="subtitle" style="color: #FFF">\r\n                          ID: {{ id_paciente }}<BR>\r\n                          NOMBRE: {{ nombre_paciente }} <BR>\r\n                          LOCALIDAD: {{ localidad_paciente }}<BR>\r\n\r\n                        </h2>\r\n                      </div>\r\n                    </div>\r\n                  </section>\r\n                   <br>    \r\n                  <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Referido</label>\r\n                      \t<span class="select is-fullwidth">\r\n    \t\t                \t<select  formControlName="referido" name="referido" #referido (change)="valida_referido(referido.value)">\r\n    \t\t                \t\t<option value="1" selected="selected">SI</option>\r\n    \t\t                \t\t<option value="2">NO</option>\r\n    \t\t                \t</select>\r\n\t\t                    </span>\t\r\n\r\n\t                 \t<span class="icon is-small" *ngIf="pacienteIngreso.get(\'referido\').hasError(\'required\') && pacienteIngreso.get(\'referido\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="pacienteIngreso.get(\'referido\').hasError(\'required\') && pacienteIngreso.get(\'referido\').touched">Este campo es requerido.</span>                     \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right"  [hidden]="!nombre_conocido">\r\n                        <label class="label">Unidad Referida</label>\r\n                      \t<span class="select is-fullwidth">\r\n                          <select  formControlName="unidad_referido" name="unidad_referido">\r\n                              <option *ngFor="let item of UnidadesMedicas" value="{{item.clues}}">{{ item.nombre }} - {{ item.clues }}</option>\r\n                          </select>\r\n                        </span>\r\n    \t                  <span class="icon is-small" *ngIf="pacienteIngreso.get(\'unidad_referido\').hasError(\'required\') && pacienteIngreso.get(\'unidad_referido\').touched">\r\n    \t                    <i class="fa fa-warning"></i>\r\n    \t                  </span>\r\n    \t                  <span class="help is-danger" *ngIf="pacienteIngreso.get(\'unidad_referido\').hasError(\'required\') && pacienteIngreso.get(\'unidad_referido\').touched">Este campo es requerido.</span>\r\n                    </p>    \r\n\t                </div>\r\n\r\n                  <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Urgencia Calificada</label>\r\n                        <span class="select is-fullwidth">\r\n                          <select  formControlName="urgencia_calificada" name="urgencia_calificada" (change)="bloquea_formulario()" >\r\n                            <option value="1" selected="selected">SI</option>\r\n                            <option value="2">NO</option>\r\n                          </select>\r\n                        </span> \r\n                    <span class="icon is-small" *ngIf="pacienteIngreso.get(\'urgencia_calificada\').hasError(\'required\') && pacienteIngreso.get(\'urgencia_calificada\').touched">\r\n                        <i class="fa fa-warning"></i>\r\n                      </span>\r\n                      <span class="help is-danger" *ngIf="pacienteIngreso.get(\'urgencia_calificada\').hasError(\'required\') && pacienteIngreso.get(\'urgencia_calificada\').touched">Este campo es requerido.</span>                     \r\n                    </p>\r\n\r\n                    <p class="control is-expanded  has-icon has-icon-right" [hidden]="verForm">\r\n                        <label class="label">Triage Obstetrico</label>\r\n                        <span class="select is-fullwidth">\r\n                          <select  formControlName="registro_triage" name="registro_triage" #registro_triage >\r\n                            <option value="1" selected="selected">SI</option>\r\n                            <option value="2">NO</option>\r\n                          </select>\r\n                        </span> \r\n                    <span class="icon is-small" *ngIf="pacienteIngreso.get(\'registro_triage\').hasError(\'required\') && pacienteIngreso.get(\'registro_triage\').touched">\r\n                        <i class="fa fa-warning"></i>\r\n                      </span>\r\n                      <span class="help is-danger" *ngIf="pacienteIngreso.get(\'registro_triage\').hasError(\'required\') && pacienteIngreso.get(\'registro_triage\').touched">Este campo es requerido.</span>                     \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right" [hidden]="verForm">\r\n                        <label class="label">Lugar donde se encuentra</label>\r\n                        <span class="select is-fullwidth">\r\n                          <select  formControlName="estado_triage_id" name="estado_triage_id">\r\n                            <option *ngFor="let item of Triage" value="{{item.id}}">{{ item.id }} {{ item.descripcion }}</option>\r\n                          </select>\r\n                        </span> \r\n                    <span class="icon is-small" *ngIf="pacienteIngreso.get(\'estado_triage_id\').hasError(\'required\') && pacienteIngreso.get(\'estado_triage_id\').touched">\r\n                        <i class="fa fa-warning"></i>\r\n                      </span>\r\n                      <span class="help is-danger" *ngIf="pacienteIngreso.get(\'estado_triage_id\').hasError(\'required\') && pacienteIngreso.get(\'estado_triage_id\').touched">Este campo es requerido.</span>                     \r\n                    </p>\r\n                     <p class="control is-expanded  has-icon has-icon-right" [hidden]="verForm">\r\n                        <label class="label">Grado de Lesión</label>\r\n                        <span class="select is-fullwidth">\r\n                          <select  formControlName="grado_lesion_id" name="grado_lesion_id" >\r\n                              <option *ngFor="let item of GradoLesion" value="{{item.id}}">{{ item.descripcion }}</option>\r\n                          </select>\r\n                        </span> \r\n                    <span class="icon is-small" *ngIf="pacienteIngreso.get(\'grado_lesion_id\').hasError(\'required\') && pacienteIngreso.get(\'grado_lesion_id\').touched">\r\n                        <i class="fa fa-warning"></i>\r\n                      </span>\r\n                      <span class="help is-danger" *ngIf="pacienteIngreso.get(\'grado_lesion_id\').hasError(\'required\') && pacienteIngreso.get(\'grado_lesion_id\').touched">Este campo es requerido.</span>                     \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right" [hidden]="verForm">\r\n                        <label class="label">Fecha de ingreso</label>\r\n                        <input class="input"  type="text" name="fecha_ingreso" formControlName="fecha_ingreso" placeholder="aaaa-mm-dd" readonly="readonly">\r\n                          <span class="icon is-small" *ngIf="pacienteIngreso.get(\'fecha_ingreso\').hasError(\'required\') && pacienteIngreso.get(\'fecha_ingreso\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="pacienteIngreso.get(\'fecha_ingreso\').hasError(\'required\') && pacienteIngreso.get(\'fecha_ingreso\').touched">Este campo es requerido.</span>\r\n                         \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right" [hidden]="verForm">\r\n                        <label class="label">Hora de ingreso</label>\r\n                        <input class="input"  type="text" name="hora_ingreso" formControlName="hora_ingreso" placeholder="HH:mm" readonly="readonly">\r\n                          <span class="icon is-small" *ngIf="pacienteIngreso.get(\'hora_ingreso\').hasError(\'required\') && pacienteIngreso.get(\'hora_ingreso\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="pacienteIngreso.get(\'hora_ingreso\').hasError(\'required\') && pacienteIngreso.get(\'hora_ingreso\').touched">Este campo es requerido.</span>\r\n                         \r\n                    </p>\r\n                  </div>\r\n                  <br><br>\r\n                  <div class="control is-grouped">\r\n                    <p class="control" *ngIf="permiso_guardar">\r\n                      <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="pacienteIngreso.invalid">Guardar</button>\r\n                    </p>\r\n                    \r\n                    <p class="control">\r\n                      <a class="button is-white" (click)="regresar()" >Regresar</a>\r\n                    </p>\r\n                  </div>\r\n\r\n              </form>\r\n            </section>  \r\n        </div>\r\n    </div>    \r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},"9/My":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("mjEJ"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"configuracion/claves",redirectTo:"configuracion/claves",pathMatch:"full"},{path:"configuracion/claves",children:[{path:"",component:r.a}],canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},"94wZ":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bKpL"),s=(a.n(r),a("rlar")),o=(a.n(s),a("qbdv")),c=a("BkNc"),l=a("bm2B"),d=a("/zHi"),u=(a.n(d),a("S7im")),p=(a.n(u),a("azLz")),m=(a.n(p),a("MBEm")),f=(a.n(m),a("5v8a")),g=(a.n(f),a("Pic8")),h=(a.n(g),a("xpf9")),v=(a.n(h),a("gHRf")),b=a("WEl6");a.d(e,"a",function(){return x});var y=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},_=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},x=function(){function t(t,e,a,n,i,r){this.title=t,this.PacienteEgresoService=e,this.route=a,this.router=n,this.location=i,this.fb=r,this.cargando=!1,this.showDialog=!1,this.verForm=!1,this.verFormResponsable=!1,this.verFormArea=!0,this.mensajeError=new v.a,this.mensajeExito=new v.a,this.cargandoMunicipios=!1,this.cargandoLocalidades=!1,this.Municipios=[],this.Localidades=[],this.pacientes=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.paciente=this.fb.group({conocido:["1",[l.Validators.required]],responsableconocido:["1",[l.Validators.required]],nombre:["",[l.Validators.required]],fecha_nacimiento:["",[l.Validators.required]],hora_nacimiento:["",[]],domicilio:["",[l.Validators.required]],colonia:["",[l.Validators.required]],telefono:["",[l.Validators.required]],no_expediente:["",[l.Validators.required]],no_afiliacion:["",[l.Validators.required]],municipio_id:["",[l.Validators.required]],localidad_id:["",[l.Validators.required]],sexo:["",[l.Validators.required]],nombre_responsable:["",[l.Validators.required]],parentesco:["",[l.Validators.required]],domicilio_responsable:["",[l.Validators.required]],telefono_responsable:["",[l.Validators.required]],area:["",[l.Validators.required]],trabajo_social:["",[]],juridico:["",[]],ministerio:["",[]]}),this.title.setTitle("Verificación / Admisión"),this.listar(1),this.mensajeError=new v.a,this.mensajeExito=new v.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."+e),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.PacienteEgresoService.buscarCompleta(e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")}),this.cargarMunicipios()},t.prototype.cargarMunicipios=function(){var t=this;this.cargandoMunicipios=!0,this.PacienteEgresoService.listaMunicipios().subscribe(function(e){t.Municipios=e,t.cargandoMunicipios=!1,console.log("Municipios cargados")},function(e){t.cargandoMunicipios=!1})},t.prototype.cargarLocalidades=function(t){var e=this;this.cargandoLocalidades=!0,this.PacienteEgresoService.listaLocalidades(t).subscribe(function(t){e.Localidades=t,e.cargandoLocalidades=!1,console.log("Localidades cargados")},function(t){e.cargandoLocalidades=!1})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.PacienteEgresoService.buscarCompleta(t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("------"),console.log(t),console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,this.cargando=!0,this.PacienteEgresoService.listaCompleta(t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.pacientes=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("pacientes cargados."),console.log(e.pacientes)},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paciente_conocido=function(){this.verForm=!this.verForm,this.verForm?this.paciente.patchValue({nombre:1,fecha_nacimiento:"1987-01-01",domicilio:"conocido",colonia:"conocido",telefono:"conocido",no_expediente:"conocido",no_afiliacion:"conocido",municipio_id:1,localidad_id:1,sexo:1}):this.paciente.patchValue({nombre:"",fecha_nacimiento:"",domicilio:"",colonia:"",telefono:"",no_expediente:"",no_afiliacion:"",municipio_id:0,localidad_id:0,sexo:1}),this.verFormResponsable&&this.verForm?(this.verFormArea=!1,this.paciente.patchValue({area:""})):(this.verFormArea=!0,this.paciente.patchValue({area:1}))},t.prototype.responsable=function(){this.verFormResponsable=!this.verFormResponsable,this.verFormResponsable?this.paciente.patchValue({nombre_responsable:1,parentesco:"1987-01-01",domicilio_responsable:"conocido",telefono_responsable:"conocido"}):this.paciente.patchValue({nombre_responsable:"",parentesco:"",domicilio_responsable:"",telefono_responsable:""}),this.verFormResponsable&&this.verForm?(this.verFormArea=!1,this.paciente.patchValue({area:""})):(this.verFormArea=!0,this.paciente.patchValue({area:1}))},t.prototype.verifica_area=function(){var t,e,a;t=this.paciente.controls.trabajo_social.value,e=this.paciente.controls.juridico.value,a=this.paciente.controls.ministerio.value,t||e||a?this.paciente.patchValue({area:1}):(this.paciente.patchValue({area:""}),console.log("no entro area"))},t.prototype.enviar=function(){var t,e=this;if(t=0,1!=this.paciente.controls.conocido.value&&1!=this.paciente.controls.responsableconocido.value){var a=void 0,n=void 0,i=void 0;a=this.paciente.controls.trabajo_social.value,n=this.paciente.controls.juridico.value,i=this.paciente.controls.ministerio.value,(a||n||i)&&(t=1)}else t=1;1==t&&this.PacienteEgresoService.crear(this.paciente.value).subscribe(function(t){e.cargando=!1,e.router.navigate(["/pacientes/modulo/ingreso/"+t.id])},function(t){e.cargando=!1,e.mensajeError=new v.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();x=y([a.i(n.Component)({selector:"app-verificacion",template:a("FMzl"),styles:[a("HnxL")]}),_("design:paramtypes",["function"==typeof(j=void 0!==i.b&&i.b)&&j||Object,"function"==typeof(P=void 0!==b.a&&b.a)&&P||Object,"function"==typeof(I=void 0!==c.c&&c.c)&&I||Object,"function"==typeof(E=void 0!==c.a&&c.a)&&E||Object,"function"==typeof(k=void 0!==o.Location&&o.Location)&&k||Object,"function"==typeof(C=void 0!==l.FormBuilder&&l.FormBuilder)&&C||Object])],x);var j,P,I,E,k,C},"97cf":function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.onCerrar=new n.EventEmitter,this.onEnviar=new n.EventEmitter,this.lectura=!1}return t.prototype.ngOnInit=function(){},t.prototype.actualizarTotales=function(){this.insumo.monto=0,this.insumo.cantidad=0;for(var t in this.insumo.lista_clues)this.insumo.monto+=this.insumo.lista_clues[t].cantidad*this.insumo.precio,this.insumo.cantidad+=this.insumo.lista_clues[t].cantidad},t.prototype.eliminarInsumo=function(t,e){for(var a in this.listaClaveAgregadas)if(this.listaClaveAgregadas[a].clave==this.insumo.clave){for(var n in this.listaClaveAgregadas[a].lista)if(this.insumo.lista_clues[e].clues==this.listaClaveAgregadas[a].lista[n]){this.listaClaveAgregadas[a].lista.splice(n,1);break}break}this.insumo.lista_clues.splice(e,1),this.actualizarTotales()},t.prototype.cerrar=function(){this.onCerrar.emit()},t}();i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onCerrar",void 0),i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onEnviar",void 0),i([a.i(n.Input)(),r("design:type",Boolean)],s.prototype,"lectura",void 0),i([a.i(n.Input)(),r("design:type",Object)],s.prototype,"insumo",void 0),i([a.i(n.Input)(),r("design:type",Array)],s.prototype,"listaClaveAgregadas",void 0),s=i([a.i(n.Component)({selector:"pedidos-lista-clues",template:a("kQtQ"),styles:[a("KULP")]}),r("design:paramtypes",[])],s)},"9BlR":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bKpL"),s=(a.n(r),a("rlar")),o=(a.n(s),a("/zHi")),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("gf2+")),g=a("gHRf");a.d(e,"a",function(){return b});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e){this.title=t,this.apiService=e,this.cargando=!1,this.mostrarModalClues=!1,this.listaSeleccionada=null,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Claves básicas / Administrador central"),this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.apiService.buscar(e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.apiService.buscar(t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0,this.apiService.listaPaginada(t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.lista=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.mostrarUnidadesMedicas=function(t,e){this.listaSeleccionada=t,this.mostrarModalClues=!0},t.prototype.eliminar=function(t,e){var a=this;confirm("¿Estás seguro de eliminar esta lista?, Se eliminará de todas las unidades médicas donde esté asignada.")&&(t.cargando=!0,this.apiService.eliminar(t.id).subscribe(function(n){t.cargando=!1,a.busquedaActivada?a.resultadosBusqueda.splice(e,1):a.lista.splice(e,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new g.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="item eliminado"},function(n){t.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();b=h([a.i(n.Component)({selector:"app-lista",template:a("ucBg"),styles:[a("N6I4")],providers:[f.a]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==f.a&&f.a)&&_||Object])],b);var y,_},"9YV7":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("bm2B"),o=a("7W7s"),c=a("oeHx"),l=a("G8gi"),d=a("f5Uh"),u=a("LLho"),p=a("yLgj"),m=a("IdTZ"),f=a("OhEe");a.d(e,"a",function(){return h});var g=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},h=function(){function t(){}return t}();h=g([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.FormsModule,c.a,l.a,d.a,u.a,o.a,p.a],declarations:[m.a,f.a]})],h)},"9i+F":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.title=t,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return t.prototype.ngOnInit=function(){this.title.setTitle("Almacén"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[{permiso:"7KbTARF2kpnO4Lfqv8hmYP8QGMcgJBwU",icono:"assets/icono-ajustes-inventario.svg",titulo:"Inicialización Inventario",url:"/inventario/inicializacion-inventario"},{permiso:"H5IV7Z6CAj8V2CRIQ2wnbXrYhvjLsSBk",icono:"assets/icono-stock.svg",titulo:"Existencia de insumos médicos",url:"/inventario/existencias"},{permiso:"0oADIo1ltfAl4VMDVbyWgLR3rAhYGjlY",icono:"assets/icono-ajuste-mas.svg",titulo:"Ajuste más de Inventario",url:"/inventario/ajuste-mas-inventario"},{permiso:"cE81erieaVjvmhcb9GCYI4doqYGtTcj1",icono:"assets/icono-ajuste-menos.svg",titulo:"Ajuste menos de Inventario",url:"/inventario/ajuste-menos-inventario"}],this.accesosDirectos=[];var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(e.length>0){for(var a in this.modulos)t:for(var n in e)if(e[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break t}for(var i in this.accesosDirectos)t:for(var n in e)if(e[n]==this.accesosDirectos[i].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[i]);break t}}},t}();o=r([a.i(n.Component)({selector:"app-index-inventario",template:a("0SZc"),styles:[a("iV5y")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},"9rY/":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bKpL"),s=(a.n(r),a("rlar")),o=(a.n(s),a("/zHi")),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("wW11")),g=a("gHRf");a.d(e,"a",function(){return b});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e){this.title=t,this.apiService=e,this.cargando=!1,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Roles / Panel de control"),this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.apiService.buscar(e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.apiService.buscar(t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0,this.apiService.listaPaginada(t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.lista=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.eliminar=function(t,e){var a=this;t.cargando=!0,this.apiService.eliminar(t.id).subscribe(function(n){t.cargando=!1,a.lista.splice(e,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new g.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="item eliminado"},function(n){t.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();b=h([a.i(n.Component)({selector:"app-lista",template:a("VmQS"),styles:[a("EPRa")]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==f.a&&f.a)&&_||Object])],b);var y,_},"9ynB":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bKpL"),s=(a.n(r),a("rlar")),o=(a.n(s),a("/zHi")),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("gHRf")),g=a("GtVU");a.d(e,"a",function(){return b});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e){this.title=t,this.pacienteService=e,this.cargando=!1,this.mensajeError=new f.a,this.mensajeExito=new f.a,this.pacientes=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Pacientes / Admisión"),this.listar(1),this.mensajeError=new f.a,this.mensajeExito=new f.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."+e),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.pacienteService.buscar(e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.pacienteService.buscar(t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("------"),console.log(t),console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,this.cargando=!0,this.pacienteService.lista(t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.pacientes=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("pacientes cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();b=h([a.i(n.Component)({selector:"app-lista",template:a("o+wE"),styles:[a("4gLc")]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==g.a&&g.a)&&_||Object])],b);var y,_},"9zwt":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("/0pc"),s=a("OFVJ"),o=a("D9tw");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"inventario/ajuste-menos-inventario",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"ver/:id",component:s.a}],canActivate:[o.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},ABhI:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bm2B"),s=a("bKpL"),o=(a.n(s),a("rlar")),c=(a.n(o),a("/zHi")),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("w0bh")),h=a("gHRf");a.d(e,"a",function(){return y});var v=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},b=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},y=function(){function t(t,e,a){this.title=t,this.avanceService=e,this.fb=a,this.cargando=!1,this.showAgregarTema=!1,this.mensajeError=new h.a,this.mensajeExito=new h.a,this.id_tema="0",this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.temas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new o.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.tema_avance=this.fb.group({tema:["",[r.Validators.required]],responsable:["",[r.Validators.required]],area:["",[r.Validators.required]],comentario:["",[r.Validators.required]]}),this.title.setTitle("Avances / Lista"),this.listar(1),this.mensajeError=new h.a,this.mensajeExito=new h.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."+e),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.avanceService.buscar(e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):s.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.avanceService.buscar(t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){console.log(t),a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1)},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,this.cargando=!0,this.avanceService.lista(t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.temas=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1)},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.agregar_tema=function(){var t=this;"0"==this.id_tema?this.avanceService.crear(this.tema_avance.value).subscribe(function(e){t.cargando=!1,t.mensajeExito=new h.a(!0),t.mensajeExito.texto="Se han guardado los cambios.",t.mensajeExito.mostrar=!0,t.showAgregarTema=!t.showAgregarTema,t.listar(1),t.tema_avance.patchValue({tema:"",responsable:"",area:"",comentario:""})},function(e){t.cargando=!1,t.mensajeError=new h.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}):this.avanceService.editar(this.id_tema,this.tema_avance.value).subscribe(function(e){t.cargando=!1,t.mensajeExito=new h.a(!0),t.mensajeExito.texto="Se han editado los cambios.",t.mensajeExito.mostrar=!0,t.id_tema="0",t.showAgregarTema=!t.showAgregarTema,t.listar(1),t.tema_avance.patchValue({tema:"",responsable:"",area:"",comentario:""})},function(e){t.cargando=!1,t.mensajeError=new h.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.ver_tema=function(t){var e=this;this.avanceService.ver_tema(t).subscribe(function(t){e.cargando=!1,e.showAgregarTema=!e.showAgregarTema,e.tema_avance.patchValue(t),console.log(t.id),e.id_tema=t.id.toString()},function(t){e.cargando=!1,e.mensajeError=new h.a(!0),e.mensajeError.texto="No especificado.",e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t.prototype.modal_agregar=function(){this.showAgregarTema=!0},t}();y=v([a.i(n.Component)({selector:"app-lista",template:a("baU8"),styles:[a("LHk8")]}),b("design:paramtypes",["function"==typeof(_=void 0!==i.b&&i.b)&&_||Object,"function"==typeof(x=void 0!==g.a&&g.a)&&x||Object,"function"==typeof(j=void 0!==r.FormBuilder&&r.FormBuilder)&&j||Object])],y);var _,x,j},AHor:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("bm2B"),o=a("fc+i"),c=a("BFvY"),l=a("wW11"),d=a("ajxl"),u=a("gHRf");a.d(e,"a",function(){return f});var p=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},m=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,a,n,i,r,s,o){this.router=t,this.title=e,this.authService=a,this.route=n,this.location=i,this.rolesService=r,this.usuariosService=s,this.fb=o,this.usuarioRepetido=!1,this.usuarioInvalido=!1,this.cambiarPassword=!1,this.cargando=!1,this.cargandoRoles=!1,this.cargandoUnidadesMedicas=!1,this.roles=[],this.unidadesMedicas=[],this.unidadesMedicasEdicion=[],this.mensajeError=new u.a,this.mensajeAdvertencia=new u.a,this.mensajeExito=new u.a}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Editar usuario / Panel de control"),this.usuario=this.fb.group({nombre:["",[s.Validators.required]],apellidos:["",[s.Validators.required]],id:["",[s.Validators.required]],cambiarPassword:[!1,[]],password:[{value:"",disabled:!0},[s.Validators.required]],confirmarPassword:[{value:"",disabled:!0},[s.Validators.required]],avatar:["avatar-circled-user-male"],roles:[[1],[s.Validators.required]],unidades_medicas:[[]],almacenes:[[]]}),this.route.params.subscribe(function(e){t.id=e.id}),this.cargarRoles(),this.cargarUnidadesMedicas()},t.prototype.toggleCambiarPassword=function(){this.cambiarPassword=!this.cambiarPassword,this.cambiarPassword?(this.usuario.get("password").enable(),this.usuario.get("confirmarPassword").enable()):(this.usuario.get("password").disable(),this.usuario.get("confirmarPassword").disable())},t.prototype.enviar=function(){var t=this;if(this.usuario.get("password").value!=this.usuario.get("confirmarPassword").value)return!1;this.cargando=!0;var e=this.usuario.value;this.cambiarPassword||delete e.cambiarPassword,this.usuariosService.editar(this.id,this.usuario.value).subscribe(function(e){t.cargando=!1,console.log("Usuario editado."),t.mensajeExito=new u.a(!0),t.mensajeExito.texto="Se han guardado los cambios.",t.mensajeExito.mostrar=!0},function(e){t.cargando=!1,t.mensajeError=new u.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{var a=e.json();if(401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status){t.mensajeError.texto="Por favor verfique los campos marcados en rojo.",t.usuarioRepetido=!1,t.usuarioInvalido=!1;for(var n in a.error)for(var i in a.error[n])"id"==n&&"unique"==a.error[n][i]&&(t.usuarioRepetido=!0),"id"==n&&"email"==a.error[n][i]&&(t.usuarioInvalido=!0)}}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.cargarDatos=function(){var t=this;this.cargando=!0,console.log("Cargando usuario."),this.usuariosService.ver(this.id).subscribe(function(e){t.cargando=!1,t.datosCargados=!0,t.usuario.patchValue(e),t.unidadesMedicasEdicion=e.unidades_medicas_objs,console.log("Usuario cargado.")},function(e){t.cargando=!1,t.mensajeError=new u.a(!0),t.mensajeError=new u.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.cargarUnidadesMedicas=function(){var t=this;this.cargandoUnidadesMedicas=!0,this.usuariosService.listaUnidadesMedicas().subscribe(function(e){t.unidadesMedicas=e,t.cargandoUnidadesMedicas=!1,console.log("Unidades Médicas cargadas")},function(e){t.cargandoUnidadesMedicas=!1})},t.prototype.cargarRoles=function(){var t=this;this.cargandoRoles=!0,this.rolesService.lista().subscribe(function(e){t.cargandoRoles=!1,t.roles=e,console.log("Roles cargados."),0==t.roles.length&&(t.mensajeAdvertencia=new u.a(!0),t.mensajeAdvertencia.texto="\n            No hay roles registrados en el sistema, póngase en contacto con un administrador.",t.mensajeAdvertencia.mostrar=!0),t.cargarDatos()},function(e){t.cargandoRoles=!1,t.mensajeError=new u.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0,t.cargarDatos();try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para ver los roles."),500==e.status&&(t.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los roles")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los roles":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los roles"}})},t.prototype.regresar=function(){this.location.back()},t}();f=p([a.i(n.Component)({selector:"app-editar",template:a("D4A4"),styles:[a("gJpo")]}),m("design:paramtypes",["function"==typeof(g=void 0!==r.a&&r.a)&&g||Object,"function"==typeof(h=void 0!==o.b&&o.b)&&h||Object,"function"==typeof(v=void 0!==c.a&&c.a)&&v||Object,"function"==typeof(b=void 0!==r.c&&r.c)&&b||Object,"function"==typeof(y=void 0!==i.Location&&i.Location)&&y||Object,"function"==typeof(_=void 0!==l.a&&l.a)&&_||Object,"function"==typeof(x=void 0!==d.a&&d.a)&&x||Object,"function"==typeof(j=void 0!==s.FormBuilder&&s.FormBuilder)&&j||Object])],f);var g,h,v,b,y,_,x,j},AXnp:function(t,e){t.exports='<section class="hero is-warning" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/" routerLinkActive="active">\r\n                    <!--<img src="http://bulma.io/images/bulma-type.png" alt="Bulma logo">-->\r\n                    <span class="icon">\r\n                        <i class="fa fa-safari"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;404</h1>\r\n                    </a>\r\n                </div>\r\n\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>\r\n<section class="hero is-dark is-fullheight has-text-centered">\r\n  <div class="hero-body">\r\n    <div class="container">\r\n      <figure class="image" style="height: auto; width: 25%; display: inline-block;">\r\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" style="fill:#FFF;">\r\n        <path d="M42.128,22.257c0.01-0.192,0.015-0.378,0.015-0.561c0-7.251-5.899-13.149-13.15-13.149c-5.009,0-9.583,2.896-11.78,7.331\tc-1.134-0.751-2.464-1.154-3.857-1.154c-3.703,0-6.745,2.887-6.993,6.528C2.581,22.628,0,26.258,0,30.331C0,35.662,4.338,40,9.67,40\th31.428C46.006,40,50,36.007,50,31.099C50,26.539,46.553,22.769,42.128,22.257z M31,22c1.105,0,2,0.895,2,2c0,1.105-0.895,2-2,2\ts-2-0.895-2-2C29,22.895,29.895,22,31,22z M19,22c1.105,0,2,0.895,2,2c0,1.105-0.895,2-2,2s-2-0.895-2-2C17,22.895,17.895,22,19,22z M34.654,34.756C34.465,34.92,34.232,35,34,35c-0.279,0-0.559-0.117-0.756-0.346C33.214,34.62,29.99,31,25,31\tc-5.022,0-8.212,3.618-8.244,3.654c-0.361,0.418-0.993,0.462-1.41,0.102c-0.418-0.362-0.463-0.993-0.102-1.411\tC15.397,33.168,19.073,29,25,29s9.603,4.168,9.756,4.346C35.117,33.763,35.072,34.395,34.654,34.756z"></path>\r\n        </svg>\r\n      </figure>\r\n      <h1 class="title">¡Lo sentimos!</h1>\r\n      <h2 class="subtitle">El contenido que intentas buscar <strong>no existe</strong>.</h2>\r\n    </div>\r\n  </div>\r\n</section>\r\n\r\n'},AYZA:function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                    \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-server"></i></span> Estatus\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar servidor" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            \r\n            <table class="table" style="font-size:0.9em;" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th style="width:48px;"></th>\r\n                        <th>ID</th>\r\n                        <th>Nombre</th>\r\n                        <th>¿Internet?</th>\r\n                        <th><abbr title="¿Catálogos Actualizados?">¿C.A.?</abbr></th>\r\n                        <th><abbr title="Versión del servidor">Ver.</abbr></th>\r\n                        <th>Periodo Sync</th>\r\n                        <th>Última Sync</th>\r\n                        <th>Tiempo s/Sync</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of lista; let i=index" [ngClass]="{ \'warning\': item.alerta_retraso && !item.principal }">    \r\n                        <td style="vertical-align: middle;"><span class="icon" *ngIf="item.principal"><i class="fa fa-home"></i></span><span class="icon" *ngIf="item.alerta_retraso"><i class="fa fa-warning"></i></span><span class="icon" *ngIf="!item.alerta_retraso && !item.principal" style="color:green"><i class="fa fa-check-circle"></i></span></td>                \r\n                        <td style="vertical-align: middle;">{{ item.id }}</td>   \r\n                        <td style="vertical-align: middle;">{{ item.nombre }}</td>    \r\n                        <td style="vertical-align: middle;">{{ item.tiene_internet ? \'Sí\': \'No\' }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.catalogos_actualizados ? \'Sí\': \'No\' }}</td>                       \r\n                        <td style="vertical-align: middle;">{{ item.version}}</td>\r\n                        <td style="vertical-align: middle;">{{ item.periodo_sincronizacion }} Hrs</td>\r\n                        <td style="vertical-align: middle;">{{ item.ultima_sincronizacion == null ? \'Nunca\' :  item.ultima_sincronizacion }}</td>     \r\n                        <td style="vertical-align: middle;">{{ item.horas_sin_sincronizar }}</td>                            \r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index" [ngClass]="{ \'warning\': item.alerta_retraso && !item.principal }">\r\n                        <td style="vertical-align: middle;"><span class="icon" *ngIf="item.principal"><i class="fa fa-home"></i></span><span class="icon" *ngIf="item.alerta_retraso"><i class="fa fa-warning"></i></span><span class="icon" *ngIf="!item.alerta_retraso && !item.principal" style="color:green"><i class="fa fa-check-circle"></i></span></td>                \r\n                        <td style="vertical-align: middle;">{{ item.id }}</td>   \r\n                        <td style="vertical-align: middle;">{{ item.nombre }}</td>    \r\n                        <td style="vertical-align: middle;">{{ item.tiene_internet ? \'Sí\': \'No\' }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.catalogos_actualizados ? \'Sí\': \'No\' }}</td>                       \r\n                        <td style="vertical-align: middle;">{{ item.version}}</td>\r\n                        <td style="vertical-align: middle;">{{ item.periodo_sincronizacion }} Hrs</td>\r\n                        <td style="vertical-align: middle;">{{ item.ultima_sincronizacion }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.horas_sin_sincronizar }}</td>                            \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n\r\n        </div>\r\n        \r\n       \r\n       \r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n'},Ahcj:function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-wrench"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Actualizar sistema\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n\t\t\t</section>\r\n\t\t\t<section class="section">\r\n\t\t\t\t<h1 class="title">Importante</h1>\r\n\t\t\t\t<p>Antes de realizar cualquier actualización al sistema, es recomendable hacer una <a routerLink="/panel-control/opciones-avanzadas/base-datos">copia de la base de datos</a>.</p>\r\n\t\t\t</section>\r\n\t\t\t<hr>\r\n            <section class="section">\r\n              \t<h1 class="title"><span class="icon is-medium"><i class="fa fa-github"></i></span> Actualización en línea</h1>\r\n\t\t\t  \t<p>Para realizar esta operación es necesario contar con una <strong>conexión a internet</strong>. Este proceso se realizará <span class="icon"><i class="fa fa-magic"></i></span> <strong>automágicamente</strong> <span class="icon"><i class="fa fa-magic"></i></span> después de presionar el siguiente botón:</p>\r\n\t\t\t\t<br>\r\n\t\t\t  \t<div style="text-align:center;"><a class="button is-primary is-medium" [ngClass]="{ \'is-loading\': cargando}" (click)="actualizarViaGit()"><span class="icon"><i class="fa fa-refresh"></i></span> <span>Actualizar ahora</span></a></div>\r\n            </section>\r\n            <hr>\r\n            <section class="section">\r\n                <h1 class="title"><span class="icon is-medium"><i class="fa fa-wrench"></i></span> Actualización manual</h1>\r\n                <p>Este procedimiento es peligroso, solo llevar a cabo si ha recibido la capacitación correspondiente, si tiene dudas pregunte con el personal del <strong>Área de Informática</strong> de la <i>Dirección de Planeación y Desarrollo</i> de  <i>Oficina Central</i>.</p>\r\n            </section>\r\n        </div>\r\n        \r\n       \r\n       \r\n    </div>\r\n</div>\r\n\r\n<div class="modal" [ngClass]="{ \'is-active\': mostrarLog }">\r\n    <div class="modal-background" (click)="mostrarLog = !mostrarLog"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n        <p class="modal-card-title">Detalles de la actualización</p>\r\n        <button class="delete" (click)="mostrarLog = !mostrarLog"></button>\r\n        </header>\r\n        <section class="modal-card-body is-paddingless">\r\n            <div class="content ">\r\n                <pre>{{ logActualizacion }}</pre>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n        <a class="button" (click)="mostrarLog = !mostrarLog">Cerrar</a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n'},Ahyj:function(t,e){t.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Catalogo" class="nav-item pull-left nav-hub-active"  routerLink="/almacen-articulos">\r\n            \r\n            <img src="assets/hub-almacen-articulos.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item" >\r\n                <h1 class="title">&nbsp;Artículos / Catálogos</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},B2Nl:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("p5Ee"),s=a("gHRf"),o=a("Fiuh");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e){this.title=t,this.apiService=e,this.cargando=!1,this.cargandoPresupuestos=!1,this.mensajeError=new s.a,this.mensajeExito=new s.a,this.q="",this.status=[],this.jurisdicciones=[],this.proveedores=[],this.statusSeleccionados=[],this.jurisdiccionesSeleccionadas=[],this.proveedoresSeleccionados=[],this.fecha_desde=null,this.fecha_hasta=null,this.sin_pedidos=!1,this.ordenarCauses="",this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.presupuesto={},this.lista=[],this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.showPedido=!1,this.datos_pedido={},this.recepciones=[],this.transaccion=[],this.borrador=!0,this.borrador_cancelado=!0,this.cargaRecepciones=!1,this.verDialogoArchivos=!1,this.cargandoArchivos=!1,this.lista_archivos_pedido=[],this.tituloDialogoArchivos="",this.datosPedido={}}return t.prototype.ngOnInit=function(){this.mensajeError=new s.a,this.mensajeExito=new s.a,this.title.setTitle("Pedidos / Administrador central"),this.listar(1),this.cargarJurisdicciones(),this.cargarProveedores(),this.status=[{id:"BR",descripcion:"Borradores"},{id:"TR",descripcion:"En Tránsito"},{id:"PS",descripcion:"Por surtir"},{id:"FI",descripcion:"Finalizados"},{id:"EF",descripcion:"En Farmacia"},{id:"EX",descripcion:"Expirados"},{id:"EX-CA",descripcion:"Cancelados"}]},t.prototype.verInformacion=function(t){var e=this;this.cargaRecepciones=!0,this.datos_pedido={},this.datos_pedido=t,this.showPedido=!0,this.borrador=!0,this.borrador_cancelado=!0,this.apiService.verRecepciones(this.datos_pedido.pedido_id).subscribe(function(t){e.cargaRecepciones=!1,t.recepciones?e.recepciones=t.recepciones:e.recepciones=[],"BR"!=t.status&&"EX-CA"!=t.status&&(e.borrador=!1),"EX-CA"==t.status&&(e.borrador_cancelado=!1,e.transaccion=Array(t.log_pedido_cancelado))},function(t){e.cargaRecepciones=!1,e.mensajeError.mostrar=!0,e.mensajeError.texto="Ocurrio un error al ver la información por favor vuelva a intentarlo"})},t.prototype.regresarBorrador=function(t){var e=this;"PEDIDO BORRADOR"==prompt("Para confirmar que desea regresar el pedido a borrador, ingrese PEDIDO BORRADOR ")&&(this.cargaRecepciones=!0,this.apiService.pedidoBorrador(t).subscribe(function(t){e.cargaRecepciones=!1,e.showPedido=!1,e.mensajeExito=new s.a(!0),e.mensajeExito.mostrar=!0,e.mensajeExito.texto="Se ha regresado correctamente el pedido a borrador",e.listar(1)},function(t){e.cargaRecepciones=!1,e.mensajeError=new s.a(!0),e.mensajeError.mostrar=!0,e.mensajeError.texto="Se ha encontrador un error al regresar a borrador el pedido, por favor vuelva a intentarlo "}))},t.prototype.regresarBorradorCancelador=function(t){var e=this;"PEDIDO BORRADOR"==prompt("Para confirmar que desea regresar el pedido a borrador, ingrese PEDIDO BORRADOR")&&(this.cargaRecepciones=!0,this.apiService.pedidoBorradorCancelado(t).subscribe(function(t){e.cargaRecepciones=!1,e.showPedido=!1,e.mensajeExito=new s.a(!0),e.mensajeExito.mostrar=!0,e.mensajeExito.texto="Se ha regresado correctamente el pedido a borrador",e.listar(1)},function(t){e.cargaRecepciones=!1,e.mensajeError=new s.a(!0),e.mensajeError.mostrar=!0,e.mensajeError.texto="Se ha encontrador un error al regresar a borrador el pedido, por favor vuelva a intentarlo ";try{var a=t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),500==t.status?e.mensajeError.texto=a.error:e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(t){e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},t.prototype.borrarRecepcion=function(t){var e=this;"BORRAR RECEPCION"==prompt("Para confirmar que desea borrar la recepcion, ingrese BORRAR RECEPCION")&&(this.cargaRecepciones=!0,this.apiService.recepcionBorrador(t,1).subscribe(function(t){e.mensajeExito=new s.a(!0),e.mensajeExito.mostrar=!0,e.mensajeExito.texto="Se ha borrado correctamente la recepcion de medicamento",e.listar(1),e.apiService.verRecepciones(t.id).subscribe(function(t){e.cargaRecepciones=!1,e.recepciones=t.recepciones,e.datos_pedido.total_claves_recibidas=t.total_claves_recibidas,e.datos_pedido.total_cantidad_recibida=t.total_cantidad_recibida,e.datos_pedido.total_monto_recibido=t.total_monto_recibido,"BR"!=t.status&&(e.borrador=!1)},function(t){e.mensajeError=new s.a(!0),e.cargaRecepciones=!1,e.mensajeError.mostrar=!0,e.mensajeError.texto="Ocurrio un error al cargar los datos de recepciones, por favor vuelva a intentarlo"})},function(t){e.cargaRecepciones=!1,e.mensajeError=new s.a(!0),e.mensajeError.mostrar=!0;try{var a=t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),500==t.status?e.mensajeError.texto=a.error:e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(t){e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},t.prototype.regresarBorrarRecepcion=function(t){var e=this;"REGRESAR RECEPCION"==prompt("Para confirmar que desea regresar la recepcion, ingrese REGRESAR RECEPCION")&&(this.cargaRecepciones=!0,this.apiService.recepcionBorrador(t,2).subscribe(function(t){e.mensajeExito=new s.a(!0),e.mensajeExito.mostrar=!0,e.mensajeExito.texto="Se ha borrado correctamente la recepcion de medicamento",e.listar(1),e.apiService.verRecepciones(t.id).subscribe(function(t){e.cargaRecepciones=!1,e.recepciones=t.recepciones,e.datos_pedido.total_claves_recibidas=t.total_claves_recibidas,e.datos_pedido.total_cantidad_recibida=t.total_cantidad_recibida,e.datos_pedido.total_monto_recibido=t.total_monto_recibido,"BR"!=t.status&&(e.borrador=!1)},function(t){e.cargaRecepciones=!1,e.mensajeError=new s.a(!0),e.mensajeError.mostrar=!0,e.mensajeError.texto="Ocurrio un error al cargar los datos de recepciones, por favor vuelva a intentarlo"})},function(t){e.cargaRecepciones=!1,e.mensajeError=new s.a(!0),e.mensajeError.mostrar=!0;try{var a=t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),500==t.status?e.mensajeError.texto=a.error:e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(t){e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},t.prototype.cargarJurisdicciones=function(){var t=this;this.apiService.jurisdicciones().subscribe(function(e){t.jurisdicciones=e},function(t){})},t.prototype.cargarProveedores=function(){var t=this;this.apiService.proveedores().subscribe(function(e){t.proveedores=e},function(t){})},t.prototype.cambioSeleccionJurisdiccion=function(t){t==-1&&(this.jurisdiccionesSeleccionadas=[]),this.agregarJurisdiccion(t)},t.prototype.cambioSeleccionProveedor=function(t){t==-1&&(this.proveedoresSeleccionados=[]),this.agregarProveedor(t)},t.prototype.cambioSeleccionStatus=function(t){t==-1&&(this.statusSeleccionados=[]),this.agregarStatus(t)},t.prototype.agregarProveedor=function(t){if(t!=-1){for(var e in this.proveedoresSeleccionados)if(this.proveedoresSeleccionados[e].id==t)return;for(var e in this.proveedores)if(this.proveedores[e].id==t){this.proveedoresSeleccionados.push(this.proveedores[e]);break}}},t.prototype.agregarJurisdiccion=function(t){if(t!=-1){for(var e in this.jurisdiccionesSeleccionadas)if(this.jurisdiccionesSeleccionadas[e].id==t)return;for(var e in this.jurisdicciones)if(this.jurisdicciones[e].id==t){this.jurisdiccionesSeleccionadas.push(this.jurisdicciones[e]);break}}},t.prototype.agregarStatus=function(t){if(t!=-1){for(var e in this.statusSeleccionados)if(this.statusSeleccionados[e].id==t)return;for(var e in this.status)if(this.status[e].id==t){this.statusSeleccionados.push(this.status[e]);break}}},t.prototype.quitarProveedor=function(t){this.proveedoresSeleccionados.splice(t,1)},t.prototype.quitarJurisdiccion=function(t){this.jurisdiccionesSeleccionadas.splice(t,1)},t.prototype.quitarStatus=function(t){this.statusSeleccionados.splice(t,1)},t.prototype.filtrarQuery=function(t){13==t.keyCode&&this.listar(1)},t.prototype.toggleCauses=function(){switch(this.ordenarCauses){case"":this.ordenarCauses="ASC";break;case"ASC":this.ordenarCauses="DESC";break;case"DESC":this.ordenarCauses="";break;default:this.ordenarCauses=""}this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.listar(1)},t.prototype.toggleNoCauses=function(){switch(this.ordenarNoCauses){case"":this.ordenarNoCauses="ASC";break;case"ASC":this.ordenarNoCauses="DESC";break;case"DESC":this.ordenarNoCauses="";break;default:this.ordenarNoCauses=""}this.ordenarCauses="",this.ordenarMaterialCuracion="",this.listar(1)},t.prototype.toggleMaterialCuracion=function(){switch(this.ordenarMaterialCuracion){case"":this.ordenarMaterialCuracion="ASC";break;case"ASC":this.ordenarMaterialCuracion="DESC";break;case"DESC":this.ordenarMaterialCuracion="";break;default:this.ordenarMaterialCuracion=""}this.ordenarCauses="",this.ordenarNoCauses="",this.listar(1)},t.prototype.listar=function(t){var e=this;this.cargando=!0,this.paginaActual=t;var a=[];for(var n in this.proveedoresSeleccionados)a.push(this.proveedoresSeleccionados[n].id);var i=[];for(var n in this.jurisdiccionesSeleccionadas)i.push(this.jurisdiccionesSeleccionadas[n].id);var r=[];for(var n in this.statusSeleccionados)r.push(this.statusSeleccionados[n].id);var s={q:this.q,proveedores:a,jurisdicciones:i,status:r,page:this.paginaActual,per_page:this.resultadosPorPagina,ordenar_causes:this.ordenarCauses,ordenar_no_causes:this.ordenarNoCauses,ordenar_material_curacion:this.ordenarMaterialCuracion,fecha_desde:this.fecha_desde,fecha_hasta:this.fecha_hasta};this.cargandoPresupuestos=!0,this.apiService.presupuesto(s).subscribe(function(t){e.cargandoPresupuestos=!1,e.presupuesto=t.data,e.presupuesto.total_modificado=+t.data.causes_modificado+ +t.data.no_causes_modificado+ +t.data.material_curacion_modificado,e.presupuesto.total_comprometido=+t.data.causes_comprometido+ +t.data.no_causes_comprometido+ +t.data.material_curacion_comprometido,e.presupuesto.total_devengado=+t.data.causes_devengado+ +t.data.no_causes_devengado+ +t.data.material_curacion_devengado,e.presupuesto.total_disponible=+t.data.causes_disponible+ +t.data.no_causes_disponible+ +t.data.material_curacion_disponible},function(t){e.cargandoPresupuestos=!1,console.log(t)}),this.apiService.pedidos(s).subscribe(function(t){e.cargando=!1,e.lista=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.exportar=function(){var t="token="+localStorage.getItem("token")+"&ordenar_causes="+this.ordenarCauses+"&ordenar_no_causes="+this.ordenarNoCauses+"&ordenar_material_curacion="+this.ordenarMaterialCuracion;""!=this.q&&(t+="&q="+this.q);var e="";for(var a in this.proveedoresSeleccionados)""!=e&&(e+=","),e+=""+this.proveedoresSeleccionados[a].id;""!=e&&(t+="&proveedores="+e);var n="";for(var a in this.jurisdiccionesSeleccionadas)""!=n&&(n+=","),n+=""+this.jurisdiccionesSeleccionadas[a].id;""!=n&&(t+="&jurisdicciones="+n);var i="";for(var a in this.statusSeleccionados)""!=i&&(i+=","),i+=""+this.statusSeleccionados[a].id;""!=i&&(t+="&status="+i),null!=this.fecha_desde&&(t+="&fecha_desde="+this.fecha_desde),null!=this.fecha_hasta&&(t+="&fecha_hasta="+this.fecha_hasta),window.open(r.a.API_URL+"/administrador-central/pedidos-excel?"+t)},t.prototype.imprimirExcelItem=function(t){var e="token="+localStorage.getItem("token");window.open(r.a.API_URL+"/generar-excel-pedido/"+t+"?"+e)},t.prototype.cerrarDialogoArchivos=function(){this.verDialogoArchivos=!1,this.cargandoArchivos=!1,this.lista_archivos_pedido=[]},t.prototype.mostrarDialogoArchivos=function(t){var e=this;this.verDialogoArchivos=!0,this.cargandoArchivos=!0,this.tituloDialogoArchivos="Folio: "+t.folio,this.datosPedido={folio:t.folio,pedido_id:t.pedido_id},this.apiService.verArchivosPedidoProveedor(t.pedido_id).subscribe(function(t){e.lista_archivos_pedido=t,e.cargandoArchivos=!1},function(t){e.cargandoArchivos=!1,e.mensajeError=new s.a(!0),e.mensajeError.mostrar;try{var a=t.json();401==t.status?e.mensajeError.texto="No tiene permiso para hacer esta operación.":e.mensajeError.texto=a.error}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.descargar=function(t){var e=t.id,a="token="+localStorage.getItem("token"),n=this,i=window.open(r.a.API_URL+"/download-file/"+e+"?"+a),s=0,o=setInterval(function(){s+=1,i.closed?(clearInterval(o),n.mostrarDialogoArchivos(n.datosPedido),n.mensajeError.mostrar=!1,n.mensajeExito.mostrar=!0,n.mensajeExito.iniciarCuentaAtras(),n.mensajeExito.texto="Se ha descargado correctamente el archivo"):5==s&&(clearInterval(o),i.close(),n.mensajeError.mostrar=!0,n.mensajeError.iniciarCuentaAtras(),n.mensajeError.texto="Ocurrio un error al intentar descargar el archivo.")},1e3)},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t}();d=c([a.i(n.Component)({selector:"app-pedidos",template:a("a923"),styles:[a("tYbh")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.b&&i.b)&&u||Object,"function"==typeof(p=void 0!==o.a&&o.a)&&p||Object])],d);var u,p},B5dx:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("qbdv"),s=a("BkNc"),o=a("bm2B"),c=a("/zHi"),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("bbdN")),h=(a.n(g),a("p5Ee")),v=a("gHRf"),b=a("mkhf"),y=a("slEG"),_=a("6Akt");a.d(e,"a",function(){return P});var x=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},j=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},P=function(){function t(t,e,a,n,i,r,s){this.title=t,this.location=e,this.route=a,this._ngZone=n,this.pedidosService=i,this.almacenesService=r,this.fb=s,this.cargando=!1,this.cargandoAlmacenes=!1,this.cargandoInsumos=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.mostrarImprimirDialogo=!1,this.tiposSubPedidos=[],this.subPedidos={},this.formularioTitulo="Nuevo",this.esEditar=!1,this.mostrarModalInsumos=!1,this.cargandoPdf=!1,this.mostrarModalListaClues=!1,this.loteSeleccionado=null}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Nuevo pedido / Almacén"),this.pdfworker=new Worker("web-workers/farmacia/pedidos/pedido-proveedor.js");var e=this,a=this._ngZone;this.pdfworker.onmessage=function(t){a.run(function(){e.cargandoPdf=!1}),g.saveAs(e.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.pdfworker.onerror=function(t){a.run(function(){e.cargandoPdf=!1}),console.log(t)},this.pedido=new _.a(!0),this.route.params.subscribe(function(e){e.id?(t.cargando=!0,t.pedido.id=e.id,t.pedido.status="PS",t.esEditar=!0,t.formularioTitulo="Editar",t.pedidosService.ver(e.id).subscribe(function(e){t.pedido.datosImprimir=e,t.pedido.status=e.status;for(var a in e.insumos){var n=e.insumos[a],i=n.insumos_con_descripcion;i.cantidad=+n.cantidad_solicitada,i.monto=+n.monto_solicitado,i.precio=+n.precio_unitario,i.lista_clues=n.lista_clues,t.pedido.lista.push(i);var r=!1,s="SC";s=n.tipo_insumo.clave,"MC"==n.tipo_insumo.clave&&(r=!0),t.subPedidos[s]||(t.tiposSubPedidos.push(s),t.subPedidos[s]={titulo:n.tipo_insumo.nombre,clave_folio:s,claves:0,cantidad:0,monto:0,iva:0,tiene_iva:r,lista:[]}),t.subPedidos[s].claves++,t.subPedidos[s].cantidad+=i.cantidad,t.subPedidos[s].monto+=i.monto,t.subPedidos[s].lista.push(i)}e.insumos=void 0,t.pedido.indexar(),t.pedido.listar(1),t.cargando=!1},function(e){t.cargando=!1,t.mensajeError=new v.a(!0),t.mensajeError=new v.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}),console.log("editar pedido")):console.log("nuevo pedido")})},t.prototype.obtenerDireccion=function(){if(this.pedido.datosImprimir)return"PS"==this.pedido.datosImprimir.status?"/almacen/pedidos-jurisdiccionales/por-surtir":"ET"==this.pedido.datosImprimir.status?"/almacen/pedidos-jurisdiccionales/en-transito":"FI"==this.pedido.datosImprimir.status?"/almacen/pedidos-jurisdiccionales/finalizados":"EF"==this.pedido.datosImprimir.status?"/almacen/pedidos-jurisdiccionales/farmacia-subrogada":"/almacen/pedidos-jurisdiccionales/todos"},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},t.prototype.mostrarFichaInformativa=function(t,e){t.preventDefault(),t.stopPropagation(),alert(e),console.log(e)},t.prototype.keyboardInput=function(t){32==t.keyCode&&t.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.mostrarModalInsumos=!0),39==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaSiguiente():this.pedido.paginaSiguiente()),37==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaAnterior():this.pedido.paginaAnterior())},t.prototype.toggleModalListaClues=function(t){this.loteSeleccionado=t,this.mostrarModalListaClues=!this.mostrarModalListaClues},t.prototype.imprimirExcel=function(){var t="token="+localStorage.getItem("token");window.open(h.a.API_URL+"/generar-excel-pedido-jurisdiccional/"+this.pedido.id+"?"+t)},t.prototype.imprimir=function(t){void 0===t&&(t="");try{this.cargandoPdf=!0;var e={datos:this.pedido.datosImprimir,insumos:this.subPedidos[t]};this.pdfworker.postMessage(JSON.stringify(e))}catch(t){this.cargandoPdf=!1,console.log(t)}},t.prototype.mostrarDialogo=function(){this.mostrarImprimirDialogo=!0},t.prototype.cerrarDialogo=function(){this.mostrarImprimirDialogo=!1},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();P=x([a.i(n.Component)({selector:"app-ver",template:a("cNwj"),styles:[a("zhJr")],host:{"(window:keydown)":"keyboardInput($event)"}}),j("design:paramtypes",["function"==typeof(I=void 0!==i.b&&i.b)&&I||Object,"function"==typeof(E=void 0!==r.Location&&r.Location)&&E||Object,"function"==typeof(k=void 0!==s.c&&s.c)&&k||Object,"function"==typeof(C=void 0!==n.NgZone&&n.NgZone)&&C||Object,"function"==typeof(A=void 0!==y.a&&y.a)&&A||Object,"function"==typeof(S=void 0!==b.a&&b.a)&&S||Object,"function"==typeof(q=void 0!==o.FormBuilder&&o.FormBuilder)&&q||Object])],P);var I,E,k,C,A,S,q},BFvY:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("BkNc"),s=a("5v8a"),o=(a.n(s),a("p5Ee"));a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e){this.http=t,this.router=e,this.headers=new i.Headers({"Content-Type":"application/json"})}return t.prototype.login=function(t,e){return this.http.post(o.a.API_URL+"/obtener-token",JSON.stringify({id:t,password:e}),{headers:this.headers}).map(function(t){var e=t.json();if(e.token){console.log("Token obtenido.");var a=JSON.parse(localStorage.getItem("usuario"));if(localStorage.removeItem("token"),localStorage.removeItem("usuario"),localStorage.removeItem("server_info"),e.usuario.clues_activa=null,e.usuario.almacen_activo=null,e.usuario.proveedor_activo=null,e.usuario.proveedores)if(a&&a.id==e.usuario.id){var n=!1;if(a.proveedor_activo)for(var i in e.usuario.proveedores)if(a.proveedor_activo.id==e.usuario.proveedores[i].id){e.usuario.proveedor_activo=e.usuario.proveedores[i],n=!0;break}n||(e.usuario.proveedor_activo=e.usuario.proveedores[0])}else e.usuario.proveedor_activo=e.usuario.proveedores[0];if(e.usuario.unidades_medicas.length>0){if(a&&a.id==e.usuario.id){var n=!1;if(a.clues_activa)for(var i in e.usuario.unidades_medicas)a.clues_activa.clues==e.usuario.unidades_medicas[i].clues&&(e.usuario.clues_activa=e.usuario.unidades_medicas[i],n=!0);n||(e.usuario.clues_activa=e.usuario.unidades_medicas[0])}else console.log("OOO aqui."),e.usuario.clues_activa=e.usuario.unidades_medicas[0];if(e.usuario.clues_activa.almacenes.length>0)if(a&&a.id==e.usuario.id){var n=!1;if(a.almacen_activo)for(var i in e.usuario.clues_activa.almacenes)a.almacen_activo.id==e.usuario.clues_activa.almacenes[i].id&&(e.usuario.almacen_activo=e.usuario.clues_activa.almacenes[i],n=!0);n||(e.usuario.almacen_activo=e.usuario.clues_activa.almacenes[0])}else e.usuario.almacen_activo=e.usuario.clues_activa.almacenes[0];else e.usuario.almacen_activo=null}else e.usuario.clues_activa=null,e.usuario.almacen_activo=null;localStorage.setItem("token",e.token),localStorage.setItem("usuario",JSON.stringify(e.usuario)),localStorage.setItem("server_info",JSON.stringify(e.server_info))}})},t.prototype.refreshToken=function(){var t="refresh-token?token="+localStorage.getItem("token");return this.http.post(o.a.API_URL+"/"+t,{},{headers:this.headers}).map(function(t){var e=t.json();e.token&&(console.log("Token renovado."),localStorage.removeItem("token"),localStorage.removeItem("server_info"),localStorage.setItem("token",e.token),localStorage.setItem("server_info",JSON.stringify(e.server_info)))})},t.prototype.logout=function(t){void 0===t&&(t=null),localStorage.removeItem("token"),localStorage.removeItem("usuario"),localStorage.removeItem("server_info"),null!=t?this.router.navigate(["login"],{queryParams:{returnUrl:decodeURIComponent(t.replace(/\+/g," "))}}):this.router.navigate(["login"])},t}();d=c([a.i(n.Injectable)(),l("design:paramtypes",["function"==typeof(u=void 0!==i.Http&&i.Http)&&u||Object,"function"==typeof(p=void 0!==r.a&&r.a)&&p||Object])],d);var u,p},Bbmo:function(t,e,a){"use strict";var n=a("/oeL"),i=a("QTrI");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=c=function(){function t(t){this.jwtRequest=t}return t.prototype.buscar=function(t){return void 0===t&&(t={q:"",page:1,per_page:20}),this.jwtRequest.get(c.URL,null,t).map(function(t){return t.json().data})},t.prototype.listaPaginada=function(t){return void 0===t&&(t={page:1,per_page:20}),this.jwtRequest.get(c.URL,null,t).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(c.URL,t,{}).map(function(t){return t.json().data})},t.prototype.validar=function(t){return this.jwtRequest.put(c.URL+"/validacion",t,null).map(function(t){return t.json().data})},t}();o.URL="administrador-central/pedidos-alternos",o=c=r([a.i(n.Injectable)(),s("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object])],o);var c,l},BeiC:function(t,e){t.exports='<section class="hero is-primary" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/dashboard" routerLinkActive="active">\r\n                    <!--<img src="http://bulma.io/images/bulma-type.png" alt="Bulma logo">-->\r\n                    <span class="icon">\r\n                        <i class="fa fa-tachometer"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;Dashboard</h1>\r\n                    </a>\r\n                </div>\r\n\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},BgMt:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.title=t,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return t.prototype.ngOnInit=function(){this.title.setTitle("Almacén / Equipamiento"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[],this.accesosDirectos=[];var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(e.length>0){for(var a in this.modulos)t:for(var n in e)if(e[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break t}for(var a in this.accesosDirectos)t:for(var n in e)if(e[n]==this.accesosDirectos[a].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[a]);break t}}},t}();o=r([a.i(n.Component)({selector:"app-index-equipamiento",template:a("4u/i"),styles:[a("Coqx")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},"Biw/":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{cursor:pointer}.item.seleccionado{background:#ccc}.item.seleccionado .icon{color:#fff!important}.item.seleccionado .item-detalle{display:inherit}.item .item-detalle{display:none}.item.asignado{background:#ddd;color:#777}tr.filtro td,tr.filtro th{color:#fff;background:#4a4a4a!important}.contenedor-tabla{overflow:auto;width:100%;height:99%!important;display:block;position:absolute;left:0;top:0}.contenedor-tabla table{border-radius:3px}@media screen and (max-width:768px){.contenedor-tabla{position:relative}.tile.notification{padding:0!important}}",""]),t.exports=t.exports.toString()},"Bm+q":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("aSkF"),s=a("sB99"),o=a("B5dx"),c=a("FUGJ"),l=a("D9tw"),d=a("2qAn");a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=[{path:"almacen/pedidos-jurisdiccionales",redirectTo:"/almacen/pedidos-jurisdiccionales/todos",pathMatch:"full"},{path:"almacen/pedidos-jurisdiccionales",children:[{path:"todos",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"borradores",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"en-transito",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"por-surtir",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"finalizados",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"finalizados/completos",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"finalizados/incompletos",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"finalizados/cancelados",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"expirados",component:r.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"nuevo",component:s.a,canActivate:[d.a],data:{key:"2nC6GUf6E737QwZSxuLORT6rZUDy5YUO"}},{path:"editar/:id",component:s.a,canActivate:[d.a],data:{key:"hytR4HSKgea9JJ1HEfjpfjijQ8UAtyQn"}},{path:"ver/:id",component:o.a,canActivate:[d.a],data:{key:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"}},{path:"recepcion/:id",component:c.a,canActivate:[d.a],data:{key:"ipeaGitpjrNFRrB0SjP571C0Xw5tQULZ"}}],canActivate:[l.a]}],m=function(){function t(){}return t}();m=u([a.i(n.NgModule)({imports:[i.b.forChild(p)],exports:[i.b],providers:[]})],m)},BnEL:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333}.contenedor-pedido.con-tabs .top-bar{padding:.5em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-pedido{background:#fff;border-radius:1em;overflow:hidden}.contenedor-pedido.con-tabs{border-top-left-radius:0!important;border-top-right-radius:0!important}",""]),t.exports=t.exports.toString()},BruR:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.mostrarMenuAside=!1,this.usuario={}}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t.prototype.toggleMenuAside=function(){this.mostrarMenuAside=!this.mostrarMenuAside},t}();s=i([a.i(n.Component)({selector:"panel-control-menu",template:a("D0yk"),styles:[a("2LGo")]}),r("design:paramtypes",[])],s)},C9MY:function(t,e){t.exports='<formulario #ctrl URL="ajuste-menos-inventario" titulo="Ajuste menos de inventario" [dato]="dato"></formulario>\r\n<app-menu-inventario [modulo]="\'Ajuste menos de inventario\'" [icono]="\'assets/icono-stock.svg\'" [url]="\'/inventario/ajuste-menos-inventario\'"></app-menu-inventario>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato">\r\n    <div class="contenedor columns " style="height:100%">\r\n        <!-- apartado de insumos -->\r\n        <div class="column is-one-third" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <h1 *ngIf="!tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> {{ctrl.moduloTitulo}}\r\n                    </h1>\r\n                    <h1 *ngIf="tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> Folio {{ctrl.id}}\r\n                    </h1>\r\n                </section>\r\n                <div style="padding: 1em;">\r\n                    <h3 class="title">\r\n                        <i class="fa fa-file"></i>\r\n                         Datos del ajuste\r\n                    </h3>\r\n                    <div>\r\n                        <div class="field">\r\n                            <label class="label">Observaciones:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <textarea class="textarea" type="text" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched}"\r\n                                    placeholder="Observaciones" formControlName="observaciones"></textarea>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- apartado de insumos -->\r\n        <div class="column" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <div class="hero-body">\r\n                        <nav class="level">\r\n                            <div class="level-left"></div>\r\n                            <!-- Right side -->\r\n                            <div class="level-right">\r\n                                <p class="level-item"><a class="button is-primary" (click)="ctrl.regresar()">Regresar</a></p>\r\n                                <p class="level-item" *ngIf="tieneid"><a class="button is-primary" routerLink="/inventario/ajuste-menos-inventario/nuevo" *ngIf="!ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nuevo ajuste menos </span></a></p>\r\n                                <p class="level-item" *ngIf="tieneid"><a *ngIf="tieneid" class="button is-primary" (click)="array_servicios = ctrl.servicios; array_turnos = ctrl.turnos; imprimir();"><span class="icon"><i class="fa fa-print"></i></span></a></p>\r\n                                <p class="level-item" *ngIf="!tieneid">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="guardar_movimiento()" [disabled]="ctrl.dato.invalid"> <span class="icon"><i class="fa fa-floppy-o" aria-hidden="true"></i></span> &nbsp; Guardar</button>\r\n                                </p>\r\n                                <p class="level-item"><a class="button is-primary" title="Actualizar" (click)="ctrl.cargarDatos();"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                                <p class="level-item">&nbsp;</p>\r\n                            </div>\r\n                        </nav>\r\n                        \r\n                        <div class="container is-fluid">\r\n                            <h1 class="title">\r\n                                <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                                <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Insumos\r\n                            </h1>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                    <br>\r\n                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                </div>\r\n                <section class="section">\r\n                    <div class="field has-addons has-addons-centered" *ngIf="!tieneid">\r\n                        <p class="control">\r\n                            <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" id="buscarInsumo" value-property-name="clave"\r\n                                display-property-name="descripcion" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                                (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                                type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n                        </p>\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div style="height:20px;"></div>\r\n\r\n                    <div formArrayName="insumos" style="overflow: scroll; overflow-x: hidden; height: 530px;">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos.controls; let i=index" [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(120, 162, 51, 0.16)\' : \'rgba(206, 249, 197, 0.44)\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <a *ngIf="!tieneid" class="is-danger" title="Quitar este elemento de la lista" style="float:right" (click)="ctrl.quitar_form_array(ctrl.dato.controls.insumos,i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                        <p>\r\n                                            <strong *ngIf="!tieneid">\r\n                                                <a (click)="select_insumo_autocomplete(item.value)"> \r\n                                                    <span style="color:cornflowerblue"> Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }}\r\n                                                    </span>\r\n                                                    <span style="color:black"> Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}} </span>\r\n                                                \r\n                                                    <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 1"><strong>Cause </strong></label>\r\n                                                    <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 0"><strong>No Cause </strong> </label>                                           \r\n                                                                                                \r\n                                                    <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value == 1\r\n                                                    "><strong>Unidosis</strong> </label>\r\n                                                </a>\r\n                                            </strong>\r\n                                            <strong *ngIf="tieneid">\r\n                                                <span style="color:cornflowerblue"> Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }}\r\n                                                </span>\r\n                                                <span style="color:black"> Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}} </span>\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 1"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 0"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value == 1\r\n                                                "><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                        <a class="is-danger" title="Ver la lista de lotes de este articulo" style="float:right" (click)="ver_lotes_asignados(i)"> \r\n                                        </a>\r\n                                    </div>\r\n                                    <section>\r\n                                        <table class="table is-narrow is-bordered is-striped">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Lote</th>\r\n                                                    <th>Caducidad</th>\r\n                                                    <th>Codigo de barras</th>\r\n                                                    <th *ngIf=\'!tieneid\'>Existencia</th>\r\n                                                    <th *ngIf=\'tieneid\'>Existencia anterior</th>                                                \r\n                                                    <th>Nueva existencia</th>\r\n                                                    <th *ngIf="!tieneid"></th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody formArrayName="lotes">\r\n                                                <tr *ngFor="let val of ctrl.dato.controls.insumos.controls[i].controls.lotes.controls;  let i2 = index;">\r\n                                                    <td><span *ngIf="val.value.nuevo == 1" class="tag is-success is-small ">Nuevo</span> &nbsp; {{val.value.lote}}</td>\r\n                                                    <td>{{val.value.fecha_caducidad}}</td>\r\n                                                    <td>{{val.value.codigo_barras}}</td>\r\n                                                    <td *ngIf="!tieneid">{{val.value.existencia}}</td>\r\n                                                    <td *ngIf="tieneid">{{val.value.existencia_anterior}}</td>\r\n                                                    <td [formGroupName]="i2">\r\n                                                        <input *ngIf="!tieneid" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2, modo)" type="number" step="1"\r\n                                                            min="0" max="{{item.existencia - 1}}" placeholder="Cantidad" formControlName="cantidad">\r\n                                                        <input *ngIf="tieneid" class="input has-text-centered" type="number" step="1"  min="{{val.value.existencia + 1}}"\r\n                                                            placeholder="Cantidad" formControlName="nueva_existencia" readonly>\r\n                                                    </td>\r\n                                                    <td *ngIf="!tieneid">\r\n                                                        <a class="is-danger" title="Quitar este lote" (click)="quitar_lote_insumo(i, val.value, i2)">\r\n                                                            <span class="icon">\r\n                                                                <i class="fa fa-trash-o"></i>\r\n                                                            </span>\r\n                                                        </a>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </section>\r\n                                    <nav class="level is-mobile">\r\n                                        <div class="level-left">\r\n                                        </div>\r\n                                        <div class="level-right">\r\n                                            <a class="level-item" >\r\n                                                <div class="field">\r\n                                                    <label class="label" *ngIf="!tieneid">Total ({{ctrl.dato.controls.insumos.controls[i].controls.presentacion_nombre.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}">\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                        </div>\r\n                                    </nav>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n\r\n<div class="modal" id="verLotes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card" style="width: 60%;">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title" id="tituloModal" style="width: 200px"> </p>\r\n            <button type="button" class="delete" (click)="cancelarModal(\'verLotes\'); modo = \'N\';"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="columns">\r\n                <div class="column is-two-thirds">\r\n                    <div class="columns">\r\n                        <div class="column is-4">\r\n                            <label class="label" style="font-size: large;float: left;margin-right: 6%;">Ajuste menos : </label>\r\n                        </div>\r\n                        <label for="modo_n">\r\n                            <span class="tag is-large is-success">Normal</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n            <table class="table is-narrow is-bordered is-striped">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Lote</th>\r\n                        <th>Caducidad</th>\r\n                        <th>Codigo de barras</th>\r\n                        <th>Existencia</th>\r\n                        <th>Nueva existencia</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lotes_insumo;  let i = index;">\r\n                        <td *ngIf="!item.nuevo">{{item.lote}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Lote" [(ngModel)]="item.lote"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.fecha_caducidad}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="date" placeholder="Fecha de caducidad" [(ngModel)]="item.fecha_caducidad"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.codigo_barras}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Codigo de barras" [(ngModel)]="item.codigo_barras"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.existencia}}</td>\r\n                        <td *ngIf="item.nuevo "></td>\r\n                        <td>\r\n                            <input class="input has-text-centered" type="number" step="1" (keypress)="quitar_punto($event)"  (keyup)="comprobar_cant_lotes()"\r\n                            (change)="comprobar_cant_lotes()" min="0" max="{{item.existencia - 1}}" placeholder="Nueva Existencia" [(ngModel)]="item.cantidad">\r\n                        </td>\r\n                        <td *ngIf="item.nuevo">\r\n                            <a class="delete" (click)=eliminarLote(i)></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </section>\r\n        <footer class="modal-card-foot">                          \r\n            <a class="button is-success" [ngClass]="{\'is-disabled\':!sum_cant_lotes}" (click)="validarLotesInsumo()">Aceptar</a>\r\n            <a class="button" (click)="cancelarModal(\'verLotes\'); modo = \'N\';">Cancelar</a>\r\n            <div class="card-footer-item"></div>\r\n        </footer>\r\n        <simple-notifications [options]="options"></simple-notifications>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="negarExistencia">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\r\n            <button class="delete" (click)="cancelarModal(\'negarExistencia\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <h1>¿Esta seguro de negar la existencia del insumo?</h1>\r\n                <p>Ya no se podra cambiar la cantidad negada</p>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="agregarLoteIsumo()">Continuar</a>\r\n            <a class="button" (click)="cancelarModal(\'negarExistencia\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="guardarMovimiento">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\r\n            <button class="delete" (click)="cancelarModal(\'guardarMovimiento\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <h1>¿Esta seguro de guardar el ajuste MENOS?</h1>\r\n                <p>Ya no se podrá realizar cambios</p>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="ctrl.enviar(); cancelarModal(\'guardarMovimiento\')">Continuar</a>\r\n            <a class="button" (click)="cancelarModal(\'guardarMovimiento\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},CODE:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bm2B");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.fb=t}return t.prototype.ngOnInit=function(){this.dato=this.fb.group({id:["",[i.Validators.required]],nombre:["",[i.Validators.required]]})},t}();o=r([a.i(n.Component)({selector:"vias-administracion-formulario",template:a("kn2l")}),s("design:paramtypes",["function"==typeof(c=void 0!==i.FormBuilder&&i.FormBuilder)&&c||Object])],o);var c},COjq:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.buscar=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get(l.URL,null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.listaCompleta=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get("admision/paciente-egreso",null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.buscarCompleta=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get("admision/paciente-egreso",null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.listaMunicipios=function(t){return this.jwtRequest.get("admision/municipio",t,null).map(function(t){return t.json().data})},t.prototype.listaLocalidades=function(t,e){return this.jwtRequest.get("admision/localidad",e,{municipio_id:t}).map(function(t){return t.json().data})},t.prototype.listaMotivoEgreso=function(){return this.jwtRequest.get("admision/motivo-egreso",null,null).map(function(t){return t.json().data})},t.prototype.listaTriage=function(t){return this.jwtRequest.get("admision/triage",null,{triage_id:t}).map(function(t){return t.json().data})},t.prototype.listaGradoLesion=function(t){return this.jwtRequest.get("admision/grado-lesion",null,{grado_lesion_id:t}).map(function(t){return t.json().data})},t.prototype.listaUnidades=function(t,e){return this.jwtRequest.get("unidades-medicas",null,{lista:t,clues:e}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return console.log(t.json().data),t.json().data})},t.prototype.editar=function(t,e){return this.jwtRequest.put(l.URL,t,e).map(function(t){return t.json().data})},t.prototype.ingreso=function(t,e){return this.jwtRequest.put("admision/admision",t,e).map(function(t){return t.json().data})},t.prototype.crear=function(t){return this.jwtRequest.post("admision/paciente-egreso",t).map(function(t){return t.json().data})},t}();c.URL="admision/paciente-egreso",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},CUfC:function(t,e){t.exports='<section class="hero is-dark" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/panel-control" routerLinkActive="active">\r\n                    <!--<img src="http://bulma.io/images/bulma-type.png" alt="Bulma logo">-->\r\n                     <span class="icon">\r\n                        <i class="fa fa-cog"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;Panel de control</h1>\r\n                    </a>\r\n                </div>\r\n                <a class="nav-item is-hidden-tablet" (click)="toggleMenuAside()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-navicon"></i>\r\n                    </span>\r\n                </a>\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>\r\n\r\n<div class="modal" [ngClass]="{\'is-active\': mostrarMenuAside}">\r\n  <div class="modal-background" (click)="toggleMenuAside()"></div>\r\n  <div class="modal-content">\r\n    <div class="card" style="width: 100%">\r\n        <div class="card-content">\r\n            <panel-control-menu-aside></panel-control-menu-aside>\r\n        </div>\r\n    </div>\r\n  </div>\r\n  <button class="modal-close" (click)="toggleMenuAside()"></button>\r\n</div>'},CWbX:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("ZKLV"),s=a("MRcw"),o=a("hN3r");a.d(e,"a",function(){return l});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=function(){function t(){}return t}();l=c([a.i(n.NgModule)({imports:[i.CommonModule,o.a.forRoot()],exports:[r.a,s.a],declarations:[r.a,s.a]})],l)},CcP3:function(t,e){t.exports='<app-menu-inventario [modulo]="\'Inicialización de Inventario\'" [icono]="\'assets/icono-ajustes-inventario.svg\'" [url]="\'/inventario/inicializacion-inventario\'"></app-menu-inventario>\r\n\r\n<div class="is-fullwidth has-text-centered" style="padding-top:70px;" *ngIf="cargando">\r\n  <br>\r\n  <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n  <br>\r\n  <br>\r\n</div>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="inventario">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile is-parent is-12 ">\r\n      <div class="tile is-child notification is-dark">\r\n        <div class="columns">\r\n          <div class="column" >\r\n            <div style="padding:1em;">\r\n              Almacen: <strong style="color:white !important;">{{almacen_seleccionado.nombre}}</strong>\r\n               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Claves en Inventario: <strong style="color:white !important;">{{ lotesSurtidos.length  }}</strong>\r\n               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span *ngIf="statusCaptura == \'BR\'"><strong style="color:#FFF;">Captura inciada</strong></span>\r\n               <span *ngIf="statusCaptura == \'FI\'"><strong style="color:#FFF;">Captura concluida</strong></span>\r\n            </div>\r\n          </div>\r\n          <div class="column">\r\n            <div style="padding:1em;">\r\n                Valor Total del Inventario: <strong style="color:white !important;">$ {{ ( inventario.totalMontoMaterialCuracion + inventario.totalMontoNoCauses + inventario.totalMontoCauses ).toFixed(2) | number: \'1.2-2\' }}</strong>\r\n            </div>\r\n          </div>\r\n          <div class="column is-4" style="text-align:right; " *ngIf="statusCaptura != \'FI\'">\r\n            <div style="margin:1em;">\r\n            <a *ngIf="!guardando && statusCaptura == \'BR\'" class="button is-primary" style="width:45%; margin-right:5%;" (click)="finalizar()"> <span class="icon"><i class="fa fa-check"></i></span> <span>Concluir</span></a>\r\n            <a  class="button is-white"  style="width:45%"  [ngClass]="{ \'is-loading\': guardando }"  (click)="guardar()"> <span class="icon"><i class="fa fa-save"></i></span> <span>Guardar</span></a>\r\n            </div>\r\n          </div>\r\n        </div>       \r\n      </div>\r\n    </div>\r\n    <div class="tile">\r\n      <div class="tile is-parent is-vertical">\r\n        <div class="tile is-child notification is-white" >\r\n           \r\n          <div class="contenedor-tabla" >\r\n            <div style="padding: 1em;">\r\n              <form name="form" novalidate>\r\n                <label class="label">Descripción:</label>\r\n                <p class="control is-expanded  has-icon has-icon-right">\r\n                  <input type="text" class="input is-fullwidth" name="descripcion" [(ngModel)]="formulario.datos.descripcion">\r\n                  <span *ngIf="!formulario.validacion.valido && formulario.validacion.errores.descripcion" class="icon is-small">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span  *ngIf="!formulario.validacion.valido && formulario.validacion.errores.descripcion?.required" class="help is-danger">Este campo es requerido.</span>\r\n                </p>\r\n                <div class="control">\r\n                  <textarea name="observaciones" class="textarea" placeholder="Observaciones" [(ngModel)]="formulario.datos.observaciones"></textarea>\r\n                </div>\r\n              </form>\r\n            </div>\r\n\r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em; ">\r\n              <thead>\r\n                  <tr  [ngClass]="{ \'filtro\': inventario.filtro.activo}">\r\n                    <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Filtro:</th>\r\n                    <th>\r\n                      <p class="control is-expanded">\r\n                        <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                        <!--input class="input is-small" type="text" placeholder="Clave o Descripción" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])"-->\r\n                        <input class="input is-small" type="text" placeholder="Clave o Descripción" #searchBoxDescripcionClave id="search-box-descripcion-clave" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                      </p>\r\n                    </th>  \r\n                    \r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cantidad</abbr></th>\r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Surtido">Lotes</abbr></th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody *ngIf="!inventario.filtro.activo">\r\n                <tr class="item" *ngFor="let item of inventario.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">\r\n                      <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado"><i class="fa fa-check-circle"></i></span>\r\n                      <span class="icon" style="color:gray;" *ngIf="!item.totalStockAsignado"><i class="fa fa-circle-thin"></i></span>\r\n                  </td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                      <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    <!--b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br-->\r\n                    <div class="item-detalle">\r\n                      <!--div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div-->\r\n                      \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ (item.listaStockAsignado)?item.listaStockAsignado.length:0 }}</th>\r\n                </tr>      \r\n              </tbody>\r\n              <tbody *ngIf="inventario.filtro.activo">\r\n                <tr class="item"  *ngFor="let item of inventario.filtro.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">\r\n                      <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado"><i class="fa fa-check-circle"></i></span>\r\n                      <span class="icon" style="color:gray;" *ngIf="!item.totalStockAsignado"><i class="fa fa-circle-thin"></i></span>\r\n                  </td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                     <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    <!--b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br-->\r\n                    <div class="item-detalle">\r\n                      <!--div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div-->\r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ (item.listaStockAsignado)?item.listaStockAsignado.length:0 }}</th>\r\n                </tr>   \r\n              </tbody>              \r\n            </table>\r\n            <paginacion style=" width:100%; height:auto; bottom:0; left:0px; background:#FFF;"\r\n                [total]="inventario.lista.length" \r\n                [paginasTotales]="inventario.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="inventario.paginacion.resultadosPorPagina" \r\n                [paginaActual]="inventario.paginacion.paginaActual" \r\n                [indicePaginas]="inventario.paginacion.indice"\r\n                (onSiguiente)="inventario.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="inventario.paginaAnterior(); limpiarStock();" \r\n                (onListar)="inventario.listar($event);limpiarStock();" \r\n                *ngIf="inventario.lista.length > 0 && inventario.lista.length > inventario.paginacion.resultadosPorPagina && !inventario.filtro.activo"></paginacion>\r\n\r\n            <paginacion \r\n                [total]="inventario.filtro.lista.length" \r\n                [paginasTotales]="inventario.filtro.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="inventario.filtro.paginacion.resultadosPorPagina" \r\n                [paginaActual]="inventario.filtro.paginacion.paginaActual" \r\n                [indicePaginas]="inventario.filtro.paginacion.indice"\r\n                (onSiguiente)="inventario.filtro.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="inventario.filtro.paginaAnterior();  limpiarStock();" \r\n                (onListar)="inventario.filtro.listar($event); limpiarStock();" \r\n                *ngIf="inventario.filtro.lista.length > 0 && inventario.filtro.lista.length > inventario.filtro.paginacion.resultadosPorPagina && inventario.filtro.activo"></paginacion>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="tile is-parent is-vertical ">\r\n        <div class="tile is-parent is-12">\r\n            <div class="tile is-parent" style="padding:0px;">\r\n          <article class="tile is-child notification is-success has-text-centered" style="padding:0.5rem 0.5rem 0.5rem 0.5rem">\r\n              <div class="content" *ngIf="!cargandoPresupuestos">\r\n                  <p class="subtitle" style="font-weight:bold;">\r\n                      <small>\r\n                          Causes:<br> \r\n                          $ {{ inventario.totalMontoCauses.toFixed(2) | number: \'1.2-2\' }}\r\n                      </small>\r\n                  </p>\r\n              </div>\r\n              <div class="content" *ngIf="cargandoPresupuestos">\r\n                  <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span>\r\n              </div>\r\n          </article>\r\n\r\n          <article class="tile is-child notification is-danger has-text-centered" style="padding:0.5rem 0.5rem 0.5rem 0.5rem">\r\n              <div class="content" *ngIf="!cargandoPresupuestos">\r\n                  <p class="subtitle" style="font-weight:bold;">\r\n                      <small>\r\n                          No Causes:<br>  $ {{ inventario.totalMontoNoCauses.toFixed(2) | number: \'1.2-2\' }}\r\n                      </small>\r\n                  </p>\r\n              </div>\r\n              <div class="content" *ngIf="cargandoPresupuestos">\r\n                  <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span>\r\n              </div>\r\n          </article>\r\n\r\n          <article class="tile is-child notification is-warning has-text-centered" style="padding:0.5rem 0.5rem 0.5rem 0.5rem">\r\n              <div class="content" *ngIf="!cargandoPresupuestos">\r\n                  <p class="subtitle" style="font-weight:bold;">\r\n                      <small>\r\n                          Material de Curación:<br> \r\n                          $ {{ inventario.totalMontoMaterialCuracion.toFixed(2) | number: \'1.2-2\' }}\r\n                      </small>\r\n                  </p>\r\n              </div>\r\n              <div class="content" *ngIf="cargandoPresupuestos">\r\n                  <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span>\r\n              </div>\r\n          </article>\r\n            </div>\r\n        </div>\r\n        <div *ngIf="capturarStock" class="tile is-child notification">\r\n          <div class="control is-grouped">\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <label class="label">Código de Barras</label>\r\n              <input class="input" autofocus type="text" placeholder="Código de Barras" [(ngModel)]="formStock.codigo_barras">\r\n            </p>\r\n          </div>\r\n\r\n          <div class="control is-grouped">\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <label class="label">Lote</label>\r\n              <input class="input" autofocus type="text" placeholder="Lote" [(ngModel)]="formStock.lote">\r\n              <span *ngIf="erroresFormularioStock.lote.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.lote.error" class="help is-danger">{{erroresFormularioStock.lote.texto}}</span>\r\n            </p>\r\n            <p class="control is-expanded has-icon has-icon-right">\r\n              <label class="label">Caducidad (aaaa-mm-dd)</label>\r\n              <input class="input" type="text" placeholder="aaaa-mm-dd" [(ngModel)]="formStock.fecha_caducidad">\r\n              <span *ngIf="erroresFormularioStock.fecha_caducidad.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.fecha_caducidad.error" class="help is-danger">{{erroresFormularioStock.fecha_caducidad.texto}}</span>\r\n            </p>\r\n            <p class="control is-expanded has-icon has-icon-right">\r\n              <label class="label">Cantidad</label>\r\n              <input class="input" type="number" placeholder="Cantidad" [(ngModel)]="formStock.cantidad">\r\n              <span *ngIf="erroresFormularioStock.cantidad.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.cantidad.error" class="help is-danger">{{erroresFormularioStock.cantidad.texto}}</span>\r\n            </p>\r\n          </div>\r\n\r\n          <div class="control is-grouped is-pulled-right " >\r\n            <p class="control is-expanded">\r\n            </p>\r\n            <p class="control">\r\n                <button class="button is-medium is-primary " (click)="asignarStock()">\r\n                  <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar</span>\r\n                </button>\r\n            </p>\r\n            <p class="control">\r\n                <button class="button is-medium "  (click)="cancelarCapturaStock()">\r\n                  <span>Cancelar</span>\r\n                </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class="tile is-child  notification is-white">\r\n          <div class="contenedor-tabla">\r\n            <table class="table" *ngIf="!cargando && itemSeleccionado != null" style="font-size: 0.8em;" >\r\n              <thead>\r\n                  <tr style="background: #00d1b2;">\r\n                    <th style="color:#FFF !important;">Código</th>\r\n                    <th style="color:#FFF !important;">Lote</th>\r\n                    <th style="color:#FFF !important;">Caducidad</th>\r\n                    <th style="color:#FFF !important;"><abbr title="Cantidad">Cant.</abbr></th>  \r\n                    <th></th>              \r\n                  </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th colspan="4" style="text-align:right">\r\n                  </th>\r\n                  <td style="text-align:center">{{ itemSeleccionado.totalStockAsignado || 0 }}</td>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                  <tr  class="is-unselectable" *ngFor="let item of itemSeleccionado.listaStockAsignado">\r\n                    <td>{{ item.codigo_barras}}</td>\r\n                    <td>{{ item.lote }}</td>\r\n                    <td [ngClass]="{\'rojo\':item.esta_caducado}">{{ item.fecha_caducidad | date:\'dd/MM/y\' }} <br><small *ngIf="item.esta_caducado">Caducado</small></td>\r\n                    <td style="width:150px !important;">\r\n                        <p class="control is-expanded">\r\n                        <input class="input is-small has-text-centered"  type="number" min="1" max="{{item.existencia}}" placeholder="Cant" [(ngModel)]="item.cantidad" (change)="calcularTotalStockItem()" (keyup)="calcularTotalStockItem()">\r\n                        </p>\r\n                    </td> \r\n                    <td style="vertical-align: middle;" class="has-text-centered"><a  class="is-danger" (click)="eliminarStock(item)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>                    \r\n                  </tr>\r\n              </tbody>  \r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},CcWT:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("LLho"),d=a("7YyF"),u=a("F1l5"),p=a("ZY5e"),m=a("JiRb"),f=a("5wAI"),g=a("oPe8"),h=a("brX9"),v=a("6oSH");a.d(e,"a",function(){return y});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=function(){function t(){}return t}();y=b([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a,u.a,p.a],declarations:[f.a,m.a,g.a,h.a,v.a]})],y)},Coqx:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),t.exports=t.exports.toString()},D0yk:function(t,e){t.exports='<section class="hero is-dark" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/configuracion" routerLinkActive="active">\r\n                    <!--<img src="http://bulma.io/images/bulma-type.png" alt="Bulma logo">-->\r\n                     <span class="icon">\r\n                        <i class="fa fa-sliders"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;Configuración</h1>\r\n                    </a>\r\n                </div>\r\n                <a class="nav-item is-hidden-tablet" (click)="toggleMenuAside()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-navicon"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <div class="nav-center">\r\n                    <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                        <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n                    </span>\r\n                </div>\r\n\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>\r\n\r\n<div class="modal" [ngClass]="{\'is-active\': mostrarMenuAside}">\r\n  <div class="modal-background" (click)="toggleMenuAside()"></div>\r\n  <div class="modal-content">\r\n    <div class="card" style="width: 100%">\r\n        <div class="card-content">\r\n            <panel-control-menu-aside></panel-control-menu-aside>\r\n        </div>\r\n    </div>\r\n  </div>\r\n  <button class="modal-close" (click)="toggleMenuAside()"></button>\r\n</div>'},D3zc:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("VTbq"),s=a("B2Nl"),o=a("DtLY"),c=a("VQxF"),l=a("jp5I"),d=a("D9tw"),u=a("2qAn");a.d(e,"a",function(){return f});var p=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},m=[{path:"administrador-central",redirectTo:"/administrador-central/pedidos",pathMatch:"full"},{path:"administrador-central",children:[{path:"pedidos",component:s.a,canActivate:[u.a],data:{key:"bsIbPL3qv6XevcAyrRm1GxJufDbzLOax"}},{path:"abasto",component:r.a,canActivate:[u.a],data:{key:"bwWWUufmEBRFpw9HbUJQUP8EFnagynQv"}},{path:"transferencias-recursos",component:o.a,canActivate:[u.a],data:{key:"s8kSv2Gj9DZwRvClVRmZohp92Rtvi26i"}},{path:"entregas-mes",component:c.a,canActivate:[u.a],data:{key:"fWA5oDswZ2Ra4O8YaCy6nEY8OeCOxg9C"}},{path:"cumplimiento",component:l.a,canActivate:[u.a],data:{key:"BBg7HSOEmjjOsVl48s8wSz8AxXhmBXA1"}}],canActivate:[d.a]}],f=function(){function t(){}return t}();f=p([a.i(n.NgModule)({imports:[i.b.forChild(m)],exports:[i.b]})],f)},D4A4:function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Editar usuario\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section">\r\n            <panel-control-usuarios-form *ngIf="datosCargados"\r\n                [mostrarCambiarPassword]="true"\r\n                [usuario]="usuario"             \r\n                [roles]="roles" \r\n                [unidadesMedicasEdicion] = "unidadesMedicasEdicion"\r\n                [unidadesMedicas]="unidadesMedicas" \r\n                [usuarioRepetido]="usuarioRepetido"\r\n                [usuarioInvalido]="usuarioInvalido"\r\n                [cargando]="cargando"\r\n                [cargandoRoles]="cargandoRoles"\r\n                (onEnviar)="enviar()"\r\n                (onRegresar)="regresar()"\r\n                (onToggleCambiarPassword)="toggleCambiarPassword()"\r\n                (onCargarRoles)="cargarRoles()"\r\n            ></panel-control-usuarios-form>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <p><b>Error:</b> {{ mensajeError.texto }}<br></p>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-warning" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeAdvertencia.mostrar">\r\n    <button class="delete" (click)="mensajeAdvertencia.mostrar = false"></button>        \r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-warning"></i></span> <span>{{ mensajeAdvertencia.texto }}</span></p>\r\n    \r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeAdvertencia.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>'},D9tw:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.router=t}return t.prototype.canActivate=function(t,e){return!!localStorage.getItem("token")||(this.router.navigate(["login"],{queryParams:{returnUrl:e.url}}),!1)},t}();o=r([a.i(n.Injectable)(),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},DT3a:function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n      \r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:1em;" >\r\n            <section class="hero is-primary"  >\r\n                \r\n                <div class="hero-body" style="position:relative;">                    \r\n                    \r\n                    \r\n                    <div class="container is-fluid">\r\n                        <nav class="level">\r\n                            <div class="level-left">\r\n                              <h1 class="title">\r\n                                  <span class="icon is-medium"><i class="fa fa-exchange"></i></span> $ Transferencias\r\n                              </h1>\r\n                            </div>\r\n                            <div class="level-right">\r\n                                <div class="block">                               \r\n                                  <button class="button is-primary is-inverted" (click)="nuevaTransferenciaArrastrarSaldos()"><span class="icon"><i class="fa fa-arrow-circle-up"></i></span> <span>Arrastrar saldos</span></button>\r\n                                  <button class="button is-primary is-inverted" (click)="nuevaTransferencia()"><span class="icon"><i class="fa fa-plus"></i></span> <span>Nueva transferencia</span></button>\r\n                                </div>\r\n                            </div>\r\n                        </nav>                        \r\n                        <div class="columns">                            \r\n                            <div class="column">\r\n                                <label for="jurisdicciones">Origen:</label>                       \r\n                                <p class="control is-expanded">\r\n                                    <input class="input " type="text" placeholder="CLUES / Nombre" [(ngModel)] = "filtro_clues_origen" >\r\n                                </p>                 \r\n                          \r\n                            </div>\r\n                            <div class="column">\r\n                                <label for="jurisdicciones">Destino:</label>                             \r\n                                <p class="control is-expanded">\r\n                                    <input class="input " type="text" placeholder="CLUES / Nombre" [(ngModel)] = "filtro_clues_destino">\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div class="columns">   \r\n                            <div class="column">\r\n                                <div class="columns">\r\n                                    <div class="column">\r\n                                        <label>Mes:</label>                       \r\n                                        <p class="control is-expanded">\r\n                                            <span class="select is-fullwidth">\r\n                                            <select [(ngModel)]="filtro_mes_origen">\r\n                                                <option value="-1">Todos</option>\r\n                                                <option *ngFor="let item of listaMeses" [value]="item.mes">{{ item.nombre }}</option>\r\n                                            </select>\r\n                                            </span>\r\n                                        </p> \r\n                                    </div>\r\n                                    <div class="column">\r\n                                        <label >Año:</label>                       \r\n                                        <p class="control is-expanded">\r\n                                            <span class="select is-fullwidth">\r\n                                            <select  [(ngModel)]="filtro_anio_origen">\r\n                                                <option value="-1" >Todos</option>\r\n                                                <option *ngFor="let item of listaAnios" [value]="item.anio">{{ item.anio }}</option>\r\n                                            </select>\r\n                                            </span>\r\n                                        </p> \r\n                                    </div>\r\n                                </div>                                \r\n                            </div>\r\n                            <div class="column">\r\n                                <div class="columns">\r\n                                    <div class="column">\r\n                                        <label>Mes:</label>                       \r\n                                        <p class="control is-expanded">\r\n                                            <span class="select is-fullwidth">\r\n                                            <select [(ngModel)]="filtro_mes_destino">\r\n                                                <option value="-1">Todos</option>\r\n                                                <option *ngFor="let item of listaMeses" [value]="item.mes">{{ item.nombre }}</option>\r\n                                            </select>\r\n                                            </span>\r\n                                        </p> \r\n                                    </div>\r\n                                    <div class="column">\r\n                                        <label >Año:</label>                       \r\n                                        <p class="control is-expanded">\r\n                                            <span class="select is-fullwidth">\r\n                                            <select  [(ngModel)]="filtro_anio_destino">\r\n                                                <option value="-1" >Todos</option>\r\n                                                <option *ngFor="let item of listaAnios" [value]="item.anio">{{ item.anio }}</option>\r\n                                            </select>\r\n                                            </span>\r\n                                        </p> \r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <nav class="level">\r\n                            <div class="level-left"></div>\r\n                            <div class="level-right">\r\n                                <div class="block">\r\n                                <button *ngIf=" filtro_clues_origen != \'\'|| filtro_clues_destino != \'\'  || filtro_mes_origen != -1 || filtro_anio_origen != -1 || filtro_mes_destino != -1 || filtro_anio_destino  != -1 " class="button is-primary" (click)="filtro_clues_origen = \'\'; filtro_clues_destino = \'\'; filtro_mes_origen = -1; filtro_anio_origen = -1; filtro_mes_destino = -1; filtro_anio_destino = -1;"><span class="icon"><i class="fa fa-times"></i></span> <span>Limpiar búsqueda</span></button>\r\n                                <button class="button is-primary is-inverted" (click)="listar(1)"><span class="icon"><i class="fa fa-search"></i></span> <span>Buscar</span></button>\r\n                                </div>\r\n                            </div>\r\n                        </nav>\r\n                    \r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            \r\n            <table class="table is-bordered is-striped has-text-centered" style="font-size:0.7em;" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan="3" style="text-align: center;">Origen</th>\r\n                        <th colspan="3" style="text-align: center;">Destino</th>\r\n                        <th colspan="3" style="text-align: center;">Presupuesto transferido</th>\r\n                        <th colspan="2"></th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th style="text-align: center;">Clues</th>\r\n                        <th style="text-align: center;">Mes</th>\r\n                        <th style="text-align: center;">Año</th>\r\n                        <th style="text-align: center;">Clues</th>\r\n                        <th style="text-align: center;">Mes</th>\r\n                        <th style="text-align: center;">Año</th>\r\n                        <th style="text-align: center;"><abbr title="Causes">CA</abbr></th>\r\n                        <th style="text-align: center;"><abbr title="No causes">NCA</abbr></th>\r\n                        <th style="text-align: center;"><abbr title="Material de curación">MC</abbr></th>                        \r\n                        <th style="text-align: center;">Usuario</th>\r\n                        <th style="text-align: center;">Fecha</th>                    \r\n                    </tr>\r\n                </thead>\r\n                \r\n                <tbody>\r\n                    <tr *ngFor="let item of lista; let i=index">                        \r\n                        <td style="vertical-align: middle; text-align: center;">\r\n                            <abbr title="{{ item.almacen_origen_nombre }}"><span class="icon is-small"><i class="fa fa-{{(item.almacen_origen_tipo == \'ALMPAL\')?\'hospital-o\':\'building\'}}"></i></span></abbr>\r\n                            <abbr title="{{ item.unidad_medica_origen }}">{{ item.clues_origen }}</abbr>\r\n                        </td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.mes_origen }}</td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.anio_origen }}</td>\r\n                        <td style="vertical-align: middle; text-align: center;">\r\n                            <abbr title="{{ item.almacen_destino_nombre }}"><span class="icon is-small"><i class="fa fa-{{(item.almacen_destino_tipo == \'ALMPAL\')?\'hospital-o\':\'building\'}}"></i></span></abbr>\r\n                            <abbr title="{{ item.unidad_medica_destino }}">{{ item.clues_destino }}</abbr>\r\n                        </td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.mes_destino }}</td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.anio_destino }}</td>\r\n                        <td style="vertical-align: middle; text-align: right;">{{ item.causes  | currency:\'USD\':true:\'1.2-2\' }}</td>\r\n                        <td style="vertical-align: middle; text-align: right;">{{ item.no_causes  | currency:\'USD\':true:\'1.2-2\'}}</td>\r\n                        <td style="vertical-align: middle; text-align: right;">{{ item.material_curacion | currency:\'USD\':true:\'1.2-2\' }}</td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.usuario_id }}</td>\r\n                        <td style="vertical-align: middle; text-align: center;">{{ item.created_at }}</td>\r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="11" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina"></paginacion>         \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<!-- Nueva Transferencia -->\r\n<div class="modal" [ngClass]="{ \'is-active\': mostrarVentanaNuevaTransferencia }">\r\n  <div class="modal-background" (click)="mostrarVentanaNuevaTransferencia = false"></div>\r\n  <div class="modal-card" style="width:95%; height: 100%;">\r\n    <header class="modal-card-head">\r\n      <p class="modal-card-title"><span class="icon"><i class="fa fa-exchange"></i></span> Nueva transferencia</p>\r\n      <button class="delete" (click)="mostrarVentanaNuevaTransferencia = false"></button>\r\n    </header>\r\n    <section class="modal-card-body">\r\n        <div class="columns">\r\n            <div class="column">\r\n                <label><b>Unidad Medica Origen:</b></label>\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                    <select #cluesOrigen  (change)="obtenerPresupuestoOrigen()"  [(ngModel)]="transaccion_clues_origen">\r\n                        <!--option [ngValue]="{clues:\'\'}" [selected]="true">Elija una unidad médica</option-->\r\n                        <option *ngFor="let item of listaClues" [ngValue]="item">{{ item.clues }} - {{ item.unidad_medica.nombre }}</option>\r\n                    </select>\r\n                    </span>\r\n                </p> \r\n\r\n                <label><b>Almacen Origen:</b></label>      \r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                    <select #almacenOrigen  (change)="obtenerPresupuestoOrigen()"  [(ngModel)]="transaccion_almacen_origen">\r\n                        <option value="">Elija una unidad médica</option>\r\n                        <option *ngFor="let item of listaAlmacenesOrigen" [value]="item.id">[{{item.clues}}] {{ item.nombre }}</option>\r\n                    </select>\r\n                    </span>\r\n                </p> \r\n\r\n                <div class="columns">\r\n                    <div class="column">\r\n                        <label>Mes:</label>                       \r\n                        <p class="control is-expanded">\r\n                            <span class="select is-fullwidth">\r\n                            <select #mesOrigen  (change)="obtenerPresupuestoOrigen()"  [(ngModel)]="transaccion_mes_origen">\r\n                                <option value="-1">Elija un mes</option>\r\n                                <option *ngFor="let item of listaMeses" [value]="item.mes">{{ item.nombre }}</option>\r\n                            </select>\r\n                            </span>\r\n                        </p> \r\n                    </div>\r\n                    <div class="column">\r\n                        <label >Año:</label>                       \r\n                        <p class="control is-expanded">\r\n                            <span class="select is-fullwidth">\r\n                            <select #anioOrigen (change)="obtenerPresupuestoOrigen()"  [(ngModel)]="transaccion_anio_origen">\r\n                                <option value="-1" *ngIf="listaAnios.length>1">Elija un año</option>\r\n                                <option *ngFor="let item of listaAnios" [value]="item.anio">{{ item.anio }}</option>\r\n                            </select>\r\n                            </span>\r\n                        </p> \r\n                    </div>\r\n                </div>\r\n                <table class="table" *ngIf="!datosOrigenValidos && !conPresupuestoOrigen">\r\n                    <tbody>\r\n                        <tr *ngIf="!conPresupuestoOrigen">\r\n                            <th>Este almacen no tiene presupuesto asignado en el mes especificado</th>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <table class="table" *ngIf="datosOrigenValidos">\r\n                    <thead>\r\n                        <tr><th colspan="2">Presupuesto origen (disponible):</th></tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr *ngIf="conPresupuestoOrigen">\r\n                            <th>Causes</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoOrigen.causes < 0}"> <span *ngIf="cargandoPresupuestoOrigen"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoOrigen">{{ presupuestoOrigen.causes | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                        <tr *ngIf="conPresupuestoOrigen">\r\n                            <th>No causes</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoOrigen.no_causes < 0}"> <span *ngIf="cargandoPresupuestoOrigen"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoOrigen">{{ presupuestoOrigen.no_causes | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                        <tr *ngIf="conPresupuestoOrigen">\r\n                            <th>Material de curación</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoOrigen.material_curacion < 0}"> <span *ngIf="cargandoPresupuestoOrigen"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoOrigen">{{ presupuestoOrigen.material_curacion | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                    </tbody>                    \r\n                </table>\r\n            </div>\r\n            <div class="column is-1">\r\n                <div class="has-text-centered">\r\n                    <div class="field is-grouped">\r\n                        <p class="control">\r\n                            <a class="button is-large is-fullwidth" [ngClass]="{\'is-active\':ligarCluesOrigenDestino}" (click)="ligarCluesOrigenDestino = !ligarCluesOrigenDestino" title="Ligar la CLUES de Origen y Destino">\r\n                                <span class="icon is-large">\r\n                                <i class="fa" [ngClass]="{\'fa-lock\':ligarCluesOrigenDestino,\'fa-unlock\':!ligarCluesOrigenDestino}"></i>\r\n                                </span>\r\n                            </a>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>        \r\n            <div class="column">\r\n                <label ><b>Unidad Medica Destino:</b></label>\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                    <select #cluesDestino (change)="obtenerPresupuestoDestino()" [(ngModel)]="transaccion_clues_destino" [disabled]="ligarCluesOrigenDestino">\r\n                        <!--option value="">Elija una unidad médica</option-->\r\n                        <option *ngFor="let item of listaClues" [ngValue]="item">{{ item.clues }} - {{ item.unidad_medica.nombre }}</option>\r\n                    </select>\r\n                    </span>\r\n                </p>\r\n\r\n                <label ><b>Almacen Destino:</b></label>\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                    <select #almacenOrigen  (change)="obtenerPresupuestoDestino()"  [(ngModel)]="transaccion_almacen_destino">\r\n                        <option value="">Elija una unidad médica</option>\r\n                        <option *ngFor="let item of listaAlmacenesDestino" [value]="item.id">[{{item.clues}}] {{ item.nombre }}</option>\r\n                    </select>\r\n                    </span>\r\n                </p> \r\n\r\n                <div class="columns">\r\n                    <div class="column">\r\n                        <label >Mes:</label>                       \r\n                        <p class="control is-expanded">\r\n                            <span class="select is-fullwidth">\r\n                            <select #mesDestino (change)="obtenerPresupuestoDestino()" [(ngModel)]="transaccion_mes_destino">\r\n                                <option value="-1">Elija un mes</option>\r\n                                <option *ngFor="let item of listaMeses" [value]="item.mes">{{ item.nombre }}</option>\r\n                            </select>\r\n                            </span>\r\n                        </p> \r\n                    </div>\r\n                    <div class="column">\r\n                        <label>Año:</label>                       \r\n                        <p class="control is-expanded">\r\n                            <span class="select is-fullwidth">\r\n                            <select #anioDestino  (change)="obtenerPresupuestoDestino()" [(ngModel)]="transaccion_anio_destino">\r\n                                <option value="-1" *ngIf="listaAnios.length>1">Elija un año</option>\r\n                                <option *ngFor="let item of listaAnios" value="{{item.anio}}">{{ item.anio }}</option>\r\n                            </select>\r\n                            </span>\r\n                        </p> \r\n                    </div>\r\n                </div>\r\n                <table class="table" *ngIf="!datosDestinoValidos && !conPresupuestoDestino">\r\n                    <tbody>\r\n                        <tr *ngIf="!conPresupuestoDestino">\r\n                            <th>Este almacen no tiene presupuesto asignado en el mes especificado</th>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <table class="table" *ngIf="datosDestinoValidos">\r\n                    <thead>\r\n                        <tr><th colspan="2">Presupuesto destino (disponible):</th></tr>\r\n                    </thead>\r\n                     <tbody>\r\n                        <tr *ngIf="conPresupuestoDestino">\r\n                            <th>Causes</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoDestino.causes < 0}"> <span *ngIf="cargandoPresupuestoDestino"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoDestino">{{ presupuestoDestino.causes | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                        <tr *ngIf="conPresupuestoDestino">\r\n                            <th>No causes</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoDestino.no_causes < 0}"> <span *ngIf="cargandoPresupuestoDestino"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoDestino">{{ presupuestoDestino.no_causes | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                        <tr *ngIf="conPresupuestoDestino">\r\n                            <th>Material de curación</th>\r\n                            <td [ngClass]="{\'rojo\':presupuestoDestino.material_curacion < 0}"> <span *ngIf="cargandoPresupuestoDestino"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando...</span> <span *ngIf="!cargandoPresupuestoDestino">{{ presupuestoDestino.material_curacion | currency:\'USD\':true:\'1.2-2\' }}</span></td>\r\n                        </tr>\r\n                    </tbody>                    \r\n                </table>\r\n            </div>\r\n        </div>\r\n        <div *ngIf="datosDestinoValidos && datosOrigenValidos">\r\n            <h1 class="title is-4">Presupuesto a transferir:</h1>\r\n            <div class="columns">\r\n                <div class="column">\r\n                    <div class="field">\r\n                        <label for="monto">Causes:</label>\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="$ 0.00" [(ngModel)] = "monto_transferir_causes" [ngClass]="{ \'is-danger\': errores_transferencia.causes != \'\' }" >\r\n                        </p>\r\n                        <p class="help is-danger" *ngIf="errores_transferencia.causes != \'\'">{{ errores_transferencia.causes }}</p>\r\n                    </div>        \r\n                </div>\r\n                <div class="column">\r\n                    <div class="field">\r\n                        <label for="monto">No Causes:</label>\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="$ 0.00" [(ngModel)] = "monto_transferir_no_causes" [ngClass]="{ \'is-danger\': errores_transferencia.no_causes != \'\' }" >\r\n                        </p> \r\n                        <p class="help is-danger" *ngIf="errores_transferencia.no_causes != \'\'">{{ errores_transferencia.no_causes }}</p>\r\n                    </div>        \r\n                </div>\r\n                <div class="column">\r\n                    <div class="field">\r\n                        <label for="monto">Material de curación:</label>\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="$ 0.00" [(ngModel)] = "monto_transferir_material_curacion" [ngClass]="{ \'is-danger\': errores_transferencia.material_curacion != \'\' }" >\r\n                        </p> \r\n                        <p class="help is-danger" *ngIf="errores_transferencia.material_curacion != \'\'">{{ errores_transferencia.material_curacion }}</p>\r\n                    </div>        \r\n                </div>\r\n            </div>\r\n        </div>\r\n      \r\n      \r\n    </section>\r\n    <footer class="modal-card-foot">\r\n      <a class="button is-danger" (click)="realizarTransferencia()" [ngClass]=" { \'is-loading\': enviando_transferencia, \'is-disabled\': !datosDestinoValidos || !datosOrigenValidos || ( (monto_transferir_causes == 0 || !monto_transferir_causes) && (monto_transferir_no_causes == 0 || !monto_transferir_no_causes) && (monto_transferir_material_curacion == 0 || !monto_transferir_material_curacion)  ) }"><span class="icon"><i class="fa fa-exchange"></i></span> <span>Realizar transferencia</span></a>\r\n      <a class="button" (click)="mostrarVentanaNuevaTransferencia = false">Cerrar</a>\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n\r\n<!-- Arrastrar Saldos -->\r\n<div class="modal" [ngClass]="{ \'is-active\': mostrarVentanaArrastrarSaldos }">\r\n  <div class="modal-background" (click)="mostrarVentanaArrastrarSaldos = false"></div>\r\n  <div class="modal-card" style="width:95%; height: 100%;">\r\n    <header class="modal-card-head">\r\n      <p class="modal-card-title"><span class="icon"><i class="fa fa-arrow-circle-up"></i></span> Transferir saldos al mes actual</p>\r\n      <button class="delete" (click)="mostrarVentanaArrastrarSaldos = false"></button>\r\n    </header>\r\n    <section class="modal-card-body">\r\n        <div class="field">\r\n            <label>Mes/Año:</label>                       \r\n            <p class="control is-expanded">\r\n                <span class="select is-fullwidth">\r\n                <select   (change)="obtenerCluesConSaldo()"  [(ngModel)]="fecha_arrastrar_saldos">\r\n                    <option value="-1">Elija una fecha:</option>\r\n                    <option *ngFor="let item of listaMesesAniosAnteriorFechaActual" [value]="item.fecha">{{ item.mes_nombre }}/{{ item.anio }}</option>\r\n                </select>\r\n                </span>\r\n            </p> \r\n        </div>\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargando_clues_con_saldo">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <table class="table" style="font-size:0.8em;" *ngIf="fecha_arrastrar_saldos != -1 && !cargando_clues_con_saldo">\r\n            <thead>\r\n                <tr>\r\n                    <td style="width:42px; cursor:pointer;" (click)="seleccionarTodasCluesConSaldo()">\r\n                      <span class="icon" style="color:#00d1b2"><i class="fa" [ngClass]="{ \'fa-square-o\': !todas_clues_con_saldo_seleccionadas, \'fa-check-square\': todas_clues_con_saldo_seleccionadas }"></i></span>\r\n                    </td>\r\n                    <th style="text-align: center;">Clues</th>\r\n                    <th >Nombre</th>\r\n                    <th style="text-align: center;"><abbr title="Causes">CA</abbr></th>\r\n                    <th style="text-align: center;"><abbr title="No causes">NCA</abbr></th>\r\n                    <th style="text-align: center;"><abbr title="Material de curación">MC</abbr></th>   \r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr *ngFor="let item of listaCluesConSaldo" (click)="item.seleccionada = !item.seleccionada" style="cursor:pointer">\r\n                    <td><span class="icon"><i class="fa" [ngClass]="{ \'fa-square-o\': !item.seleccionada, \'fa-check-square\': item.seleccionada }"></i></span></td>\r\n                    <td style="text-align: center;">{{ item.clues }}</td>\r\n                    <td>{{ item.unidad_medica.nombre }}</td>\r\n                    <td style="text-align: right;">{{ item.causes_disponible | currency:\'USD\':true:\'1.2-2\' }}</td>\r\n                    <td style="text-align: right;">{{ item.no_causes_disponible | currency:\'USD\':true:\'1.2-2\' }}</td>\r\n                    <td style="text-align: right;">{{ item.material_curacion_disponible | currency:\'USD\':true:\'1.2-2\' }}</td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n      \r\n    </section>\r\n    <footer class="modal-card-foot">\r\n      <a class="button is-danger" (click)="transferirSaldosAlMesActual()" [ngClass]=" { \'is-disabled\': fecha_arrastrar_saldos == -1, \'is-loading\': enviando_transferencia_saldos_mes_actual  }"><span class="icon"><i class="fa fa-exchange"></i></span> <span> Transferir saldos al mes actual</span></a>\r\n      <a class="button" (click)="mostrarVentanaArrastrarSaldos = false">Cerrar</a>\r\n    </footer>\r\n  </div>\r\n</div>'},DtLY:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("gHRf"),s=a("Fiuh");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e){this.title=t,this.apiService=e,this.cargando=!1,this.mensajeError=new r.a,this.mensajeExito=new r.a,this.filtro_clues_origen="",this.filtro_clues_destino="",this.filtro_mes_origen=-1,this.filtro_anio_origen=-1,this.filtro_mes_destino=-1,this.filtro_anio_destino=-1,this.ligarCluesOrigenDestino=!0,this.listaClues=[],this.listaMeses=[],this.listaAnios=[],this.listaAlmacenesOrigen=[],this.listaAlmacenesDestino=[],this.listaCluesConSaldo=[],this.listaMesesAniosAnteriorFechaActual=[],this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.mostrarVentanaNuevaTransferencia=!1,this.monto_transferir_causes=null,this.monto_transferir_no_causes=null,this.monto_transferir_material_curacion=null,this.transaccion_clues_origen={clues:""},this.transaccion_clues_destino={clues:""},this.transaccion_almacen_origen="",this.transaccion_almacen_destino="",this.transaccion_mes_origen=-1,this.transaccion_mes_destino=-1,this.transaccion_anio_origen=-1,this.transaccion_anio_destino=-1,this.datosOrigenValidos=!1,this.datosDestinoValidos=!1,this.conPresupuestoOrigen=!0,this.conPresupuestoDestino=!0,this.cargandoPresupuestoOrigen=!1,this.cargandoPresupuestoDestino=!1,this.presupuestoOrigen={causes:0,no_causes:0,material_curacion:0},this.presupuestoDestino={causes:0,no_causes:0,material_curacion:0},this.errores_transferencia={causes:"",no_causes:"",material_curacion:""},this.enviando_transferencia=!1,this.mostrarVentanaArrastrarSaldos=!1,this.fecha_arrastrar_saldos=-1,this.todas_clues_con_saldo_seleccionadas=!1,this.cargando_clues_con_saldo=!1,this.enviando_transferencia_saldos_mes_actual=!1}return t.prototype.ngOnInit=function(){this.mensajeError=new r.a,this.mensajeExito=new r.a,this.title.setTitle("Transferencias / Administrador central"),this.listar(1),this.cargarUnidadesMedicas(),this.cargarMeses(),this.cargarAnios(),this.cargarMesesAniosAnteriorMesActual()},t.prototype.cargarUnidadesMedicas=function(){var t=this;this.apiService.unidadesMedicasConPresupuesto().subscribe(function(e){t.listaClues=e},function(t){console.log(t)})},t.prototype.cargarMeses=function(){var t=this;this.apiService.mesesPresupuestoActual().subscribe(function(e){t.listaMeses=e},function(t){console.log(t)})},t.prototype.cargarAnios=function(){var t=this;this.apiService.aniosPresupuestoActual().subscribe(function(e){1==e.length&&(t.transaccion_anio_origen=e[0].anio,t.transaccion_anio_destino=e[0].anio),t.listaAnios=e},function(t){console.log(t)})},t.prototype.cargarMesesAniosAnteriorMesActual=function(){var t=this;this.apiService.mesesAniosAnteriorFechaActual().subscribe(function(e){t.listaMesesAniosAnteriorFechaActual=e},function(t){console.log(t)})},t.prototype.listar=function(t){var e=this;this.cargando=!0,this.paginaActual=t;var a={clues_origen:this.filtro_clues_origen,mes_origen:this.filtro_mes_origen,anio_origen:this.filtro_anio_origen,clues_destino:this.filtro_clues_destino,mes_destino:this.filtro_mes_destino,anio_destino:this.filtro_anio_destino,page:this.paginaActual,per_page:this.resultadosPorPagina};this.apiService.transferenciasLista(a).subscribe(function(t){e.cargando=!1,e.lista=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.nuevaTransferencia=function(){this.monto_transferir_causes=null,this.monto_transferir_no_causes=null,this.monto_transferir_material_curacion=null,this.transaccion_clues_origen={clues:""},this.transaccion_almacen_origen="",this.datosOrigenValidos=!1,this.transaccion_clues_destino={clues:""},this.transaccion_almacen_destino="",this.datosDestinoValidos=!1,this.transaccion_mes_origen=-1,this.transaccion_mes_destino=-1,this.errores_transferencia={causes:"",no_causes:"",material_curacion:""},this.mostrarVentanaNuevaTransferencia=!0},t.prototype.realizarTransferencia=function(){var t=this;if(this.transaccion_clues_origen.clues==this.transaccion_clues_destino.clues&&this.transaccion_anio_origen==this.transaccion_anio_destino&&this.transaccion_mes_origen==this.transaccion_mes_destino&&this.transaccion_almacen_origen==this.transaccion_almacen_destino)return void alert("No se puede realizar la transferencia. Los datos de origen y destino son los mismos.");if(this.errores_transferencia={causes:"",no_causes:"",material_curacion:""},null!=this.monto_transferir_causes&&(isNaN(Number(this.monto_transferir_causes))&&(this.errores_transferencia.causes="El monto debe ser un número válido (sólo numeros decimales sin coma)."),this.monto_transferir_causes>this.presupuestoOrigen.causes&&(console.log(this.monto_transferir_causes+":"+this.presupuestoOrigen.causes),this.errores_transferencia.causes="El monto no puede ser mayor al presupuesto disponible del origen."),this.monto_transferir_causes<0&&(this.errores_transferencia.causes="El monto no puede ser menor a 0.")),null!=this.monto_transferir_no_causes&&(isNaN(Number(this.monto_transferir_no_causes))&&(this.errores_transferencia.no_causes="El monto debe ser un número válido (sólo numeros decimales sin coma)."),this.monto_transferir_no_causes>this.presupuestoOrigen.no_causes&&(this.errores_transferencia.no_causes="El monto no puede ser mayor al presupuesto disponible del origen."),this.monto_transferir_no_causes<0&&(this.errores_transferencia.no_causes="El monto no puede ser menor a 0.")),null!=this.monto_transferir_material_curacion&&(isNaN(Number(this.monto_transferir_material_curacion))&&(this.errores_transferencia.material_curacion="El monto debe ser un número válido (sólo numeros decimales sin coma)."),this.monto_transferir_material_curacion>this.presupuestoOrigen.material_curacion&&(this.errores_transferencia.material_curacion="El monto no puede ser mayor al presupuesto disponible del origen."),this.monto_transferir_material_curacion<0&&(this.errores_transferencia.material_curacion="El monto no puede ser menor a 0.")),""==this.errores_transferencia.causes&&""==this.errores_transferencia.no_causes&&""==this.errores_transferencia.material_curacion){var e={clues_origen:this.transaccion_clues_origen.clues,clues_destino:this.transaccion_clues_destino.clues,almacen_origen:this.transaccion_almacen_origen,almacen_destino:this.transaccion_almacen_destino,mes_origen:this.transaccion_mes_origen,mes_destino:this.transaccion_mes_destino,anio_origen:this.transaccion_anio_origen,anio_destino:this.transaccion_anio_destino,causes:this.monto_transferir_causes,no_causes:this.monto_transferir_no_causes,material_curacion:this.monto_transferir_material_curacion};if("TRANSFERIR"!=prompt("Para confirmar esta transacción, por favor escriba: TRANSFERIR"))return void alert("Error al ingresar el texto para confirmar la transferencia.");this.enviando_transferencia=!0,this.apiService.transferirPresupuesto(e).subscribe(function(e){t.datosOrigenValidos=!1,t.listar(1),t.obtenerPresupuestoDestino(),t.enviando_transferencia=!1},function(e){console.log(e),t.enviando_transferencia=!1})}},t.prototype.obtenerPresupuestoOrigen=function(){this.datosOrigenValidos=!1,0!=this.listaAlmacenesOrigen.length&&this.transaccion_clues_origen.clues==this.listaAlmacenesOrigen[0].clues||(this.transaccion_almacen_origen="",this.listaAlmacenesOrigen=this.transaccion_clues_origen.unidad_medica.almacenes),this.transaccion_mes_origen!=-1&&this.transaccion_anio_origen!=-1&&""!=this.transaccion_clues_origen.clues&&""!=this.transaccion_almacen_origen&&(this.datosOrigenValidos=!0,this.cargarPresupuestoUnidadMedica(!0,!1,this.transaccion_clues_origen.clues,this.transaccion_almacen_origen,this.transaccion_mes_origen,this.transaccion_anio_origen)),this.ligarCluesOrigenDestino&&this.transaccion_clues_destino!=this.transaccion_clues_origen&&(this.transaccion_clues_destino=this.transaccion_clues_origen,this.obtenerPresupuestoDestino())},t.prototype.obtenerPresupuestoDestino=function(){this.datosDestinoValidos=!1,0!=this.listaAlmacenesDestino.length&&this.transaccion_clues_destino.clues==this.listaAlmacenesDestino[0].clues||(this.transaccion_almacen_destino="",this.listaAlmacenesDestino=this.transaccion_clues_destino.unidad_medica.almacenes),this.transaccion_mes_destino!=-1&&this.transaccion_anio_destino!=-1&&""!=this.transaccion_clues_destino.clues&&""!=this.transaccion_almacen_destino&&(this.datosDestinoValidos=!0,this.cargarPresupuestoUnidadMedica(!1,!0,this.transaccion_clues_destino.clues,this.transaccion_almacen_destino,this.transaccion_mes_destino,this.transaccion_anio_destino))},t.prototype.cargarPresupuestoUnidadMedica=function(t,e,a,n,i,r){var s=this;t?(this.conPresupuestoOrigen=!0,this.cargandoPresupuestoOrigen=!0):e&&(this.conPresupuestoDestino=!0,this.cargandoPresupuestoDestino=!0);var o={clues:a,almacen:n,mes:i,anio:r};this.apiService.presupuestoUnidadMedica(o).subscribe(function(a){t&&(a?(s.presupuestoOrigen.causes=Number(a.causes_disponible),s.presupuestoOrigen.no_causes=Number(a.no_causes_disponible),s.presupuestoOrigen.material_curacion=Number(a.material_curacion_disponible)):(s.conPresupuestoOrigen=!1,s.datosOrigenValidos=!1),s.cargandoPresupuestoOrigen=!1),e&&(a?(s.presupuestoDestino.causes=Number(a.causes_disponible),s.presupuestoDestino.no_causes=Number(a.no_causes_disponible),s.presupuestoDestino.material_curacion=Number(a.material_curacion_disponible)):(s.conPresupuestoDestino=!1,s.datosDestinoValidos=!1),s.cargandoPresupuestoDestino=!1)},function(a){console.log(a),s.mensajeError.mostrar=!0,s.mensajeError.texto="Ocurrio un error durante la petición.",t?s.cargandoPresupuestoOrigen=!1:e&&(s.cargandoPresupuestoDestino=!1)})},t.prototype.nuevaTransferenciaArrastrarSaldos=function(){this.mostrarVentanaArrastrarSaldos=!0},t.prototype.seleccionarTodasCluesConSaldo=function(){this.todas_clues_con_saldo_seleccionadas=!this.todas_clues_con_saldo_seleccionadas;for(var t in this.listaCluesConSaldo)this.listaCluesConSaldo[t].seleccionada=this.todas_clues_con_saldo_seleccionadas},t.prototype.obtenerCluesConSaldo=function(){var t=this;if(this.fecha_arrastrar_saldos!=-1){var e=this.fecha_arrastrar_saldos.split("/");if(2==e.length){var a={mes:e[0],anio:e[1],clues_con_saldo:!0};this.cargando_clues_con_saldo=!0,this.listaCluesConSaldo=[],this.apiService.unidadesMedicasConPresupuesto(a).subscribe(function(e){t.cargando_clues_con_saldo=!1,t.listaCluesConSaldo=e},function(e){console.log(e),t.cargando_clues_con_saldo=!1})}}},t.prototype.transferirSaldosAlMesActual=function(){var t=this;if(this.fecha_arrastrar_saldos!=-1){var e=this.fecha_arrastrar_saldos.split("/");if(2==e.length){var a={mes:e[0],anio:e[1],lista_clues:[]},n=!1;for(var i in this.listaCluesConSaldo)this.listaCluesConSaldo[i].seleccionada&&(n=!0,a.lista_clues.push(this.listaCluesConSaldo[i].clues));if(n){"TRANSFERIR"==prompt("Para confirmar esta transacción, por favor escriba: TRANSFERIR")&&(this.enviando_transferencia_saldos_mes_actual=!0,this.apiService.transferirSaldosAlMesActual(a).subscribe(function(e){t.listar(1),t.mostrarVentanaArrastrarSaldos=!1,t.fecha_arrastrar_saldos=-1,t.todas_clues_con_saldo_seleccionadas=!1,t.listaCluesConSaldo=[],t.enviando_transferencia_saldos_mes_actual=!1},function(e){console.log(e),t.enviando_transferencia_saldos_mes_actual=!1}))}}}},t}();l=o([a.i(n.Component)({selector:"app-transferencias-recursos",template:a("DT3a"),styles:[a("2Q/Z")]}),c("design:paramtypes",["function"==typeof(d=void 0!==i.b&&i.b)&&d||Object,"function"==typeof(u=void 0!==s.a&&s.a)&&u||Object])],l);var d,u},Dzdw:function(t,e){t.exports='<aside class="menu" style="padding: 1em;">\r\n    <!--  <p class="menu-label">\r\n        Pedidos\r\n    </p>-->\r\n    <a routerLink="/almacen/pedidos/nuevo" routerLinkActive="is-active" class="button is-primary is-inverted is-medium is-fullwidth"><span class="icon"  ><i class="fa fa-plus"></i></span> <span>Nuevo Pedido</span></a>\r\n    <br>\r\n    <ul class="menu-list">\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/todos" #todos routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-file"></i></span> Pedidos\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.todos>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': todos.className == \'is-active\', \'is-primary\': todos.className != \'is-active\' }">{{  stats.todos }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/borradores" #borradores routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-pencil-square-o"></i></span> Borradores\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.borradores>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': borradores.className == \'is-active\', \'is-primary\': borradores.className != \'is-active\' }">{{  stats.borradores }}</span>\r\n            </a>\r\n        </li>\r\n        <!--li>\r\n            <a routerLink="/almacen/pedidos/pendientes" #pendientes routerLinkActive="is-active">\r\n                <span class="icon"  ><i class="fa fa-minus-circle"></i></span> Pendientes\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.pendientes>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': pendientes.className == \'is-active\', \'is-warning\': pendientes.className != \'is-active\' }" >{{  stats.pendientes }}</span>\r\n            </a>             \r\n        </li-->\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/en-transito" #enTransito routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-clock-o"></i></span> En transito\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.en_transito>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': enTransito.className == \'is-active\', \'is-primary\': enTransito.className != \'is-active\' }">{{  stats.en_transito }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/por-surtir" #porSurtir routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-truck"></i></span> Por surtir\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.por_surtir>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': porSurtir.className == \'is-active\', \'is-primary\': porSurtir.className != \'is-active\' }">{{  stats.por_surtir }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n                <a routerLink="/almacen/pedidos/alternos" #porSurtir routerLinkActive="is-active">\r\n                    <span class="icon"><i class="fa fa-code-fork"></i></span> Alternos\r\n                    <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                    <span *ngIf="stats.por_surtir>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': porSurtir.className == \'is-active\', \'is-primary\': porSurtir.className != \'is-active\' }">{{  stats.por_surtir }}</span>\r\n                </a>\r\n            </li>\r\n        <hr>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/finalizados" #finalizados routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-check-circle"></i></span> Finalizados\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.finalizados>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': finalizados.className == \'is-active\', \'is-success\': finalizados.className != \'is-active\' }">{{  stats.finalizados }}</span>\r\n            </a>\r\n            <!--ul>\r\n                <li><a routerLink="/almacen/pedidos/finalizados/completos" routerLinkActive="is-active">Completos</a></li>\r\n                <li><a routerLink="/almacen/pedidos/finalizados/incompletos" routerLinkActive="is-active">Incompletos</a></li>\r\n                <li><a routerLink="/almacen/pedidos/finalizados/cancelados" routerLinkActive="is-active">Cancelados</a></li>\r\n            </ul-->\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/expirados" #expirados routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-exclamation-circle"></i></span> Expirados\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.expirados>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': expirados.className == \'is-active\', \'is-warning\': expirados.className != \'is-active\' }">{{  stats.expirados }}</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/expirados-cancelados" #expiradosCancelados routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-times-circle"></i></span> Expirados - Cancelados\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.expirados_cancelados>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': expiradosCancelados.className == \'is-active\', \'is-danger\': expiradosCancelados.className != \'is-active\' }">{{  stats.expirados_cancelados }}</span>\r\n            </a>\r\n        </li>\r\n        <hr>\r\n        <li>\r\n            <a routerLink="/almacen/pedidos/farmacia-subrogada" #farmacia routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-building"></i></span> Farmacia Subrogada\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.farmacia>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': farmacia.className == \'is-active\', \'is-info\': farmacia.className != \'is-active\' }">{{  stats.farmacia }}</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n\r\n</aside>'},"E8/z":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("8H38"),s=a("cHbp"),o=a("yk5R"),c=a("D9tw");a.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},d=[{path:"farmacia-subrrogada/sincronizar-recetas",children:[{path:"",component:r.a},{path:"nuevo",component:o.a},{path:"editar/:id",component:s.a}],canActivate:[c.a]}],u=function(){function t(){}return t}();u=l([a.i(n.NgModule)({imports:[i.b.forChild(d)],exports:[i.b],providers:[]})],u)},EFVL:function(t,e){t.exports='<menu-laboratorio></menu-laboratorio>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},EPRa:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},EYWw:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("D9tw"),s=a("2qAn"),o=a("aCNu");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"administrador-proveedores",redirectTo:"/administrador-proveedores/pedidos",pathMatch:"full"},{path:"administrador-proveedores",children:[{path:"pedidos",component:o.a,canActivate:[s.a],data:{key:"MrL06vIO12iNhchP14h57Puvg71eUmYb"}}],canActivate:[r.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b]})],d)},EYy9:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("4A07"),s=a("i8ny"),o=a("D9tw"),c=a("2qAn");a.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},d=[{path:"panel-control/opciones-avanzadas",children:[{path:"",redirectTo:"/panel-control/opciones-avanzadas/actualizar-sistema",pathMatch:"full"},{path:"actualizar-sistema",component:r.a,canActivate:[c.a],data:{key:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f"}},{path:"base-datos",component:s.a,canActivate:[c.a],data:{key:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f"}}],canActivate:[o.a]}],u=function(){function t(){}return t}();u=l([a.i(n.NgModule)({imports:[i.b.forChild(d)],exports:[i.b]})],u)},"Ek+D":function(t,e){t.exports='<aside class="menu" style="padding: 1em;">\r\n    <div *ngFor="let item of menuAutorizado">\r\n        <p class="menu-label">{{ item.titulo }}</p>\r\n        <ul class="menu-list">\r\n            <li *ngFor="let modulo of item.modulos">\r\n                <a routerLink="{{ modulo.url }}" routerLinkActive="is-active">\r\n                    <span class="icon" ><i class="fa {{ modulo.icono }}"></i></span>&nbsp;&nbsp;<span>{{ modulo.titulo }}</span>\r\n                </a>\r\n            </li>    \r\n        </ul>\r\n    </div>\r\n        \r\n</aside>'},F1l5:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("P+aT"),o=a("oeHx"),c=a("G8gi"),l=a("f5Uh"),d=a("Px6Q"),u=a("srJY"),p=a("/pxZ");a.d(e,"a",function(){return f});var m=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},f=function(){function t(){}return t}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},F2Xx:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bm2B"),s=a("BkNc");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,a,n){this.fb=t,this.router=e,this.route=a,this._sanitizer=n,this.tieneid=!1,this.tab=2}return t.prototype.ngOnInit=function(){var t=this,e=JSON.parse(localStorage.getItem("usuario"));this.dato=this.fb.group({clues:[e.clues_activa.clues,[r.Validators.required]],jurisdiccion_id:[e.clues_activa.jurisdiccion_id],nombre:[e.clues_activa.nombre],activa:[e.clues_activa.activa],director_id:[e.clues_activa.director_id],clues_turnos:this.fb.array([])}),this.route.params.subscribe(function(e){e.clues&&(t.tieneid=!0)}),document.getElementById("catalogos").click()},t.prototype.ngAfterViewInit=function(){var t=this;document.getElementById("actualizar").click(),setTimeout(function(){document.getElementById("initMover").click();var e=t.dato.controls.clues_turnos,a=0,n="",i="";if(0!=e.value.length){for(n=e.value[a].updated_at?e.value[a].updated_at:e.value[a].created_at,i=e.value[a].usuario_id,a=0;a<e.length;)e.value[a].updated_at>n&&(n=e.value[a].updated_at,i=e.value[a].usuario_id),a+=1;t.actualizacion=n,t.actualizacion_usuario=i,t.actualizado=!0}else t.actualizacion="Sin actualización",t.actualizacion_usuario="Sin actualización"},4e3)},t}();l=o([a.i(n.Component)({selector:"almacenes-formulario",template:a("zbQH")}),c("design:paramtypes",["function"==typeof(d=void 0!==r.FormBuilder&&r.FormBuilder)&&d||Object,"function"==typeof(u=void 0!==s.a&&s.a)&&u||Object,"function"==typeof(p=void 0!==s.c&&s.c)&&p||Object,"function"==typeof(m=void 0!==i.d&&i.d)&&m||Object])],l);var d,u,p,m},F31D:function(t,e){t.exports='<aside class="menu" style="padding: 1em;">\r\n    <p class="menu-label">\r\n        Admisión\r\n    </p>\r\n    \r\n    <a routerLink="/pacientes/modulo/verificacion" routerLinkActive="is-active" class="button is-primary is-inverted is-medium is-fullwidth" ><span class="icon"  ><i class="fa fa-plus"></i></span> <span>Nuevo Ingreso</span></a>\r\n    <br>\r\n\r\n    <ul class="menu-list">  \r\n        <li>\r\n            <a routerLinkActive="is-active" routerLink="/paciente/">\r\n                <span class="icon" ><i class="fa fa-user"></i></span> Pacientes\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                \r\n            </a>\r\n        </li>        \r\n        <li>\r\n            <a routerLinkActive="is-active" routerLink="/pacientes/modulo/verificacion">\r\n                <span class="icon" ><i class="fa fa-hospital-o"></i></span> Ingresos\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n               \r\n            </a>\r\n        </li>        \r\n        <li>\r\n            <a  routerLinkActive="is-active" routerLink="/pacientes/modulo/egreso">\r\n                <span class="icon"  ><i class="fa fa-arrow-right"></i></span> Egresos \r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n            </a>\r\n        </li>\r\n    </ul>        \r\n</aside>'},F4bb:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bm2B"),s=a("BkNc");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,a,n){this.fb=t,this.router=e,this.route=a,this._sanitizer=n,this.tieneid=!1,this.tab=2}return t.prototype.ngOnInit=function(){var t=this,e=JSON.parse(localStorage.getItem("usuario"));this.dato=this.fb.group({clues:[e.clues_activa.clues,[r.Validators.required]],jurisdiccion_id:[e.clues_activa.jurisdiccion_id],nombre:[e.clues_activa.nombre],activa:[e.clues_activa.activa],director_id:[e.clues_activa.director_id],clues_servicios:this.fb.array([])}),this.route.params.subscribe(function(e){e.clues&&(t.tieneid=!0)}),document.getElementById("catalogos").click()},t.prototype.ngAfterViewInit=function(){var t=this;document.getElementById("actualizar").click(),setTimeout(function(){document.getElementById("initMover").click();var e=t.dato.controls.clues_servicios,a=0,n="",i="";if(0!=e.value.length){for(n=e.value[a].updated_at?e.value[a].updated_at:e.value[a].created_at,i=e.value[a].usuario_id,a=0;a<e.length;)e.value[a].updated_at>n&&(n=e.value[a].updated_at,i=e.value[a].usuario_id),a+=1;t.actualizacion=n,t.actualizacion_usuario=i,t.actualizado=!0}else t.actualizacion="Sin actualización",t.actualizacion_usuario="Sin actualización"},3e3)},t.prototype.actualizarDatos=function(){var t=this.dato.controls.clues_servicios,e=0,a="",n="";if(0!=t.value.length){for(a=t.value[e].updated_at?t.value[e].updated_at:t.value[e].created_at,n=t.value[e].usuario_id,e=0;e<t.length;)t.value[e].updated_at>a&&(a=t.value[e].updated_at,n=t.value[e].usuario_id),e+=1;this.actualizacion=a,this.actualizacion_usuario=n,this.actualizado=!0}else this.actualizado=!1,this.actualizacion="Sin actualización",this.actualizacion_usuario="Sin actualización"},t}();l=o([a.i(n.Component)({selector:"almacenes-formulario",template:a("unxZ")}),c("design:paramtypes",["function"==typeof(d=void 0!==r.FormBuilder&&r.FormBuilder)&&d||Object,"function"==typeof(u=void 0!==s.a&&s.a)&&u||Object,"function"==typeof(p=void 0!==s.c&&s.c)&&p||Object,"function"==typeof(m=void 0!==i.d&&i.d)&&m||Object])],l);var d,u,p,m},FFCA:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".login-background{background-color:#aabbbc}",""]),t.exports=t.exports.toString()},FFns:function(t,e){t.exports='<div class="modal is-active" >\r\n  <div class="modal-background" (click)="cerrar()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n   \r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      \r\n                    \r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-list"></i></span> Distribución de cantidades\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrar()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <table class="table is-unselectable" *ngIf="!cargando && !guardando" style="font-size: 0.8em; margin:0px !important">\r\n        <thead>\r\n            <tr  >\r\n                <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                <th class="is-hidden-mobile" style="width:118px;">Clave</th>\r\n                <th class="is-hidden-tablet">Clave o Genérico</th>  \r\n                <th style="vertical-align: middle;" class="is-hidden-mobile " >Descripcion</th>                  \r\n                <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                 <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Precio">Precio</abbr></th>\r\n                <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                <th  style="width:21px !important;"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n\r\n            <tr>\r\n                <td class="has-text-centered">{{ insumo.lote }}</td>\r\n                <td class="has-text-centered is-hidden-mobile">{{ insumo.clave }}</td>     \r\n                <td>\r\n                    <small class="is-hidden-tablet">{{ insumo.clave }} <br></small>\r\n                    <div style="line-height:1em;">\r\n                    <small>{{ insumo.descripcion }}</small>\r\n                    </div>\r\n                    <div style="padding: 0.5em 0 0.5em 0; ">\r\n                    <span *ngIf="(insumo.es_causes && insumo.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': insumo == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                    <span *ngIf="(!insumo.es_causes && insumo.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                    <span *ngIf="insumo.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                    <span *ngIf="insumo.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': insumo == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                    <span *ngIf="(insumo.tipo == \'ME\' && insumo.informacion)">\r\n                        <span *ngIf="insumo.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                        <span *ngIf="insumo.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                    </span>\r\n                    </div>\r\n                </td>                \r\n                <td style="width:100px !important;text-align:center;">{{ insumo.cantidad }}</td>\r\n                <td style="width:78px !important; text-align:center;">$<b><abbr>{{insumo.precio | number:\'1.2-2\'}}</abbr></b></td>\r\n                <td style="width:78px !important; text-align:center;">$<b><abbr>{{insumo.monto | number:\'1.2-2\'}}</abbr></b></td>\r\n            </tr>      \r\n        </tbody>\r\n      </table>\r\n      <hr style="margin:0px !important">\r\n      <table class="table" style="font-size: 0.8em;">\r\n        <thead>\r\n          <tr>\r\n            <th style="width:110px !important;">Clues ({{ insumo.lista_clues.length }})</th>\r\n            <th>Nombre</th>\r\n            <th style="width:90px !important;text-align:center">Cantidad</th>              \r\n            <th style="width:50px; text-align:right">Monto</th>  \r\n            <th  *ngIf="!lectura"></th> \r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor="let item of insumo.lista_clues; let i = index">\r\n            <td>{{ item.clues}}</td>\r\n            <td>{{ item.nombre}}</td>\r\n            <td style="width:100px !important;"  *ngIf="!lectura">\r\n                <p class="control is-expanded">\r\n                <input class="input is-small has-text-centered"  type="number" placeholder="Cant" (keyup)="actualizarTotales()" (mouseup)="actualizarTotales()" [(ngModel)]="item.cantidad">\r\n                </p>\r\n            </td>\r\n\r\n            <td style="width:100px !important; text-align:center;"  *ngIf="lectura">{{ item.cantidad }} </td>\r\n            <td style="text-align:right">$<b><abbr>{{insumo.precio * item.cantidad | number:\'1.2-2\'}}</abbr></b></td>\r\n            <td style="width:32px !important;" *ngIf="!lectura">\r\n                <a (click)="eliminarInsumo(item,i)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n            \r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-radius:0 0 0.8em 0.8em " ></footer>\r\n  </div>\r\n</div>\r\n'},FMzl:function(t,e){t.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Lista de Pacientes\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted "  (click)="showDialog = !showDialog">\r\n                            <span class="icon" ><i class="fa fa-plus"></i></span><span>Nuevo Paciente</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th></th>\r\n                    <th><abbr title="Paciente ID">ID</abbr></th>\r\n                    <th>Nombre</th>\r\n                    <th>Fecha Nacimiento</th>\r\n                    <th>Localidad (Municipio)</th>\r\n                    <th>Fecha Ingreso</th>\r\n                    <th>Ingresado</th>\r\n                    <th>Unidad</th>\r\n                    <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pacientes; let i=index">\r\n                        <th><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.fecha_nacimiento }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.localidad.nombre }} ( {{item.localidad.municipio.nombre }} ) </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">DESCONOCIDO</a></td>\r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.ingresoactivos[0].fecha_hora_ingreso}} </a></td>\r\n                         <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"></a></td>\r\n\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">SI </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">NO </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.ingresoactivos[0].unidad.nombre}} </a></td>\r\n                       \r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"> </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-primary" routerLink="/pacientes/modulo/ingreso/{{item.id}}"><span class="icon"><i class="fa fa-hospital-o"></i></span></a></td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="pacientes.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.fecha_nacimiento }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.localidad.nombre }} ( {{item.localidad.municipio.nombre }} ) </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">DESCONOCIDO</a></td>\r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.ingresoactivos[0].fecha_hora_ingreso}} </a></td>\r\n                         <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"></a></td>\r\n\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">SI </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">NO </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.ingresoactivos[0].unidad.nombre}} </a></td>\r\n                       \r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"> </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-primary" routerLink="/pacientes/modulo/ingreso/{{item.id}}"><span class="icon"><i class="fa fa-hospital-o"></i></span></a></td>\r\n                    \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n    </div>        \r\n   \r\n</div>\r\n\r\n<div id="modal-paciente" class="modal is-active" [ngClass]="{\'is-active\': showDialog}">\r\n  <div class="modal-background"  (click)="showDialog = !showDialog"></div>\r\n  <div class="modal-card" style="width:60%; height: auto;">\r\n    <header class="modal-card-head" style="background-color: #00d1b2" >\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-user"></i></span> Agregar Paciente\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="showDialog = !showDialog"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="section">\r\n                <form name="form" [formGroup]="paciente"   (ngSubmit)="enviar()" >     \r\n                  \r\n                  <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Paciente Conocido</label>\r\n                        <span class="select is-fullwidth">\r\n                            <select formControlName="conocido" name="conocido" (change)="paciente_conocido()">\r\n                                <option value="1">SI</option>\r\n                                <option value="2">NO</option>\r\n                            </select>\r\n\r\n                        </span> \r\n                    </p>\r\n\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Resposable Conocido</label>\r\n                        <span class="select is-fullwidth">\r\n                            <select formControlName="responsableconocido" name="responsableconocido" (change)="responsable()">\r\n                                <option value="1">SI</option>\r\n                                <option value="2">NO</option>\r\n                            </select>\r\n\r\n                        </span> \r\n                    </p>\r\n                    \r\n                  </div>\r\n\r\n                  \r\n                   <div [hidden]="verForm">\r\n                        \r\n                    <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                        <div class="container">\r\n                          <div class="heading">\r\n                            <h1 class="title">Datos del Paciente</h1>\r\n                          </div>\r\n                        </div>\r\n                    </section> \r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Nombre</label>\r\n                          <input class="input" autofocus type="text"  placeholder="Nombre" formControlName="nombre">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Sexo</label>\r\n                            <span class="select is-fullwidth">\r\n                                <select formControlName="sexo" name="sexo">\r\n                                    <option value="1">MASCULINO</option>\r\n                                    <option value="2">FAMENINO</option>\r\n                                </select>\r\n\r\n                            </span> \r\n                            <span class="icon is-small" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">Teléfono</label>\r\n                          <input class="input" type="text" placeholder="Telefono" formControlName="telefono">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                        <label class="label">Fecha Nacimiento</label>\r\n                          <input class="input" type="text" placeholder="aaaa-mm-dd" formControlName="fecha_nacimiento">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">Hora Nacimiento (si aplica)</label>\r\n                          <input class="input" type="text" placeholder="HH:mm" formControlName="hora_nacimiento">\r\n                          \r\n                        </p>\r\n                      </div>\r\n                      <div class="control is-grouped">\r\n                        \r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Domicilio</label>\r\n                            <input class="input" type="text" placeholder="Domicilio" formControlName="domicilio">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">Este campo es requerido.</span>\r\n                         \r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                        <label class="label">Colonia</label>\r\n                          <input class="input" type="text" placeholder="Colonia" formControlName="colonia">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                     </div>\r\n                     <div class="control is-grouped">  \r\n                        \r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                          <label class="label">Municipio</label> \r\n                          <span class="select is-fullwidth">\r\n                                <select  formControlName="municipio_id" name="municipio_id" #municipio (change)="cargarLocalidades(municipio.value)">\r\n                                    <option *ngFor="let item of Municipios" value="{{item.id}}">{{ item.nombre }} </option>\r\n                                </select>\r\n                                \r\n                            </span> \r\n                            <span class="icon is-small" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                          <label class="label">Localidad</label>    \r\n                          <span class="select is-fullwidth">\r\n                                <select formControlName="localidad_id" name="localidad_id">\r\n                                    <option *ngFor="let item of Localidades" value="{{item.id}}">{{ item.nombre }} </option>\r\n                                </select>\r\n                                \r\n                            </span> \r\n                            <span class="icon is-small" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                         <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">No Expediente</label>\r\n                            <input class="input" type="text" placeholder="No Expediente" formControlName="no_expediente">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">Este campo es requerido.</span>\r\n                            \r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">No Afililación</label>\r\n                            <input class="input" type="text" placeholder="No Afiliación" formControlName="no_afiliacion">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">Este campo es requerido.</span>\r\n                            \r\n                        </p>\r\n                      </div>\r\n                    </div> \r\n                    <div [hidden]="verFormResponsable">\r\n                      <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                        <div class="container">\r\n                          <div class="heading">\r\n                            <h1 class="title">Datos del Responsable</h1>\r\n                          </div>\r\n                        </div>\r\n                      </section>  \r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Nombre</label>\r\n                          <input class="input" autofocus type="text"  placeholder="Nombre Responsable" formControlName="nombre_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Patentesco</label>\r\n                               <input class="input" autofocus type="text"  placeholder="Parentesco" formControlName="parentesco">\r\n                              <span class="icon is-small" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                              </span>\r\n                              <span class="help is-danger" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">Este campo es requerido.</span>\r\n\r\n                        </p>\r\n                         <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Domicilio</label>\r\n                            <input class="input" type="text" placeholder="Domicilio Responsable" formControlName="domicilio_responsable">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">Este campo es requerido.</span>\r\n                         \r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">Teléfono</label>\r\n                          <input class="input" type="text" placeholder="Telefono Responsable" formControlName="telefono_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                     \r\n                    </div>    \r\n                   \r\n                    <div [hidden]="verFormArea">\r\n                        <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                            <div class="container">\r\n                              <div class="heading">\r\n                                <h1 class="title">Area de Seguimiento</h1>\r\n                              </div>\r\n                            </div>\r\n                        </section> \r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <br>\r\n                                <input type="hidden" name=\'area\' formControlName="area">\r\n                                <label class="checkbox">\r\n                                    <input type="checkbox" name=\'trabajo_social\' formControlName="trabajo_social" (change)="verifica_area()" value="1">\r\n                                        Trabajo Social\r\n                                </label>\r\n                                <br>\r\n                                <label class="checkbox" >\r\n                                    <input type="checkbox" name=\'juridico\' formControlName="juridico"  (change)="verifica_area()" value="1">\r\n                                        Asuntos Jurídicos\r\n                                </label>\r\n                                <br>\r\n                                <label class="checkbox">\r\n                                    <input type="checkbox" name=\'ministerio\' formControlName="ministerio"  (change)="verifica_area()" value="1">\r\n                                        Ministerio Público\r\n                                </label>\r\n                                \r\n                                \r\n                            </p>\r\n\r\n                        </div>\r\n                      \r\n                    </div>  \r\n                  <br>\r\n                  <div class="control is-grouped">\r\n                    <p class="control">\r\n                      <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="paciente.invalid">Guardar</button>\r\n                    </p>\r\n                  </div>\r\n              </form>\r\n            </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},FTUj:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("qbdv"),s=a("BkNc"),o=a("gf2+"),c=a("2cH3"),l=a("gHRf"),d=a("mB1y");a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(t,e,a,n,i,r){this.title=t,this.location=e,this.router=a,this.route=n,this.apiService=i,this.cambiarEntornoService=r,this.cargando=!1,this.guardando=!1,this.esEditar=!1,this.formularioTitulo="Nueva lista",this.errores={nombre:null,items:null},this.mensajeError=new l.a,this.mensajeExito=new l.a,this.mostrarModalInsumos=!1,this.listaClaveAgregadas=[]}return t.prototype.ngOnInit=function(){var t=this;this.lista=new d.a(!0),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.esEditar&&t.cargarLista()}),this.route.params.subscribe(function(e){e.id?(t.lista.id=e.id,t.cargarLista()):t.title.setTitle("Nueva lista")})},t.prototype.cargarLista=function(){var t=this;this.cargando=!0,this.esEditar=!0,this.formularioTitulo="Editar lista",this.title.setTitle("Editar lista"),this.apiService.ver(this.lista.id).subscribe(function(e){t.cargando=!1,console.log(e),t.lista.nombre=e.nombre;for(var a in e.detalles){var n=e.detalles[a],i=n.insumo_con_descripcion;t.lista.items.push(i),t.listaClaveAgregadas.push(i.clave)}t.lista.indexar(),t.lista.listar(1)},function(e){t.cargando=!1,t.mensajeError=new l.a(!0);try{e.json();401!=e.status&&403!=e.status||(t.mensajeError.texto="No tiene permiso para hacer esta operación.",t.router.navigate(["/administrador-central/claves-basicas/"]))}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}t.mensajeError.mostrar=!0})},t.prototype.toggleModalInsumos=function(){this.mostrarModalInsumos=!this.mostrarModalInsumos},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.lista.filtro.activo=!1,void(this.lista.filtro.items=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.lista.filtro.activo=!1,void(this.lista.filtro.items=[]);this.lista.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.lista.items.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.lista.filtro.items=l}else this.lista.filtro.items=r[0];this.lista.filtro.indexar(!1),this.lista.filtro.paginacion.paginaActual=1,this.lista.filtro.listar(1)}},t.prototype.eliminarInsumo=function(t,e,a){void 0===a&&(a=!1);var n=this.listaClaveAgregadas.indexOf(t.clave);this.listaClaveAgregadas.splice(n,1),a?this.lista.filtro.eliminarItem(t,e):this.lista.eliminarItem(t,e)},t.prototype.agregarItem=function(t){void 0===t&&(t={});var e=this.lista.paginacion.totalPaginas;this.lista.items.push(t),this.lista.indexar(),this.lista.paginacion.lista.length!=this.lista.paginacion.resultadosPorPagina||this.lista.paginacion.paginaActual!=e||this.lista.filtro.activo?this.lista.listar(this.lista.paginacion.paginaActual):this.lista.listar(this.lista.paginacion.paginaActual+1)},t.prototype.guardar=function(){var t=this;this.guardando=!0;var e={nombre:this.lista.nombre,items:[]};for(var a in this.lista.items)e.items.push(this.lista.items[a].clave);this.errores={nombre:null,items:null},this.esEditar?this.apiService.editar(this.lista.id,e).subscribe(function(e){t.guardando=!1},function(e){t.guardando=!1;try{var a=e.json();switch(t.mensajeError=new l.a(!0),e.status){case 401:t.mensajeError.texto="No tiee permiso para realizar esta acción.";break;case 409:t.mensajeError.texto="Verifique la información marcada de color rojo";for(var n in a.error)for(var i in a.error[n])t.errores[n]=a.error[n][i];break;case 500:t.mensajeError.texto="500 (Error interno del servidor)";break;default:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}catch(e){t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}t.mensajeError.mostrar=!0}):this.apiService.crear(e).subscribe(function(e){t.guardando=!1,t.router.navigate(["/administrador-central/claves-basicas/editar/"+e.id])},function(e){t.guardando=!1;try{var a=e.json();switch(t.mensajeError=new l.a(!0),e.status){case 401:t.mensajeError.texto="No tiee permiso para realizar esta acción.";break;case 409:t.mensajeError.texto="Verifique la información marcada de color rojo";for(var n in a.error)for(var i in a.error[n])t.errores[n]=a.error[n][i];break;case 500:t.mensajeError.texto="500 (Error interno del servidor)";break;default:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}catch(e){t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}t.mensajeError.mostrar=!0})},t}();m=u([a.i(n.Component)({selector:"app-formulario",template:a("ujnN"),styles:[a("Yp9e")],providers:[o.a]}),p("design:paramtypes",["function"==typeof(f=void 0!==i.b&&i.b)&&f||Object,"function"==typeof(g=void 0!==r.Location&&r.Location)&&g||Object,"function"==typeof(h=void 0!==s.a&&s.a)&&h||Object,"function"==typeof(v=void 0!==s.c&&s.c)&&v||Object,"function"==typeof(b=void 0!==o.a&&o.a)&&b||Object,"function"==typeof(y=void 0!==c.a&&c.a)&&y||Object])],m);var f,g,h,v,b,y},FUGJ:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bm2B"),s=a("BkNc"),o=a("/zHi"),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("1Lkp")),g=a("O/sS"),h=a("Vbn5"),v=a("sYIv"),b=a("gHRf");a.d(e,"a",function(){return x});var y=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},_=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},x=function(){function t(t,e,a,n,i){this.title=t,this.route=e,this.pedidosService=a,this.recepcionService=n,this.stockService=i,this.cargando=!1,this.guardando=!1,this.cargandoStock=!1,this.capturarStock=!1,this.mostrarDialogo=!1,this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}},this.statusRecepcion="NV",this.mensajeError=new b.a,this.mensajeAdvertencia=new b.a,this.mensajeExito=new b.a,this.formStock={},this.lotesSurtidos=[],this.listaStock=[],this.claveInsumoSeleccionado=null,this.claveNoSolicitada=!1,this.itemSeleccionado=null,this.formularioTieneError=function(t,e){return this.formularioRecepcion.get(t).hasError(e)&&this.formularioRecepcion.get(t).touched},this.fb=new r.FormBuilder;var s=new Date,o=("0"+s.getDate()).slice(-2),c=("0"+(s.getMonth()+1)).slice(-2),l=s.getFullYear()+"-"+c+"-"+o;this.formularioRecepcion=this.fb.group({entrega:["",[r.Validators.required]],recibe:["",[r.Validators.required]],fecha_movimiento:[l,[r.Validators.required]],observaciones:""})}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Surtir pedido / Almacén"),this.route.params.subscribe(function(e){t.id=e.id}),this.cargando=!0,this.recepcionService.verRecepcionPedido(this.id).subscribe(function(e){t.cargando=!1,t.pedido=new v.a(!0),t.pedido.paginacion.resultadosPorPagina=10,t.pedido.filtro.paginacion.resultadosPorPagina=10,t.folio=e.folio;var a={};if(1==e.recepciones.length){var n=e.recepciones[0].entrada_abierta.insumos;for(var i in n){var r=n[i];a[r.stock.clave_insumo_medico]||(a[r.stock.clave_insumo_medico]={cantidad:0,stock:[]}),a[r.stock.clave_insumo_medico].cantidad+=+r.cantidad,r.stock.cantidad=+r.cantidad,a[r.stock.clave_insumo_medico].stock.push(r.stock)}for(var s in a)t.lotesSurtidos.push({clave:s,cantidad:a[s].cantidad});t.statusRecepcion="BR"}"FI"==e.status&&(t.statusRecepcion="FI");for(var o in e.insumos){var c=e.insumos[o],r=c.insumos_con_descripcion;if(r.cantidad=+c.cantidad_solicitada,r.cantidad_recibida=+c.cantidad_recibida,r.monto=+c.monto_solicitado,r.precio=+c.precio_unitario,r.totalStockAsignado=+c.cantidad_recibida,a[r.clave]){r.listaStockAsignado=[],r.totalStockAsignado+=a[r.clave].cantidad;for(var l in a[r.clave].stock){var d=a[r.clave].stock[l];r.listaStockAsignado.push({codigo_barras:d.codigo_barras,lote:d.lote,fecha_caducidad:d.fecha_caducidad,cantidad:d.cantidad})}}t.pedido.lista.push(r)}e.insumos=void 0,t.pedido.datosImprimir=e,t.pedido.indexar(),t.pedido.listar(1)},function(e){t.cargando=!1,t.mensajeError=new b.a(!0),t.mensajeError.mostrar;try{var a=e.json();401==e.status?t.mensajeError.texto="No tiene permiso para hacer esta operación.":t.mensajeError.texto=a.error}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.seleccionarItem=function(t){this.itemSeleccionado=t,this.capturarStock=!0,this.formStock={},this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}}},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},t.prototype.buscarStockApi=function(t,e){var a=this;void 0===e&&(e=null),this.cargandoStock=!0,this.stockService.buscar(t,e).subscribe(function(t){if(a.cargandoStock=!1,a.claveNoSolicitada=!1,a.listaStock=t,t.length>0){a.claveInsumoSeleccionado=t[0].clave_insumo_medico;for(var e=!1,n=0;n<a.pedido.lista.length;n++)if(a.pedido.lista[n].clave==a.claveInsumoSeleccionado){a.pedido.filtro.activo=!1;var i=Math.ceil((n+1)/a.pedido.paginacion.resultadosPorPagina);a.pedido.listar(i),a.itemSeleccionado=a.pedido.lista[n],e=!0}e?a.verificarItemsAsignadosStockApi():(a.claveNoSolicitada=!0,a.listaStock=[])}console.log("Stock cargado.")},function(t){a.cargandoStock=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){};try{t.json();401==t.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==t.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.finalizar=function(){this.mostrarDialogo=!0},t.prototype.cerrarDialogo=function(){this.mostrarDialogo=!1},t.prototype.guardar=function(t){var e=this;void 0===t&&(t=!1),this.guardando=!0;var a;if(t){if(this.formularioRecepcion.get("entrega").markAsTouched(),this.formularioRecepcion.get("recibe").markAsTouched(),this.formularioRecepcion.get("fecha_movimiento").markAsTouched(),!this.formularioRecepcion.valid)return!1;if(!confirm("Atención la recepción ya no podra editarse, Esta seguro que desea concluir el movimiento?"))return!1;a=this.formularioRecepcion.value,a.status="FI",a.stock=[]}else a={status:"BR",observaciones:"",stock:[]};for(var n in this.pedido.lista){var i=this.pedido.lista[n];if(i.totalStockAsignado>0)for(var r in i.listaStockAsignado){var s={clave_insumo_medico:i.clave,lote:i.listaStockAsignado[r].lote,fecha_caducidad:i.listaStockAsignado[r].fecha_caducidad,cantidad:i.listaStockAsignado[r].cantidad,existencia:i.listaStockAsignado[r].cantidad,codigo_barras:i.listaStockAsignado[r].codigo_barras,precio_unitario:0,precio_total:0};a.stock.push(s)}}this.recepcionService.guardarRecepcionPedido(this.pedido.datosImprimir.id,a).subscribe(function(t){e.mostrarDialogo=!1,e.guardando=!1,e.mensajeExito=new b.a(!0),"FI"==a.status?(e.statusRecepcion="FI",e.mensajeExito.texto="Recepción Finalizada"):(e.statusRecepcion="BR",e.mensajeExito.texto="Datos Guardados"),e.mensajeExito.mostrar=!0,console.log("Recepción guardada")},function(t){e.guardando=!1,e.mostrarDialogo=!1,console.log(t),e.mensajeError=new b.a(!0),e.mensajeError.texto="No especificado",e.mensajeError.mostrar=!0;try{var a=t.json();console.log(a),401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==t.status&&a.error&&(e.mensajeError.texto=a.error,e.mensajeError.cuentaAtras=1e3)}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}}),console.log(a)},t.prototype.buscarStock=function(t,e,a){return 13==t.keyCode&&(t.preventDefault(),t.stopPropagation(),""!=a&&(this.buscarStockApi(a),e.select(),!1))},t.prototype.limpiarStock=function(){this.capturarStock=!1,this.listaStock=[],this.itemSeleccionado=null},t.prototype.eliminarStock=function(t){var e=this.itemSeleccionado.listaStockAsignado.indexOf(t);this.itemSeleccionado.listaStockAsignado.splice(e,1),this.calcularTotalStockItem(),this.verificarItemsAsignadosStockApi()},t.prototype.asignarStock=function(){this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}};var t=0;if(this.formStock.cantidad?this.formStock.cantidad<=0&&(this.erroresFormularioStock.cantidad={error:!0,texto:"La cantidad recibida debe ser mayor a 0."},t++):(this.erroresFormularioStock.cantidad={error:!0,texto:"Este campo es requerido."},t++),this.itemSeleccionado.tiene_fecha_caducidad&&!this.formStock.fecha_caducidad)this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"Este campo es requerido."},t++;else if(this.formStock.fecha_caducidad){var e=this.formStock.fecha_caducidad.split("-"),a=!1;if(3!=e.length?a=!0:4!=e[0].length||2!=e[1].length||2!=e[2].length?a=!0:parseInt(e[1])<1||parseInt(e[1])>12?a=!0:(parseInt(e[2])<1||parseInt(e[2])>31)&&(a=!0),a)this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"El formato de fecha no es correcto."},t++;else{var n=new Date,i=new Date(e[0],parseInt(e[1])-1,parseInt(e[2])),r=void 0;r=12*(i.getFullYear()-n.getFullYear()),r-=n.getMonth(),r+=i.getMonth(),r<6&&(this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"La fecha de caducidad no puede ser menor a 6 meses."},t++),console.log(r)}}if(this.formStock.lote||(this.erroresFormularioStock.lote={error:!0,texto:"Este campo es requerido."},t++),t)return!1;null==this.itemSeleccionado.listaStockAsignado&&(this.itemSeleccionado.listaStockAsignado=[]);var s=this.itemSeleccionado.cantidad_recibida;for(var o in this.itemSeleccionado.listaStockAsignado)s+=this.itemSeleccionado.listaStockAsignado[o].cantidad;s+=this.formStock.cantidad,s<=this.itemSeleccionado.cantidad?(this.itemSeleccionado.totalStockAsignado=s,this.itemSeleccionado.listaStockAsignado.push({codigo_barras:this.formStock.codigo_barras,lote:this.formStock.lote,fecha_caducidad:this.formStock.fecha_caducidad,cantidad:this.formStock.cantidad}),this.resetearFormStock(),this.calcularTotalStockItem()):this.erroresFormularioStock.cantidad={error:!0,texto:"La cantidad recibida supera la cantidad solicitada."}},t.prototype.cancelarCapturaStock=function(){this.resetearFormStock(!0)},t.prototype.resetearFormStock=function(t){void 0===t&&(t=!1),t?this.formStock={}:(this.formStock.lote=void 0,this.formStock.fecha_caducidad=void 0,this.formStock.cantidad=void 0)},t.prototype.validarItemStock=function(t,e){if(void 0===e&&(e=!1),null==t.cantidad)return e&&this.asignarMaximoPosible(t),void this.calcularTotalStockItem();var a=parseInt(t.cantidad);return isNaN(a)?(this.asignarMaximoPosible(t),void this.calcularTotalStockItem()):a<=0?(this.asignarMaximoPosible(t),void this.calcularTotalStockItem()):(a>t.existencia&&(t.cantidad=t.existencia),this.verificarTotalStockItem()||this.asignarMaximoPosible(t),void this.calcularTotalStockItem())},t.prototype.asignarMaximoPosible=function(t){var e=0;for(var a in this.itemSeleccionado.listaStockAsignado)this.itemSeleccionado.listaStockAsignado[a]!=t&&(e+=this.itemSeleccionado.listaStockAsignado[a].cantidad);var n=this.itemSeleccionado.cantidad-e;n>=t.existencia&&(t.cantidad=t.existencia),n<t.existencia&&(t.cantidad=n)},t.prototype.verificarItemsAsignadosStockApi=function(){for(var t in this.listaStock){this.listaStock[t].asignado=!1;for(var e in this.itemSeleccionado.listaStockAsignado)if(this.itemSeleccionado.listaStockAsignado[e].id==this.listaStock[t].id){this.listaStock[t].asignado=!0;break}}},t.prototype.verificarTotalStockItem=function(){var t=0;for(var e in this.itemSeleccionado.listaStockAsignado)t+=this.itemSeleccionado.listaStockAsignado[e].cantidad;return this.itemSeleccionado.totalStockAsignado<=this.itemSeleccionado.cantidad},t.prototype.calcularTotalStockItem=function(){var t=this.itemSeleccionado.cantidad_recibida;for(var e in this.itemSeleccionado.listaStockAsignado)t+=this.itemSeleccionado.listaStockAsignado[e].cantidad;if(0==t){var a=0;for(var e in this.lotesSurtidos)this.lotesSurtidos[e].clave==this.itemSeleccionado.clave&&this.lotesSurtidos.splice(a,1),a++}else{var n=!1;for(var e in this.lotesSurtidos)this.lotesSurtidos[e].clave==this.itemSeleccionado.clave&&(n=!0,this.lotesSurtidos[e].cantidad=t);n||this.lotesSurtidos.push({clave:this.itemSeleccionado.clave,cantidad:t})}this.itemSeleccionado.totalStockAsignado=t},t.prototype.keyboardInput=function(t){32==t.keyCode&&t.ctrlKey&&(event.preventDefault(),event.stopPropagation())},t}();x=y([a.i(n.Component)({selector:"app-recepcion",template:a("t+3/"),styles:[a("Biw/")]}),_("design:paramtypes",["function"==typeof(j=void 0!==i.b&&i.b)&&j||Object,"function"==typeof(P=void 0!==s.c&&s.c)&&P||Object,"function"==typeof(I=void 0!==f.a&&f.a)&&I||Object,"function"==typeof(E=void 0!==g.a&&g.a)&&E||Object,"function"==typeof(k=void 0!==h.a&&h.a)&&k||Object])],x);var j,P,I,E,k},FV3d:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},FazT:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("Xx5D"),d=a("LLho"),u=a("Px6Q"),p=a("kpP/"),m=a("XU8U"),f=a("mfFy"),g=a("BFvY"),h=a("ahZZ"),v=a("e3Yq"),b=a("K4kt"),y=a("CWbX"),_=a("oSQj");a.n(_);a.d(e,"a",function(){return j});var x=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},j=function(){function t(){}return t}();j=x([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,h.a,v.a,y.a,f.a,_.NguiAutoCompleteModule],declarations:[p.a,m.a],providers:[g.a,b.a]})],j)},FeSM:function(t,e,a){"use strict";var n=a("/oeL"),i=a("Fwzv"),r=(a.n(i),a("p5Ee"));a.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(t){function e(e){var a=t.call(this)||this;return a.url=r.a.API_URL+"/opciones-avanzadas/importar-base-datos/",a.headers={Authorization:"Bearer "+localStorage.getItem("token"),Accept:"plain/text"},a.file=e,a.alias="sql",a}return s(e,t),e}(i.UploadItem);l=o([a.i(n.Injectable)(),c("design:paramtypes",[Object])],l)},Fiuh:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.jurisdicciones=function(){return this.jwtRequest.get("jurisdicciones").map(function(t){return t.json().data})},t.prototype.proveedores=function(){return this.jwtRequest.get("proveedores").map(function(t){return t.json().data})},t.prototype.abasto=function(t){return void 0===t&&(t={}),this.jwtRequest.get("administrador-central/abasto",null,t).map(function(t){return t.json().data})},t.prototype.pedidos=function(t){return void 0===t&&(t={}),this.jwtRequest.get("administrador-central/pedidos",null,t).map(function(t){return t.json().data})},t.prototype.verArchivosPedidoProveedor=function(t){return this.jwtRequest.get("administrador-central/pedidos-archivos-proveedor/"+t,null,{}).map(function(t){return t.json().data})},t.prototype.descargarArchivosPedidoProveedor=function(t){return this.jwtRequest.get("repository-download",t,{}).map(function(t){return 0})},t.prototype.presupuesto=function(t){return this.jwtRequest.get("administrador-central/presupuesto-pedidos",null,t).map(function(t){return t.json()})},t.prototype.unidadesMedicasConPresupuesto=function(t){return void 0===t&&(t={}),this.jwtRequest.get("administrador-central/unidades-medicas-con-presupuesto",null,t).map(function(t){return t.json().data})},t.prototype.mesesPresupuestoActual=function(){return this.jwtRequest.get("administrador-central/meses-presupuesto-actual",null,null).map(function(t){return t.json().data})},t.prototype.aniosPresupuestoActual=function(){return this.jwtRequest.get("administrador-central/anios-presupuesto-actual",null,null).map(function(t){return t.json().data})},t.prototype.presupuestoUnidadMedica=function(t){return void 0===t&&(t={}),this.jwtRequest.get("administrador-central/presupuesto-unidad-medica",null,t).map(function(t){return t.json().data})},t.prototype.transferenciasLista=function(t){return void 0===t&&(t={}),this.jwtRequest.get("administrador-central/transferencias-presupuestos",null,t).map(function(t){return t.json().data})},t.prototype.transferirPresupuesto=function(t){return void 0===t&&(t={}),this.jwtRequest.post("administrador-central/transferencias-presupuestos",t).map(function(t){return t.json().data})},t.prototype.mesesAniosAnteriorFechaActual=function(){return this.jwtRequest.get("administrador-central/meses-anios-presupuesto-actual-anterior-fecha-actual",null,null).map(function(t){return t.json().data})},t.prototype.transferirSaldosAlMesActual=function(t){return void 0===t&&(t={}),this.jwtRequest.post("administrador-central/transferencias-saldos-mes-actual",t).map(function(t){return t.json().data})},t.prototype.mesesAniosPedidos=function(){return this.jwtRequest.get("administrador-central/meses-anios-pedidos",null,null).map(function(t){return t.json().data})},t.prototype.entregasPedidosStatsMesesAnios=function(t){return void 0===t&&(t={}),this.jwtRequest.get("administrador-central/entregas-pedidos-stats-mes-anio",null,t).map(function(t){return t.json().data})},t.prototype.entregasPedidosStatsDiarias=function(t){return void 0===t&&(t={}),this.jwtRequest.get("administrador-central/entregas-pedidos-stats-diarias",null,t).map(function(t){return t.json().data})},t.prototype.pedidosCluesMesAnio=function(t){return void 0===t&&(t={}),this.jwtRequest.get("administrador-central/pedidos-clues-mes-anio",null,t).map(function(t){return t.json().data})},t.prototype.pedidosEntregasCluesMesAnio=function(t){return void 0===t&&(t={}),this.jwtRequest.get("administrador-central/pedidos-recepciones-clues-mes-anio",null,t).map(function(t){return t.json().data})},t.prototype.cumplimientoStatsGlobales=function(){return this.jwtRequest.get("administrador-central/cumplimiento-stats-globales",null,null).map(function(t){return t.json().data})},t.prototype.cumplimientoStatsProveedor=function(t){return this.jwtRequest.get("administrador-central/cumplimiento-stats-proveedor",t,null).map(function(t){return t.json().data})},t.prototype.verRecepciones=function(t){return this.jwtRequest.get("administrador-central/pedidos-recepcion",t,null).map(function(t){return t.json().data})},t.prototype.pedidoBorrador=function(t){return this.jwtRequest.get("administrador-central/pedidos-borrador",t,null).map(function(t){return t.json().data})},t.prototype.recepcionBorrador=function(t,e){return this.jwtRequest.get("administrador-central/recepcion-borrador",t,{type:e}).map(function(t){return t.json().data})},t.prototype.pedidoBorradorCancelado=function(t){return this.jwtRequest.get("administrador-central/pedidos-borrador-cancelado",t,null).map(function(t){return t.json().data})},t}();c=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(l=void 0!==i.Http&&i.Http)&&l||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],c);var l,d},FqeN:function(t,e){t.exports=""},G4Ik:function(t,e){t.exports='<div style="padding:1em;" *ngIf="total>0 && total > resultadosPorPagina">\r\n    <nav class="pagination" >\r\n        <a class="pagination-previous" [ngClass]="{\'is-disabled\': 1 == paginaActual }" (click)="anterior()">Anterior</a>\r\n        <a class="pagination-next"  [ngClass]="{\'is-disabled\': paginasTotales <= paginaActual }" (click)="siguiente()">Siguiente</a>\r\n        <ul class="pagination-list" *ngIf="paginasTotales<=7">\r\n            <li *ngFor="let i of indicePaginas">\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': i == paginaActual }" (click)="listar(i)">{{ i }}</a>\r\n            </li>\r\n        </ul>\r\n\r\n        <ul class="pagination-list" *ngIf="paginaActual < 4 && paginasTotales > 7">\r\n            <li>\r\n                <a class="pagination-link" [ngClass]="{\'is-current\': 1 == paginaActual }" (click)="listar(1)">1</a>\r\n            </li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': 2== paginaActual }" (click)="listar(2)">2</a></li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': 3== paginaActual }" (click)="listar(3)">3</a></li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': 4== paginaActual }" (click)="listar(4)">4</a></li>\r\n            <li><span class="pagination-ellipsis">&hellip;</span></li>\r\n            <li >\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales == paginaActual }" (click)="listar(paginasTotales)">{{ paginasTotales }}</a>\r\n            </li>\r\n        </ul>\r\n\r\n        <ul class="pagination-list" *ngIf="paginaActual > paginasTotales - 4 && paginasTotales > 7">\r\n            <li>\r\n                <a class="pagination-link" [ngClass]="{\'is-current\': 1 == paginaActual }" (click)="listar(1)">1</a>\r\n            </li>\r\n            <li><span class="pagination-ellipsis">&hellip;</span></li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales - 3 == paginaActual }" (click)="listar(paginasTotales - 3)">{{ paginasTotales - 3 }}</a></li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales - 2 == paginaActual }" (click)="listar(paginasTotales - 2)">{{ paginasTotales - 2 }}</a></li>\r\n            <li><a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales - 1 == paginaActual }" (click)="listar(paginasTotales - 1)">{{ paginasTotales - 1 }}</a></li>\r\n        \r\n            <li >\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales == paginaActual }" (click)="listar(paginasTotales)">{{ paginasTotales }}</a>\r\n            </li>\r\n        </ul>\r\n\r\n        <ul class="pagination-list" *ngIf="paginaActual >= 4 && paginaActual <= paginasTotales - 4 && paginasTotales > 7">\r\n            <li>\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': 1 == paginaActual }" (click)="listar(1)">1</a>\r\n            </li>\r\n            <li><span class="pagination-ellipsis">&hellip;</span>\r\n            </li>\r\n            <li>\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginaActual-1 == paginaActual }" (click)="listar(paginaActual-1)">{{ paginaActual-1 }}</a>\r\n            </li>\r\n            <li>\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginaActual == paginaActual }" (click)="listar(paginaActual)">{{ paginaActual }}</a>\r\n            </li>\r\n            <li >\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginaActual+1 == paginaActual }" (click)="listar(paginaActual+1)">{{ paginaActual+1 }}</a>\r\n            </li>\r\n            <li><span class="pagination-ellipsis">&hellip;</span></li>\r\n            <li >\r\n            <a class="pagination-link" [ngClass]="{\'is-current\': paginasTotales == paginaActual }" (click)="listar(paginasTotales)">{{ paginasTotales }}</a>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n</div>\r\n'},G8gi:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("nnFv"),o=a("2cH3");a.d(e,"a",function(){return l});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=function(){function t(){}return t}();l=c([a.i(n.NgModule)({imports:[i.CommonModule,r.b],exports:[s.a],providers:[o.a],declarations:[s.a]})],l)},Gbfn:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("rxeu"),s=a("pMm4"),o=a("D9tw");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"almacen/entradas-estandar",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"ver/:id",component:s.a}],canActivate:[o.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},Gbu6:function(t,e){t.exports='<menu-farmacia [modulo]="\'Pedidos\'" [icono]="\'assets/icono-pedidos.svg\'" [url]="\'/almacen/pedidos/por-surtir\'"></menu-farmacia>\r\n\r\n<div class="is-fullwidth has-text-centered" style="padding-top:70px;" *ngIf="cargando">\r\n  <br>\r\n  <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n  <br>\r\n  <br>\r\n</div>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile is-parent is-12 ">\r\n      <div class="tile is-child notification is-dark">\r\n        <div class="columns">\r\n          <div class="column" >\r\n            <div style="padding:1em;">\r\n              Folio: <a style="color:#FFFFFF !important; font-weight:bold;" routerLink="{{\'/almacen/pedidos/ver/\'+id}}">{{ folio }}</a>\r\n               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Claves Recibidas: {{ lotesSurtidos.length  }}<!-- / {{ pedido.lista.length }}-->\r\n               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span *ngIf="statusRecepcion == \'BR\'"><strong style="color:#FFF;">Recepción inciada</strong></span>\r\n               <span *ngIf="statusRecepcion == \'FI\'"><strong style="color:#FFF;">Recepción concluida</strong></span>\r\n            </div>\r\n          </div>\r\n          <div class="column is-4" style="text-align:right; " *ngIf="statusRecepcion != \'FI\'">\r\n            <div style="margin:1em;">\r\n            <a *ngIf="!guardando && statusRecepcion == \'BR\'" class="button is-primary" style="width:45%; margin-right:5%;" (click)="finalizar()"> <span class="icon"><i class="fa fa-check"></i></span> <span>Concluir</span></a>\r\n            <a  class="button is-white"  style="width:45%"  [ngClass]="{ \'is-loading\': guardando }"  (click)="guardar()"> <span class="icon"><i class="fa fa-save"></i></span> <span>Guardar</span></a>\r\n            </div>\r\n          </div>\r\n        </div>       \r\n      </div>\r\n    </div>\r\n    <div class="tile">\r\n      <div class="tile is-parent ">\r\n        <div class="tile is-child notification is-white" >\r\n          <div class="contenedor-tabla" >          \r\n            \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em; ">\r\n              <thead>\r\n                  <tr  [ngClass]="{ \'filtro\': pedido.filtro.activo}">\r\n                    <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                    <th>\r\n                      <p class="control is-expanded">\r\n                        <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                        <!--input class="input is-small" type="text" placeholder="Clave o Descripción" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])"-->\r\n                        <input class="input is-small" type="text" placeholder="Clave o Descripción" #searchBoxDescripcionClave id="search-box-descripcion-clave" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                      </p>\r\n                    </th>  \r\n                    \r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cantidad</abbr></th>\r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Surtido">Lotes</abbr></th>\r\n                    <th  style="width:21px !important; text-align: center; vertical-align: middle;">Surtido</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                <tr class="item" *ngFor="let item of pedido.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                      <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    <!--b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br-->\r\n                    <div class="item-detalle">\r\n                      <!--div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div-->\r\n                      \r\n\r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }} / {{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ (item.listaStockAsignado)?item.listaStockAsignado.length:0 }}</th>\r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>      \r\n              </tbody>\r\n              <tbody *ngIf="pedido.filtro.activo">\r\n                <tr class="item"  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <!--b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br-->\r\n                    <div class="item-detalle">\r\n                      <!--div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div-->\r\n\r\n                      <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }} / {{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ (item.listaStockAsignado)?item.listaStockAsignado.length:0 }}</th>\r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>   \r\n              </tbody>              \r\n            </table>\r\n            <paginacion style=" width:100%; height:auto; bottom:0; left:0px; background:#FFF;"\r\n                [total]="pedido.lista.length" \r\n                [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.paginacion.indice"\r\n                (onSiguiente)="pedido.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.paginaAnterior(); limpiarStock();" \r\n                (onListar)="pedido.listar($event);limpiarStock();" \r\n                *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n\r\n            <paginacion \r\n                [total]="pedido.filtro.lista.length" \r\n                [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                (onSiguiente)="pedido.filtro.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.filtro.paginaAnterior();  limpiarStock();" \r\n                (onListar)="pedido.filtro.listar($event); limpiarStock();" \r\n                *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="tile is-parent is-vertical ">\r\n        <div *ngIf="(capturarStock && (itemSeleccionado.cantidad_recibida < itemSeleccionado.cantidad))" class="tile is-child notification">\r\n          <div class="control is-grouped">\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <label class="label">Código de Barras</label>\r\n              <input class="input" autofocus type="text" placeholder="Código de Barras" [(ngModel)]="formStock.codigo_barras">\r\n            </p>\r\n            <!--p class="control has-icon has-icon-right">\r\n              <label class="label">Marca</label>\r\n              <span class="select is-expanded">\r\n                <select [(ngModel)]="formStock.marca">\r\n                  <option *ngFor="let item of marcas" [ngValue]="item">{{ item.nombre }}</option>\r\n                </select>\r\n              </span>\r\n            </p-->\r\n          </div>\r\n\r\n          <div class="control is-grouped">\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <label class="label">Lote</label>\r\n              <input class="input" autofocus type="text" placeholder="Lote" [(ngModel)]="formStock.lote">\r\n              <span *ngIf="erroresFormularioStock.lote.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.lote.error" class="help is-danger">{{erroresFormularioStock.lote.texto}}</span>\r\n            </p>\r\n            <p class="control is-expanded has-icon has-icon-right">\r\n              <label class="label">Caducidad (aaaa-mm-dd)</label>\r\n              <input class="input" type="text" placeholder="aaaa-mm-dd" [(ngModel)]="formStock.fecha_caducidad">\r\n              <span *ngIf="erroresFormularioStock.fecha_caducidad.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.fecha_caducidad.error" class="help is-danger">{{erroresFormularioStock.fecha_caducidad.texto}}</span>\r\n            </p>\r\n            <p class="control is-expanded has-icon has-icon-right">\r\n              <label class="label">Cantidad</label>\r\n              <input class="input" type="number" placeholder="Cantidad" [(ngModel)]="formStock.cantidad">\r\n              <span *ngIf="erroresFormularioStock.cantidad.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.cantidad.error" class="help is-danger">{{erroresFormularioStock.cantidad.texto}}</span>\r\n            </p>\r\n          </div>\r\n\r\n          <div class="control is-grouped is-pulled-right " >\r\n            <p class="control is-expanded">\r\n            </p>\r\n            <p class="control">\r\n                <button class="button is-medium is-primary " (click)="asignarStock()">\r\n                  <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar</span>\r\n                </button>\r\n            </p>\r\n            <p class="control">\r\n                <button class="button is-medium "  (click)="cancelarCapturaStock()">\r\n                  <span>Cancelar</span>\r\n                </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class="tile is-child  notification is-white">\r\n          <div class="contenedor-tabla">\r\n            <table class="table" *ngIf="!cargando && itemSeleccionado != null" style="font-size: 0.8em;" >\r\n              <thead>\r\n                  <tr style="background: #00d1b2;">\r\n                    <th style="color:#FFF !important;">Código</th>\r\n                    <!--th style="color:#FFF !important;">Marca</th-->\r\n                    <th style="color:#FFF !important;">Lote</th>\r\n                    <th style="color:#FFF !important;">Caducidad</th>\r\n                    <th style="color:#FFF !important;"><abbr title="Cantidad">Cant.</abbr></th>  \r\n                    <th></th>              \r\n                  </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th colspan="4" style="text-align:right">\r\n                    <span *ngIf="itemSeleccionado.totalStockAsignado == itemSeleccionado.cantidad"><span class="icon is-small" ><i class="fa fa-check-circle"></i></span> <span>Completo &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> Total </span>\r\n                  </th>\r\n                  <td style="text-align:center">{{ itemSeleccionado.totalStockAsignado || 0 }} / {{ itemSeleccionado.cantidad }}</td>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                  <tr  class="is-unselectable" *ngFor="let item of itemSeleccionado.listaStockAsignado">\r\n                    <td>{{ item.codigo_barras}}</td>\r\n                    <!--td>{{ item.marca.nombre }}</td-->\r\n                    <td>{{ item.lote }}</td>\r\n                    <td>{{ item.fecha_caducidad | date:\'dd/MM/y\' }}</td>\r\n                    <td style="width:150px !important;">\r\n                        <p class="control is-expanded">\r\n                        <input class="input is-small has-text-centered"  type="number" min="1" max="{{item.existencia}}" placeholder="Cant" [(ngModel)]="item.cantidad" (change)="validarItemStock(item, true)" (keyup)="validarItemStock(item)">\r\n                        </p>\r\n                    </td> \r\n                    <td style="vertical-align: middle;" class="has-text-centered"><a  class="is-danger" (click)="eliminarStock(item)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>                    \r\n                  </tr>\r\n              </tbody>  \r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n  </div>\r\n</div>\r\n  \r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogo()"></div>\r\n  <div class="modal-card" style="width:60%; height: 90%;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-check"></i></span> Finalizar Recepción \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogo()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <form name="form" novalidate [formGroup]="formularioRecepcion">\r\n          <label class="label">Nombre de quien entrega:</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" [ngClass]="{\'is-danger\': formularioTieneError(\'entrega\',\'required\')}" formControlName="entrega"/>\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'entrega\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'entrega\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n\r\n          <label class="label">Nombre de quien recibe:</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" [ngClass]="{\'is-danger\': formularioTieneError(\'recibe\',\'required\')}" formControlName="recibe"/>\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'recibe\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'recibe\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n\r\n          <label class="label">Fecha (aaaa-mm-dd):</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" placeholder="aaaa-mm-dd" [ngClass]="{\'is-danger\': formularioTieneError(\'fecha_movimiento\',\'required\')}" formControlName="fecha_movimiento" />\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'fecha_movimiento\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'fecha_movimiento\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n          \r\n          <div class="control">\r\n            <textarea name="observaciones" class="textarea" placeholder="Observaciones"  formControlName="observaciones"></textarea>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n      <div class="columns">\r\n          <div class="column" ></div>\r\n          <div class="column is-4" style="text-align:right; " *ngIf="statusRecepcion != \'FI\'">\r\n            <div style="margin:1em;">\r\n            <a  class="button is-primary" style="width:45%; margin-right:5%;" [ngClass]="{ \'is-loading\': guardando }"   (click)="guardar(true)"> <span class="icon"><i class="fa fa-check"></i></span> <span>Concluir</span></a>\r\n            </div>\r\n          </div>\r\n        </div> \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n'},GdAY:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".estatus-rojo{color:red!important}.estatus-amarillo{color:orange!important}.estatus-verde{color:#23d160}.estatus-azul{color:#3273dc}.estatus-normal{color:#555}.proyecto-estatus-amarillo td a,.proyecto-estatus-amarillo th a{color:orange!important}.proyecto-estatus-rojo td a,.proyecto-estatus-rojo th a{color:red!important}.proyecto-estatus-verde td a,.proyecto-estatus-verde th a{color:#23d160!important}.proyecto-estatus-azul td a,.proyecto-estatus-azul th a{color:#3273dc!important}.proyecto-estatus-normal td a,.proyecto-estatus-normal th a{color:#555}",""]),t.exports=t.exports.toString()},Gf2i:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={},this.menu=[],this.menuAutorizado=[]}return t.prototype.ngOnInit=function(){var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(this.menu=[{titulo:"Configuración",modulos:[{permiso:"zRTSAl0H8YNFMWcn00yeeJPigztCbSdC",icono:"fa-archive",titulo:"Mis almacenes",url:"/configuracion/almacenes"},{permiso:"Ki9kBghgqYsY17kqL620GWYl0bpeU6TB",icono:"fa-hospital-o",titulo:"Mis servicios",url:"/configuracion/servicios"},{permiso:"9dKCEyujSdLQF2CbpjXiWKeap0NlJCzw",icono:"fa-clock-o",titulo:"Mis turnos",url:"/configuracion/turnos"},{permiso:"BnB3LhrDbKNBrbQaeB2BPXKGrLEYrEw7",icono:"fa-medkit",titulo:"Mis claves",url:"/configuracion/claves"}]}],this.menuAutorizado=[],e.length>0)for(var a in this.menu)for(var n in this.menu[a].modulos)t:for(var i in e)if(e[i]==this.menu[a].modulos[n].permiso){var r=this.initMenuAutorizadoPorItem(this.menu[a].titulo);r.modulos.push(this.menu[a].modulos[n]);break t}},t.prototype.initMenuAutorizadoPorItem=function(t){for(var e in this.menuAutorizado)if(t==this.menuAutorizado[e].titulo)return this.menuAutorizado[e];return this.menuAutorizado.push({titulo:t,modulos:[]}),this.menuAutorizado[this.menuAutorizado.length-1]},t}();s=i([a.i(n.Component)({selector:"panel-control-menu-aside",template:a("3x/1"),styles:[a("Uz06")]}),r("design:paramtypes",[])],s)},GtVU:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.buscar=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get(l.URL,null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.crear=function(t){return this.jwtRequest.post(l.URL,t).map(function(t){return t.json().data})},t.prototype.listaMunicipios=function(){return this.jwtRequest.get("admision/municipio",null,null).map(function(t){return t.json().data})},t.prototype.listaLocalidades=function(t){return this.jwtRequest.get("admision/localidad",null,{municipio_id:t}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return t.json().data})},t.prototype.editar=function(t,e){return this.jwtRequest.put(l.URL,t,e).map(function(t){return t.json().data})},t.prototype.historial=function(t,e){return this.jwtRequest.get("admision/historial",t,null).map(function(t){return t.json().data})},t}();c.URL="admision/paciente",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},Gvcj:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("XUa4");a.d(e,"a",function(){return u});var d=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},u=function(){function t(){}return t}();u=d([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.a,o.a,c.a],declarations:[l.a],exports:[l.a]})],u)},H6Ec:function(t,e){t.exports='<menu-farmacia [modulo]="\'Entregas\'" [icono]="\'assets/icono-pedidos-alt.svg\'" [url]="\'/almacen/entregas\'"></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n      <menu-lateral></menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-history"></i></span> {{ titulo }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th>Folio</th>\r\n                    <th><abbr title="Número del pedido">Pedido</abbr></th>\r\n                    <th>Almacen solicitante:</th>\r\n                    <th>Fecha</th>\r\n                    <th>Hora</th>\r\n                    <th style="text-align:center;"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pedidos; let i=index">                       \r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.movimiento_pedido.pedido_id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.movimiento_pedido.pedido.almacen_solicitante.nombre}}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.created_at | date:\'dd/MM/y\' }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.created_at | date: \'HH:mm\'}}</a></td>\r\n                        <td></td>                        \r\n                    </tr>\r\n                    <tr *ngIf="pedidos.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.id }}</a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.movimiento_pedido.pedido_id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.movimiento_pedido.pedido.almacen_solicitante.nombre}}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.created_at | date:\'dd/MM/y\' }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/ver/{{item.id}}">{{ item.created_at | date: \'HH:mm\'}}</a></td>\r\n                        <td></td>                   \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n          \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>'},HDjA:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.lista=function(){return this.jwtRequest.get(l.URL).map(function(t){return t.json().data})},t}();c.URL="permisos",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},HMDJ:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("pPg0"),o=a("LLho"),c=a("LGGk"),l=a("0eWM"),d=a("+MOH"),u=a("WdPz"),p=a("QCH9"),m=a("ndCn"),f=a("XHvF"),g=a("58ut");a.d(e,"a",function(){return v});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=function(){function t(){}return t}();v=h([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,c.a,s.a,o.a],declarations:[l.a,d.a,p.a,m.a,f.a,g.a],providers:[u.a]})],v)},HStK:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.mostrar=!1,this.itemsProtegidos=[{title:"Almacén",routerLink:"/almacen",icono:"assets/hub-farmacia.svg",permisos:["z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk","iSxK0TpoYpnzf8KIQTWOq9Web7WnSKhz","GPSDLmXckXcdfdj7lD4rdacwMivsTp9g","qQvNeb1UFPOfVMKQnNkvxyqjCIUgFuEG","a1OMZVn7dveOf5aUK8V0VsvvSCxz8EMw"]},{title:"Inventario",routerLink:"/inventario",icono:"assets/icono-stock.svg",permisos:["H5IV7Z6CAj8V2CRIQ2wnbXrYhvjLsSBk","cE81erieaVjvmhcb9GCYI4doqYGtTcj1","0oADIo1ltfAl4VMDVbyWgLR3rAhYGjlY","7KbTARF2kpnO4Lfqv8hmYP8QGMcgJBwU"]},{title:"Almacén artículos",routerLink:"/almacen-articulos",icono:"assets/hub-almacen-articulos.svg",permisos:["z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk"]},{title:"Laboratorio",routerLink:"/laboratorio",icono:"assets/hub-laboratorio.svg",permisos:[]},{title:"Equipamiento",routerLink:"/equipamiento",icono:"assets/hub-equipamiento.svg",permisos:[]},{title:"Farmacia Subrrogada",routerLink:"/farmacia-subrrogada",icono:"assets/hub-farmacia-sub.svg",permisos:["MrL06vIO12iNhchP14h57Puvg71eUmYb","RZsvMjtPtpLWC8afsAFZsNnD9iXtiZC3"]},{title:"Administrador central",routerLink:"/administrador-central",icono:"assets/hub-administrador-central.svg",permisos:["bsIbPL3qv6XevcAyrRm1GxJufDbzLOax","bwWWUufmEBRFpw9HbUJQUP8EFnagynQv","s8kSv2Gj9DZwRvClVRmZohp92Rtvi26i","fWA5oDswZ2Ra4O8YaCy6nEY8OeCOxg9C","BBg7HSOEmjjOsVl48s8wSz8AxXhmBXA1"]},{title:"Administrador proveedores",routerLink:"/administrador-proveedores",icono:"assets/hub-administrador-proveedores.svg",permisos:["MrL06vIO12iNhchP14h57Puvg71eUmYb"]},{title:"Panel de control",routerLink:"/panel-control",icono:"assets/hub-panel-control.svg",permisos:["mGKikN0aJaeF2XrHwwYK3XNw0f9CSZDe","ICmOKw3HxhgRna4a78OP0QmKrIX0bNsp","DYwQAxJbpHWw07zT09scEogUeFKFdGSu"]},{title:"Configuración",routerLink:"/configuracion",icono:"assets/hub-configuracion.svg",permisos:["zRTSAl0H8YNFMWcn00yeeJPigztCbSdC","9dKCEyujSdLQF2CbpjXiWKeap0NlJCzw","Ki9kBghgqYsY17kqL620GWYl0bpeU6TB","BnB3LhrDbKNBrbQaeB2BPXKGrLEYrEw7"]},{title:"Pacientes",routerLink:"/paciente",icono:"assets/avatar-enfermero.svg",permisos:["PpXKhxdG8dGheNKm1rRSCT4EXZYyhRMm"]},{title:"Avances",routerLink:"/temas",icono:"assets/hub-avance.svg",permisos:["WbBYhMFZkGsAYeN13hY1hylZkNPJbHOE"]}],this.hubAutorizado=[{title:"Dashboard",routerLink:"/dashboard",icono:"assets/hub-dashboard.svg"}]}return t.prototype.ngOnInit=function(){var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(e.length>0)for(var a in this.itemsProtegidos)t:for(var n in this.itemsProtegidos[a].permisos)for(var i in e)if(e[i]==this.itemsProtegidos[a].permisos[n]){this.hubAutorizado.push(this.itemsProtegidos[a]);break t}},t.prototype.toggle=function(){this.mostrar=!this.mostrar},t}();s=i([a.i(n.Component)({selector:"app-hub",template:a("0HzE"),styles:[a("zu5J")]}),r("design:paramtypes",[])],s)},HnxL:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},HoXs:function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n        <br>\r\n        <nav class="level">\r\n            <div class="level-left">\r\n                <div class="level-item">\r\n                    <h1 class="title">\r\n                        <span class="icon is-medium"><i class="fa fa-bar-chart"></i></span> Entregas por mes\r\n                    </h1>\r\n                </div>\r\n            </div>\r\n            <div class="level-right">\r\n                <div class="level-item">\r\n                     <h1 class="subtitle">Mes: </h1>\r\n                </div>\r\n                <div class="level-item">\r\n                    <p class="control "  [ngClass]="{\'is-loading\': cargandoFechas, \'is-disabled\': cargandoFechas}">\r\n                        <span class="select is-fullwidth">\r\n                            <select  (change)="generarStats()"  [(ngModel)]="fecha">\r\n                                <option value="-1" *ngIf="cargandoFechas">Cargando...</option>\r\n                                <option value="-1" *ngIf="listaMesesAnios.length > 0">No hay meses</option>\r\n                                <option *ngFor="let item of listaMesesAnios" [value]="item.fecha">{{ item.mes_nombre }}/{{ item.anio }}</option>\r\n                            </select>\r\n                        </span>\r\n                    </p> \r\n                </div>\r\n            </div>\r\n\r\n        </nav>\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoEstadisticasGlobales">\r\n            <div class="notification is-white">\r\n                <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando estadisticas globales...</span>\r\n            </div>\r\n        </div>\r\n        <div class="columns is-multiline "  *ngIf="!cargandoEstadisticasGlobales">\r\n            <div class="column is-4" *ngFor="let item of estadisticasGlobales">\r\n                <div class="notification is-white">\r\n                    <h1 class="title" style="font-size:1.2em;  margin-bottom:0.2em;color:#00d1b2"><strong>${{ item.total_monto_solicitado | number:\'1.2-2\' }}</strong></h1>\r\n                    <h1 class="title" style="font-size:0.8em; margin-bottom:0.2em;">{{ item.proveedor }}</h1>\r\n                    <hr style="margin: 0.2em 0">\r\n                    <nav class="level"><div class="level-left">Entregado</div><div class="level-right"><b>{{ item.porcentaje_entregado | number:\'1.2-2\' }}%</b></div></nav>\r\n                   \r\n                   \r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="columns is-multiline"  *ngIf="!cargandoEstadisticasGlobales">\r\n            <div class="column is-12" *ngFor="let item of listaEntregasEstadisticaDiaria; let  i = index">\r\n                <div style="display:block; background:white; border-radius:0.2em; padding: 0.5em 0; min-height:471px" *ngIf="!item.cargando && item.options">\r\n                    <nav class="level" style="margin:1em;">\r\n                        <div class="level-left">\r\n                            <p><b>ENTREGAS {{ item.proveedor }}</b> <small style="color:gray;">Estadística diaria</small></p>\r\n                        </div>\r\n                        <div class="level-right">\r\n                            <div>\r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'claves\' }" (click)="item.tipoDatos = \'claves\'; renderGrafica(i)">Claves</span> \r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'insumos\' }" (click)="item.tipoDatos = \'insumos\'; renderGrafica(i)">Insumos</span> \r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'monto\' }" (click)="item.tipoDatos = \'monto\'; renderGrafica(i)">$ Monto</span>\r\n                            </div>\r\n                            \r\n                        </div>\r\n                    </nav>\r\n                    <hr style="margin:0">\r\n                    <chart *ngIf="mostrarGraficas" [options]="item.options" style="display:block;"></chart>\r\n                </div>\r\n\r\n                <div class="is-fullwidth has-text-centered"  *ngIf="item.cargando ">\r\n                    <div class="notification is-white">\r\n                        <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando estadísticas diarias de: <b>{{item.proveedor}}</b>...</span>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n\r\n\r\n        <div class="columns is-multiline"  *ngIf="!cargandoEstadisticasGlobales">\r\n            <div class="column is-12" *ngFor="let item of listaPedidosClues; let  i = index">\r\n                <div style="display:block; background:white; border-radius:0.2em; padding: 0.5em 0;" *ngIf="!item.cargando">\r\n                    <nav class="level" style="margin:1em;">\r\n                        <div class="level-left">\r\n                            <p><b>ENTREGAS DEL MES DE {{ item.proveedor }}</b> <small style="color:gray;">Expresado en piezas</small></p>\r\n                        </div>\r\n                    </nav>\r\n                    <hr style="margin:0">\r\n                    <table class="table" style="font-size:0.8em;">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>NUM.</th>\r\n                                <th>UNIDAD MÉDICA</th>\r\n                                <th colspan="2">CAUSES</th>\r\n                                <th colspan="2">NO CAUSES</th>\r\n                                <th colspan="2">MATERIAL DE CURACIÓN</th>\r\n                                <th>PEDIDOS</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr *ngFor="let um of item.data; let j = index">\r\n                                <td>{{ j + 1 }}</td>\r\n                                <td><a style="color:#3273dc !important; font-weight:bold;" (click)="generarExcel(um.clues,item.proveedor_id)">{{ um.unidad_medica }}</a></td>\r\n                                <td *ngIf="um.causes_cantidad_solicitada > 0">{{ um.causes_cantidad_recibida | number: \'1.0-0\' }}/{{ um.causes_cantidad_solicitada | number: \'1.0-0\' }}</td>                                \r\n                                <th *ngIf="um.causes_cantidad_solicitada > 0">{{ parseNaN((um.causes_cantidad_recibida * 100 / um.causes_cantidad_solicitada)) | number: \'1.2-2\' }}%</th>\r\n                                <td colspan="2" *ngIf="um.causes_cantidad_solicitada == 0"></td>\r\n\r\n                                <td *ngIf="um.no_causes_cantidad_solicitada > 0">{{ um.no_causes_cantidad_recibida | number: \'1.0-0\' }}/{{ um.no_causes_cantidad_solicitada | number: \'1.0-0\' }}</td>\r\n                                <th *ngIf="um.no_causes_cantidad_solicitada > 0">{{ parseNaN((um.no_causes_cantidad_recibida * 100 / um.no_causes_cantidad_solicitada)) | number: \'1.2-2\' }}%</th>\r\n                                <td colspan="2" *ngIf="um.no_causes_cantidad_solicitada == 0"></td>\r\n\r\n                                <td *ngIf="um.material_curacion_cantidad_solicitada > 0">{{ um.material_curacion_cantidad_recibida | number: \'1.0-0\' }}/{{ um.material_curacion_cantidad_solicitada | number: \'1.0-0\' }}</td>\r\n                                <th *ngIf="um.material_curacion_cantidad_solicitada > 0">{{ parseNaN((um.material_curacion_cantidad_recibida * 100 / um.material_curacion_cantidad_solicitada)) | number: \'1.2-2\' }}%</th>\r\n                                <td colspan="2" *ngIf="um.material_curacion_cantidad_solicitada == 0"></td>\r\n                                <td><a class="button is-info is-outlined is-small" (click)="verDialogoPedidos(item.proveedor_id,um)">{{ um.total_pedidos }} Pedido(s)</a></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                <div class="is-fullwidth has-text-centered"  *ngIf="item.cargando ">\r\n                    <div class="notification is-white">\r\n                        <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando entregas del mes de: <b>{{item.proveedor}}</b>...</span>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarDialogoPedidos}">\r\n  <div class="modal-background" (click)="cerrarDialogoPedidos()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-file"></i></span> {{tituloDialogoPedidos}} \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogoPedidos()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoPedidosUnidadMedica">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando repositorio...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <div class="columns" *ngIf="!cargandoPedidosUnidadMedica">\r\n          <table class="table" *ngIf="!cargandoPedidosUnidadMedica" style="min-width:100%; font-size:0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan="3" style="text-align:center;">Datos del Pedido</th>\r\n                        <th colspan="2" style="text-align:center;">Claves</th>\r\n                        <th colspan="2" style="text-align:center;">Insumos</th>\r\n                        <th colspan="2" style="text-align:center;">Montos</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th style="text-align:center;">Folio</th>\r\n                        <th style="text-align:center;">Nombre del Pedido</th>\r\n                        <th style="text-align:center;">Fecha de Notificación</th>\r\n                        <th style="text-align:center;">Surtidas/Solicitadas</th>\r\n                        <th style="text-align:center;">% Acu</th>\r\n                        <th style="text-align:center;">Surtidos/Solicitados</th>\r\n                        <th style="text-align:center;">% Acu</th>\r\n                        <th style="text-align:center;">Surtido/Solicitado</th>\r\n                        <th style="text-align:center;">% Acu</th>\r\n                        <th></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngFor="let pedido of pedidosUnidadMedica">\r\n                    <tr>\r\n                        <td>{{pedido.folio}}</td>\r\n                        <td>{{pedido.nombre_pedido}}</td>\r\n                        <td style="text-align:center;">{{ pedido.fecha_concluido | date:\'y-MM-dd\' }}</td>\r\n                        <td style="text-align:center;">{{pedido.total_claves_recibidas | number: \'1.0-0\'}} / {{pedido.total_claves_solicitadas | number: \'1.0-0\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((pedido.total_claves_recibidas * 100 /pedido.total_claves_solicitadas)) | number: \'1.2-2\'}}%</td>\r\n                        <td style="text-align:center;">{{pedido.total_cantidad_recibida | number: \'1.0-0\'}} / {{pedido.total_cantidad_solicitada | number: \'1.0-0\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((pedido.total_cantidad_recibida * 100 /pedido.total_cantidad_solicitada)) | number: \'1.2-2\'}}%</td>\r\n                        <td style="text-align:center;">$ {{pedido.total_monto_recibido | number: \'1.2-2\'}} / $ {{pedido.total_monto_solicitado | number: \'1.2-2\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((pedido.total_monto_recibido * 100 /pedido.total_monto_solicitado)) | number: \'1.2-2\'}}%</td>\r\n                        <td style="text-align:center;">\r\n                            <span *ngIf="pedido.tipo_pedido_id == \'PFS\' && pedido.entregas.length == 0">En Farmacia</span>\r\n                            <span *ngIf="pedido.tipo_pedido_id != \'PFS\' && pedido.entregas.length == 0">Sin entregas</span>\r\n                            <span *ngIf="pedido.entregas.length > 0">{{pedido.entregas.length}} entrega(s)</span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngFor="let entrega of pedido.entregas" class="lista-entregas">\r\n                        <td style="text-align:right;" colspan="2"> Recepción</td>\r\n                        <td style="text-align:center;">{{entrega.fecha}}</td>\r\n                        <td style="text-align:center;">{{entrega.total_claves | number: \'1.0-0\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((entrega.acumulado_claves * 100 /pedido.total_claves_solicitadas)) | number: \'1.2-2\'}}%*</td>\r\n                        <td style="text-align:center;">{{entrega.total_cantidad | number: \'1.0-0\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((entrega.acumulado_cantidad * 100 /pedido.total_cantidad_solicitada)) | number: \'1.2-2\'}}%*</td>\r\n                        <td style="text-align:center;">$ {{entrega.total_monto | number: \'1.2-2\'}}</td>\r\n                        <td style="text-align:center;">{{parseNaN((entrega.acumulado_monto * 100 /pedido.total_monto_solicitado)) | number: \'1.2-2\'}}%*</td>\r\n                        <td></td>\r\n                    </tr>\r\n                    <tr *ngIf="pedido.entregas.length > 0"><td colspan="10" style="text-align:right"></td></tr>\r\n                </tbody>\r\n                <tbody>\r\n                    <tr><td colspan="10" style="text-align:right">*porcentaje acumulado</td></tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},HpF0:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.lista=function(){return this.jwtRequest.get(""+l.URL,null).map(function(t){return t.json()})},t.prototype.listaDatos=function(){return this.jwtRequest.get(l.url+"?proveedor_id=3&fecha_inicial=2017-05-10&fecha_final=2017-06-30").map(function(t){return t.json()})},t}();c.URL="grafica-entregas",c.url="grafica-entregas",c.URL_STATS="movimiento-stats",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},Hsji:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("I4uU"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"almacen-articulos/catalogos",component:r.a,canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},Hzc3:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},I1BN:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.onCerrar=new n.EventEmitter,this.onEnviar=new n.EventEmitter,this.lectura=!1}return t.prototype.ngOnInit=function(){},t.prototype.actualizarTotales=function(){this.insumo.monto=0,this.insumo.cantidad=0;for(var t in this.insumo.lista_clues)this.insumo.monto+=this.insumo.lista_clues[t].cantidad*this.insumo.precio,this.insumo.cantidad+=this.insumo.lista_clues[t].cantidad},t.prototype.eliminarInsumo=function(t,e){for(var a in this.listaClaveAgregadas)if(this.listaClaveAgregadas[a].clave==this.insumo.clave){for(var n in this.listaClaveAgregadas[a].lista)if(this.insumo.lista_clues[e].clues==this.listaClaveAgregadas[a].lista[n]){this.listaClaveAgregadas[a].lista.splice(n,1);break}break}this.insumo.lista_clues.splice(e,1),this.actualizarTotales()},t.prototype.cerrar=function(){this.onCerrar.emit()},t}();i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onCerrar",void 0),i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onEnviar",void 0),i([a.i(n.Input)(),r("design:type",Boolean)],s.prototype,"lectura",void 0),i([a.i(n.Input)(),r("design:type",Object)],s.prototype,"insumo",void 0),i([a.i(n.Input)(),r("design:type",Array)],s.prototype,"listaClaveAgregadas",void 0),s=i([a.i(n.Component)({selector:"pedidos-jurisdiccionales-lista-clues",template:a("FFns"),styles:[a("/1w0")]}),r("design:paramtypes",[])],s)},I4uU:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.title=t,this.usuario={},this.busqueda="",this.modulos=[],this.accesosDirectos=[]}return t.prototype.ngOnInit=function(){this.title.setTitle("Artículos / Catálogos"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[{permiso:"",icono:"assets/catalogo-grupo-insumos.svg",titulo:"Grupos de insumos",url:"/catalogos/grupos-insumos"},{permiso:"",icono:"assets/catalogo-marcas.svg",titulo:"Marcas",url:"/catalogos/marcas"},{permiso:"",icono:"assets/catalogo-mc.svg",titulo:"Material de curación",url:"/catalogos/material-curacion"},{permiso:"",icono:"assets/catalogo-medicamento.svg",titulo:"Medicamentos",url:"/catalogos/medicamentos"},{permiso:"",icono:"assets/catalogo-programas.svg",titulo:"Programas",url:"/catalogos/programas"},{permiso:"",icono:"assets/catalogo-presentacion.svg",titulo:"Presentaciones de medicamentos",url:"/catalogos/presentaciones-medicamentos"},{permiso:"",icono:"assets/catalogo-administracion.svg",titulo:"Vias de administración",url:"vias-administracion"},{permiso:"",icono:"assets/catalogo-unid-medida.svg",titulo:"Unidades de medida",url:"/almacen-articulos/catalogos/unidades-medida"},{permiso:"",icono:"assets/catalogo-servicios.svg",titulo:"Servicios",url:"/catalogos/servicios"},{permiso:"",icono:"assets/catalogo-pedido.svg",titulo:"Tipos de pedidos",url:"/catalogos/tipo-pedido"},{permiso:"",icono:"assets/catalogo-tipo-movimiento.svg",titulo:"Tipos de movimientos",url:"/catalogos/tipos-movimientos"},{permiso:"",icono:"assets/catalogo-tipo-insumos.svg",titulo:"Tipos de insumos",url:"/catalogos/tipos-insumos"}],this.accesosDirectos=[{permiso:"",icono:"assets/catalogo-servidor.svg",titulo:"Servidores",url:"/catalogos/servidores"},{permiso:"",icono:"assets/catalogo-almacenes.svg",titulo:"Almacenes",url:"/catalogos/almacenes"},{permiso:"",icono:"assets/catalogo-proveedores.svg",titulo:"Proveedores",url:"/catalogos/proveedores"},{permiso:"",icono:"assets/catalogo-um.svg",titulo:"Unidades Médicas",url:"unidades-medicas"}]},t}();o=r([a.i(n.Component)({selector:"app-index-catalogo",template:a("12Vl"),styles:[a("VXpv")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},IO5Q:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("F2Xx"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"configuracion/turnos",redirectTo:"configuracion/turnos",pathMatch:"full"},{path:"configuracion/turnos",children:[{path:"",component:r.a}],canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},IP0q:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),t.exports=t.exports.toString()},IdTZ:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bKpL"),s=(a.n(r),a("rlar")),o=(a.n(s),a("/zHi")),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("JaZ/")),g=a("gHRf");a.d(e,"a",function(){return b});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e){this.title=t,this.apiService=e,this.tab=1,this.cargando=!1,this.mostrarModalClues=!1,this.listaSeleccionada=null,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Validación pedidos alternos / Administrador central"),this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0;var a={status:"VAL",sin_proveedor:1==t.tab,q:e,page:t.paginaActualBusqueda,per_page:t.resultadosPorPaginaBusqueda};return e?t.apiService.buscar(a):r.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0;var n={status:"VAL",sin_proveedor:1==this.tab,q:t,page:this.paginaActualBusqueda,per_page:this.resultadosPorPaginaBusqueda};this.apiService.buscar(n).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0;var a={status:"VAL",sin_proveedor:1==this.tab,page:t,per_page:this.resultadosPorPagina};this.apiService.listaPaginada(a).subscribe(function(t){e.cargando=!1,e.lista=t.data,console.log(e.lista),e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.cambiarTab=function(t){this.tab=t,this.busquedaActivada?this.listarBusqueda(this.searchBoxViewChildren.first.nativeElement.value,1):this.listar(1)},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();h([a.i(n.ViewChildren)("searchBox"),v("design:type",Object)],b.prototype,"searchBoxViewChildren",void 0),b=h([a.i(n.Component)({selector:"validacion-pedidos-alternos-lista",template:a("vbuU"),styles:[a("ajBO")],providers:[f.a]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==f.a&&f.a)&&_||Object])],b);var y,_},Ijne:function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n      \r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary"  >\r\n                \r\n                <div class="hero-body" style="position:relative;">                    \r\n                    \r\n                    <a class="button  is-primary" *ngIf="!cargando" style="position:absolute; top:1em; right:1em;" (click)="exportar()"><span class="icon "><i class="fa fa-file-excel-o"></i></span> <span>Exportar</span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-line-chart"></i></span> Abasto\r\n                        </h1>\r\n                        \r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar por CLUES" [(ngModel)] = "clues" (keyup)="filtrarClues($event)">\r\n                        </p>\r\n                        </div>\r\n                        <div class="columns">                            \r\n                            <div class="column">\r\n                                <label for="jurisdicciones">Proveedores:</label>\r\n                       \r\n                                <p class="control is-expanded">\r\n                                    <span class="select is-fullwidth">\r\n                                    <select #proveedoresSelect (change)="cambioSeleccionProveedor(proveedoresSelect.value)">\r\n                                        <option value="-1">Todos</option>\r\n                                        <option *ngFor="let item of proveedores" value="{{item.id}}">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                    </span>\r\n                                </p>                   \r\n                          \r\n                            </div>\r\n                            <div class="column">\r\n                                <label for="jurisdicciones">Jurisdicciones:</label>\r\n                             \r\n                                <p class="control is-expanded">\r\n                                    <span class="select is-fullwidth">\r\n                                    <select #js id="jurisdicciones"  (change)="cambioSeleccionJurisdiccion(js.value)">\r\n                                        <option value="-1">Todas</option>\r\n                                        <option *ngFor="let item of jurisdicciones" value="{{item.id}}">JS {{ item.numero }} - {{ item.nombre }}</option>\r\n                                    </select>\r\n                                    </span>\r\n                                </p>\r\n                                                       \r\n                               \r\n                            </div>\r\n                        </div>\r\n                        <div *ngIf="jurisdiccionesSeleccionadas.length>0 || proveedoresSeleccionados.length>0">\r\n                            <h1 class="title is-6">Filtro aplicado:</h1>\r\n                            <span class="tag is-dark is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of proveedoresSeleccionados; let i = index">{{ item.nombre_corto }}<button class="delete is-small" (click)="quitarProveedor(i)"></button></span>\r\n                            <span class="tag is-white is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of jurisdiccionesSeleccionadas;  let i = index">JS {{ item.numero }}<button class="delete is-small" (click)="quitarJurisdiccion(i)"></button></span>\r\n                            \r\n                        </div>\r\n                        <nav class="level">\r\n                            <div class="level-left"><h1 class="title is-5">Resultados: <b>{{ total }}</b></h1></div>\r\n                            <div class="level-right">\r\n                                <div class="block">\r\n                                <button class="button " *ngIf="jurisdiccionesSeleccionadas.length>0 || proveedoresSeleccionados.length>0 || clues != \'\'" (click)="clues = \'\'; jurisdiccionesSeleccionadas = []; proveedoresSeleccionados = []; js.value = -1; proveedoresSelect.value= -1 "><span class="icon"><i class="fa fa-times"></i></span> <span>Limpiar filtro</span></button>\r\n                                <button class="button is-primary is-inverted" (click)="listar(1)"><span class="icon"><i class="fa fa-filter"></i></span> <span>Filtrar</span></button>\r\n                                </div>\r\n                            </div>\r\n                        </nav>\r\n                    \r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th>Proveedor</th>\r\n                    <th>Clues</th>\r\n                    <th>Nombre</th>\r\n                    <th style="cursor:pointer" (click)="toggleCauses()"><span><abbr title="Causes">CA</abbr></span><span class="icon is-small"><i class="fa" [ngClass]="{ \'fa-sort\': ordenarCauses == \'\', \'fa-sort-asc\': ordenarCauses == \'ASC\', \'fa-sort-desc\': ordenarCauses == \'DESC\' }"></i></span></th>\r\n                    <th style="cursor:pointer" (click)="toggleNoCauses()"><abbr title="No causes">NCA</abbr><span class="icon is-small"><i class="fa" [ngClass]="{ \'fa-sort\': ordenarNoCauses == \'\', \'fa-sort-asc\': ordenarNoCauses == \'ASC\', \'fa-sort-desc\': ordenarNoCauses == \'DESC\' }"></i></span></th>\r\n                    <th style="cursor:pointer" (click)="toggleMaterialCuracion()"><abbr title="Material de curación">MC</abbr><span class="icon is-small"><i class="fa" [ngClass]="{ \'fa-sort\': ordenarMaterialCuracion == \'\', \'fa-sort-asc\': ordenarMaterialCuracion == \'ASC\', \'fa-sort-desc\': ordenarMaterialCuracion == \'DESC\' }"></i></span></th>\r\n                    </tr>\r\n                </thead>\r\n                \r\n                <tbody>\r\n                    <tr *ngFor="let item of lista; let i=index">                        \r\n                        <td style="vertical-align: middle;">{{ item.proveedor }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.clues }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.unidad_medica }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.porcentaje_causes }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.porcentaje_no_causes }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.porcentaje_material_curacion }}</td>\r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina"></paginacion>\r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},IxAd:function(t,e){t.exports='<menu-farmacia [modulo]="\'Pedidos\'" [icono]="\'assets/icono-pedidos.svg\'" [url]="\'/almacen/pedidos\'"></menu-farmacia>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile">\r\n      <div class="tile is-4 is-parent is-vertical ">\r\n        <div class="tile is-child">\r\n            <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n                <section class="hero is-primary" >\r\n                <h1 class="title" style="margin:0.5em;" >\r\n                    <span class="icon is-medium"><i class="fa fa-file-text"></i></span> {{formularioTitulo}} \r\n                </h1>\r\n                <a class="button is-success" title="Imprimir Excel" (click)="imprimirExcel(); " *ngIf="esEditar">\r\n                    <span class="icon"><i class="fa fa-file-excel-o"></i></span> &nbsp; Descargar Pedido en Excel\r\n                </a>\r\n                </section>\r\n\r\n                <div style="padding: 1em;">\r\n                <form name="form" novalidate [formGroup]="pedido.datos">\r\n                    <label class="label">Pedido para:</label>\r\n                    <p class="control">\r\n                        <span class="select is-fullwidth">\r\n                            <select name="almacen_solicitante" formControlName="almacen_solicitante" [ngClass]="{\'is-warning\': almacenes?.length == 0 }" (change)="cambioAlmacen()"> \r\n                                <option *ngFor="let item of almacenes" value="{{item.id}}" [disabled]="deshabilitarAlmacen(item)">{{ item.nombre }}</option>\r\n                            </select>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'almacen_solicitante\',\'required\')">Debe elegir el almacen solicitante.</span>\r\n                    </p>\r\n                    <p *ngIf="es_almacen_subrogado" class="subtitle is-6 is-info">\r\n                        Al concluir el pedido, los insumos capturados serán  asignados al inventario de la farmacia subrogada.\r\n                    </p>\r\n\r\n                    <label class="label">Nombre del Pedido:</label>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input type="text" class="input is-fullwidth" placeholder="Ej. Pedido del mes de Mayo" [ngClass]="{\'is-danger\': pedido.tieneError(\'descripcion\',\'required\')}" formControlName="descripcion"/>\r\n                        <span class="icon is-small" *ngIf="pedido.tieneError(\'descripcion\',\'required\')">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'descripcion\',\'required\')">Este campo es requerido.</span>\r\n                    </p>\r\n\r\n                    <label class="label">Fecha (aaaa-mm-dd):</label>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <!--input type="text" class="input is-fullwidth" placeholder="aaaa-mm-dd" [ngClass]="{\'is-danger\': pedido.tieneError(\'fecha\',\'required\')}" formControlName="fecha" #fecha id="fecha" (keyup)="recargarPresupuesto(fecha.value)"/-->\r\n                        <span class="icon is-small" *ngIf="pedido.tieneError(\'fecha\',\'required\')">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="select is-fullwidth">\r\n                            <select [ngClass]="{\'is-danger\': pedido.tieneError(\'fecha\',\'required\')}" formControlName="fecha" #fecha id="fecha" (change)="recargarPresupuesto(fecha.value)">\r\n                                <option *ngFor="let item of fechasValidas" value="{{item.fecha}}">{{ item.descripcion }}</option>\r\n                            </select>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'fecha\',\'required\')">Este campo es requerido.</span>\r\n                    </p>\r\n\r\n                    <div class="control">\r\n                    <textarea name="observaciones" class="textarea" placeholder="Observaciones"  formControlName="observaciones"></textarea>\r\n                    </div>\r\n                </form>\r\n\r\n                <label *ngIf="pedido.tipo_pedido != \'PI\' && esEditar" class="label">Datos del Proveedor:</label>\r\n                <div *ngIf="pedido.tipo_pedido != \'PI\' && esEditar" class="level-item">\r\n                    <div *ngIf="esEditar" >\r\n                    <p class="subtitle is-5">\r\n                        {{proveedor.nombre}}<br>\r\n                        <small>\r\n                        {{proveedor.contacto}}<br>\r\n                        {{proveedor.email}}<br>\r\n                        Cel: {{proveedor.celular}}\r\n                        </small>\r\n                    </p>\r\n                    </div>\r\n                </div>\r\n                <hr>\r\n\r\n                <div class="control is-grouped" style="padding-top:10px;" *ngIf="!cargando">\r\n                    <!--p class="control" *ngIf="esEditar">\r\n                        <a class="button is-success " [ngClass]="{ \'is-loading\': cargando, \'is-inverted\': !cargando }" (click)="imprimirExcel()" title="Imprimir Excel" ><span class="icon"><i class="fa fa-file-excel-o"></i></span></a>\r\n                    </p-->\r\n\r\n                    <p class="control">\r\n                        <a class="button is-primary " (click)="guardar()" [ngClass]="{\'is-loading\': guardando}" >Guardar</a>\r\n                    </p>\r\n                    <p class="control" *ngIf="esEditar">\r\n                        <a class="button is-danger " (click)="finalizar()" [ngClass]="{\'is-loading\': guardando}" ><span class="icon"><i class="fa fa-check"></i></span><span>Concluir</span></a>\r\n                    </p>\r\n                \r\n                    <!--p class="control" *ngIf="esEditar">\r\n                    <a class="button is-primary " [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }" (click)="imprimir()" ><span class="icon"><i class="fa fa-print"></i></span></a>\r\n                    </p-->\r\n                    <p class="control">\r\n                    <a class="button is-white" [ngClass]="{\'is-loading\': guardando}" routerLink="{{obtenerDireccion()}}" >Ir a la lista</a>\r\n                    </p>                \r\n                </div>\r\n                </div>\r\n            </div>\r\n            <br>\r\n        </div>\r\n        \r\n        <div class="tile is-child  notification is-white">\r\n        </div>\r\n      </div>\r\n\r\n      <div class="tile is-parent is-vertical">\r\n        <div class="tile is-child is-12" >\r\n            <div class="tile is-parent" style="padding:0px;">\r\n                <article class="tile is-child notification is-info has-text-centered" style="padding:0.5rem 0.5rem 0.5rem 0.5rem">\r\n                    <div class="content" *ngIf="!cargandoPresupuestos">\r\n                        <span *ngIf="(totalMontoComprometidoCausesMaterial + (presupuesto.causes_disponible + presupuesto.material_curacion_disponible) - (pedido.totalMontoCauses + pedido.totalMontoMaterialCuracion)) < 0" class="icon is-large pull-right"><i class="fa fa-warning"></i></span>\r\n                        <p class="subtitle" style="font-weight:bold;">\r\n                            <small>\r\n                                Disponible Causes y Material de Curación:<br> \r\n                                $ {{ totalMontoComprometidoCausesMaterial + (presupuesto.causes_disponible - pedido.totalMontoCauses.toFixed(2)) + (presupuesto.material_curacion_disponible - pedido.totalMontoMaterialCuracion.toFixed(2)) | number: \'1.2-2\' }}\r\n                            </small>\r\n                        </p>\r\n                    </div>\r\n                    <div class="content" *ngIf="cargandoPresupuestos">\r\n                        <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span>\r\n                    </div>\r\n                </article>\r\n\r\n                <article class="tile is-child notification is-danger has-text-centered" style="padding:0.5rem 0.5rem 0.5rem 0.5rem">\r\n                    <div class="content" *ngIf="!cargandoPresupuestos">\r\n                        <span *ngIf="(totalMontoComprometidoNoCauses + presupuesto.no_causes_disponible - pedido.totalMontoNoCauses) < 0" class="icon is-large pull-right"><i class="fa fa-warning"></i></span>\r\n                        <p class="subtitle" style="font-weight:bold;">\r\n                            <small>\r\n                                Disponible No Causes:<br>  $ {{ totalMontoComprometidoNoCauses + (presupuesto.no_causes_disponible - pedido.totalMontoNoCauses.toFixed(2)) | number: \'1.2-2\' }}\r\n                            </small>\r\n                        </p>\r\n                    </div>\r\n                    <div class="content" *ngIf="cargandoPresupuestos">\r\n                        <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span>\r\n                    </div>\r\n                </article>\r\n            </div>\r\n        </div>\r\n        <div class="tile is-child" >\r\n          <div class="contenedor-pedido" >\r\n            <div class="top-bar" [ngClass]="{\'is-primary\':!pedido.filtro.activo,\'is-dark\': pedido.filtro.activo }">\r\n                <span *ngIf="!pedido.filtro.activo">\r\n                    <small>\r\n                        Mes: <strong style="color:white;">{{ meses[mes] }} </strong>\r\n                        Claves: <strong style="color:white;">{{ pedido.lista.length | number }} </strong>\r\n                        Insumos: <strong style="color:white;">{{pedido.totalInsumos | number}} </strong>\r\n                        Total: <strong style="color:white;">$ {{ pedido.totalMonto | number: \'1.2-2\' }}</strong>\r\n                    </small>\r\n                </span>\r\n                <span *ngIf="pedido.filtro.activo">\r\n                    <span class="icon"><i class="fa fa-search"></i></span> Resultados: {{ pedido.filtro.lista.length }}\r\n                </span>\r\n                <a class="button is-primary  is-pulled-right" *ngIf="almacenSeleccionado.id" [ngClass]="{ \'is-inverted\': pedido.filtro.activo }" style="margin-top:-0.25em;" title="Ctrl + espacio" (click)="toggleModalInsumos(); ">\r\n                    <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar Clave</span>\r\n                </a>\r\n            </div> \r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="guardando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-spinner fa-spin"></i></span> &nbsp;<span>Guardando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table is-unselectable" *ngIf="!cargando && !guardando" style="font-size: 0.8em;">\r\n                <thead>\r\n                    <tr  >\r\n                        <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                        <th class="is-hidden-mobile" style="width:118px;">\r\n                        <p class="control is-expanded" >\r\n                            <input type="hidden" #searchBoxClavePrevia >\r\n                            <!--input class="input is-small" type="text" placeholder="Clave" #searchBoxClave id="search-box-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxClave, searchBoxClavePrevia,[{ input: searchBoxDescripcion, campos: [\'generico\',\'informacion.concentracion\',\'informacion.presentacion\']}, { input: searchBoxClave, campos: [\'clave\']}])"-->\r\n                            <input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave" (keyup)="buscar($event,searchBoxClave,searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>\r\n                        <!--th class="is-hidden-mobile">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionPrevia >\r\n                            <input class="input is-small" type="text" placeholder="Genérico" #searchBoxDescripcion id="search-box-descripcion-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcion,searchBoxDescripcionPrevia,[{ input: searchBoxDescripcion, campos: [\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}, { input: searchBoxClave, campos: [\'clave\']}])">\r\n                        </p>\r\n                        </th--> \r\n                        <th class="is-hidden-tablet">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                            <!--input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])"-->\r\n                            <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>  \r\n                        <th style="vertical-align: middle;" class="is-hidden-mobile " >Descripcion</th>                  \r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;" *ngIf="esPedidoJurisdiccional"><abbr title="Unidades médicas asignadas">Clues</abbr></th>\r\n                        <th  style="width:21px !important;"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                    <tr   *ngFor="let item of pedido.paginacion.lista; let i = index;">\r\n                        <td class="has-text-centered">{{ item.lote }}</td>\r\n                        <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                        \r\n                        <td>\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n                            <div style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            </div>\r\n                        </td>\r\n\r\n                        <!--td >\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <b>{{ item.generico_nombre }}</b> <br  class="is-hidden-mobile"><small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                            \r\n                            <div class="is-hidden-desktop" *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                            <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                            <small><i>{{ item.informacion.contenido }} </i></small>\r\n                            </div>\r\n                            <div class="is-hidden-desktop" *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div class="is-hidden-desktop" style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            \r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            \r\n                            </div>\r\n                        </td> \r\n\r\n                        <td class="is-hidden-mobile is-hidden-tablet-only">\r\n                            <div *ngIf="(item.tipo == r\'ME\' && item.informacion)" style="line-height:1em;">\r\n                            <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                            <small><i>{{ item.informacion.contenido }} </i></small>\r\n                            </div>\r\n                            <div  *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            \r\n                            </div>\r\n                        </td-->\r\n\r\n\r\n                        <td style="width:100px !important;text-align:center;" *ngIf="esPedidoJurisdiccional">\r\n                            <a (click)="toggleModalListaClues(item); ">{{ item.cantidad }}</a>\r\n                        </td>\r\n\r\n\r\n                        <td style="width:100px !important;" *ngIf="!esPedidoJurisdiccional">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-small has-text-centered" [ngClass]="{\'is-danger\':erroresEnInsumos.lista[item.clave]}"  type="number" placeholder="Cant" (keyup)="modificarItem(item)" min="{{(item.cantidad_recibida)?item.cantidad_recibida:0}}" (change)="modificarItem(item)" [(ngModel)]="item.cantidad">\r\n                                <small *ngIf="item.cantidad_recibida">Recibido: <strong>{{item.cantidad_recibida}}</strong></small>\r\n                            </p>\r\n                        </td>\r\n                        \r\n                        <td style="width:78px !important;">\r\n                            <b>\r\n                                <abbr>${{item.monto | number:\'1.2-2\'}}</abbr>\r\n                            </b>\r\n                        </td>\r\n\r\n                        <td style="width:100px !important; text-align:center" *ngIf="esPedidoJurisdiccional">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.lista_clues.length }}</a>\r\n                        </td>\r\n                        <td style="width:70px !important;" *ngIf="esPedidoJurisdiccional">\r\n                            <a (click)="toggleModalListaClues(item); "><span class="icon"><i class="fa fa-list"></i></span></a>\r\n                            <a *ngIf="!item.cantidad_recibida" (click)="eliminarInsumo(item,i,false)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                       \r\n                        <td style="width:21px !important;"  *ngIf="!esPedidoJurisdiccional">\r\n                            <a *ngIf="!item.cantidad_recibida" (click)="eliminarInsumo(item,i)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                    </tr>      \r\n                </tbody>\r\n                <tbody *ngIf="pedido.filtro.activo">\r\n                    <tr  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;">\r\n                        <td class="has-text-centered">{{ item.lote }}</td>\r\n                        <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                        \r\n                        <td>\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n                            <div style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            </div>\r\n                        </td>\r\n\r\n                        <!--td >\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <b>{{ item.generico_nombre }}</b> <br  class="is-hidden-mobile"><small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                            \r\n                            <div class="is-hidden-desktop" *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                            <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                            <small><i>{{ item.informacion.contenido }} </i></small>\r\n                            </div>\r\n                            <div class="is-hidden-desktop" *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div class="is-hidden-desktop" style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            \r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            \r\n                            </div>\r\n                        </td> \r\n\r\n                        <td class="is-hidden-mobile is-hidden-tablet-only">\r\n                            <div *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                            <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                            <small><i>{{ item.informacion.contenido }} </i></small>\r\n                            </div>\r\n                            <div  *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            \r\n                            </div>\r\n                        </td--> \r\n\r\n                        <td style="width:100px !important;">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-small has-text-centered" [ngClass]="{\'is-danger\':erroresEnInsumos.lista[item.clave]}"  type="number" placeholder="Cant" (keyup)="modificarItem(item)" min="{{(item.cantidad_recibida)?item.cantidad_recibida:0}}" (change)="modificarItem(item)" [(ngModel)]="item.cantidad">\r\n                                <small *ngIf="item.cantidad_recibida">Recibido: <strong>{{item.cantidad_recibida}}</strong></small>\r\n                            </p>\r\n                        </td>\r\n\r\n                        <td style="width:78px !important;">\r\n                            <b>\r\n                                <abbr>${{item.monto | number:\'1.2-2\'}}</abbr>\r\n                            </b>\r\n                        </td> \r\n\r\n                        <td style="width:100px !important; text-align:center" *ngIf="esPedidoJurisdiccional">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.lista_clues.length }}</a>\r\n                        </td>\r\n\r\n                        <td style="width:70px !important;" *ngIf="esPedidoJurisdiccional">\r\n                            <a (click)="toggleModalListaClues(item); "><span class="icon"><i class="fa fa-list"></i></span></a>\r\n                            <a (click)="eliminarInsumo(item,i,true)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                        <td style="width:21px !important;" *ngIf="!esPedidoJurisdiccional">\r\n                            <a *ngIf="!item.cantidad_recibida" (click)="eliminarInsumo(item,i)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>              \r\n            </table>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.lista.length" \r\n                    [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.paginacion.indice"\r\n                    (onSiguiente)="pedido.paginaSiguiente()" \r\n                    (onAnterior)="pedido.paginaAnterior()" \r\n                    (onListar)="pedido.listar($event)" \r\n                    *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.filtro.lista.length" \r\n                    [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                    (onSiguiente)="pedido.filtro.paginaSiguiente()" \r\n                    (onAnterior)="pedido.filtro.paginaAnterior()" \r\n                    (onListar)="pedido.filtro.listar($event)" \r\n                    *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n            \r\n            <br>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<buscar-insumos \r\n    *ngIf="mostrarModalInsumos" \r\n    (onCerrar)="mostrarModalInsumos = false" \r\n    (onEnviar)="agregarItem($event)" \r\n    [listaAgregados]="listaClaveAgregadas" \r\n    [listaAgregadosConClues]="listaClaveAgregadas" \r\n    [conPrecios]="true"\r\n    [conClues]="esPedidoJurisdiccional"></buscar-insumos>\r\n    <pedidos-lista-clues *ngIf="esPedidoJurisdiccional && mostrarModalListaClues" [insumo]="loteSeleccionado" [listaClaveAgregadas]="listaClaveAgregadas" (onCerrar)="mostrarModalListaClues = false"></pedidos-lista-clues>'},J1mw:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.verRecepcionPedido=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return t.json().data})},t.prototype.guardarRecepcionPedido=function(t,e){return this.jwtRequest.put(l.URL,t,e).map(function(t){return t.json().data})},t}();c.URL="recepcion-pedido",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},J3AS:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},JaIW:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("/zHi"),o=(a.n(s),a("S7im")),c=(a.n(o),a("azLz")),l=(a.n(c),a("MBEm")),d=(a.n(l),a("5v8a")),u=(a.n(d),a("Pic8")),p=(a.n(u),a("xpf9")),m=(a.n(p),a("2cH3")),f=a("maPk"),g=a("uxEG"),h=a("gHRf");a.d(e,"a",function(){return y});var v=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},b=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},y=function(){function t(t,e,a,n,i){this.title=t,this.route=e,this.inicializacionInventarioService=a,this.router=n,this.cambiarEntornoService=i,this.cargando=!1,this.guardando=!1,this.cargandoStock=!1,this.capturarStock=!1,this.almacen_seleccionado={},this.mostrarDialogo=!1,this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}},this.statusCaptura="NV",this.mensajeError=new h.a,this.mensajeAdvertencia=new h.a,this.mensajeExito=new h.a,this.formStock={},this.lotesSurtidos=[],this.listaStock=[],this.claveInsumoSeleccionado=null,this.claveNoSolicitada=!1,this.itemSeleccionado=null,this.formulario={datos:{},validacion:{}}}return t.prototype.ngOnInit=function(){var t=this;this.cargando=!0,this.title.setTitle("Surtir pedido / Almacén"),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(t){}),this.route.params.subscribe(function(e){t.id=e.id});var e=JSON.parse(localStorage.getItem("usuario"));this.almacen_seleccionado=e.almacen_activo,this.formulario.validacion.valido=!1,this.formulario.validacion.errores={},this.inicializacionInventarioService.insumos().subscribe(function(e){t.cargando=!1,t.inventario=new g.a(!0),t.inventario.paginacion.resultadosPorPagina=10,t.inventario.filtro.paginacion.resultadosPorPagina=10;for(var a in e){var n=e[a],i=n;i.cantidad=0,i.monto=0,i.precio=+n.precio,i.totalStockAsignado=0,t.inventario.lista.push(i)}t.inventario.indexar(),t.inventario.listar(1),t.cargando=!1},function(e){t.cargando=!1,t.mensajeError=new h.a(!0),t.mensajeError.mostrar;try{var a=e.json();401==e.status?t.mensajeError.texto="No tiene permiso para hacer esta operación.":t.mensajeError.texto=a.error}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.seleccionarItem=function(t){this.itemSeleccionado=t,this.capturarStock=!0,this.formStock={},this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}}},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.inventario.filtro.activo=!1,void(this.inventario.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.inventario.filtro.activo=!1,void(this.inventario.filtro.lista=[]);this.inventario.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.inventario.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.inventario.filtro.lista=l}else this.inventario.filtro.lista=r[0];this.inventario.filtro.indexar(!1),this.inventario.filtro.paginacion.paginaActual=1,this.inventario.filtro.listar(1)}},t.prototype.finalizar=function(){this.mostrarDialogo=!0},t.prototype.cerrarDialogo=function(){this.mostrarDialogo=!1},t.prototype.guardar=function(t){void 0===t&&(t=!1),this.guardando=!0;var e;if(t){if(this.formularioRecepcion.get("entrega").markAsTouched(),this.formularioRecepcion.get("recibe").markAsTouched(),this.formularioRecepcion.get("fecha_movimiento").markAsTouched(),!this.formularioRecepcion.valid)return!1;var a=prompt("Atención la recepción ya no podra editarse, para confirmar que desea concluir la recepción por favor escriba: CONCLUIR RECEPCION");if("CONCLUIR RECEPCION"!=a)return null!=a&&alert("Error al ingresar el texto para confirmar la acción."),this.guardando=!1,!1;e=this.formularioRecepcion.value,e.status="FI",e.stock=[]}else e={status:"BR",observaciones:"",stock:[]};for(var n in this.inventario.lista){var i=this.inventario.lista[n];if(i.totalStockAsignado>0)for(var r in i.listaStockAsignado){var s={clave_insumo_medico:i.clave,lote:i.listaStockAsignado[r].lote,fecha_caducidad:i.listaStockAsignado[r].fecha_caducidad,cantidad:i.listaStockAsignado[r].cantidad,existencia:i.listaStockAsignado[r].cantidad,codigo_barras:i.listaStockAsignado[r].codigo_barras,precio_unitario:0,precio_total:0};e.stock.push(s)}}return console.log(e),this.guardando=!1,!1},t.prototype.limpiarStock=function(){this.capturarStock=!1,this.listaStock=[],this.itemSeleccionado=null},t.prototype.eliminarStock=function(t){var e=this.itemSeleccionado.listaStockAsignado.indexOf(t);this.itemSeleccionado.listaStockAsignado.splice(e,1),this.calcularTotalStockItem(),this.verificarItemsAsignadosStockApi()},t.prototype.asignarStock=function(){this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}};var t=0,e=!1;if(this.formStock.cantidad?this.formStock.cantidad<=0&&(this.erroresFormularioStock.cantidad={error:!0,texto:"La cantidad recibida debe ser mayor a 0."},t++):(this.erroresFormularioStock.cantidad={error:!0,texto:"Este campo es requerido."},t++),this.itemSeleccionado.tiene_fecha_caducidad&&!this.formStock.fecha_caducidad)this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"Este campo es requerido."},t++;else if(this.formStock.fecha_caducidad){var a=this.formStock.fecha_caducidad.split("-"),n=!1;if(3!=a.length?n=!0:4!=a[0].length||2!=a[1].length||2!=a[2].length?n=!0:parseInt(a[1])<1||parseInt(a[1])>12?n=!0:(parseInt(a[2])<1||parseInt(a[2])>31)&&(n=!0),n)this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"El formato de fecha no es correcto."},t++;else{var i=new Date,r=new Date(a[0],parseInt(a[1])-1,parseInt(a[2])),s=void 0;s=12*(r.getFullYear()-i.getFullYear()),s-=i.getMonth(),s+=r.getMonth(),s<0&&(e=!0),console.log(s)}}if(this.formStock.lote||(this.erroresFormularioStock.lote={error:!0,texto:"Este campo es requerido."},t++),t)return!1;console.log(this.itemSeleccionado),null==this.itemSeleccionado.listaStockAsignado&&(this.itemSeleccionado.listaStockAsignado=[]);var o=0;for(var c in this.itemSeleccionado.listaStockAsignado)o+=this.itemSeleccionado.listaStockAsignado[c].cantidad;o+=this.formStock.cantidad,this.itemSeleccionado.totalStockAsignado=o,this.itemSeleccionado.listaStockAsignado.push({codigo_barras:this.formStock.codigo_barras,lote:this.formStock.lote,fecha_caducidad:this.formStock.fecha_caducidad,cantidad:this.formStock.cantidad,esta_caducado:e}),this.resetearFormStock(),this.calcularTotalStockItem()},t.prototype.cancelarCapturaStock=function(){this.resetearFormStock(!0)},t.prototype.resetearFormStock=function(t){void 0===t&&(t=!1),t?this.formStock={}:(this.formStock.lote=void 0,this.formStock.fecha_caducidad=void 0,this.formStock.cantidad=void 0)},t.prototype.verificarItemsAsignadosStockApi=function(){for(var t in this.listaStock){this.listaStock[t].asignado=!1;for(var e in this.itemSeleccionado.listaStockAsignado)if(this.itemSeleccionado.listaStockAsignado[e].id==this.listaStock[t].id){this.listaStock[t].asignado=!0;break}}},t.prototype.verificarTotalStockItem=function(){var t=0;for(var e in this.itemSeleccionado.listaStockAsignado)t+=this.itemSeleccionado.listaStockAsignado[e].cantidad;return this.itemSeleccionado.totalStockAsignado<=this.itemSeleccionado.cantidad},t.prototype.calcularTotalStockItem=function(){var t=0;for(var e in this.itemSeleccionado.listaStockAsignado)t+=this.itemSeleccionado.listaStockAsignado[e].cantidad;if(0==t){var a=0;for(var e in this.lotesSurtidos)this.lotesSurtidos[e].clave==this.itemSeleccionado.clave&&this.lotesSurtidos.splice(a,1),a++}else{var n=!1;for(var e in this.lotesSurtidos)this.lotesSurtidos[e].clave==this.itemSeleccionado.clave&&(n=!0,this.lotesSurtidos[e].cantidad=t);n||this.lotesSurtidos.push({clave:this.itemSeleccionado.clave,cantidad:t})}this.itemSeleccionado.totalStockAsignado=t,this.itemSeleccionado.cantidad=t,this.itemSeleccionado.monto=t*this.itemSeleccionado.precio,this.inventario.actualizarTotales()},t.prototype.keyboardInput=function(t){32==t.keyCode&&t.ctrlKey&&(event.preventDefault(),event.stopPropagation())},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();y=v([a.i(n.Component)({selector:"app-formulario",template:a("CcP3"),styles:[a("VkID")]}),b("design:paramtypes",["function"==typeof(_=void 0!==i.b&&i.b)&&_||Object,"function"==typeof(x=void 0!==r.c&&r.c)&&x||Object,"function"==typeof(j=void 0!==f.a&&f.a)&&j||Object,"function"==typeof(P=void 0!==r.a&&r.a)&&P||Object,"function"==typeof(I=void 0!==m.a&&m.a)&&I||Object])],y);var _,x,j,P,I},"JaZ/":function(t,e,a){"use strict";var n=a("/oeL"),i=a("QTrI");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=c=function(){function t(t){this.jwtRequest=t}return t.prototype.buscar=function(t){return void 0===t&&(t={q:"",page:1,per_page:20}),this.jwtRequest.get(c.URL,null,t).map(function(t){return t.json().data})},t.prototype.listaPaginada=function(t){return void 0===t&&(t={page:1,per_page:20}),this.jwtRequest.get(c.URL,null,t).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(c.URL,t,{}).map(function(t){return t.json().data})},t.prototype.asignar=function(t){return this.jwtRequest.put(c.URL+"/proveedor",t,null).map(function(t){return t.json().data})},t.prototype.proveedores=function(){return this.jwtRequest.get("proveedor",null,null).map(function(t){return t.json().data})},t}();o.URL="administrador-central/pedidos-alternos",o=c=r([a.i(n.Injectable)(),s("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object])],o);var c,l},JiRb:function(t,e,a){"use strict";var n=a("/oeL"),i=a("0LBx"),r=a("2cH3");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.entregasService=t,this.cambiarEntornoService=e,this.cargando=!1,this.stats={por_surtir:0,finalizados:0}}return t.prototype.ngOnInit=function(){var t=this;this.cargarStats(),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.cargarStats()})},t.prototype.cargarStats=function(){var t=this;this.cargando=!0,this.entregasService.stats().subscribe(function(e){t.cargando=!1,t.stats=e},function(e){t.cargando=!1,console.log(e)})},t}();c=s([a.i(n.Component)({selector:"menu-lateral",template:a("bkpT"),styles:[a("ewPc")],providers:[i.a]}),o("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],c);var l,d},JtLs:function(t,e){t.exports='<menu-farmacia></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},K0p3:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("qbdv"),o=a("bm2B"),c=a("/zHi"),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("gHRf")),h=a("GtVU");a.d(e,"a",function(){return y});var v=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},b=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},y=function(){function t(t,e,a,n,i,r){this.title=t,this.pacienteService=e,this.router=a,this.route=n,this.fb=i,this.location=r,this.cargando=!1,this.busquedaActivada=!1,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.pacientes=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Historial Paciente / Admisión"),this.mensajeError=new g.a,this.mensajeExito=new g.a;this.route.params.subscribe(function(e){t.id=e.id}),this.listar(1)},t.prototype.listar=function(t){var e=this;this.paginaActual=t,this.cargando=!0,this.pacienteService.historial(this.id,null).subscribe(function(t){e.cargando=!1,e.pacientes=t.ingreso,console.log(t.id),e.id_paciente=t.id,e.nombre_paciente=t.nombre,e.localidad_paciente=t.localidad.nombre+" ( "+t.localidad.municipio.nombre+" )"},function(t){e.cargando=!1,e.mensajeError.mostrar=!0;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.regresar=function(){this.location.back()},t}();y=v([a.i(n.Component)({selector:"app-historial",template:a("cCm/"),styles:[a("mzaL")]}),b("design:paramtypes",["function"==typeof(_=void 0!==i.b&&i.b)&&_||Object,"function"==typeof(x=void 0!==h.a&&h.a)&&x||Object,"function"==typeof(j=void 0!==r.a&&r.a)&&j||Object,"function"==typeof(P=void 0!==r.c&&r.c)&&P||Object,"function"==typeof(I=void 0!==o.FormBuilder&&o.FormBuilder)&&I||Object,"function"==typeof(E=void 0!==s.Location&&s.Location)&&E||Object])],y);var _,x,j,P,I,E},K181:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("BFvY"),s=a("QrLZ"),o=a("zxtY");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,a,n){var i=this;this.route=t,this.router=e,this.authService=a,this.bloquearPantallaService=n,this.credenciales={},this.loading=!1,this.mensaje="",this.mostrarMensaje=!1,this.bloquearPantallaSuscription=n.pantallaBloqueada$.subscribe(function(t){t||(console.log("Redirigiendo desde login por desbloqueo de pantalla"),i.returnUrl=i.route.snapshot.queryParams.returnUrl||"/",i.router.navigate([i.returnUrl]))})}return t.prototype.ngOnInit=function(){this.saludIdDisponible=o.a,this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"},t.prototype.login=function(){var t=this;this.loading=!0,this.mostrarMensaje=!1,this.authService.login(this.credenciales.id,this.credenciales.password).subscribe(function(e){var a=JSON.parse(localStorage.getItem("usuario"));t.loading=!1,a.modulo_inicio?t.router.navigate([a.modulo_inicio]):t.router.navigate([t.returnUrl]),localStorage.removeItem("bloquear_pantalla")},function(e){t.loading=!1,t.mostrarMensaje=!0,t.mensaje="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.";try{e.json();401==e.status&&(t.mensaje="Lo sentimos el usuario y/o contraseña no son válidos."),0==e.status&&(t.mensaje="Conexión rechazada."),500==e.status&&(t.mensaje="500 (Error interno del servidor)")}catch(a){500==e.status&&(t.mensaje="500 (Error interno del servidor)")}})},t}();d=c([a.i(n.Component)({selector:"app-login",template:a("1IEk"),styles:[a("FFCA")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.c&&i.c)&&u||Object,"function"==typeof(p=void 0!==i.a&&i.a)&&p||Object,"function"==typeof(m=void 0!==r.a&&r.a)&&m||Object,"function"==typeof(f=void 0!==s.a&&s.a)&&f||Object])],d);var u,p,m,f},K4XS:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},K4kt:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.buscar=function(t,e,a,n){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(n,null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e,a){return void 0===t&&(t=1),void 0===e&&(e=20),t>0?this.jwtRequest.get(a,null,{page:t,per_page:e}).map(function(t){return t.json().data}):this.jwtRequest.get(a,null).map(function(t){return t.json().data})},t.prototype.ver=function(t,e){return this.jwtRequest.get(e,t,{}).map(function(t){return t.json().data})},t.prototype.crear=function(t,e){return this.jwtRequest.post(e,t).map(function(t){return t.json().data})},t.prototype.editar=function(t,e,a){return this.jwtRequest.put(a,t,e).map(function(t){return t.json().data})},t.prototype.eliminar=function(t,e){return this.jwtRequest.delete(e,t).map(function(t){return t.json().data})},t}();c=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(l=void 0!==i.Http&&i.Http)&&l||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],c);var l,d},KAs4:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("BruR"),d=a("Gf2i");a.d(e,"a",function(){return p});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=function(){function t(){}return t}();p=u([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.a,o.a,c.a],declarations:[l.a,d.a],exports:[l.a,d.a]})],p)},KDRp:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333}.contenedor-pedido.con-tabs .top-bar{padding:.5em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-pedido{background:#fff;border-radius:1em;overflow:hidden}.contenedor-pedido.con-tabs{border-top-left-radius:0!important;border-top-right-radius:0!important}",""]),t.exports=t.exports.toString()},KQGD:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),t.exports=t.exports.toString()},KULP:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},KWMu:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},KkWC:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("6R1e"),d=a("LLho"),u=a("Px6Q"),p=a("F4bb"),m=a("BFvY"),f=a("KAs4"),g=a("K4kt"),h=a("CWbX"),v=a("oSQj");a.n(v);a.d(e,"a",function(){return y});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=function(){function t(){}return t}();y=b([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,f.a,h.a,v.NguiAutoCompleteModule],declarations:[p.a],providers:[m.a,g.a]})],y)},"L/X9":function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-server"></i></span> Servidores\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted " routerLink="/panel-control/sync/servidores/nuevo">\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t<th>Nombre</th>\r\n\t\t\t\t\t\t<th>¿Internet?</th>\r\n\t\t\t\t\t\t<th>¿Cat. act.?</th>\r\n\t\t\t\t\t\t<th>Ver.</th>\r\n\t\t\t\t\t\t<th>Periodo Sync</th>\r\n\t\t\t\t\t\t<th>Última Sync</th>\r\n                    <th style="text-align:center; width:60px"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of lista; let i=index">                        \r\n\t\t\t\t\t\t<td style="vertical-align: middle;"><a routerLink="/panel-control/sync/servidores/editar/{{item.id}}">{{ item.id }}</a></td>   \r\n\t\t\t\t\t\t<td style="vertical-align: middle;"><a routerLink="/panel-control/sync/servidores/editar/{{item.id}}"><span class="icon" *ngIf="item.principal"><i class="fa fa-home"></i></span> {{ item.nombre }}</a></td>    \r\n\t\t\t\t\t\t<td style="vertical-align: middle;">{{ item.tiene_internet ? \'Sí\': \'No\' }}</td>\r\n\t\t\t\t\t\t<td style="vertical-align: middle;">{{ item.catalogos_actualizados ? \'Sí\': \'No\' }}</td>                       \r\n\t\t\t\t\t\t<td style="vertical-align: middle;">{{ item.version}}</td>\r\n\t\t\t\t\t\t<td style="vertical-align: middle;">{{ item.periodo_sincronizacion }} Hrs</td>\r\n\t\t\t\t\t\t<td style="vertical-align: middle;">{{ item.ultima_sincronizacion }}</td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>                        \r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n\t\t\t\t\t\t\t<td style="vertical-align: middle;"><a routerLink="/panel-control/sync/servidores/editar/{{item.id}}">{{ item.id }}</a></td>   \r\n\t\t\t\t\t\t\t<td style="vertical-align: middle;"><a routerLink="/panel-control/sync/servidores/editar/{{item.id}}">{{ item.nombre }}</a></td>    \r\n\t\t\t\t\t\t\t<td style="vertical-align: middle;">{{ item.tiene_internet ? \'Sí\': \'No\' }}</td>\r\n\t\t\t\t\t\t\t<td style="vertical-align: middle;">{{ item.catalogos_actualizados ? \'Sí\': \'No\' }}</td>                       \r\n\t\t\t\t\t\t\t<td style="vertical-align: middle;">{{ item.version}}</td>\r\n\t\t\t\t\t\t\t<td style="vertical-align: middle;">{{ item.periodo_sincronizacion }} Hrs</td>\r\n\t\t\t\t\t\t\t<td style="vertical-align: middle;">{{ item.ultima_sincronizacion }}</td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},L3hd:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),t.exports=t.exports.toString()},L4oa:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bKpL"),s=(a.n(r),a("rlar")),o=(a.n(s),a("/zHi")),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("ajxl")),g=a("gHRf");a.d(e,"a",function(){return b});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e){this.title=t,this.usuariosService=e,this.cargando=!1,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.usuarios=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Usuarios / Panel de control"),this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.usuariosService.buscar(e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.usuariosService.buscar(t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando usuarios."),this.cargando=!0,this.usuariosService.lista(t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.usuarios=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Usuarios cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.eliminar=function(t,e){var a=this;t.cargando=!0,this.usuariosService.eliminar(t.id).subscribe(function(n){t.cargando=!1,a.usuarios.splice(e,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new g.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="Usuario eliminado"},function(n){t.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();b=h([a.i(n.Component)({selector:"usuarios-lista",template:a("wVTU"),styles:[a("gFeO")]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==f.a&&f.a)&&_||Object])],b);var y,_},LAYm:function(t,e,a){"use strict";var n=a("/oeL"),i=a("1Lkp"),r=a("2cH3");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.pedidosService=t,this.cambiarEntornoService=e,this.cargando=!1,this.stats={todos:0,borradores:0,en_transito:0,por_surtir:0,finalizados:0,expirados:0,expirados_cancelados:0,farmacia:0}}return t.prototype.ngOnInit=function(){var t=this;this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.stats={todos:0,borradores:0,en_transito:0,por_surtir:0,finalizados:0,expirados:0,expirados_cancelados:0,farmacia:0},t.cargarStatsPedidos()}),this.cargarStatsPedidos()},t.prototype.cargarStatsPedidos=function(){var t=this;this.cargando=!0,this.pedidosService.stats().subscribe(function(e){t.cargando=!1,t.stats=e},function(e){t.cargando=!1,console.log(e)})},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();c=s([a.i(n.Component)({selector:"menu-lateral",template:a("Dzdw"),styles:[a("fgsB")]}),o("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],c);var l,d},LEpI:function(t,e){t.exports='<listar #ctrl URL="mis-almacenes" titulo="Almacenes / Configuración"></listar>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n\r\n                        <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> almacenes\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                            <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/configuracion/almacenes/nuevo">\r\n                                    <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!ctrl.cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th><abbr title="Usuario ID">ID</abbr></th>                        \r\n                        <th>Nombre</th>\r\n                        <th>Servidor</th>\r\n                        <th>Nivel</th>\r\n                        <th>Tipo</th>\r\n                        <th>Clues</th>\r\n                        <th>Subrogado</th>\r\n                        <th>Unidosis</th>\r\n                        <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.id }}</a></th>                        \r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.servidor_id }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.nivel_almacen == 1 ? \'HACE PEDIDOS AL PROVEEDOR\' : \'HACE PEDIDOS A OTRO ALMACEN DENTRO DE LA CLUES\'}} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.tipo_almacen }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.clues }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.subrogado == 0 ? \'No\' : \'Si\'}} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.unidosis  == 0 ? \'No\' : \'Si\'}} </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.servidor_id }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.nivel_almacen == 1 ? \'HACE PEDIDOS AL PROVEEDOR\' : \'HACE PEDIDOS A OTRO ALMACEN DENTRO DE LA CLUES\'}} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.tipo_almacen }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.clues }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.subrogado == 0 ? \'No\' : \'Si\'}} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/configuracion/almacenes/editar/{{item.id}}">{{ item.unidosis  == 0 ? \'No\' : \'Si\'}} </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},LGGk:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("0eWM"),s=a("+MOH"),o=a("QCH9"),c=a("ndCn"),l=a("XHvF"),d=a("58ut"),u=a("D9tw"),p=a("2qAn");a.d(e,"a",function(){return g});var m=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},f=[{path:"panel-control",redirectTo:"/panel-control/sync/estatus",pathMatch:"full"},{path:"panel-control/sync",children:[{path:"",redirectTo:"/panel-control/sync/estatus",pathMatch:"full"},{path:"estatus",component:r.a},{path:"local",component:s.a,canActivate:[p.a],data:{key:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f"}},{path:"central",component:o.a,canActivate:[p.a],data:{key:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f"}},{path:"servidores",component:c.a,canActivate:[p.a],data:{key:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f"}},{path:"servidores/nuevo",component:l.a,canActivate:[p.a],data:{key:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f"}},{path:"servidores/editar/:id",component:d.a,canActivate:[p.a],data:{key:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f"}}],canActivate:[u.a]}],g=function(){function t(){}return t}();g=m([a.i(n.NgModule)({imports:[i.b.forChild(f)],exports:[i.b]})],g)},LHk8:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},LLho:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("yVD9");a.d(e,"a",function(){return o});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=function(){function t(){}return t}();o=s([a.i(n.NgModule)({imports:[i.CommonModule],exports:[r.a],declarations:[r.a]})],o)},LeXS:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},LmqL:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.mostrarMenuAside=!1,this.usuario={}}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t.prototype.toggleMenuAside=function(){this.mostrarMenuAside=!this.mostrarMenuAside},t}();s=i([a.i(n.Component)({selector:"articulos-catalogo-menu",template:a("p3pM"),styles:[a("oJ9C")]}),r("design:paramtypes",[])],s)},Lw4Z:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".bulma-select-multiple{width:100%;font-size:1em;border-color:#ddd;border-radius:.15em;box-shadow:inset 0 1px 2px hsla(0,0%,4%,.1)}.bulma-select-multiple:focus{border-color:#00d1b2;outline:none}.bulma-select-multiple.is-warning{width:100%;font-size:1em;border-color:#ffdd57;border-radius:.15em;box-shadow:inset 0 1px 2px hsla(0,0%,4%,.1)}.table tr.is-selected{background:#00d1b2!important;color:#fff!important}.table tr .icon{color:#00d1b2}.table tr.is-selected a .icon{color:#fff!important}",""]),t.exports=t.exports.toString()},LyDy:function(t,e){t.exports=""},M4Um:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("L4oa"),s=a("TvXF"),o=a("AHor"),c=a("D9tw"),l=a("2qAn");a.d(e,"a",function(){return p});var d=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},u=[{path:"panel-control/usuarios",children:[{path:"",component:r.a,canActivate:[l.a],data:{key:"mGKikN0aJaeF2XrHwwYK3XNw0f9CSZDe"}},{path:"nuevo",component:s.a,canActivate:[l.a],data:{key:"xJqy3csU5WyOX7pmXL7VBs680uTVGxU3"}},{path:"editar/:id",component:o.a,canActivate:[l.a],data:{key:"dlV1H4gX0nqEgHauHC8BRIlwl6SGUoUt"}}],canActivate:[c.a]}],p=function(){function t(){}return t}();p=d([a.i(n.NgModule)({imports:[i.b.forChild(u)],exports:[i.b],providers:[]})],p)},MD48:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("9ynB"),s=a("1vRS"),o=a("eSu/"),c=a("K0p3"),l=a("D9tw"),d=a("2qAn");a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=[{path:"paciente",children:[{path:"",component:r.a,canActivate:[d.a],data:{key:"XE1pZJV6ZprLc0vP45Pkkpm2UlOJEBqV"}},{path:"nuevo",component:s.a,canActivate:[d.a],data:{key:"XE1pZJV6ZprLc0vP45Pkkpm2UlOJEBqV"}},{path:"editar/:id",component:o.a,canActivate:[d.a],data:{key:"XE1pZJV6ZprLc0vP45Pkkpm2UlOJEBqV"}},{path:"historial/:id",component:c.a,canActivate:[d.a],data:{key:"XE1pZJV6ZprLc0vP45Pkkpm2UlOJEBqV"}}],canActivate:[l.a]}],m=function(){function t(){}return t}();m=u([a.i(n.NgModule)({imports:[i.b.forChild(p)],exports:[i.b]})],m)},MRcw:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("bm2B"),o=a("fc+i"),c=a("BFvY"),l=a("K4kt"),d=a("gHRf"),u=a("hN3r");a.d(e,"a",function(){return f});var p=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},m=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,a,n,i,r,s,o){this.router=t,this.title=e,this.authService=a,this.route=n,this.location=i,this.crudService=r,this.fb=s,this.notificacion=o,this.borrarCargando=!1,this.datosCargados=!0,this.cargando=!1,this.cambiarPassword=!1,this.derecha=[],this.izquierda=[],this.mensajeResponse=new d.a,this.borrarItem="",this.cargarDatosCatalogo=!1,this.catalogo=[],this.roles=[],this.catalogoDependiente=function(t,e,a){var n=this;this.cargarDatosCatalogo=!0,this.crudService.lista(0,0,t+"?id="+a).subscribe(function(t){n[e]=t,0==t.length&&(n.mensajeResponse.titulo=e,n.mensajeResponse.texto="Esta vacio, póngase en contacto con un administrador.",n.mensajeResponse.mostrar=!0,n.mensajeResponse.clase="warning",n.mensaje(3)),n.cargarDatosCatalogo=!1},function(t){n.mensajeResponse=new d.a(!0),n.mensajeResponse.texto="No especificado.",n.mensajeResponse.mostrar=!0;try{t.json();401==t.status&&(n.mensajeResponse.texto="No tiene permiso para ver los roles."),500==t.status&&(n.mensajeResponse.texto="500 (Error interno del servidor). No se pudieron cargar los roles")}catch(e){500==t.status?n.mensajeResponse.texto="500 (Error interno del servidor). No se pudieron cargar los roles":n.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los roles"}n.cargarDatosCatalogo=!1})},this.modelo=[],this.todosSeleccionados=[],this.error_archivo=!1,this.error_json=!1,this.options={position:["bottom","left"],timeOut:2e3,lastOnBottom:!0}}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle(this.titulo),this.route.params.subscribe(function(e){t.id=e.id,t.id&&t.cargarDatos()}),this.moduloTitulo=this.id?"Modificar":"Nuevo"},t.prototype.enviar=function(t){void 0===t&&(t=!0),this.id?this.actualizarDatos():this.guardarDatos(t)},t.prototype.guardarDatos=function(t){var e=this;this.cargando=!0;var a=this.dato.getRawValue();this.crudService.crear(a,this.URL).subscribe(function(a){e.cargando=!1,t&&e.location.back(),e.mensajeResponse.texto="Se han guardado los cambios.",e.mensajeResponse.mostrar=!0,e.mensajeResponse.clase="success",e.mensaje(2)},function(t){e.cargando=!1,e.mensajeResponse.texto="No especificado.",e.mensajeResponse.mostrar=!0,e.mensajeResponse.clase="error",e.mensaje(3);try{var a=t.json();if(401==t.status&&(e.mensajeResponse.texto="No tiene permiso para hacer esta operación."),409==t.status){e.mensajeResponse.texto="Por favor verfique los campos marcados en rojo.",e.mensajeResponse.clase="warning",e.mensaje(8);for(var n in a.error)for(var i in a.error[n])e.mensajeResponse.titulo=n,e.mensajeResponse.texto=a.error[n][i],e.mensajeResponse.clase="error",e.mensaje(3)}}catch(a){500==t.status?e.mensajeResponse.texto="500 (Error interno del servidor)":e.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.actualizarDatos=function(){var t=this;this.cargando=!0;var e;try{e=this.dato.getRawValue()}catch(t){e=this.dato.value}this.cambiarPassword||delete e.cambiarPassword,this.crudService.editar(this.id,this.dato.value,this.URL).subscribe(function(e){t.cargando=!1,t.mensajeResponse.texto="Se han guardado los cambios.",t.mensajeResponse.mostrar=!0,t.mensajeResponse.clase="success",t.mensaje(2)},function(e){t.cargando=!1,t.mensajeResponse.texto="No especificado.",t.mensajeResponse.mostrar=!0,t.mensajeResponse.clase="alert",t.mensaje(2);try{var a=e.json();if(401==e.status&&(t.mensajeResponse.texto="No tiene permiso para hacer esta operación.",t.mensajeResponse.clase="error",t.mensaje(2)),409==e.status){t.mensajeResponse.texto="Por favor verfique los campos marcados en rojo.",t.mensajeResponse.clase="error",t.mensaje(8);for(var n in a.error)for(var i in a.error[n])t.mensajeResponse.titulo=n,t.mensajeResponse.texto=a.error[n][i],t.mensajeResponse.clase="error",t.mensaje(3)}}catch(a){500==e.status?t.mensajeResponse.texto="500 (Error interno del servidor)":t.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",t.mensajeResponse.clase="error",t.mensaje(2)}})},t.prototype.cargarDatosRecursivo=function(t,e){var a=this;try{if(Array.isArray(t))try{var n=0,i=[];t.forEach(function(t){if("object"==typeof t){var r={};for(var o in t)(t[o]||"created_at"!=o&&"updated_at"!=o&&"deleted_at"!=o)&&(r[o]=t[o]);var c=[],l=!1;for(var o in r)Array.isArray(r[o])&&(c[o]||(c[o]=[]),c[o].push(r[o]),r[o]=a.fb.array([]),l=!0);if(e.push(a.fb.group(r)),!l)return;var d=e.controls[n];for(var u in c)for(var p in c[u]){d.controls[p]=new s.FormArray([]);var m=d.controls[u];a.cargarDatosRecursivo(c[u][p],m)}}else i.push(t);n++}),i.length>0&&e.patchValue(i)}catch(t){return void console.log(2,t)}else try{for(var r in t)if(e.controls[r])if(Array.isArray(t[r])){var o=[],c=e.controls[r],l=0;try{for(var d in t[r]){var u=t[r][d];if("object"==typeof u){var p={};for(var m in u)(u[m]||"created_at"!=m&&"updated_at"!=m&&"deleted_at"!=m)&&(p[m]=u[m]);var f=[],g=!1;for(var m in p)Array.isArray(p[m])&&(f[m]||(f[m]=[]),f[m].push(p[m]),p[m]=this.fb.array([]),g=!0);c.push(this.fb.group(p));try{if(g){var h=c.controls[l];for(var v in f)for(var b in f[v]){h.controls[b]=new s.FormArray([]);var y=h.controls[v];this.cargarDatosRecursivo(f[v][b],y)}}}catch(t){return console.log(5,t),e}}else o.push(u);l++}o.length>0&&c.patchValue(o)}catch(t){return void console.log(4,t)}}else if(t[r]){var _=0;if("object"==typeof t[r]){for(var d in t[r])Array.isArray(t[r][d])&&_++;0==_&&e.controls[r].patchValue(t[r])}if(_>0||Array.isArray(t[r]))for(var d in t[r]){var b=e.controls[r];if(Array.isArray(t[r][d])){var h=b.controls[d];this.cargarDatosRecursivo(t[r][d],h)}else b.controls[d].patchValue(t[r][d])}e.controls[r].patchValue(t[r])}else e.controls[r].patchValue("")}catch(t){return void console.log(3,t)}return e}catch(t){return void console.log(1,t)}},t.prototype.reset_form=function(){this.dato.reset();for(var t in this.dato.controls){var e=this.dato.controls[t];if(e.controls&&"number"==typeof e.controls.length){for(;e.length;)e.removeAt(e.length-1);e.reset()}}return!0},t.prototype.cargarDatos=function(){var t=this;if(this.reset_form())try{this.cargando=!0,this.crudService.ver(this.id,this.URL).subscribe(function(e){t.cargando=!1,t.datosCargados=!0,t.dato.patchValue(t.cargarDatosRecursivo(e,t.dato)),t.mensajeResponse.titulo="Modificar",t.mensajeResponse.texto="Los datos se cargaron",t.mensajeResponse.clase="success",t.mensaje(2)},function(e){t.cargando=!1,t.datosCargados=!1,t.mensajeResponse=new d.a(!0),t.mensajeResponse=new d.a(!0),t.mensajeResponse.mostrar;try{e.json();401==e.status&&(t.mensajeResponse.texto="No tiene permiso para hacer esta operación.",t.mensajeResponse.clase="success",t.mensaje(2))}catch(a){500==e.status?t.mensajeResponse.texto="500 (Error interno del servidor)":t.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",t.mensajeResponse.clase="error",t.mensaje(2)}})}catch(t){console.log(0,t)}},t.prototype.eliminar=function(t){this.borrarItem=t,document.getElementById("confirmarEliminar").classList.add("is-active")},t.prototype.cancelarModal=function(){document.getElementById("confirmarEliminar").classList.remove("is-active")},t.prototype.borrar=function(t){var e=this;this.borrarCargando=!0,this.crudService.eliminar(t,this.URL).subscribe(function(t){e.borrarCargando=!1,e.mensajeResponse.mostrar=!0,e.mensajeResponse.texto="Se eliminó el elemento de la lista.",e.mensajeResponse.clase="success",e.mensaje(2),e.cancelarModal(),e.regresar()},function(t){e.borrarCargando=!1,e.mensajeResponse.mostrar=!0,e.cancelarModal();try{t.json();401==t.status&&(e.mensajeResponse.texto="No tiene permiso para hacer esta operación.",e.mensajeResponse.clase="danger",e.mensaje(2))}catch(a){500==t.status?e.mensajeResponse.texto="500 (Error interno del servidor)":e.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",e.mensajeResponse.clase="danger",e.mensaje(2)}})},t.prototype.cargarCatalogo=function(t,e){var a=this;this.cargando=!0,this.cargarDatosCatalogo=!0,this.crudService.lista(0,0,e).subscribe(function(e){a[t]=e,a.cargando=!1,0==e.length&&(a.mensajeResponse.titulo=t,a.mensajeResponse.texto="Esta vacio, póngase en contacto con un administrador.",a.mensajeResponse.mostrar=!0,a.mensajeResponse.clase="warning",a.mensaje(3)),a.cargarDatosCatalogo=!1},function(t){a.mensajeResponse=new d.a(!0),a.mensajeResponse.texto="No especificado.",a.mensajeResponse.mostrar=!0;try{t.json();401==t.status&&(a.mensajeResponse.texto="No tiene permiso para ver los roles."),500==t.status&&(a.mensajeResponse.texto="500 (Error interno del servidor). No se pudieron cargar los roles")}catch(e){500==t.status?a.mensajeResponse.texto="500 (Error interno del servidor). No se pudieron cargar los roles":a.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los roles"}a.cargarDatosCatalogo=!1})},t.prototype.regresar=function(){this.location.back()},t.prototype.addInFormArray=function(t,e,a,n){void 0===n&&(n=!1),this.modelo[a]||(this.modelo[a]=e.value);var i=this.modelo[a].indexOf(t);i>-1?this.modelo[a].splice(i,1):this.modelo[a].push(t),n?e.patchValue(this.modelo[a]):e=this.modelo[a]},t.prototype.seleccionarTodos=function(t,e,a,n){void 0===n&&(n=!1),this.todosSeleccionados[t]||(this.todosSeleccionados[t]=!1),this.todosSeleccionados[t]=!this.todosSeleccionados[t];if(this.modelo[t]=n?a.value:[],n)var i=a.value;for(var r=0,s=e;r<s.length;r++){var o=s[r];this.todosSeleccionados[t]?this.modelo[t].push(o.id):n?i.splice(a.value.indexOf(o.id),1):a.splice(this.modelo[t].indexOf(o.id),1)}n?this.todosSeleccionados[t]?a.patchValue(this.modelo[t]):a.patchValue(i):a.push(this.modelo[t])},t.prototype.seleccionarTodosMover=function(t,e){this.todosSeleccionados[t]||(this.todosSeleccionados[t]=!1),this.todosSeleccionados[t]=!this.todosSeleccionados[t];for(var a=0,n=e;a<n.length;a++){var i=n[a];this.todosSeleccionados[t]?this[t].push(i):this[t].splice(this[t].indexOf(i),1)}},t.prototype.agregarMover=function(t,e,a){var n=this[t].indexOf(a);n>-1?this[t].splice(n,1):this[t].push(a)},t.prototype.initMover=function(t,e,a){void 0===a&&(a="id");for(var n=0,i=t;n<i.length;n++)for(var r=i[n],s=0,o=0,c=e;o<c.length;o++){var l=c[o];r.value[a]==l[a]&&e.splice(s,1),s++}},t.prototype.iniciarMover=function(t,e,a,n,i){void 0===n&&(n=!1),void 0===i&&(i="id");for(var r=0,s=this[t];r<s.length;r++){var o=s[r];if(n){e.push(this.fb.group(o));for(var c=0,l=0,d=a;l<d.length;l++){var u=d[l];o[i]==u[i]&&a.splice(c,1),c++}}else{e.push(o.value);for(var c=0,p=0,m=a;p<m.length;p++){var u=m[p];o.value[i]==u.value[i]&&a.splice(c,1),c++}}}this[t]=[],this.todosSeleccionados[t]&&(a=[]),this.todosSeleccionados[t]=!1},t.prototype.generarCadenaRandom=function(t,e,a){void 0===a&&(a=!1);for(var n="",i=Math.floor(Math.random()*(9999*e-1111))+e,r=0;r<e;r++)i+=""+Math.floor(Math.random()*(9999*e-1111))+e;n=""+Math.round((new Date).getTime()/1e3)+i,n=btoa(n),n=n.substr(0,n.length-3),n=n.substr(Math.floor(90*Math.random())+1,e),a?t.patchValue(n):t=n},t.prototype.select_item_autocomplete=function(t,e,a,n){void 0===n&&(n=!1),n?t.patchValue(a[e]):t=a[e]},t.prototype.agregar_form_array=function(t,e){t.push(this.fb.group(e))},t.prototype.quitar_form_array=function(t,e){t.removeAt(e)},t.prototype.seleccionarImagenBase64=function(t,e,a){void 0===a&&(a=!1);var n=t.target.files,i=this;if(i.error_archivo=!1,a){for(var r,s=[],o=0;r=n[o];o++){var c=new FileReader;c.readAsBinaryString(r),c.onload=function(t){return function(t){try{s.push(btoa(t.target.result))}catch(t){i.error_archivo=!0}}}()}e.patchValue(s)}else{var l=n[0];if(n&&l){var c=new FileReader;c.readAsBinaryString(l),c.onload=function(t){return function(t){try{e.patchValue(btoa(t.target.result))}catch(t){i.error_archivo=!0}}}()}}},t.prototype.convertirJson=function(t,e,a){e.patchValue(""),this.error_json=!1;var n=t.target.files,i=n[0],r=this;if(n&&i){var s="",o=new FileReader;o.readAsBinaryString(i),o.onload=function(t){return function(t){try{s=JSON.parse(t.target.result),e.patchValue(s)}catch(t){r.error_json=!0}}}()}},t.prototype.mensaje=function(t,e){void 0===t&&(t=6),void 0===e&&(e=["bottom","left"]);var a={showProgressBar:!0,pauseOnHover:!1,clickToClose:!0,maxLength:this.mensajeResponse.texto.length};this.options={position:e,timeOut:1e3*t,lastOnBottom:!0},""==this.mensajeResponse.titulo&&(this.mensajeResponse.titulo=this.titulo),"alert"==this.mensajeResponse.clase&&this.notificacion.alert(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"success"==this.mensajeResponse.clase&&this.notificacion.success(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"info"==this.mensajeResponse.clase&&this.notificacion.info(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"warning"!=this.mensajeResponse.clase&&"warn"!=this.mensajeResponse.clase||this.notificacion.warn(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"error"!=this.mensajeResponse.clase&&"danger"!=this.mensajeResponse.clase||this.notificacion.error(this.mensajeResponse.titulo,this.mensajeResponse.texto,a)},t}();p([a.i(n.Input)(),m("design:type",String)],f.prototype,"URL",void 0),p([a.i(n.Input)(),m("design:type",String)],f.prototype,"titulo",void 0),p([a.i(n.Input)(),m("design:type","function"==typeof(g=void 0!==s.FormGroup&&s.FormGroup)&&g||Object)],f.prototype,"dato",void 0),f=p([a.i(n.Component)({selector:"formulario",template:'<simple-notifications [options]="options"></simple-notifications>\n    <div class="modal" id="confirmarEliminar">\n        <div class="modal-background"></div>\n        <div class="modal-card">\n            <header class="modal-card-head">\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\n            <button class="delete" (click)="cancelarModal()"></button>\n            </header>\n            <section class="modal-card-body">\n                <div class="content">\n                    <h1>¿Esta seguro de eliminar el elemento?</h1>\n                    <p>Ya no se podra recuperar la información</p>\n                </div>\n            </section>\n            <footer class="modal-card-foot">\n            <a class="button is-success" (click)="borrar(borrarItem)" [ngClass]="{\'is-loading\': borrarCargando}">Continuar</a>\n            <a class="button" (click)="cancelarModal()">Cancelar</a>\n            </footer>\n        </div>\n    </div>\n    '}),m("design:paramtypes",["function"==typeof(h=void 0!==r.a&&r.a)&&h||Object,"function"==typeof(v=void 0!==o.b&&o.b)&&v||Object,"function"==typeof(b=void 0!==c.a&&c.a)&&b||Object,"function"==typeof(y=void 0!==r.c&&r.c)&&y||Object,"function"==typeof(_=void 0!==i.Location&&i.Location)&&_||Object,"function"==typeof(x=void 0!==l.a&&l.a)&&x||Object,"function"==typeof(j=void 0!==s.FormBuilder&&s.FormBuilder)&&j||Object,"function"==typeof(P=void 0!==u.b&&u.b)&&P||Object])],f);var g,h,v,b,y,_,x,j,P},ModC:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.lista=function(t,e,a){return void 0===t&&(t=1),void 0===e&&(e=25),void 0===a&&(a=!1),this.jwtRequest.get(l.URL,null,{page:t,per_page:e,con_precios:a}).map(function(t){return t.json().data})},t.prototype.buscar=function(t,e,a,n,i){return void 0===e&&(e=1),void 0===a&&(a=25),void 0===n&&(n=!1),void 0===i&&(i=null),this.jwtRequest.get(l.URL,null,{q:t,page:e,per_page:a,con_precios:n,tipo:i}).map(function(t){return t.json().data})},t.prototype.clues=function(){return this.jwtRequest.get("unidades-medicas-dependientes",null,null).map(function(t){return t.json().data})},t}();c.URL="catalogo-insumos",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},Myp1:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},N6I4:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333;position:relative}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-primary h1{color:#fff}.top-bar.is-danger{background:#ff3860;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.top-bar.is-dark h1{color:#fff}",""]),t.exports=t.exports.toString()},"NAU/":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333}.contenedor-pedido.con-tabs .top-bar{padding:.5em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-pedido{background:#fff;border-radius:1em;overflow:hidden}.contenedor-pedido.con-tabs{border-top-left-radius:0!important;border-top-right-radius:0!important}",""]),t.exports=t.exports.toString()},NDet:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),t.exports=t.exports.toString()},"O/sS":function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.verRecepcionPedido=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return t.json().data})},t.prototype.guardarRecepcionPedido=function(t,e){return this.jwtRequest.put(l.URL,t,e).map(function(t){return t.json().data})},t}();c.URL="recepcion-pedido",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},O4Hv:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={}}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t}();i([a.i(n.Input)(),r("design:type",String)],s.prototype,"modulo",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"icono",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"url",void 0),s=i([a.i(n.Component)({selector:"menu-farmacia",template:a("bjWD"),styles:[a("KQGD")]}),r("design:paramtypes",[])],s)},OFVJ:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bm2B"),r=a("fc+i"),s=a("BkNc"),o=a("p5Ee"),c=a("K4kt"),l=a("gHRf"),d=a("hN3r"),u=a("bbdN");a.n(u);a.d(e,"a",function(){return f});var p=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},m=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,a,n,i,r){var s=this;this.fb=t,this.crudService=e,this.route=a,this._sanitizer=n,this.notificacion=i,this._ngZone=r,this.modo="N",this.tab=1,this.cant_solicitada_valida=!1,this.sum_cant_lotes=!1,this.mostrar_lote=[],this.cantidad_error=0,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.MinDate=new Date,this.MaxDate=new Date,this.tieneid=!1,this.cargando=!1,this.es_unidosis=!1,this.cargandoPdf=!1,this.mensajeResponse=new l.a,this.titulo="Ajuste menos de inventario",this.options={position:["bottom","right"],timeOut:2e3,lastOnBottom:!0},this.autocompleListFormatter=function(t){var e='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4"> <small>'+t.descripcion+'</small></p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+t.clave+") \n              ";return 1==t.es_causes&&(e+='<label class="tag is-success" ><strong>Cause </strong></label>'),0==t.es_causes&&(e+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);"><strong>No Cause </strong> </label>'),1==t.es_unidosis&&(e+='<label class="tag is-warning" ><strong>Unidosis</strong></label>'),e+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",s._sanitizer.bypassSecurityTrustHtml(e)}}return t.prototype.ngOnInit=function(){var t=this,e=JSON.parse(localStorage.getItem("usuario"));e.clues_activa&&(this.insumos_term+="&clues="+e.clues_activa.clues),e.almacen_activo&&(this.insumos_term+="&almacen="+e.almacen_activo.id),this.pdfworker=new Worker("web-workers/inventario/ajuste-menos.js");var a=this,n=this._ngZone;this.pdfworker.onmessage=function(t){n.run(function(){a.cargandoPdf=!1}),u.saveAs(a.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.dato=this.fb.group({id:[""],observaciones:[""],tipo_movimiento_id:["7",[i.Validators.required]],insumos:this.fb.array([])}),this.route.params.subscribe(function(e){e.id&&(t.tieneid=!0)}),this.form_insumos={tipo_movimiento_id:["",[i.Validators.required]]}},t.prototype.abrirModal=function(t){document.getElementById(t).classList.add("is-active")},t.prototype.cancelarModal=function(t){document.getElementById(t).classList.remove("is-active"),this.cant_solicitada_valida=!1,this.sum_cant_lotes=!1,this.modo="N",this.cantidad_error=0},t.prototype.select_insumo_autocomplete=function(t){var e=this,a=JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.crudService.lista(0,1e3,"comprobar-stock?almacen="+a.almacen_activo.id+"&clave="+t.clave).subscribe(function(a){for(var n=[],i=0,r=e.dato.get("insumos").value;i<r.length;i++){var s=r[i];if(0===a.length)break;if(s.clave===a[0].clave_insumo_medico)for(var o=0,c=s.lotes;o<c.length;o++){for(var l=c[o],d=0,u=a;d<u.length;d++){var p=u[d];if(l.id===p.id)try{p.cantidad=l.cantidad,p.nueva_existencia=l.nueva_existencia}catch(t){console.log(t)}}1===l.nuevo&&(n.push(l),console.log("Insumo nuevo",l.id))}}try{if(n.length>0)for(var m=0,f=n;m<f.length;m++){var s=f[m];a.push(s)}console.log(n),console.log(a)}catch(t){console.log(t)}e.lotes_insumo=a,e.insumo=t,document.getElementById("buscarInsumo").value="",document.getElementById("tituloModal").innerHTML=" "+t.descripcion+' <br>\n          <p aling="justify" style="font-size:12px">'+t.descripcion+'</p> \n          <p aling="justify" style="font-size:16px"> CANTIDAD POR ENVASE: \n          '+(t.cantidad_x_envase?t.cantidad_x_envase:"Sin especificar")+"</p>",e.es_unidosis=t.es_unidosis,e.unidad_medida=t.unidad_medida,e.cargando=!1,e.abrirModal("verLotes")},function(t){e.cargando=!1})},t.prototype.agregarLoteIsumo=function(){this.cantidad_error=0;for(var t=this.dato.controls.insumos,e={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,cantidad:1,presentacion_nombre:this.insumo.presentacion_nombre,unidad_medida:this.insumo.unidad_medida,cantidad_x_envase:this.insumo.cantidad_x_envase?parseInt(this.insumo.cantidad_x_envase):1,cantidad_surtida:1,lotes:this.fb.array([])},a=!1,n=0,i=0,r=t.value;i<r.length;i++){var s=r[i];if(s.clave===this.insumo.clave){!0,a=!0;break}n++}a||t.push(this.fb.group(e));var o=n,c=t.controls[o];this.mostrar_lote[o]=!1;var l={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.options={position:["bottom","left"],timeOut:5e3,lastOnBottom:!0};for(var d=!1,u=0,p=this.lotes_insumo;u<p.length;u++){var s=p[u];s.cantidad<s.existencia&&(d=!0)}for(var m=0,f=this.lotes_insumo;m<f.length;m++){var s=f[m];if(s.cantidad>=0){var g=!1;if(a)for(var h=0,v=c.controls.lotes.controls;h<v.length;h++){var b=v[h];if(b.controls.id.value===s.id){g=!0;var y=s.cantidad;if(b.controls.existencia.value<=y){var _=Number(b.controls.existencia.value)-1;this.notificacion.alert("Cantidad Inválida","La cantidad máxima es: "+_,l),y=Number(b.controls.existencia.value)-1,this.cantidad_error++}b.controls.cantidad.patchValue(y),b.controls.nueva_existencia.patchValue(y);break}}if(!g)if(s.cantidad<s.existencia)c.controls.lotes.push(this.fb.group({id:s.id,ajuste:1,nueva_existencia:s.cantidad,nuevo:0|s.nuevo,codigo_barras:s.codigo_barras,lote:s.lote,fecha_caducidad:s.fecha_caducidad,cantidad:s.cantidad,existencia:s.nuevo?0:s.existencia}));else{var _=Number(s.existencia)-1;this.notificacion.alert("Cantidad Inválida","La cantidad máxima de "+s.lote+" es: "+_,l),this.cantidad_error++,a||d||t.removeAt(o)}}}for(var x=0,j=0,P=0,I=c.controls.lotes.value;P<I.length;P++){var b=I[P];x+=b.cantidad,j+=b.cantidad}c.controls.cantidad_surtida.patchValue(x),0===this.cantidad_error&&this.cancelarModal("verLotes"),this.cancelarModal("negarExistencia")},t.prototype.validarLotesInsumo=function(){this.options={position:["bottom","left"],timeOut:5e3,lastOnBottom:!0},this.cantidad_error=0;for(var t=this.dato.controls.insumos,e={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,cantidad:1,presentacion_nombre:this.insumo.presentacion_nombre,unidad_medida:this.insumo.unidad_medida,cantidad_x_envase:this.insumo.cantidad_x_envase?parseInt(this.insumo.cantidad_x_envase):1,cantidad_surtida:1,lotes:this.fb.array([])},a=!1,n=0,i=!0,r=0,s=t.value;r<s.length;r++){var o=s[r];if(o.clave===this.insumo.clave){!0,a=!0;break}n++}a||t.push(this.fb.group(e));for(var c=0,l=this.lotes_insumo;c<l.length;c++){var o=l[c];o.cantidad>=o.existencia&&(i=!1,a||t.removeAt(t.length-1))}i?this.agregarLoteIsumo():(this.mensajeResponse.titulo="Ajuste MENOS",this.mensajeResponse.texto="Verificar las cantidades ingresadas",this.mensajeResponse.clase="warning",this.mensaje(8))},t.prototype.ver_lotes_asignados=function(t){this.mostrar_lote[t]=!this.mostrar_lote[t]},t.prototype.agregarNuevoLote=function(){this.lotes_insumo.push({id:""+Math.floor(999*Math.random())+1,codigo_barras:"",lote:"",fecha_caducidad:"",existencia:"",cantidad:"",nueva_existencia:"",nuevo:1,existencia_unidosis:"",cantidad_unidosis:""})},t.prototype.eliminarLote=function(t){this.lotes_insumo.splice(t,1)},t.prototype.quitar_lote_insumo=function(t,e,a){var n=this.dato.controls.insumos,i=n.controls[t];i.controls.lotes.removeAt(a);var r=i.controls.cantidad_surtida.value-e.cantidad;i.controls.cantidad_surtida.patchValue(r)},t.prototype.validar_cantidad_lote=function(t,e,a,n){if(e.controls.cantidad.value>=e.controls.existencia.value){var i={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3},r=Number(e.controls.existencia.value)-1;this.notificacion.alert("Cantidad Inválida","La cantidad máxima es: "+r,i);var s=Number(e.controls.existencia.value)-1;e.controls.cantidad.patchValue(s),e.controls.nueva_existencia.patchValue(s)}for(var o=this.dato.controls.insumos,c=o.controls[t],l=0,d=0,u=c.controls.lotes.value;d<u.length;d++){l+=u[d].cantidad}c.controls.cantidad_surtida.patchValue(l)},t.prototype.comprobar_cant_lotes=function(){for(var t=0,e=0,a=this.lotes_insumo;e<a.length;e++){var n=a[e];n.cantidad&&(t=Number(t)+Number(n.cantidad))}this.sum_cant_lotes=t>=0},t.prototype.comprobar_cant_solicitada=function(t){this.cant_solicitada_valida=t>0},t.prototype.quitar_punto=function(t){return!!this.is_numeric(t.key)},t.prototype.is_numeric=function(t){return/^\d+$/.test(t)},t.prototype.guardar_movimiento=function(){document.getElementById("guardarMovimiento").classList.add("is-active")},t.prototype.imprimir=function(){var t=JSON.parse(localStorage.getItem("usuario"));console.log(this.dato.value);try{this.cargandoPdf=!0;var e={datos:this.dato.value,lista:this.dato.value.insumos,usuario:t};this.pdfworker.postMessage(JSON.stringify(e))}catch(t){this.cargandoPdf=!1}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t.prototype.handleKeyboardEvents=function(t){if(this.key=t.which||t.keyCode,13===t.keyCode)return document.getElementById("buscarInsumo").focus(),t.preventDefault(),!1},t.prototype.mensaje=function(t,e){void 0===t&&(t=6),void 0===e&&(e=["bottom","left"]);var a={showProgressBar:!0,pauseOnHover:!1,clickToClose:!0,maxLength:this.mensajeResponse.texto.length};this.options={position:e,timeOut:1e3*t,lastOnBottom:!0},""===this.mensajeResponse.titulo&&(this.mensajeResponse.titulo=this.titulo),"alert"===this.mensajeResponse.clase&&this.notificacion.alert(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"success"===this.mensajeResponse.clase&&this.notificacion.success(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"info"===this.mensajeResponse.clase&&this.notificacion.info(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"warning"!==this.mensajeResponse.clase&&"warn"!==this.mensajeResponse.clase||this.notificacion.warn(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"error"!==this.mensajeResponse.clase&&"danger"!==this.mensajeResponse.clase||this.notificacion.error(this.mensajeResponse.titulo,this.mensajeResponse.texto,a)},t}();f=p([a.i(n.Component)({selector:"app-ajuste-mas-formulario",template:a("C9MY"),styles:[a("2Gpn")],styles:["ngui-auto-complete {z-index: 999999 !important}"],host:{"(document:keydown)":"handleKeyboardEvents($event)"}}),m("design:paramtypes",["function"==typeof(g=void 0!==i.FormBuilder&&i.FormBuilder)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object,"function"==typeof(v=void 0!==s.c&&s.c)&&v||Object,"function"==typeof(b=void 0!==r.d&&r.d)&&b||Object,"function"==typeof(y=void 0!==d.b&&d.b)&&y||Object,"function"==typeof(_=void 0!==n.NgZone&&n.NgZone)&&_||Object])],f);var g,h,v,b,y,_},OhEe:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("qbdv"),s=a("BkNc"),o=a("bm2B"),c=a("/zHi"),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("bbdN")),h=(a.n(g),a("p5Ee")),v=a("gHRf"),b=a("JaZ/"),y=a("2cH3"),_=a("sYIv");a.d(e,"a",function(){return P});var x=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},j=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},P=function(){function t(t,e,a,n,i,r,s,o){this.title=t,this.location=e,this.router=a,this.route=n,this._ngZone=i,this.apiService=r,this.fb=s,this.cambiarEntornoService=o,this.cargando=!1,this.cargandoProveedores=!1,this.asignando=!1,this.cargandoInsumos=!1,this.proveedores=[],this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.mostrarImprimirDialogo=!1,this.tiposSubPedidos=[],this.subPedidos={},this.recepciones={},this.tieneRecepcionIniciada=!1,this.meses={1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"},this.dialogCancelarFechaTransferencia={},this.dialogCancelarMeses=[],this.errorCancelarPedido=!1,this.errorCancelarPedidoTexto="",this.cancelandoPedido=!1,this.formularioTitulo="Nuevo",this.esEditar=!1,this.mostrarModalInsumos=!1,this.porcentageTotalPedido=0,this.cargandoPdf={},this.errorEnPDF=!1}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Asignar proveedor pedido alterno / Administrador central"),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.router.navigate(["/administrador-central/validacion-pedidos-alternos"])}),this.pdfworker=new Worker("web-workers/farmacia/pedidos/pedido-proveedor.js");var e=this,a=this._ngZone;this.pdfworker.onmessage=function(t){a.run(function(){console.log(t),e.cargandoPdf[t.data.tipoPedido]=!1}),g.saveAs(e.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.pdfworker.onerror=function(t){a.run(function(){console.log(t),e.errorEnPDF=!0})},this.cargandoProveedores=!0,this.apiService.proveedores().subscribe(function(e){t.cargandoProveedores=!1,t.proveedores=e},function(e){t.cargandoProveedores=!1}),this.pedido=new _.a(!0),this.route.params.subscribe(function(e){t.id=e.id,e.id?(t.cargando=!0,t.pedido.id=e.id,t.apiService.ver(e.id).subscribe(function(e){t.pedido.datosImprimir=e,t.pedido.status=e.status;for(var a in e.insumos){var n=e.insumos[a],i=n.insumos_con_descripcion;i.cantidad=+n.cantidad_solicitada,i.cantidad_recibida=+n.cantidad_recibida||0,i.monto=+n.monto_solicitado,i.monto_recibido=+n.monto_recibido||0,i.precio=+n.precio_unitario,t.pedido.lista.push(i);var r=!1,s="SC";s=n.tipo_insumo.clave,"MC"==n.tipo_insumo.clave&&(r=!0),t.subPedidos[s]||(t.tiposSubPedidos.push(s),t.cargandoPdf[s]=!1,t.subPedidos[s]={titulo:n.tipo_insumo.nombre,clave_folio:s,claves:0,cantidad:0,monto:0,iva:0,tiene_iva:r,lista:[]}),t.subPedidos[s].claves++,t.subPedidos[s].cantidad+=i.cantidad,t.subPedidos[s].monto+=i.monto,t.subPedidos[s].lista.push(i)}if("EF"!=e.status)for(var a in e.recepciones)"BR"==e.recepciones[a].entrada.status&&(t.tieneRecepcionIniciada=!0);e.insumos=void 0,t.pedido.indexar(),t.pedido.listar(1);var o=(t.pedido.datosImprimir.total_claves_recibidas||0)/t.pedido.lista.length*100,c=(t.pedido.datosImprimir.total_cantidad_recibida||0)/t.pedido.totalInsumos*100,l=(t.pedido.datosImprimir.total_monto_recibido||0)/t.pedido.totalMonto*100;t.porcentageTotalPedido=(c+o+l)/3,t.cargando=!1},function(e){t.cargando=!1,t.mensajeError=new v.a(!0),t.mensajeError=new v.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}),console.log("editar pedido")):console.log("nuevo pedido")})},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},t.prototype.mostrarFichaInformativa=function(t,e){t.preventDefault(),t.stopPropagation(),alert(e),console.log(e)},t.prototype.keyboardInput=function(t){32==t.keyCode&&t.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.mostrarModalInsumos=!0),39==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaSiguiente():this.pedido.paginaSiguiente()),37==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaAnterior():this.pedido.paginaAnterior())},t.prototype.imprimirExcel=function(){var t="token="+localStorage.getItem("token");window.open(h.a.API_URL+"/generar-excel-pedido/"+this.pedido.id+"?"+t)},t.prototype.imprimir=function(t){void 0===t&&(t="");try{this.cargandoPdf[t]=!0;var e={datos:this.pedido.datosImprimir,insumos:this.subPedidos[t]};this.pdfworker.postMessage(JSON.stringify(e))}catch(e){this.cargandoPdf[t]=!1,console.log(e)}},t.prototype.mostrarDialogo=function(){this.mostrarImprimirDialogo=!0},t.prototype.cerrarDialogo=function(){this.mostrarImprimirDialogo=!1},t.prototype.asignar=function(){var t=this;"ASIGNAR"==prompt("Para asignar proveedor a este pedido alterno, por favor escriba: ASIGNAR")&&(this.asignando=!0,this.apiService.asignar(this.id).subscribe(function(e){t.asignando=!1,t.pedido.status=e.status,t.mensajeExito=new v.a(!0),t.mensajeExito.mostrar=!0,t.mensajeExito.texto="Pedido validado"},function(e){t.asignando=!1,t.mensajeError=new v.a(!0),t.mensajeError.mostrar=!0;try{var a=e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),500==e.status?t.mensajeError.texto=a.error:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();P=x([a.i(n.Component)({selector:"app-asignar",template:a("54EC"),styles:[a("BnEL")],host:{"(window:keydown)":"keyboardInput($event)"},providers:[b.a]}),j("design:paramtypes",["function"==typeof(I=void 0!==i.b&&i.b)&&I||Object,"function"==typeof(E=void 0!==r.Location&&r.Location)&&E||Object,"function"==typeof(k=void 0!==s.a&&s.a)&&k||Object,"function"==typeof(C=void 0!==s.c&&s.c)&&C||Object,"function"==typeof(A=void 0!==n.NgZone&&n.NgZone)&&A||Object,"function"==typeof(S=void 0!==b.a&&b.a)&&S||Object,"function"==typeof(q=void 0!==o.FormBuilder&&o.FormBuilder)&&q||Object,"function"==typeof(w=void 0!==y.a&&y.a)&&w||Object])],P);var I,E,k,C,A,S,q,w},"P+aT":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("srJY"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"almacen",component:r.a,canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},P1Ud:function(t,e,a){"use strict";var n=a("/oeL"),i=a("2cH3");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.cambiarEntornoService=t,this.usuario={}}return t.prototype.ngOnInit=function(){var t=this;this.usuario=JSON.parse(localStorage.getItem("usuario")),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.usuario=JSON.parse(localStorage.getItem("usuario"))})},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();r([a.i(n.Input)(),s("design:type",String)],o.prototype,"modulo",void 0),r([a.i(n.Input)(),s("design:type",String)],o.prototype,"icono",void 0),r([a.i(n.Input)(),s("design:type",String)],o.prototype,"url",void 0),o=r([a.i(n.Component)({selector:"app-menu-inventario",template:a("x/l8"),styles:[a("R2l4")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},P7j6:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},P93B:function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n        <br>\r\n        <nav class="level">\r\n            <div class="level-left">\r\n                <div class="level-item">\r\n                    <h1 class="title">\r\n                        <span class="icon is-medium"><i class="fa fa-thumbs-up"></i></span> Cumplimiento de proveedores\r\n                    </h1>\r\n                </div>\r\n            </div>\r\n\r\n        </nav>\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoEstadisticasGlobales">\r\n            <div class="notification is-white">\r\n                <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando estadisticas globales...</span>\r\n            </div>\r\n        </div>\r\n        <div class="columns is-multiline "  *ngIf="!cargandoEstadisticasGlobales">\r\n            <div class="column is-4" *ngFor="let item of estadisticasGlobales">\r\n                <div class="notification is-white">\r\n                    <h1 class="title" style="font-size:1.2em;  margin-bottom:0.2em;color:#00d1b2">${{ item.total_monto_solicitado | number:\'1.2-2\' }}</h1>\r\n                    <h1 class="title" style="font-size:0.8em; margin-bottom:0.2em;">{{ item.proveedor }}</h1>\r\n                    <hr style="margin: 0.2em 0">\r\n                    <nav class="level"><div class="level-left">Entregado</div><div class="level-right"><b>{{ item.porcentaje_entregado | number:\'1.2-2\' }}%</b></div></nav>\r\n                   \r\n                   \r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="columns is-multiline"  *ngIf="!cargandoEstadisticasGlobales">\r\n            <div class="column is-12" *ngFor="let item of listaEstadisticasProveedores; let  i = index">\r\n                \r\n                <div style="display:block; background:white; border-radius:0.2em; padding: 0.5em 0; min-height:471px" *ngIf="!item.cargando && item.options">\r\n                    <nav class="level" style="margin:1em;">\r\n                        <div class="level-left">\r\n                      <!--      <p><b>{{ item.proveedor }}</b> <small style="color:gray;">Estadística mensual</small></p>-->\r\n                        </div>\r\n                        <div class="level-right">\r\n                            <div>\r\n                                \r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'monto\' }" (click)="item.tipoDatos = \'monto\'; renderGrafica(i)">$ Monto</span>\r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'claves\' }" (click)="item.tipoDatos = \'claves\'; renderGrafica(i)">Claves</span> \r\n                                <span class="tag " style="cursor:pointer" [ngClass]="{ \'is-primary\': item.tipoDatos == \'insumos\' }" (click)="item.tipoDatos = \'insumos\'; renderGrafica(i)">Insumos</span> \r\n                            </div>\r\n                            \r\n                        </div>\r\n                    </nav>\r\n                    <hr style="margin:0">\r\n                    <chart *ngIf="mostrarGraficas" [options]="item.options" style="display:block;"></chart>\r\n                </div>\r\n\r\n                <div class="is-fullwidth has-text-centered"  *ngIf="item.cargando ">\r\n                    <div class="notification is-white">\r\n                        <span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando estadísticas diarias de: <b>{{item.proveedor}}</b>...</span>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n        </div>\r\n\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},PII2:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("bKpL"),o=(a.n(s),a("rlar")),c=(a.n(o),a("/zHi")),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("maPk")),h=a("2cH3"),v=a("gHRf");a.d(e,"a",function(){return _});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_=function(){function t(t,e,a,n){this.title=t,this.route=e,this.inicializacionInventarioService=a,this.cambiarEntornoService=n,this.cargando=!1,this.mensajeError=new v.a,this.mensajeExito=new v.a,this.titulo="Inicialización de Inventario",this.icono="fa-file",this.inventarios=[],this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new o.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=10,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Inicialización de Inventario"),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.listar(t.paginaActual)}),this.listar(1),this.mensajeError=new v.a,this.mensajeExito=new v.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.inicializacionInventarioService.buscar(t.status,e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):s.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1;var a=e.data;for(var n in a)a[n].created_at=a[n].created_at.replace(" ","T");t.resultadosBusqueda=a,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var i=0;i<t.paginasTotalesBusqueda;i++)t.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")})},t.prototype.obtenerDireccion=function(t,e){return"/inventario/inicializacion-inventario/ver/"+t},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,this.cargando=!0,this.inicializacionInventarioService.buscar(this.status,t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1;var e=t.data;for(var n in e)e[n].created_at=e[n].created_at.replace(" ","T");a.resultadosBusqueda=e,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var i=0;i<a.paginasTotalesBusqueda;i++)a.indicePaginasBusqueda.push(i+1)},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,this.cargando=!0,this.inicializacionInventarioService.lista(this.status,t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.inventarios=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1)},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();_=b([a.i(n.Component)({selector:"inventario-inicializacion-inventario-lista",template:a("jqht"),styles:[a("LeXS")],providers:[g.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==i.b&&i.b)&&x||Object,"function"==typeof(j=void 0!==r.c&&r.c)&&j||Object,"function"==typeof(P=void 0!==g.a&&g.a)&&P||Object,"function"==typeof(I=void 0!==h.a&&h.a)&&I||Object])],_);var x,j,P,I},PkEX:function(t,e){t.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Laboratorio" class="nav-item pull-left nav-hub-active"  routerLink="/laboratorio">\r\n            \r\n            <img src="assets/hub-laboratorio.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left is-hidden-touch">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item">\r\n                <h1 class="title">&nbsp;Laboratorio</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <div class="nav-center">\r\n            <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n            </span>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},PoHA:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("8EhF"),d=a("LLho"),u=a("Px6Q"),p=a("bH5l"),m=a("BFvY"),f=a("pBSs"),g=a("K4kt"),h=a("CWbX"),v=a("oSQj"),b=(a.n(v),a("evA2"));a.n(b);a.d(e,"a",function(){return _});var y=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},_=function(){function t(){}return t}();_=y([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,f.a,h.a,v.NguiAutoCompleteModule,b.NguiDatetimePickerModule],declarations:[p.a],providers:[m.a,g.a]})],_)},Px6Q:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("sL47"),s=a("wnvH"),o=a("pSC/");a.d(e,"a",function(){return l});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=function(){function t(){}return t}();l=c([a.i(n.NgModule)({imports:[i.CommonModule],exports:[r.a,s.a,o.a],declarations:[r.a,s.a,o.a]})],l)},PxV7:function(t,e){t.exports='<form name="form" novalidate [formGroup]="usuario"  (ngSubmit)="enviar()">     \r\n            \r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded  has-icon has-icon-right">\r\n                  <input class="input" autofocus type="text" [ngClass]="{\'is-danger\': usuario.get(\'nombre\').hasError(\'required\') && usuario.get(\'nombre\').touched}"  placeholder="Nombre" formControlName="nombre">\r\n                  <span class="icon is-small" *ngIf="usuario.get(\'nombre\').hasError(\'required\') && usuario.get(\'nombre\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'nombre\').hasError(\'required\') && usuario.get(\'nombre\').touched">Este campo es requerido.</span>\r\n                </p>\r\n                <p class="control is-expanded has-icon has-icon-right">\r\n                  <input class="input" type="text" placeholder="Apellidos" [ngClass]="{\'is-danger\': usuario.get(\'apellidos\').hasError(\'required\') && usuario.get(\'apellidos\').touched}" formControlName="apellidos">\r\n                  <span class="icon is-small" *ngIf="usuario.get(\'apellidos\').hasError(\'required\') && usuario.get(\'apellidos\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'apellidos\').hasError(\'required\') && usuario.get(\'apellidos\').touched">Este campo es requerido.</span>\r\n                </p>\r\n              </div>\r\n             \r\n              <h2 class="subtitle">Datos de la cuenta</h2>\r\n              <p class="control has-icon has-icon-right">\r\n                <input type="text" class="input" placeholder="Usuario" (ngModelChange)="usuarioRepetido = false; usuarioInvalido = false" [ngClass]="{\'is-danger\': (usuario.get(\'id\').hasError(\'required\') || usuarioRepetido || usuarioInvalido) && usuario.get(\'id\').touched}" formControlName="id">\r\n                <span class="icon is-small" *ngIf="(usuario.get(\'id\').hasError(\'required\') || usuarioRepetido || usuarioInvalido) && usuario.get(\'id\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                </span>\r\n                <span class="help is-danger" *ngIf="usuario.get(\'id\').hasError(\'required\') && usuario.get(\'id\').touched">Este campo es requerido.</span>\r\n                <span class="help is-danger" *ngIf="usuarioRepetido && usuario.get(\'id\').touched">Este usuario ya fue utilizado.</span>\r\n                <!--span class="help is-danger" *ngIf="usuarioInvalido && usuario.get(\'id\').touched">El usuario debe tener un formato de <b>email</b> válido.</span-->\r\n              </p>\r\n              <p class="control" *ngIf="mostrarCambiarPassword">\r\n                  <label class="checkbox">\r\n                    <input type="checkbox" formControlName="cambiarPassword" (click)="toggleCambiarPassword()">\r\n                    Cambiar contraseña\r\n                  </label>\r\n                </p>\r\n              <div class="control is-grouped">\r\n                \r\n                <p class="control is-expanded has-icon has-icon-right">\r\n                  <input class="input" type="password" placeholder="Contraseña" [ngClass]="{\'is-danger\': (usuario.get(\'password\').hasError(\'required\') || (usuario.get(\'password\').value != usuario.get(\'confirmarPassword\').value && usuario.get(\'confirmarPassword\').touched)) && usuario.get(\'password\').touched}" formControlName="password">\r\n                  <span class="icon is-small" *ngIf="(usuario.get(\'password\').hasError(\'required\') || (usuario.get(\'password\').value != usuario.get(\'confirmarPassword\').value && usuario.get(\'confirmarPassword\').touched)) && usuario.get(\'password\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'password\').hasError(\'required\') && usuario.get(\'password\').touched">Este campo es requerido.</span>\r\n                  <span class="help is-danger" *ngIf="(usuario.get(\'password\').value != usuario.get(\'confirmarPassword\').value && usuario.get(\'confirmarPassword\').touched) && usuario.get(\'password\').touched">Las contraseñas no coinciden.</span>\r\n                </p>\r\n                <p class="control is-expanded has-icon has-icon-right">\r\n                  <input class="input" type="password" placeholder="Confirmar contraseña" [ngClass]="{\'is-danger\': usuario.get(\'confirmarPassword\').hasError(\'required\') && usuario.get(\'confirmarPassword\').touched}" formControlName="confirmarPassword">\r\n                  <span class="icon is-small" *ngIf="usuario.get(\'confirmarPassword\').hasError(\'required\') && usuario.get(\'confirmarPassword\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'confirmarPassword\').hasError(\'required\') && usuario.get(\'confirmarPassword\').touched">Este campo es requerido.</span>\r\n                </p>\r\n                \r\n              </div>\r\n\r\n              <!--<h2 class="subtitle">Roles</h2>\r\n              <div class="control" [ngClass]="{\'is-loading\': cargandoRoles}">\r\n \r\n                  <select  name="roles" formControlName="roles" multiple class="bulma-select-multiple" [ngClass]="{\'is-warning\': roles?.length ==0 }">\r\n                    <option *ngFor="let item of roles" value="{{item.id}}">{{ item.nombre }}</option>\r\n                  </select>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'roles\').hasError(\'required\') && usuario.get(\'roles\').touched">Debe elegir por lo menos un rol.</span>\r\n                  <span class="help " *ngIf="roles?.length == 0"><b>La lista de roles está vacía.</b> <a (click)="cargarRoles()"><span class="icon is-small"><i class="fa fa-refresh"></i></span> <span>Actualizar</span></a></span>\r\n              </div>\r\n-->\r\n              \r\n              <h2 class="subtitle">Configuración</h2>\r\n              <div class="tabs is-centered">\r\n                <ul>\r\n                  \r\n                  <li [ngClass]="{ \'is-active\' : tab == 1}"><a (click)="tab=1">Roles</a></li>\r\n                  <li [ngClass]="{ \'is-active\' : tab == 2}"><a (click)="tab=2">Clues / Almacenes</a></li>\r\n                  <li [ngClass]="{ \'is-active\' : tab == 3}"><a (click)="tab=3">Avatar</a></li>\r\n                </ul>\r\n              </div>\r\n       \r\n              <div  [ngClass]="{ \'is-hidden\': tab != 1}">\r\n                <div class="control" [ngClass]="{\'is-loading\': cargandoRoles}">\r\n\r\n                  <select  name="roles" formControlName="roles" multiple class="bulma-select-multiple" [ngClass]="{\'is-warning\': roles?.length ==0 }">\r\n                    <option *ngFor="let item of roles" value="{{item.id}}">{{ item.nombre }}</option>\r\n                  </select>\r\n                  <span class="help is-danger" *ngIf="usuario.get(\'roles\').hasError(\'required\') && usuario.get(\'roles\').touched">Debe elegir por lo menos un rol.</span>\r\n                  <span class="help " *ngIf="roles?.length == 0"><b>La lista de roles está vacía.</b> <a (click)="cargarRoles()"><span class="icon is-small"><i class="fa fa-refresh"></i></span> <span>Actualizar</span></a></span>\r\n                </div>\r\n              </div>\r\n              <div [ngClass]="{ \'is-hidden\': tab != 2}">\r\n                <div class="control is-grouped">\r\n                  <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                    <select #clues>\r\n                      <option *ngFor="let item of unidadesMedicas" value="{{item.clues}}">{{ item.nombre }} - {{item.clues}}</option>\r\n                    </select>\r\n                    </span>\r\n                  </p>\r\n                  <p class="control">\r\n                    <a class="button is-primary" (click)="agregarUnidadMedica(clues.value)"><span class="icon"><i class="fa fa-plus"></i></span></a>\r\n                  </p>                      \r\n                </div>\r\n                \r\n                <div class="columns is-gapless">\r\n                  <div class="column">\r\n                    <table class="table">\r\n                      <thead>\r\n                        <tr>\r\n                          <td colspan="2">CLUES</td>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        <tr style="cursor:pointer;" *ngFor="let item of unidadesMedicasAgregadas; let i = index" (click)="unidadMedicaSeleccionada=item" [ngClass]="{\'is-selected\':unidadMedicaSeleccionada && unidadMedicaSeleccionada.clues==item.clues }">\r\n                          <td>{{ item.nombre}}</td>\r\n                          <td style="width:1em;">\r\n                            <a (click)="eliminarClues($event,item,index)"><span class="icon is-small"><i class="fa fa-trash"></i></span> </a>\r\n                          </td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                  <div class="column">\r\n                    <table class="table">\r\n                      <thead>\r\n                        <tr>\r\n                          <td colspan="2">ALMACENES</td>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody *ngIf="unidadMedicaSeleccionada">\r\n                        <tr style="cursor:pointer;"*ngFor="let item of unidadMedicaSeleccionada.almacenes; let i = index" (click)="toggleAlmacen(item)" >\r\n                          \r\n                          <td style="width:1em;">\r\n                            <span class="icon"><i class="fa" [ngClass]="{\'fa-circle-thin\': !item.seleccionado, \'fa-check-circle\': item.seleccionado}" ></i></span>                            \r\n                          </td>\r\n                          <td>{{ item.nombre}}</td>\r\n                        </tr>\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n                                \r\n              </div>\r\n              <div [ngClass]="{ \'is-hidden\': tab != 3}">\r\n                <p class="control">                \r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-male" >\r\n                    <figure class="image is-64x64" >\r\n                      <img src="assets/avatar-circled-user-male.svg" alt="Avatar hombre">\r\n                    </figure>\r\n                  </label>\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-female"  >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-circled-user-female.svg" alt="Avatar mujer">\r\n                    </figure>\r\n                  </label>\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-male-skin-type-6" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-circled-user-male-skin-type-6.svg" alt="Avatar hombre piel tipo 6">\r\n                    </figure>\r\n                  </label>\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-female-skin-type-6" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-circled-user-female-skin-type-6.svg" alt="Avatar mujer piel tipo 6">\r\n                    </figure>\r\n                  </label>\r\n\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-collaborator-male" >\r\n                    <figure class="image is-64x64" >\r\n                      <img src="assets/avatar-circled-collaborator-male.svg" alt="Avatar hombre">\r\n                    </figure>\r\n                  </label>\r\n                  \r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-nurse" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-nurse.svg" alt="Avatar enfermera">\r\n                    </figure>\r\n                  </label>\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-doctor-male" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-circled-doctor-male.svg" alt="Avatar doctor">\r\n                    </figure>\r\n                  </label>\r\n\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-doctor-female" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-circled-doctor-female.svg" alt="Avatar doctora">\r\n                    </figure>\r\n                  </label>\r\n\r\n                  <label class="radio" [ngClass]="{\'is-disabled\': cargando}">\r\n                    <input type="radio" name="avatar" formControlName="avatar" value="avatar-cat" >\r\n                    <figure class="image is-64x64">\r\n                      <img src="assets/avatar-cat.svg" alt="Avatar de gato">\r\n                    </figure>\r\n                  </label>\r\n\r\n                  \r\n                </p>\r\n              </div>\r\n              \r\n              <br><br>\r\n              <div class="control is-grouped">\r\n                <p class="control">\r\n                  <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="usuario.invalid" >Guardar</button>\r\n                </p>\r\n                <p class="control">\r\n                  <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': cargando}" [disabled]="usuario.invalid" >Eliminar usuario</button>\r\n                </p>\r\n                <p class="control">\r\n                  <a class="button is-white" (click)="regresar()" >Regresar</a>\r\n                </p>\r\n              </div>\r\n          </form>'},QCH9:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bKpL"),r=(a.n(i),a("rlar")),s=(a.n(r),a("/zHi")),o=(a.n(s),a("S7im")),c=(a.n(o),a("azLz")),l=(a.n(c),a("MBEm")),d=(a.n(l),a("5v8a")),u=(a.n(d),a("Pic8")),p=(a.n(u),a("xpf9")),m=(a.n(p),a("CPp0")),f=a("bbdN"),g=(a.n(f),a("p5Ee")),h=a("WdPz"),v=a("gHRf");a.d(e,"a",function(){return _});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_=function(){function t(t,e){this.apiService=t,this.http=e,this.mensajeError=new v.a,this.mensajeExito=new v.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new r.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=10,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[],this.errores={archivo:null},this.mostrarModalSubirArchivoSync=!1,this.mensajeErrorSync="",this.archivo=null,this.archivoSubido=!1,this.enviandoDatos=!1,this.progreso=0,this.cargando=!1}return t.prototype.ngOnInit=function(){var t=this;this.listar(1),this.mensajeError=new v.a,this.mensajeExito=new v.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.apiService.buscar(e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):i.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.apiService.buscar(t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0,this.apiService.listaPaginada(t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.lista=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t.prototype.fileChange=function(t){var e=t.target.files;e.length>0&&(this.archivo=e[0])},t.prototype.reset=function(){this.errores={archivo:null},this.mensajeErrorSync="",this.archivoSubido=!1,this.archivo=null},t.prototype.adjuntar=function(){var t=this;if(this.archivo){this.errores={archivo:null},this.mensajeErrorSync="",this.archivoSubido=!1,this.enviandoDatos=!0;var e=new FormData;e.append("sync",this.archivo,this.archivo.name);var a=new m.Headers;a.delete("Content-Type"),a.append("Authorization","Bearer "+localStorage.getItem("token"));var n,r=new m.RequestOptions({headers:a,responseType:m.ResponseContentType.Blob});this.http.post(g.a.API_URL+"/sync/importar",e,r).map(function(t){return n=t.headers.get("content-disposition"),t.blob()}).catch(function(t){return i.Observable.throw(t)}).subscribe(function(e){var a,i=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,r=i.exec(n);null!=r&&r[1]&&(a=r[1].replace(/['"]/g,"")),f.saveAs(e,a),t.archivoSubido=!0,t.enviandoDatos=!1,t.progreso=100},function(e){console.log(e),409==e.status?t.mensajeErrorSync="No se pudo subir el archivo, verifica que el archivo que tratas de subir sea correcto, que el nombre no haya sido modificado. Verifica que el archivo que intentas subir ya ha sido sincronizado previamente.":401==e.status?t.mensajeErrorSync="El archivo que intentas subir ya ha sido sincronizado previamente":t.mensajeErrorSync="Hubo un problema al sincronizar, prueba recargar el sitio de lo contrario llama a soporte técnico.",t.progreso=100,t.enviandoDatos=!1})}},t}();_=b([a.i(n.Component)({selector:"app-central",template:a("nBxU"),styles:[a("/BVB")],providers:[h.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==h.a&&h.a)&&x||Object,"function"==typeof(j=void 0!==m.Http&&m.Http)&&j||Object])],_);var x,j},QDx8:function(t,e){t.exports='<listar #ctrl URL="via-administracion" titulo="VA / Catalogo"></listar>\r\n<menu-catalogo [modulo]="\'Vías de administración\'" [icono]="\'assets/icono-catalogos.svg\'" [url]="\'/almacen-articulos/catalogos/vias-administracion\'"></menu-catalogo>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n\r\n                        <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> vias administracion\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                            <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/almacen-articulos/catalogos/vias-administracion/nuevo">\r\n                                    <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!ctrl.cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th><abbr title="Usuario ID">ID</abbr></th>\r\n                        <th>Nombre</th>\r\n                        <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="/catalogos/vias-administracion/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/catalogos/vias-administracion/editar/{{item.id}}">{{ item.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="/catalogos/vias-administracion/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/catalogos/vias-administracion/editar/{{item.id}}">{{ item.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},QOK7:function(t,e){t.exports='<div class="modal is-active" >\r\n  <div class="modal-background" (click)="cerrar()"></div>\r\n  <div class="modal-card" style="width:95%; height: 100%;">\r\n   \r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      \r\n                    \r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-search"></i></span> Insumos médicos \r\n          </h1>\r\n          <p class="control is-expanded">\r\n              <input class="input "  type="text" placeholder="Buscar insumo" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n          </p>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrar()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      \r\n      <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n          <br>\r\n          <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n          <br>\r\n          <br>\r\n      </div>\r\n      <table class="table" *ngIf="!cargando" style="font-size: 0.8em;" >\r\n        <thead>\r\n        \r\n            <tr>\r\n            <th></th>\r\n            <th class="is-hidden-mobile">Clave</th>\r\n            <!--th>Generico</th-->\r\n            <!--th class="is-hidden-mobile">Descripción</th-->\r\n            <th>Descripción</th>\r\n            <th style="text-align:center" class="is-hidden-mobile">Grupo(s)</th>\r\n            <th style="text-align:center"><abbr title="Tipo de insumo">Tipo</abbr></th>\r\n            <th style="text-align:left" *ngIf="conPrecios">Precio</th>\r\n            <!--th style="text-align:center"><abbr title="Información">Info</abbr></th-->\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr *ngFor="let item of insumos" class="is-unselectable" [ngClass]="{\'item-seleccionado\': item == insumoSeleccionado, \'is-disabled\': (!conClues && listaAgregados.indexOf(item.clave) >= 0)}" style="cursor: pointer" (click)="seleccionar(item)">\r\n              <td valign="middle">\r\n                <span *ngIf="item != insumoSeleccionado" class="icon is-small" style="color:#999"><i class="fa fa-circle-thin"></i></span>\r\n                <span *ngIf="item == insumoSeleccionado" class="icon is-small" style="color:#00d1b2"><i class="fa fa-check-circle"></i></span>\r\n              </td>                      \r\n              <td class="is-hidden-mobile">{{ item.clave }}</td>\r\n\r\n              <td>\r\n                <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                <!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n                <div style="line-height:1em;">\r\n                  <small>{{ item.descripcion }}</small>\r\n                </div>\r\n                <div style="padding: 0.5em 0 0.5em 0; ">\r\n                  <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                  <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                  <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                  <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                  <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                    <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                    <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                  </span>\r\n                </div>\r\n              </td>\r\n\r\n              <!--td >\r\n                <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                <b>{{ item.generico_nombre }}</b> <br  class="is-hidden-mobile"><small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                \r\n                <div class="is-hidden-tablet" *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                  <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                  <small><i>{{ item.informacion.contenido }} </i></small>\r\n                </div>\r\n                <div class="is-hidden-tablet" *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                  <small>{{ item.descripcion }}</small>\r\n                </div>\r\n                <div class="is-hidden-tablet" style="padding: 0.5em 0 0.5em 0; ">\r\n                  <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                  <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                  <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                  <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                  \r\n                  <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                    <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                    <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                  </span>\r\n                  \r\n                </div>\r\n              </td> \r\n\r\n              <td class="is-hidden-mobile">\r\n                <div *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                  <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                  <small><i>{{ item.informacion.contenido }} </i></small>\r\n                </div>\r\n                <div *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                  <small>{{ item.descripcion }}</small>\r\n                </div>\r\n                <div style="padding: 0.5em 0 0.5em 0; ">\r\n                  <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                  <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                  <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                  <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                  <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                    <span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n                    <span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n                  </span>\r\n                </div>\r\n              </td-->\r\n\r\n              <td style="text-align:center;" class="is-hidden-mobile">\r\n                <div *ngIf="item.generico">\r\n                  <span *ngFor="let grupo of item.generico.grupos">{{grupo.nombre}}<br></span>\r\n                </div>\r\n              </td>\r\n              <td style="text-align:center;">\r\n                <b>\r\n                  <abbr *ngIf="item.tipo == \'ME\'" title="Medicamento">ME</abbr>\r\n                  <abbr *ngIf="item.tipo == \'MC\'" title="Material de curación">MC</abbr>\r\n                  <abbr *ngIf="item.tipo == \'AD\'" title="Auxiliar de diagnóstico">AD</abbr>\r\n                </b>\r\n              </td>\r\n              <td style="text-align:left;" *ngIf="conPrecios">\r\n                <b>\r\n                  <abbr>$ {{item.precio | number:\'1.2-2\'}}</abbr>\r\n                </b>\r\n              </td>\r\n              <!--td style="text-align:center">\r\n                <a (click)="mostrarFichaInformativa($event,item.clave)"><span class="icon"><i class="fa fa-info-circle"></i></span></a>\r\n              </td-->\r\n            </tr>  \r\n            <tr *ngIf="insumos.length == 0 && searchBox.value != \'\'">\r\n                <td colspan="7" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n            </tr>\r\n            <tr *ngIf="insumos.length == 0 && searchBox.value == \'\' ">\r\n                <td colspan="7" style="vertical-align: middle; color:#888;">Por favor escriba en el campo de búsqueda para encontrar insumos.</td>                    \r\n            </tr>      \r\n        </tbody>  \r\n      </table>\r\n    <br>\r\n            \r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n      \r\n      <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente(searchBox.value)" \r\n                (onAnterior)="paginaAnterior(searchBox.value)" \r\n                (onListar)="listar(searchBox.value,$event)" \r\n                *ngIf="total > 0 && total > resultadosPorPagina "></paginacion>\r\n\r\n    \r\n        \r\n      <div class="notification is-dark is-unselectable mensaje-agregar" [ngClass]="{ \'mostrar\': mensajeAgregado.mostrar}"    *ngIf="mensajeAgregado.mostrar" (click)="mensajeAgregado.mostrar=false">\r\n        <span class="icon"><i class="fa fa-check-circle"></i></span> <span>Agregado</span>\r\n      </div>\r\n  \r\n      <form (submit)="enviar($event)" >\r\n        <div class="columns">\r\n          <div class="column" *ngIf="conClues">\r\n           \r\n               <div class="field">\r\n                <label>Unidad médica:</label>\r\n                <p class="control is-expanded">                  \r\n                  <span class="select is-fullwidth">              \r\n                    <select (change)="seleccionarClues($event.target.value)" #cluesSelect [disabled]="listaCluesUtilizadasConInsumo.length == listaClues.length">\r\n                      <option value="-1">Seleccione una clues</option>\r\n                      <option value="TODAS" *ngIf="listaClues.length > 0" [disabled]="listaCluesUtilizadasConInsumo.length > 0">Todas las unidades médicas</option>\r\n                      <option *ngFor="let um of listaClues" value="{{ um.clues }}" [disabled]="listaCluesUtilizadasConInsumo.indexOf(um.clues)>= 0">{{ um.clues }} - {{ um.nombre }}</option>\r\n                    </select>\r\n                  </span>\r\n                </p>\r\n              </div>                   \r\n          </div>\r\n          <div class="column">\r\n           \r\n              <div class="control is-grouped is-pulled-right" >            \r\n                <p class="control is-expanded" [ngClass]=" {\'is-hidden\': !conCantidad }" >\r\n                    <label>Consumo promedio mensual: 0</label>\r\n                    <input class="input is-medium" [disabled]="insumoSeleccionado == null" type="number" placeholder="Cantidad" #cantidadBox id="cantidad" (keyup)="comprobarCantidad(cantidadBox.value)" >\r\n                </p>\r\n                <p class="control">\r\n                    <label>&nbsp;</label>\r\n                    <button [disabled]="(!cantidadValida && conCantidad )|| insumoSeleccionado == null || (conClues && clues == -1)" class="button is-medium is-primary " >\r\n                    <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar</span>\r\n                    </button>\r\n                </p>\r\n              </div>\r\n          </div>\r\n        </div>\r\n        \r\n      </form>\r\n      \r\n\r\n    </footer>\r\n      \r\n    <div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n        <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n        <b>Error:</b> {{ mensajeError.texto }}\r\n    </div>\r\n  </div>\r\n</div>\r\n'},QTrI:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("BkNc"),s=a("Dqrr"),o=(a.n(s),a("W4CS")),c=(a.n(o),a("BFvY")),l=a("QrLZ"),d=a("p5Ee");a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(t,e,a,n,i){this.http=t,this.authService=e,this.bloquearPantallaService=a,this.router=n,this.jwtHelper=i}return t.prototype.get=function(t,e,a){void 0===e&&(e=null),void 0===a&&(a=null);var n=this.request("get",t,e,a);return n},t.prototype.post=function(t,e){return void 0===e&&(e=null),this.request("post",t,null,e)},t.prototype.put=function(t,e,a){return void 0===e&&(e=null),void 0===a&&(a=null),this.request("put",t,e,a)},t.prototype.delete=function(t,e,a){return void 0===e&&(e=null),void 0===a&&(a=null),this.request("delete",t,e)},t.prototype.request=function(t,e,a,n){var r=this;if(void 0===a&&(a=null),void 0===n&&(n={}),null==localStorage.getItem("token"))return null;var o=JSON.parse(localStorage.getItem("server_info")),c=(this.jwtHelper.decodeToken(localStorage.getItem("token")),JSON.parse(localStorage.getItem("usuario"))),l={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")};c.clues_activa&&(l["X-Clues"]=c.clues_activa.clues),c.almacen_activo&&(l["X-Almacen-Id"]=c.almacen_activo.id),c.proveedor_activo&&(l["X-Proveedor-Id"]=c.proveedor_activo.id);var u=new i.Headers(l);return new s.Observable(function(s){if(r.jwtHelper.isTokenExpired(localStorage.getItem("token"))){console.log("El token ha expirado. Comprobando caducidad para renovar.");var l=Number(o.token_refresh_ttl);l=Number.isNaN(l)?0:l;var p=r.jwtHelper.getTokenExpirationDate(localStorage.getItem("token")),m=new Date(p.getTime()+6e4*l),f=new Date;m.getTime()-f.getTime()<=0?(console.log("El token ha caducado completamente y no será posible renovarlo."),console.log("Bloqueando aplicación."),r.bloquearPantallaService.bloquearPantalla()):r.authService.refreshToken().subscribe(function(){console.log("Enviando petición con token renovado.");var o={"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")};if(c.clues_activa&&(o["X-Clues"]=c.clues_activa.clues),c.almacen_activo&&(o["X-Almacen-Id"]=c.almacen_activo.id),c.proveedor_activo&&(o["X-Proveedor-Id"]=c.proveedor_activo.id),u=new i.Headers(o),"get"==t){var l=new i.URLSearchParams;if(null!=n)for(var p in n)n.hasOwnProperty(p)&&l.set(p,n[p]);null==a?r.http.get(d.a.API_URL+"/"+e,{headers:u,search:l}).subscribe(function(t){s.next(t)},function(t){s.error(t)}):r.http.get(d.a.API_URL+"/"+e+"/"+a,{headers:u,search:l}).subscribe(function(t){s.next(t)},function(t){s.error(t)})}"post"==t&&r.http.post(d.a.API_URL+"/"+e,n,{headers:u}).subscribe(function(t){s.next(t)},function(t){s.error(t)}),"put"==t&&null!=a&&r.http.put(d.a.API_URL+"/"+e+"/"+a,n,{headers:u}).subscribe(function(t){s.next(t)},function(t){s.error(t)}),"delete"==t&&null!=a&&r.http.delete(d.a.API_URL+"/"+e+"/"+a,{headers:u}).subscribe(function(t){s.next(t)},function(t){s.error(t)})},function(t){console.log("Token caducado. Se intento renovar pero el servidor no lo permitió, debido a que se superó el tiempo límite."),console.log("Bloqueando aplicación."),r.bloquearPantallaService.bloquearPantalla()})}else{if("get"==t){var g=new i.URLSearchParams;if(null!=n)for(var h in n)n.hasOwnProperty(h)&&g.set(h,n[h]);null==a?r.http.get(d.a.API_URL+"/"+e,{headers:u,search:g}).subscribe(function(t){s.next(t)},function(t){s.error(t)}):r.http.get(d.a.API_URL+"/"+e+"/"+a,{headers:u,search:g}).subscribe(function(t){s.next(t)},function(t){s.error(t)})}"post"==t&&r.http.post(d.a.API_URL+"/"+e,n,{headers:u}).subscribe(function(t){s.next(t)},function(t){s.error(t)}),"put"==t&&null!=a&&r.http.put(d.a.API_URL+"/"+e+"/"+a,n,{headers:u}).subscribe(function(t){s.next(t)},function(t){s.error(t)}),"delete"==t&&null!=a&&r.http.delete(d.a.API_URL+"/"+e+"/"+a,{headers:u}).subscribe(function(t){s.next(t)},function(t){s.error(t)})}})},t}();m=u([a.i(n.Injectable)(),p("design:paramtypes",["function"==typeof(f=void 0!==i.Http&&i.Http)&&f||Object,"function"==typeof(g=void 0!==c.a&&c.a)&&g||Object,"function"==typeof(h=void 0!==l.a&&l.a)&&h||Object,"function"==typeof(v=void 0!==r.a&&r.a)&&v||Object,"function"==typeof(b=void 0!==o.JwtHelper&&o.JwtHelper)&&b||Object])],m);var f,g,h,v,b},Qiv6:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.title=t,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return t.prototype.ngOnInit=function(){this.title.setTitle("Almacén / Laboratorio"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[],this.accesosDirectos=[];var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(e.length>0){for(var a in this.modulos)t:for(var n in e)if(e[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break t}for(var a in this.accesosDirectos)t:for(var n in e)if(e[n]==this.accesosDirectos[a].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[a]);break t}}},t}();o=r([a.i(n.Component)({selector:"app-index-laboratorio",template:a("EFVL"),styles:[a("dYHC")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},QrLZ:function(t,e,a){"use strict";var n=a("/oeL"),i=a("rlar");a.n(i);a.d(e,"a",function(){return s});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=function(){function t(){this.bloquearPantallaSource=new i.Subject,this.pantallaBloqueada$=this.bloquearPantallaSource.asObservable()}return t.prototype.bloquearPantalla=function(){localStorage.removeItem("bloquear_pantalla"),localStorage.setItem("bloquear_pantalla","true"),this.bloquearPantallaSource.next(!0)},t.prototype.desbloquearPantalla=function(){localStorage.removeItem("bloquear_pantalla"),this.bloquearPantallaSource.next(!1)},t}();s=r([a.i(n.Injectable)()],s)},R2l4:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),t.exports=t.exports.toString()},RPvJ:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("bm2B"),o=a("oeHx"),c=a("G8gi"),l=a("f5Uh"),d=a("LLho"),u=a("EYWw"),p=a("Tl3N"),m=a("aCNu"),f=a("g9/z");a.d(e,"a",function(){return h});var g=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},h=function(){function t(){}return t}();h=g([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.FormsModule,o.a,c.a,l.a,d.a,u.a],declarations:[m.a,f.a],providers:[p.a]})],h)},RhIX:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("IO5Q"),d=a("LLho"),u=a("Px6Q"),p=a("F2Xx"),m=a("BFvY"),f=a("KAs4"),g=a("K4kt"),h=a("CWbX"),v=a("oSQj");a.n(v);a.d(e,"a",function(){return y});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=function(){function t(){}return t}();y=b([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,f.a,h.a,v.NguiAutoCompleteModule],declarations:[p.a],providers:[m.a,g.a]})],y)},Rl47:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},SAhN:function(t,e){t.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " \'is-primary\' " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Nuevo Paciente\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <!-- Form Nuevo -->\r\n            <section class="section">\r\n\t            <form name="form" novalidate [formGroup]="paciente"  (ngSubmit)="enviar()">     \r\n\t            \t<section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                        <div class="container">\r\n                          <div class="heading">\r\n                            <h1 class="title">Datos del Paciente</h1>\r\n                          </div>\r\n                        </div>\r\n                      </section>\r\n\t              <div class="control is-grouped">\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Nombre</label>\r\n\t                  <input class="input" autofocus type="text"  placeholder="Nombre" formControlName="nombre">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                \r\n\t              </div>\r\n\t              <div class="control is-grouped">\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Sexo</label>\r\n\t                \t<span class="select is-fullwidth">\r\n\t\t                \t<select  formControlName="sexo"  name="sexo">\r\n\t\t                \t\t<option value="1" selected="selected">MASCULINO</option>\r\n\t\t                \t\t<option value="2">FAMENINO</option>\r\n\t\t                \t</select>\r\n\r\n\t\t                </span>\t\r\n\t                 \t<span class="icon is-small" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">\r\n\t\t                     \t<i class="fa fa-warning"></i>\r\n\t\t                    </span>\r\n\t\t                    <span class="help is-danger" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                \t<label class="label">Teléfono</label>\r\n\t                  <input class="input" type="text" placeholder="Telefono" formControlName="telefono">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                <label class="label">Fecha Nacimiento</label>\r\n\t                  <input class="input" type="text" placeholder="aaaa-mm-dd" formControlName="fecha_nacimiento">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                \t<label class="label">Hora Nacimiento (si aplica)</label>\r\n\t                  <input class="input" type="text" placeholder="HH:mm" formControlName="hora_nacimiento">\r\n\t                  \r\n\t                </p>\r\n\t              </div>\r\n\t              <div class="control is-grouped">\r\n\t              \t\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Domicilio</label>\r\n\t                \t<input class="input" type="text" placeholder="Domicilio" formControlName="domicilio">\r\n\t                \t<span class="icon is-small" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">\r\n\t\t                    <i class="fa fa-warning"></i>\r\n\t\t                </span>\r\n\t\t                <span class="help is-danger" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">Este campo es requerido.</span>\r\n\t                 \r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                <label class="label">Colonia</label>\r\n\t                  <input class="input" type="text" placeholder="Colonia" formControlName="colonia">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t             </div>\r\n\t             <div class="control is-grouped">  \r\n\t             \t\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  <label class="label">Municipio</label> \r\n\t                  <span class="select is-fullwidth">\r\n\t\t                \t<select  formControlName="municipio_id" name="municipio_id" #municipio (change)="cargarLocalidades(municipio.value)">\r\n\t\t                \t\t<option *ngFor="let item of Municipios" value="{{item.id}}">{{ item.nombre }} </option>\r\n\t\t                \t</select>\r\n\t\t                \t\r\n\t\t                </span>\t\r\n\t\t                <span class="icon is-small" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  <label class="label">Localidad</label>\t\r\n\t                  <span class="select is-fullwidth">\r\n\t\t                \t<select formControlName="localidad_id" name="localidad_id">\r\n\t\t                \t\t<option *ngFor="let item of Localidades" value="{{item.id}}">{{ item.nombre }} </option>\r\n\t\t                \t</select>\r\n\t\t                \t\r\n\t\t                </span>\t\r\n\t\t                <span class="icon is-small" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">\r\n\t\t                     \t<i class="fa fa-warning"></i>\r\n\t\t                    </span>\r\n\t\t                <span class="help is-danger" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  \t<label class="label">No Expediente</label>\r\n\t\t                <input class="input" type="text" placeholder="No Expediente" formControlName="no_expediente">\r\n\t                    <span class="icon is-small" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">Este campo es requerido.</span>\r\n\t\t                \r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  \t<label class="label">No Afililación</label>\r\n\t\t                <input class="input" type="text" placeholder="No Afiliación" formControlName="no_afiliacion">\r\n\t                    <span class="icon is-small" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">Este campo es requerido.</span>\r\n\t\t                \r\n\t                </p>\r\n\t              </div>\r\n\t              <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Resposable Conocido</label>\r\n                        <span class="select is-fullwidth">\r\n                            <select formControlName="responsableconocido" name="responsableconocido" (change)="responsable()">\r\n                                <option value="1">SI</option>\r\n                                <option value="2">NO</option>\r\n                            </select>\r\n\r\n                        </span> \r\n                    </p>\r\n                  </div>\r\n                  <div [hidden]="verFormResponsable">\r\n                      <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                            <div class="container">\r\n                              <div class="heading">\r\n                                <h1 class="title">Datos del Responsable</h1>\r\n                              </div>\r\n                            </div>\r\n                        </section>  \r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Nombre</label>\r\n                          <input class="input" autofocus type="text"  placeholder="Nombre Responsable" formControlName="nombre_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Patentesco</label>\r\n                               <input class="input" autofocus type="text"  placeholder="Parentesco" formControlName="parentesco">\r\n                              <span class="icon is-small" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                              </span>\r\n                              <span class="help is-danger" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">Este campo es requerido.</span>\r\n\r\n                        </p>\r\n                         <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Domicilio</label>\r\n                            <input class="input" type="text" placeholder="Domicilio Responsable" formControlName="domicilio_responsable">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">Este campo es requerido.</span>\r\n                         \r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">Teléfono</label>\r\n                          <input class="input" type="text" placeholder="Telefono Responsable" formControlName="telefono_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                     \r\n                    </div>    \r\n\t              <br><br>\r\n\t              <div class="control is-grouped">\r\n\t                <p class="control">\r\n\t                  <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="paciente.invalid">Guardar</button>\r\n\t                </p>\r\n\t                \r\n\t                <p class="control">\r\n\t                  <a class="button is-white" (click)="regresar()" >Regresar</a>\r\n\t                </p>\r\n\t              </div>\r\n\t          </form>\r\n\t        </section>  \r\n            <!--  Fin Nuevo  -->\r\n        </div>\r\n    </div>\r\n</div>        \r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <p><b>Error:</b> {{ mensajeError.texto }}<br></p>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-warning" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeAdvertencia.mostrar">\r\n    <button class="delete" (click)="mensajeAdvertencia.mostrar = false"></button>        \r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-warning"></i></span> <span>{{ mensajeAdvertencia.texto }}</span></p>\r\n    \r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeAdvertencia.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div> '},SCx0:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},SgEj:function(t,e){t.exports='<formulario #ctrl URL="movimientos" titulo="Entrada  de almacén" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Entrada  de almacén\'" [icono]="\'assets/icono-entradas.svg\'" [url]="\'/almacen/entradas-estandar\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()">\r\n    <div class="contenedor columns " style="height:100%">\r\n        <div class="column is-one-third" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <h1 *ngIf="!tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> {{ctrl.moduloTitulo}}\r\n                    </h1>\r\n                    <h1 *ngIf="tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> Folio {{ctrl.id}}\r\n                    </h1>\r\n\r\n\r\n                </section>\r\n                \r\n                <div style="padding: 1em;">\r\n                    <h3 class="title">\r\n                        <i class="fa fa-file"></i>\r\n                         Datos del movimiento\r\n                    </h3>\r\n                    <div >\r\n                        <div class="field">\r\n                            <label class="label">Fecha del movimiento:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n\r\n                                <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_movimiento\' formControlName="fecha_movimiento" ngui-datetime-picker\r\n                                    [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-danger\': ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched}"\r\n                                    placeholder="YYYY-MM-DD" />\r\n\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Observaciones:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <textarea class="textarea" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched}"\r\n                                    placeholder="Observaciones" formControlName="observaciones"></textarea>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="control" *ngIf="mostrarCancelado">\r\n                            <!-- *ngIf -->\r\n                            <div class="field">\r\n                                <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                    <input type="checkbox" id="cancelado" class="styled" [checked]="ctrl.dato.get(\'cancelado\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'cancelado\').patchValue(ctrl.dato.get(\'cancelado\').value == \'1\' ? \'0\' : \'1\')">\r\n                                    <label for="cancelado">  Cancelado\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="field">\r\n                                <label class="label">Observaciones de cancelación:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <textarea class="textarea" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched}"\r\n                                        placeholder="Observaciones de cancelacion" formControlName="observaciones_cancelacion"></textarea>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                   <!-- <hr id="catalogos" (click)="ctrl.cargarCatalogo(\'servicios\', \'servicios\'); "> -->\r\n\r\n                    <div >\r\n                        <nav class="panel" formGroupName="movimiento_metadato">\r\n\r\n                            <div class="field">\r\n                                <label class="label">Persona que recibe:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched}"\r\n                                        placeholder="Persona que recibe" formControlName="persona_recibe">\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </nav>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- apartado de insumos -->\r\n        <div class="column" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <div class="hero-body">\r\n                        <nav class="level">\r\n                            <div class="level-left"></div>\r\n                            <!-- Right side -->\r\n                            <div class="level-right">\r\n                                <p class="level-item"><a class="button is-primary" (click)="ctrl.regresar()">Regresar</a></p>\r\n                                <p class="level-item" *ngIf="tieneid"><a class="button is-primary" routerLink="/almacen/entradas-estandar/nuevo" *ngIf="!ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nueva entrada</span></a></p>\r\n                                <p class="level-item" *ngIf="tieneid"><a *ngIf="tieneid" class="button is-primary" (click)="imprimir()"><span class="icon"><i class="fa fa-print"></i></span></a></p>\r\n                                <p class="level-item" *ngIf="!tieneid">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid"> <span class="icon"><i class="fa fa-floppy-o" aria-hidden="true"></i></span> &nbsp; Guardar</button>\r\n                                </p>\r\n                                <p class="level-item"><a class="button is-primary" title="Actualizar" (click)="ctrl.cargarDatos();"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                                <p class="level-item">&nbsp;</p>\r\n                            </div>\r\n                        </nav>\r\n                        <div class="container is-fluid">\r\n                            <h1 class="title">\r\n                                <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                                <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Insumos\r\n                            </h1>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                    <br>\r\n                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                </div>\r\n                <section class="section">\r\n\r\n                    <div class="field has-addons has-addons-centered" *ngIf="!tieneid">\r\n\r\n                        <p class="control">\r\n                            <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" id="buscarInsumo" value-property-name="clave"\r\n                                display-property-name="nombre" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                                (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                                type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n\r\n                        </p>\r\n\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div formArrayName="insumos">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos.controls; let i=index" [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(230, 230, 232, 0.44)\' : \'\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <a *ngIf="!tieneid" class="is-danger" title="Quitar este elemento de la lista" style="float:right" (click)="ctrl.quitar_form_array(ctrl.dato.controls.insumos,i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                        <p>\r\n                                            <strong>\r\n                                                <span style="color:cornflowerblue">\r\n                                                    Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }} \r\n                                                </span>\r\n                                                Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.nombre.value}}\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 1"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 0"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value == 1"><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                    </div>\r\n                                   <section >\r\n                                        <table *ngIf="tieneid" class="table is-narrow is-bordered is-striped">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Lote</th>\r\n                                                    <th>Caducidad</th>\r\n                                                    <th>Codigo de barras</th>\r\n                                                    <th *ngIf="!tieneid">Existencia</th>\r\n                                                    <th>Cantidad</th>\r\n                                                    <th *ngIf="!tieneid"></th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody formArrayName="lotes">\r\n                                                <tr *ngFor="let val of ctrl.dato.controls.insumos.controls[i].controls.lotes.controls;  let i2 = index;">\r\n                                                    <td>{{val.value.lote}}</td>\r\n                                                    <td>{{val.value.fecha_caducidad}}</td>\r\n                                                    <td>{{val.value.codigo_barras}}</td>\r\n                                                    <td *ngIf="!tieneid">{{val.value.existencia}}</td>\r\n                                                    <td [formGroupName]="i2">\r\n                                                        {{val.value.cantidad}}\r\n                                                    </td>\r\n                                                    <td *ngIf="!tieneid">\r\n                                                        <a class="is-danger" title="Quitar este lote" (click)="quitar_lote_insumo(i, val.value, i2)">\r\n                                                            <span class="icon">\r\n                                                                <i class="fa fa-trash-o"></i>\r\n                                                            </span>\r\n                                                        </a>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </section>\r\n                                    <div *ngIf="!tieneid"  class="level-left">\r\n                                        <div class="columns is-flex-desktop" style="width: 100%">\r\n                                            <div class="column is-3">\r\n                                                <p class="control is-expanded">\r\n                                                <label class="label">Lote:</label>\r\n                                                    <input type="text" class="input" formControlName="lote" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.lote.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.lote.touched}">\r\n                                                </p>\r\n                                            </div>                       \r\n                                            <div class="column is-4">\r\n                                                <p class="control is-expanded">\r\n                                                    <label class="label">Caducidad:</label>\r\n                                                    <input type="date" class="input" formControlName="fecha_caducidad" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.fecha_caducidad.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.fecha_caducidad.touched}">\r\n                                                </p>\r\n                                            </div>                          \r\n                                            <div class="column is-3">\r\n                                                <p class="control is-expanded">\r\n                                                    <label class="label">Codigo de barras:</label>\r\n                                                    <input type="text" class="input" formControlName="codigo_barras">\r\n                                                </p>\r\n                                            </div>    \r\n                                            <div class="column is-2">                                                \r\n                                                <p class="control is-expanded">\r\n                                                    <label class="label">Cantidad:</label>\r\n                                                    <input type="number" class="input" formControlName="cantidad" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad.touched}">\r\n                                                </p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n'},SoTr:function(t,e){t.exports='<listar #ctrl URL="movimientos?tipo=5" titulo="Salida Receta"></listar>\r\n<menu-farmacia [modulo]="\'Salidas por recetas\'" [icono]="\'assets/icono-salidas.svg\'" [url]="\'/almacen/salidas-recetas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <nav class="level">\r\n                        <div class="level-left"></div>\r\n                        <!-- Right side -->\r\n                        <div class="level-right">\r\n                            <p class="level-item"><a class="button is-dark is-medium" routerLink="nuevo" *ngIf="ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nueva receta</span></a></p>\r\n                            <p class="level-item"><a class="button is-primary is-medium" routerLink="nuevo" *ngIf="!ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nueva receta</span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                            \r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item">&nbsp;</p>\r\n                        </div>\r\n                    </nav> \r\n                    <div class="container is-fluid">\r\n\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Salidas por recetas\r\n                            </h1>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <span id="exportable">\r\n                <table class="table is-responsive" *ngIf="!ctrl.cargando">\r\n                    <thead>\r\n                        <tr>\r\n                            <th><abbr title="Folio de receta">Folio</abbr></th>\r\n                            <th>Turno</th>\r\n                            <th>Usuario</th>\r\n                            <th>Estatus</th>\r\n                            <th style=" text-align: center;">Creado</th>\r\n                            <th style=" text-align: center;">Actualizado</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody *ngIf="!ctrl.busquedaActivada && ctrl.dato;">\r\n                        <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                            <th *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                            <td *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.movimiento_metadato.turno.nombre }} </a></td>\r\n                            <td *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>\r\n                            <td *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.status }} </a></td>\r\n                            <td *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                            <td *ngIf="(i+1)<ctrl.dato.length" style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.updated_at | date:\'medium\'}} </a></td>\r\n\r\n                        </tr>\r\n                        <tr *ngIf="ctrl.dato.length == 0">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                        </tr>\r\n                    </tbody>\r\n                    <tbody *ngIf="ctrl.busquedaActivada  && ctrl.dato">\r\n                        <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                            <th style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                            <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.movimiento_metadato.turno.nombre }} </a></td>\r\n                            <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>\r\n                            <td style="vertical-align: middle;"><a routerLink="/almacen/salidas-recetas/ver/{{item.id}}">{{ item.status }} </a></td>\r\n                            <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                            <td style="vertical-align: middle; text-align: center;"><a routerLink="/almacen/salidas-estandar/ver/{{item.id}}">{{ item.updated_at | date:\'medium\'}} </a></td>\r\n\r\n                        </tr>\r\n\r\n                        <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </span>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},SsYK:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},Sxab:function(t,e){t.exports='<menu-farmacia [modulo]="\'Entregas\'" [icono]="\'assets/icono-entregas.svg\'" [url]="\'/almacen/entregas\'"></menu-farmacia>\r\n\r\n\r\n\r\n<div class="is-fullwidth has-text-centered" style="padding-top:70px;" *ngIf="cargando">\r\n  <br>\r\n  <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n  <br>\r\n  <br>\r\n</div>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile is-parent is-12 ">\r\n      <div class="tile is-child notification is-dark">\r\n        \r\n        <div class="columns">\r\n          <div class="column" >\r\n            <div style="padding:1em;">Pedido no. <strong style="color:#FFF;">{{ id }}</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lotes: {{ lotesSurtidos.length  }} / {{ pedido.lista.length }}</div>\r\n          </div>\r\n          <div class="column is-4" style="text-align:center; ">\r\n            <div style="margin:1em;">\r\n            <a  class="button is-primary" style="width:45%; margin-right:5%;" (click)="imprimir()"> <span class="icon"><i class="fa fa-print"></i></span> <span>Imprimir</span></a>\r\n            <a  class="button is-white"  style="width:45%"  routerLink="/almacen/entregas/"> Regresar</a>\r\n            </div>\r\n          </div>\r\n        </div>       \r\n      </div>\r\n    </div>\r\n    <div class="tile">\r\n      <div class="tile is-parent ">\r\n        <div class="tile is-child notification is-white" >\r\n          <div class="contenedor-tabla" >\r\n                      \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em; ">\r\n              <thead>\r\n                  <tr  [ngClass]="{ \'filtro\': pedido.filtro.activo}">\r\n                    <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                    <th>\r\n                      <p class="control is-expanded">\r\n                        <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                        <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])">\r\n                      </p>\r\n                    </th>  \r\n                    \r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Surtido">Surt.</abbr></th>\r\n                    <th  style="width:21px !important; text-align: center; vertical-align: middle;">Surtido</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                <tr class="item" *ngFor="let item of pedido.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                    <div class="item-detalle">\r\n                      <div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }}</th>                                  \r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>      \r\n              </tbody>\r\n              <tbody *ngIf="pedido.filtro.activo">\r\n                <tr class="item"  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br>\r\n                    <div class="item-detalle">\r\n                      <div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="item.es_causes" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="!item.es_causes" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">0</th>                                  \r\n                  <td style="width:21px !important; text-align:center; color: gray"><span class="icon"><i class="fa fa-minus-circle"></i></span></td>\r\n                </tr>   \r\n              </tbody>              \r\n            </table>\r\n            <paginacion style=" width:100%; height:auto; bottom:0; left:0px; background:#FFF;"\r\n                [total]="pedido.lista.length" \r\n                [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.paginacion.indice"\r\n                (onSiguiente)="pedido.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.paginaAnterior(); limpiarStock();" \r\n                (onListar)="pedido.listar($event);limpiarStock();" \r\n                *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n\r\n            <paginacion \r\n                [total]="pedido.filtro.lista.length" \r\n                [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                (onSiguiente)="pedido.filtro.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.filtro.paginaAnterior();  limpiarStock();" \r\n                (onListar)="pedido.filtro.listar($event); limpiarStock();" \r\n                *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n\r\n\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n      <div class="tile is-parent  ">\r\n        <div class="tile is-child  notification is-white">\r\n          <div class="contenedor-tabla">\r\n            <table class="table" *ngIf="!cargando && itemSeleccionado != null" style="font-size: 0.8em;" >\r\n              <thead>\r\n                  <tr style="background: #00d1b2;">\r\n                    <th style="color:#FFF !important;">Código</th>\r\n                    <th style="color:#FFF !important;">Marca</th>\r\n                    <th style="color:#FFF !important;">Lote</th>\r\n                    <th style="color:#FFF !important;">Caducidad</th>\r\n                    <th style="color:#FFF !important;"><abbr title="Cantidad">Cant.</abbr></th>  \r\n                    <th></th>              \r\n                  </tr>\r\n              </thead>\r\n              <tfoot *ngIf="itemSeleccionado.totalStockAsignado>0">\r\n                <tr>\r\n                  <th colspan="4" style="text-align:right">\r\n                    <span *ngIf="itemSeleccionado.totalStockAsignado == itemSeleccionado.cantidad"><span class="icon is-small" ><i class="fa fa-check-circle"></i></span> <span>Completo &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span> Total \r\n                  </th>\r\n                  <td style="text-align:center">{{ itemSeleccionado.totalStockAsignado || 0 }} / {{ itemSeleccionado.cantidad }}</td>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                  <tr  class="is-unselectable" *ngFor="let item of itemSeleccionado.listaStockAsignado">\r\n                                      \r\n                    <td>{{ item.codigo_barras}}</td>\r\n                    <td>{{ item.marca.nombre }}</td>\r\n                    <td>{{ item.lote }}</td>\r\n                    <td>{{ item.fecha_caducidad | date:\'dd/MM/y\' }}</td>\r\n                    <td>{{ item.cantidad }}</td>\r\n                    \r\n                  </tr>\r\n                  <tr *ngIf="itemSeleccionado.totalStockAsignado==0">\r\n                    <td colspan="5">No se entregó este insumo</td>\r\n                  </tr>\r\n                  \r\n                      \r\n              </tbody>  \r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n  </div>\r\n</div>\r\n  \r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n'},Sycf:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"td.causes{background-color:#cdff8c}td.no-causes{background-color:#ffa838}td.material-curacion{background-color:#ffff7c}.farmacia{color:#a8c0ff}.sin-surtir{color:#ddd}.surtiendo{color:#3273dc}.surtido{color:#4aba53}.expirado{color:#e8dd14}.cancelado{color:red}.descargado{background-color:#00d1b2}.color_tag_descargas{background-color:#fff}",""]),t.exports=t.exports.toString()},TDv5:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={}}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t}();i([a.i(n.Input)(),r("design:type",String)],s.prototype,"modulo",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"icono",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"url",void 0),s=i([a.i(n.Component)({selector:"menu-catalogo",template:a("Ahyj"),styles:[a("iHsF")]}),r("design:paramtypes",[])],s)},TFNY:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.ngOnInit=function(){},t}();s=i([a.i(n.Component)({selector:"app-pedidos",template:a("LyDy"),styles:[a("itfL")]}),r("design:paramtypes",[])],s)},TTuc:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"TU+8":function(t,e,a){"use strict";var n=a("/wY1"),i=(a.n(n),a("+iEx")),r=(a.n(i),a("eFQL"));a.n(r)},TVUb:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("Qiv6"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"laboratorio",component:r.a,canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},TYaA:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("TVUb"),o=a("oeHx"),c=a("G8gi"),l=a("f5Uh"),d=a("Px6Q"),u=a("Qiv6"),p=a("zsqq");a.d(e,"a",function(){return f});var m=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},f=function(){function t(){}return t}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},"Td+/":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("cEsc"),s=a("08MF"),o=a("ezan"),c=a("sXGB"),l=a("D9tw");a.d(e,"a",function(){return p});var d=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},u=[{path:"almacen/pedidos",redirectTo:"/almacen/pedidos/todos",pathMatch:"full"},{path:"almacen/pedidos",children:[{path:"todos",component:r.a},{path:"borradores",component:r.a},{path:"en-transito",component:r.a},{path:"por-surtir",component:r.a},{path:"finalizados",component:r.a},{path:"finalizados/completos",component:r.a},{path:"finalizados/incompletos",component:r.a},{path:"finalizados/cancelados",component:r.a},{path:"expirados",component:r.a},{path:"expirados-cancelados",component:r.a},{path:"farmacia-subrogada",component:r.a},{path:"nuevo",component:s.a},{path:"editar/:id",component:s.a},{path:"ver/:id",component:o.a},{path:"recepcion/:id",component:c.a}],canActivate:[l.a]}],p=function(){function t(){}return t}();p=d([a.i(n.NgModule)({imports:[i.b.forChild(u)],exports:[i.b],providers:[]})],p)},TeDg:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return r});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=function(){function t(){}return t}();r=i([a.i(n.Component)({selector:"vias-administracion-lista",template:a("QDx8")})],r)},Tl3N:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.jurisdicciones=function(){return this.jwtRequest.get("jurisdicciones").map(function(t){return t.json().data})},t.prototype.abasto=function(t){return void 0===t&&(t={}),this.jwtRequest.get("abasto",null,t).map(function(t){return t.json().data})},t.prototype.pedidos=function(t){return void 0===t&&(t={}),this.jwtRequest.get("pedidos-administrador-proveedores",null,t).map(function(t){return t.json().data})},t.prototype.verPedido=function(t){return this.jwtRequest.get("pedidos-administrador-proveedores-pedido",t,{}).map(function(t){return t.json().data})},t.prototype.verArchivos=function(t){return this.jwtRequest.get("repository",t,{}).map(function(t){return t.json().data})},t.prototype.eliminarArchivos=function(t){return this.jwtRequest.delete("repository",t,{}).map(function(t){return t.json().data})},t.prototype.descargarArchivos=function(t){return this.jwtRequest.get("repository-download",t,{}).map(function(t){return 0})},t.prototype.presupuesto=function(t){return this.jwtRequest.get("presupuesto-pedidos-administrador-proveedores",null,t).map(function(t){return t.json()})},t}();c=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(l=void 0!==i.Http&&i.Http)&&l||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],c);var l,d},TvXF:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("fc+i"),o=a("BkNc"),c=a("BFvY"),l=a("wW11"),d=a("ajxl"),u=a("gHRf");a.d(e,"a",function(){return f});var p=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},m=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,a,n,i,r,s){this.router=t,this.title=e,this.authService=a,this.location=n,this.rolesService=i,this.usuariosService=r,this.fb=s,this.usuarioRepetido=!1,this.usuarioInvalido=!1,this.cargando=!1,this.cargandoRoles=!1,this.cargandoUnidadesMedicas=!1,this.roles=[],this.unidadesMedicas=[],this.mensajeError=new u.a,this.mensajeAdvertencia=new u.a,this.mensajeExito=new u.a}return t.prototype.ngOnInit=function(){this.title.setTitle("Nuevo usuario / Panel de control"),this.cargarRoles(),this.cargarUnidadesMedicas(),this.usuario=this.fb.group({nombre:["",[r.Validators.required]],apellidos:["",[r.Validators.required]],id:["",[r.Validators.required]],password:["",[r.Validators.required]],confirmarPassword:["",[r.Validators.required]],avatar:["avatar-circled-user-male"],roles:[[],[r.Validators.required]],unidades_medicas:[[]],almacenes:[[]]})},t.prototype.enviar=function(){var t=this;if(this.usuario.get("password").value!=this.usuario.get("confirmarPassword").value)return!1;this.cargando=!0,this.usuariosService.crear(this.usuario.value).subscribe(function(e){t.cargando=!1,console.log("Usuario creado."),t.location.back()},function(e){t.cargando=!1,t.mensajeError=new u.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{var a=e.json();if(401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status){t.mensajeError.texto="Por favor verfique los campos marcados en rojo.",t.usuarioRepetido=!1,t.usuarioInvalido=!1;for(var n in a.error)for(var i in a.error[n])"id"==n&&"unique"==a.error[n][i]&&(t.usuarioRepetido=!0),"id"==n&&"email"==a.error[n][i]&&(t.usuarioInvalido=!0)}}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.cargarUnidadesMedicas=function(){var t=this;this.cargandoUnidadesMedicas=!0,this.usuariosService.listaUnidadesMedicas().subscribe(function(e){t.unidadesMedicas=e,t.cargandoUnidadesMedicas=!1,console.log("Unidades Médicas cargadas")},function(e){t.cargandoUnidadesMedicas=!1})},t.prototype.cargarRoles=function(){var t=this;this.cargandoRoles=!0,this.rolesService.lista().subscribe(function(e){t.cargandoRoles=!1,t.roles=e,console.log("Roles cargados."),0==t.roles.length&&(t.mensajeAdvertencia=new u.a(!0),t.mensajeAdvertencia.texto="\n            No hay roles registrados en el sistema, póngase en contacto con un administrador.",t.mensajeAdvertencia.mostrar=!0)},function(e){t.cargandoRoles=!1,t.mensajeError=new u.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para ver los roles."),500==e.status&&(t.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los roles")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los roles":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los roles"}})},t.prototype.regresar=function(){this.location.back()},t}();f=p([a.i(n.Component)({selector:"app-nuevo",template:a("tEi8"),styles:[a("5bJP")]}),m("design:paramtypes",["function"==typeof(g=void 0!==o.a&&o.a)&&g||Object,"function"==typeof(h=void 0!==s.b&&s.b)&&h||Object,"function"==typeof(v=void 0!==c.a&&c.a)&&v||Object,"function"==typeof(b=void 0!==i.Location&&i.Location)&&b||Object,"function"==typeof(y=void 0!==l.a&&l.a)&&y||Object,"function"==typeof(_=void 0!==d.a&&d.a)&&_||Object,"function"==typeof(x=void 0!==r.FormBuilder&&r.FormBuilder)&&x||Object])],f);var g,h,v,b,y,_,x},U94m:function(t,e){t.exports='<div class="modal" [ngClass]="{\'is-active\': mostrar}">\r\n  <div class="modal-background" style="background:rgba(0,0,0,0.9)!important;"></div>\r\n  <div class="modal-content">\r\n    <div class="card" style=" border-radius:1em; overflow: hidden">\r\n      <div class="card-image" >\r\n          <figure class="image " style="border-radius: 1em 1em 0em 0em; overflow: hidden;">\r\n              <img src="assets/bg-lockscreen_salud.svg" alt="Image">\r\n          </figure>\r\n          \r\n          <button class="button is-primary is-inverted"  (click)="logout()" style="position:absolute; top:1em; right:1em;"><span class="icon"><i class="fa fa-sign-out"></i></span> <span>Salir</span></button>\r\n      </div>\r\n      <div class="card-content has-text-centered">\r\n          <form name="form" (ngSubmit)="!loading && login()">\r\n            <div class="notification is-danger" *ngIf="mostrarMensaje">\r\n                <a class="delete" (click)="mostrarMensaje = false"></a>\r\n                <b>Error:</b> {{ mensaje }}\r\n            </div>\r\n            <nav class="level">\r\n              <div class="level-item has-text-centered">\r\n                <figure class="image is-128x128" >\r\n                  <img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar">\r\n                  <span class="icon is-large" style="position: absolute; top: 0px; right:0px;"><i class="fa fa-lock"></i></span>\r\n                </figure>\r\n              </div>\r\n            </nav>\r\n            <h1 class="title">{{ usuario.nombre }} {{ usuario.apellidos }}</h1>\r\n            <h2 class="subtitle"><span class="icon"><i class="fa fa-user-circle"></i></span> {{usuario.id}}</h2>\r\n            <p class="control has-icon">\r\n                <input class="input is-medium" [ngClass]="{\'is-danger\': mensaje}" type="password" name="password" id="password" placeholder="Contraseña" [(ngModel)]="credenciales.password">\r\n                <span class="icon is-small">\r\n                <i class="fa fa-lock"></i>\r\n                </span>\r\n            </p>\r\n            <button class="button is-primary is-medium is-fullwidth" [ngClass]="{\'is-loading\': loading}"><span class="icon"><i class="fa fa-unlock"></i></span><span>Desbloquear</span></button>\r\n          </form>\r\n      </div>\r\n      \r\n    </div>\r\n    \r\n  </div>\r\n</div>'},UNns:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{cursor:pointer}.item.seleccionado{background:#ccc}.item.seleccionado .icon{color:#fff!important}.item.seleccionado .item-detalle{display:inherit}.item .item-detalle{display:none}.item.asignado{background:#ddd;color:#777}tr.filtro td,tr.filtro th{color:#fff;background:#4a4a4a!important}.contenedor-tabla{overflow:auto;width:100%;height:99%!important;display:block;position:absolute;left:0;top:0}.contenedor-tabla table{border-radius:3px}@media screen and (max-width:768px){.contenedor-tabla{position:relative}.tile.notification{padding:0!important}}",""]),t.exports=t.exports.toString()},UOMw:function(t,e){t.exports='<avance-menu></avance-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Lista de Temas / Avances\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                        \t<a class="button is-medium is-primary is-inverted " (click)=\'regresar()\'>\r\n                            <span>Regresar</span>\r\n                            </a>\r\n                        </p>\r\n                        \r\n                        <p class="control"  *ngIf="privilegio_usuario">\r\n                            <a class="button is-medium is-info"  (click)=\'showAgregarUsuario=!showAgregarUsuario\'>\r\n                            <span>Agregar Usuario</span>\r\n                            </a>\r\n                        </p>\r\n                        <p class="control">\r\n                            \r\n                            <a class="button is-medium is-primary is-inverted " (click)=\'showAgregarAvance=!showAgregarAvance\'>\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo Avance</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th>VISUALIZAR</th>\r\n                    <th><abbr>NOMBRE</abbr></th>\r\n                    <th>COMENTARIO</th>\r\n                    <th>% DE AVANCE</th>\r\n                    <th>CREADO  </th>\r\n                    <th></th>\r\n                    <th></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of detalles; let i=index">\r\n                        <td >\r\n                            <button type="button" class="button  is-primary" style="margin-right: 5px;" (click)=\'view(item.id)\'>\r\n                            \t<span class="icon"><i class="fa fa-eye"></i></span>\r\n                            </button>\r\n                        </td>    \r\n                        <th style="vertical-align: middle; cursor:pointer" (click)=\'view(item.id)\'><a>{{ item.nombre }}.{{ item.extension }}</a></th>\r\n                        <td style="vertical-align: middle; cursor:pointer" (click)=\'view(item.id)\'><a>{{ item.comentario }}</a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer" (click)=\'view(item.id)\'><a>{{ item.porcentaje }} %</a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer" (click)=\'view(item.id)\'><a>{{ item.created_at }} </a></td>\r\n                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered" *ngIf="!item.deleted_at">\r\n                            <button type="button" class="button  is-primary" (click)=\'descargar(item.id)\'>\r\n                            \t<span class="icon"><i class="fa fa-download"></i></span>\r\n                            </button>\r\n                            \r\n                        </td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"  *ngIf="!item.deleted_at">\r\n                            <button type="button" class="button  is-primary" (click)=\'eliminar_avance(item.id)\'>\r\n                                <span class="icon"><i class="fa fa-close"></i></span>\r\n                            </button>\r\n                            \r\n                        </td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered" *ngIf="item.deleted_at"></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered" *ngIf="item.deleted_at">{{ item.deleted_at }}</td>\r\n                        \r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="detalles.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                     <tr *ngFor="let item of resultadosBusqueda; let i=index" id=\'escala\'>\r\n                       <td >\r\n                            <button type="button" class="button  is-primary" style="margin-right: 5px;" (click)=\'view(item.id)\'>\r\n                            \t<span class="icon"><i class="fa fa-eye"></i></span>\r\n                            </button>\r\n                        </td>    \r\n                        <th style="vertical-align: middle; cursor:pointer" (click)=\'view(item.id)\'><a>{{ item.nombre }}.{{ item.extension }}</a></th>\r\n                        <td style="vertical-align: middle; cursor:pointer" (click)=\'view(item.id)\'><a>{{ item.comentario }}</a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer" (click)=\'view(item.id)\'><a>{{ item.porcentaje }} %</a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer" (click)=\'view(item.id)\'><a>{{ item.created_at }} </a></td>\r\n                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered" *ngIf="!item.deleted_at">\r\n                            <button type="button" class="button  is-primary" (click)=\'descargar(item.id)\'>\r\n                                <span class="icon"><i class="fa fa-download"></i></span>\r\n                            </button>\r\n                            \r\n                        </td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"  *ngIf="!item.deleted_at">\r\n                            <button type="button" class="button  is-primary" (click)=\'eliminar_avance(item.id)\'>\r\n                                <span class="icon"><i class="fa fa-close"></i></span>\r\n                            </button>\r\n                            \r\n                        </td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered" *ngIf="item.deleted_at"></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered" *ngIf="item.deleted_at">{{ item.deleted_at }}</td>\r\n                        \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n    </div>        \r\n   \r\n</div>\r\n<div id="modal-temas" class="modal is-active" [ngClass]="{\'is-active\': showAgregarAvance}">\r\n  <div class="modal-background"  (click)="showDialog = !showAgregarAvance"></div>\r\n  <div class="modal-card" style="width:60%; height: auto;">\r\n    <header class="modal-card-head" style="background-color: #00d1b2" >\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-user"></i></span> Agregar Avance\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="showAgregarAvance = !showAgregarAvance"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="section">\r\n        \r\n        <form name="form" [formGroup]="avance"   (ngSubmit)="upload()" >  \r\n            <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                <div class="container">\r\n                  <div class="heading">\r\n                    <h1 class="title">Avances</h1>\r\n                  </div>\r\n                </div>\r\n            </section> \r\n              <div class="control is-grouped">\r\n\t\t\t\t\t<div class="control is-grouped">\r\n\t\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t\t                    <label class="label">Subir Archivo </label>\r\n\t\t                  \t<input type="file" (change)="fileChanged($event)" formControlName="archivo" accept="application/pdf">\r\n\t\t                  \t\r\n\t\t                </p>\r\n\t              </div>\r\n                      \r\n              </div>\r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded  has-icon has-icon-right">\r\n                    <label class="label">Procentaje</label>\r\n                  \t<input class="input"  type="text"  placeholder="Porcentaje"  formControlName="porcentaje">\r\n                  \t<span class="icon is-small" *ngIf="avance.get(\'porcentaje\').hasError(\'required\') && avance.get(\'porcentaje\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                </span>\r\n\t                <span class="help is-danger" *ngIf="avance.get(\'porcentaje\').hasError(\'required\') && avance.get(\'porcentaje\').touched">Este campo es requerido.</span>\r\n                </p>\r\n                \r\n              </div>\r\n              \r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded  has-icon has-icon-right">\r\n                    <label class="label">Comentario</label>\r\n                  \t<textarea  class="textarea"  placeholder="Comentario" formControlName="comentario"></textarea>\r\n                  \t<span class="icon is-small" *ngIf="avance.get(\'comentario\').hasError(\'required\') && avance.get(\'comentario\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                </span>\r\n\t                <span class="help is-danger" *ngIf="avance.get(\'comentario\').hasError(\'required\') && avance.get(\'comentario\').touched">Este campo es requerido.</span>\r\n                </p>\r\n                \r\n              </div>\r\n            \r\n          <br>\r\n          <div class="control is-grouped">\r\n            <p class="control">\r\n            <button type="submit" class="button is-primary" name="enviar" [ngClass]="{\'is-loading\': cargando}"  [disabled]="avance.invalid">Subir Archivo</button>\r\n               \r\n            </p>\r\n          </div>\r\n      </form>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<div id="modal-usuario" class="modal is-active" [ngClass]="{\'is-active\': showAgregarUsuario}">\r\n  <div class="modal-background"  (click)="showDialog = !showAgregarUsuario"></div>\r\n  <div class="modal-card" style="width:60%; height: auto;">\r\n    <header class="modal-card-head" style="background-color: #00d1b2" >\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-user"></i></span> Usuarios / Privilegios\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="showAgregarUsuario = !showAgregarUsuario"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n\r\n      <div class="modal-content" style="background-color: #FFF; width: 101%">\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <form name="form" [formGroup]="usuario_form"   (ngSubmit)="agregar_usuario()" >  \r\n            <div class="columns" style="width: 100%; background-color: #EFEFEF; padding: 10px">\r\n              <div class="column">\r\n                 <div class="control is-grouped">\r\n                  <select class="select" formControlName="usuario_id">\r\n                    <option  *ngFor="let item of usuarios; let i=index" value=\'{{item.id}}\'>{{ item.nombre }} {{ item.apellidos }} - {{ item.id }}</option>\r\n                   </select>\r\n                    <span class="icon is-small" *ngIf="usuario_form.get(\'usuario_id\').hasError(\'required\') && usuario_form.get(\'usuario_id\').touched">\r\n                        <i class="fa fa-warning"></i>\r\n                    </span>\r\n                    <span class="help is-danger" *ngIf="usuario_form.get(\'usuario_id\').hasError(\'required\') && usuario_form.get(\'usuario_id\').touched">Este campo es requerido.</span>\r\n                  </div>  \r\n              </div>\r\n              <div class="column">\r\n                <label class="checkbox">\r\n                    <input type="checkbox"  formControlName="agregar">\r\n                    Agregar\r\n                </label>\r\n                <label class="checkbox">\r\n                    <input type="checkbox"  formControlName="editar">\r\n                    Editar\r\n                </label>\r\n                <label class="checkbox">\r\n                    <input type="checkbox"  formControlName="eliminar">\r\n                    Eliminar\r\n                </label>\r\n              </div>\r\n              <div class="column">\r\n                <button type="submit" class="button is-primary" name="enviar" [ngClass]="{\'is-loading\': cargando}"  [disabled]="usuario_form.invalid">Guardar</button>\r\n              </div>\r\n             \r\n            </div>\r\n        </form>\r\n        <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th>Usuario</th>\r\n                    <th><i class="fa fa-pencil"></i></th>\r\n                    <th><i class="fa fa-edit"></i></th>\r\n                    <th><i class="fa fa-close"></i></th>\r\n                    <th></th>\r\n                    \r\n                    </tr>\r\n                </thead>\r\n                <tbody  >\r\n                    <tr *ngFor="let item of usuarios_privilegios; let i=index">\r\n                        <td>{{ item.usuario_id }}</td>\r\n                        <td  *ngIf="item.agregar == 1"><i class="fa fa-check-circle"></i></td>\r\n                        <td  *ngIf="item.agregar == 0"><i class="fa fa-close"></i></td>\r\n                        <td  *ngIf="item.editar == 1"><i class="fa fa-check-circle"></i></td>\r\n                        <td  *ngIf="item.editar == 0"><i class="fa fa-close"></i></td>\r\n                        <td  *ngIf="item.eliminar == 1"><i class="fa fa-check-circle"></i></td>\r\n                        <td  *ngIf="item.eliminar == 0"><i class="fa fa-close"></i></td>\r\n                        <td><button type="button" class="button is-danger" (click)=\'eliminar_usuario_avance(item.id)\'><i class="fa fa-close"></i></button></td>\r\n                    </tr>\r\n                   <tr *ngIf="usuarios_privilegios.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Lista vacia.</td>                    \r\n                    </tr>\r\n                </tbody>    \r\n          </table>\r\n      </div>\r\n      <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " ></footer>\r\n  </div>  \r\n  <button class="modal-close is-large" aria-label="close"></button>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>'},Uz06:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},VEYG:function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-database"></i></span>\r\n                            Base de datos\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="section">            \r\n                <div style="text-align:center;"><a class="button is-primary is-medium" [ngClass]="{ \'is-loading\': exportando}" (click)="exportar()"><span class="icon"><i class="fa fa-download"></i></span> <span>Respaldar base de datos</span></a></div>\r\n                <br>\r\n                <hr>\r\n                <br>\r\n                <div style="text-align:center;"><a class="button is-warning is-medium" [ngClass]="{ \'is-loading\': enviandoDatoss}" (click)="mostrarModalSubirArchivoSQL = true; archivoSubido = false;" ><span class="icon"><i class="fa fa-upload"></i></span> <span>Restaurar base de datos</span></a></div>\r\n                <br>\r\n                <p><strong>Importante:</strong> esta acción reemplazará toda la información de la base de datos; realice este procedimiento solo si sabe lo que está haciendo, por favor asegúrese de <a (click)="exportar()">realizar un respaldo</a> antes de realizar esta acción para evitar cualquier perdida de información.</p>\r\n            </section>\r\n        </div>\r\n        \r\n       \r\n       \r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="modal"  [ngClass]="{ \'is-active\': mostrarModalSubirArchivoSQL }">\r\n    <div class="modal-background" (click)="mostrarModalSubirArchivoSQL =!mostrarModalSubirArchivoSQL"></div>\r\n    <div class="modal-card">\r\n      <header class="modal-card-head">\r\n        <p class="modal-card-title"><span class="icon"><i class="fa fa-cloud-upload"></i></span> Subir respaldo de la base datos</p>\r\n        <button class="delete" (click)="mostrarModalSubirArchivoSQL = !mostrarModalSubirArchivoSQL; progreso = 0"></button>\r\n      </header>\r\n      <section class="modal-card-body">        \r\n          <div class="notification is-danger" *ngIf="mensajeErrorSync!=\'\'"><span class="icon"><i class="fa fa-exclamation-circle"></i></span> {{ mensajeErrorSync }}</div>\r\n         \r\n          <div class="field" [ngClass]="{ \'is-hidden\' : enviandoDatos || archivoSubido }">\r\n              <label for="sync" class="label" [ngClass]="{ \'is-danger\': errores.archivo != null }">Elige el archivo .sql</label>            \r\n              <input class="input-file" type="file" #archivoInput  name="sql" id="sql" style="width:100%" [disabled]="archivoSubido" (change)="fileChange($event)" accept=".sql">            \r\n              <p class="help is-danger" *ngIf="errores.archivo == \'required\'">Debe elegir un archivo.</p>\r\n              <p class="help is-danger" *ngIf="errores.archivo == \'mimetypes\'">El tipo de archivo no es valido, verifique que tenga las siguientes extensiones: .zip</p>\r\n          </div>\r\n          <div *ngIf="enviandoDatos || archivoSubido">\r\n              <h1 class="subtitle" *ngIf="enviandoDatos">Subiendo respaldo...</h1>\r\n              <h1 class="subtitle" *ngIf="archivoSubido && !enviandoDatos"><span class="icon"><i class="fa fa-check-circle"></i></span> ¡El respaldo se ha subido exitosamente!</h1>\r\n              <progress class="progress is-primary" value="{{ progreso }}" max="100">{{ progreso}}%</progress>\r\n          </div>\r\n      </section>\r\n      <footer class="modal-card-foot">\r\n          <a class="button is-primary" [ngClass]="{ \'is-disabled\' : !archivo || enviandoDatos  }" *ngIf="!archivoSubido" (click)="importar()">Importar</a>          \r\n          <a class="button" [ngClass]="{ \'is-disabled\' : enviandoDatos  }" (click)="mostrarModalSubirArchivoSQL = !mostrarModalSubirArchivoSQL">Cerrar</a>      \r\n      </footer>\r\n    </div>\r\n  </div>\r\n\r\n\r\n\r\n'},VMUE:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("BFvY"),s=a("QrLZ");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,a){var n=this;this.router=t,this.authService=e,this.bloquearPantallaService=a,this.usuario={},this.credenciales={},this.loading=!1,this.mensaje="",this.mostrarMensaje=!1,this.bloquearPantallaSuscription=a.pantallaBloqueada$.subscribe(function(t){t&&(localStorage.removeItem("token"),n.cargarCredenciales(),n.mostrar=!0)})}return t.prototype.ngOnInit=function(){null!=localStorage.getItem("bloquear_pantalla")&&(this.cargarCredenciales(),this.mostrar=!0)},t.prototype.cargarCredenciales=function(){this.usuario=JSON.parse(localStorage.getItem("usuario")),null!=this.usuario&&null!=this.usuario.id&&(this.credenciales.id=this.usuario.id)},t.prototype.login=function(){var t=this;this.loading=!0,this.mostrarMensaje=!1,this.authService.login(this.credenciales.id,this.credenciales.password).subscribe(function(e){t.loading=!1,t.mostrar=!1,t.credenciales.password="",t.bloquearPantallaService.desbloquearPantalla()},function(e){t.loading=!1,t.mostrarMensaje=!0,t.mensaje="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.";try{e.json();401==e.status&&(t.mensaje="Lo sentimos el usuario y/o contraseña no son válidos."),0==e.status&&(t.mensaje="Conexión rechazada."),500==e.status&&(t.mensaje="500 (Error interno del servidor)")}catch(a){500==e.status&&(t.mensaje="500 (Error interno del servidor)")}})},t.prototype.logout=function(){this.mostrar=!1,localStorage.removeItem("bloquear_pantalla"),this.authService.logout()},t}();l=o([a.i(n.Component)({selector:"app-bloquear-pantalla",template:a("U94m"),styles:[a("Rl47")]}),c("design:paramtypes",["function"==typeof(d=void 0!==i.a&&i.a)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object,"function"==typeof(p=void 0!==s.a&&s.a)&&p||Object])],l);var d,u,p},VQIX:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},VQxF:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("p5Ee"),s=a("gHRf"),o=a("Fiuh");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e){this.title=t,this.apiService=e,this.cargando=!1,this.mensajeError=new s.a,this.mensajeExito=new s.a,this.listaMesesAnios=[],this.fecha=-1,this.estadisticasGlobales=[],this.listaEntregasEstadisticaDiaria=[],this.listaPedidosClues=[],this.cargandoFechas=!1,this.cargandoEstadisticasGlobales=!1,this.mostrarDialogoPedidos=!1,this.pedidosUnidadMedica=[],this.cargandoPedidosUnidadMedica=!1,this.mostrarGraficas=!0}return t.prototype.ngOnInit=function(){var t=this;this.mensajeError=new s.a,this.mensajeExito=new s.a,this.title.setTitle("Entregas del mes / Administrador central"),this.cargandoFechas=!0,this.apiService.mesesAniosPedidos().subscribe(function(e){t.cargandoFechas=!1,t.listaMesesAnios=e,t.listaMesesAnios.length>0&&(t.fecha=t.listaMesesAnios[0].fecha,t.generarStats())},function(e){t.cargandoFechas=!1,console.log(e)})},t.prototype.generarStats=function(){var t=this;if(!(this.listaMesesAnios.length<=0)){var e=this.fecha.split("/");if(2==e.length){var a={mes:e[0],anio:e[1]};this.cargandoEstadisticasGlobales=!0,this.apiService.entregasPedidosStatsMesesAnios(a).subscribe(function(e){t.cargandoEstadisticasGlobales=!1,t.estadisticasGlobales=e,t.listaEntregasEstadisticaDiaria=[],t.listaPedidosClues=[];for(var a in t.estadisticasGlobales)t.listaEntregasEstadisticaDiaria.push({proveedor_id:t.estadisticasGlobales[a].proveedor_id,proveedor:t.estadisticasGlobales[a].proveedor,cargando:!0,tipoDatos:"claves",data:[]}),t.listaPedidosClues.push({proveedor_id:t.estadisticasGlobales[a].proveedor_id,proveedor:t.estadisticasGlobales[a].proveedor_nombre_completo,cargando:!0,data:[]}),t.mostrarPedidosCluesProveedor(t.listaPedidosClues.length-1),t.generarStatsDiariasProveedor(t.listaEntregasEstadisticaDiaria.length-1)},function(e){t.cargandoEstadisticasGlobales=!1,console.log(e)})}}},t.prototype.mostrarPedidosCluesProveedor=function(t){var e=this,a=this.fecha.split("/");if(2==a.length){var n={mes:a[0],anio:a[1],proveedor_id:this.listaPedidosClues[t].proveedor_id};this.listaPedidosClues[t].cargando=!0,this.apiService.pedidosCluesMesAnio(n).subscribe(function(a){e.listaPedidosClues[t].cargando=!1,e.listaPedidosClues[t].data=a},function(a){console.log(a),e.listaPedidosClues[t].cargando=!1})}},t.prototype.generarStatsDiariasProveedor=function(t){var e=this,a=this.fecha.split("/");if(2==a.length){var n={mes:a[0],anio:a[1],proveedor_id:this.listaEntregasEstadisticaDiaria[t].proveedor_id};this.listaEntregasEstadisticaDiaria[t].cargando=!0,this.apiService.entregasPedidosStatsDiarias(n).subscribe(function(a){e.listaEntregasEstadisticaDiaria[t].cargando=!1,e.listaEntregasEstadisticaDiaria[t].data=a,e.renderGrafica(t)},function(a){console.log(a),e.listaEntregasEstadisticaDiaria[t].cargando=!1})}},t.prototype.renderGrafica=function(t){var e=[],a=[],n=[],i=[];for(var r in this.listaEntregasEstadisticaDiaria[t].data)e.push(this.listaEntregasEstadisticaDiaria[t].data[r].dia+" "+this.listaEntregasEstadisticaDiaria[t].data[r].mes_nombre),"claves"==this.listaEntregasEstadisticaDiaria[t].tipoDatos&&(a.push(this.listaEntregasEstadisticaDiaria[t].data[r].causes_claves||0),n.push(this.listaEntregasEstadisticaDiaria[t].data[r].no_causes_claves||0),i.push(this.listaEntregasEstadisticaDiaria[t].data[r].material_curacion_claves||0)),"insumos"==this.listaEntregasEstadisticaDiaria[t].tipoDatos&&(a.push(this.listaEntregasEstadisticaDiaria[t].data[r].causes_cantidad||0),n.push(this.listaEntregasEstadisticaDiaria[t].data[r].no_causes_cantidad||0),i.push(this.listaEntregasEstadisticaDiaria[t].data[r].material_curacion_cantidad||0)),"monto"==this.listaEntregasEstadisticaDiaria[t].tipoDatos&&(a.push(Number(this.listaEntregasEstadisticaDiaria[t].data[r].causes_monto)||0),n.push(Number(this.listaEntregasEstadisticaDiaria[t].data[r].no_causes_monto)||0),i.push(Number(this.listaEntregasEstadisticaDiaria[t].data[r].material_curacion_monto)||0));var s={};"claves"==this.listaEntregasEstadisticaDiaria[t].tipoDatos&&(s={min:0,title:{text:"Total claves"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}}),"insumos"==this.listaEntregasEstadisticaDiaria[t].tipoDatos&&(s={min:0,title:{text:"Total insumos"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}}),"monto"==this.listaEntregasEstadisticaDiaria[t].tipoDatos&&(s={min:0,title:{text:"Total en monto"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}}),this.listaEntregasEstadisticaDiaria[t].options={chart:{type:"column"},xAxis:{categories:e},yAxis:s,legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,backgroundColor:"white",borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},title:{text:"Entrega de insumos"},series:[{name:"Causes",data:a},{name:"No Causes",data:n},{name:"Material Curacion",data:i}]}},t.prototype.generarExcel=function(t,e){var a=this.fecha.split("/");if(2==a.length){console.log(a[0]);var n=(""+a[0]).length<2?"0"+a[0]:a[0],i=(new Date(a[1],a[0]-1,1),new Date(a[1],a[0],0)),s=a[1]+"-"+n+"-01",o=a[1]+"-"+n+"-"+i.getDate(),c="token="+localStorage.getItem("token")+"&q="+t+"&proveedores="+e+"&status=TR,PS,FI,EF,EX&fecha_desde="+s+"&fecha_hasta="+o;window.open(r.a.API_URL+"/administrador-central/pedidos-excel?"+c)}},t.prototype.verDialogoPedidos=function(t,e){var a=this;this.tituloDialogoPedidos=e.clues+" - "+e.unidad_medica,this.mostrarDialogoPedidos=!0;var n=this.fecha.split("/");if(2==n.length){var i={mes:n[0],anio:n[1],proveedor_id:t,clues:e.clues};this.cargandoPedidosUnidadMedica=!0,this.apiService.pedidosEntregasCluesMesAnio(i).subscribe(function(t){console.log(t);var e=[];for(var n in t){var i={folio:t[n].folio,nombre_pedido:t[n].descripcion,tipo_pedido_id:t[n].tipo_pedido_id,status:t[n].status,fecha:t[n].fecha,fecha_concluido:t[n].fecha_concluido,fecha_expiracion:t[n].fecha_expiracion,fecha_cancelacion:t[n].fecha_cancelacion,total_monto_solicitado:+t[n].total_monto_solicitado,total_monto_recibido:+t[n].total_monto_recibido,total_claves_solicitadas:+t[n].total_claves_solicitadas,total_claves_recibidas:+t[n].total_claves_recibidas,total_cantidad_solicitada:+t[n].total_cantidad_solicitada,total_cantidad_recibida:+t[n].total_cantidad_recibida,entregas:[]};if("PFS"!=t[n].tipo_pedido_id&&t[n].recepciones.length){var r=0,s=0,o=0,c={};for(var l in t[n].recepciones){var d=t[n].recepciones[l];if("FI"==d.entrada.status){var u={fecha:d.entrada.fecha_movimiento,total_claves:0,total_cantidad:0,total_monto:0,acumulado_claves:0,acumulado_cantidad:0,acumulado_monto:0},p={},m=0;for(var f in d.entrada.insumos_detalles){var g=d.entrada.insumos_detalles[f];u.total_cantidad+=+g.cantidad,u.total_monto+=+g.precio_total,"MC"==g.detalles.tipo&&(m+=+g.precio_total),p[g.clave_insumo_medico]||(p[g.clave_insumo_medico]=!0,u.total_claves+=1),c[g.clave_insumo_medico]||(c[g.clave_insumo_medico]=!0,r+=1)}m>0&&(u.total_monto+=16*m/100),s+=u.total_cantidad,o+=u.total_monto,u.acumulado_cantidad=s,u.acumulado_claves=r,u.acumulado_monto=o,i.entregas.push(u)}}}e.push(i)}a.pedidosUnidadMedica=e,console.log(e),a.cargandoPedidosUnidadMedica=!1},function(t){console.log(t),a.cargandoPedidosUnidadMedica=!1})}},t.prototype.cerrarDialogoPedidos=function(){this.mostrarDialogoPedidos=!1},t.prototype.parseNaN=function(t){return isNaN(t)?0:t},t.prototype.onResize=function(t){var e=this;this.mostrarGraficas=!1;try{setTimeout(function(){e.mostrarGraficas=!0})}catch(t){console.log(t)}},t}();d=c([a.i(n.Component)({selector:"app-entregas-mes",template:a("HoXs"),styles:[a("ssvK")],host:{"(window:resize)":"onResize($event)"}}),l("design:paramtypes",["function"==typeof(u=void 0!==i.b&&i.b)&&u||Object,"function"==typeof(p=void 0!==o.a&&o.a)&&p||Object])],d);var u,p},VTbq:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("p5Ee"),s=a("gHRf"),o=a("Fiuh");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e){this.title=t,this.apiService=e,this.cargando=!1,this.mensajeError=new s.a,this.mensajeExito=new s.a,this.clues="",this.jurisdicciones=[],this.proveedores=[],this.jurisdiccionesSeleccionadas=[],this.proveedoresSeleccionados=[],this.ordenarCauses="",this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[]}return t.prototype.ngOnInit=function(){this.mensajeError=new s.a,this.mensajeExito=new s.a,this.title.setTitle("Abasto / Administrador central"),this.listar(1),this.cargarJurisdicciones(),this.cargarProveedores()},t.prototype.cargarJurisdicciones=function(){var t=this;this.apiService.jurisdicciones().subscribe(function(e){t.jurisdicciones=e},function(t){})},t.prototype.cargarProveedores=function(){var t=this;this.apiService.proveedores().subscribe(function(e){console.log(e),t.proveedores=e},function(t){})},t.prototype.cambioSeleccionJurisdiccion=function(t){t==-1&&(this.jurisdiccionesSeleccionadas=[]),this.agregarJurisdiccion(t)},t.prototype.cambioSeleccionProveedor=function(t){t==-1&&(this.proveedoresSeleccionados=[]),this.agregarProveedor(t)},t.prototype.agregarProveedor=function(t){if(t!=-1){for(var e in this.proveedoresSeleccionados)if(this.proveedoresSeleccionados[e].id==t)return;for(var e in this.proveedores)if(this.proveedores[e].id==t){this.proveedoresSeleccionados.push(this.proveedores[e]);break}}},t.prototype.agregarJurisdiccion=function(t){if(t!=-1){for(var e in this.jurisdiccionesSeleccionadas)if(this.jurisdiccionesSeleccionadas[e].id==t)return;for(var e in this.jurisdicciones)if(this.jurisdicciones[e].id==t){this.jurisdiccionesSeleccionadas.push(this.jurisdicciones[e]);break}}},t.prototype.quitarProveedor=function(t){this.proveedoresSeleccionados.splice(t,1)},t.prototype.quitarJurisdiccion=function(t){this.jurisdiccionesSeleccionadas.splice(t,1)},t.prototype.filtrarClues=function(t){13==t.keyCode&&this.listar(1)},t.prototype.toggleCauses=function(){switch(this.ordenarCauses){case"":this.ordenarCauses="ASC";break;case"ASC":this.ordenarCauses="DESC";break;case"DESC":this.ordenarCauses="";break;default:this.ordenarCauses=""}this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.listar(1)},t.prototype.toggleNoCauses=function(){switch(this.ordenarNoCauses){case"":this.ordenarNoCauses="ASC";break;case"ASC":this.ordenarNoCauses="DESC";break;case"DESC":this.ordenarNoCauses="";break;default:this.ordenarNoCauses=""}this.ordenarCauses="",this.ordenarMaterialCuracion="",this.listar(1)},t.prototype.toggleMaterialCuracion=function(){switch(this.ordenarMaterialCuracion){case"":this.ordenarMaterialCuracion="ASC";break;case"ASC":this.ordenarMaterialCuracion="DESC";break;case"DESC":this.ordenarMaterialCuracion="";break;default:this.ordenarMaterialCuracion=""}this.ordenarCauses="",this.ordenarNoCauses="",this.listar(1)},t.prototype.listar=function(t){var e=this;this.cargando=!0,this.paginaActual=t;var a=[];for(var n in this.proveedoresSeleccionados)a.push(this.proveedoresSeleccionados[n].id);var i=[];for(var n in this.jurisdiccionesSeleccionadas)i.push(this.jurisdiccionesSeleccionadas[n].id);var r={clues:this.clues,proveedores:a,jurisdicciones:i,page:this.paginaActual,per_page:this.resultadosPorPagina,ordenar_causes:this.ordenarCauses,ordenar_no_causes:this.ordenarNoCauses,ordenar_material_curacion:this.ordenarMaterialCuracion};this.apiService.abasto(r).subscribe(function(t){e.cargando=!1,e.lista=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.exportar=function(){var t="token="+localStorage.getItem("token")+"&ordenar_causes="+this.ordenarCauses+"&ordenar_no_causes="+this.ordenarNoCauses+"&ordenar_material_curacion="+this.ordenarMaterialCuracion;""!=this.clues&&(t+="&clues="+this.clues);var e="";for(var a in this.proveedoresSeleccionados)""!=e&&(e+=","),e+=""+this.proveedoresSeleccionados[a].id;""!=e&&(t+="&proveedores="+e);var n="";for(var a in this.jurisdiccionesSeleccionadas)""!=n&&(n+=","),n+=""+this.jurisdiccionesSeleccionadas[a].id;""!=n&&(t+="&jurisdicciones="+n),window.open(r.a.API_URL+"/abasto-excel?"+t)},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t}();d=c([a.i(n.Component)({selector:"app-abasto",template:a("Ijne"),styles:[a("t7Rg")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.b&&i.b)&&u||Object,"function"==typeof(p=void 0!==o.a&&o.a)&&p||Object])],d);var u,p},VXpv:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),t.exports=t.exports.toString()},Vbn5:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.buscar=function(t,e){return void 0===e&&(e=null),this.jwtRequest.get(l.URL,null,{q:t,clave:e}).map(function(t){return t.json().data})},t}();c.URL="stock",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},VkID:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{cursor:pointer}.item.seleccionado{background:#ccc}.item.seleccionado .icon{color:#fff!important}.item.seleccionado .item-detalle{display:inherit}.item .item-detalle{display:none}.rojo{color:red}.item.asignado{background:#ddd;color:#777}tr.filtro td,tr.filtro th{color:#fff;background:#4a4a4a!important}.contenedor-tabla{overflow:auto;width:100%;height:99%!important;display:block;position:absolute;left:0;top:0}.contenedor-tabla table{border-radius:3px}@media screen and (max-width:768px){.contenedor-tabla{position:relative}.tile.notification{padding:0!important}}",""]),t.exports=t.exports.toString()},VmQS:function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Roles\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted " routerLink="/panel-control/roles/nuevo">\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th>Nombre</th>\r\n                    <th style="text-align:center; width:60px"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of lista; let i=index">                        \r\n                        <td style="vertical-align: middle;"><a routerLink="/panel-control/roles/editar/{{item.id}}">{{ item.nombre }}</a></td>                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>                        \r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <td style="vertical-align: middle;"><a routerLink="/panel-control/roles/editar/{{item.id}}">{{ item.nombre }}</a></td>                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},VnqX:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},VrPa:function(t,e){t.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Equipamiento" class="nav-item pull-left nav-hub-active"  routerLink="/equipamiento">\r\n            \r\n            <img src="assets/hub-equipamiento.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left is-hidden-touch">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item">\r\n                <h1 class="title">&nbsp;Equipamiento</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <div class="nav-center">\r\n            <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n            </span>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},VtnA:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("9zwt"),d=a("LLho"),u=a("Px6Q"),p=a("/0pc"),m=a("OFVJ"),f=a("BFvY"),g=a("pBSs"),h=a("K4kt"),v=a("CWbX"),b=a("oSQj"),y=(a.n(b),a("evA2")),_=(a.n(y),a("hN3r"));a.d(e,"a",function(){return j});var x=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},j=function(){function t(){}return t}();j=x([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,g.a,v.a,b.NguiAutoCompleteModule,y.NguiDatetimePickerModule,_.a],declarations:[p.a,m.a],providers:[f.a,h.a]})],j)},"VwF+":function(t,e){t.exports='<section class="hero is-dark" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/administrador-proveedores" routerLinkActive="active">\r\n                      <img src="assets/hub-administrador-proveedores.svg" alt="icono">\r\n                      <h1 class="title">&nbsp;Administrador Proveedores</h1>\r\n                    </a>\r\n                </div>\r\n\r\n                <div class="nav-center">\r\n                    <span *ngIf="usuario.proveedor_activo" class="nav-item is-small">\r\n                        <span>{{usuario.proveedor_activo.nombre}}</span>\r\n                    </span>\r\n                </div>\r\n                \r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},"W3I+":function(t,e,a){"use strict";var n=a("/oeL"),i=a("bm2B"),r=a("fc+i"),s=a("BkNc"),o=a("p5Ee"),c=a("K4kt"),l=a("hN3r"),d=a("bbdN");a.n(d);a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(t,e,a,n,i,r){var s=this;this.fb=t,this.crudService=e,this.route=a,this._sanitizer=n,this.notificacion=i,this._ngZone=r,this.tab=1,this.cargando=!1,this.sum_cant_lotes=!1,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.MinDate=new Date,this.MaxDate=new Date,this.mostrarCancelado=!1,this.tieneid=!1,this.cargandoPdf=!1,this.tipos_recetas=[{id:1,nombre:"Normal"},{id:2,nombre:"Controlado"}],this.autocompleListFormatter=function(t){var e='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4">'+t.descripcion+'</p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+t.clave+") \n              ";return 1==t.es_causes&&(e+='<label class="tag is-success" ><strong>Cause </strong></label>'),0==t.es_causes&&(e+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);" ><strong>No Cause </strong> </label>'),1==t.es_unidosis&&(e+='<label class="tag is-warning" ><strong>Unidosis</strong> </label>'),e+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",s._sanitizer.bypassSecurityTrustHtml(e)},this.es_unidosis=!1,this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0},this.mostrar_lote=[]}return t.prototype.ngOnInit=function(){var t=this,e=JSON.parse(localStorage.getItem("usuario"));e.clues_activa&&(this.insumos_term+="&clues="+e.clues_activa.clues),e.almacen_activo&&(this.insumos_term+="&almacen="+e.almacen_activo.id),this.pdfworker=new Worker("web-workers/farmacia/movimientos/receta.js");var a=this,n=this._ngZone;this.pdfworker.onmessage=function(t){n.run(function(){a.cargandoPdf=!1}),d.saveAs(a.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.dato=this.fb.group({id:[""],tipo_movimiento_id:["5",[i.Validators.required]],status:["FI"],fecha_movimiento:["",[i.Validators.required]],observaciones:[""],cancelado:[""],observaciones_cancelacion:[""],movimiento_metadato:this.fb.group({turno_id:["",[i.Validators.required]]}),receta:this.fb.group({folio:["",[i.Validators.required]],tipo_receta:["1",[i.Validators.required]],fecha_receta:["",[i.Validators.required]],doctor:["",[i.Validators.required]],paciente:["",[i.Validators.required]],diagnostico:["",[i.Validators.required]],imagen_receta:[""]}),insumos:this.fb.array([])}),this.route.params.subscribe(function(e){e.id&&(t.tieneid=!0)}),this.form_insumos={tipo_movimiento_id:["",[i.Validators.required]]};var r=new Date;this.MinDate=new Date(r.getFullYear()-1,0,1),this.MaxDate=new Date(r.getFullYear(),r.getMonth(),r.getDate()),this.dato.get("fecha_movimiento").value?this.fecha_actual=this.dato.get("fecha_movimiento").value:(this.fecha_actual=r.getFullYear()+"-"+("00"+(r.getMonth()+1)).slice(-2)+"-"+r.getDate(),this.dato.get("fecha_movimiento").patchValue(this.fecha_actual)),document.getElementById("catalogos").click()},t.prototype.abrirModal=function(t){document.getElementById(t).classList.add("is-active")},t.prototype.cancelarModal=function(t){document.getElementById(t).classList.remove("is-active")},t.prototype.select_insumo_autocomplete=function(t){var e=this,a=JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.crudService.lista(0,1e3,"comprobar-stock?almacen="+a.almacen_activo.id+"&clave="+t.clave).subscribe(function(a){e.lotes_insumo=a,e.insumo=t,document.getElementById("buscarInsumo").value="",document.getElementById("tituloModal").innerHTML=" "+t.descripcion+' <br>\n          <p aling="justify" style="font-size:12px">CANTIDAD POR ENVASE: '+t.cantidad_x_envase+"</p> ",e.es_unidosis=t.es_unidosis,e.cargando=!1,e.abrirModal("verLotes")},function(t){e.cargando=!1})},t.prototype.agregarLoteIsumo=function(){for(var t=this.dato.controls.insumos,e={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,cantidad:1,cantidad_x_envase:parseInt(this.insumo.cantidad_x_envase),dosis:["",[i.Validators.required]],frecuencia:["",[i.Validators.required]],duracion:["",[i.Validators.required]],cantidad_recetada:["",[i.Validators.required]],cantidad_surtida:1,lotes:this.fb.array([])},a=!1,n=0,r=t.value;n<r.length;n++){var s=r[n];if(s.clave==this.insumo.clave){a=!0;break}}a||t.push(this.fb.group(e));var o=t.length-1,c=t.controls[o];this.mostrar_lote[o]=!1;var l={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0};for(var d=0,u=this.lotes_insumo;d<u.length;d++){var s=u[d];if(s.cantidad>0){var p=!1;if(a)for(var m=0,f=c.controls.lotes.controls;m<f.length;m++){var g=f[m];if(g.controls.id.value==s.id){p=!0;var h=g.controls.cantidad.value+s.cantidad;s.nuevo&&(s.existencia=1*s.cantidad),h>g.controls.existencia.value&&0==s.nuevo&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+g.controls.existencia.value,l),h=1*g.controls.existencia.value),g.controls.cantidad.patchValue(h);break}}p||(s.nuevo&&(s.existencia=1*s.cantidad),s.cantidad>s.existencia&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+s.existencia,l),s.cantidad=1*s.existencia),c.controls.lotes.push(this.fb.group({id:s.id,nuevo:0|s.nuevo,codigo_barras:s.codigo_barras?s.codigo_barras:"",lote:s.lote,fecha_caducidad:s.fecha_caducidad,existencia:s.nuevo?s.cantidad:s.existencia,cantidad:s.cantidad})))}}for(var v=0,b=0,y=c.controls.lotes.value;b<y.length;b++){var g=y[b];v+=g.cantidad}c.controls.cantidad_surtida.patchValue(v),this.cancelarModal("verLotes"),this.sum_cant_lotes=!1},t.prototype.ver_lotes_asignados=function(t){this.mostrar_lote[t]=!this.mostrar_lote[t]},t.prototype.agregarNuevoLote=function(){this.lotes_insumo.push({id:""+Math.floor(999*Math.random())+1,codigo_barras:"",lote:"",fecha_caducidad:"",existencia:"",cantidad:"",nuevo:1,existencia_unidosis:"",cantidad_unidosis:""})},t.prototype.eliminarLote=function(t){this.lotes_insumo.splice(t,1)},t.prototype.quitar_lote_insumo=function(t,e,a){var n=this.dato.controls.insumos,i=n.controls[t];i.controls.lotes.removeAt(a);var r=i.controls.cantidad_surtida.value-e.cantidad;i.controls.cantidad_surtida.patchValue(r)},t.prototype.validar_cantidad_lote=function(t,e,a){if(e.controls.cantidad.value>e.controls.existencia.value&&0==e.nuevo){var n={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+e.controls.existencia.value,n),e.controls.cantidad.patchValue(1*e.controls.existencia.value)}for(var i=this.dato.controls.insumos,r=i.controls[t],s=0,o=0,c=r.controls.lotes.value;o<c.length;o++){s+=c[o].cantidad}r.controls.cantidad_surtida.patchValue(s)},t.prototype.comprobar_cant_lotes=function(){for(var t=0,e=0,a=this.lotes_insumo;e<a.length;e++){var n=a[e];n.cantidad&&(t=Number(t)+Number(n.cantidad))}this.sum_cant_lotes=t>0},t.prototype.quitar_punto=function(t){return!!this.is_numeric(t.key)},t.prototype.is_numeric=function(t){return/^\d+$/.test(t)},t.prototype.imprimir=function(){var t=JSON.parse(localStorage.getItem("usuario"));try{this.cargandoPdf=!0;var e={datos:this.dato.value,lista:this.dato.value.insumos,usuario:t};this.pdfworker.postMessage(JSON.stringify(e))}catch(t){this.cargandoPdf=!1,console.log(t)}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();m=u([a.i(n.Component)({selector:"salidas-recetas-formulario",template:a("4n6J"),styles:["ngui-auto-complete {z-index: 999999 !important}"]}),p("design:paramtypes",["function"==typeof(f=void 0!==i.FormBuilder&&i.FormBuilder)&&f||Object,"function"==typeof(g=void 0!==c.a&&c.a)&&g||Object,"function"==typeof(h=void 0!==s.c&&s.c)&&h||Object,"function"==typeof(v=void 0!==r.d&&r.d)&&v||Object,"function"==typeof(b=void 0!==l.b&&l.b)&&b||Object,"function"==typeof(y=void 0!==n.NgZone&&n.NgZone)&&y||Object])],m);var f,g,h,v,b,y},W4JN:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"pre{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word;padding:1em;margin:0}",""]),t.exports=t.exports.toString()},WEl6:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.buscar=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get(l.URL,null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.listaCompleta=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get("admision/paciente",null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.buscarCompleta=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get("admision/paciente",null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.listaMunicipios=function(t){return void 0===t&&(t=null),this.jwtRequest.get("admision/municipio",t,null).map(function(t){return t.json().data})},t.prototype.listaLocalidades=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),this.jwtRequest.get("admision/localidad",e,{municipio_id:t}).map(function(t){return t.json().data})},t.prototype.listaMotivoEgreso=function(){return this.jwtRequest.get("admision/motivo-egreso",null,null).map(function(t){return t.json().data})},t.prototype.listaTriage=function(t){return this.jwtRequest.get("admision/triage",null,{triage_id:t}).map(function(t){return t.json().data})},t.prototype.listaGradoLesion=function(t){return this.jwtRequest.get("admision/grado-lesion",null,{grado_lesion_id:t}).map(function(t){return t.json().data})},t.prototype.listaUnidades=function(t,e){return this.jwtRequest.get("unidades-medicas",null,{lista:t,clues:e}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return console.log(t.json().data),t.json().data})},t.prototype.editar=function(t,e){return this.jwtRequest.put("admision/paciente-egreso",t,e).map(function(t){return t.json().data})},t.prototype.ingreso=function(t,e){return this.jwtRequest.put("admision/admision",t,e).map(function(t){return t.json().data})},t.prototype.crear=function(t){return this.jwtRequest.post("admision/paciente",t).map(function(t){return t.json().data})},t}();c.URL="admision/admision",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},WTkT:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("BgMt"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"equipamiento",component:r.a,canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},WdPz:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.servidores=function(t){return void 0===t&&(t={page:1,per_page:20}),this.jwtRequest.get(l.URL+"/servidores",null,t).map(function(t){return t.json().data})},t.prototype.buscarServidores=function(t){return void 0===t&&(t={q:"",page:1,per_page:20}),this.jwtRequest.get(l.URL+"/servidores",null,t).map(function(t){return t.json().data})},t.prototype.verServidor=function(t){return this.jwtRequest.get(l.URL+"/servidores",t,{}).map(function(t){return t.json().data})},t.prototype.crearServidor=function(t){return this.jwtRequest.post(l.URL+"/servidores",t).map(function(t){return t.json().data})},t.prototype.editarServidor=function(t,e){return this.jwtRequest.put(l.URL+"/servidores",t,e).map(function(t){return t.json().data})},t.prototype.eliminarServidor=function(t){return this.jwtRequest.delete(l.URL+"/servidores",t).map(function(t){return t.json().data})},t.prototype.buscar=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL+"/lista",null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.listaPaginada=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get(l.URL+"/lista",null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.auto=function(){return this.jwtRequest.get(l.URL+"/auto",null,{}).map(function(t){return t.json().data})},t}();c.URL="sync",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},WfBG:function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:20px">\r\n            <div class="top-bar is-primary" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } ">\r\n                <h1 class="title" *ngIf="!busquedaActivada">\r\n                    <span class="icon is-medium"><i class="fa fa-check-square-o"></i></span> Validación de pedidos alternos\r\n                </h1>\r\n                <h1 class="title" *ngIf="busquedaActivada">\r\n                    <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                </h1>\r\n                <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>               \r\n                \r\n                <div class="control is-grouped">\r\n                    <p class="control is-expanded">\r\n                        <input class="input is-medium" type="text" placeholder="Buscar" #searchBox  id="search-box" (keyup)="buscar(searchBox.value)">\r\n                    </p>\r\n                </div>\r\n               \r\n            </div> \r\n            <br>\r\n            <div class="tabs  is-boxed is-centered" style="margin-bottom:0px;">\r\n                <ul>\r\n                  <li [ngClass]="{ \'is-active\': tab== 1 }"><a (click)="cambiarTab(1)"><span class="icon is-small"><i class="fa fa-inbox"></i></span> <span>Nuevos</span></a></li>\r\n                  <li [ngClass]="{ \'is-active\': tab== 2 }"><a (click)="cambiarTab(2)"><span class="icon is-small"><i class="fa fa-check-square-o"></i></span> <span>Validados</span></a></li>\r\n                </ul>\r\n              </div>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" style="font-size:0.9em" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Folio</th>\r\n                        <th>Descripción</th>\r\n                        <th>Unidad Médica</th>\r\n                        <th>Fecha</th>\r\n                        <th>Claves</th>\r\n                        <th>Cantidad</th>\r\n                        <th>Monto</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of lista; let i=index">                         \r\n                        <!--<td style="vertical-align: middle;"><a routerLink="/administrador-central/claves-basicas/editar/{{item.id}}">{{ item.nombre }}</a></td>                        -->\r\n                        <th style="vertical-align: middle;"><a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}">\r\n                            {{ item.folio?item.folio:\'S/F\' }}</a>\r\n                        </th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}">{{ item.descripcion }}</a></td>                        \r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}">{{ item.unidad_medica }}</a></td>                        \r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" >{{ item.fecha | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias?item.expira_en_dias:\'hoy\'}})</span></a></td>\r\n                        <td style="text-align:center;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}"> \r\n                                {{ item.total_claves_solicitadas | number }}\r\n                            </a>\r\n                        </td>\r\n                        <td style="text-align:center;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}"> \r\n                                {{ item.total_cantidad_solicitada | number }}\r\n                            </a>\r\n                        </td>\r\n                        <td style="text-align:right;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}">\r\n                                ${{ item.total_monto_solicitado | number:\'1.2-2\' }}\r\n                            </a>\r\n                        </td>\r\n                        <!--\r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}"> \r\n                            {{ (item.total_claves_recibidas || 0) | number }} / {{ item.total_claves_solicitadas | number }} [{{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>-->\r\n                        <!--\r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}"> \r\n                            {{ (item.total_cantidad_recibida || 0) | number }} / {{ item.total_cantidad_solicitada | number }} [{{(item.total_cantidad_recibida/item.total_cantidad_solicitada)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>-->\r\n                        <!--<td style="vertical-align: middle;"><a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}">\r\n                            $ {{ (item.total_monto_recibido || 0) | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} [{{(item.total_monto_recibido/item.total_monto_solicitado)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>-->\r\n                        <!--\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando && item.status == \'BR\'" class="status-rojo" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                            <a *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias >= 0" routerLink="/almacen/pedidos/recepcion/{{item.id}}" title="Recibir pedido"><span class="icon"><i class="fa fa-truck"></i></span></a>\r\n                            <span *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias < 0" class="tag is-danger" title="Expirado"><span class="icon"><i class="fa fa-exclamation"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'FI\'" class="estatus-verde" title="Finalizado"><span class="icon"><i class="fa fa-check-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX-CA\'" class="estatus-rojo" title="Expirado - Cancelado"><span class="icon"><i class="fa fa-times-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX\'" class="estatus-amarillo" title="Expirado"><span class="icon"><i class="fa fa-exclamation-circle"></i></span></span>\r\n                        </td>-->\r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}">\r\n                            {{ item.folio?item.folio:\'S/F\' }}</a>\r\n                        </th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}">{{ item.descripcion }}</a></td>                        \r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}">{{ item.unidad_medica }}</a></td>                        \r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" >{{ item.fecha | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias?item.expira_en_dias:\'hoy\'}})</span></a></td>\r\n                        <td style="text-align:center;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}"> \r\n                                {{ item.total_claves_solicitadas | number }}\r\n                            </a>\r\n                        </td>\r\n                        <td style="text-align:center;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}"> \r\n                                {{ item.total_cantidad_solicitada | number }}\r\n                            </a>\r\n                        </td>\r\n                        <td style="text-align:right;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/validacion-pedidos-alternos/{{item.id}}">\r\n                                ${{ item.total_monto_solicitado | number:\'1.2-2\' }}\r\n                            </a>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},WgRO:function(t,e){t.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Almacen artículos" class="nav-item pull-left nav-hub-active"  routerLink="/almacen-articulos">\r\n            \r\n            <img src="assets/hub-almacen-articulos.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left is-hidden-touch">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item">\r\n                <h1 class="title">&nbsp;Artículos</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <div class="nav-center">\r\n            <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n            </span>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},Wkon:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("0siG"),d=a("zKsg");a.d(e,"a",function(){return p});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=function(){function t(){}return t}();p=u([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.a,o.a,c.a],declarations:[l.a,d.a],exports:[l.a,d.a]})],p)},Wlje:function(t,e,a){"use strict";var n=a("/oeL"),i=a("slEG");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.pedidosService=t,this.cargando=!1,this.stats={todos:0,borradores:0,en_transito:0,por_surtir:0,finalizados:0,expirados:0,farmacia:0}}return t.prototype.ngOnInit=function(){var t=this;this.cargando=!0,this.pedidosService.stats().subscribe(function(e){t.cargando=!1,t.stats=e},function(e){t.cargando=!1,console.log(e)})},t}();o=r([a.i(n.Component)({selector:"menu-lateral",template:a("1qpo"),styles:[a("P7j6")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},XHvF:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("WdPz"),o=a("gHRf");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,a,n){this.title=t,this.router=e,this.route=a,this.apiService=n,this.enviando=!1,this.cargando=!1,this.mensajeError=new o.a,this.mensajeExito=new o.a,this.errores={id:null,nombre:null,secret_key:null,tiene_internet:null,version:null,periodo_sincronizacion:null},this.permisos=[],this.todosSeleccionados=!1,this.servidor={id:"",nombre:"",secret_key:"",tiene_internet:!1,version:"",periodo_sincronizacion:null,principal:!1}}return t.prototype.ngOnInit=function(){this.title.setTitle("Nuevo servidor / Panel de control"),this.mensajeError=new o.a,this.mensajeExito=new o.a},t.prototype.seleccionarTodos=function(){this.todosSeleccionados=!this.todosSeleccionados;for(var t in this.permisos)this.permisos[t].seleccionado=this.todosSeleccionados},t.prototype.guardar=function(){var t=this;this.enviando=!0,this.errores={id:null,nombre:null,secret_key:null,tiene_internet:null,version:null,periodo_sincronizacion:null},this.apiService.crearServidor(this.servidor).subscribe(function(e){t.enviando=!1,t.router.navigate(["/panel-control/sync/servidores"])},function(e){try{var a=e.json();switch(t.mensajeError=new o.a(!0),e.status){case 401:t.mensajeError.texto="No tiene permiso para realizar esta acción.";break;case 409:t.mensajeError.texto="Verifique la información marcada de color rojo";for(var n in a.error)for(var i in a.error[n])t.errores[n]=a.error[n][i];break;case 500:t.mensajeError.texto="500 (Error interno del servidor)";break;default:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}catch(e){t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}t.mensajeError.mostrar=!0,t.enviando=!1})},t}();d=c([a.i(n.Component)({selector:"app-nuevo",template:a("4iiM"),styles:[a("dxks")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.b&&i.b)&&u||Object,"function"==typeof(p=void 0!==r.a&&r.a)&&p||Object,"function"==typeof(m=void 0!==r.c&&r.c)&&m||Object,"function"==typeof(f=void 0!==s.a&&s.a)&&f||Object])],d);var u,p,m,f},XU8U:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bm2B"),s=a("BkNc"),o=a("p5Ee");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,a,n){this.fb=t,this.router=e,this.route=a,this._sanitizer=n,this.tab=1,this.clues_term=o.a.API_URL+"/clues-auto?term=:keyword"}return t.prototype.ngOnInit=function(){this.dato=this.fb.group({nombre:["",[r.Validators.required]],clues:["",[r.Validators.required]],unidosis:[""],clues_servicios:this.fb.array([])}),this.form_clues_servicios={servicio_id:["",[r.Validators.required]]},document.getElementById("catalogos").click()},t}();d=c([a.i(n.Component)({selector:"unidades-medicas-formulario",template:a("6Zkj")}),l("design:paramtypes",["function"==typeof(u=void 0!==r.FormBuilder&&r.FormBuilder)&&u||Object,"function"==typeof(p=void 0!==s.a&&s.a)&&p||Object,"function"==typeof(m=void 0!==s.c&&s.c)&&m||Object,"function"==typeof(f=void 0!==i.d&&i.d)&&f||Object])],d);var u,p,m,f},XUa4:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={}}return t.prototype.ngOnInit=function(){},t}();s=i([a.i(n.Component)({selector:"avance-menu",template:a("vYpN"),styles:[a("fCXk")]}),r("design:paramtypes",[])],s)},XuYP:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333}.contenedor-pedido.con-tabs .top-bar{padding:.5em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-pedido{background:#fff;border-radius:1em;overflow:hidden}.contenedor-pedido.con-tabs{border-top-left-radius:0!important;border-top-right-radius:0!important}",""]),t.exports=t.exports.toString()},Xx5D:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("kpP/"),s=a("XU8U"),o=a("D9tw");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"almacen-articulos/catalogos/unidades-medicas",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"editar/:id",component:s.a}],canActivate:[o.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},Xy5P:function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" >\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:2em;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Editar servidor\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="section">\r\n                <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input class="input is-medium" [(ngModel)]="servidor.id"  [ngClass]="{ \'is-danger\': errores.id != null}"  type="text" placeholder="ID" >\r\n                        \r\n                        <span class="icon is-small" *ngIf="errores.id == \'required\' || errores.id == \'unique\'">\r\n                        <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="errores.id == \'required\'">Por favor especifique el ID del servidor.</span>\r\n                        <span class="help is-danger" *ngIf="errores.id == \'unique\'">Este ID ya fue utilizado, por favor elija otro.</span>              \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input class="input is-medium" [(ngModel)]="servidor.nombre"  [ngClass]="{ \'is-danger\': errores.nombre != null}"  type="text" placeholder="Nombre" >\r\n                        \r\n                        <span class="icon is-small" *ngIf="errores.nombre == \'required\'">\r\n                        <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="errores.nombre == \'required\'">Por favor especifique el nombre del servidor.</span>\r\n                    </p>\r\n                </div>\r\n                <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input class="input is-medium" [(ngModel)]="servidor.secret_key"  [ngClass]="{ \'is-danger\': errores.secret_key != null}"  type="text" placeholder="Secret key" >\r\n                        \r\n                        <span class="icon is-small" *ngIf="errores.secret_key == \'required\'">\r\n                        <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="errores.secret_key == \'required\'">Por favor especifique el ID del servidor.</span>                            \r\n                    </p>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input class="input is-medium" [(ngModel)]="servidor.periodo_sincronizacion"  [ngClass]="{ \'is-danger\': errores.periodo_sincronizacion != null}"  type="text" placeholder="Periodo de sincronización (Horas)" >\r\n                        \r\n                        <span class="icon is-small" *ngIf="errores.periodo_sincronizacion == \'required\' || errores.periodo_sincronizacion == \'integer\'">\r\n                        <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="errores.periodo_sincronizacion == \'required\'">Por favor especifique el periodo de sincronización.</span>                            \r\n                        <span class="help is-danger" *ngIf="errores.periodo_sincronizacion == \'integer\'">Por favor el periodo de sincronizacion debe estar expresado en horas y en números enteros. Por ejemplo: 24.</span>                            \r\n                    </p>\r\n                </div>\r\n                <div class="field">\r\n                    <div class="control  ">\r\n                        <label class="checkbox">\r\n                        <input type="checkbox" [(ngModel)]="servidor.tiene_internet">\r\n                        Tiene internet\r\n                        </label> &nbsp; \r\n                        <label class="checkbox">\r\n                        <input type="checkbox" [(ngModel)]="servidor.principal">\r\n                        Es el principal\r\n                        </label>\r\n                    </div>\r\n                </div>   \r\n                <br>\r\n                    \r\n                <div class="control is-grouped">\r\n                    \r\n                    <p class="control">\r\n                        <a class="button is-medium is-primary " [ngClass]="{ \'is-loading\': enviando}" (click)="guardar()" >\r\n                        <span class="icon"><i class="fa fa-save"></i></span><span>Guardar</span>\r\n                        </a>\r\n                    </p><p class="control">\r\n                        <a class="button is-medium is-white " [ngClass]="{ \'is-disabled\': enviando}" routerLink="/panel-control/sync/servidores">Cancelar</a>\r\n                    </p>                    \r\n                </div>\r\n                           \r\n              \r\n              <br>\r\n              \r\n\r\n\r\n            </section>\r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br> \r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},Y6BS:function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n\t\t\r\n\t\t<div style="background: #FFF; border-radius: 1em; overflow: hidden; margin-top:1em;">\r\n\t\t\t\r\n\t\t\t<section class="hero is-primary" [ngClass]="{ \'is-success\': pedido.status == \'VAL\'}">\r\n\t\t\t\t<h1 class="title" style="margin:0.5em;" *ngIf="pedido.status == \'PV\'">\r\n\t\t\t\t\t<span class="icon is-medium"><i class="fa fa-check-square-o"></i></span> Validar Pedido alterno \r\n\t\t\t\t</h1>\r\n\t\t\t\t<h1 class="title" style="margin:0.5em;" *ngIf="pedido.status == \'VAL\'">\r\n\t\t\t\t\t<span class="icon is-medium"><i class="fa fa-check-circle"></i></span> Pedido alterno validado\r\n\t\t\t\t</h1>\r\n\t\t\t</section>\r\n\t\t\r\n\t\t\t<div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<br>\r\n\t\t\t</div>\r\n\t\t\t<table class="table"  *ngIf="!cargando">\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Folio:</th>\r\n\t\t\t\t\t\t<td>{{pedido.datosImprimir.folio}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Almacén:</th>\r\n\t\t\t\t\t\t<td>{{pedido.datosImprimir.almacen_solicitante.nombre}} / {{pedido.datosImprimir.unidad_medica.nombre}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Nombre del pedido:</th>\r\n\t\t\t\t\t\t<td>{{pedido.datosImprimir.descripcion}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Fecha:</th>\r\n\t\t\t\t\t\t<td>{{pedido.datosImprimir.fecha}}</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th>Observaciones:</th>\r\n\t\t\t\t\t\t<td>{{pedido.datosImprimir.observaciones}}</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t</tbody>\t\r\n\t\t\t</table>\r\n\t\t\t<hr>\r\n\t\t\t<div class="control " style="padding-left:10px;" *ngIf="!cargando">\r\n\t\t\t\r\n\t\t\t\t\t<a class="button is-success" *ngIf="pedido.status == \'PV\'" title="Validar Pedido" (click)="validar(); " [ngClass]="{\'is-loading\': validando}" >\r\n\t\t\t\t\t\t<span class="icon"><i class="fa fa-check"></i></span> &nbsp; Validar\r\n\t\t\t\t\t</a>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t\t<a class="button is-danger" *ngIf="pedido.status == \'PV\'" title="Rechazar Pedido" (click)="rechazar();" [ngClass]="{\'is-disabled\': validando}">\r\n\t\t\t\t\t\t<span class="icon"><i class="fa fa-times"></i></span> &nbsp; Rechazar\r\n\t\t\t\t\t</a>\r\n\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t<a class="button is-white" title="Imprimir Excel" (click)="imprimirExcel();" [ngClass]="{\'is-disabled\': validando}">\r\n\t\t\t\t\t\t<span class="icon"><i class="fa fa-file-excel-o"></i></span> &nbsp; Excel\r\n\t\t\t\t\t</a>\r\n\t\t\t\r\n\t\t\t\t\t<a class="button is-white  " title="Imprimir PDF" (click)="mostrarDialogo(); " [ngClass]="{\'is-disabled\': validando}">\r\n\t\t\t\t\t\t<span class="icon"><i class="fa fa-print"></i></span> &nbsp; PDF\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\r\n\t\t\t\t\t<a class="button is-white" routerLink="/administrador-central/validacion-pedidos-alternos/" [ngClass]="{\'is-disabled\': validando}" >Regresar</a>\r\n\t\t\t                \r\n\t\t\t</div>\r\n\t\t\t<section>\r\n\t\t\t\t<div class="control is-grouped">\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</section>\r\n\t\t</div>\r\n\t\t<br>\r\n\t\t<div class="contenedor-pedido" >\r\n\t\t\t<div class="top-bar" [ngClass]="{\'is-primary\':!pedido.filtro.activo,\'is-dark\': pedido.filtro.activo }">\r\n\t\t\t\t<span *ngIf="!pedido.filtro.activo">\r\n\t\t\t\t\tClaves: {{ pedido.lista.length | number }}\r\n\t\t\t\t\tInsumos: {{pedido.totalInsumos | number}} \r\n\t\t\t\t\tTotal: $ {{ pedido.totalMonto | number: \'1.2-2\' }}\r\n\t\t\t\t</span>\r\n\t\t\t\t<span *ngIf="pedido.filtro.activo"><span class="icon"><i class="fa fa-search"></i></span> Resultados: {{ pedido.filtro.lista.length }}</span>\r\n\t\t\t\t<!--a class="button is-primary  is-pulled-right" [ngClass]="{ \'is-inverted\': pedido.filtro.activo }" style="margin-top:-0.25em;" title="Recepciones" (click)="toggleModalRecepciones(); ">\r\n\t\t\t\t\t<span class="icon"><i class="fa fa-file"></i></span><span>Recepciones: {{pedido.datosImprimir.recepciones.length}}</span>\r\n\t\t\t\t</a-->\r\n\t\t\t\t<a *ngIf="pedido.status == \'EX\' && pedido.datosImprimir.tipo_pedido_id == \'PA\'" class="button is-danger is-pulled-right" (click)="mostrarDialogoCancelarPedido()"> <span class="icon"><i class="fa fa-ban"></i></span> <span>Cancelar Pedido</span></a>\r\n\t\t\t</div> \r\n\r\n\t\t\t<div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n\t\t\t\t<br>\r\n\t\t\t\t<span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n\t\t\t\t<br>\r\n\t\t\t\t<br>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em;">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr  >\r\n\t\t\t\t\t\t<th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n\t\t\t\t\t\t<th class="is-hidden-mobile" style="width:118px;">\r\n\t\t\t\t\t\t<p class="control is-expanded" >\r\n\t\t\t\t\t\t\t<input type="hidden" #searchBoxClavePrevia >\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxClave, searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t<th class="is-hidden-tablet">\r\n\t\t\t\t\t\t<p class="control is-expanded">\r\n\t\t\t\t\t\t\t<input type="hidden" #searchBoxDescripcionClavePrevia >\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</th>  \r\n\t\t\t\t\t\t<th style="vertical-align: middle;" class="is-hidden-mobile is-hidden-tablet-only" >Descripcion</th>                  \r\n\t\t\t\t\t\t<th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n\t\t\t\t\t\t<th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody *ngIf="!pedido.filtro.activo">\r\n\r\n\t\t\t\t\t<tr   *ngFor="let item of pedido.paginacion.lista; let i = index;">\r\n\t\t\t\t\t<td class="has-text-centered">{{ item.lote }}</td>\r\n\t\t\t\t\t<td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n\t\t\t\t\t\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n\t\t\t\t\t\t<div style="line-height:1em;">\r\n\t\t\t\t\t\t<small>{{ item.descripcion }}</small>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style="padding: 0.5em 0 0.5em 0; ">\r\n\t\t\t\t\t\t<span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n\t\t\t\t\t\t<span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n\t\t\t\t\t\t<span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n\t\t\t\t\t\t<span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n\t\t\t\t\t\t<span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n\t\t\t\t\t\t\t<span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n\t\t\t\t\t\t\t<span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\r\n\r\n\t\t\t\t\t<td style="width:78px !important;">\r\n\t\t\t\t\t\t<p class="control is-expanded">\r\n\t\t\t\t\t\t\t{{item.cantidad | number}}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td style="width:78px !important;">\r\n\t\t\t\t\t\t<b><abbr>${{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n\t\t\t\t\t</td> \r\n\t\t\t\t\t</tr>      \r\n\t\t\t\t</tbody>\r\n\t\t\t\t<tbody *ngIf="pedido.filtro.activo">\r\n\t\t\t\t\t<tr  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;">\r\n\t\t\t\t\t<td class="has-text-centered">{{ item.lote }}</td>\r\n\t\t\t\t\t<td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n\t\t\t\t\t\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n\t\t\t\t\t\t<!--div *ngIf="item.tipo != \'ME\'" style="line-height:1em;"-->\r\n\t\t\t\t\t\t<div style="line-height:1em;">\r\n\t\t\t\t\t\t<small>{{ item.descripcion }}</small>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style="padding: 0.5em 0 0.5em 0; ">\r\n\t\t\t\t\t\t<span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n\t\t\t\t\t\t<span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n\t\t\t\t\t\t<span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n\t\t\t\t\t\t<span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n\t\t\t\t\t\t<span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n\t\t\t\t\t\t\t<span *ngIf="item.informacion.es_controlado" class="tag is-info" style="font-size: 0.7em">Controlado</span>\r\n\t\t\t\t\t\t\t<span *ngIf="item.informacion.es_surfactante" class="tag is-info" style="font-size: 0.7em">Surfactante</span>  \r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t<td style="width:78px !important;">\r\n\t\t\t\t\t\t<p class="control is-expanded">\r\n\t\t\t\t\t\t\t{{item.cantidad | number}}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td style="width:78px !important;">\r\n\t\t\t\t\t\t<b><abbr>${{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n\t\t\t\t\t</td> \r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</tbody>              \r\n\t\t\t</table>\r\n\t\t\t\r\n\t\t\t<paginacion \r\n\t\t\t\t\t[total]="pedido.lista.length" \r\n\t\t\t\t\t[paginasTotales]="pedido.paginacion.totalPaginas" \r\n\t\t\t\t\t[resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n\t\t\t\t\t[paginaActual]="pedido.paginacion.paginaActual" \r\n\t\t\t\t\t[indicePaginas]="pedido.paginacion.indice"\r\n\t\t\t\t\t(onSiguiente)="pedido.paginaSiguiente()" \r\n\t\t\t\t\t(onAnterior)="pedido.paginaAnterior()" \r\n\t\t\t\t\t(onListar)="pedido.listar($event)" \r\n\t\t\t\t\t*ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n\t\t\t\r\n\t\t\t<paginacion \r\n\t\t\t\t\t[total]="pedido.filtro.lista.length" \r\n\t\t\t\t\t[paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n\t\t\t\t\t[resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n\t\t\t\t\t[paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n\t\t\t\t\t[indicePaginas]="pedido.filtro.paginacion.indice"\r\n\t\t\t\t\t(onSiguiente)="pedido.filtro.paginaSiguiente()" \r\n\t\t\t\t\t(onAnterior)="pedido.filtro.paginaAnterior()" \r\n\t\t\t\t\t(onListar)="pedido.filtro.listar($event)" \r\n\t\t\t\t\t*ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n\t\t\t<br>\r\n\t\t</div>\r\n      \r\n     \r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarImprimirDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogo()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-print"></i></span> Imprimir Pedido \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogo()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="columns is-multiline">\r\n          <div class="column is-one-quarter" *ngFor="let tipo of tiposSubPedidos">\r\n            <div class="card">\r\n              <header class="card-header">\r\n                <p class="card-header-title">\r\n                  {{subPedidos[tipo].titulo}}\r\n                </p>\r\n              </header>\r\n              <div class="card-content">\r\n                <div class="content">\r\n                  <strong>Total claves</strong>: {{subPedidos[tipo].claves | number}} <br>\r\n                  <strong>Total unidades</strong>: {{subPedidos[tipo].cantidad | number}} <br>\r\n                  <strong>Total monto</strong>: $ {{subPedidos[tipo].monto + ((subPedidos[tipo].tiene_iva)?+subPedidos[tipo].monto*16/100:0) | number:\'1.2-2\'}}\r\n                </div>\r\n              </div>\r\n              <footer class="card-footer">\r\n                <!--a class="card-footer-item" (click)="imprimir(tipo)" [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }">\r\n                  <span class="icon is-medium"><i class="fa fa-file-pdf-o"></i></span>&nbsp;<span>Descargar/Imprimir</span>\r\n                </a-->\r\n                <a class="button is-primary is-fullwidth" [ngClass]="{ \'is-loading\': cargandoPdf[tipo], \'is-inverted\': !cargandoPdf[tipo] }" title="Imprimir Pedido" (click)="imprimir(tipo)">\r\n                    <span class="icon"><i class="fa fa-file-pdf-o"></i></span> &nbsp; Descargar/Imprimir\r\n                </a>\r\n              </footer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        <div class="notification is-danger is-small" *ngIf="errorEnPDF">\r\n            <button class="delete" (click)="errorEnPDF = false"></button>        \r\n            <b>Error:</b> Ocurrio un error al generar el PDF<br><br>\r\n        </div>\r\n    </footer>\r\n  </div>\r\n</div>'},Y7Zo:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("skUF"),d=a("LLho"),u=a("Px6Q"),p=a("jQN0"),m=a("7gzm"),f=a("BFvY"),g=a("KAs4"),h=a("K4kt"),v=a("CWbX"),b=a("oSQj");a.n(b);a.d(e,"a",function(){return _});var y=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},_=function(){function t(){}return t}();_=y([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,g.a,v.a,b.NguiAutoCompleteModule],declarations:[p.a,m.a],providers:[f.a,h.a]})],_)},YWhS:function(t,e){t.exports='<administrador-proveedores-menu></administrador-proveedores-menu>\r\n\r\n<div class="contenedor" style="height:100%; padding:0.75rem; padding-top:0rem;">\r\n    <!--div class="column" style="position:relative; overflow-x:hidden;"-->\r\n        <div style="height:60px;"></div>\r\n        <div style="background: #FFF; overflow:hidden; border-radius:1em; width:100%;margin-bottom:1em;">\r\n            <table class="table" style="min-width:100%; font-size:0.8em; margin-bottom:0.2em;margin-top:0.2em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Presupuesto</th>\r\n                        <th style="text-align:center">Causes</th>\r\n                        <th style="text-align:center">No causes</th>\r\n                        <th style="text-align:center">Material de curación</th>\r\n                        <th style="text-align:center">Total</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngIf="cargandoPresupuestos">\r\n                        <th colspan="5" style="text-align:center"><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>&nbsp;Cargando Presupuesto...</th>\r\n                    </tr>\r\n                    <tr *ngIf="!cargandoPresupuestos">\r\n                        <td>Comprometido</td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.material_curacion_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.total_comprometido | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr *ngIf="!cargandoPresupuestos">\r\n                        <td>Devengado</td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.material_curacion_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.total_devengado | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr *ngIf="!cargandoPresupuestos">\r\n                        <td>Total Pedido</td>\r\n                        <td style="text-align:center"><span class="tag is-info">$ {{ presupuesto.total_causes | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-info">$ {{ presupuesto.total_no_causes | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-info">$ {{ presupuesto.total_material_curacion | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-info">$ {{ presupuesto.total_pedido | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!--table class="table" *ngIf="!cargando" style="min-width:100%; font-size:0.8em; margin-bottom:0.2em;margin-top:0.2em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Presupuesto</th>\r\n                        <th style="text-align:center">Autorizado</th>\r\n                        <th style="text-align:center">Comprometido</th>\r\n                        <th style="text-align:center">Devengado</th>\r\n                        <th style="text-align:center">Disponible</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <th>Causes</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.causes_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.causes_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>No causes</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.no_causes_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.no_causes_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Material de curación</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.material_curacion_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.material_curacion_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.material_curacion_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.material_curacion_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Total</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.total_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.total_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.total_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.total_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table-->\r\n         </div>\r\n            \r\n        <section class="hero is-primary"  style="  border-radius:  1em  1em 0  0;" >\r\n            \r\n            <div class="hero-body" style="position:relative;">                    \r\n                \r\n                <a class="button  is-primary" *ngIf="!cargando" style="position:absolute; top:1em; right:1em;" (click)="exportar()"><span class="icon "><i class="fa fa-file-excel-o"></i></span> <span>Exportar</span></a>\r\n                <div class="container is-fluid">\r\n                    \r\n                    <h1 class="title">\r\n                        <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Pedidos\r\n                    </h1>\r\n                    \r\n                    <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar por CLUES ó Folio ó Nombre del pedido" [(ngModel)] = "q" (keyup)="filtrarQuery($event)">\r\n                        </p>\r\n                        <!--div class="control">\r\n                            <button class="button is-primary" (click)="sin_pedidos = !sin_pedidos"><span class="icon"><i class="fa" [ngClass]="{\'fa-check-square-o\': sin_pedidos, \'fa-square-o\':!sin_pedidos }"></i></span> &nbsp;&nbsp;Sin pedidos</button>\r\n                        </div-->\r\n                    </div>\r\n                    <div class="columns">\r\n                        <div class="column">\r\n                            <label>Status:</label>\r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                <select #statusSelect (change)="cambioSeleccionStatus(statusSelect.value)">\r\n                                    <option value="-1">Todos</option>\r\n                                    <option *ngFor="let item of status" value="{{item.id}}">{{ item.descripcion }}</option>\r\n                                </select>\r\n                                </span>\r\n                            </p>                   \r\n                        </div>\r\n                        <div class="column">\r\n                            <label>Jurisdicciones:</label>\r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                <select #js id="jurisdicciones"  (change)="cambioSeleccionJurisdiccion(js.value)">\r\n                                    <option value="-1">Todas</option>\r\n                                    <option *ngFor="let item of jurisdicciones" value="{{item.id}}">JS {{ item.numero }} - {{ item.nombre }}</option>\r\n                                </select>\r\n                                </span>\r\n                            </p>\r\n                        </div>\r\n                        <div class="column">\r\n                            <label for="mes">Mes:</label>\r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                    <select [(ngModel)]="mes" name="mes">\r\n                                        <option *ngFor="let item of meses" [value]="item.id">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                </span>\r\n                            </p>\r\n                        </div>\r\n                        <div class="column">\r\n                            <label for="mes">Año:</label>\r\n                            <p class="control is-expanded">\r\n                                <input class="input" type="number" placeholder="2017" [(ngModel)] = "anio" (keyup)="filtrarQuery($event)">\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    <div *ngIf="jurisdiccionesSeleccionadas.length>0 || statusSeleccionados.length>0">\r\n                        <h1 class="title is-6">Filtro aplicado:</h1>\r\n                        <span class="tag is-white is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of jurisdiccionesSeleccionadas;  let i = index">JS {{ item.numero }}<button class="delete is-small" (click)="quitarJurisdiccion(i)"></button></span>\r\n                        <span class="tag is-warning is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of statusSeleccionados;  let i = index">{{ item.descripcion }}<button class="delete is-small" (click)="quitarStatus(i)"></button></span>\r\n                    </div>\r\n                    <nav class="level">\r\n                        <div class="level-left">\r\n                            <h1 class="title is-5">Resultados: <b>{{ total }}</b></h1>\r\n                        </div>\r\n                        <div class="level-right">\r\n                            <div class="block">\r\n                            <button class="button " *ngIf="jurisdiccionesSeleccionadas.length>0 || statusSeleccionados.length>0 || q != \'\' " (click)="q = \'\'; jurisdiccionesSeleccionadas = []; proveedoresSeleccionados = []; statusSeleccionados =[]; js.value = -1; statusSelect.value = -1;"><span class="icon"><i class="fa fa-times"></i></span> <span>Limpiar filtro</span></button>\r\n                            <button class="button is-primary is-inverted" (click)="listar(1)"><span class="icon"><i class="fa fa-filter"></i></span> <span>Filtrar</span></button>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n                \r\n                    \r\n                </div>\r\n            </div>\r\n        </section>\r\n        \r\n        <div  style="background: #FFF; overflow-x:auto; ">\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <table class="table" *ngIf="!cargando" style="min-width:100%; font-size:0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan="12">\r\n                            Status: \r\n                            <span class="icon sin-surtir"><i class="fa fa-circle"></i></span> Sin Surtir | \r\n                            <span class="icon surtiendo"><i class="fa fa-minus-circle"></i></span> Surtiendo | \r\n                            <span class="icon surtido"><i class="fa fa-check-circle"></i></span> Surtido | \r\n                            <span class="icon farmacia"><i class="fa fa-cubes"></i></span> Farmacia |\r\n                            <span class="icon expirado"><i class="fa fa-exclamation-circle"></i></span> Expirado |\r\n                            <span class="icon cancelado"><i class="fa fa-times-circle"></i></span> Cancelado\r\n                        </th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th></th>\r\n                        <th style="text-align:center;">Fecha</th>\r\n                        <th colspan="2" style="text-align:center;">Total</th>\r\n                        <th class="causes" colspan="2" style="text-align:center;">Causes</th>\r\n                        <th class="no-causes" colspan="2" style="text-align:center;">No causes</th>\r\n                        <th class="material-curacion" colspan="2" style="text-align:center;">Mat. de curación</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th style="text-align:center;">Status</th>\r\n                        <th>Folio/Nombre del Pedido/Unidad Medica</th>\r\n                        <!--th>Nombre</th>\r\n                        <th>Unidad médica</th-->\r\n                        <th style="text-align:center;">Pedido [Expiración]</th>\r\n                        \r\n                        <th style="text-align:center;">Claves</th>\r\n                        <th style="text-align:center;">Monto</th>\r\n\r\n                        <th class="causes" style="text-align:center;">Claves</th>\r\n                        <th class="causes" style="text-align:center;">Monto</th>\r\n\r\n                        <th class="no-causes" style="text-align:center;">Claves</th>\r\n                        <th class="no-causes" style="text-align:center;">Monto</th>\r\n\r\n                        <th class="material-curacion" style="text-align:center;">Claves</th>\r\n                        <th class="material-curacion" style="text-align:center;">Monto</th>\r\n\r\n                        <th style="text-align:center;">Archivos</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lista; let i=index"> \r\n                        <td [ngClass]="{\'surtido\':item.status==\'FI\',\'expirado\':item.status==\'EX\', \'cancelado\':item.status==\'EX-CA\',\'sin-surtir\':(item.total_cantidad_recibida==0 && item.status==\'PS\'),\'surtiendo\':(item.total_cantidad_recibida>0 && item.status==\'PS\'),\'farmacia\':item.status==\'EF\'}" style="text-align:center; vertical-align: middle;"><span class="icon is-medium"><i class="fa" [ngClass]="{\'fa-check-circle\':item.status==\'FI\',\'fa-times-circle\':item.status==\'EX-CA\',\'fa-exclamation-circle\':item.status==\'EX\',\'fa-circle\':(item.total_cantidad_recibida==0 && item.status == \'PS\'),\'fa-minus-circle\':(item.total_cantidad_recibida>0 && item.status == \'PS\'),\'fa-cubes\':item.status==\'EF\'}"></i></span></td>\r\n                        <td style="vertical-align: middle;"><strong>{{ item.folio }}</strong><br>{{item.unidad_medica}}<br>{{item.descripcion}}</td>\r\n                        <!--td style="vertical-align: middle;">{{ item.descripcion }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.unidad_medica }}</td-->\r\n                        <td style="text-align:center; vertical-align: middle;" [ngClass]="{\'estatus-rojo\':(item.status != \'EF\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}">\r\n                            {{ item.fecha_concluido | date:\'y-MM-dd\' }}<br>\r\n                            <span *ngIf="item.status != \'EF\'">\r\n                                [{{ item.fecha_expiracion | date:\'y-MM-dd\' }}]<br>\r\n                            </span>\r\n                            <strong *ngIf="item.status == \'PS\' && item.expira_en_dias >= 0">\r\n                                Expira <span *ngIf="item.expira_en_dias == 0">Hoy</span><span *ngIf="item.expira_en_dias > 0">en {{item.expira_en_dias}} día(s)</span>\r\n                            </strong>\r\n                            <strong *ngIf="item.status == \'EX\' && item.expira_en_dias < 0">\r\n                                <span *ngIf="item.status != \'EX-CA\'">Expirado  hace {{item.expira_en_dias*(-1)}} día(s)</span>\r\n                            </strong>\r\n                        </td>\r\n                        \r\n                        <td style="text-align:center; vertical-align: middle; white-space: nowrap;">{{ item.total_claves_recibidas }} / {{ item.total_claves_solicitadas }} <br> <strong>({{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}} %)</strong></td>\r\n                        <td style="text-align:center; vertical-align: middle;">$ {{ item.total_monto_recibido | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} <br> <strong>({{((item.total_monto_recibido/item.total_monto_solicitado)*100) | number:\'1.0-2\'}} %)</strong></td>\r\n\r\n                        <td class="causes"  style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_causes">{{ item.total_claves_causes_recibidas }} / {{ item.total_claves_causes }} <br> <strong>({{((item.total_claves_causes_recibidas/item.total_claves_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_causes"> --- </span>\r\n                        </td>\r\n                        <td class="causes"  style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_causes*1)">${{ item.total_monto_causes_recibido  | number:\'1.2-2\'}} / ${{ item.total_monto_causes  | number:\'1.2-2\'}} <br> <strong>({{((item.total_monto_causes_recibido/item.total_monto_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_causes*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <td class="no-causes" style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_no_causes">{{ item.total_claves_no_causes_recibidas }} / {{ item.total_claves_no_causes }} <br> <strong>({{((item.total_claves_no_causes_recibidas/item.total_claves_no_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_no_causes"> --- </span>\r\n                        </td>\r\n                        <td class="no-causes" style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_no_causes*1)">${{ item.total_monto_no_causes_recibido  | number:\'1.2-2\'}} / ${{ item.total_monto_no_causes  | number:\'1.2-2\'}} <br> <strong>({{((item.total_monto_no_causes_recibido/item.total_monto_no_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_no_causes*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <td class="material-curacion" style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_material_curacion">{{ item.total_claves_material_curacion_recibidas }} / {{ item.total_claves_material_curacion }} <br> <strong>({{((item.total_claves_material_curacion_recibidas/item.total_claves_material_curacion)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_material_curacion"> --- </span>\r\n                        </td>\r\n                        <td class="material-curacion" style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_material_curacion*1)">${{ item.total_monto_material_curacion_recibido | number:\'1.2-2\' }} / ${{ item.total_monto_material_curacion | number:\'1.2-2\' }} <br> <strong>({{((item.total_monto_material_curacion_recibido/item.total_monto_material_curacion)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_material_curacion*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <td style="text-align:center; vertical-align: middle; width: 130px">\r\n                            \r\n                            <button type="button" class="button"  (click)="mostrarDialogoPedidos(item.pedido_id)" >\r\n                                <span class="icon is-small"><i class="fa fa-archive"></i></span>\r\n                            </button>\r\n                            \r\n                            <button type="button" class="button" [ngClass]="{\'descargado\':item.repositorio>0 }" (click)="mostrarDialogoArchivos(item.pedido_id, item.folio)" >\r\n                                <span class="icon is-small"><i class="fa fa-upload"></i></span><span class="tag" [ngClass]="{\'color_tag_descargas\':item.repositorio>0 }"><b>{{ item.repositorio }}</b></span>\r\n                            </button>\r\n                            <!--a (click)="imprimirExcelItem(item.pedido_id)"><span class="icon"><i class="fa fa-file-excel-o"></i></span></a> <a><span class="icon"><i class="fa fa-file-pdf-o"></i></span></a-->\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="12" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div style="background: #FFF; border-radius: 0  0 1em  1em; width:100%;">\r\n        \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina"></paginacion>\r\n        </div>\r\n    <!--/div-->\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>\r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': verDialogoPedido}">\r\n  <div class="modal-background" (click)="cerrarDialogoPedidos()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-file"></i></span> {{datosPedido.folio}} \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogoPedidos()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoDatosPedido">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando datos del pedido...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <div class="columns is-multiline" *ngIf="!cargandoDatosPedido">\r\n          <div class="column is-one-quarter" *ngFor="let tipo of tiposSubPedidos">\r\n            <div class="card">\r\n              <header class="card-header">\r\n                <p class="card-header-title">\r\n                  {{subPedidos[tipo].titulo}}\r\n                </p>\r\n              </header>\r\n              <div class="card-content">\r\n                <div class="content">\r\n                  <strong>Total claves</strong>: {{subPedidos[tipo].claves | number}} <br>\r\n                  <strong>Total unidades</strong>: {{subPedidos[tipo].cantidad | number}} <br>\r\n                  <strong>Total monto</strong>: $ {{subPedidos[tipo].monto + ((subPedidos[tipo].tiene_iva)?+subPedidos[tipo].monto*16/100:0) | number:\'1.2-2\'}}\r\n                </div>\r\n              </div>\r\n              <footer class="card-footer">\r\n                <!--a class="card-footer-item" (click)="imprimirPedido(tipo)" [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }">\r\n                  <span class="icon is-medium"><i class="fa fa-file-pdf-o"></i></span>&nbsp;<span>Descargar/Imprimir</span>\r\n                </a-->\r\n                <a class="button is-primary is-fullwidth"  [ngClass]="{ \'is-loading\': cargandoPdf[tipo], \'is-inverted\': !cargandoPdf[tipo] }" title="Imprimir Pedido" (click)="imprimirPedido(tipo)">\r\n                    <span class="icon"><i class="fa fa-file-pdf-o"></i></span> &nbsp; Descargar/Imprimir\r\n                </a>\r\n              </footer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        <p class="control" *ngIf="!cargandoDatosPedido">\r\n            <button class="button is-medium is-primary " (click)="imprimirExcelPedido()" >\r\n            <span class="icon"><i class="fa fa-file-excel-o"></i></span><span>Excel del Pedido</span>\r\n            </button>\r\n        </p>\r\n        <div class="notification is-danger is-small" *ngIf="errorEnPDF">\r\n            <button class="delete" (click)="errorEnPDF = false"></button>        \r\n            <b>Error:</b> Ocurrio un error al generar el PDF<br><br>\r\n        </div>\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': verDialogoArchivo}">\r\n  <div class="modal-background" (click)="cerrarDialogoArchivos()"></div>\r\n  <div class="modal-card" style="width:70%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-file"></i></span> {{nombre_pedido}} \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogoArchivos()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoDatosArchivo">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando repositorio...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <div class="columns" *ngIf="!cargandoDatosArchivo">\r\n          <table class="table" *ngIf="!cargandoDatosArchivo" style="min-width:100%; font-size:0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th style="text-align:center;">Fecha Subido</th>\r\n                        <th style="text-align:center;">Nombre</th>\r\n                        <th style="text-align:center;">Peso</th>                        \r\n                        <th style="text-align:center;">Usuario</th>                        \r\n                        <th style="text-align:center;">Descargas</th>                        \r\n                        <th></th>\r\n                    </tr>\r\n                    \r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lista_repositorio; let i=index"> \r\n                        <td style="text-align: center;"><strong>{{ item.created_at }}</strong></td>  \r\n                        <td style="text-align: center;"><strong>{{ item.nombre_archivo }}</strong></td>   \r\n                        <td style="text-align: center;"><strong>{{ (item.peso/1024) | number : \'1.2-2\' }} Kb ({{(item.peso/1048576) | number : \'1.2-2\' }} Mb)</strong></td>   \r\n                        <td style="text-align: center;"><strong>{{ item.usuario_id }}</strong></td>   \r\n                         \r\n                        <td style="text-align: center;"><strong>{{ item.descargas }}</strong></td>   \r\n                        <td style="text-align: center;" *ngIf="!item.deleted_at">\r\n                        <button type="button" class="button is-primary"  (click)=\'descargar(item.id)\'><i class="fa fa-download"></i></button>\r\n                        <button type="button" class="button is-danger" (click)=\'eliminar_archivo(item.id)\'><i class="fa fa-close"></i></button></td>\r\n                        <td style="text-align: center;" *ngIf="item.deleted_at">\r\n                            <div class="block">\r\n                              <span class="tag is-danger">\r\n                                {{ item.usuario_deleted_id}} {{ item.deleted_at }}\r\n                                <!--button class="delete is-small"></button-->\r\n                              </span>\r\n                            </div>\r\n                        <!--<span class="tag is-danger"><button type="button" class="delete is-small"></button>{{ item.usuario_deleted_id}} {{ item.deleted_at }}</span>\r\n                        --></td>   \r\n                    </tr>\r\n                    <tr *ngIf="lista_repositorio.length == 0">\r\n                        <td colspan="12" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tfoot>\r\n                    <tr>\r\n                        <td colspan="6" style="text-align: center;"  *ngIf="!subir_archivo">\r\n                            <progress class="progress is-success" value="{{cargando_archivo}}" max="5"></progress>\r\n                        </td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td colspan="6"  style="text-align: center;" *ngIf="subir_archivo"> \r\n                            Subir Archivo <input type="file" (change)="fileChanged($event)" name="file" accept="application/pdf"><br><br>\r\n                            <button type="button" class="button is-primary" name="enviar" (click)="upload()">Subir Archivo</button>\r\n                        </td>\r\n\r\n                    </tr>\r\n                </tfoot>\r\n            </table>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n\r\n'},Yp9e:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333;position:relative}.contenedor-lista.con-tabs .top-bar{padding:.5em;border-radius:1em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-primary h1{color:#fff}.top-bar.is-danger{background:#ff3860;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-lista{background:#fff;border-radius:1em;overflow:hidden;margin:20px}tr.is-dark td,tr.is-dark th{background:#333;color:#fff}",""]),t.exports=t.exports.toString()},YryS:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.title=t,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return t.prototype.ngOnInit=function(){this.title.setTitle("Almacén / Artículos"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[],this.accesosDirectos=[{permiso:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk",icono:"assets/icono-catalogos.svg",titulo:"Catálogos",url:"/almacen-articulos/catalogos"}];var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(e.length>0){for(var a in this.modulos)t:for(var n in e)if(e[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break t}for(var a in this.accesosDirectos)t:for(var n in e)if(e[n]==this.accesosDirectos[a].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[a]);break t}}},t}();o=r([a.i(n.Component)({selector:"app-index-almacen-articulos",template:a("swHk"),styles:[a("IP0q")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},YtO7:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("ZIbx"),s=a("mZWb"),o=a("D9tw");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"inventario/ajuste-mas-inventario",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"ver/:id",component:s.a}],canActivate:[o.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},YvVs:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("qbdv"),s=a("BkNc"),o=a("bm2B"),c=a("/zHi"),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("bbdN")),h=(a.n(g),a("p5Ee")),v=a("gHRf"),b=a("Bbmo"),y=a("2cH3"),_=a("sYIv");a.d(e,"a",function(){return P});var x=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},j=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},P=function(){function t(t,e,a,n,i,r,s,o){this.title=t,this.location=e,this.router=a,this.route=n,this._ngZone=i,this.apiService=r,this.fb=s,this.cambiarEntornoService=o,this.cargando=!1,this.validando=!1,this.cargandoInsumos=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.mostrarImprimirDialogo=!1,this.tiposSubPedidos=[],this.subPedidos={},this.recepciones={},this.tieneRecepcionIniciada=!1,this.meses={1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"},this.dialogCancelarFechaTransferencia={},this.dialogCancelarMeses=[],this.errorCancelarPedido=!1,this.errorCancelarPedidoTexto="",this.cancelandoPedido=!1,this.formularioTitulo="Nuevo",this.esEditar=!1,this.mostrarModalInsumos=!1,this.porcentageTotalPedido=0,this.cargandoPdf={},this.errorEnPDF=!1}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Validar pedido alterno / Administrador central"),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.router.navigate(["/administrador-central/validacion-pedidos-alternos"])}),this.pdfworker=new Worker("web-workers/farmacia/pedidos/pedido-proveedor.js");var e=this,a=this._ngZone;this.pdfworker.onmessage=function(t){a.run(function(){console.log(t),e.cargandoPdf[t.data.tipoPedido]=!1}),g.saveAs(e.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.pdfworker.onerror=function(t){a.run(function(){console.log(t),e.errorEnPDF=!0})},this.pedido=new _.a(!0),this.route.params.subscribe(function(e){t.id=e.id,e.id?(t.cargando=!0,t.pedido.id=e.id,t.apiService.ver(e.id).subscribe(function(e){t.pedido.datosImprimir=e,t.pedido.status=e.status;for(var a in e.insumos){var n=e.insumos[a],i=n.insumos_con_descripcion;i.cantidad=+n.cantidad_solicitada,i.cantidad_recibida=+n.cantidad_recibida||0,i.monto=+n.monto_solicitado,i.monto_recibido=+n.monto_recibido||0,i.precio=+n.precio_unitario,t.pedido.lista.push(i);var r=!1,s="SC";s=n.tipo_insumo.clave,"MC"==n.tipo_insumo.clave&&(r=!0),t.subPedidos[s]||(t.tiposSubPedidos.push(s),t.cargandoPdf[s]=!1,t.subPedidos[s]={titulo:n.tipo_insumo.nombre,clave_folio:s,claves:0,cantidad:0,monto:0,iva:0,tiene_iva:r,lista:[]}),t.subPedidos[s].claves++,t.subPedidos[s].cantidad+=i.cantidad,t.subPedidos[s].monto+=i.monto,t.subPedidos[s].lista.push(i)}if("EF"!=e.status)for(var a in e.recepciones)"BR"==e.recepciones[a].entrada.status&&(t.tieneRecepcionIniciada=!0);e.insumos=void 0,t.pedido.indexar(),t.pedido.listar(1);var o=(t.pedido.datosImprimir.total_claves_recibidas||0)/t.pedido.lista.length*100,c=(t.pedido.datosImprimir.total_cantidad_recibida||0)/t.pedido.totalInsumos*100,l=(t.pedido.datosImprimir.total_monto_recibido||0)/t.pedido.totalMonto*100;t.porcentageTotalPedido=(c+o+l)/3,t.cargando=!1},function(e){t.cargando=!1,t.mensajeError=new v.a(!0),t.mensajeError=new v.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}),console.log("editar pedido")):console.log("nuevo pedido")})},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},t.prototype.mostrarFichaInformativa=function(t,e){t.preventDefault(),t.stopPropagation(),alert(e),console.log(e)},t.prototype.keyboardInput=function(t){32==t.keyCode&&t.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.mostrarModalInsumos=!0),39==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaSiguiente():this.pedido.paginaSiguiente()),37==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaAnterior():this.pedido.paginaAnterior())},t.prototype.imprimirExcel=function(){var t="token="+localStorage.getItem("token");window.open(h.a.API_URL+"/generar-excel-pedido/"+this.pedido.id+"?"+t)},t.prototype.imprimir=function(t){void 0===t&&(t="");try{this.cargandoPdf[t]=!0;var e={datos:this.pedido.datosImprimir,insumos:this.subPedidos[t]};this.pdfworker.postMessage(JSON.stringify(e))}catch(e){this.cargandoPdf[t]=!1,console.log(e)}},t.prototype.mostrarDialogo=function(){this.mostrarImprimirDialogo=!0},t.prototype.cerrarDialogo=function(){this.mostrarImprimirDialogo=!1},t.prototype.rechazar=function(){"RECHAZAR"==prompt("Para rechazar este pedido alterno, por favor escriba: RECHAZAR")&&alert("Dejé este botón pensando en que se podía rechazar. Sólo quítenlo si no aplica.")},t.prototype.validar=function(){var t=this;"VALIDAR"==prompt("Para validar este pedido alterno, por favor escriba: VALIDAR")&&(this.validando=!0,this.apiService.validar(this.id).subscribe(function(e){t.validando=!1,t.pedido.status=e.status,t.mensajeExito=new v.a(!0),t.mensajeExito.mostrar=!0,t.mensajeExito.texto="Pedido validado"},function(e){t.validando=!1,t.mensajeError=new v.a(!0),t.mensajeError.mostrar=!0;try{var a=e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),500==e.status?t.mensajeError.texto=a.error:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}))},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();P=x([a.i(n.Component)({selector:"app-validar",template:a("Y6BS"),styles:[a("kEBV")],host:{"(window:keydown)":"keyboardInput($event)"},providers:[b.a]}),j("design:paramtypes",["function"==typeof(I=void 0!==i.b&&i.b)&&I||Object,"function"==typeof(E=void 0!==r.Location&&r.Location)&&E||Object,"function"==typeof(k=void 0!==s.a&&s.a)&&k||Object,"function"==typeof(C=void 0!==s.c&&s.c)&&C||Object,"function"==typeof(A=void 0!==n.NgZone&&n.NgZone)&&A||Object,"function"==typeof(S=void 0!==b.a&&b.a)&&S||Object,"function"==typeof(q=void 0!==o.FormBuilder&&o.FormBuilder)&&q||Object,"function"==typeof(w=void 0!==y.a&&y.a)&&w||Object])],P);var I,E,k,C,A,S,q,w},ZIbx:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bbdN");a.n(i);a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this._ngZone=t,this.fecha_desde="",this.fecha_hasta="",this.usuario_lista="",this.cargandoPdf=!1}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.pdfworker=new Worker("web-workers/inventario/lista-ajuste-mas.js");var t=this,e=this._ngZone;this.pdfworker.onmessage=function(a){e.run(function(){t.cargandoPdf=!1}),i.saveAs(t.base64ToBlob(a.data.base64,"application/pdf"),a.data.fileName)}},t.prototype.export_excel=function(){var t="<table><tr><th colspan='7'><h1>Ajuste de inventario más</h1></th></tr><tr><th>Desde: "+this.fecha_desde+"</th><th>Hasta: "+this.fecha_hasta+"</th><th>Usuario: "+this.usuario_lista+"</th></tr><tr><th colspan='7'></th></tr></table>";t+=document.getElementById("exportable").innerHTML;var e=new Blob([t],{type:"text/comma-separated-values;charset=utf-8"});try{i.saveAs(e,"LISTA_AJUSTE_MAS.xls")}catch(t){console.log(t)}},t.prototype.imprimir=function(){try{var t={lista:this.dato,usuario:this.usuario,fecha_desde:this.fecha_desde,fecha_hasta:this.fecha_hasta,usuario_lista:this.usuario_lista};this.pdfworker.postMessage(JSON.stringify(t))}catch(t){this.cargandoPdf=!1}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();r([a.i(n.ViewChildren)("tr"),s("design:type",Object)],o.prototype,"tr",void 0),r([a.i(n.ViewChildren)("sr"),s("design:type",Object)],o.prototype,"sr",void 0),o=r([a.i(n.Component)({selector:"app-ajuste-mas-inventario",template:a("tOEk")}),s("design:paramtypes",["function"==typeof(c=void 0!==n.NgZone&&n.NgZone)&&c||Object])],o);var c},ZKLV:function(t,e,a){"use strict";var n=a("Dqrr"),i=(a.n(n),a("/oeL")),r=a("fc+i"),s=a("rlar"),o=(a.n(s),a("/zHi")),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("BFvY")),g=a("K4kt"),h=a("gHRf"),v=a("hN3r");a.d(e,"a",function(){return _});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_=function(){function t(t,e,a,n){this.title=t,this.crudService=e,this.authService=a,this.notificacion=n,this.cargando=!1,this.borrarCargando=!1,this.dato=[],this.respuesta=[],this.mensajeResponse=new h.a(!0),this.paginaActual=1,this.resultadosPorPagina=20,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=20,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[],this.borrarItem="",this.borrarIndex="",this.options={position:["bottom","left"],timeOut:2e3,lastOnBottom:!0}}return t.prototype.ngOnInit=function(){var t=this;this.listar(1),this.title.setTitle(this.titulo);var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.crudService.buscar(e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda,t.URL):n.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeResponse.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeResponse.texto="No tiene permiso para hacer esta operación.",e.mensajeResponse.clase="danger",this.mensaje(2))}catch(a){500==t.status?e.mensajeResponse.texto="500 (Error interno del servidor)":e.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",e.mensajeResponse.clase="danger",this.mensaje(2)}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1)})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,this.cargando=!0,this.crudService.buscar(t,e,this.resultadosPorPaginaBusqueda,this.URL).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1)},function(n){a.cargando=!1,a.mensajeResponse.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeResponse.texto="No tiene permiso para hacer esta operación.",a.mensajeResponse.clase="danger",a.mensaje(2))}catch(t){500==n.status?a.mensajeResponse.texto="500 (Error interno del servidor)":a.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",a.mensajeResponse.clase="danger",a.mensaje(2)}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,this.cargando=!0,this.crudService.lista(t,this.resultadosPorPagina,this.URL).subscribe(function(t){e.cargando=!1,e.dato=t.data,console.log(e.dato),e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);e.mensajeResponse.mostrar=!0,e.mensajeResponse.texto="lista cargada",e.mensajeResponse.clase="success",e.mensaje(2)},function(t){e.cargando=!1,e.mensajeResponse.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeResponse.texto="No tiene permiso para hacer esta operación.",e.mensajeResponse.clase="danger",e.mensaje(2))}catch(a){500==t.status?e.mensajeResponse.texto="500 (Error interno del servidor)":e.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",e.mensajeResponse.clase="danger",e.mensaje(2)}})},t.prototype.eliminar=function(t,e){this.borrarItem=t,this.borrarIndex=e,document.getElementById("confirmarEliminar").classList.add("is-active")},t.prototype.cancelarModal=function(){document.getElementById("confirmarEliminar").classList.remove("is-active")},t.prototype.borrar=function(t,e){var a=this;t.cargando=!0,this.borrarCargando=!0,this.crudService.eliminar(t.id,this.URL).subscribe(function(n){t.cargando=!1,a.borrarCargando=!1,a.dato.splice(e,1),a.mensajeResponse.mostrar=!0,a.mensajeResponse.texto="Se eliminó el elemento de la lista.",a.mensajeResponse.clase="success",a.mensaje(2),a.cancelarModal()},function(n){t.cargando=!1,a.borrarCargando=!1,a.mensajeResponse.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(t,e)},a.cancelarModal();try{n.json();401==n.status&&(a.mensajeResponse.texto="No tiene permiso para hacer esta operación.",a.mensajeResponse.clase="danger",a.mensaje(2))}catch(t){500==n.status?a.mensajeResponse.texto="500 (Error interno del servidor)":a.mensajeResponse.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.",a.mensajeResponse.clase="danger",a.mensaje(2)}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t.prototype.mensaje=function(t,e){void 0===t&&(t=6),void 0===e&&(e=["bottom","left"]);var a={showProgressBar:!0,pauseOnHover:!1,clickToClose:!0,maxLength:this.mensajeResponse.texto.length};this.options={position:e,timeOut:1e3*t,lastOnBottom:!0},""==this.mensajeResponse.titulo&&(this.mensajeResponse.titulo=this.titulo),"alert"==this.mensajeResponse.clase&&this.notificacion.alert(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"success"==this.mensajeResponse.clase&&this.notificacion.success(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"info"==this.mensajeResponse.clase&&this.notificacion.info(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"warning"!=this.mensajeResponse.clase&&"warn"!=this.mensajeResponse.clase||this.notificacion.warn(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"error"!=this.mensajeResponse.clase&&"danger"!=this.mensajeResponse.clase||this.notificacion.error(this.mensajeResponse.titulo,this.mensajeResponse.texto,a)},t}();b([a.i(i.Input)(),y("design:type",String)],_.prototype,"URL",void 0),b([a.i(i.Input)(),y("design:type",String)],_.prototype,"titulo",void 0),_=b([a.i(i.Component)({selector:"listar",template:'<simple-notifications [options]="options"></simple-notifications>\n    <div class="modal" id="confirmarEliminar">\n        <div class="modal-background"></div>\n        <div class="modal-card">\n            <header class="modal-card-head">\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\n            <button class="delete" (click)="cancelarModal()"></button>\n            </header>\n            <section class="modal-card-body">\n                <div class="content">\n                    <h1>¿Esta seguro de eliminar el elemento?</h1>\n                    <p>Ya no se podra recuperar la información</p>\n                </div>\n            </section>\n            <footer class="modal-card-foot">\n            <a class="button is-success" (click)="borrar(borrarItem, borrarIndex)" [ngClass]="{\'is-loading\': borrarCargando}">Continuar</a>\n            <a class="button" (click)="cancelarModal()">Cancelar</a>\n            </footer>\n        </div>\n    </div>'}),y("design:paramtypes",["function"==typeof(x=void 0!==r.b&&r.b)&&x||Object,"function"==typeof(j=void 0!==g.a&&g.a)&&j||Object,"function"==typeof(P=void 0!==f.a&&f.a)&&P||Object,"function"==typeof(I=void 0!==v.b&&v.b)&&I||Object])],_);var x,j,P,I},ZNEg:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},ZVPH:function(t,e){t.exports='<aside class="menu" style="padding: 1em;">\r\n    <div *ngFor="let item of menuAutorizado">\r\n        <br>\r\n        <p class="menu-label">{{ item.titulo }}</p>\r\n        <ul class="menu-list">\r\n            <li *ngFor="let modulo of item.modulos">\r\n                <a routerLink="{{ modulo.url }}" routerLinkActive="is-active">\r\n                    <span class="icon" ><i class="fa {{ modulo.icono }}"></i></span>&nbsp;&nbsp;<span>{{ modulo.titulo }}</span>\r\n                </a>\r\n            </li>    \r\n        </ul>\r\n    </div>\r\n        \r\n</aside>'},ZY5e:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("D9tw"),s=a("5wAI"),o=a("6oSH"),c=a("oPe8"),l=a("brX9");a.d(e,"a",function(){return p});var d=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},u=[{path:"almacen/entregas",redirectTo:"/almacen/entregas/por-surtir",pathMatch:"full"},{path:"almacen/entregas",children:[{path:"por-surtir",component:s.a},{path:"finalizadas",component:s.a},{path:"finalizadas/completas",component:s.a},{path:"finalizadas/incompletas",component:s.a},{path:"finalizadas/canceladas",component:s.a},{path:"historial",component:o.a},{path:"surtir/:id",component:c.a},{path:"ver/:id",component:l.a}],canActivate:[r.a]}],p=function(){function t(){}return t}();p=d([a.i(n.NgModule)({imports:[i.b.forChild(u)],exports:[i.b]})],p)},ZZEr:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},ZnYA:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bKpL"),r=(a.n(i),a("rlar")),s=(a.n(r),a("/zHi")),o=(a.n(s),a("S7im")),c=(a.n(o),a("azLz")),l=(a.n(c),a("MBEm")),d=(a.n(l),a("5v8a")),u=(a.n(d),a("Pic8")),p=(a.n(u),a("xpf9")),m=(a.n(p),a("gHRf")),f=a("ModC");a.d(e,"a",function(){return v});var g=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},h=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},v=function(){function t(t){this.buscarInsumosService=t,this.onCerrar=new n.EventEmitter,this.onEnviar=new n.EventEmitter,this.listaAgregadosConClues=[],this.conPrecios=!1,this.conCantidad=!0,this.conClues=!1,this.tipo=null,this.cargando=!1,this.insumos=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new r.Subject,this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.listaClues=[],this.clues=-1,this.listaCluesUtilizadasConInsumo=[],this.mensajeError=new m.a,this.mensajeAgregado=new m.a,this.cantidadValida=!1}return t.prototype.ngOnInit=function(){var t=this;console.log("Se supone me vuelvo a ejectuar"),console.log(this.listaAgregadosConClues);var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."),t.ultimoTerminoBuscado=e,t.paginaActual=1,t.cargando=!0,e?t.buscarInsumosService.buscar(e,t.paginaActual,t.resultadosPorPagina,t.conPrecios,t.tipo):i.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError=new m.a,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listar(e.ultimoTerminoBuscado,e.paginaActual)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),0==t.status&&(e.mensajeError.texto="El servidor no responde.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resetItemSeleccionado(),t.insumos=e.data,t.total=0|e.total,t.paginasTotales=Math.ceil(t.total/t.resultadosPorPagina),t.indicePaginas=[];for(var a=0;a<t.paginasTotales;a++)t.indicePaginas.push(a+1);console.log("Búsqueda cargada.")}),console.log(this.conClues),this.conClues&&this.buscarInsumosService.clues().subscribe(function(e){t.listaClues=e},function(t){console.log(t)})},t.prototype.ngAfterViewInit=function(){var t=this;try{setTimeout(function(){t.searchBoxViewChildren.first.nativeElement.focus()})}catch(t){console.log(t)}},t.prototype.cerrar=function(){this.searchBoxViewChildren.first.nativeElement.value="",this.onCerrar.emit()},t.prototype.resetItemSeleccionado=function(){this.cantidadBoxViewChildren.first.nativeElement.value="",this.insumoSeleccionado=null,this.cantidadValida=!1},t.prototype.seleccionar=function(t){var e=this;if(this.insumoSeleccionado=t,this.cantidadBoxViewChildren.first.nativeElement.disabled=!1,this.conClues){this.listaCluesUtilizadasConInsumo=[];for(var a in this.listaAgregadosConClues)if(this.listaAgregadosConClues[a].clave==t.clave){for(var n in this.listaAgregadosConClues[a].lista)this.listaCluesUtilizadasConInsumo.push(this.listaAgregadosConClues[a].lista[n]);break}try{setTimeout(function(){e.cluesSelectViewChildren.first.nativeElement.focus()})}catch(t){console.log(t)}}else this.cantidadBoxViewChildren.first.nativeElement.focus()},t.prototype.comprobarCantidad=function(t){return""==t.replace(/ /g,"")?(this.cantidadValida=!1,!1):isNaN(t)?(this.cantidadValida=!1,!1):0!=t%1?(this.cantidadValida=!1,!1):(this.cantidadValida=!0,!0)},t.prototype.enviar=function(t){var e=this;if(t.preventDefault(),console.log(this.clues),!this.conClues&&this.listaAgregados.indexOf(this.insumoSeleccionado.clave)>=0)return this.mensajeError=new m.a(!0,2),this.mensajeError.texto="El insumo seleccionado ya se encuentra en la lista",void(this.mensajeError.mostrar=!0);if(this.conClues){var a=!1;if("TODAS"==this.clues){this.listaAgregadosConClues.push({clave:this.insumoSeleccionado.clave,lista:[]});var n=this.listaAgregadosConClues.length-1;console.log(n);for(var i in this.listaClues){this.listaAgregadosConClues[n].lista.push(this.listaClues[i].clues);var r={insumo:this.insumoSeleccionado,clues:this.listaClues[i].clues,nombre:this.listaClues[i].nombre,cantidad:Number(this.cantidadBoxViewChildren.first.nativeElement.value)};console.log(r),this.listaCluesUtilizadasConInsumo.push(this.listaClues[i].clues),this.onEnviar.emit(r)}this.mensajeAgregado=new m.a(!0,2),this.mensajeAgregado.mostrar=!0,this.cluesSelectViewChildren.first.nativeElement.value=-1,this.cantidadBoxViewChildren.first.nativeElement.value="",this.clues=-1;try{setTimeout(function(){e.searchBoxViewChildren.first.nativeElement.focus()})}catch(t){console.log(t)}}else{for(var i in this.listaAgregadosConClues)if(this.listaAgregadosConClues[i].clave==this.insumoSeleccionado.clave){if(a=!0,this.listaAgregadosConClues[i].lista.indexOf(this.clues)>=0)return this.mensajeError=new m.a(!0,2),this.mensajeError.texto="La unidad seleccionada ya tiene asignado ese insumo asignado",void(this.mensajeError.mostrar=!0);this.listaAgregadosConClues[i].lista.push(this.clues);break}a||this.listaAgregadosConClues.push({clave:this.insumoSeleccionado.clave,lista:[this.clues]});var s={clues:"",nombre:""};for(var i in this.listaClues)this.listaClues[i].clues==this.clues&&(s.clues=this.clues,s.nombre=this.listaClues[i].nombre);var o={insumo:this.insumoSeleccionado,clues:this.clues,nombre:s.nombre,cantidad:Number(this.cantidadBoxViewChildren.first.nativeElement.value)};this.mensajeAgregado=new m.a(!0,2),this.mensajeAgregado.mostrar=!0,this.onEnviar.emit(o),this.listaCluesUtilizadasConInsumo.push(this.clues),this.cluesSelectViewChildren.first.nativeElement.value=-1,this.clues=-1;try{setTimeout(function(){e.cluesSelectViewChildren.first.nativeElement.focus()})}catch(t){console.log(t)}}}else this.mensajeAgregado=new m.a(!0,2),this.mensajeAgregado.mostrar=!0,this.insumoSeleccionado.cantidad=this.cantidadBoxViewChildren.first.nativeElement.value,this.onEnviar.emit(this.insumoSeleccionado),this.searchBoxViewChildren.first.nativeElement.focus(),this.listaAgregados.push(this.insumoSeleccionado.clave),this.resetItemSeleccionado()},t.prototype.buscar=function(t){this.terminosBusqueda.next(t),this.mensajeError.mostrar=!1},t.prototype.listar=function(t,e){var a=this;this.paginaActual=e,this.resetItemSeleccionado(),console.log("Cargando insumos."),this.cargando=!0,this.buscarInsumosService.buscar(t,e,this.resultadosPorPagina,this.conPrecios,this.tipo).subscribe(function(t){a.cargando=!1,a.insumos=t.data,a.total=0|t.total,a.paginasTotales=Math.ceil(a.total/a.resultadosPorPagina),a.indicePaginas=[];for(var e=0;e<a.paginasTotales;e++)a.indicePaginas.push(e+1);console.log("Insumos cargados."),console.log(a.insumos)},function(t){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=a.listar;try{t.json();401==t.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==t.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.mostrarFichaInformativa=function(t,e){t.preventDefault(),t.stopPropagation(),alert(e),console.log(e)},t.prototype.paginaSiguiente=function(t){this.paginaActual!=this.paginasTotales&&(this.resetItemSeleccionado(),this.listar(t,this.paginaActual+1))},t.prototype.paginaAnterior=function(t){1!=this.paginaActual&&(this.resetItemSeleccionado(),this.listar(t,this.paginaActual-1))},t.prototype.keyboardInput=function(t){27==t.keyCode&&(event.preventDefault(),event.stopPropagation(),this.cerrar()),39==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.paginaSiguiente(this.searchBoxViewChildren.first.nativeElement.value)),37==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.paginaAnterior(this.searchBoxViewChildren.first.nativeElement.value))},t.prototype.seleccionarClues=function(t){var e=this;this.clues=t;try{setTimeout(function(){e.cantidadBoxViewChildren.first.nativeElement.focus()})}catch(t){console.log(t)}},t}();g([a.i(n.ViewChildren)("searchBox"),h("design:type",Object)],v.prototype,"searchBoxViewChildren",void 0),g([a.i(n.ViewChildren)("cantidadBox"),h("design:type",Object)],v.prototype,"cantidadBoxViewChildren",void 0),g([a.i(n.ViewChildren)("cluesSelect"),h("design:type",Object)],v.prototype,"cluesSelectViewChildren",void 0),g([a.i(n.Output)(),h("design:type",Object)],v.prototype,"onCerrar",void 0),g([a.i(n.Output)(),h("design:type",Object)],v.prototype,"onEnviar",void 0),g([a.i(n.Input)(),h("design:type",Object)],v.prototype,"listaAgregados",void 0),g([a.i(n.Input)(),h("design:type",Array)],v.prototype,"listaAgregadosConClues",void 0),g([a.i(n.Input)(),h("design:type",Boolean)],v.prototype,"conPrecios",void 0),g([a.i(n.Input)(),h("design:type",Boolean)],v.prototype,"conCantidad",void 0),g([a.i(n.Input)(),h("design:type",Boolean)],v.prototype,"conClues",void 0),g([a.i(n.Input)(),h("design:type",String)],v.prototype,"tipo",void 0),v=g([a.i(n.Component)({selector:"buscar-insumos",template:a("QOK7"),styles:[a("aHtk")],host:{"(document:keydown)":"keyboardInput($event)"}}),h("design:paramtypes",["function"==typeof(b=void 0!==f.a&&f.a)&&b||Object])],v);var b},ZrNI:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},a75F:function(t,e){t.exports='<div class="menu" style="padding: 1em; padding-bottom:0;">\r\n    <ul class="menu-list">\r\n        <li>\r\n            <a (click)="toggleMinimizado = !toggleMinimizado">\r\n                <span class="icon" ><i class="fa {{(toggleMinimizado)?\'fa-chevron-right\':\'fa-chevron-left\'}}"></i></span>\r\n            </a>\r\n        </li>    \r\n    </ul>\r\n</div>\r\n<aside class="menu" style="padding: 1em;">\r\n    <div *ngFor="let item of menuAutorizado">\r\n        <p *ngIf="!toggleMinimizado" class="menu-label">{{ item.titulo }}</p>\r\n        <ul class="menu-list">\r\n            <li *ngFor="let modulo of item.modulos">\r\n                <a routerLink="{{ modulo.url }}" routerLinkActive="is-active">\r\n                    <span class="icon" ><i class="fa {{ modulo.icono }}"></i></span><span *ngIf="!toggleMinimizado">&nbsp;&nbsp;{{ modulo.titulo }}</span>\r\n                </a>\r\n            </li>    \r\n        </ul>\r\n    </div>    \r\n</aside>'},a923:function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <div style="height:50px;"></div>\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column" style="position:relative; overflow-x:hidden;">\r\n        <div style="height:60px;"></div>\r\n        <div style="background: #FFF; overflow:hidden; border-radius:1em; width:100%;margin-bottom:1em;">\r\n            <table class="table" *ngIf="!cargando" style="min-width:100%; font-size:0.8em; margin-bottom:0.2em;margin-top:0.2em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Presupuesto anual</th>\r\n                        <th style="text-align:center">Autorizado</th>\r\n                        <th style="text-align:center">Comprometido</th>\r\n                        <th style="text-align:center">Devengado</th>\r\n                        <th style="text-align:center">Disponible</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <th>Causes</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.causes_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.causes_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>No causes</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.no_causes_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.no_causes_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Material de curación</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.material_curacion_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.material_curacion_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.material_curacion_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.material_curacion_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Total</th>\r\n                        <td style="text-align:center"><span class="tag is-primary">$ {{ presupuesto.total_modificado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-warning"> $ {{ presupuesto.total_comprometido | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-danger">$ {{ presupuesto.total_devengado | number:\'1.2-2\' }}</span></td>\r\n                        <td style="text-align:center"><span class="tag is-success">$ {{ presupuesto.total_disponible | number:\'1.2-2\' }}</span></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n         </div>\r\n            \r\n        <section class="hero is-primary"  style="  border-radius:  1em  1em 0  0;" >\r\n            \r\n            <div class="hero-body" style="position:relative;">                    \r\n                \r\n                <a class="button  is-primary" *ngIf="!cargando" style="position:absolute; top:1em; right:1em;" (click)="exportar()"><span class="icon "><i class="fa fa-file-excel-o"></i></span> <span>Exportar</span></a>\r\n                <div class="container is-fluid">\r\n                    \r\n                    <h1 class="title">\r\n                        <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Pedidos\r\n                    </h1>\r\n                    \r\n                    <div class="control is-grouped">\r\n                    <p class="control is-expanded">\r\n                        <input class="input is-medium" type="text" placeholder="Buscar por CLUES ó Folio ó Nombre del pedido" [(ngModel)] = "q" (keyup)="filtrarQuery($event)">\r\n                    </p>\r\n                    </div>\r\n                    <div class="columns">                            \r\n                        <div class="column">\r\n                            <label>Proveedores:</label>\r\n                    \r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                <select #proveedoresSelect (change)="cambioSeleccionProveedor(proveedoresSelect.value)">\r\n                                    <option value="-1">Todos</option>\r\n                                    <option *ngFor="let item of proveedores" value="{{item.id}}">{{ item.nombre }}</option>\r\n                                </select>\r\n                                </span>\r\n                            </p>                   \r\n                        \r\n                        </div>\r\n                        <div class="column">\r\n                            <label>Jurisdicciones:</label>\r\n                            \r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                <select #js id="jurisdicciones"  (change)="cambioSeleccionJurisdiccion(js.value)">\r\n                                    <option value="-1">Todas</option>\r\n                                    <option *ngFor="let item of jurisdicciones" value="{{item.id}}">JS {{ item.numero }} - {{ item.nombre }}</option>\r\n                                </select>\r\n                                </span>\r\n                            </p>\r\n                                                    \r\n                            \r\n                        </div>\r\n                    </div>\r\n                    <div class="columns">                            \r\n                        <div class="column">\r\n                            <label>Status:</label>\r\n                            <p class="control is-expanded">\r\n                                <span class="select is-fullwidth">\r\n                                <select #statusSelect (change)="cambioSeleccionStatus(statusSelect.value)">\r\n                                    <option value="-1">Todos</option>\r\n                                    <option *ngFor="let item of status" value="{{item.id}}">{{ item.descripcion }}</option>\r\n                                </select>\r\n                                </span>\r\n                            </p>                   \r\n                        \r\n                        </div>\r\n                        <div class="column">\r\n                            <label for="jurisdicciones">Desde:</label>                             \r\n                            <p class="control is-expanded">\r\n                                <input class="input " type="date"  [(ngModel)] = "fecha_desde" >\r\n                            </p>\r\n                        </div>\r\n                        <div class="column">\r\n                            <label for="jurisdicciones">Hasta:</label>                             \r\n                            <p class="control is-expanded">\r\n                                <input class="input " type="date"  [(ngModel)] = "fecha_hasta" >\r\n                            </p>\r\n                        </div>\r\n                        <!--div class="column">\r\n                            <label>Sin Pedidos</label>\r\n                            <div class="control">\r\n                                <button class="button is-primary" (click)="sin_pedidos = !sin_pedidos"><span class="icon"><i class="fa" [ngClass]="{\'fa-check-square-o\': sin_pedidos, \'fa-square-o\':!sin_pedidos }"></i></span></button>\r\n                            </div>\r\n                        </div-->\r\n                    </div>\r\n\r\n                    <div *ngIf="jurisdiccionesSeleccionadas.length>0 || proveedoresSeleccionados.length>0 || statusSeleccionados.length>0">\r\n                        <h1 class="title is-6">Filtro aplicado:</h1>\r\n                        <span class="tag is-dark is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of proveedoresSeleccionados; let i = index">{{ item.nombre_corto }}<button class="delete is-small" (click)="quitarProveedor(i)"></button></span>\r\n                        <span class="tag is-white is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of jurisdiccionesSeleccionadas;  let i = index">JS {{ item.numero }}<button class="delete is-small" (click)="quitarJurisdiccion(i)"></button></span>\r\n                        <span class="tag is-warning is-medium" style="margin-bottom:0.5em; margin-right:0.2em;" *ngFor="let item of statusSeleccionados;  let i = index">{{ item.descripcion }}<button class="delete is-small" (click)="quitarStatus(i)"></button></span>\r\n                        \r\n                    </div>\r\n                    <nav class="level">\r\n                        <div class="level-left">\r\n                            <h1 class="title is-5">Resultados: <b>{{ total }}</b></h1>\r\n                        </div>\r\n                        <div class="level-right">\r\n                            <div class="block">\r\n                            <button class="button " *ngIf="jurisdiccionesSeleccionadas.length>0 || proveedoresSeleccionados.length>0  || statusSeleccionados.length>0 || q != \'\' || fecha_desde != null  || fecha_hasta != null " (click)="q = \'\'; jurisdiccionesSeleccionadas = []; proveedoresSeleccionados = []; statusSeleccionados =[]; js.value = -1; proveedoresSelect.value= -1; statusSelect.value = -1; fecha_desde = null; fecha_hasta = null; "><span class="icon"><i class="fa fa-times"></i></span> <span>Limpiar filtro</span></button>\r\n                            <button class="button is-primary is-inverted" (click)="listar(1)"><span class="icon"><i class="fa fa-filter"></i></span> <span>Filtrar</span></button>\r\n                            </div>\r\n                        </div>\r\n                    </nav>\r\n                \r\n                    \r\n                </div>\r\n            </div>\r\n        </section>\r\n        \r\n        <div  style="background: #FFF; overflow-x:auto; ">\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <table class="table" *ngIf="!cargando" style="min-width:100%; font-size:0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th colspan="16" style="vertical-align: middle;">\r\n                            Status: \r\n                            <span class="icon sin-surtir"><i class="fa fa-circle"></i></span> Sin Surtir | \r\n                            <span class="icon surtiendo"><i class="fa fa-minus-circle"></i></span> Surtiendo | \r\n                            <span class="icon surtido"><i class="fa fa-check-circle"></i></span> Surtido | \r\n                            <span class="icon farmacia"><i class="fa fa-cubes"></i></span> Farmacia |\r\n                            <span class="icon expirado"><i class="fa fa-exclamation-circle"></i></span> Expirado |\r\n                            <span class="icon cancelado"><i class="fa fa-times-circle"></i></span> Cancelado\r\n                        </th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th colspan="6"></th>\r\n                        <th colspan="2">Total</th>\r\n                        <th colspan="2">Causes</th>\r\n                        <th colspan="2">No causes</th>\r\n                        <th colspan="2">Mat. de curación</th>\r\n                        <th colspan="2"></th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Status</th>\r\n                        <th>Proveedor</th>\r\n                        <th>Folio</th>\r\n                        <th>Nombre</th>\r\n                        <th>Unidad médica</th>\r\n                        <th>Fecha</th>\r\n                        <th>Claves</th>\r\n                        <th>Monto</th>\r\n                        <th>Claves</th>\r\n                        <th>Monto</th>\r\n                        <th>Claves</th>\r\n                        <th>Monto</th>\r\n                        <th>Claves</th>\r\n                        <th>Monto</th>  \r\n                        <th>Exportar</th>\r\n                        <th>Remisiones</th>                        \r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lista; let i=index">\r\n                        <td [ngClass]="{\'borrador\':item.status==\'BR\',\'surtido\':item.status==\'FI\',\'expirado\':item.status==\'EX\',\'cancelado\':item.status==\'EX-CA\',\'sin-surtir\':(item.total_cantidad_recibida==0 && item.status==\'PS\'),\'surtiendo\':(item.total_cantidad_recibida>0 && item.status==\'PS\'),\'farmacia\':item.status==\'EF\'}" style="text-align:center; vertical-align: middle;"><span class="icon is-medium"><i class="fa" [ngClass]="{\'fa-pencil\':item.status==\'BR\',\'fa-check-circle\':item.status==\'FI\',\'fa-times-circle\':item.status==\'EX-CA\',\'fa-exclamation-circle\':item.status==\'EX\',\'fa-circle\':(item.total_cantidad_recibida==0 && item.status == \'PS\'),\'fa-minus-circle\':(item.total_cantidad_recibida>0 && item.status == \'PS\'),\'fa-cubes\':item.status==\'EF\'}"></i></span></td>\r\n                        <td style="vertical-align: middle;">\r\n                        <!--<button type="button" *ngIf="item.status!=\'EX-CA\' && item.status!=\'EF\' && item.status!=\'BR\'" class="button is-warning is-small" (click)=\'verInformacion(item)\'><i class="fa fa-exclamation-triangle"></i></button>--> \r\n                        {{ item.proveedor }}</td>\r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="item.status!=\'EF\' && item.status!=\'BR\'"><b><a class="surtiendo" (click)=\'verInformacion(item)\'>{{ (item.folio)?item.folio:\'S/F\' }}</a></b></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.status==\'EF\' || item.status==\'BR\'">{{ (item.folio)?item.folio:\'S/F\' }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.descripcion }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.unidad_medica }}</td>\r\n                        <td style="vertical-align: middle;">{{ item.fecha_concluido | date:\'y-MM-dd\' }}</td>\r\n\r\n                        <td style="text-align:center; vertical-align: middle; white-space: nowrap;">{{ item.total_claves_recibidas }} / {{ item.total_claves_solicitadas }} <br> <strong>({{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}} %)</strong></td>\r\n                        <td style="text-align:center; vertical-align: middle;">${{ item.total_monto_recibido | number:\'1.2-2\' }} / ${{ item.total_monto_solicitado | number:\'1.2-2\' }} <br> <strong>({{((item.total_monto_recibido/item.total_monto_solicitado)*100) | number:\'1.0-2\'}} %)</strong></td>\r\n\r\n                        <td class="causes"  style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_causes">{{ item.total_claves_causes_recibidas }} / {{ item.total_claves_causes }} <br> <strong>({{((item.total_claves_causes_recibidas/item.total_claves_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_causes"> --- </span>\r\n                        </td>\r\n                        <td class="causes"  style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_causes*1)">${{ item.total_monto_causes_recibido  | number:\'1.2-2\'}} / ${{ item.total_monto_causes  | number:\'1.2-2\'}} <br> <strong>({{((item.total_monto_causes_recibido/item.total_monto_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_causes*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <td class="no-causes" style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_no_causes">{{ item.total_claves_no_causes_recibidas }} / {{ item.total_claves_no_causes }} <br> <strong>({{((item.total_claves_no_causes_recibidas/item.total_claves_no_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_no_causes"> --- </span>\r\n                        </td>\r\n                        <td class="no-causes" style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_no_causes*1)">${{ item.total_monto_no_causes_recibido  | number:\'1.2-2\'}} / ${{ item.total_monto_no_causes  | number:\'1.2-2\'}} <br> <strong>({{((item.total_monto_no_causes_recibido/item.total_monto_no_causes)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_no_causes*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <td class="material-curacion" style="text-align:center; vertical-align: middle; white-space: nowrap;">\r\n                            <span *ngIf="item.total_claves_material_curacion">{{ item.total_claves_material_curacion_recibidas }} / {{ item.total_claves_material_curacion }} <br> <strong>({{((item.total_claves_material_curacion_recibidas/item.total_claves_material_curacion)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!item.total_claves_material_curacion"> --- </span>\r\n                        </td>\r\n                        <td class="material-curacion" style="text-align:center; vertical-align: middle;">\r\n                            <span *ngIf="(+item.total_monto_material_curacion*1)">${{ item.total_monto_material_curacion_recibido | number:\'1.2-2\' }} / ${{ item.total_monto_material_curacion | number:\'1.2-2\' }} <br> <strong>({{((item.total_monto_material_curacion_recibido/item.total_monto_material_curacion)*100) | number:\'1.0-2\'}} %)</strong></span>\r\n                            <span *ngIf="!(+item.total_monto_material_curacion*1)"> --- </span>\r\n                        </td>\r\n\r\n                        <!--td style="vertical-align: middle;">{{ item.status == \'BR\' ? \'Borrador\': item.status == \'TR\' ? \'En transito\': item.status == \'PS\' ? \'Por surtir\': item.status == \'FI\' ? \'Finalizado\': item.status == \'EX\' ? \'Expirado\': \'Otro\' }}</td-->\r\n\r\n                        <td style="vertical-align: middle; text-align:center;">\r\n                            <a (click)="imprimirExcelItem(item.pedido_id)"><span class="icon"><i class="fa fa-file-excel-o"></i></span></a> \r\n                            <!--a><span class="icon"><i class="fa fa-file-pdf-o"></i></span></a-->\r\n                        </td>\r\n                        <td style="vertical-align: middle; text-align:center;">\r\n                            <button type="button" class="button is-light" [ngClass]="{\'is-success\':item.numero_archivos > 0}" (click)="mostrarDialogoArchivos(item)">\r\n                                <span class="icon"><i class="fa fa-download"></i></span><span class="tag">{{ item.numero_archivos }}</span>\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div style="background: #FFF; border-radius: 0  0 1em  1em; width:100%;">\r\n        \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina"></paginacion>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="modal-pedido" class="modal is-active" [ngClass]="{\'is-active\': showPedido}">\r\n  <div class="modal-background"  (click)="showPedido = !showPedido"></div>\r\n  <div class="modal-card" style="width:60%; height: auto;">\r\n    <header class="modal-card-head" style="background-color: #00d1b2" >\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-user"></i></span> PEDIDO\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="showPedido = !showPedido"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n        <section class="section" style="padding:  1rem 1.5rem;">\r\n            <form name="form"  >\r\n                <table class="table">\r\n                    <thead>\r\n                        <th colspan="3">Datos Pedido</th>\r\n                         <th colspan="2"> \r\n                                <button type="button" class="button is-warning"  *ngIf="!borrador" [ngClass]="{\'is-loading\': cargaRecepciones}" [disabled]="borrador" (click)=\'regresarBorrador(datos_pedido.pedido_id)\'><i class="fa fa-exclamation-triangle"></i> REGRESAR A BORRADOR</button>\r\n                                <button type="button" class="button is-warning"  *ngIf="!borrador_cancelado" [ngClass]="{\'is-loading\': cargaRecepciones}" [disabled]="borrador_cancelado" (click)=\'regresarBorradorCancelador(datos_pedido.pedido_id)\'><i class="fa fa-exclamation-triangle"></i> REGRESAR A EXPIRADO</button>\r\n                            </th>\r\n                    </thead>\r\n                    <tbody >\r\n                        <tr>\r\n                            <td>\r\n                                <b>CLUES</b> <br>{{ datos_pedido.clues }}\r\n                            </td>\r\n                            <td>\r\n                                <b>FOLIO</b> <br>{{ datos_pedido.folio }}\r\n                            </td>\r\n                            <td>\r\n                                <b>FECHA</b> <br>{{ datos_pedido.fecha }}\r\n                            </td>\r\n                            <td>\r\n                                <b>FECHA EXPIRACION</b><br>{{ datos_pedido.fecha_expiracion }}\r\n                            </td>\r\n                           \r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <b>UNIDAD MEDICA:</b> \r\n                            </td>\r\n                            <td colspan="3">\r\n                                {{ datos_pedido.unidad_medica }}\r\n                            </td>\r\n                        </tr>\r\n                        <tr>    \r\n                            <td>\r\n                                <b>PROVEEDOR:</b>\r\n                            </td>\r\n                            <td colspan="3">\r\n                                {{ datos_pedido.proveedor }}\r\n                            </td>                            \r\n                        </tr>\r\n                        <tr>\r\n                            <td colspan="4"><b>RESUMEN</b></td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td><b>TOTAL CLAVES</b> <br>\r\n                                  {{ datos_pedido.total_claves_recibidas}} / {{ datos_pedido.total_claves_solicitadas}}\r\n                            </td>\r\n                            <td><b>TOTAL CANTIDAD INSUMOS</b> <br>\r\n                                {{ datos_pedido.total_cantidad_recibida}} / {{ datos_pedido.total_cantidad_solicitada}}\r\n                               \r\n                            </td>\r\n                            <td><b>TOTAL MONTO</b> <br>\r\n                                {{ datos_pedido.total_monto_recibido | currency:\'USD\':true:\'4.2-2\'}} / {{ datos_pedido.total_monto_solicitado | currency:\'USD\':true:\'4.2-2\'}}\r\n                            \r\n                            </td>\r\n\r\n                        </tr>\r\n                        \r\n                       \r\n                    </tbody>\r\n                </table>\r\n                <table class="table"   *ngIf="borrador_cancelado">\r\n                    <thead>\r\n                        <th>ACTUALIZADO</th>\r\n                        <th>ESTATUS</th>\r\n                        <th>CLAVES</th> \r\n                        <th>CANTIDAD INSUMOS</th>\r\n                        <th>MONTO</th>\r\n                        <th>ACCIONES</th>\r\n                    </thead>\r\n                    <tbody *ngIf="!cargaRecepciones">\r\n                        \r\n                        <tr *ngFor="let item of recepciones; let i=index" >  \r\n                            <!--<td>{{ item.movimiento.created_at }}</td>-->                      \r\n                            <td>{{ item.movimiento_borrados.updated_at }}</td>                      \r\n                            \r\n                            <td *ngIf="item.movimiento_borrados.status == \'FI\'">FINALIZADO</td>                      \r\n                            <td *ngIf="item.movimiento_borrados.status == \'BR\'">BORRADOR</td> \r\n                            <td *ngIf="item.movimiento_borrados.status == \'FI\'">{{ item.total_claves }}</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'BR\'">--</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'FI\'">{{ item.total_cantidad }}</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'BR\'">--</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'FI\'">{{ item.total_monto | currency:\'USD\':true:\'4.2-2\'}}</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'BR\'">--</td>\r\n                            <td *ngIf="item.movimiento_borrados.status == \'FI\'  && item.movimiento_borrados.deleted_at== null && datos_pedido.status!=\'EX-CA\'">\r\n                                <button type="button" class="button is-small is-danger" (click)=\'borrarRecepcion(item.movimiento_borrados.id)\' [disabled]=""><i class="fa fa-close"></i></button>\r\n                                <button type="button" class="button is-small is-primary" (click)=\'regresarBorrarRecepcion(item.movimiento_borrados.id)\' [disabled]=""><i class="fa fa-edit"></i></button>\r\n                            </td>                          \r\n                            <td *ngIf="(item.movimiento_borrados.status == \'BR\' || datos_pedido.status==\'EX-CA\') && item.movimiento_borrados.deleted_at== null "></td>\r\n                            <td *ngIf="item.movimiento_borrados.deleted_at!= null">\r\n                              <div class="block">\r\n                                  <span class="tag is-danger">\r\n                                    {{ item.borrado_por }} {{ item.borrado_al }}                                    \r\n                                  </span>\r\n                               </div>\r\n                            </td>\r\n                                                  \r\n                        </tr>\r\n                        <tr *ngIf="recepciones.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                    </tbody>\r\n                    <tbody>\r\n                        <tr *ngIf="cargaRecepciones">\r\n                            <td colspan="6" style="text-align: center;">\r\n                                <br>\r\n                                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                                <br>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <table class="table"   *ngIf="!borrador_cancelado">\r\n                    <thead>\r\n                        \r\n                        <th>MES</th>\r\n                        <th>AÑO</th>\r\n                        <th>CAUSES</th> \r\n                        <th>NO CAUSES</th> \r\n                        <th>MATERIAL DE CURACIÓN</th> \r\n                        <th>TOTAL TRANSACCIÓN</th> \r\n                        \r\n                    </thead>\r\n                    <tbody *ngIf="!cargaRecepciones">\r\n                        \r\n                        <tr *ngFor="let item of transaccion; let i=index" >  \r\n                            <td >{{ item.mes_texto }}</td>\r\n                            <td >{{ item.anio_destino }}</td>\r\n                            <td >{{ item.causes | currency:\'USD\':true:\'4.2-2\'}}</td>\r\n                            <td >{{ item.no_causes | currency:\'USD\':true:\'4.2-2\'}}</td>\r\n                            <td >{{ item.material_curacion | currency:\'USD\':true:\'4.2-2\'}}</td>\r\n                            <td >{{ item.total_monto_restante | currency:\'USD\':true:\'4.2-2\'}}</td>\r\n                                                  \r\n                        </tr>\r\n                        <tr *ngIf="transaccion.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                    </tbody>\r\n                    <tbody>\r\n                        <tr *ngIf="cargaRecepciones">\r\n                            <td colspan="6" style="text-align: center;">\r\n                                <br>\r\n                                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                                <br>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>   \r\n             \r\n            </form>\r\n        </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': verDialogoArchivos}">\r\n  <div class="modal-background" (click)="cerrarDialogoArchivos()"></div>\r\n  <div class="modal-card" style="width:70%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-file"></i></span> {{tituloDialogoArchivos}} \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogoArchivos()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargandoArchivos">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando repositorio...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <div class="columns" *ngIf="!cargandoArchivos">\r\n          <table class="table" *ngIf="!cargandoArchivos" style="min-width:100%; font-size:0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th style="text-align:center;">Fecha Subido</th>\r\n                        <th style="text-align:center;">Nombre</th>\r\n                        <th style="text-align:center;">Peso</th>                        \r\n                        <th style="text-align:center;">Usuario</th>                        \r\n                        <th style="text-align:center;">Descargas</th>                        \r\n                        <th></th>\r\n                    </tr>\r\n                    \r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lista_archivos_pedido; let i=index"> \r\n                        <td style="text-align: center;"><strong>{{ item.created_at }}</strong></td>  \r\n                        <td style="text-align: center;"><strong>{{ item.nombre_archivo }}</strong></td>   \r\n                        <td style="text-align: center;"><strong>{{ (item.peso/1024) | number : \'1.2-2\' }} Kb ({{(item.peso/1048576) | number : \'1.2-2\' }} Mb)</strong></td>\r\n                        <td style="text-align: center;"><strong>{{ item.usuario_id }}</strong></td>   \r\n                         \r\n                        <td style="text-align: center;"><strong>{{ item.descargas }}</strong></td>   \r\n                        <td style="text-align: center;" *ngIf="!item.deleted_at"><button (click)=\'descargar(item)\' type="button" class="button is-primary"><i class="fa fa-download"></i></button></td>\r\n                        <td style="text-align: center;" *ngIf="item.deleted_at">\r\n                            <div class="block">\r\n                              <span class="tag is-danger">\r\n                                {{ item.usuario_deleted_id}} {{ item.deleted_at }}\r\n                              </span>\r\n                            </div>\r\n                        </td>   \r\n                    </tr>\r\n                    <tr *ngIf="lista_archivos_pedido.length == 0">\r\n                        <td colspan="12" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n        \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em; z-index: 10000;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto; z-index: 10000;" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n'},aCNu:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("p5Ee"),s=a("gHRf"),o=a("bbdN"),c=(a.n(o),a("2cH3")),l=a("Tl3N");a.d(e,"a",function(){return p});var d=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,a,n){this.title=t,this.apiService=e,this._ngZone=a,this.cambiarEntornoService=n,this.cargando=!1,this.cargandoPresupuestos=!1,this.mensajeError=new s.a,this.mensajeExito=new s.a,this.q="",this.status=[],this.meses=[],this.jurisdicciones=[],this.statusSeleccionados=[],this.jurisdiccionesSeleccionadas=[],this.mes=null,this.anio=null,this.sin_pedidos=!1,this.ordenarCauses="",this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.presupuesto={},this.datosPedido={},this.verDialogoPedido=!1,this.verDialogoArchivo=!1,this.tiposSubPedidos=[],this.subPedidos={},this.cargandoDatosPedido=!1,this.cargandoDatosArchivo=!0,this.lista=[],this.lista_repositorio=[],this.paginaActual=1,this.resultadosPorPagina=30,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.cargandoPdf={},this.errorEnPDF=!1,this.cargando_archivo=0,this.subir_archivo=!0}return t.prototype.ngOnInit=function(){var t=this;this.mensajeError=new s.a,this.mensajeExito=new s.a,this.title.setTitle("Pedidos / Administrador Proveedores"),this.pdfworker=new Worker("web-workers/farmacia/pedidos/pedido-proveedor.js");var e=this,a=this._ngZone;this.pdfworker.onmessage=function(t){a.run(function(){e.cargandoPdf[t.data.tipoPedido]=!1}),o.saveAs(e.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.pdfworker.onerror=function(t){a.run(function(){e.errorEnPDF=!0}),console.log(t)};var n=new Date;this.anio=n.getFullYear(),this.mes=n.getMonth()+1,this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.listar(1),t.cargarJurisdicciones()}),this.listar(1),this.cargarJurisdicciones(),this.status=[{id:"PS",descripcion:"Por surtir"},{id:"FI",descripcion:"Surtido"},{id:"EF",descripcion:"En Farmacia"},{id:"EX",descripcion:"Expirados"},{id:"EX-CA",descripcion:"Cancelados"}],this.meses=[{id:0,nombre:"Todos"},{id:1,nombre:"Enero"},{id:2,nombre:"Febrero"},{id:3,nombre:"Marzo"},{id:4,nombre:"Abril"},{id:5,nombre:"Mayo"},{id:6,nombre:"Junio"},{id:7,nombre:"Julio"},{id:8,nombre:"Agosto"},{id:9,nombre:"Septiembre"},{id:10,nombre:"Octubre"},{id:11,nombre:"Noviembre"},{id:12,nombre:"Diciembre"}]},t.prototype.cargarJurisdicciones=function(){var t=this;this.apiService.jurisdicciones().subscribe(function(e){t.jurisdicciones=e},function(t){})},t.prototype.cambioSeleccionJurisdiccion=function(t){t==-1&&(this.jurisdiccionesSeleccionadas=[]),this.agregarJurisdiccion(t)},t.prototype.cambioSeleccionStatus=function(t){t==-1&&(this.statusSeleccionados=[]),this.agregarStatus(t)},t.prototype.agregarJurisdiccion=function(t){if(t!=-1){for(var e in this.jurisdiccionesSeleccionadas)if(this.jurisdiccionesSeleccionadas[e].id==t)return;for(var e in this.jurisdicciones)if(this.jurisdicciones[e].id==t){this.jurisdiccionesSeleccionadas.push(this.jurisdicciones[e]);break}}},t.prototype.agregarStatus=function(t){if(t!=-1){for(var e in this.statusSeleccionados)if(this.statusSeleccionados[e].id==t)return;for(var e in this.status)if(this.status[e].id==t){this.statusSeleccionados.push(this.status[e]);break}}},t.prototype.quitarJurisdiccion=function(t){this.jurisdiccionesSeleccionadas.splice(t,1)},t.prototype.quitarStatus=function(t){this.statusSeleccionados.splice(t,1)},t.prototype.filtrarQuery=function(t){13==t.keyCode&&this.listar(1)},t.prototype.toggleCauses=function(){switch(this.ordenarCauses){case"":this.ordenarCauses="ASC";break;case"ASC":this.ordenarCauses="DESC";break;case"DESC":this.ordenarCauses="";break;default:this.ordenarCauses=""}this.ordenarNoCauses="",this.ordenarMaterialCuracion="",this.listar(1)},t.prototype.toggleNoCauses=function(){switch(this.ordenarNoCauses){case"":this.ordenarNoCauses="ASC";break;case"ASC":this.ordenarNoCauses="DESC";break;case"DESC":this.ordenarNoCauses="";break;default:this.ordenarNoCauses=""}this.ordenarCauses="",this.ordenarMaterialCuracion="",this.listar(1)},t.prototype.toggleMaterialCuracion=function(){switch(this.ordenarMaterialCuracion){case"":this.ordenarMaterialCuracion="ASC";break;case"ASC":this.ordenarMaterialCuracion="DESC";break;case"DESC":this.ordenarMaterialCuracion="";break;default:this.ordenarMaterialCuracion=""}this.ordenarCauses="",this.ordenarNoCauses="",this.listar(1)},t.prototype.listar=function(t){var e=this;this.cargando=!0,this.paginaActual=t;var a=[];for(var n in this.jurisdiccionesSeleccionadas)a.push(this.jurisdiccionesSeleccionadas[n].id);var i=[];for(var n in this.statusSeleccionados)i.push(this.statusSeleccionados[n].id);var r={q:this.q,mes:this.mes,anio:this.anio,jurisdicciones:a,status:i,page:this.paginaActual,per_page:this.resultadosPorPagina,ordenar_causes:this.ordenarCauses,ordenar_no_causes:this.ordenarNoCauses,ordenar_material_curacion:this.ordenarMaterialCuracion};this.cargandoPresupuestos=!0,this.apiService.presupuesto(r).subscribe(function(t){e.cargandoPresupuestos=!1,e.presupuesto=t.data,e.presupuesto.total_comprometido=+t.data.causes_comprometido+ +t.data.no_causes_comprometido+ +t.data.material_curacion_comprometido,e.presupuesto.total_devengado=+t.data.causes_devengado+ +t.data.no_causes_devengado+ +t.data.material_curacion_devengado,e.presupuesto.total_causes=+e.presupuesto.causes_comprometido+ +e.presupuesto.causes_devengado,e.presupuesto.total_no_causes=+e.presupuesto.no_causes_comprometido+ +e.presupuesto.no_causes_devengado,e.presupuesto.total_material_curacion=+e.presupuesto.material_curacion_comprometido+ +e.presupuesto.material_curacion_devengado,e.presupuesto.total_pedido=+e.presupuesto.total_comprometido+ +e.presupuesto.total_devengado},function(t){e.cargandoPresupuestos=!1,console.log(t)}),this.apiService.pedidos(r).subscribe(function(t){e.cargando=!1,e.lista=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{var a=t.json();401==t.status?e.mensajeError.texto="No tiene permiso para hacer esta operación.":e.mensajeError.texto=a.error}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.fileChanged=function(t){var e=t.target;this.tag=e},t.prototype.upload=function(){if(this.tag){this.subir_archivo=!1;var t=this.tag.files[0],e=new FormData;e.append("file",t,t.name),e.append("id_pedido",this.id_pedido);var a=new XMLHttpRequest;a.upload.addEventListener("progress",function(t){});var n=this;a.open("POST",r.a.API_URL+"/repository",!0),a.setRequestHeader("Authorization","Bearer "+localStorage.getItem("token"));var i=JSON.parse(localStorage.getItem("usuario"));i.proveedor_activo&&a.setRequestHeader("X-Proveedor-Id",i.proveedor_activo.id),a.onreadystatechange=function(){a.readyState===XMLHttpRequest.DONE&&200===a.status&&n.actualiza_lista(),a.readyState===XMLHttpRequest.DONE&&200!=a.status&&(n.error_envio(),n.subir_archivo=!0),n.cargando_archivo=a.readyState},a.send(e)}else alert("ES NECESARIO ELEGIR UN ARCHIVO A SUBIR, VUELVA A INTENTARLO POR FAVOR")},t.prototype.actualiza_lista=function(){this.subir_archivo=!0,this.cargando_archivo=0,this.mostrarDialogoArchivos(this.id_pedido,this.nombre_pedido),this.mensajeExito.mostrar=!0,this.mensajeExito.iniciarCuentaAtras(),this.mensajeExito.texto="Se ha Guardado Exitosamente el documento";for(var t in this.lista)if(this.lista[t].pedido_id==this.id_pedido){this.lista[t].repositorio+=1;break}},t.prototype.error_envio=function(){this.mensajeError.mostrar=!0,this.mensajeError.texto="Ha ocurrido un error al enviar el archivo"},t.prototype.exportar=function(){var t="token="+localStorage.getItem("token")+"&ordenar_causes="+this.ordenarCauses+"&ordenar_no_causes="+this.ordenarNoCauses+"&ordenar_material_curacion="+this.ordenarMaterialCuracion,e=JSON.parse(localStorage.getItem("usuario"));e.proveedor_activo&&(t+="&proveedor="+e.proveedor_activo.id),""!=this.q&&(t+="&q="+this.q);var a="";for(var n in this.jurisdiccionesSeleccionadas)""!=a&&(a+=","),a+=""+this.jurisdiccionesSeleccionadas[n].id;""!=a&&(t+="&jurisdicciones="+a);var i="";for(var n in this.statusSeleccionados)""!=i&&(i+=","),i+=""+this.statusSeleccionados[n].id;""!=i&&(t+="&status="+i),null!=this.mes&&(t+="&mes="+this.mes),null!=this.anio&&(t+="&anio="+this.anio),window.open(r.a.API_URL+"/pedidos-administrador-proveedores-excel?"+t)},t.prototype.mostrarDialogoPedidos=function(t){var e=this;this.cargandoDatosPedido=!0,this.datosPedido={folio:t},this.tiposSubPedidos=[],this.subPedidos={},this.apiService.verPedido(t).subscribe(function(t){e.datosPedido=t;for(var a in t.insumos){var n=t.insumos[a],i=n.insumos_con_descripcion;i.cantidad=+n.cantidad_solicitada,i.monto=+n.monto_solicitado,i.precio=+n.precio_unitario;var r=!1,s="SC";s=n.tipo_insumo.clave,"MC"==n.tipo_insumo.clave&&(r=!0),e.subPedidos[s]||(e.tiposSubPedidos.push(s),e.cargandoPdf[s]=!1,e.subPedidos[s]={titulo:n.tipo_insumo.nombre,clave_folio:s,claves:0,cantidad:0,monto:0,iva:0,tiene_iva:r,lista:[]}),i.lote=e.subPedidos[s].lista.length+1,e.subPedidos[s].claves++,e.subPedidos[s].cantidad+=i.cantidad,e.subPedidos[s].monto+=i.monto,e.subPedidos[s].lista.push(i)}t.insumos=void 0,e.cargandoDatosPedido=!1},function(t){e.cargandoDatosPedido=!1,e.mensajeError=new s.a(!0),e.mensajeError.mostrar;try{var a=t.json();401==t.status?e.mensajeError.texto="No tiene permiso para hacer esta operación.":e.mensajeError.texto=a.error}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}),this.verDialogoPedido=!0},t.prototype.mostrarDialogoArchivos=function(t,e){var a=this;this.cargando_archivo=0,this.cargandoDatosArchivo=!0,this.datosPedido={folio:t},this.nombre_pedido=e,this.id_pedido=t,this.apiService.verArchivos(t).subscribe(function(t){a.lista_repositorio=t,a.cargandoDatosArchivo=!1},function(t){a.cargandoDatosArchivo=!1,a.mensajeError=new s.a(!0),a.mensajeError.mostrar;try{var e=t.json();401==t.status?a.mensajeError.texto="No tiene permiso para hacer esta operación.":a.mensajeError.texto=e.error}catch(e){500==t.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}),this.verDialogoArchivo=!0},t.prototype.eliminar_archivo=function(t){var e=this;confirm("¿Desea eliminar el archivo realmente?")&&this.apiService.eliminarArchivos(t).subscribe(function(t){e.mostrarDialogoArchivos(e.id_pedido,e.nombre_pedido),e.mensajeExito.mostrar=!0,e.mensajeExito.iniciarCuentaAtras(),e.mensajeExito.texto="Se ha Elimiinado Exitosamente el archivo";for(var a in e.lista)if(e.lista[a].pedido_id==e.id_pedido){e.lista[a].repositorio-=1;break}},function(t){e.mensajeError=new s.a(!0),e.mensajeError.mostrar;try{var a=t.json();401==t.status?e.mensajeError.texto="No tiene permiso para hacer esta operación.":e.mensajeError.texto=a.error}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.descargar=function(t){var e=t,a="token="+localStorage.getItem("token"),n=this,i=window.open(r.a.API_URL+"/download-file/"+e+"?"+a),s=0,o=setInterval(function(){s+=1,i.closed?(clearInterval(o),n.mostrarDialogoArchivos(n.id_pedido,n.nombre_pedido),n.mensajeError.mostrar=!1,n.mensajeExito.mostrar=!0,n.mensajeExito.iniciarCuentaAtras(),n.mensajeExito.texto="Se ha descargado correctamente el archivo"):5==s&&(clearInterval(o),i.close(),n.mensajeError.mostrar=!0,n.mensajeError.iniciarCuentaAtras(),n.mensajeError.texto="Ocurrio un error al intentar descargar el archivo.")},1e3)},t.prototype.imprimirExcelPedido=function(){var t="token="+localStorage.getItem("token");window.open(r.a.API_URL+"/generar-excel-pedido/"+this.datosPedido.id+"?"+t)},t.prototype.imprimirPedido=function(t){void 0===t&&(t="");try{this.cargandoPdf[t]=!0;var e={datos:this.datosPedido,insumos:this.subPedidos[t]};this.pdfworker.postMessage(JSON.stringify(e))}catch(e){this.cargandoPdf[t]=!1,console.log(e)}},t.prototype.cerrarDialogoPedidos=function(){this.verDialogoPedido=!1},t.prototype.cerrarDialogoArchivos=function(){this.verDialogoArchivo=!1},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();p=d([a.i(n.Component)({selector:"app-pedidos",template:a("YWhS"),styles:[a("Sycf")]}),u("design:paramtypes",["function"==typeof(m=void 0!==i.b&&i.b)&&m||Object,"function"==typeof(f=void 0!==l.a&&l.a)&&f||Object,"function"==typeof(g=void 0!==n.NgZone&&n.NgZone)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object])],p);var m,f,g,h},aHtk:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".mensaje-agregar{position:absolute;width:auto;bottom:0;right:1em;opacity:0;animation:mostrar .2s forwards ease-out;-webkit-animation:mostrar .2s forwards ease-out}@-webkit-keyframes mostrar{0%{bottom:0;opacity:0}to{bottom:3em;opacity:1}}@keyframes mostrar{0%{bottom:0;opacity:0}to{bottom:3em;opacity:1}}.item-seleccionado{background:#f5f5f5!important;font-weight:700!important}.is-disabled{color:#ddd}",""]),t.exports=t.exports.toString()},aIPN:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"aR8+":function(t,e,a){"use strict";function n(){var t=a("RaCy");return a("yTGw")(t),t}var i=a("fc+i"),r=a("/oeL"),s=a("bm2B"),o=a("CPp0"),c=a("TNb/"),l=(a.n(c),a("LxmL")),d=(a.n(l),a("Fwzv")),u=(a.n(d),a("wQAS")),p=a("K181"),m=a("nKUZ"),f=a("uAtf"),g=a("D9tw"),h=a("2qAn"),v=a("BFvY"),b=a("QTrI"),y=a("W4CS"),_=(a.n(y),a("vnfH")),x=a("h7At"),j=a("oeHx"),P=a("G8gi"),I=a("f5Uh"),E=a("Px6Q"),k=a("7W7s"),C=a("9YV7"),A=a("ca03"),S=a("RPvJ"),q=a("/L0i"),w=a("2oZm"),R=a("HMDJ"),B=a("ca5U"),O=a("Y7Zo"),N=a("KkWC"),M=a("RhIX"),L=a("uiQp"),F=a("1z/4"),D=a("gUxG"),T=a("F1l5"),z=a("pFLx"),U=a("vKfx"),V=a("CcWT"),H=a("7ssS"),Y=a("0zW+"),$=a("6Nnr"),G=a("h0k0"),J=a("1yot"),K=a("pBSs"),Q=a("PoHA"),Z=a("be4J"),X=a("pKBH"),W=a("VtnA"),tt=a("oN1m"),et=a("mfFy"),at=a("FazT"),nt=a("zcJe"),it=a("TYaA"),rt=a("cQn5"),st=a("cXTN"),ot=a("tqIa"),ct=a("rwrg");a.d(e,"a",function(){return dt});var lt=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},dt=function(){function t(){}return t}();dt=lt([a.i(r.NgModule)({declarations:[u.a,p.a,m.a,f.a],imports:[i.a,s.FormsModule,o.HttpModule,c.ChartModule,_.a,j.a,P.a,I.a,E.a,R.a,B.a,w.a,q.a,O.a,M.a,L.a,N.a,k.a,C.a,A.a,S.a,F.a,T.a,z.a,Z.a,U.a,V.a,H.a,$.a,Q.a,X.a,W.a,Y.a,G.a,J.a,K.a,tt.a,et.a,at.a,nt.a,it.a,rt.a,D.a,ct.a,ot.a,st.a,x.a],providers:[i.b,g.a,h.a,v.a,y.JwtHelper,b.a,{provide:l.HighchartsStatic,useFactory:n},d.Uploader],bootstrap:[u.a]})],dt)},aSkF:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("bKpL"),o=(a.n(s),a("rlar")),c=(a.n(o),a("/zHi")),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("slEG")),h=a("gHRf");a.d(e,"a",function(){return y});var v=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},b=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},y=function(){function t(t,e,a){this.title=t,this.route=e,this.pedidosService=a,this.cargando=!1,this.mensajeError=new h.a,this.mensajeExito=new h.a,this.titulo="Pedidos",this.icono="fa-file",this.pedidos=[],this.presupuesto={},this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new o.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=10,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;switch(this.route.snapshot.url[0].path){case"borradores":this.status="BR",this.titulo="Borradores",this.icono="fa-pencil-square-o";break;case"en-transito":this.status="ET",this.titulo="En transito",this.icono="fa-clock-o";break;case"por-surtir":this.status="PS",this.titulo="Por surtir",this.icono="fa-truck";break;case"expirados":this.status="EX",this.titulo="Expirados",this.icono="fa-exclamation-circle";break;case"farmacia-subrogada":this.status="EF",this.titulo="Farmacia Subrogada",this.icono="fa-building";break;case"finalizados":this.status="FI",this.icono="fa-check-circle",this.route.snapshot.url.length>1?"completos"==this.route.snapshot.url[1].path?this.titulo="Finalizados (completos)":"incompletos"==this.route.snapshot.url[1].path?this.titulo="Finalizados (incompletos)":"cancelados"==this.route.snapshot.url[1].path?this.titulo="Finalizados (cancelados)":this.titulo="Finalizados":this.titulo="Finalizados";break;default:this.titulo="Pedidos jurisdiccionales",this.icono="fa-file"}this.pedidosService.presupuesto().subscribe(function(e){t.cargando=!1,t.presupuesto=e.data},function(e){t.cargando=!1,console.log(e)}),this.title.setTitle("Pedidos jurisdiccionales"),this.listar(1),this.mensajeError=new h.a,this.mensajeExito=new h.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.pedidosService.buscar(t.status,e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):s.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1;var a=e.data;for(var n in a)a[n].created_at=a[n].created_at.replace(" ","T");t.resultadosBusqueda=a,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var i=0;i<t.paginasTotalesBusqueda;i++)t.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")})},t.prototype.obtenerDireccion=function(t,e){return"BR"==e?"/almacen/pedidos-jurisdiccionales/editar/"+t:"/almacen/pedidos-jurisdiccionales/ver/"+t},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.pedidosService.buscar(this.status,t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1;var e=t.data;for(var n in e)e[n].created_at=e[n].created_at.replace(" ","T");a.resultadosBusqueda=e,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var i=0;i<a.paginasTotalesBusqueda;i++)a.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando pedidos."),this.cargando=!0,this.pedidosService.lista(this.status,t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.pedidos=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Pedidos cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.eliminar=function(t,e){var a=this;t.cargando=!0,confirm("Desea eliminar el pedido?")?this.pedidosService.eliminar(t.id).subscribe(function(n){t.cargando=!1,a.pedidos.splice(e,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new h.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="Pedido eliminado"},function(n){t.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(t,e)};try{var i=n.json();401==n.status?a.mensajeError.texto="No tiene permiso para hacer esta operación.":a.mensajeError.texto=i.error}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}):t.cargando=!1},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();y=v([a.i(n.Component)({selector:"almacen-pedidos-lista",template:a("fA1b"),styles:[a("xI+Z")],providers:[g.a]}),b("design:paramtypes",["function"==typeof(_=void 0!==i.b&&i.b)&&_||Object,"function"==typeof(x=void 0!==r.c&&r.c)&&x||Object,"function"==typeof(j=void 0!==g.a&&g.a)&&j||Object])],y);var _,x,j},ahZZ:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("LmqL"),s=a("e3Yq"),o=a("oeHx"),c=a("G8gi");a.d(e,"a",function(){return d});var l=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},d=function(){function t(){}return t}();d=l([a.i(n.NgModule)({imports:[i.CommonModule,o.a,c.a,s.a],exports:[r.a],declarations:[r.a]})],d)},ajBO:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333;position:relative}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-primary h1{color:#fff}.top-bar.is-danger{background:#ff3860;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.top-bar.is-dark h1{color:#fff}.estatus-rojo{color:red!important}.estatus-amarillo{color:orange!important}.estatus-verde{color:#23d160}.estatus-azul{color:#3273dc}.estatus-normal{color:#555}",""]),t.exports=t.exports.toString()},ajxl:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.buscar=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get(l.URL,null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){var e=t.json().data,a=[];e.roles.map(function(t){a.push(""+t.id)});var n=[];e.unidades_medicas.map(function(t){n.push(t.clues)});var i=[];e.almacenes.map(function(t){i.push(t.id)});var r=e;return r.roles=a,r.unidades_medicas_objs=r.unidades_medicas,r.unidades_medicas=n,r.almacenes=i,r})},t.prototype.crear=function(t){return this.jwtRequest.post(l.URL,t).map(function(t){return t.json().data})},t.prototype.editar=function(t,e){return this.jwtRequest.put(l.URL,t,e).map(function(t){return t.json().data})},t.prototype.eliminar=function(t){return this.jwtRequest.delete(l.URL,t).map(function(t){return t.json().data})},t.prototype.listaUnidadesMedicas=function(){return this.jwtRequest.get("unidades-medicas",null,null).map(function(t){return t.json().data})},t}();c.URL="usuarios",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},amuA:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},bDKg:function(t,e){t.exports='<formulario #ctrl URL="movimientos" titulo="Salida  de almacén" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Salida de almacén\'" [icono]="\'assets/icono-salidas.svg\'" [url]="\'/almacen/salidas-estandar\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato">\r\n    <div class="contenedor columns " style="height:100%">\r\n        <div class="column is-one-third" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <h1 *ngIf="!tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> {{ctrl.moduloTitulo}}\r\n                    </h1>\r\n                    <h1 *ngIf="tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> Folio {{ctrl.id}}\r\n                    </h1>\r\n\r\n\r\n                </section>\r\n                <div style="padding: 1em;">\r\n\r\n                    <h3 class="title">\r\n                        <i class="fa fa-file"></i>\r\n                         Datos del movimiento\r\n                    </h3>\r\n                    <div >\r\n                        <div class="field">\r\n                            <label class="label">Fecha del movimiento:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n\r\n\r\n                                <input class="input" [value]="fecha_actual" [(ngModel)]=\'fecha_movimiento\' formControlName="fecha_movimiento" ngui-datetime-picker\r\n                                    [min-date]="MinDate" [max-date]="MaxDate" date-only="true" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched}"\r\n                                    placeholder="YYYY-MM-DD" />\r\n\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'fecha_movimiento\').hasError(\'required\') && ctrl.dato.get(\'fecha_movimiento\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Observaciones:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <textarea class="textarea" type="text" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched}"\r\n                                    placeholder="Observaciones" formControlName="observaciones"></textarea>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="control" *ngIf="mostrarCancelado">\r\n                            <!-- *ngIf -->\r\n                            <div class="field">\r\n                                <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                    <input type="checkbox" id="cancelado" class="styled" [checked]="ctrl.dato.get(\'cancelado\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'cancelado\').patchValue(ctrl.dato.get(\'cancelado\').value == \'1\' ? \'0\' : \'1\')">\r\n                                    <label for="cancelado">  Cancelado\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n                            <div class="field">\r\n                                <label class="label">Observaciones de cancelación:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <textarea class="textarea" autofocus type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched}"\r\n                                        placeholder="Observaciones de cancelacion" formControlName="observaciones_cancelacion"></textarea>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones_cancelacion\').hasError(\'required\') && ctrl.dato.get(\'observaciones_cancelacion\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                    <a id="actualizar" (click)="ctrl.cargarCatalogo(\'servicios\',\'mis-servicios\');"></a>\r\n                    <hr id="catalogos" (click)="ctrl.cargarCatalogo(\'turnos\', \'mis-turnos\'); "> \r\n\r\n                    <div >\r\n                        <span class="icon is-small" *ngIf="!ctrl.dato.get(\'movimiento_metadato\')">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <nav class="panel"  formGroupName="movimiento_metadato" *ngIf="ctrl.dato.get(\'movimiento_metadato\')">\r\n\r\n                            <div class="field">\r\n                                <label class="label">Turno:</label>\r\n                                <!-- NO carga los turnos -->\r\n                                <div class="field" *ngIf="!ctrl.turnos">\r\n                                    <span *ngIf="ctrl.cargando" class="tag is-primary is-medium">Cargando turnos. <i class="fa fa-refresh fa-spin" aria-hidden="true"></i></span>\r\n                                    <span *ngIf="!ctrl.cargando"class="tag is-medium"><a id="actualizar"  *ngIf="!ctrl.cargando" (click)="ctrl.cargarCatalogo(\'turnos\', \'mis-turnos\'); ">No se pudieron cargar los turnos. <i class="fa fa-refresh" aria-hidden="true"></i></a></span>\r\n                                    \r\n                                    <p></p>\r\n                                </div>\r\n                                <!-- SI carga los turnos -->\r\n                                <p  *ngIf="ctrl.turnos" class="control is-expanded  has-icon has-icon-right">\r\n                                    <select class="select" name="turno" formControlName="turno_id" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched}">\r\n                                        <option *ngFor="let item of ctrl.turnos.clues_turnos" value="{{item.id}}" [attr.selected]="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').value == item.id ">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'turno_id\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n                            <!-- SERVICIOS -->\r\n                            <div class="field">\r\n                                <label class="label">Servicio que recibe:</label>\r\n                                <!-- NO carga los SERVICIOS -->\r\n                                <div class="field" *ngIf="!ctrl.servicios">\r\n                                    <span *ngIf="ctrl.cargando" class="tag is-primary is-medium">Cargando servicios. <i class="fa fa-refresh fa-spin" aria-hidden="true"></i></span>\r\n                                    <span *ngIf="!ctrl.cargando"class="tag is-medium">No se pudieron cargar los servicios.</span>\r\n                                    <a id="actualizar" *ngIf="!ctrl.cargando" (click)="ctrl.cargarCatalogo(\'servicios\', \'mis-servicios\'); "><i class="fa fa-refresh is-medium" aria-hidden="true"></i></a>\r\n                                </div>\r\n                                <!-- SI carga los SERVICIOS -->\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <select *ngIf="ctrl.servicios" class="select" name="servicio_id" formControlName="servicio_id" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').touched}">\r\n                                        <option *ngFor="let item of ctrl.servicios.clues_servicios" value="{{item.id}}" [attr.selected]="ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').value == item.id ">{{ item.nombre }}</option>\r\n                                    </select>\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'servicio_id\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n\r\n                            <div class="field">\r\n                                <label class="label">Persona que recibe:</label>\r\n                                <p class="control is-expanded  has-icon has-icon-right">\r\n                                    <input class="input" type="text" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched}"\r\n                                        placeholder="Persona que recibe" formControlName="persona_recibe">\r\n                                    <span class="icon is-small" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched">\r\n                                        <i class="fa fa-warning"></i>\r\n                                    </span>\r\n                                    <span class="help is-danger" *ngIf="ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').hasError(\'required\') && ctrl.dato.get(\'movimiento_metadato\').get(\'persona_recibe\').touched">Este campo es requerido.</span>\r\n                                </p>\r\n                            </div>\r\n\r\n                        </nav>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- apartado de insumos -->\r\n        <div class="column" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <div class="hero-body">\r\n                        <nav class="level">\r\n                            <div class="level-left"></div>\r\n                            <!-- Right side -->\r\n                            <div class="level-right">\r\n                                <p class="level-item"><a class="button is-primary" (click)="ctrl.regresar()">Regresar</a></p>\r\n                                <p class="level-item" *ngIf="tieneid"><a class="button is-primary" routerLink="/almacen/salidas-estandar/nuevo" *ngIf="!ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nueva salida</span></a></p>\r\n                                <p class="level-item" *ngIf="tieneid"><a *ngIf="tieneid" class="button is-primary" (click)="array_servicios = ctrl.servicios; array_turnos = ctrl.turnos; imprimir();"><span class="icon"><i class="fa fa-print"></i></span></a></p>\r\n                                <p class="level-item" *ngIf="!tieneid">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="guardar_movimiento()" [disabled]="ctrl.dato.invalid"> <span class="icon"><i class="fa fa-floppy-o" aria-hidden="true"></i></span> &nbsp; Guardar</button>\r\n                                </p>\r\n                                <p class="level-item"><a class="button is-primary" title="Actualizar" (click)="ctrl.cargarDatos();"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                                <p class="level-item">&nbsp;</p>\r\n                            </div>\r\n                        </nav>\r\n                        \r\n                        <div class="container is-fluid">\r\n                            <h1 class="title">\r\n                                <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                                <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Insumos\r\n                            </h1>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                    <br>\r\n                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                </div>\r\n                <section class="section">\r\n\r\n                    <div class="field has-addons has-addons-centered" *ngIf="!tieneid">\r\n\r\n                        <p class="control">\r\n                            <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" id="buscarInsumo" value-property-name="clave"\r\n                                display-property-name="descripcion" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                                (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                                type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n\r\n                        </p>\r\n\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div formArrayName="insumos_negados">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos_negados.controls; let i=index" [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(231, 242, 22, 0.4)\' :  \'rgba(231, 242, 22, 0.4)\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                       \r\n                                        <p>\r\n                                            <strong>\r\n                                                <span style="color: red"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i></span>\r\n                                            \r\n                                                <span style="color:cornflowerblue">\r\n                                                    Clave: {{ ctrl.dato.controls.insumos_negados.controls[i].controls.clave.value }} \r\n                                                </span>\r\n                                                Nombre: {{ctrl.dato.controls.insumos_negados.controls[i].controls.descripcion.value}}\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.es_causes.value == 1"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.es_causes.value == 0"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.es_unidosis.value == 1\r\n                                                "><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos_negados.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                    </div>\r\n                                    <nav class="level is-mobile">\r\n                                        <div class="level-left">\r\n                                            <a class="level-item" >\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.modo_salida.value == \'N\'">\r\n                                                    <!-- cambiar a formControlName="cantidad_solicitada"  -->\r\n                                                    <label class="label">Cant. solicitada (Normal):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" class="input" formControlName="cantidad_solicitada" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_solicitada.hasError(\'required\') && ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_solicitada.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_solicitada" >\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div class="field" *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.modo_salida.value == \'U\'">\r\n                                                    <label class="label" *ngIf="tieneid">Cant. solicitada ({{ctrl.dato.get("insumos_negados").value[i].informacion_ampliada.unidad_medida_nombre}}):</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. solicitada unidosis ({{ctrl.dato.controls.insumos_negados.controls[i].controls.unidad_medida.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" class="input" formControlName="cantidad_solicitada_unidosis" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_solicitada_unidosis.hasError(\'required\') && ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_solicitada_unidosis.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_solicitada_unidosis" >\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                        </div>\r\n                                        <div class="level-right">\r\n                                            <a class="level-item" >\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.modo_salida.value == \'N\'">\r\n                                                    <label class="label" *ngIf="tieneid">Cant. surtida:</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. a surtir:</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_surtida.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" >\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos_negados.controls[i].controls.modo_salida.value == \'U\'">\r\n                                                    <label class="label" *ngIf="tieneid">Cant. surtida (unidosis):</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. a surtir (unidosis):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida_unidosis" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_surtida_unidosis.hasError(\'required\') && ctrl.dato.controls.insumos_negados.controls[i].controls.cantidad_surtida_unidosis.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida_unidosis" >\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n\r\n                                        </div>\r\n                                    </nav>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div style="height:50px;"></div>\r\n\r\n                    <div formArrayName="insumos">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos.controls; let i=index" [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(230, 230, 232, 0.44)\' : \'\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <a *ngIf="!tieneid" class="is-danger" title="Quitar este elemento de la lista" style="float:right" (click)="ctrl.quitar_form_array(ctrl.dato.controls.insumos,i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                        <p>\r\n                                            <strong>\r\n                                                <span style="color:cornflowerblue">\r\n                                                    Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }} \r\n                                                </span>\r\n                                                Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 1"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 0"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value == 1\r\n                                                "><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                        <a class="is-danger" title="Ver la lista de lotes de este articulo" style="float:right" (click)="ver_lotes_asignados(i)">\r\n                                            <span class="icon">\r\n                                                <i *ngIf="!mostrar_lote[i]" class="fa fa-plus"></i>\r\n                                                <i *ngIf="mostrar_lote[i]" class="fa fa-minus"></i>\r\n                                            </span>\r\n                                        </a>\r\n                                    </div>\r\n                                    <section *ngIf="mostrar_lote[i]">\r\n                                        <table class="table is-narrow is-bordered is-striped">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Lote</th>\r\n                                                    <th>Caducidad</th>\r\n                                                    <th>Codigo de barras</th>\r\n                                                    <th *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'N\'">Existencia</th>\r\n                                                    <th *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'U\'">Existencia Unidosis</th>\r\n                                                    \r\n                                                    <th *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'N\'">Cantidad normal</th>\r\n                                                    <th *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'U\'">Cantidad unidosis</th>\r\n                                                    <th *ngIf="!tieneid"></th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody formArrayName="lotes">\r\n                                                <tr *ngFor="let val of ctrl.dato.controls.insumos.controls[i].controls.lotes.controls;  let i2 = index;">\r\n                                                    <td>{{val.value.lote}}</td>\r\n                                                    <td>{{val.value.fecha_caducidad}}</td>\r\n                                                    <td>{{val.value.codigo_barras}}</td>\r\n                                                    <td *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'N\'">{{val.value.existencia}}</td>\r\n                                                    <td *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'U\'">{{val.value.existencia_unidosis}}</td>\r\n                                                    <td [formGroupName]="i2">\r\n                                                        <input  *ngIf="val.value.modo_salida == \'N\'" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2, modo)" type="number" step="1" min="0" max="{{val.value.existencia}}"\r\n                                                            placeholder="Cantidad" formControlName="cantidad">\r\n                                                        <input  *ngIf="val.value.modo_salida == \'U\'" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2, modo)" type="number" step="1" min="0" max="{{val.value.existencia_unidosis}}"\r\n                                                            placeholder="Cantidad unidosis" formControlName="cantidad"></td>\r\n                                                    <td *ngIf="!tieneid">\r\n                                                        <a class="is-danger" title="Quitar este lote" (click)="quitar_lote_insumo(i, val.value, i2)">\r\n                                                            <span class="icon">\r\n                                                                <i class="fa fa-trash-o"></i>\r\n                                                            </span>\r\n                                                        </a>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </section>\r\n                                    <nav class="level is-mobile">\r\n                                        <div class="level-left">\r\n                                            <a class="level-item" >\r\n                                                \r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'N\'">\r\n                                                    <label class="label" *ngIf="tieneid && ctrl.dato.get(\'insumos\').value[i].detalles.informacion_ampliada">Cant. solicitada ({{ctrl.dato.get("insumos").value[i].detalles.informacion_ampliada.presentacion_nombre}}):</label>\r\n                                                    <label class="label" *ngIf="tieneid && !ctrl.dato.get(\'insumos\').value[i].detalles.informacion_ampliada">Cant. solicitada (normal):</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. solicitada ({{ctrl.dato.controls.insumos.controls[i].controls.presentacion_nombre.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" class="input" formControlName="cantidad_solicitada" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_solicitada.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_solicitada.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_solicitada" >\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div class="field" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'U\'">\r\n                                                    <label class="label" *ngIf="tieneid && ctrl.dato.get(\'insumos\').value[i].detalles.informacion_ampliada">Cant. solicitada ({{ctrl.dato.get("insumos").value[i].detalles.informacion_ampliada.unidad_medida_nombre}}):</label>\r\n                                                    <label class="label" *ngIf="tieneid && !ctrl.dato.get(\'insumos\').value[i].detalles.informacion_ampliada">Cant. solicitada (Unidosis):</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. solicitada unidosis ({{ctrl.dato.controls.insumos.controls[i].controls.unidad_medida.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" class="input" formControlName="cantidad_solicitada" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_solicitada.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_solicitada.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_solicitada" >\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                        </div>\r\n                                        <div class="level-right">\r\n                                            <a class="level-item" >\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'N\'">\r\n                                                    <label class="label" *ngIf="tieneid && ctrl.dato.get(\'insumos\').value[i].detalles.informacion_ampliada">Cant. surtida ({{ctrl.dato.get("insumos").value[i].detalles.informacion_ampliada.presentacion_nombre}}):</label>\r\n                                                    <label class="label" *ngIf="tieneid && !ctrl.dato.get(\'insumos\').value[i].detalles.informacion_ampliada">Cant. surtida (Normal):</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. a surtir ({{ctrl.dato.controls.insumos.controls[i].controls.presentacion_nombre.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad" >\r\n                                                    </p>\r\n                                                </div>\r\n                                                <div class="field"  *ngIf="ctrl.dato.controls.insumos.controls[i].controls.modo_salida.value == \'U\'">\r\n                                                    <label class="label" *ngIf="tieneid && ctrl.dato.get(\'insumos\').value[i].detalles.informacion_ampliada">Cant. surtida ({{ctrl.dato.get("insumos").value[i].detalles.informacion_ampliada.unidad_medida_nombre}}):</label>\r\n                                                    <label class="label" *ngIf="tieneid && !ctrl.dato.get(\'insumos\').value[i].detalles.informacion_ampliada">Cant. surtida (Unidosis):</label>\r\n                                                    <label class="label" *ngIf="!tieneid">Cant. a surtir unidosis ({{ctrl.dato.controls.insumos.controls[i].controls.unidad_medida.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}">\r\n                                                        <input *ngIf="tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad" >\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n\r\n                                        </div>\r\n                                    </nav>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n\r\n<div class="modal" id="verLotes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card" style="width: 60%;">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title" id="tituloModal" style="width: 200px"> </p>\r\n            <button type="button" class="delete" (click)="cancelarModal(\'verLotes\'); modo = \'N\';"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="columns">\r\n                <div class="column is-two-thirds">\r\n                    <div class="columns">\r\n                        <div class="column is-4">\r\n                            <label class="label" style="font-size: large;float: left;margin-right: 6%;">Modo salida: </label>\r\n                        </div>\r\n                        <div class="b-checkbox is-info is-circular">\r\n                            <div class="column is-auto">\r\n                                <input class="styled" type="radio" id="modo_n" [checked]="modo == \'N\'" (click)="modo = \'N\'" [value]="\'N\'" name="modo">                                    \r\n                                <label for="modo_n">\r\n                                    <span class="tag is-large" [ngClass]="{\'is-success\':modo == \'N\'}">Normal</span>\r\n                                </label>\r\n                            </div>\r\n                            <div *ngIf="es_unidosis == 1" class="column is-auto">\r\n                                <input class="styled" type="radio" id="modo_u" [checked]="modo == \'U\'" (click)="modo = \'U\'" [value]="\'U\'" name="modo">                                    \r\n                                <label for="modo_u">\r\n                                    <span class="tag is-large" [ngClass]="{\'is-success\':modo == \'U\'}">Unidosis</span>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="column">\r\n                    <div class="field is-horizontal">\r\n                        <label class="label" *ngIf="modo == \'N\'">Cant. solicitada:</label>\r\n                        <label class="label" *ngIf="modo == \'U\'">Cant. solicitada ({{insumo.unidad_medida}}):</label>\r\n                        <input class="input has-text-centered" (keypress)="quitar_punto($event)" (change)="comprobar_cant_solicitada(cantidad_solicitada.value)" type="number" step="1" min="0" \r\n                            placeholder="Cantidad" #cantidad_solicitada id="cantidad_solicitada" \r\n                            name="cantidad_solicitada" (keyup)="comprobar_cant_solicitada(cantidad_solicitada.value)">\r\n                       <!-- <input style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}"> -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <table class="table is-narrow is-bordered is-striped">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Lote</th>\r\n                        <th>Caducidad</th>\r\n                        <th>Codigo de barras</th>\r\n                        <th *ngIf="modo == \'N\'">Existencia</th>\r\n                        <th *ngIf="modo == \'N\'">Cantidad</th>\r\n                        <th *ngIf="modo == \'U\'">Existencia Unidosis ({{insumo.unidad_medida}})</th> \r\n                        <th *ngIf="modo == \'U\'">Cantidad Unidosis ({{insumo.unidad_medida}})</th> \r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lotes_insumo;  let i = index;">\r\n                        <td *ngIf="!item.nuevo">{{item.lote}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Lote" [(ngModel)]="item.lote"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.fecha_caducidad}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="date" placeholder="Fecha de caducidad" [(ngModel)]="item.fecha_caducidad"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.codigo_barras}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Codigo de barras" [(ngModel)]="item.codigo_barras"></td>\r\n                        <td *ngIf="!item.nuevo && modo == \'N\'">{{item.existencia}}</td>\r\n                        <td *ngIf="!item.nuevo && modo == \'U\'">{{item.existencia_unidosis}}</td>\r\n                        <td *ngIf="item.nuevo "></td>\r\n                        <td >\r\n                            <input class="input has-text-centered" type="number" step="1" min="0" (keypress)="quitar_punto($event)"  (keyup)="comprobar_cant_lotes()" (change)="comprobar_cant_lotes()" max="{{item.existencia}}" placeholder="Cantidad" [(ngModel)]="item.cantidad">\r\n                        </td>\r\n                        <td *ngIf="item.nuevo">\r\n                            <a class="delete" (click)=eliminarLote(i)></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-dark" *ngIf="modo==\'N\'" (click)="agregarNuevoLote()">Agregar nuevo lote</a>                            \r\n            <a class="button is-success" [ngClass]="{\'is-disabled\':!cant_solicitada_valida || !sum_cant_lotes}" (click)="agregarLoteIsumo(cantidad_solicitada.value)">Aceptar</a>\r\n            <a class="button" (click)="cancelarModal(\'verLotes\'); modo = \'N\';">Cancelar</a>\r\n            <div class="card-footer-item"></div>\r\n            <a *ngIf="!sum_cant_lotes" class="card-footer-item button is-danger" [ngClass]="{\'is-disabled\':!cant_solicitada_valida}" (click)="abrirModal(\'negarExistencia\')"><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>&nbsp;\r\n Negar existencia</a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="negarExistencia">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\r\n            <button class="delete" (click)="cancelarModal(\'negarExistencia\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <h1>¿Esta seguro de negar la existencia del insumo?</h1>\r\n                <p>Ya no se podra cambiar la cantidad negada</p>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="agregarLoteIsumo(cantidad_solicitada.value)">Continuar</a>\r\n            <a class="button" (click)="cancelarModal(\'negarExistencia\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="guardarMovimiento">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\r\n            <button class="delete" (click)="cancelarModal(\'guardarMovimiento\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <h1>¿Esta seguro de guardar la salida?</h1>\r\n                <p>Ya no se podrá realizar cambios</p>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="ctrl.enviar(); cancelarModal(\'guardarMovimiento\')">Continuar</a>\r\n            <a class="button" (click)="cancelarModal(\'guardarMovimiento\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},bDzX:function(t,e,a){"use strict";var n=a("/oeL"),i=a("Fwzv"),r=(a.n(i),a("p5Ee"));a.d(e,"a",function(){return l});var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function n(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(t){function e(e){var a=t.call(this)||this;return a.url=r.a.API_URL+"/sync/confirmar",a.headers={Authorization:"Bearer "+localStorage.getItem("token"),Accept:"application/zip;"},a.file=e,a.alias="sync",a}return s(e,t),e}(i.UploadItem);l=o([a.i(n.Injectable)(),c("design:paramtypes",[Object])],l)},bH5l:function(t,e,a){"use strict";var n=a("/oeL"),i=a("K4kt"),r=a("bbdN");a.n(r);a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this.crudService=t,this._ngZone=e,this.buscar_en="TODAS_LAS_CLAVES",this.seleccionar="TODO",this.tipo="TODO",this.cargandoPdf=!1}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.pdfworker=new Worker("web-workers/inventario/lista-existencias.js");var t=this,e=this._ngZone;this.pdfworker.onmessage=function(a){e.run(function(){t.cargandoPdf=!1}),r.saveAs(t.base64ToBlob(a.data.base64,"application/pdf"),a.data.fileName)}},t.prototype.select_insumo_autocomplete=function(t){var e=this,a=JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.crudService.lista(0,1e3,"comprobar-stock?almacen="+a.almacen_activo.id+"&clave="+t.clave_insumo_medico).subscribe(function(a){e.lotes_insumo=a,e.es_unidosis=t.es_unidosis,e.unidad_medida=t.unidad_medida;var n="";1==t.es_causes&&(n+='<label class="tag is-success" ><strong>Causes </strong></label>'),0==t.es_causes&&(n+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);"><strong>No Causes </strong> </label>'),1==t.es_unidosis&&(n+='<label class="tag is-warning" ><strong>Unidosis</strong></label>'),document.getElementById("tituloModal").innerHTML=" "+t.descripcion+' <br>\n          <p aling="justify" style="font-size:14px">'+t.clave_insumo_medico+'</p> \n          <p aling="justify" style="font-size:12px"> CANTIDAD POR ENVASE: '+(t.cantidad_x_envase?t.cantidad_x_envase:"Sin especificar")+" </p>\n          <br>\n          "+n,e.cargando=!1,e.abrirModal("verLotes")},function(t){e.cargando=!1})},t.prototype.abrirModal=function(t){document.getElementById(t).classList.add("is-active")},t.prototype.cancelarModal=function(t){document.getElementById(t).classList.remove("is-active")},t.prototype.export_excel=function(){var t=this.t.first.nativeElement.options,e=this.s.first.nativeElement.options,a="TODAS_LAS_CLAVES"===this.buscar_en?"Todas las claves":"Mis claves";t=t[t.selectedIndex].text,e=e[e.selectedIndex].text;var n="<table><tr><th colspan='7'><h1>Existencias</h1></th></tr><tr><th>Claves: "+a+"</th><th>Insumo: "+t+"</th><th>Existencia: "+e+"</th></tr><tr><th colspan='7'></th></tr></table>";n+=document.getElementById("exportable").innerHTML;var i=new Blob([n],{type:"text/comma-separated-values;charset=utf-8"});try{r.saveAs(i,"salida_estandar.xls")}catch(t){console.log(t)}},t.prototype.imprimir=function(){var t=this.t.first.nativeElement.options,e=this.s.first.nativeElement.options;t=t[t.selectedIndex].text,e=e[e.selectedIndex].text;try{this.cargandoPdf=!0;var a={lista:this.dato,usuario:this.usuario,buscar_en:this.buscar_en,seleccionar:e,tipo:t};this.pdfworker.postMessage(JSON.stringify(a))}catch(t){this.cargandoPdf=!1}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();s([a.i(n.ViewChildren)("t"),o("design:type",Object)],c.prototype,"t",void 0),s([a.i(n.ViewChildren)("s"),o("design:type",Object)],c.prototype,"s",void 0),s([a.i(n.ViewChildren)("claves"),o("design:type",Object)],c.prototype,"claves",void 0),c=s([a.i(n.Component)({selector:"inventario-lista",template:a("4sn+")}),o("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object,"function"==typeof(d=void 0!==n.NgZone&&n.NgZone)&&d||Object])],c);var l,d},baU8:function(t,e){t.exports='<avance-menu></avance-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Lista de Avances \r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted " (click)=\'showAgregarTema=!showAgregarTema\'>\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr>TEMA</abbr></th>\r\n                    <th>RESPONSABLE</th>\r\n                    <th>AREA</th>\r\n                    <th>% DE AVANCE</th>\r\n                    <th>ACTUALIZADO</th>\r\n                    <th></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of temas; let i=index">\r\n                        <th style="vertical-align: middle; cursor:pointer;"><a routerLink="/temas/avances/{{item.id}}">{{ item.tema }}</a></th>\r\n                        <td style="vertical-align: middle; cursor:pointer;"><a routerLink="/temas/avances/{{item.id}}">{{ item.responsable }}</a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer;"><a routerLink="/temas/avances/{{item.id}}">{{ item.area }}</a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer;"><a routerLink="/temas/avances/{{item.id}}">{{ item.porcentaje }} %</a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer;" *ngIf="item.creacion>=0"><a routerLink="/temas/avances/{{item.id}}"><span *ngIf="item.creacion == 0">Hoy</span><span *ngIf="item.creacion > 0">Hace {{ item.creacion }} Día(s)</span> </a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer;" *ngIf="item.creacion<0"><a routerLink="/temas/avances/{{item.id}}">SIN ACTUALIZAR </a></td>\r\n                        \r\n                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                             \r\n                            <button type="button"  class="button is-primary"  (click)=\'ver_tema(item.id)\'>\r\n                              <span class="icon"><i class="fa fa-edit"></i></span>\r\n                            </button>\r\n                            \r\n                        </td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="temas.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle; cursor:pointer;"><a routerLink="/temas/avances/{{item.id}}">{{ item.tema }}</a></th>\r\n                        <td style="vertical-align: middle; cursor:pointer;"><a routerLink="/temas/avances/{{item.id}}">{{ item.responsable }}</a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer;"><a routerLink="/temas/avances/{{item.id}}">{{ item.area }}</a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer;"><a routerLink="/temas/avances/{{item.id}}">{{ item.porcentaje }} %</a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer;" *ngIf="item.creacion>=0"><a routerLink="/temas/avances/{{item.id}}"><span *ngIf="item.creacion == 0">Hoy</span><span *ngIf="item.creacion > 0">Hace {{ item.creacion }} Día(s)</span> </a></td>\r\n                        <td style="vertical-align: middle; cursor:pointer;" *ngIf="item.creacion"><a routerLink="/temas/avances/{{item.id}}">{{ item.creacion }} </a></td>\r\n                        \r\n                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            \r\n                            <button type="button"  class="button is-primary"  (click)=\'ver_tema(item.id)\'>\r\n                              <span class="icon"><i class="fa fa-edit"></i></span>\r\n                            </button>\r\n                           \r\n                        </td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="temas.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n    </div>        \r\n   \r\n</div>\r\n\r\n<div id="modal-temas" class="modal is-active" [ngClass]="{\'is-active\': showAgregarTema}">\r\n  <div class="modal-background"  (click)="showDialog = !showAgregarTema"></div>\r\n  <div class="modal-card" style="width:60%; height: auto;">\r\n    <header class="modal-card-head" style="background-color: #00d1b2" >\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-user"></i></span> Agregar Tema\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="showAgregarTema = !showAgregarTema"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="section">\r\n        \r\n        <form name="form" [formGroup]="tema_avance"   (ngSubmit)="agregar_tema()" >   \r\n            <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                <div class="container">\r\n                  <div class="heading">\r\n                    <h1 class="title">Datos del Tema</h1>\r\n                  </div>\r\n                </div>\r\n            </section> \r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded  has-icon has-icon-right">\r\n                    <label class="label">Tema</label>\r\n                  <input class="input" autofocus type="text"  placeholder="Tema" formControlName="tema">\r\n                  <span class="icon is-small" *ngIf="tema_avance.get(\'tema\').hasError(\'required\') && tema_avance.get(\'tema\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="tema_avance.get(\'tema\').hasError(\'required\') && tema_avance.get(\'tema\').touched">Este campo es requerido.</span>\r\n                </p>\r\n                \r\n              </div>\r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded  has-icon has-icon-right">\r\n                    <label class="label">Responsable</label>\r\n                  <input class="input"  type="text"  placeholder="Responsable" formControlName="responsable">\r\n                  <span class="icon is-small" *ngIf="tema_avance.get(\'responsable\').hasError(\'required\') && tema_avance.get(\'responsable\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="tema_avance.get(\'responsable\').hasError(\'required\') && tema_avance.get(\'responsable\').touched">Este campo es requerido.</span>\r\n                </p>\r\n                \r\n              </div>\r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded  has-icon has-icon-right">\r\n                    <label class="label">Área</label>\r\n                  <input class="input"  type="text"  placeholder="Area" formControlName="area">\r\n                  <span class="icon is-small" *ngIf="tema_avance.get(\'area\').hasError(\'required\') && tema_avance.get(\'area\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="tema_avance.get(\'area\').hasError(\'required\') && tema_avance.get(\'area\').touched">Este campo es requerido.</span>\r\n                </p>\r\n                \r\n              </div>\r\n\r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded  has-icon has-icon-right">\r\n                    <label class="label">Comentario</label>\r\n                  <textarea  class="textarea"  placeholder="Comentario" formControlName="comentario"></textarea>\r\n                  <span class="icon is-small" *ngIf="tema_avance.get(\'comentario\').hasError(\'required\') && tema_avance.get(\'comentario\').touched">\r\n                    <i class="fa fa-warning"></i>\r\n                  </span>\r\n                  <span class="help is-danger" *ngIf="tema_avance.get(\'comentario\').hasError(\'required\') && tema_avance.get(\'comentario\').touched">Este campo es requerido.</span>\r\n                </p>\r\n                \r\n              </div>\r\n            \r\n          <br>\r\n          <div class="control is-grouped">\r\n            <p class="control">\r\n              <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="tema_avance.invalid">Guardar</button>\r\n            </p>\r\n          </div>\r\n      </form>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},"be/k":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("drI6"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"almacen/dashboard-salidas",children:[{path:"",component:r.a}],canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b]})],l)},be4J:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("LLho"),d=a("pBSs"),u=a("yrm+"),p=a("maPk"),m=a("PII2"),f=a("JaIW"),g=a("sjpP");a.d(e,"a",function(){return v});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=function(){function t(){}return t}();v=h([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,s.a,o.a,c.a,l.a,u.a,d.a],declarations:[m.a,f.a,g.a],providers:[p.a]})],v)},bjWD:function(t,e){t.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Farmacia Subrrogada" class="nav-item pull-left nav-hub-active"  routerLink="/farmacia-subrrogada">\r\n            \r\n            <img src="assets/hub-farmacia-sub.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item" >\r\n                <h1 class="title">&nbsp;Farmacia Subrrogada</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},bkpT:function(t,e){t.exports='<aside class="menu" style="padding: 1em;">\r\n   <!-- <p class="menu-label">Pedidos</p>-->\r\n    <ul class="menu-list">        \r\n        <li>\r\n            <a routerLink="/almacen/entregas/por-surtir" #nuevas routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-inbox"></i></span> Por surtir\r\n                <span class="icon is-pulled-right" *ngIf="cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                <span *ngIf="stats.por_surtir>0" class="tag is-pulled-right" [ngClass]="{ \'is-white\': nuevas.className == \'is-active\', \'is-danger\': nuevas.className != \'is-active\' }" >{{  stats.por_surtir }}</span>\r\n            </a>            \r\n        </li>\r\n        <li>\r\n            <a routerLink="/almacen/entregas/finalizadas" routerLinkActive="is-active">\r\n                <span class="icon"><i class="fa fa-check-circle"></i></span> <span>Finalizadas</span>\r\n            </a>\r\n            <ul>\r\n                <li><a routerLink="/almacen/entregas/finalizadas/completas" routerLinkActive="is-active">Completas</a></li>\r\n                <li><a routerLink="/almacen/entregas/finalizadas/incompletas" routerLinkActive="is-active">Incompletas</a></li>\r\n                <li><a routerLink="/almacen/entregas/finalizadas/canceladas" routerLinkActive="is-active">Canceladas</a></li>\r\n            </ul>\r\n        </li>  \r\n    </ul>\r\n    <hr>\r\n    <ul class="menu-list"> \r\n        <li>\r\n            <a routerLink="/almacen/entregas/historial" routerLinkActive="is-active"><span class="icon"><i class="fa fa-history"></i></span> <span>Historial</span></a>\r\n        </li>        \r\n    </ul>        \r\n</aside>'},brX9:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("/zHi"),o=(a.n(s),a("S7im")),c=(a.n(o),a("azLz")),l=(a.n(c),a("MBEm")),d=(a.n(l),a("5v8a")),u=(a.n(d),a("Pic8")),p=(a.n(u),a("xpf9")),m=(a.n(p),a("1Lkp")),f=a("0LBx"),g=a("Vbn5"),h=a("sYIv"),v=a("gHRf");a.d(e,"a",function(){return _});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_=function(){function t(t,e,a,n,i,r){this.title=t,this.route=e,this.router=a,this.entregasService=n,this.pedidosService=i,this.stockService=r,this.cargando=!1,this.cargandoStock=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.lotesSurtidos=[],this.listaStock=[],this.claveInsumoSeleccionado=null,this.claveNoSolicitada=!1,this.itemSeleccionado=null}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Ver entrega / Farmacia"),this.route.params.subscribe(function(e){t.id=e.id}),this.route.params.subscribe(function(e){t.id=e.id}),this.cargando=!0,this.entregasService.ver(this.id).subscribe(function(e){t.cargando=!1,t.pedido=new h.a(!0),t.pedido.paginacion.resultadosPorPagina=10,t.pedido.filtro.paginacion.resultadosPorPagina=10,console.log(e);for(var a in e.movimiento_pedido.pedido.insumos){var n=e.movimiento_pedido.pedido.insumos[a],i=n.insumos_con_descripcion;if(null==i.listaStockAsignado&&(i.listaStockAsignado=[]),null!=i){i.cantidad=+n.cantidad_solicitada;var r=0;for(var s in e.movimiento_insumos)e.movimiento_insumos[s].stock.clave_insumo_medico==i.clave&&(i.listaStockAsignado.push({codigo_barras:e.movimiento_insumos[s].stock.codigo_barras,marca:e.movimiento_insumos[s].stock.marca,lote:e.movimiento_insumos[s].stock.lote,fecha_caducidad:e.movimiento_insumos[s].stock.fecha_caducidad,cantidad:Math.abs(e.movimiento_insumos[s].cantidad)}),r+=Math.abs(e.movimiento_insumos[s].cantidad));i.totalStockAsignado=r,t.pedido.lista.push(i)}}console.log(t.pedido.lista),t.pedido.indexar(),t.pedido.listar(1)},function(e){t.cargando=!1,t.mensajeError=new v.a(!0),t.mensajeError=new v.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.seleccionarItem=function(t){this.itemSeleccionado=t},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},t}();b([a.i(n.ViewChildren)("searchBoxStock"),y("design:type",Object)],_.prototype,"searchBoxStockViewChildren",void 0),_=b([a.i(n.Component)({selector:"app-ver",template:a("Sxab"),styles:[a("wr2B")],providers:[g.a,f.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==i.b&&i.b)&&x||Object,"function"==typeof(j=void 0!==r.c&&r.c)&&j||Object,"function"==typeof(P=void 0!==r.a&&r.a)&&P||Object,"function"==typeof(I=void 0!==f.a&&f.a)&&I||Object,"function"==typeof(E=void 0!==m.a&&m.a)&&E||Object,"function"==typeof(k=void 0!==g.a&&g.a)&&k||Object])],_);var x,j,P,I,E,k},"c+qg":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("9i+F"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"inventario",component:r.a,canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},c3Uv:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bbdN");a.n(i);a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this._ngZone=t,this.fecha_desde="",this.fecha_hasta="",this.turno="",this.servicio="",this.recibe="",this.cargandoPdf=!1}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.pdfworker=new Worker("web-workers/farmacia/movimientos/lista-salidas.js");var t=this,e=this._ngZone;this.pdfworker.onmessage=function(a){e.run(function(){t.cargandoPdf=!1}),i.saveAs(t.base64ToBlob(a.data.base64,"application/pdf"),a.data.fileName)}},t.prototype.export_excel=function(){var t=this.tr.first.nativeElement.options,e=this.sr.first.nativeElement.options;t=t[t.selectedIndex].text,e=e[e.selectedIndex].text;var a="<table><tr><th colspan='7'><h1>Salida Estandar</h1></th></tr><tr><th>Desde: "+this.fecha_desde+"</th><th>Hasta: "+this.fecha_hasta+"</th><th>Turno: "+t+"</th><th>Servicio: "+e+"</th><th>Recibe: "+this.recibe+"</th></tr><tr><th colspan='7'></th></tr></table>";a+=document.getElementById("exportable").innerHTML;var n=new Blob([a],{type:"text/comma-separated-values;charset=utf-8"});try{i.saveAs(n,"salida_estandar.xls")}catch(t){console.log(t)}},t.prototype.imprimir=function(){try{this.cargandoPdf=!0;var t=this.tr.first.nativeElement.options,e=this.sr.first.nativeElement.options;t=t[t.selectedIndex].text,e=e[e.selectedIndex].text;var a={lista:this.dato,usuario:this.usuario,fecha_desde:this.fecha_desde,fecha_hasta:this.fecha_hasta,turno:t,servicio:e,recibe:this.recibe};this.pdfworker.postMessage(JSON.stringify(a))}catch(t){this.cargandoPdf=!1}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();r([a.i(n.ViewChildren)("tr"),s("design:type",Object)],o.prototype,"tr",void 0),r([a.i(n.ViewChildren)("sr"),s("design:type",Object)],o.prototype,"sr",void 0),o=r([a.i(n.Component)({selector:"salidas-recetas-lista",template:a("0ZDZ")}),s("design:paramtypes",["function"==typeof(c=void 0!==n.NgZone&&n.NgZone)&&c||Object])],o);var c},cAZQ:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"div.scroll{background-color:#fff;height:450px;overflow:auto}div.hidden{display:none}",""]),t.exports=t.exports.toString()},"cCm/":function(t,e){t.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary" >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Historial del Paciente\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted "  (click)="regresar()">\r\n                            <span>Regresar</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <br>\r\n            <section class="section" style="background-color: #00d1b2;">\r\n                    <div class="container">\r\n                      <div class="heading">\r\n                        <h1 class="title" style="color: #FFF">Datos del Paciente</h1>\r\n                        <h2 class="subtitle" style="color: #FFF">\r\n                          ID: {{ id_paciente }}<BR>\r\n                          NOMBRE: {{ nombre_paciente }} <BR>\r\n                          LOCALIDAD: {{ localidad_paciente }}<BR>\r\n\r\n\r\n                        </h2>\r\n                      </div>\r\n                    </div>\r\n                  </section>\r\n            \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th></th>\r\n                    <th><abbr title="Paciente ID">ID</abbr></th>\r\n                    <th>Fecha Ingreso</th>\r\n                    <th>Area Ingreso</th>\r\n                    <th>Fecha Egreso</th>\r\n                    <th>Motivo Egreso</th>\r\n                    <th>Unidad</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  >\r\n                    <tr *ngFor="let item of pacientes; let i=index">\r\n                        <th><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></th>\r\n                        <th style="vertical-align: middle;">{{ item.id }}</th>\r\n                        <th style="vertical-align: middle;">{{ item.fecha_hora_ingreso }}</th>\r\n                        <th style="vertical-align: middle;">{{ item[\'estado_triage\'][\'descripcion\'] }}</th>\r\n                        <td style="vertical-align: middle;" *ngIf="item.fecha_hora_egreso">{{item.fecha_hora_egreso }}</td>\r\n                        <th style="vertical-align: middle;" *ngIf="!item.fecha_hora_egreso">--</th>\r\n\r\n                        <td style="vertical-align: middle;" *ngIf="item[\'motivo_egreso\']">{{item[\'motivo_egreso\'][\'descripcion\'] }}</td>\r\n                        <th style="vertical-align: middle;" *ngIf="!item[\'motivo_egreso\']">--</th>\r\n\r\n                        <td style="vertical-align: middle;" *ngIf="item[\'unidad\']">{{item[\'unidad\'][\'nombre\'] }}</td>\r\n                        <th style="vertical-align: middle;" *ngIf="!item[\'unidad\']">--</th>\r\n                        \r\n                        \r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="pacientes.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n               \r\n            </table>\r\n            \r\n            \r\n        </div>\r\n    </div>        \r\n   \r\n</div>\r\n\r\n'},cDNt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(a("TU+8"),a("/oeL")),i=a("Qa4U"),r=a("aR8+");a("p5Ee").a.production&&a.i(n.enableProdMode)(),a.i(i.a)().bootstrapModule(r.a)},cEsc:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("bKpL"),o=(a.n(s),a("rlar")),c=(a.n(o),a("/zHi")),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("1Lkp")),h=a("2cH3"),v=a("gHRf");a.d(e,"a",function(){return _});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_=function(){function t(t,e,a,n){this.title=t,this.route=e,this.pedidosService=a,this.cambiarEntornoService=n,this.cargando=!1,this.mensajeError=new v.a,this.mensajeExito=new v.a,this.titulo="Pedidos",this.icono="fa-file",this.pedidos=[],this.presupuesto=!1,this.paginaActual=1,this.resultadosPorPagina=10,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new o.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=10,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;switch(this.route.snapshot.url[0].path){case"borradores":this.status="BR",this.titulo="Borradores",this.icono="fa-pencil-square-o";break;case"en-transito":this.status="ET",this.titulo="En transito",this.icono="fa-clock-o";break;case"por-surtir":this.status="PS",this.titulo="Por surtir",this.icono="fa-truck";break;case"expirados":this.status="EX",this.titulo="Expirados",this.icono="fa-exclamation-circle";break;case"expirados-cancelados":this.status="EX-CA",this.titulo="Expirados - Cancelados",this.icono="fa-times-circle";break;case"farmacia-subrogada":this.status="EF",this.titulo="Farmacia Subrogada",this.icono="fa-building";break;case"finalizados":this.status="FI",this.icono="fa-check-circle",this.route.snapshot.url.length>1?"completos"==this.route.snapshot.url[1].path?this.titulo="Finalizados (completos)":"incompletos"==this.route.snapshot.url[1].path?this.titulo="Finalizados (incompletos)":"cancelados"==this.route.snapshot.url[1].path?this.titulo="Finalizados (cancelados)":this.titulo="Finalizados":this.titulo="Finalizados";break;default:this.titulo="Pedidos",this.icono="fa-file"}console.log("inicializar lista de pedidos"),this.title.setTitle("Pedidos"),this.cargarPresupuestoAnual(),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){console.log("subscripcion en lista de pedidos"),t.listar(t.paginaActual),t.cargarPresupuestoAnual()}),this.listar(1),this.mensajeError=new v.a,this.mensajeExito=new v.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.pedidosService.buscar(t.status,e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):s.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1;var a=e.data;for(var n in a)a[n].created_at=a[n].created_at.replace(" ","T");t.resultadosBusqueda=a,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var i=0;i<t.paginasTotalesBusqueda;i++)t.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")})},t.prototype.cargarPresupuestoAnual=function(){var t=this;this.pedidosService.presupuesto().subscribe(function(e){t.cargando=!1,t.presupuesto={},t.presupuesto.causes_modificado=+e.data.causes_modificado,t.presupuesto.causes_comprometido=+e.data.causes_comprometido,t.presupuesto.causes_devengado=+e.data.causes_devengado,t.presupuesto.causes_disponible=+e.data.causes_disponible,t.presupuesto.material_curacion_modificado=+e.data.material_curacion_modificado,t.presupuesto.material_curacion_comprometido=+e.data.material_curacion_comprometido,t.presupuesto.material_curacion_devengado=+e.data.material_curacion_devengado,t.presupuesto.material_curacion_disponible=+e.data.material_curacion_disponible,t.presupuesto.no_causes_modificado=+e.data.no_causes_modificado,t.presupuesto.no_causes_comprometido=+e.data.no_causes_comprometido,t.presupuesto.no_causes_devengado=+e.data.no_causes_devengado,t.presupuesto.no_causes_disponible=+e.data.no_causes_disponible},function(e){t.cargando=!1,console.log(e)})},t.prototype.obtenerDireccion=function(t,e){return"BR"==e?"/almacen/pedidos/editar/"+t:"/almacen/pedidos/ver/"+t},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.pedidosService.buscar(this.status,t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1;var e=t.data;for(var n in e)e[n].created_at=e[n].created_at.replace(" ","T");a.resultadosBusqueda=e,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var i=0;i<a.paginasTotalesBusqueda;i++)a.indicePaginasBusqueda.push(i+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando pedidos."),this.cargando=!0,this.pedidosService.lista(this.status,t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.pedidos=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Pedidos cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.eliminar=function(t,e){var a=this;t.cargando=!0,confirm("Desea eliminar el pedido?")?this.pedidosService.eliminar(t.id).subscribe(function(n){t.cargando=!1,a.pedidos.splice(e,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new v.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="Pedido eliminado"},function(n){t.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(t,e)};try{var i=n.json();401==n.status?a.mensajeError.texto="No tiene permiso para hacer esta operación.":a.mensajeError.texto=i.error}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}):t.cargando=!1},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();_=b([a.i(n.Component)({selector:"almacen-pedidos-lista",template:a("7y7K"),styles:[a("GdAY")],providers:[g.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==i.b&&i.b)&&x||Object,"function"==typeof(j=void 0!==r.c&&r.c)&&j||Object,"function"==typeof(P=void 0!==g.a&&g.a)&&P||Object,"function"==typeof(I=void 0!==h.a&&h.a)&&I||Object])],_);var x,j,P,I},cHbp:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bm2B"),r=a("fc+i"),s=a("BkNc"),o=a("p5Ee"),c=a("K4kt"),l=a("hN3r");a.d(e,"a",function(){return p});var d=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(t,e,a,n,i){var r=this;this.fb=t,this.crudService=e,this.route=a,this._sanitizer=n,this.notificacion=i,this.tab=1,this.cargando=!1,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.MinDate=new Date,this.MaxDate=new Date,this.tieneid=!1,this.tipos_recetas=[{id:1,nombre:"Normal"},{id:2,nombre:"Controlado"}],this.autocompleListFormatter=function(t){var e='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4">'+t.nombre+" <small>"+t.descripcion+'</small></p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+t.clave+") \n              ";return t.es_causes&&(e+='<label class="tag is-success" ><strong>Cause </strong></label>'),t.es_causes||(e+='<label class="tag is-success" ><strong>No Cause </strong> </label>'),t.es_unidosis&&(e+='<label class="tag is-warning" ><strong>Unidosis</strong> </label>'),e+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",r._sanitizer.bypassSecurityTrustHtml(e)},this.es_unidosis=!1,this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0},this.mostrar_lote=[],this.mostrarCancelado=!1}return t.prototype.ngOnInit=function(){var t=this,e=JSON.parse(localStorage.getItem("usuario"));e.clues_activa&&(this.insumos_term+="&clues="+e.clues_activa.clues),e.almacen_activo&&(this.insumos_term+="&almacen="+e.almacen_activo.id),this.dato=this.fb.group({id:[""],tipo_movimiento_id:["5",[i.Validators.required]],status:["FI"],fecha_movimiento:["",[i.Validators.required]],observaciones:["",[i.Validators.required]],cancelado:[""],observaciones_cancelacion:[""],movimiento_metadato:this.fb.group({turno_id:["",[i.Validators.required]]}),receta:this.fb.group({folio:["",[i.Validators.required]],tipo_receta:["1",[i.Validators.required]],fecha_receta:["",[i.Validators.required]],doctor:["",[i.Validators.required]],paciente:["",[i.Validators.required]],diagnostico:["",[i.Validators.required]],imagen_receta:["",[i.Validators.required]]}),insumos:this.fb.array([])}),this.route.params.subscribe(function(e){e.id&&(t.tieneid=!0)}),this.form_insumos={tipo_movimiento_id:["",[i.Validators.required]]};var a=new Date;this.MinDate=new Date(a.getFullYear()-1,0,1),this.MaxDate=new Date(a.getFullYear(),a.getMonth(),a.getDate()),this.dato.get("fecha_movimiento").value?this.fecha_actual=this.dato.get("fecha_movimiento").value:(this.fecha_actual=a.getFullYear()+"-"+("00"+(a.getMonth()+1)).slice(-2)+"-"+a.getDate(),this.dato.get("fecha_movimiento").patchValue(this.fecha_actual)),document.getElementById("catalogos").click()},t.prototype.abrirModal=function(t){document.getElementById(t).classList.add("is-active")},t.prototype.cancelarModal=function(t){document.getElementById(t).classList.remove("is-active")},t.prototype.select_insumo_autocomplete=function(t){var e=this,a=JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.crudService.lista(0,1e3,"comprobar-stock?almacen="+a.almacen_activo.id+"&clave="+t.clave).subscribe(function(a){e.lotes_insumo=a,e.insumo=t,document.getElementById("buscarInsumo").value="",document.getElementById("tituloModal").innerHTML=" "+t.nombre+' <br><p aling="justify" style="font-size:12px">'+t.descripcion+"</p> ",e.es_unidosis=t.es_unidosis,e.cargando=!1,e.abrirModal("verLotes")},function(t){e.cargando=!1})},t.prototype.agregarLoteIsumo=function(){for(var t=this.dato.controls.insumos,e=!1,a=0,n=t.value;a<n.length;a++){var r=n[a];if(r.clave==this.insumo.clave){e=!0;break}}var s={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,cantidad:1,cantidad_x_envase:parseInt(this.insumo.cantidad_x_envase),dosis:["",[i.Validators.required]],frecuencia:["",[i.Validators.required]],duracion:["",[i.Validators.required]],cantidad_recetada:["",[i.Validators.required]],cantidad_surtida:1,lotes:this.fb.array([])};e||t.push(this.fb.group(s));var o=t.length-1,c=t.controls[o];this.mostrar_lote[o]=!1;var l={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0};for(var d=0,u=this.lotes_insumo;d<u.length;d++){var r=u[d];if(r.cantidad>0){var p=!1;if(e)for(var m=0,f=c.controls.lotes.controls;m<f.length;m++){var g=f[m];if(g.controls.id.value==r.id){p=!0;var h=g.controls.cantidad.value+r.cantidad;h>g.controls.existencia.value&&0==r.nuevo&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+g.controls.existencia.value,l),h=1*g.controls.existencia.value),g.controls.cantidad.patchValue(h);break}}p||(r.cantidad>r.existencia&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+r.existencia,l),r.cantidad=1*r.existencia),c.controls.lotes.push(this.fb.group({id:r.id,nuevo:0|r.nuevo,codigo_barras:r.codigo_barras,lote:r.lote,fecha_caducidad:r.fecha_caducidad,existencia:r.nuevo?r.cantidad:r.existencia,cantidad:r.cantidad})))}}for(var v=0,b=0,y=c.controls.lotes.value;b<y.length;b++){var g=y[b];v+=g.cantidad}c.controls.cantidad_surtida.patchValue(v),this.cancelarModal("verLotes")},t.prototype.ver_lotes_asignados=function(t){this.mostrar_lote[t]=!this.mostrar_lote[t]},t.prototype.agregarNuevoLote=function(){this.lotes_insumo.push({id:""+Math.floor(999*Math.random())+1,codigo_barras:"",lote:"",fecha_caducidad:"",existencia:"",cantidad:"",nuevo:1,existencia_unidosis:"",cantidad_unidosis:""})},t.prototype.eliminarLote=function(t){this.lotes_insumo.splice(t,1)},t.prototype.quitar_lote_insumo=function(t,e,a){var n=this.dato.controls.insumos,i=n.controls[t];i.controls.lotes.removeAt(a);var r=i.controls.cantidad_surtida.value-e.cantidad;i.controls.cantidad_surtida.patchValue(r)},t.prototype.validar_cantidad_lote=function(t,e,a){if(e.controls.cantidad.value>e.controls.existencia.value&&0==e.nuevo){var n={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+e.controls.existencia.value,n),e.controls.cantidad.patchValue(1*e.controls.existencia.value)}for(var i=this.dato.controls.insumos,r=i.controls[t],s=0,o=0,c=r.controls.lotes.value;o<c.length;o++){s+=c[o].cantidad}r.controls.cantidad_surtida.patchValue(s)},t}();p=d([a.i(n.Component)({selector:"sincronizar-recetas-formulario",template:a("2x2r"),styles:["ngui-auto-complete {z-index: 999999 !important}"]}),u("design:paramtypes",["function"==typeof(m=void 0!==i.FormBuilder&&i.FormBuilder)&&m||Object,"function"==typeof(f=void 0!==c.a&&c.a)&&f||Object,"function"==typeof(g=void 0!==s.c&&s.c)&&g||Object,"function"==typeof(h=void 0!==r.d&&r.d)&&h||Object,"function"==typeof(v=void 0!==l.b&&l.b)&&v||Object])],p);var m,f,g,h,v},cNwj:function(t,e){t.exports='<menu-farmacia [modulo]="\'Pedidos jurisdiccionales\'" [icono]="\'assets/icono-pedidos-jurisdiccionales.svg\'" [url]="\'/almacen/pedidos-jurisdiccionales\'"></menu-farmacia>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile">\r\n      <div class="tile is-4 is-parent is-vertical ">\r\n        <div class="tile is-child">\r\n            <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n                <section class="hero is-primary" >\r\n                <h1 class="title" style="margin:0.5em;" >\r\n                    <span class="icon is-medium"><i class="fa fa-file-text"></i></span> Detalles del pedido\r\n                </h1>\r\n                <div class="control is-grouped">\r\n                    <a class="button is-success is-fullwidth" title="Imprimir Excel" (click)="imprimirExcel(); " *ngIf="esEditar">\r\n                        <span class="icon"><i class="fa fa-file-excel-o"></i></span> <span>Excel</span>\r\n                    </a>\r\n                    <a class="button is-info is-fullwidth" [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }" title="Imprimir PDF" (click)="mostrarDialogo(); " *ngIf="esEditar">\r\n                        <span class="icon"><i class="fa fa-print"></i></span> <span>Imprimir</span>\r\n                    </a>\r\n                </div>\r\n                </section>\r\n\r\n                <div style="padding: 1em;">\r\n                    <label class="label">Folio:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.folio:\'S/F\'}}"/>\r\n                    </p>\r\n\r\n                    <label class="label">Almacén:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.almacen_solicitante.nombre:\'Sin almacen asignado\'}}"/>\r\n                    </p>\r\n\r\n                    <label class="label">Nombre del Pedido:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.descripcion:\'\'}}"/>\r\n                    </p>\r\n\r\n                    <label class="label">Fecha:</label>\r\n                    <p class="control">\r\n                        <input type="text" class="input is-fullwidth" readonly="readonly" value="{{(pedido.datosImprimir)?pedido.datosImprimir.fecha:\'\'}}"/>\r\n                    </p>\r\n\r\n                    <div class="control">\r\n                        <textarea name="observaciones" class="textarea" placeholder="Observaciones"  readonly="readonly">{{(pedido.datosImprimir)?pedido.datosImprimir.observaciones:\'\'}}</textarea>\r\n                    </div>\r\n\r\n                    <label class="label">Datos del Proveedor:</label>\r\n                    <div *ngIf="pedido.datosImprimir" class="level-item">\r\n                        <input *ngIf="pedido.datosImprimir.almacen_proveedor" type="text" class="input is-fullwidth" readonly="readonly" value="{{pedido.datosImprimir.almacen_proveedor.nombre}}"/>\r\n                        <div *ngIf="pedido.datosImprimir.proveedor" >\r\n                        <p class="subtitle is-5">\r\n                            {{pedido.datosImprimir.proveedor.nombre}}<br>\r\n                            <small>\r\n                            {{pedido.datosImprimir.proveedor.contacto}}<br>\r\n                            {{pedido.datosImprimir.proveedor.email}}<br>\r\n                            Cel: {{pedido.datosImprimir.proveedor.celular}}\r\n                            </small>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                    <hr>\r\n                    <div class="control is-grouped" style="padding-top:10px;" *ngIf="!cargando">\r\n                        <p class="control" *ngIf="pedido.status != \'FI\' && pedido.datosImprimir.tipo_pedido_id == \'PA\'">\r\n                        <a class="button is-primary" routerLink="/almacen/pedidos-jurisdiccionales/recepcion/{{pedido.id}}"> <span class="icon"><i class="fa fa-truck"></i></span> <span>Recibir Pedido</span></a>\r\n                        </p>\r\n                        <p class="control">\r\n                        <a class="button is-white" routerLink="{{obtenerDireccion()}}" >Ir a la lista</a>\r\n                        </p>                \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <br>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="tile is-parent is-vertical">\r\n        <div class="tile is-child" >\r\n          <div class="contenedor-pedido" >\r\n            <div class="top-bar" [ngClass]="{\'is-primary\':!pedido.filtro.activo,\'is-dark\': pedido.filtro.activo }">\r\n                <span *ngIf="!pedido.filtro.activo">Claves: {{ pedido.lista.length }} Insumos: {{pedido.totalInsumos | number}} Total: $ {{ pedido.totalMonto | number: \'1.2-2\' }}</span>\r\n                <span *ngIf="pedido.filtro.activo"><span class="icon"><i class="fa fa-search"></i></span> Resultados: {{ pedido.filtro.lista.length }}</span>                \r\n            </div> \r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em;">\r\n                <thead>\r\n                    <tr  >\r\n                        <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                        <th class="is-hidden-mobile" style="width:118px;">\r\n                        <p class="control is-expanded" >\r\n                            <input type="hidden" #searchBoxClavePrevia >                            \r\n                            <input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxClave, searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>\r\n                        <th class="is-hidden-tablet">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionClavePrevia >                            \r\n                            <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>  \r\n                        <th style="vertical-align: middle;" class="is-hidden-mobile " >Descripcion</th>                  \r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Unidades médicas asignadas">Clues</abbr></th>\r\n                        <th  style="width:21px !important;"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                    <tr   *ngFor="let item of pedido.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ item.lote }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    \r\n                    <td>\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        {{item.tipo}}\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        </div>\r\n                    </td>\r\n\r\n                    <td style="width:78px !important;text-align:center;">\r\n                        <a (click)="toggleModalListaClues(item); ">{{ item.cantidad }}</a>\r\n                    </td>\r\n\r\n                    <td style="text-align: right;">\r\n                            $<b><abbr>{{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                        </td>\r\n                        <td style="width:100px !important; text-align:center">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.lista_clues.length }}</a>\r\n                        </td>\r\n                        <td style="width:48px !important;">\r\n                            <a (click)="toggleModalListaClues(item); "><span class="icon"><i class="fa fa-list"></i></span></a>\r\n                        </td>\r\n                    </tr>      \r\n                </tbody>\r\n                <tbody *ngIf="pedido.filtro.activo">\r\n                    <tr  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ item.lote }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    \r\n                    <td>\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                            <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                            <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        </div>\r\n                    </td>\r\n                    <td style="width:78px !important; text-align:center;">\r\n                        <a (click)="toggleModalListaClues(item); ">{{ item.cantidad }}</a>\r\n                    </td>\r\n                    <td style="width:78px !important;">\r\n                        <b><abbr>$ {{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                    </td> \r\n                    </tr>\r\n                </tbody>              \r\n            </table>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.lista.length" \r\n                    [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.paginacion.indice"\r\n                    (onSiguiente)="pedido.paginaSiguiente()" \r\n                    (onAnterior)="pedido.paginaAnterior()" \r\n                    (onListar)="pedido.listar($event)" \r\n                    *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.filtro.lista.length" \r\n                    [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                    (onSiguiente)="pedido.filtro.paginaSiguiente()" \r\n                    (onAnterior)="pedido.filtro.paginaAnterior()" \r\n                    (onListar)="pedido.filtro.listar($event)" \r\n                    *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n            <br>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>    \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarImprimirDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogo()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-print"></i></span> Imprimir Pedido \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogo()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <div class="columns">\r\n          <div class="column is-one-quarter" *ngFor="let tipo of tiposSubPedidos">\r\n            <div class="card">\r\n              <header class="card-header">\r\n                <p class="card-header-title">\r\n                  {{subPedidos[tipo].titulo}}\r\n                </p>\r\n              </header>\r\n              <div class="card-content">\r\n                <div class="content">\r\n                  <strong>Total claves</strong>: {{subPedidos[tipo].claves | number}} <br>\r\n                  <strong>Total unidades</strong>: {{subPedidos[tipo].cantidad | number}} <br>\r\n                  <strong>Total monto</strong>: $ {{subPedidos[tipo].monto + ((subPedidos[tipo].tiene_iva)?+subPedidos[tipo].monto*16/100:0) | number:\'1.2-2\'}}\r\n                </div>\r\n              </div>\r\n              <footer class="card-footer">\r\n                <a class="card-footer-item" (click)="imprimir(tipo)" [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }">\r\n                  <span class="icon is-medium"><i class="fa fa-file-pdf-o"></i></span>&nbsp;<span>Descargar/Imprimir</span>\r\n                </a>\r\n              </footer>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n<pedidos-jurisdiccionales-lista-clues *ngIf="mostrarModalListaClues" [insumo]="loteSeleccionado" [listaClaveAgregadas]="listaClaveAgregadas" [lectura]="true" (onCerrar)="mostrarModalListaClues = false"></pedidos-jurisdiccionales-lista-clues>'},cQn5:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("WTkT"),o=a("oeHx"),c=a("G8gi"),l=a("f5Uh"),d=a("Px6Q"),u=a("BgMt"),p=a("chZF");a.d(e,"a",function(){return f});var m=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},f=function(){function t(){}return t}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},cXTN:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("BFvY"),o=a("w0bh"),c=a("LLho"),l=a("Gvcj"),d=a("qjeI"),u=a("ABhI"),p=a("/dPQ");a.d(e,"a",function(){return f});var m=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},f=function(){function t(){}return t}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,d.a,c.a,l.a,r.ReactiveFormsModule],declarations:[u.a,p.a],providers:[s.a,o.a]})],f)},ca03:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("bm2B"),o=a("/K6b"),c=a("7W7s"),l=a("oeHx"),d=a("G8gi"),u=a("f5Uh"),p=a("LLho"),m=a("xWpI"),f=a("YvVs");a.d(e,"a",function(){return h});var g=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},h=function(){function t(){}return t}();h=g([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.FormsModule,o.a,l.a,d.a,u.a,p.a,c.a],declarations:[m.a,f.a]})],h)},ca5U:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("pPg0"),s=a("EYy9"),o=a("4A07"),c=a("i8ny"),l=a("hu6k");a.d(e,"a",function(){return u});var d=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},u=function(){function t(){}return t}();u=d([a.i(n.NgModule)({imports:[i.CommonModule,r.a,s.a],declarations:[o.a,c.a],providers:[l.a]})],u)},chZF:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={}}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t}();i([a.i(n.Input)(),r("design:type",String)],s.prototype,"modulo",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"icono",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"url",void 0),s=i([a.i(n.Component)({selector:"menu-equipamiento",template:a("VrPa"),styles:[a("nUOd")]}),r("design:paramtypes",[])],s)},ciSs:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("c3Uv"),s=a("nUrr"),o=a("D9tw");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"almacen/salidas-estandar",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"ver/:id",component:s.a}],canActivate:[o.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},ckLH:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bm2B");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(){this.onEnviar=new n.EventEmitter,this.onRegresar=new n.EventEmitter,this.onToggleCambiarPassword=new n.EventEmitter,this.onCargarRoles=new n.EventEmitter,this.unidadesMedicasEdicion=null,this.tab=1,this.unidadesMedicasAgregadas=[],this.cluesAgregadas=[],this.unidadMedicaSeleccionada=null,this.idsAlmacenesSeleccionados=[]}return t.prototype.ngOnInit=function(){var t=this.usuario.get("unidades_medicas"),e=this.usuario.get("almacenes");if(this.cluesAgregadas=t.value,this.idsAlmacenesSeleccionados=e.value,null!=this.unidadesMedicasEdicion){this.unidadesMedicasAgregadas=this.unidadesMedicasEdicion;for(var a in this.unidadesMedicasAgregadas)for(var n in this.unidadesMedicasAgregadas[a].almacenes)for(var i in this.idsAlmacenesSeleccionados)if(this.idsAlmacenesSeleccionados[i]==this.unidadesMedicasAgregadas[a].almacenes[n].id){this.unidadesMedicasAgregadas[a].almacenes[n].seleccionado=!0;break}}},t.prototype.enviar=function(){this.onEnviar.emit()},t.prototype.cargarRoles=function(){this.onCargarRoles.emit()},t.prototype.regresar=function(){this.onRegresar.emit()},t.prototype.toggleCambiarPassword=function(){this.onToggleCambiarPassword.emit()},t.prototype.agregarUnidadMedica=function(t){for(var e in this.unidadesMedicas)this.unidadesMedicas[e].clues==t&&(this.unidadesMedicasAgregadas.push(this.unidadesMedicas[e]),this.cluesAgregadas.push(t),this.usuario.controls.unidades_medicas.setValue(this.cluesAgregadas))},t.prototype.eliminarClues=function(t,e,a){t.preventDefault(),t.stopPropagation()},t.prototype.toggleAlmacen=function(t){for(var e=!1,a=0;a<this.idsAlmacenesSeleccionados.length;a++)if(this.idsAlmacenesSeleccionados[a]==t.id){this.idsAlmacenesSeleccionados.splice(a,1),t.seleccionado=!1,e=!0;break}e||(this.idsAlmacenesSeleccionados.push(t.id),t.seleccionado=!0),this.usuario.controls.almacenes.setValue(this.idsAlmacenesSeleccionados)},t}();r([a.i(n.Input)(),s("design:type",Array)],o.prototype,"roles",void 0),r([a.i(n.Input)(),s("design:type",Array)],o.prototype,"unidadesMedicas",void 0),r([a.i(n.Input)(),s("design:type","function"==typeof(c=void 0!==i.FormGroup&&i.FormGroup)&&c||Object)],o.prototype,"usuario",void 0),r([a.i(n.Input)(),s("design:type",Boolean)],o.prototype,"usuarioRepetido",void 0),r([a.i(n.Input)(),s("design:type",Boolean)],o.prototype,"usuarioInvalido",void 0),r([a.i(n.Input)(),s("design:type",Boolean)],o.prototype,"cargando",void 0),r([a.i(n.Input)(),s("design:type",Boolean)],o.prototype,"cargandoRoles",void 0),r([a.i(n.Input)(),s("design:type",Boolean)],o.prototype,"mostrarCambiarPassword",void 0),r([a.i(n.Output)(),s("design:type",Object)],o.prototype,"onEnviar",void 0),r([a.i(n.Output)(),s("design:type",Object)],o.prototype,"onRegresar",void 0),r([a.i(n.Output)(),s("design:type",Object)],o.prototype,"onToggleCambiarPassword",void 0),r([a.i(n.Output)(),s("design:type",Object)],o.prototype,"onCargarRoles",void 0),r([a.i(n.Input)(),s("design:type",Object)],o.prototype,"unidadesMedicasEdicion",void 0),o=r([a.i(n.Component)({selector:"panel-control-usuarios-form",template:a("PxV7"),styles:[a("Lw4Z")]}),s("design:paramtypes",[])],o);var c},clZW:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("oo7j"),s=a("1Da8"),o=a("1ei5"),c=a("94wZ"),l=a("D9tw"),d=a("2qAn");a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=[{path:"pacientes/modulo",children:[{path:"egreso",component:r.a,canActivate:[d.a],data:{key:"CKXlt7sNZCiWBhvk33xqWEVTnv2lP022"}},{path:"egreso/:id",component:s.a,canActivate:[d.a],data:{key:"CKXlt7sNZCiWBhvk33xqWEVTnv2lP022"}},{path:"ingreso/:id",component:o.a,canActivate:[d.a],data:{key:"eS7qbng49qtMSs88wsflDnzMBVUfVMlc"}},{path:"verificacion",component:c.a,canActivate:[d.a],data:{key:"eS7qbng49qtMSs88wsflDnzMBVUfVMlc"}}],canActivate:[l.a]}],m=function(){function t(){}return t}();m=u([a.i(n.NgModule)({imports:[i.b.forChild(p)],exports:[i.b]})],m)},cmm8:function(t,e){t.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " \'is-primary\' " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    \r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Editar Paciente\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <!-- Form Nuevo -->\r\n            <section class="section">\r\n\t            <form name="form" novalidate [formGroup]="paciente"  (ngSubmit)="enviar()">     \r\n\t            \r\n\t              <div class="control is-grouped">\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Nombre</label>\r\n\t                  <input class="input" autofocus type="text"  placeholder="Nombre" formControlName="nombre">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'nombre\').hasError(\'required\') && paciente.get(\'nombre\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                \r\n\t              </div>\r\n\t              <div class="control is-grouped">\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Sexo</label>\r\n\t                \t<span class="select is-fullwidth">\r\n\t\t                \t<select  formControlName="sexo"  name="sexo">\r\n\t\t                \t\t<option value="1" selected="selected">MASCULINO</option>\r\n\t\t                \t\t<option value="2">FAMENINO</option>\r\n\t\t                \t</select>\r\n\r\n\t\t                </span>\t\r\n\t                 \t<span class="icon is-small" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">\r\n\t\t                     \t<i class="fa fa-warning"></i>\r\n\t\t                    </span>\r\n\t\t                    <span class="help is-danger" *ngIf="paciente.get(\'sexo\').hasError(\'required\') && paciente.get(\'sexo\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                \t<label class="label">Teléfono</label>\r\n\t                  <input class="input" type="text" placeholder="Telefono" formControlName="telefono">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'telefono\').hasError(\'required\') && paciente.get(\'telefono\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                <label class="label">Fecha Nacimiento</label>\r\n\t                  <input class="input" type="text" placeholder="AAAA/mm/dd" formControlName="fecha_nacimiento">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'fecha_nacimiento\').hasError(\'required\') && paciente.get(\'fecha_nacimiento\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                \t<label class="label">Hora Nacimiento (si aplica)</label>\r\n\t                  <input class="input" type="text" placeholder="HH:mm" formControlName="hora_nacimiento">\r\n\t                 \r\n\t                </p>\r\n\t              </div>\r\n\t              <div class="control is-grouped">\r\n\t              \t\r\n\t                <p class="control is-expanded  has-icon has-icon-right">\r\n\t                \t<label class="label">Domicilio</label>\r\n\t                \t<input class="input" type="text" placeholder="Domicilio" formControlName="domicilio">\r\n\t                \t<span class="icon is-small" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">\r\n\t\t                    <i class="fa fa-warning"></i>\r\n\t\t                </span>\r\n\t\t                <span class="help is-danger" *ngIf="paciente.get(\'domicilio\').hasError(\'required\') && paciente.get(\'domicilio\').touched">Este campo es requerido.</span>\r\n\t                 \r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                <label class="label">Colonia</label>\r\n\t                  <input class="input" type="text" placeholder="Colonia" formControlName="colonia">\r\n\t                  <span class="icon is-small" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">\r\n\t                    <i class="fa fa-warning"></i>\r\n\t                  </span>\r\n\t                  <span class="help is-danger" *ngIf="paciente.get(\'colonia\').hasError(\'required\') && paciente.get(\'colonia\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t             </div>\r\n\t             <div class="control is-grouped">  \r\n\t             \t\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  <label class="label">Municipio</label> \r\n\t                  <span class="select is-fullwidth">\r\n\t\t                \t<select  formControlName="municipio_id" name="municipio_id" #municipio (change)="cargarLocalidades(municipio.value)">\r\n\t\t                \t\t<option *ngFor="let item of Municipios" value="{{item.id}}">{{ item.nombre }} </option>\r\n\t\t                \t</select>\r\n\t\t                \t\r\n\t\t                </span>\t\r\n\t\t                <span class="icon is-small" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'municipio_id\').hasError(\'required\') && paciente.get(\'municipio_id\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  <label class="label">Localidad</label>\t\r\n\t                  <span class="select is-fullwidth">\r\n\t\t                \t<select formControlName="localidad_id" name="localidad_id">\r\n\t\t                \t\t<option *ngFor="let item of Localidades" value="{{item.id}}">{{ item.nombre }} </option>\r\n\t\t                \t</select>\r\n\t\t                \t\r\n\t\t                </span>\t\r\n\t\t                <span class="icon is-small" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">\r\n\t\t                     \t<i class="fa fa-warning"></i>\r\n\t\t                    </span>\r\n\t\t                <span class="help is-danger" *ngIf="paciente.get(\'localidad_id\').hasError(\'required\') && paciente.get(\'localidad_id\').touched">Este campo es requerido.</span>\r\n\t                </p>\r\n\t              </div>\r\n\t              <div class="control is-grouped">   \r\n\t                \r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  \t<label class="label">No Expediente</label>\r\n\t\t                <input class="input" type="text" placeholder="No Expediente" formControlName="no_expediente">\r\n\t                    <span class="icon is-small" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'no_expediente\').hasError(\'required\') && paciente.get(\'no_expediente\').touched">Este campo es requerido.</span>\r\n\t\t                \r\n\t                </p>\r\n\t                <p class="control is-expanded has-icon has-icon-right">\r\n\t                  \t<label class="label">No Afililación</label>\r\n\t\t                <input class="input" type="text" placeholder="No Afiliación" formControlName="no_afiliacion">\r\n\t                    <span class="icon is-small" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">\r\n\t                     \t<i class="fa fa-warning"></i>\r\n\t                    </span>\r\n\t                    <span class="help is-danger" *ngIf="paciente.get(\'no_afiliacion\').hasError(\'required\') && paciente.get(\'no_afiliacion\').touched">Este campo es requerido.</span>\r\n\t\t                \r\n\t                </p>\r\n\t              </div>\r\n\r\n\t              <div class="control is-grouped">\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <label class="label">Resposable Conocido</label>\r\n                        <span class="select is-fullwidth">\r\n                            <select formControlName="responsableconocido" name="responsableconocido" (change)="responsable()">\r\n                                <option value="1">SI</option>\r\n                                <option value="2">NO</option>\r\n                            </select>\r\n\r\n                        </span> \r\n                    </p>\r\n                  </div>\r\n                  <div [hidden]="verFormResponsable">\r\n                      <section class="section" style="padding: 1rem 1.5rem; background-color: #EFEFEF">\r\n                            <div class="container">\r\n                              <div class="heading">\r\n                                <h1 class="title">Datos del Responsable</h1>\r\n                              </div>\r\n                            </div>\r\n                        </section>  \r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Nombre</label>\r\n                          <input class="input" autofocus type="text"  placeholder="Nombre Responsable" formControlName="nombre_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'nombre_responsable\').hasError(\'required\') && paciente.get(\'nombre_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                      <div class="control is-grouped">\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Patentesco</label>\r\n                               <input class="input" autofocus type="text"  placeholder="Parentesco" formControlName="parentesco">\r\n                              <span class="icon is-small" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                              </span>\r\n                              <span class="help is-danger" *ngIf="paciente.get(\'parentesco\').hasError(\'required\') && paciente.get(\'parentesco\').touched">Este campo es requerido.</span>\r\n\r\n                        </p>\r\n                         <p class="control is-expanded  has-icon has-icon-right">\r\n                            <label class="label">Domicilio</label>\r\n                            <input class="input" type="text" placeholder="Domicilio Responsable" formControlName="domicilio_responsable">\r\n                            <span class="icon is-small" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="paciente.get(\'domicilio_responsable\').hasError(\'required\') && paciente.get(\'domicilio_responsable\').touched">Este campo es requerido.</span>\r\n                         \r\n                        </p>\r\n                        <p class="control is-expanded has-icon has-icon-right">\r\n                            <label class="label">Teléfono</label>\r\n                          <input class="input" type="text" placeholder="Telefono Responsable" formControlName="telefono_responsable">\r\n                          <span class="icon is-small" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">\r\n                            <i class="fa fa-warning"></i>\r\n                          </span>\r\n                          <span class="help is-danger" *ngIf="paciente.get(\'telefono_responsable\').hasError(\'required\') && paciente.get(\'telefono_responsable\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                        \r\n                      </div>\r\n                     \r\n                    </div> \r\n\t              <br><br>\r\n\t              <div class="control is-grouped">\r\n\t                <p class="control">\r\n\t                  <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': cargando}" [disabled]="paciente.invalid">Guardar</button>\r\n\t                </p>\r\n\t                \r\n\t                <p class="control">\r\n\t                  <a class="button is-white" (click)="regresar()" >Regresar</a>\r\n\t                </p>\r\n\t              </div>\r\n\t          </form>\r\n\t        </section>  \r\n            <!--  Fin Nuevo  -->\r\n        </div>\r\n    </div>\r\n</div>    \r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <p><b>Error:</b> {{ mensajeError.texto }}<br></p>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-warning" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeAdvertencia.mostrar">\r\n    <button class="delete" (click)="mensajeAdvertencia.mostrar = false"></button>        \r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-warning"></i></span> <span>{{ mensajeAdvertencia.texto }}</span></p>\r\n    \r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeAdvertencia.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>    '},"cq/0":function(t,e,a){"use strict";var n=a("/oeL"),i=a("gf2+"),r=a("gHRf");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this.apiService=t,this.onCerrar=new n.EventEmitter,this.onEnviar=new n.EventEmitter,this.cargando=!1,this.cargandoUnidadesMedicasSinAsignar=!1,this.edica=!1,this.mensajeError=new r.a,this.mensajeAgregado=new r.a,this.unidadesMedicasSinAsignar=[],this.unidadesMedicas=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.clues="-1"}return t.prototype.ngOnInit=function(){this.listar(this.paginaActual),this.cargarUnidadesMedicasSinAsignar()},t.prototype.cerrar=function(){this.onCerrar.emit()},t.prototype.cargarUnidadesMedicasSinAsignar=function(){var t=this;this.cargandoUnidadesMedicasSinAsignar=!0,this.apiService.listaClues(this.lista.id,{sin_asignar:!0}).subscribe(function(e){t.cargandoUnidadesMedicasSinAsignar=!1,t.unidadesMedicasSinAsignar=e,console.log("Items cargados.")},function(e){t.cargandoUnidadesMedicasSinAsignar=!1,t.mensajeError.mostrar=!0,t.ultimaPeticion=t.cargarUnidadesMedicasSinAsignar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0,this.apiService.listaClues(this.lista.id,{page:t,per_page:this.resultadosPorPagina}).subscribe(function(t){e.cargando=!1,e.unidadesMedicas=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.paginaActual!=this.paginasTotales&&this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){1!=this.paginaActual&&this.listar(this.paginaActual-1)},t.prototype.eliminar=function(t,e){var a=this;t.cargando=!0,this.apiService.eliminarClues(t.id).subscribe(function(t){a.unidadesMedicas.splice(e,1),a.cargarUnidadesMedicasSinAsignar()},function(e){t.cargando=!1,a.mensajeError.mostrar=!0;try{e.json();401==e.status?a.mensajeError.texto="No tiene permiso para hacer esta operación.":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(t){console.log("No se puede interpretar el error"),500==e.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.seleccionarClues=function(t){this.clues=t},t.prototype.agregar=function(t){var e=this;if(t.preventDefault(),"-1"!=this.clues){var a={};if("TODAS"!=this.clues)a={claves_basicas_id:this.lista.id,clues:this.clues};else{var n=[];for(var i in this.unidadesMedicasSinAsignar)n.push(this.unidadesMedicasSinAsignar[i].clues);a={claves_basicas_id:this.lista.id,lista_clues:n}}this.agregandoUnidadMedica=!0,this.apiService.agregarClues(a).subscribe(function(t){console.log(t),e.clues=-1,e.agregandoUnidadMedica=!1,e.cargarUnidadesMedicasSinAsignar(),e.listar(1)},function(t){e.agregandoUnidadMedica=!1,e.mensajeError.mostrar=!0;try{t.json();401==t.status?e.mensajeError.texto="No tiene permiso para hacer esta operación.":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})}},t}();s([a.i(n.Output)(),o("design:type",Object)],c.prototype,"onCerrar",void 0),s([a.i(n.Output)(),o("design:type",Object)],c.prototype,"onEnviar",void 0),s([a.i(n.Input)(),o("design:type",Object)],c.prototype,"lista",void 0),c=s([a.i(n.Component)({selector:"claves-basicas-lista-clues",template:a("2Wqg"),styles:[a("7+oM")]}),o("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object])],c);var l},dYHC:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),t.exports=t.exports.toString()},dq2d:function(t,e){t.exports='<div class="modal" [ngClass]="{\'is-active\': mostrar}">\r\n    <div class="modal-background" (click)="toggle()"></div>\r\n    <div class="modal-content">\r\n\r\n        <header class="modal-card-head" style="background: white !important;">\r\n            <p class="modal-card-title"><span class="icon"><i class="fa fa-user-circle"></i></span> Mi cuenta</p>\r\n            <button class="delete" (click)="toggle()"></button>\r\n        </header>\r\n        <section class="modal-card-body has-text-centered">\r\n            <nav class="level">\r\n                <div class="level-item has-text-centered">\r\n                    <figure class="image is-128x128" style="position:relative;">\r\n                        <img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar">\r\n                        <a class="button is-primary is-inverted" style="position: absolute; top: 0px; right:-2em;"><span class="icon"><i class="fa fa-edit"></i></span></a>\r\n                    </figure>\r\n\r\n                </div>\r\n\r\n            </nav>\r\n            <h1 class="title">{{ usuario.nombre }} {{ usuario.apellidos }}</h1>\r\n            <h2 class="subtitle"><span class="icon"><i class="fa fa-user-circle"></i></span> {{usuario.id}}</h2>\r\n\r\n            <div class="field " *ngIf="usuario.unidades_medicas.length > 0">\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                        <select (change)="seleccionarClues($event.target.value)">\r\n                            <option *ngFor="let um of usuario.unidades_medicas" value="{{ um.clues }}" [selected]="usuario.clues_activa && usuario.clues_activa.clues== um.clues">{{ um.clues }} {{ um.nombre}}</option>\r\n                        </select>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n\r\n            <div class="field" *ngIf="usuario.clues_activa && usuario.clues_activa.almacenes && usuario.clues_activa.almacenes.length > 0">\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                        <select (change)="seleccionarAlmacen($event.target.value)">\r\n                            <option *ngFor="let almacen of usuario.clues_activa.almacenes" value="{{ almacen.id }}" [selected]="usuario.almacen_activo.id== almacen.id">{{ almacen.nombre }}</option>\r\n                        </select>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n\r\n            <div class="field " *ngIf="usuario.proveedores">\r\n                <p class="control is-expanded">\r\n                    <span class="select is-fullwidth">\r\n                        <select (change)="seleccionarProveedor($event.target.value)">\r\n                            <option *ngFor="let proveedor of usuario.proveedores" value="{{ proveedor.id }}" [selected]="usuario.proveedor_activo && usuario.proveedor_activo.id == proveedor.id">{{ proveedor.nombre }}</option>\r\n                        </select>\r\n                    </span>\r\n                </p>\r\n            </div>\r\n\r\n            <a *ngIf="mostrarCambiarEntorno" class="button  is-medium is-fullwidth is-primary" (click)="cambiarEntorno()"><span class="icon"><i class="fa fa-exchange"></i></span><span>Cambiar entorno</span></a>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button  is-medium is-fullwidth " (click)="bloquear()"><span class="icon"><i class="fa fa-lock"></i></span><span>Bloquear aplicación</span></a>\r\n            <a class="button is-danger is-medium is-fullwidth is-outlined" (click)="logout()"><span class="icon"><i class="fa fa-sign-out"></i></span><span>Cerrar sesión</span></a><br>\r\n\r\n        </footer>\r\n    </div>\r\n</div>'},drI6:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t}();s=i([a.i(n.Component)({selector:"app-dashboard-salidas",template:a("nyLM")}),r("design:paramtypes",[])],s)},dxks:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},e3Yq:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("faWm"),s=a("BkNc");a.d(e,"a",function(){return c});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=function(){function t(){}return t}();c=o([a.i(n.NgModule)({imports:[i.CommonModule,s.b],exports:[r.a],declarations:[r.a]})],c)},e3sQ:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("ohCu");a.d(e,"a",function(){return c});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=function(){function t(){}return t}();c=o([a.i(n.NgModule)({imports:[i.CommonModule,r.b],declarations:[s.a],exports:[s.a]})],c)},e5d4:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"chart{display:block}div.scroll{background-color:#fff;height:400px;overflow:auto}",""]),t.exports=t.exports.toString()},eJUb:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("YryS"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"almacen-articulos",component:r.a,canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},"eSu/":function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("bm2B"),o=a("fc+i"),c=a("BFvY"),l=a("gHRf"),d=a("GtVU");a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(t,e,a,n,i,r,s){this.router=t,this.title=e,this.authService=a,this.route=n,this.location=i,this.pacienteService=r,this.fb=s,this.cargando=!1,this.cargandoMunicipios=!1,this.cargandoLocalidades=!1,this.verFormResponsable=!1,this.mensajeError=new l.a,this.mensajeAdvertencia=new l.a,this.mensajeExito=new l.a,this.Municipios=[],this.Localidades=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Editar Paciente / Admisión"),this.paciente=this.fb.group({nombre:["",[s.Validators.required]],fecha_nacimiento:["",[s.Validators.required]],hora_nacimiento:["",[]],domicilio:["",[s.Validators.required]],colonia:["",[s.Validators.required]],telefono:["",[s.Validators.required]],no_expediente:["",[s.Validators.required]],no_afiliacion:["",[s.Validators.required]],municipio_id:["",[s.Validators.required]],localidad_id:["",[s.Validators.required]],sexo:["",[s.Validators.required]],responsableconocido:["1",[s.Validators.required]],nombre_responsable:["",[s.Validators.required]],parentesco:["",[s.Validators.required]],domicilio_responsable:["",[s.Validators.required]],telefono_responsable:["",[s.Validators.required]]}),this.route.params.subscribe(function(e){t.id=e.id}),console.log(this.id),this.cargarDatos()},t.prototype.cargarMunicipios=function(){var t=this;this.cargandoMunicipios=!0,this.pacienteService.listaMunicipios().subscribe(function(e){t.Municipios=e,t.cargandoMunicipios=!1,console.log("Municipios cargados")},function(e){t.cargandoMunicipios=!1})},t.prototype.cargarLocalidades=function(t){var e=this;this.cargandoLocalidades=!0,this.pacienteService.listaLocalidades(t).subscribe(function(t){e.Localidades=t,e.cargandoLocalidades=!1,console.log("Localidades cargados")},function(t){e.cargandoLocalidades=!1})},t.prototype.cargarDatos=function(){var t=this;this.cargando=!0,console.log("Cargando usuario."),this.pacienteService.ver(this.id).subscribe(function(e){t.cargando=!1,t.datosCargados=!0,e.responsable?t.paciente.patchValue({nombre_responsable:e.responsable.nombre,parentesco:e.responsable.parentesco,domicilio_responsable:e.responsable.domicilio,telefono_responsable:e.responsable.telefono}):(t.verFormResponsable=!0,t.paciente.patchValue({responsableconocido:2,nombre_responsable:1,parentesco:"desconocido",domicilio_responsable:"conocido",telefono_responsable:"conocido"})),t.paciente.patchValue(e),t.cargarMunicipios(),t.cargarLocalidades(e.municipio_id)},function(e){t.cargando=!1,t.mensajeError=new l.a(!0),t.mensajeError=new l.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.regresar=function(){this.location.back()},t.prototype.responsable=function(){this.verFormResponsable=!this.verFormResponsable,this.verFormResponsable?this.paciente.patchValue({nombre_responsable:1,parentesco:"desconocido",domicilio_responsable:"conocido",telefono_responsable:"conocido"}):this.paciente.patchValue({nombre_responsable:"",parentesco:"",domicilio_responsable:"",telefono_responsable:""})},t.prototype.enviar=function(){var t=this;this.cargando=!0,this.pacienteService.editar(this.id,this.paciente.value).subscribe(function(e){t.cargando=!1,console.log("Paciente editado."),t.mensajeExito=new l.a(!0),t.mensajeExito.texto="Se han guardado los cambios.",t.mensajeExito.mostrar=!0},function(e){t.cargando=!1,t.mensajeError=new l.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t}();m=u([a.i(n.Component)({selector:"app-editar",template:a("cmm8"),styles:[a("kppZ")]}),p("design:paramtypes",["function"==typeof(f=void 0!==r.a&&r.a)&&f||Object,"function"==typeof(g=void 0!==o.b&&o.b)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object,"function"==typeof(v=void 0!==r.c&&r.c)&&v||Object,"function"==typeof(b=void 0!==i.Location&&i.Location)&&b||Object,"function"==typeof(y=void 0!==d.a&&d.a)&&y||Object,"function"==typeof(_=void 0!==s.FormBuilder&&s.FormBuilder)&&_||Object])],m);var f,g,h,v,b,y,_},efyd:function(t,e){t.exports='<router-outlet style="height:100% !important;"></router-outlet>\r\n<app-bloquear-pantalla></app-bloquear-pantalla>'},eiSl:function(t,e){t.exports='<section class="hero is-dark" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <!--<a title="Almacen" class="nav-item pull-left nav-hub-active"  routerLink="/almacen">\r\n            \r\n                  <img src="assets/hub-farmacia.svg" alt="icono">\r\n              \r\n                </a>-->\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/administrador-central" routerLinkActive="active">\r\n                      <!--<img src="http://bulma.io/images/bulma-type.png" alt="Bulma logo">-->\r\n                      <!--<span class="icon">\r\n                          <i class="fa fa-cog"></i>\r\n                      </span>--> \r\n                      <img src="assets/hub-administrador-central.svg" alt="icono">\r\n                      <h1 class="title">&nbsp;Administrador central</h1>\r\n                    </a>\r\n                </div>\r\n                <a class="nav-item is-hidden-tablet" (click)="toggleMenuLateral()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-navicon"></i>\r\n                    </span>\r\n                </a>\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>\r\n\r\n<div class="modal" [ngClass]="{\'is-active\': mostrarMenuLateral}">\r\n  <div class="modal-background" (click)="toggleMenuLateral()"></div>\r\n  <div class="modal-content">\r\n    <div class="card" style="width: 100%">\r\n        <div class="card-content">\r\n            <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n        </div>\r\n    </div>\r\n  </div>\r\n  <button class="modal-close" (click)="toggleMenuLateral()"></button>\r\n</div>'},ejtG:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},ewPc:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},ezan:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("qbdv"),s=a("BkNc"),o=a("bm2B"),c=a("/zHi"),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("bbdN")),h=(a.n(g),a("p5Ee")),v=a("gHRf"),b=a("2cH3"),y=a("mkhf"),_=a("1Lkp"),x=a("sYIv");a.d(e,"a",function(){return I});var j=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},P=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},I=function(){function t(t,e,a,n,i,r,s,o,c){this.title=t,this.location=e,this.router=a,this.route=n,this._ngZone=i,this.pedidosService=r,this.almacenesService=s,this.fb=o,this.cambiarEntornoService=c,this.cargando=!1,this.cargandoAlmacenes=!1,this.cargandoInsumos=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.mostrarImprimirDialogo=!1,this.mostrarCancelarDialogo=!1,this.tiposSubPedidos=[],this.subPedidos={},this.recepciones={},this.tieneRecepcionIniciada=!1,this.meses={1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"},this.dialogCancelarFechaTransferencia={},this.dialogCancelarMeses=[],this.errorCancelarPedido=!1,this.errorCancelarPedidoTexto="",this.cancelandoPedido=!1,this.formularioTitulo="Nuevo",this.esEditar=!1,this.mostrarModalInsumos=!1,this.porcentageTotalPedido=0,this.cargandoPdf={},this.errorEnPDF=!1}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Nuevo pedido / Almacén"),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.router.navigate(["/almacen/pedidos"])}),this.pdfworker=new Worker("web-workers/farmacia/pedidos/pedido-proveedor.js");var e=this,a=this._ngZone;this.pdfworker.onmessage=function(t){a.run(function(){console.log(t),e.cargandoPdf[t.data.tipoPedido]=!1}),g.saveAs(e.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.pdfworker.onerror=function(t){a.run(function(){console.log(t),e.errorEnPDF=!0})},this.pedido=new x.a(!0),this.route.params.subscribe(function(e){e.id?(t.cargando=!0,t.pedido.id=e.id,t.pedido.status="PS",t.esEditar=!0,t.formularioTitulo="Editar",t.pedidosService.ver(e.id).subscribe(function(e){t.pedido.datosImprimir=e,t.pedido.status=e.status;for(var a in e.insumos){var n=e.insumos[a],i=n.insumos_con_descripcion;i.cantidad=+n.cantidad_solicitada,i.cantidad_recibida=+n.cantidad_recibida||0,i.monto=+n.monto_solicitado,i.monto_recibido=+n.monto_recibido||0,i.precio=+n.precio_unitario,t.pedido.lista.push(i);var r=!1,s="SC";s=n.tipo_insumo.clave,"MC"==n.tipo_insumo.clave&&(r=!0),t.subPedidos[s]||(t.tiposSubPedidos.push(s),t.cargandoPdf[s]=!1,t.subPedidos[s]={titulo:n.tipo_insumo.nombre,clave_folio:s,claves:0,cantidad:0,monto:0,iva:0,tiene_iva:r,lista:[]}),t.subPedidos[s].claves++,t.subPedidos[s].cantidad+=i.cantidad,t.subPedidos[s].monto+=i.monto,t.subPedidos[s].lista.push(i)}if("EF"!=e.status)for(var a in e.recepciones)"BR"==e.recepciones[a].entrada.status&&(t.tieneRecepcionIniciada=!0);e.insumos=void 0,t.pedido.indexar(),t.pedido.listar(1);var o=(t.pedido.datosImprimir.total_claves_recibidas||0)/t.pedido.lista.length*100,c=(t.pedido.datosImprimir.total_cantidad_recibida||0)/t.pedido.totalInsumos*100,l=(t.pedido.datosImprimir.total_monto_recibido||0)/t.pedido.totalMonto*100;t.porcentageTotalPedido=(c+o+l)/3,t.cargando=!1},function(e){t.cargando=!1,t.mensajeError=new v.a(!0),t.mensajeError=new v.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}),console.log("editar pedido")):console.log("nuevo pedido")})},t.prototype.obtenerDireccion=function(){if(this.pedido.status)return"PS"==this.pedido.status?"/almacen/pedidos/por-surtir":"ET"==this.pedido.status?"/almacen/pedidos/en-transito":"FI"==this.pedido.status?"/almacen/pedidos/finalizados":"EF"==this.pedido.status?"/almacen/pedidos/farmacia-subrogada":"EX"==this.pedido.status?"/almacen/pedidos/expirados":"EX-CA"==this.pedido.status?"/almacen/pedidos/expirados-cancelados":"/almacen/pedidos/todos"},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},t.prototype.mostrarFichaInformativa=function(t,e){t.preventDefault(),t.stopPropagation(),alert(e),console.log(e)},t.prototype.keyboardInput=function(t){32==t.keyCode&&t.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.mostrarModalInsumos=!0),39==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaSiguiente():this.pedido.paginaSiguiente()),37==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaAnterior():this.pedido.paginaAnterior())},t.prototype.imprimirExcel=function(){var t="token="+localStorage.getItem("token");window.open(h.a.API_URL+"/generar-excel-pedido/"+this.pedido.id+"?"+t)},t.prototype.imprimir=function(t){void 0===t&&(t="");try{this.cargandoPdf[t]=!0;var e={datos:this.pedido.datosImprimir,insumos:this.subPedidos[t]};this.pdfworker.postMessage(JSON.stringify(e))}catch(e){this.cargandoPdf[t]=!1,console.log(e)}},t.prototype.mostrarDialogo=function(){this.mostrarImprimirDialogo=!0},t.prototype.cerrarDialogo=function(){this.mostrarImprimirDialogo=!1},t.prototype.mostrarDialogoCancelarPedido=function(){this.dialogCancelarMeses=[],this.errorCancelarPedido=!1,this.errorCancelarPedidoTexto="Ocurrio un error al intentar cancelar el pedido";var t=this.pedido.datosImprimir.fecha.split("-"),e=new Date,a=(e.getFullYear(),e.getMonth()+1);parseInt(t[1]);this.dialogCancelarMeses.push({anio:parseInt(t[0]),mes:a,descripcion:this.meses[a]+" "+t[0]});for(var n=1;n<=2;n++)(a+=1)<=12&&this.dialogCancelarMeses.push({anio:parseInt(t[0]),mes:a,descripcion:this.meses[a]+" "+t[0]});this.dialogCancelarFechaTransferencia=this.dialogCancelarMeses[0],this.mostrarCancelarDialogo=!0},t.prototype.transferirRecurso=function(){var t=this,e=prompt("Para confirmar esta transacción, por favor escriba: CANCELAR PEDIDO");if("CANCELAR PEDIDO"!=e)return void(null!=e&&alert("Error al ingresar el texto para confirmar la transferencia."));this.cancelandoPedido=!0;var a={transferir_a_mes:this.dialogCancelarFechaTransferencia.mes,transferir_a_anio:this.dialogCancelarFechaTransferencia.anio};this.pedidosService.cancelarPedidoTransferir(this.pedido.datosImprimir.id,a).subscribe(function(e){t.pedido.status="EX-CA",t.cancelandoPedido=!1,t.mostrarCancelarDialogo=!1,t.errorCancelarPedido=!1},function(e){console.log(e),t.errorCancelarPedido=!0,t.cancelandoPedido=!1,t.mostrarCancelarDialogo=!0;try{var a=e.json();401==e.status&&(t.errorCancelarPedidoTexto="No tiene permiso para esta acción."),500==e.status&&(t.errorCancelarPedidoTexto="500 (Error interno del servidor)"),a.error&&(t.errorCancelarPedidoTexto=a.error)}catch(a){500==e.status?t.errorCancelarPedidoTexto="500 (Error interno del servidor)":t.errorCancelarPedidoTexto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.cerrarDialogoCancelarPedido=function(){this.mostrarCancelarDialogo=!1},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();I=j([a.i(n.Component)({selector:"app-ver",template:a("+sjf"),styles:[a("KDRp")],host:{"(window:keydown)":"keyboardInput($event)"}}),P("design:paramtypes",["function"==typeof(E=void 0!==i.b&&i.b)&&E||Object,"function"==typeof(k=void 0!==r.Location&&r.Location)&&k||Object,"function"==typeof(C=void 0!==s.a&&s.a)&&C||Object,"function"==typeof(A=void 0!==s.c&&s.c)&&A||Object,"function"==typeof(S=void 0!==n.NgZone&&n.NgZone)&&S||Object,"function"==typeof(q=void 0!==_.a&&_.a)&&q||Object,"function"==typeof(w=void 0!==y.a&&y.a)&&w||Object,"function"==typeof(R=void 0!==o.FormBuilder&&o.FormBuilder)&&R||Object,"function"==typeof(B=void 0!==b.a&&b.a)&&B||Object])],I);var E,k,C,A,S,q,w,R,B},f5Uh:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("VMUE"),o=a("QrLZ");a.d(e,"a",function(){return l});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=function(){function t(){}return t}();l=c([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule],exports:[s.a],providers:[o.a],declarations:[s.a]})],l)},fA1b:function(t,e){t.exports='<menu-farmacia [modulo]="\'Pedidos jurisdiccionales\'" [icono]="\'assets/icono-pedidos-jurisdiccionales.svg\'" [url]="\'/almacen/pedidos-jurisdiccionales\'"></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n      <menu-lateral></menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <table class="table" style="margin-bottom:0px;background-color:whitesmoke;">\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th>Autorizado</th>\r\n                        <th>Comprometido</th>\r\n                        <th>Devengado</th>\r\n                        <th>Disponible</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr>\r\n                        <th><abbr title="Presupuesto Anual Causes">PAC</abbr></th>\r\n                        <td><span class="tag is-primary">$<b>{{ presupuesto.causes_modificado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-warning">$<b>{{ presupuesto.causes_comprometido | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-danger">$<b>{{ presupuesto.causes_devengado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-success">$<b>{{ presupuesto.causes_disponible | number:\'1.2-2\' }}</b></span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th><abbr title="Presupuesto Anual No Causes">PANC</abbr></th>\r\n                    <td><span class="tag is-primary">$<b>{{ presupuesto.no_causes_modificado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-warning">$<b>{{ presupuesto.no_causes_comprometido | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-danger">$<b>{{ presupuesto.no_causes_devengado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-success">$<b>{{ presupuesto.no_causes_disponible | number:\'1.2-2\' }}</b></span></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <th><abbr title="Presupuesto Anual Material de Curación">PAMC</abbr></th>\r\n                        <td><span class="tag is-primary">$<b>{{ presupuesto.material_curacion_modificado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-warning">$<b>{{ presupuesto.material_curacion_comprometido | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-danger">$<b>{{ presupuesto.material_curacion_devengado | number:\'1.2-2\' }}</b></span></td>\r\n                        <td><span class="tag is-success">$<b>{{ presupuesto.material_curacion_disponible | number:\'1.2-2\' }}</b></span></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa {{ icono }}"></i></span> {{ titulo }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                            </p>\r\n                            <!--p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/almacen/pedidos/nuevo">\r\n                                <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p-->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th><abbr title="Folio del pedido">Folio</abbr></th>\r\n                        <th>Nombre del Pedido</th>\r\n                        <th>Fecha <span *ngIf="status == \'PS\'">(expiración)</span></th>\r\n                        <th>Claves</th>\r\n                        <th>Cantidad</th>\r\n                        <th>Monto</th>\r\n                        <th style="text-align:center;" width="1">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pedidos; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            <span class="icon"><i class="fa fa-{{(item.tipo_pedido_id==\'PA\')?\'hospital-o\':\'building\'}}"></i></span>\r\n                            {{ item.folio?item.folio:\'S/F\' }}</a>\r\n                        </th>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.descripcion }}</a></td>\r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.fecha | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias?item.expira_en_dias:\'hoy\'}})</span></a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_claves_recibidas || 0) | number }} / {{ item.total_claves_solicitadas | number }} [{{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_cantidad_recibida || 0) | number }} / {{ item.total_cantidad_solicitada | number }} [{{(item.total_cantidad_recibida/item.total_cantidad_solicitada)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            $ {{ (item.total_monto_recibido || 0) | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} [{{(item.total_monto_recibido/item.total_monto_solicitado)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando && item.status == \'BR\'" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                            <a *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias >= 0" routerLink="/almacen/pedidos-jurisdiccionales/recepcion/{{item.id}}" title="Recibir pedido"><span class="icon"><i class="fa fa-truck"></i></span></a>\r\n                            <span *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias < 0" class="tag is-danger" title="Expirado"><span class="icon"><i class="fa fa-exclamation"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'FI\'" class="is-success" title="Finalizado"><span class="icon"><i class="fa fa-check-circle"></i></span></span>\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf="pedidos.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.descripcion }}</a></td>\r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" routerLink="{{obtenerDireccion(item.id,item.status)}}">{{ item.created_at | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias}})</span></a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_claves_recibidas || 0) | number }} / {{ item.total_claves_solicitadas | number }} [{{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}"> \r\n                            {{ (item.total_cantidad_recibida || 0) | number }} / {{ item.total_cantidad_solicitada | number }} [{{(item.total_cantidad_recibida/item.total_cantidad_solicitada)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="{{obtenerDireccion(item.id,item.status)}}">\r\n                            $ {{ (item.total_monto_recibido || 0) | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} [{{(item.total_monto_recibido/item.total_monto_solicitado)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando && item.status == \'BR\'" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                            <a *ngIf="!item.cargando && item.status == \'PS\'" routerLink="/almacen/pedidos-jurisdiccionales/recepcion/{{item.id}}" title="Recibir pedido"><span class="icon"><i class="fa fa-truck"></i></span></a>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <!--p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p-->\r\n</div>'},fCXk:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},faWm:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.ngOnInit=function(){},t}();s=i([a.i(n.Component)({selector:"panel-control-menu-aside",template:a("q8XJ"),styles:[a("q1HA")]}),r("design:paramtypes",[])],s)},fgsB:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},g4Pp:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.ngOnInit=function(){},t}();s=i([a.i(n.Component)({selector:"app-pedidos-jurisdiccionales",template:a("FqeN"),styles:[a("y0OE")]}),r("design:paramtypes",[])],s)},"g9/z":function(t,e,a){"use strict";var n=a("/oeL"),i=a("2cH3");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.cambiarEntornoService=t,this.usuario={}}return t.prototype.ngOnInit=function(){var t=this;this.usuario=JSON.parse(localStorage.getItem("usuario")),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.usuario=JSON.parse(localStorage.getItem("usuario"))})},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();o=r([a.i(n.Component)({selector:"administrador-proveedores-menu",template:a("VwF+"),styles:[a("K4XS")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.a&&i.a)&&c||Object])],o);var c},gFeO:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},gHRf:function(t,e,a){"use strict";var n=a("Dqrr");a.n(n);a.d(e,"a",function(){return i});var i=function(){function t(t,e){void 0===t&&(t=!1),void 0===e&&(e=6),this.titulo="",this.texto="",this.mostrar=!1,this.cuentaAtras=6,this.clase="",this.iniciarCuentaAtras=function(){var t=this,e=n.Observable.timer(7e3);n.Observable.timer(0,1e3).takeUntil(e).subscribe(function(e){t.cuentaAtras-=1,t.cuentaAtras<0&&(t.cuentaAtras=6,t.mostrar=!1)})},t&&this.iniciarCuentaAtras(),this.cuentaAtras=e}return t}()},gJpo:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},gUNf:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},gUxG:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("E8/z"),d=a("LLho"),u=a("Px6Q"),p=a("8H38"),m=a("cHbp"),f=a("yk5R"),g=a("BFvY"),h=a("1z/4"),v=a("K4kt"),b=a("CWbX"),y=a("oSQj"),_=(a.n(y),a("evA2")),x=(a.n(_),a("hN3r"));a.d(e,"a",function(){return P});var j=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},P=function(){function t(){}return t}();P=j([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,h.a,b.a,y.NguiAutoCompleteModule,_.NguiDatetimePickerModule,x.a.forRoot()],declarations:[p.a,m.a,f.a],providers:[g.a,v.a]})],P)},gcnw:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),t.exports=t.exports.toString()},"gf2+":function(t,e,a){"use strict";var n=a("/oeL"),i=a("QTrI");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=c=function(){function t(t){this.jwtRequest=t}return t.prototype.lista=function(){return this.jwtRequest.get(c.URL).map(function(t){return t.json().data})},t.prototype.buscar=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(c.URL,null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.listaPaginada=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get(c.URL,null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(c.URL,t,{}).map(function(t){return t.json().data})},t.prototype.crear=function(t){return this.jwtRequest.post(c.URL,t).map(function(t){return t.json().data})},t.prototype.editar=function(t,e){return this.jwtRequest.put(c.URL,t,e).map(function(t){return t.json().data})},t.prototype.eliminar=function(t){return this.jwtRequest.delete(c.URL,t).map(function(t){return t.json().data})},t.prototype.listaClues=function(t,e){return this.jwtRequest.get("administrador-central/claves-basicas-clues",t,e).map(function(t){return t.json().data})},t.prototype.agregarClues=function(t){return this.jwtRequest.post("administrador-central/claves-basicas-clues",t).map(function(t){return t.json().data})},t.prototype.eliminarClues=function(t){return this.jwtRequest.delete("administrador-central/claves-basicas-clues",t).map(function(t){return t.json().data})},t}();o.URL="administrador-central/claves-basicas",o=c=r([a.i(n.Injectable)(),s("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object])],o);var c,l},h0k0:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("1oVA"),s=a("be/k"),o=a("drI6"),c=a("BFvY"),l=a("F1l5");a.d(e,"a",function(){return u});var d=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},u=function(){function t(){}return t}();u=d([a.i(n.NgModule)({imports:[i.CommonModule,s.a,r.a,l.a],declarations:[o.a],providers:[c.a]})],u)},h7At:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("uAtf");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=[{path:"**",component:r.a}],c=function(){function t(){}return t}();c=s([a.i(n.NgModule)({imports:[i.b.forChild(o)],exports:[i.b]})],c)},hHbS:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.title=t,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return t.prototype.ngOnInit=function(){this.title.setTitle("Farmacia Subrrogada"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[],this.accesosDirectos=[{permiso:"MrL06vIO12iNhchP14h57Puvg71eUmYb",icono:"assets/icono-sincronizar-receta.svg",titulo:"Sincronizar recetas",url:"/farmacia-subrrogada/sincronizar-recetas"},{permiso:"RZsvMjtPtpLWC8afsAFZsNnD9iXtiZC3",icono:"assets/icono-sincronizar-receta.svg",titulo:"Sincronizar recetas",url:"/farmacia-subrrogada/sincronizar-recetas"}];var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(e.length>0){for(var a in this.modulos)t:for(var n in e)if(e[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break t}for(var a in this.accesosDirectos)t:for(var n in e)if(e[n]==this.accesosDirectos[a].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[a]);break t}}},t}();o=r([a.i(n.Component)({selector:"app-index-farmacia",template:a("JtLs"),styles:[a("uOuQ")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},hUzi:function(t,e){t.exports='<menu-farmacia></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},hu6k:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.actualizarViaGit=function(){return this.jwtRequest.get(l.URL+"/actualizar-plataforma-git",null,{}).map(function(t){return t.json().data})},t.prototype.exportarBaseDatos=function(){return this.jwtRequest.get(l.URL+"/exportar-base-datos",null,{}).map(function(t){return t.json().data})},t}();c.URL="opciones-avanzadas",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},hxJY:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},i8ny:function(t,e,a){"use strict";var n=a("/oeL"),i=a("hu6k"),r=a("Fwzv"),s=(a.n(r),a("FeSM")),o=a("p5Ee");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e){this.apiService=t,this.uploaderService=e,this.exportando=!1,this.errores={archivo:null},this.mostrarModalSubirArchivoSQL=!1,this.mensajeErrorSync="",this.archivo=null,this.archivoSubido=!1,this.enviandoDatos=!1,this.progreso=0}return t.prototype.ngOnInit=function(){},t.prototype.exportar=function(){var t="token="+localStorage.getItem("token");window.open(o.a.API_URL+"/opciones-avanzadas/exportar-base-datos/?"+t)},t.prototype.importar=function(){var t=this;if(this.archivo){this.errores={archivo:null},this.mensajeErrorSync="",this.archivoSubido=!1,this.enviandoDatos=!0;var e=new s.a(this.archivo);this.uploaderService.onSuccessUpload=function(e,a,n,i){t.archivoSubido=!0,t.enviandoDatos=!1},this.uploaderService.onErrorUpload=function(e,a,n,i){try{var r=JSON.parse(a);console.log(r.error),t.mensajeErrorSync=r.error}catch(e){t.mensajeErrorSync="Error desconocido, verifique en la consola."}t.archivoSubido=!1,t.enviandoDatos=!1},this.uploaderService.onCompleteUpload=function(e,a,n,i){t.enviandoDatos=!1},this.uploaderService.onProgressUpload=function(e,a){console.log(a),t.progreso=a},this.uploaderService.upload(e)}},t.prototype.fileChange=function(t){var e=t.target.files;e.length>0&&(this.archivo=e[0])},t}();d=c([a.i(n.Component)({selector:"app-base-datos",template:a("VEYG"),styles:[a("aIPN")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.a&&i.a)&&u||Object,"function"==typeof(p=void 0!==r.Uploader&&r.Uploader)&&p||Object])],d);var u,p},iHsF:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),t.exports=t.exports.toString()},iV5y:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),t.exports=t.exports.toString()},iX7h:function(t,e){t.exports='<listar #ctrl URL="listar-pedidos-proveedor" titulo="Sincronizar Receta"></listar>\r\n<formulario #ctrl2 URL="analizar-json-proveedor" titulo="Sincronizar receta" [dato]="dato2"></formulario>\r\n<menu-farmacia [modulo]="\'Sincronizar recetas\'" [icono]="\'assets/hub-farmacia-sub.svg\'" [url]="\'/farmacia-subrrogada/sincronizar-recetas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    \r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Sincronizar recetas\r\n                            </h1>\r\n                        </div>\r\n                        <div class="is-hidden-touch">\r\n                            <div style="height:30px;"></div>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                            <!-- <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/farmacia-subrrogada/sincronizar-recetas/nuevo">\r\n                                    <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p> -->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!cargando" style="min-width:100%; font-size:1em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th></th>\r\n                        <th></th>\r\n                        <th style="text-align:center;"></th>\r\n                        <th colspan="2" style="text-align:center;">Aceptados</th>\r\n                        <th class="causes" colspan="2" style="text-align:center;">Ignorados</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    <tr>\r\n                        <th>Folio/Descripción del Pedido</th>\r\n                        <th>CLUES</th>\r\n                        <th style="text-align:center;">Fecha</th>\r\n                        \r\n                        <th class="aceptados" style="text-align:center;">Recetas</th>\r\n                        <th class="aceptados" style="text-align:center;">Colectivos</th>\r\n\r\n                        <th class="ignorados" style="text-align:center;">Recetas</th>\r\n                        <th class="ignorados" style="text-align:center;">Colectivos</th>\r\n\r\n                        <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <td style="vertical-align: middle;">\r\n                            <strong>{{item.folio}}</strong>\r\n                            <br>{{item.descripcion}}<br>\r\n                        </td>\r\n                        <td style="vertical-align: middle;">\r\n                            {{item.clues}}\r\n                        </td>\r\n                        <td style="text-align:center; vertical-align: middle;">\r\n                            {{item.fecha | date}}<br>\r\n                        </td>\r\n                        <td class="aceptados" style="text-align:center; vertical-align: middle;">3<a routerLink="/almacen/sincronizar-recetas/editar/{{item.id}}"></a></td>\r\n                        <td class="aceptados" style="text-align:center; vertical-align: middle;" >10</td>\r\n                        <td class="ignorados" style="text-align:center; vertical-align: middle;" >2</td>\r\n                        <td class="ignorados" style="text-align:center; vertical-align: middle;" >0</td>\r\n                        <td style="text-align:center; vertical-align: middle;">\r\n                            <button type="button" class="button" (click)="abrirModal(\'sincronizarRecetasJson\', item.id)" >\r\n                                <span class="icon"><i class="fa fa-upload"></i></span>\r\n                                <i class="fa fa-file-code-o" aria-hidden="true"></i>\r\n                            </button>\r\n                            <button type="button" class="button" (click)="abrirModal(\'sincronizarRecetasImagenes\', item.id)" >\r\n                                <span class="icon"><i class="fa fa-upload"></i></span>\r\n                                <i class="fa fa-file-image-o" aria-hidden="true"></i>\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="12" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <td style="vertical-align: middle;">\r\n                            <strong>{{item.folio}}</strong>\r\n                            <br>{{item.descripcion}}<br>\r\n                        </td>\r\n                        <td style="vertical-align: middle;">\r\n                            {{item.clues}}\r\n                        </td>\r\n                        <td style="text-align:center; vertical-align: middle;">\r\n                            {{item.fecha | date}}<br>\r\n                        </td>\r\n                        <td class="aceptados" style="text-align:center; vertical-align: middle;">3<a routerLink="/almacen/sincronizar-recetas/editar/{{item.id}}"></a></td>\r\n                        <td class="aceptados" style="text-align:center; vertical-align: middle;" >10</td>\r\n                        <td class="ignorados" style="text-align:center; vertical-align: middle;" >2</td>\r\n                        <td class="ignorados" style="text-align:center; vertical-align: middle;" >0</td>\r\n                        <td style="text-align:center; vertical-align: middle;">\r\n                            <button type="button" class="button" (click)="abrirModal(\'sincronizarRecetasJson\', item.id)" >\r\n                                <span class="icon"><i class="fa fa-upload"></i></span>\r\n                                <i class="fa fa-file-code-o" aria-hidden="true"></i>\r\n                            </button>\r\n                            <button type="button" class="button" (click)="abrirModal(\'sincronizarRecetasImagenes\', item.id)" >\r\n                                <span class="icon"><i class="fa fa-upload"></i></span>\r\n                                <i class="fa fa-file-image-o" aria-hidden="true"></i>\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="sincronizarRecetasJson">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card"  style="width:80%; height: 75%; overflow: hidden;">\r\n        <header class="modal-card-head" style="background: #00d1b2;">\r\n                <div class="container is-fluid"  style="width:100%;">\r\n                    <h1 class="title" style="color:#FFF;">\r\n                        <span class="icon is-medium"><i class="fa fa-file-code-o"></i></span> \r\n                        Sincronizar recetas JSON {{pedido_id}}\r\n                    </h1>\r\n                </div>     \r\n            <button class="delete" (click)="cancelarModal(\'sincronizarRecetasJson\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <form name="form" novalidate [formGroup]="dato2" (ngSubmit)="enviarDatos(\'analizar-json-proveedor\')" #mainScreen>\r\n                    \r\n                    <div class="column">\r\n                        <div style="background: #FFF; border-radius: 1em; ">\r\n                            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl2.datosCargados">\r\n                                <br>\r\n                                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                            </div>\r\n                            <section class="section" [style.height.px]="tamano">\r\n\r\n                                <div class="is-half">\r\n                                    <div class="field has-addons">\r\n                                        <label class="label">Archivo JSON:</label>\r\n                                        <div style="height:20px;"></div>\r\n                                        <p class="control is-expanded  has-icon has-icon-right" style="float:left; width: 94.6%;" >\r\n                                            <input class="input" type="file" #json (change)="convertirJson($event, dato2?.controls?.json)" accept=".json, .txt">\r\n                                            <input type="hidden" formControlName="json">\r\n                                        </p>\r\n                                        <p class="control" style="float:left">\r\n                                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl2.cargando,\'is-disabled\': dato2?.controls?.json.value == \'\'}" [disabled]="ctrl2.error_json">Validar</button>\r\n                                        </p>\r\n                                    </div>\r\n                                    \r\n                                </div>\r\n                                <figure class="highlight" style="width: 100%; height: 300px; overflow: auto;">\r\n                                    <pre>\r\n                                        <span class="help is-danger" *ngIf="ctrl2.error_json">El archivo no es valido o no tiene el formato adecuado.</span>\r\n                                        <code class="language-json" data-lang="json">{{ dato2?.controls?.json.value | json }}</code>\r\n                                    </pre>                        \r\n                                </figure>\r\n                                <div class="box" *ngIf="recetas_resultado == true">\r\n                                    <span>Recetas aceptadas:</span> <span class="tag is-success">{{json_valido?.recetas_validas}}</span>\r\n                                    &nbsp;&nbsp;&nbsp;<span>Colectivos aceptados:</span> <span class="tag is-success">{{json_valido?.colectivos_validos}}</span>\r\n                                    &nbsp;&nbsp;&nbsp;<span>Recetas ignoradas:</span> <span class="tag is-danger">{{json_valido?.recetas_invalidas}}</span>\r\n                                    &nbsp;&nbsp;&nbsp;<span>Colectivos ignorados:</span> <span class="tag is-danger">{{json_valido?.colectivos_invalidos}}</span>\r\n                                </div>\r\n                                \r\n                            </section>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" [ngClass]="{\'is-disabled\': !recetas_resultado}" (click)="sincronizarReceta(\'sincronizarRecetasJson\'); ">Sincronizar recetas</a>\r\n            <a class="button" (click)="cancelarModal(\'sincronizarRecetasJson\'); dato2.controls.json.value == \'\';">Cancelar</a>\r\n        </footer>\r\n        <simple-notifications [options]="options"></simple-notifications>\r\n    </div>\r\n</div>\r\n<!--\r\n<div class="modal" id="sincronizarRecetasImagenes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card"  style="width:80%; height: 75%; overflow: hidden;">\r\n         <header class="modal-card-head" style="background: #00d1b2;">\r\n                <div class="container is-fluid"  style="width:100%;">\r\n                    <h1 class="title" style="color:#FFF;">\r\n                        <span class="icon is-medium"><i class="fa fa-file-image-o" aria-hidden="true"></i></span> \r\n                        Sincronizar recetas (Fotos)\r\n                    </h1>\r\n                </div>     \r\n            <button class="delete" (click)="cancelarModal(\'sincronizarRecetasImagenes\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()" #mainScreen>\r\n                \r\n                <div class="column">\r\n                    <div style="background: #FFF; border-radius: 1em; ">\r\n                        <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                            <br>\r\n                            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                        </div>\r\n                        <section class="section" [style.height.px]="tamano">\r\n\r\n                            <div class="is-half">\r\n                                <div class="field has-addons">\r\n                                    <label class="label">Imagen Receta:</label>\r\n                                    <div style="height:20px;"></div>\r\n                                    <p class="control is-expanded  has-icon has-icon-right" style="float:left; width: 95.1%;" >\r\n                                        <input class="input" type="file" multiple (change)="ctrl.seleccionarImagenBase64($event, ctrl.dato.controls.archivos, true)" accept=".jpeg, .jpg, .gif, .bmp, .png">\r\n                                        <input type="hidden" formControlName="archivos">\r\n                                    </p>\r\n                                    <p class="control" style="float:left">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.controls.archivos.value == \'\'">Enviar</button>\r\n                                    </p>\r\n                                </div>\r\n                                \r\n                            </div>\r\n                            <figure class="highlight" style="width: 100%; height: 300px; overflow: auto;">\r\n                                <div *ngFor="let item of ctrl.dato.controls.archivos.value; let i=index">\r\n                                    <img  [src]="\'data:image/png;base64,\' + item" \r\n                                    width="10%" style="float:left; border-style: dashed; border-radius: 5px;" (click)="abrirModal(\'verFoto\', item)">\r\n                                </div>                        \r\n                            </figure>\r\n                            \r\n                        </section>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="agregarLoteIsumo(cantidad_solicitada.value)">Continuar</a>\r\n            <a class="button" (click)="cancelarModal(\'sincronizarRecetasImagenes\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div> -->\r\n'},itfL:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},jQN0:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return r});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=function(){function t(){}return t}();r=i([a.i(n.Component)({selector:"almacenes-lista",template:a("LEpI")})],r)},jTKE:function(t,e){t.exports='<formulario #ctrl URL="mis-claves" titulo="Claves / Configuración" [dato]="dato"></formulario>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n  <div class="column is-one-quarter is-hidden-mobile">\r\n    <panel-control-menu-aside></panel-control-menu-aside>\r\n  </div>\r\n  <div class="column" style="padding:2em;">\r\n    <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n      <section class="hero is-primary">\r\n        <div class="hero-body">\r\n          <a class="button  is-primary" style="position:absolute;top: 6em;right: 3em;" (click)="ctrl.cargarDatos(); "  id="actualizar"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n          <div class="container is-fluid">\r\n            <h1 class="title">\r\n              <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n              <span *ngIf="ctrl.cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>\r\n              <!-- -->Mis claves\r\n            </h1>\r\n            <span style="text-align: right">Última actualización: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                <strong *ngIf="actualizado" >{{actualizacion | date}}</strong> \r\n                Por: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                <strong *ngIf="actualizado">{{actualizacion_usuario}} </strong> \r\n            </span>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n        <br>\r\n        <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>        &nbsp;<span>Cargando...</span></span>\r\n      </div>\r\n      <section class="section">\r\n        <!-- formulario -->\r\n        <form name="dato" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar(false)">\r\n          <a id="catalogos" (click)="ctrl.cargarCatalogo(\'tipos_claves\', \'insumos-auto\'); "></a>\r\n\r\n\r\n\r\n            <div class="box">\r\n              <article class="media">\r\n                <div class="media-content">\r\n                  <div class="content">\r\n                    <nav class="panel">\r\n                      <div class="panel-heading">\r\n                        <div class="field">\r\n                          <label for="Claves">\r\n                                Claves disponibles\r\n                            </label>\r\n                          <div style="height:15px;"></div>\r\n\r\n                          <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" \r\n                            id="buscarInsumo" value-property-name="clave"\r\n                            display-property-name="nombre" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                            (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                            type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n                        </div>\r\n                      </div>\r\n                    </nav>\r\n                    \r\n                    <nav class="panel" >\r\n                      <div class="panel-heading">\r\n                        <div class="field">\r\n                          <label for="MisClaves" style="padding-bottom: 5px">\r\n                              Mis claves\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                      <div class="content">\r\n                        <div class="card">\r\n                          <div class="columns" style="padding: 5px; padding-left: 15px">\r\n                            <div class="nav-left nav-menu">\r\n                              <p class="control" style="padding: 10px">\r\n                                <a class="button" [ngClass]="{ \'is-primary\': tipo == \'ME\' && es_causes == 1}" (click)="tipo=\'ME\'; es_causes = 1">\r\n                                  <span class="icon">\r\n                                    <i class="fa fa-medkit"></i>\r\n                                  </span>\r\n                                  <span>CAUSES</span>\r\n                                </a>\r\n                              </p>\r\n                              <p class="control" style="padding: 10px">\r\n                                <a class="button" [ngClass]="{ \'is-primary\': tipo == \'ME\' && es_causes == 0}" (click)="tipo= \'ME\'; es_causes = 0">\r\n                                  <span class="icon">\r\n                                    <i class="fa fa-medkit"></i>\r\n                                  </span>\r\n                                  <span>NO CAUSES</span>\r\n                                </a>\r\n                              </p>\r\n                              <p class="control" style="padding: 10px">\r\n                                <a class="button" [ngClass]="{ \'is-primary\': tipo == \'MC\' && es_causes == 0}" (click)="tipo=\'MC\'; es_causes = 0">\r\n                                  <span class="icon">\r\n                                    <i class="fa fa-medkit"></i>\r\n                                  </span>\r\n                                  <span>MATERIAL DE CURACION</span>\r\n                                </a>\r\n                              </p>\r\n                            </div>\r\n                            <label class="label" style="padding: 15px">\r\n                              Total de claves: {{ctrl.dato.get(\'clues_claves\').length}}\r\n                            </label>\r\n                          </div>\r\n                          <!-- AGRUPADO POR CAUSES/NOCAUSES -->\r\n                          <div>\r\n                            <div class="scroll">\r\n                              <div class="content" formArrayName="clues_claves"  *ngIf="ctrl.dato.get(\'clues_claves\').length > 0">\r\n                                <table class="table is-striped" style="padding: 20px;">\r\n                                  <tbody *ngFor="let val of  ctrl.dato.controls.clues_claves.controls ; let i=index;" >\r\n                                    <tr *ngIf="val.value.tipo==tipo && val.value.es_causes==es_causes" [formGroupName]="i">\r\n                                      <td>{{val.value.clave_insumo_medico}} </td>\r\n                                      <td>{{val.value.descripcion}} </td>\r\n                                      <td>{{val.value.tipo}} </td>\r\n                                      <td> </td>\r\n                                      <td><a class="delete" (click)="ctrl.quitar_form_array(ctrl.dato.controls.clues_claves, i)"></a></td>\r\n                                    </tr>\r\n                                  </tbody>\r\n                                </table>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </nav>\r\n            </div>\r\n          </div>\r\n          </article>\r\n    </div>\r\n  <br><br>\r\n  <div class="control is-grouped" style="float:left; padding:10px;">\r\n    <p class="control">\r\n      <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}"\r\n        [disabled]="ctrl.dato.invalid">Guardar</button>\r\n    </p>\r\n    <p class="control" *ngIf="ctrl.id">\r\n      <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}"\r\n        (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n    </p>\r\n    <p class="control">\r\n      <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n    </p>\r\n  </div>\r\n\r\n  </form>\r\n  </section>\r\n</div>\r\n</div>\r\n</div>'},jlwQ:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"pre{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word;padding:1em;margin:0}",""]),t.exports=t.exports.toString()},jp5I:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("gHRf"),s=a("Fiuh");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e){this.title=t,this.apiService=e,this.cargando=!1,this.mensajeError=new r.a,this.mensajeExito=new r.a,this.estadisticasGlobales=[],this.listaEstadisticasProveedores=[],this.cargandoEstadisticasGlobales=!1,this.mostrarGraficas=!0}return t.prototype.ngOnInit=function(){this.mensajeError=new r.a,this.mensajeExito=new r.a,this.title.setTitle("Cumplimiento / Administrador central"),this.generarStats()},t.prototype.generarStats=function(){var t=this;this.cargandoEstadisticasGlobales=!0,this.apiService.cumplimientoStatsGlobales().subscribe(function(e){t.cargandoEstadisticasGlobales=!1,t.estadisticasGlobales=e,t.listaEstadisticasProveedores=[];for(var a in t.estadisticasGlobales)t.listaEstadisticasProveedores.push({proveedor_id:t.estadisticasGlobales[a].proveedor_id,proveedor:t.estadisticasGlobales[a].proveedor,cargando:!0,tipoDatos:"monto",data:[]}),t.generarStatsProveedor(t.listaEstadisticasProveedores.length-1)},function(e){t.cargandoEstadisticasGlobales=!1,console.log(e)})},t.prototype.generarStatsProveedor=function(t){var e=this,a=this.listaEstadisticasProveedores[t].proveedor_id;this.listaEstadisticasProveedores[t].cargando=!0,this.apiService.cumplimientoStatsProveedor(a).subscribe(function(a){e.listaEstadisticasProveedores[t].cargando=!1,e.listaEstadisticasProveedores[t].data=a,e.renderGrafica(t)},function(a){console.log(a),e.listaEstadisticasProveedores[t].cargando=!1})},t.prototype.renderGrafica=function(t){var e=[],a=[],n=[],i=[];for(var r in this.listaEstadisticasProveedores[t].data)e.push(this.listaEstadisticasProveedores[t].data[r].mes_nombre+" "+this.listaEstadisticasProveedores[t].data[r].anio),"claves"==this.listaEstadisticasProveedores[t].tipoDatos&&(a.push(Number(this.listaEstadisticasProveedores[t].data[r].claves_solicitadas)||0),n.push(Number(this.listaEstadisticasProveedores[t].data[r].claves_recibidas)||0),i.push(Number(this.listaEstadisticasProveedores[t].data[r].claves_cumplimiento)||0)),"insumos"==this.listaEstadisticasProveedores[t].tipoDatos&&(a.push(Number(this.listaEstadisticasProveedores[t].data[r].cantidad_solicitada)||0),n.push(Number(this.listaEstadisticasProveedores[t].data[r].cantidad_recibida)||0),i.push(Number(this.listaEstadisticasProveedores[t].data[r].cantidad_cumplimiento)||0)),"monto"==this.listaEstadisticasProveedores[t].tipoDatos&&(a.push(Number(this.listaEstadisticasProveedores[t].data[r].monto_solicitado)||0),n.push(Number(this.listaEstadisticasProveedores[t].data[r].monto_recibido)||0),i.push(Number(this.listaEstadisticasProveedores[t].data[r].monto_cumplimiento)||0));var s={};"claves"==this.listaEstadisticasProveedores[t].tipoDatos&&(s=[{title:{text:"Total claves"}},{title:{text:"% Cumplimiento"},labels:{format:"{value} %",style:{color:"#7cb5ec"}},max:100,opposite:!0}]),"insumos"==this.listaEstadisticasProveedores[t].tipoDatos&&(s=[{title:{text:"Total insumos"}},{title:{text:"% Cumplimiento"},labels:{format:"{value} %",style:{color:"#7cb5ec"}},max:100,opposite:!0}]),"monto"==this.listaEstadisticasProveedores[t].tipoDatos&&(s=[{title:{text:"Total en monto"}},{title:{text:"% Cumplimiento",style:{color:"#7cb5ec"}},labels:{format:"{value} %",style:{color:"#7cb5ec"}},max:100,opposite:!0}]),this.listaEstadisticasProveedores[t].options={chart:{zoomType:"xy"},xAxis:{categories:e,crosshair:!0},yAxis:s,tooltip:{shared:!0},legend:{align:"center",x:0,verticalAlign:"bottom",backgroundColor:"rgba(255,255,255,0.5)",shadow:!1},title:{text:"Cumplimiento del proveedor: "+this.listaEstadisticasProveedores[t].proveedor},subtitle:{text:"Cantidades expresadas en "+this.listaEstadisticasProveedores[t].tipoDatos},series:[{type:"column",name:"Pedido",data:a},{type:"column",name:"Entregado",data:n},{type:"column",name:"%",yAxis:1,data:i},{type:"spline",name:"Cumplimiento",yAxis:1,data:i,tooltip:{valueSuffix:"%"}}]}},t.prototype.parseNaN=function(t){return isNaN(t)?0:t},t.prototype.onResize=function(t){var e=this;this.mostrarGraficas=!1;try{setTimeout(function(){e.mostrarGraficas=!0})}catch(t){console.log(t)}},t}();l=o([a.i(n.Component)({selector:"app-cumplimiento",template:a("P93B"),styles:[a("TTuc")],host:{"(window:resize)":"onResize($event)"}}),c("design:paramtypes",["function"==typeof(d=void 0!==i.b&&i.b)&&d||Object,"function"==typeof(u=void 0!==s.a&&s.a)&&u||Object])],l);var d,u},jqht:function(t,e){t.exports='<app-menu-inventario [modulo]="\'Inicialización de Inventario\'" [icono]="\'assets/icono-ajustes-inventario.svg\'" [url]="\'/inventario/inicializacion-inventario\'"></app-menu-inventario>\r\n\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa {{ icono }}"></i></span> {{ titulo }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                            </p>\r\n                            <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/inventario/inicializacion-inventario/inicializar">\r\n                                <span class="icon"><i class="fa fa-archive"></i></span><span>Inicializar</span>\r\n                                </a>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Estatus</th>\r\n                        <th>Descripcion</th>\r\n                        <th>Fecha de Inicio</th>\r\n                        <th>Fecha de Conclusión</th>\r\n                        <th>Total Claves</th>\r\n                        <th>Total Monto</th>\r\n                        <th style="text-align:center;" width="1">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of inventarios; let i=index">\r\n                        <th style="vertical-align: middle;">\r\n                        </th>\r\n                        <td style="vertical-align: middle;"></td>\r\n                        <td style="vertical-align: middle;"></td>\r\n                        <td style="vertical-align: middle;">\r\n                        </td>\r\n                        <td style="vertical-align: middle;">\r\n                        </td>\r\n                        <td style="vertical-align: middle;">\r\n                        </td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                        </td>\r\n                    </tr>\r\n                    <tr *ngIf="inventarios.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle;">\r\n                        </th>\r\n                        <td style="vertical-align: middle;"></td>\r\n                        <td style="vertical-align: middle;"></td>\r\n                        <td style="vertical-align: middle;">\r\n                        </td>\r\n                        <td style="vertical-align: middle;">\r\n                        </td>\r\n                        <td style="vertical-align: middle;">\r\n                        </td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n</div>'},k9jj:function(t,e){t.exports='<listar #ctrl URL="unidades-medicas" titulo="UM / Catalogo"></listar>\r\n<menu-catalogo [modulo]="\'Unidades Médicas\'" [icono]="\'assets/icono-catalogos.svg\'" [url]="\'/almacen-articulos/catalogos/unidades-medicas\'"></menu-catalogo>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="ctrl.busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n\r\n                        <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> unidades medicas\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                            <p class="control">\r\n                                <a class="button is-medium is-primary is-inverted " routerLink="/almacen-articulos/catalogos/unidades-medicas/nuevo">\r\n                                    <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                                </a>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table" *ngIf="!ctrl.cargando">\r\n                <thead>\r\n                    <tr>  \r\n                        <th>Clues</th>                       \r\n                        <th>Nombre</th>                                              \r\n                        <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">                       \r\n                        <td style="vertical-align: middle;"><a routerLink="/catalogos/unidades-medicas/editar/{{item.clues}}">{{ item. clues }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/catalogos/unidades-medicas/editar/{{item.clues}}">{{ item.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <td style="vertical-align: middle;"><a routerLink="/catalogos/unidades-medicas/editar/{{item.clues}}">{{ item.clues }} </a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/catalogos/unidades-medicas/editar/{{item.clues}}">{{ item.nombre }} </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"\r\n                                class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},kEBV:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333}.contenedor-pedido.con-tabs .top-bar{padding:.5em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-pedido{background:#fff;border-radius:1em;overflow:hidden}.contenedor-pedido.con-tabs{border-top-left-radius:0!important;border-top-right-radius:0!important}",""]),t.exports=t.exports.toString()},kQtQ:function(t,e){t.exports='<div class="modal is-active" >\r\n  <div class="modal-background" (click)="cerrar()"></div>\r\n  <div class="modal-card" style="width:95%; height: auto;">\r\n   \r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      \r\n                    \r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-list"></i></span> Distribución de cantidades\r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrar()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <table class="table is-unselectable" *ngIf="!cargando && !guardando" style="font-size: 0.8em; margin:0px !important">\r\n        <thead>\r\n            <tr  >\r\n                <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                <th class="is-hidden-mobile" style="width:118px;">Clave</th>\r\n                <th class="is-hidden-tablet">Clave o Genérico</th>  \r\n                <th style="vertical-align: middle;" class="is-hidden-mobile " >Descripcion</th>                  \r\n                <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                 <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Precio">Precio</abbr></th>\r\n                <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                <th  style="width:21px !important;"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n\r\n            <tr>\r\n                <td class="has-text-centered">{{ insumo.lote }}</td>\r\n                <td class="has-text-centered is-hidden-mobile">{{ insumo.clave }}</td>     \r\n                <td>\r\n                    <small class="is-hidden-tablet">{{ insumo.clave }} <br></small>\r\n                    <div style="line-height:1em;">\r\n                    <small>{{ insumo.descripcion }}</small>\r\n                    </div>\r\n                    <div style="padding: 0.5em 0 0.5em 0; ">\r\n                    <span *ngIf="(insumo.es_causes && insumo.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': insumo == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                    <span *ngIf="(!insumo.es_causes && insumo.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                    <span *ngIf="insumo.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                    <span *ngIf="insumo.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': insumo == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                    <span *ngIf="(insumo.tipo == \'ME\' && insumo.informacion)">\r\n                        <span *ngIf="insumo.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                        <span *ngIf="insumo.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                    </span>\r\n                    </div>\r\n                </td>                \r\n                <td style="width:100px !important;text-align:center;">{{ insumo.cantidad }}</td>\r\n                <td style="width:78px !important; text-align:center;">$<b><abbr>{{insumo.precio | number:\'1.2-2\'}}</abbr></b></td>\r\n                <td style="width:78px !important; text-align:center;">$<b><abbr>{{insumo.monto | number:\'1.2-2\'}}</abbr></b></td>\r\n            </tr>      \r\n        </tbody>\r\n      </table>\r\n      <hr style="margin:0px !important">\r\n      <table class="table" style="font-size: 0.8em;">\r\n        <thead>\r\n          <tr>\r\n            <th style="width:110px !important;">Clues ({{ insumo.lista_clues.length }})</th>\r\n            <th>Nombre</th>\r\n            <th style="width:90px !important;text-align:center">Cantidad</th>              \r\n            <th style="width:50px; text-align:right">Monto</th>  \r\n            <th  *ngIf="!lectura"></th> \r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor="let item of insumo.lista_clues; let i = index">\r\n            <td>{{ item.clues}}</td>\r\n            <td>{{ item.nombre}}</td>\r\n            <td style="width:100px !important;"  *ngIf="!lectura">\r\n                <p class="control is-expanded">\r\n                <input class="input is-small has-text-centered"  type="number" placeholder="Cant" (keyup)="actualizarTotales()" (mouseup)="actualizarTotales()" [(ngModel)]="item.cantidad">\r\n                </p>\r\n            </td>\r\n\r\n            <td style="width:100px !important; text-align:center;"  *ngIf="lectura">{{ item.cantidad }} </td>\r\n            <td style="text-align:right">$<b><abbr>{{insumo.precio * item.cantidad | number:\'1.2-2\'}}</abbr></b></td>\r\n            <td style="width:32px !important;" *ngIf="!lectura">\r\n                <a (click)="eliminarInsumo(item,i)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n            \r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-radius:0 0 0.8em 0.8em " ></footer>\r\n  </div>\r\n</div>\r\n'},keQP:function(t,e){t.exports='<menu-farmacia [modulo]="\'Pedidos jurisdiccionales\'" [icono]="\'assets/icono-pedidos-jurisdiccionales.svg\'" [url]="\'/almacen/pedidos-jurisdiccionales\'"></menu-farmacia>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile">\r\n      <div class="tile is-4 is-parent is-vertical ">\r\n        <div class="tile is-child">\r\n            <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n                <section class="hero is-primary" >\r\n                <h1 class="title" style="margin:0.5em;" >\r\n                    <span class="icon is-medium"><i class="fa fa-file-text"></i></span> {{formularioTitulo}} \r\n                </h1>\r\n                <a class="button is-success" title="Imprimir Excel" (click)="imprimirExcel(); " *ngIf="esEditar">\r\n                    <span class="icon"><i class="fa fa-file-excel-o"></i></span> &nbsp; Descargar Pedido en Excel\r\n                </a>\r\n                </section>\r\n\r\n                <div style="padding: 1em;">\r\n                <form name="form" novalidate [formGroup]="pedido.datos">\r\n                    <label class="label">Pedido para:</label>\r\n                    <p class="control">\r\n                        <span class="select is-fullwidth">\r\n                            <select name="almacen_solicitante" formControlName="almacen_solicitante" [ngClass]="{\'is-warning\': almacenes?.length == 0 }" (change)="cambioAlmacen()">\r\n                                <option *ngFor="let item of almacenes" value="{{item.id}}">{{ item.nombre }}</option>\r\n                            </select>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'almacen_solicitante\',\'required\')">Debe elegir el almacen solicitante.</span>\r\n                    </p>\r\n                    <p *ngIf="es_almacen_subrogado" class="subtitle is-6 is-info">\r\n                        Al concluir el pedido, los insumos capturados serán  asignados al inventario de la farmacia subrogada.\r\n                    </p>\r\n\r\n                    <label class="label">Nombre del Pedido:</label>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input type="text" class="input is-fullwidth" placeholder="Ej. Pedido del mes de Mayo" [ngClass]="{\'is-danger\': pedido.tieneError(\'descripcion\',\'required\')}" formControlName="descripcion"/>\r\n                        <span class="icon is-small" *ngIf="pedido.tieneError(\'descripcion\',\'required\')">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'descripcion\',\'required\')">Este campo es requerido.</span>\r\n                    </p>\r\n\r\n                    <label class="label">Fecha (aaaa-mm-dd):</label>\r\n                    <p class="control is-expanded  has-icon has-icon-right">\r\n                        <input type="text" class="input is-fullwidth" placeholder="aaaa-mm-dd" [ngClass]="{\'is-danger\': pedido.tieneError(\'fecha\',\'required\')}" formControlName="fecha" #fecha id="fecha" (keyup)="recargarPresupuesto(fecha.value)"/>\r\n                        <span class="icon is-small" *ngIf="pedido.tieneError(\'fecha\',\'required\')">\r\n                            <i class="fa fa-warning"></i>\r\n                        </span>\r\n                        <!--span class="select is-fullwidth">\r\n                            <select [ngClass]="{\'is-danger\': pedido.tieneError(\'fecha\',\'required\')}" formControlName="fecha" #fecha id="fecha" (change)="recargarPresupuesto(fecha.value)">\r\n                                <option *ngFor="let item of fechasValidas" value="{{item.fecha}}">{{ item.descripcion }}</option>\r\n                            </select>\r\n                        </span-->\r\n                        <span class="help is-danger" *ngIf="pedido.tieneError(\'fecha\',\'required\')">Este campo es requerido.</span>\r\n                    </p>\r\n\r\n                    <div class="control">\r\n                    <textarea name="observaciones" class="textarea" placeholder="Observaciones"  formControlName="observaciones"></textarea>\r\n                    </div>\r\n                </form>\r\n\r\n                <label *ngIf="pedido.tipo_pedido != \'PI\' && esEditar" class="label">Datos del Proveedor:</label>\r\n                <div *ngIf="pedido.tipo_pedido != \'PI\' && esEditar" class="level-item">\r\n                    <div *ngIf="esEditar" >\r\n                    <p class="subtitle is-5">\r\n                        {{proveedor.nombre}}<br>\r\n                        <small>\r\n                        {{proveedor.contacto}}<br>\r\n                        {{proveedor.email}}<br>\r\n                        Cel: {{proveedor.celular}}\r\n                        </small>\r\n                    </p>\r\n                    </div>\r\n                </div>\r\n                <hr>\r\n\r\n                <div class="control is-grouped" style="padding-top:10px;" *ngIf="!cargando">\r\n                    <!--p class="control" *ngIf="esEditar">\r\n                        <a class="button is-success " [ngClass]="{ \'is-loading\': cargando, \'is-inverted\': !cargando }" (click)="imprimirExcel()" title="Imprimir Excel" ><span class="icon"><i class="fa fa-file-excel-o"></i></span></a>\r\n                    </p-->\r\n\r\n                    <p class="control">\r\n                        <a class="button is-primary " (click)="guardar()" [ngClass]="{\'is-loading\': guardando}" >Guardar</a>\r\n                    </p>\r\n                    <p class="control" *ngIf="esEditar">\r\n                        <a class="button is-danger " (click)="finalizar()" [ngClass]="{\'is-loading\': guardando}" ><span class="icon"><i class="fa fa-check"></i></span><span>Concluir</span></a>\r\n                    </p>\r\n                \r\n                    <!--p class="control" *ngIf="esEditar">\r\n                    <a class="button is-primary " [ngClass]="{ \'is-loading\': cargandoPdf, \'is-inverted\': !cargandoPdf }" (click)="imprimir()" ><span class="icon"><i class="fa fa-print"></i></span></a>\r\n                    </p-->\r\n                    <p class="control">\r\n                    <a class="button is-white" [ngClass]="{\'is-loading\': guardando}" routerLink="{{obtenerDireccion()}}" >Ir a la lista</a>\r\n                    </p>                \r\n                </div>\r\n                </div>\r\n            </div>\r\n            <br>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n      <div class="tile is-parent is-vertical">\r\n        <div class="tile is-child is-12" >\r\n            <div class="tile is-parent" style="padding:0px;">\r\n                <div style="border-radius:0.5em; overflow:hidden; width:100%;">\r\n                    <table class="table" *ngIf="!cargandoPresupuestos" style="margin:0px;">\r\n                        <thead>\r\n                            <tr>\r\n                                <th></th>\r\n                                <th>Causes</th>\r\n                                <th>No Causes</th>\r\n                                <th>Material de curación</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <th>Disponible:</th>\r\n                                <td><span *ngIf="(presupuesto.causes_disponible - pedido.totalMontoCauses) <= 0" class="icon" style="color:red"><i class="fa fa-warning"></i></span>$<b>{{(presupuesto.causes_disponible - pedido.totalMontoCauses.toFixed(2)) | number: \'1.2-2\' }}</b></td>\r\n                                <td><span *ngIf="(presupuesto.no_causes_disponible - pedido.totalMontoNoCauses) <= 0" class="icon" style="color:red"><i class="fa fa-warning"></i></span>$<b>{{(presupuesto.no_causes_disponible - pedido.totalMontoNoCauses.toFixed(2)) | number: \'1.2-2\' }}</b></td>\r\n                                <td><span *ngIf="(presupuesto.material_curacion_disponible - pedido.totalMontoMaterialCuracion) <= 0" class="icon" style="color:red"><i class="fa fa-warning"></i></span>$<b>{{(presupuesto.material_curacion_disponible - pedido.totalMontoMaterialCuracion.toFixed(2)) | number: \'1.2-2\' }}</b></td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="tile is-child" >\r\n          <div class="contenedor-pedido" >\r\n            <div class="top-bar" [ngClass]="{\'is-primary\':!pedido.filtro.activo,\'is-dark\': pedido.filtro.activo }">\r\n                <span *ngIf="!pedido.filtro.activo"><small><b>Mes:</b> {{ meses[mes] }} <b>Claves:</b> {{ pedido.lista.length | number }} <b>Insumos:</b> {{pedido.totalInsumos | number}} <b>Total:</b> $ {{ pedido.totalMonto | number: \'1.2-2\' }}</small></span>\r\n                <span *ngIf="pedido.filtro.activo"><span class="icon"><i class="fa fa-search"></i></span> Resultados: {{ pedido.filtro.lista.length }}</span>\r\n                <a class="button is-primary  is-pulled-right" [ngClass]="{ \'is-inverted\': pedido.filtro.activo }" style="margin-top:-0.25em;" title="Ctrl + espacio" (click)="toggleModalInsumos(); ">\r\n                    <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar Clave</span>\r\n                </a>\r\n            </div> \r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="guardando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-spinner fa-spin"></i></span> &nbsp;<span>Guardando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            <table class="table is-unselectable" *ngIf="!cargando && !guardando" style="font-size: 0.8em;">\r\n                <thead>\r\n                    <tr>\r\n                        <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                        <th class="is-hidden-mobile" style="width:118px;">\r\n                        <p class="control is-expanded" >\r\n                            <input type="hidden" #searchBoxClavePrevia >\r\n                            <input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave" (keyup)="buscar($event,searchBoxClave,searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>\r\n                        <th class="is-hidden-tablet">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                            \r\n                            <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>  \r\n                        <th style="vertical-align: middle;" class="is-hidden-mobile " >Descripcion</th>                  \r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cant.</abbr></th>\r\n                        <th style="text-align: center; vertical-align: middle;"><abbr title="Monto">Monto</abbr></th>\r\n                        <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Unidades médicas asignadas">Clues</abbr></th>\r\n                        <th  style="width:21px !important;"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                    <tr   *ngFor="let item of pedido.paginacion.lista; let i = index;">\r\n                        <td class="has-text-centered">{{ item.lote }}</td>\r\n                        <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                        \r\n                        <td>\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <div style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            </div>\r\n                        </td>\r\n\r\n                        <td style="width:100px !important;text-align:center;">\r\n                            <a (click)="toggleModalListaClues(item); ">{{ item.cantidad }}</a>\r\n                        </td>\r\n\r\n                        <td style="text-align: right;">\r\n                            $<b><abbr>{{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                        </td>\r\n                        <td style="width:100px !important; text-align:center">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.lista_clues.length }}</a>\r\n                        </td>\r\n                        <td style="width:70px !important;">\r\n                            <a (click)="toggleModalListaClues(item); "><span class="icon"><i class="fa fa-list"></i></span></a>\r\n                            <a (click)="eliminarInsumo(item,i,false)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                    </tr>      \r\n                </tbody>\r\n                <tbody *ngIf="pedido.filtro.activo">\r\n                    <tr  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;">\r\n                        <td class="has-text-centered">{{ item.lote }}</td>\r\n                        <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                        \r\n                        <td>\r\n                            <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                            <div style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                            </div>\r\n                            <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                            </div>\r\n                        </td>\r\n\r\n                        <td style="width:100px !important; text-align:center">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.cantidad }}</a>\r\n                        </td>\r\n\r\n                        <td style="width:78px !important;">\r\n                            $<b><abbr>{{item.monto | number:\'1.2-2\'}}</abbr></b>\r\n                        </td> \r\n                        <td style="width:100px !important; text-align:center">\r\n                             <a (click)="toggleModalListaClues(item); ">{{ item.lista_clues.length }}</a>\r\n                        </td>\r\n                        <td style="width:70px !important;">\r\n                            <a (click)="toggleModalListaClues(item); "><span class="icon"><i class="fa fa-list"></i></span></a>\r\n                            <a (click)="eliminarInsumo(item,i,true)"><span class="icon"><i class="fa fa-trash"></i></span></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>              \r\n            </table>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.lista.length" \r\n                    [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.paginacion.indice"\r\n                    (onSiguiente)="pedido.paginaSiguiente()" \r\n                    (onAnterior)="pedido.paginaAnterior()" \r\n                    (onListar)="pedido.listar($event)" \r\n                    *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n            \r\n            <paginacion \r\n                    [total]="pedido.filtro.lista.length" \r\n                    [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                    [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                    (onSiguiente)="pedido.filtro.paginaSiguiente()" \r\n                    (onAnterior)="pedido.filtro.paginaAnterior()" \r\n                    (onListar)="pedido.filtro.listar($event)" \r\n                    *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n            \r\n            <br>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<buscar-insumos \r\n    *ngIf="mostrarModalInsumos" \r\n    (onCerrar)="mostrarModalInsumos = false" \r\n    (onEnviar)="agregarItem($event)" \r\n    [listaAgregadosConClues]="listaClaveAgregadas" \r\n    [conPrecios]="true" \r\n    [conClues]="true"></buscar-insumos>\r\n<pedidos-jurisdiccionales-lista-clues \r\n    *ngIf="mostrarModalListaClues" [insumo]="loteSeleccionado" \r\n    [listaClaveAgregadas]="listaClaveAgregadas" \r\n    (onCerrar)="mostrarModalListaClues = false"></pedidos-jurisdiccionales-lista-clues>'},kn2l:function(t,e){t.exports='<formulario #ctrl URL="via-administracion" titulo="UM / Catalogo" [dato]="dato" ></formulario>\r\n<menu-catalogo [modulo]="\'Vías de administración\'" [icono]="\'assets/icono-catalogos.svg\'" [url]="\'/almacen-articulos/catalogos/vias-administracion\'"></menu-catalogo>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <a class="button  is-primary" style="position:absolute; top:10em; right:3em;" (click)="ctrl.cargarDatos();  "><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>\r\n                            {{ctrl.moduloTitulo}} via de administración\r\n                        </h1>\r\n\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section" >\r\n\r\n                <!-- formulario -->\r\n                <form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()" >\r\n\r\n\r\n                    <div class="field">\r\n                        <label class="label">Nombre:</label>\r\n                        <p class="control is-expanded  has-icon has-icon-right">\r\n                            <input class="input"  type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched}"\r\n                                placeholder="nombre" formControlName="nombre">\r\n                            <span class="icon is-small" *ngIf="ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched">\r\n                                <i class="fa fa-warning"></i>\r\n                            </span>\r\n                            <span class="help is-danger" *ngIf="ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched">Este campo es requerido.</span>\r\n                        </p>\r\n                    </div>\r\n\r\n\r\n                    <br><br>\r\n                    <div class="control is-grouped">\r\n                        <p class="control">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                        </p>\r\n                        <p class="control" *ngIf="ctrl.id">\r\n                            <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n                        </p>\r\n                    </div>\r\n\r\n                </form>\r\n               \r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>'},"kpP/":function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return r});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=function(){function t(){}return t}();r=i([a.i(n.Component)({selector:"unidades-medicas-lista",template:a("k9jj")})],r)},kppZ:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"l+VF":function(t,e){t.exports='<formulario #ctrl URL="sincronizar-recetas" titulo="Sincronizar receta" [dato]="dato"></formulario>\r\n<menu-farmacia [modulo]="\'Sincronizar recetas\'" [icono]="\'assets/hub-farmacia-sub.svg\'" [url]="\'/farmacia-subrrogada/sincronizar-recetas\'"></menu-farmacia>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar()" #mainScreen>\r\n    <!-- apartado de insumos -->\r\n    <div class="column" style="padding:1em;" >\r\n        <div style="background: #FFF; border-radius: 1em; ">\r\n            <section class="hero is-primary" >\r\n                <div class="hero-body" >\r\n                    \r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Recetas JSON\r\n                        </h1>\r\n\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section" [style.height.px]="tamano">\r\n\r\n                <div class="is-half">\r\n                    <div class="field has-addons">\r\n                        <label class="label">Archivo JSON:</label>\r\n                        <p class="control is-expanded  has-icon has-icon-right" style="float:left; width: 95.1%;" >\r\n                            <input class="input" type="file" (change)="ctrl.convertirJson($event, ctrl.dato.controls.json)" accept=".json, .txt">\r\n                            <input type="hidden" formControlName="json">\r\n                        </p>\r\n                        <p class="control" style="float:left">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.error_json">Enviar</button>\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </div>\r\n                <div>                            \r\n                    <figure class="highlight" style="width: 100%;">\r\n                        \r\n                        <pre [style.height.px]="tamano/1.8">\r\n                            <span class="help is-danger" *ngIf="ctrl.error_json">El archivo no es valido o no tiene el formato adecuado.</span>\r\n                            <code class="language-json" data-lang="json">{{ ctrl.dato.controls.json.value | json }}</code>\r\n                        </pre>                        \r\n                    </figure>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="column" style="padding:1em;">\r\n        <div style="background: #FFF; border-radius: 1em; ">\r\n            <section class="hero is-primary" >\r\n                <div class="hero-body" >\r\n                    \r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Recetas Imagen\r\n                        </h1>\r\n\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section" >\r\n\r\n                <div class="is-half">\r\n                    <div class="field has-addons">\r\n                        <label class="label">Imagen Receta:</label>\r\n                        <p class="control is-expanded  has-icon has-icon-right" style="float:left; width: 95.1%;" >\r\n                            <input class="input" type="file" multiple (change)="ctrl.seleccionarImagenBase64($event, ctrl.dato.controls.archivos, true)" accept=".jpeg, .jpg, .gif, .bmp, .png">\r\n                            <input type="hidden" formControlName="archivos">\r\n                        </p>\r\n                        <p class="control" style="float:left">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.controls.archivos.value == \'\'">Enviar</button>\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </div>\r\n                <figure class="highlight" style="width: 100%;">\r\n                    <div *ngFor="let item of ctrl.dato.controls.archivos.value; let i=index">\r\n                        <img  [src]="\'data:image/png;base64,\' + item" \r\n                        width="10%" style="float:left; border-style: dashed; border-radius: 5px;" (click)="abrirModal(\'verFoto\', item)">\r\n                    </div>\r\n                </figure>\r\n                \r\n            </section>\r\n        </div>\r\n    </div>\r\n    \r\n</form>\r\n\r\n<div class="modal" id="verFoto">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-content">\r\n        <p class="image is-4by3">\r\n            <img [src]="\'data:image/jpg;base64,\' + foto" alt="Receta" />\r\n        </p>\r\n    </div>\r\n    <button type="button" class="modal-close" (click)="cancelarModal(\'verFoto\')"></button>\r\n</div>'},lG9v:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"td.aceptados{background-color:#cdff8c}td.ignorados{background-color:#ff756b}.cancelado{color:red}.descargado{background-color:#00d1b2}.color_tag_descargas{background-color:#fff}",""]),t.exports=t.exports.toString()},lJ2T:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},lzuH:function(t,e){t.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Lista de Pacientes Ingresados\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th></th>\r\n                    <th><abbr title="Paciente ID">IDx</abbr></th>\r\n                    <th>Nombre</th>\r\n                    <th>Fecha Nacimiento</th>\r\n                    <th>Localidad (Municipio)</th>\r\n                    <th>Fecha Ingreso</th>\r\n                    <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pacientesEgreso; let i=index">\r\n                        <th><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">{{ item.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">{{ item.fecha_nacimiento }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.localidad"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">{{item.localidad.nombre }} ( {{item.localidad.municipio.nombre }} ) </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.localidad"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">DESCONOCIDO</a></td>\r\n\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/egreso/{{item.id}}">{{item.ingresoactivos[0].fecha_hora_ingreso}} </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/egreso/{{item.id}}"> </a></td>\r\n                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-primary" routerLink="/pacientes/modulo/egreso/{{item.id}}"><span class="icon"><i class="fa fa-hospital-o"></i></span></a></td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="pacientesEgreso.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{ item.fecha_nacimiento }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.localidad.nombre }} ( {{item.localidad.municipio.nombre }} ) </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 1"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">{{item.ingresoactivos[0].fecha_hora_ingreso}} </a></td>\r\n\r\n                        \r\n                        <td style="vertical-align: middle;" *ngIf="!item.localidad"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}">DESCONOCIDO</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.ingresoactivos.length == 0"><a routerLink="/pacientes/modulo/ingreso/{{item.id}}"> </a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-primary" routerLink="/pacientes/modulo/ingreso/{{item.id}}"><span class="icon"><i class="fa fa-hospital-o"></i></span></a></td>\r\n                        \r\n                    \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n    </div>        \r\n   \r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},m57g:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("wW11"),o=a("HDjA"),c=a("gHRf");a.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,a,n,i){this.title=t,this.router=e,this.route=a,this.apiService=n,this.permisosService=i,this.enviando=!1,this.cargando=!1,this.cargandoPermisos=!1,this.mensajeError=new c.a,this.mensajeExito=new c.a,this.errores={nombre:null,permisos:null},this.permisos=[],this.todosSeleccionados=!1,this.rol={nombre:"",permisos:[]}}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Nuevo rol / Panel de control"),this.mensajeError=new c.a,this.mensajeExito=new c.a,this.cargandoPermisos=!0,this.permisosService.lista().subscribe(function(e){t.permisos=e,t.cargandoPermisos=!1},function(e){console.log(e),t.cargandoPermisos=!1})},t.prototype.seleccionarTodos=function(){this.todosSeleccionados=!this.todosSeleccionados;for(var t in this.permisos)this.permisos[t].seleccionado=this.todosSeleccionados},t.prototype.guardar=function(){var t=this;this.enviando=!0,this.errores={nombre:null,permisos:null},this.rol.permisos=[];for(var e in this.permisos)this.permisos[e].seleccionado&&this.rol.permisos.push(this.permisos[e].id);this.apiService.crear(this.rol).subscribe(function(e){t.enviando=!1,t.router.navigate(["/panel-control/roles"])},function(e){try{var a=e.json();switch(t.mensajeError=new c.a(!0),e.status){case 401:t.mensajeError.texto="No tiee permiso para realizar esta acción.";break;case 409:t.mensajeError.texto="Verifique la información marcada de color rojo";for(var n in a.error)for(var i in a.error[n])t.errores[n]=a.error[n][i];break;case 500:t.mensajeError.texto="500 (Error interno del servidor)";break;default:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}catch(e){t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}t.mensajeError.mostrar=!0,t.enviando=!1})},t}();u=l([a.i(n.Component)({selector:"app-nuevo",template:a("/dc3"),styles:[a("SCx0")]}),d("design:paramtypes",["function"==typeof(p=void 0!==i.b&&i.b)&&p||Object,"function"==typeof(m=void 0!==r.a&&r.a)&&m||Object,"function"==typeof(f=void 0!==r.c&&r.c)&&f||Object,"function"==typeof(g=void 0!==s.a&&s.a)&&g||Object,"function"==typeof(h=void 0!==o.a&&o.a)&&h||Object])],u);var p,m,f,g,h},mB1y:function(t,e,a){"use strict";var n=a("5Rc+");a.d(e,"a",function(){return i});var i=(function(){function t(){}t}(),function(){function t(e){void 0===e&&(e=!1),this.items=[],this.paginacion=new n.a,this.activo=!1,this.cargando=!1,this.tieneError=function(t,e){return this.datos.get(t).hasError(e)&&this.datos.get(t).touched},this.inicializarDatos=function(t){void 0===t&&(t={});var e=t.fecha,a="";if(!t.fecha){var n=new Date,i=("0"+n.getDate()).slice(-2),r=("0"+(n.getMonth()+1)).slice(-2);e=n.getFullYear()+"-"+r+"-"+i}t.almacen_solicitante&&(a=t.almacen_solicitante),this.datos.setValue({almacen_solicitante:a,descripcion:"",observaciones:"",fecha:e})},this.indexar=function(t){void 0===t&&(t=!0),this.paginacion.totalPaginas=Math.ceil(this.items.length/this.paginacion.resultadosPorPagina),this.paginacion.indice=[];for(var e=0;e<this.paginacion.totalPaginas;e++)this.paginacion.indice.push(e+1)},this.listar=function(t){void 0===t&&(t=1),this.paginacion.paginaActual=t;var e=(this.paginacion.paginaActual-1)*this.paginacion.resultadosPorPagina,a=e+this.paginacion.resultadosPorPagina;try{this.paginacion.lista=this.items.slice(e,a)}catch(t){this.paginacion.lista=[]}},this.eliminarItem=function(t,e){var a=0;for(var n in this.items){if(this.items[n]===t){this.paginacion.lista.splice(e,1),this.items.splice(a,1),this.indexar();var i=a+(this.paginacion.resultadosPorPagina-e)-1;if(this.items[i]&&this.paginacion.lista.push(this.items[i]),0==this.paginacion.lista.length&&(this.paginacion.paginaActual>1?this.listar(this.paginacion.paginaActual-1):this.listar(1)),this.padre){var r=this.padre.items.indexOf(t),s=Math.ceil(r/this.padre.paginacion.resultadosPorPagina),o=(s-1)*this.padre.paginacion.resultadosPorPagina,c=r-o;if(this.padre.paginacion.paginaActual==s)this.padre.eliminarItem(t,c);else{var l=this.padre.paginacion.paginaActual;this.padre.listar(s),this.padre.eliminarItem(t,c),this.padre.listar(l),0==this.padre.paginacion.items.length&&(this.padre.paginacion.paginaActual>1?this.padre.listar(this.padre.paginacion.paginaActual-1):this.padre.listar(1))}}return}a++}},e&&(this.filtro=new t,this.filtro.padre=this,this.tipo="CA"),this.paginacion.resultadosPorPagina=10}return t.prototype.paginaSiguiente=function(){this.paginacion.paginaActual!=this.paginacion.totalPaginas&&this.listar(this.paginacion.paginaActual+1)},t.prototype.paginaAnterior=function(){1!=this.paginacion.paginaActual&&this.listar(this.paginacion.paginaActual-1)},t}())},mLYF:function(t,e){t.exports='<listar #ctrl URL="ajuste-menos-inventario?fecha_desde={{fecha_desde}}&fecha_hasta={{fecha_hasta}}&usuario={{usuario_lista}}" titulo="Ajuste menos de inventario"></listar>\r\n<!-- <listar #ctrl URL="ajuste-menos-inventario" titulo="Ajuste menos de inventario"></listar>-->\r\n<app-menu-inventario [modulo]="\'Ajuste menos de inventario\'" [icono]="\'assets/icono-stock.svg\'" [url]="\'/inventario/ajuste-menos-inventario\'"></app-menu-inventario>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <nav class="level">\r\n                        <!-- Left side FILTROS -->\r\n                        <div class="level-left" style="padding: 10px;">\r\n                        <div class="control is-grouped">\r\n                            <div class="control" style="z-index: 1000;">\r\n                                <div class="field">   \r\n                                    <label class="label">Desde:</label>                         \r\n                                    <input  style="width: 150px; z-index: 1000;" class="input is-medium" [(ngModel)]=\'fecha_desde\' ngui-datetime-picker date-only="true" placeholder="YYYY-MM-DD" />\r\n                                </div>\r\n                            </div>\r\n                            <div class="control is-expanded" style="z-index: 1000;">\r\n                                <div class="field">   \r\n                                    <label class="label">Hasta:</label>                         \r\n                                    <input style="width: 150px; z-index: 1000;" class="input is-medium" [(ngModel)]=\'fecha_hasta\' ngui-datetime-picker date-only="true" placeholder="YYYY-MM-DD" />\r\n                                </div>\r\n                            </div>\r\n                            <div class="control is-expanded">\r\n                                <div class="field">   \r\n                                    <label class="label">Usuario:</label>                         \r\n                                    <input class="input is-medium" type="text" placeholder="Usuario" [(ngModel)]="usuario_lista">\r\n                                </div>\r\n                            </div>\r\n                            <div class="control">\r\n                                <div class="field">  \r\n                                <label class="label">&nbsp;</label>\r\n                                <button class="button is-default is-medium" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="usuario_lista=\'\';fecha_desde=\'\'; fecha_hasta=\'\';" >Limpiar</button>\r\n                                </div>\r\n                            </div>\r\n                            <div class="control">\r\n                                <div class="field">  \r\n                                <label class="label">&nbsp;</label>\r\n                                <button class="button is-info is-medium" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.listar(1)" >Filtrar</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        </div>\r\n                        <!-- Right side -->\r\n                        <div class="level-right">\r\n                            <p class="level-item"><a class="button is-dark is-medium" routerLink="nuevo" *ngIf="ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nuevo ajuste menos </span></a></p>\r\n                            <p class="level-item"><a class="button is-primary is-medium" routerLink="nuevo" *ngIf="!ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nuevo ajuste menos </span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item">&nbsp;</p>\r\n                        </div>\r\n                    </nav> \r\n                    <div class="container is-fluid" id="titulo">\r\n                        <span></span>\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Ajuste menos de inventario\r\n                            </h1>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            \r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <span id="exportable" style="overflow: scroll; overflow-x: hidden; height: 530px;">\r\n            <table class="table" *ngIf="!ctrl.cargando " >\r\n                <thead>\r\n                    <tr>\r\n                        <th style=" text-align: center;"><abbr title="Folio">Fecha</abbr></th>\r\n                        <th style=" text-align: center;"><abbr title="Folio">Folio</abbr></th>\r\n                        <th><abbr title="Número de claves">Claves</abbr></th>\r\n                        <th>Capturó</th>\r\n                        <th style=" text-align: center;">Capturado</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada && ctrl.dato;">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-menos-inventario/ver/{{item.id}}">{{ item.fecha_movimiento }}</a></th>\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-menos-inventario/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td ><a routerLink="/inventario/ajuste-menos-inventario/ver/{{item.id}}"> <p> Claves: {{item.numero_claves}}</p> </a> </td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/inventario/ajuste-menos-inventario/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>                        \r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-menos-inventario/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada && ctrl.dato">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-menos-inventario/ver/{{item.id}}">{{ item.fecha_movimiento }}</a></th>\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-menos-inventario/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td ><a routerLink="/inventario/ajuste-menos-inventario/ver/{{item.id}}"> <p> Claves: {{item.numero_claves}}</p> </a> </td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/inventario/ajuste-menos-inventario/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>                        \r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-menos-inventario/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            </span>\r\n            <div *ngIf="!ctrl.dato" style="height:130px;"></div>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},mMBz:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{cursor:pointer}.item.seleccionado{background:#ccc}.item.seleccionado .icon{color:#fff!important}.item.seleccionado .item-detalle{display:inherit}.item .item-detalle{display:none}.item.asignado{background:#ddd;color:#777}tr.filtro td,tr.filtro th{color:#fff;background:#4a4a4a!important}.contenedor-tabla{overflow:auto;width:100%;height:99%!important;display:block;position:absolute;left:0;top:0}.contenedor-tabla table{border-radius:3px}@media screen and (max-width:768px){.contenedor-tabla{position:relative}.tile.notification{padding:0!important}}",""]),t.exports=t.exports.toString()},mZWb:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bm2B"),r=a("fc+i"),s=a("BkNc"),o=a("p5Ee"),c=a("K4kt"),l=a("hN3r"),d=a("gHRf"),u=a("bbdN");a.n(u);a.d(e,"a",function(){return f});var p=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},m=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,a,n,i,r){var s=this;this.fb=t,this.crudService=e,this.route=a,this._sanitizer=n,this.notificacion=i,this._ngZone=r,this.modo="N",this.tab=1,this.cant_solicitada_valida=!1,this.sum_cant_lotes=!1,this.mostrar_lote=[],this.cantidad_error=0,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.MinDate=new Date,this.MaxDate=new Date,this.tieneid=!1,this.cargando=!1,this.es_unidosis=!1,this.cargandoPdf=!1,this.mensajeResponse=new d.a,this.titulo="Ajuste menos de inventario",this.options={position:["bottom","right"],timeOut:2e3,lastOnBottom:!0},this.autocompleListFormatter=function(t){var e='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4"> <small>'+t.descripcion+'</small></p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+t.clave+") \n              ";return 1==t.es_causes&&(e+='<label class="tag is-success" ><strong>Cause </strong></label>'),0==t.es_causes&&(e+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);"><strong>No Cause </strong> </label>'),1==t.es_unidosis&&(e+='<label class="tag is-warning" ><strong>Unidosis</strong></label>'),e+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",s._sanitizer.bypassSecurityTrustHtml(e)}}return t.prototype.ngOnInit=function(){var t=this,e=JSON.parse(localStorage.getItem("usuario"));e.clues_activa&&(this.insumos_term+="&clues="+e.clues_activa.clues),e.almacen_activo&&(this.insumos_term+="&almacen="+e.almacen_activo.id),this.pdfworker=new Worker("web-workers/inventario/ajuste-mas.js");var a=this,n=this._ngZone;this.pdfworker.onmessage=function(t){n.run(function(){a.cargandoPdf=!1}),u.saveAs(a.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.dato=this.fb.group({id:[""],observaciones:[""],tipo_movimiento_id:["6",[i.Validators.required]],insumos:this.fb.array([])}),this.route.params.subscribe(function(e){e.id&&(t.tieneid=!0)}),this.form_insumos={tipo_movimiento_id:["",[i.Validators.required]]}},t.prototype.abrirModal=function(t){document.getElementById(t).classList.add("is-active")},t.prototype.cancelarModal=function(t){document.getElementById(t).classList.remove("is-active")},t.prototype.select_insumo_autocomplete=function(t){var e=this,a=JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.crudService.lista(0,1e3,"comprobar-stock?almacen="+a.almacen_activo.id+"&clave="+t.clave).subscribe(function(a){for(var n=[],i=0,r=e.dato.get("insumos").value;i<r.length;i++){var s=r[i];if(0===a.length)break;if(s.clave===a[0].clave_insumo_medico)for(var o=0,c=s.lotes;o<c.length;o++){for(var l=c[o],d=0,u=a;d<u.length;d++){var p=u[d];if(l.id===p.id)try{p.cantidad=l.cantidad,p.nueva_existencia=l.nueva_existencia}catch(t){console.log(t)}}1===l.nuevo&&(n.push(l),console.log("Insumo nuevo",l.id))}}try{if(n.length>0)for(var m=0,f=n;m<f.length;m++){var s=f[m];a.push(s)}console.log(n),console.log(a)}catch(t){console.log(t)}e.lotes_insumo=a,e.insumo=t,document.getElementById("buscarInsumo").value="",document.getElementById("tituloModal").innerHTML=" "+t.descripcion+' <br>\n          <p aling="justify" style="font-size:12px">'+t.descripcion+'</p> \n          <p aling="justify" style="font-size:16px"> CANTIDAD POR ENVASE: \n          '+(t.cantidad_x_envase?t.cantidad_x_envase:"Sin especificar")+"</p>",e.es_unidosis=t.es_unidosis,e.unidad_medida=t.unidad_medida,e.cargando=!1,e.abrirModal("verLotes")},function(t){e.cargando=!1})},t.prototype.agregarLoteIsumo=function(){for(var t=this.dato.controls.insumos,e={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,cantidad:1,presentacion_nombre:this.insumo.presentacion_nombre,unidad_medida:this.insumo.unidad_medida,cantidad_x_envase:this.insumo.cantidad_x_envase?parseInt(this.insumo.cantidad_x_envase):1,cantidad_surtida:1,lotes:this.fb.array([])},a=!1,n=0,i=0,r=t.value;i<r.length;i++){var s=r[i];if(s.clave===this.insumo.clave){!0,a=!0;break}n++}a||t.push(this.fb.group(e));var o=n,c=t.controls[o];this.mostrar_lote[o]=!1;var l={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0};for(var d=!1,u=0,p=this.lotes_insumo;u<p.length;u++){var s=p[u];s.cantidad>s.existencia&&(d=!0)}for(var m=0,f=this.lotes_insumo;m<f.length;m++){var s=f[m];if(s.cantidad>0){var g=!1;if(a)for(var h=0,v=c.controls.lotes.controls;h<v.length;h++){var b=v[h];if(b.controls.id.value===s.id){g=!0;var y=s.cantidad;if(y<=b.controls.existencia.value){var _=Number(b.controls.existencia.value)+Number(1);this.notificacion.alert("Cantidad Inválida","La cantidad mínima es: "+_,l),y=Number(b.controls.existencia.value)+1}b.controls.cantidad.patchValue(y),b.controls.nueva_existencia.patchValue(y);break}}if(!g)if(s.cantidad>s.existencia)s.nuevo&&(s.existencia=0),c.controls.lotes.push(this.fb.group({id:s.id,ajuste:1,nueva_existencia:s.cantidad,nuevo:0|s.nuevo,codigo_barras:s.codigo_barras,lote:s.lote,fecha_caducidad:s.fecha_caducidad,cantidad:s.cantidad,existencia:s.nuevo?0:s.existencia}));else{var _=Number(s.existencia)+Number(1);this.notificacion.alert("Cantidad Inválida","La cantidad mínima de "+s.lote+" es: "+_,l),a||d||t.removeAt(o)}}}for(var x=0,j=0,P=0,I=c.controls.lotes.value;P<I.length;P++){var b=I[P];x+=b.cantidad,j+=b.cantidad}c.controls.cantidad_surtida.patchValue(x),this.cancelarModal("verLotes"),this.cancelarModal("negarExistencia"),this.cant_solicitada_valida=!1,this.sum_cant_lotes=!1,this.modo="N"},t.prototype.validarLotesInsumo=function(){this.options={position:["bottom","left"],timeOut:5e3,lastOnBottom:!0},this.cantidad_error=0;for(var t=this.dato.controls.insumos,e={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,cantidad:1,presentacion_nombre:this.insumo.presentacion_nombre,unidad_medida:this.insumo.unidad_medida,cantidad_x_envase:this.insumo.cantidad_x_envase?parseInt(this.insumo.cantidad_x_envase):1,cantidad_surtida:1,lotes:this.fb.array([])},a=!1,n=0,i=!0,r=0,s=t.value;r<s.length;r++){var o=s[r];if(o.clave===this.insumo.clave){!0,a=!0;break}n++}a||t.push(this.fb.group(e));for(var c=0,l=this.lotes_insumo;c<l.length;c++){var o=l[c];o.cantidad<=o.existencia&&(i=!1,a||t.removeAt(t.length-1))}i?this.agregarLoteIsumo():(this.mensajeResponse.texto="Verificar las cantidades ingresadas",this.mensajeResponse.clase="warning",this.mensaje(8))},t.prototype.ver_lotes_asignados=function(t){this.mostrar_lote[t]=!this.mostrar_lote[t]},t.prototype.agregarNuevoLote=function(){this.lotes_insumo.push({id:""+Math.floor(999*Math.random())+1,codigo_barras:"",lote:"",fecha_caducidad:"",existencia:"",cantidad:"",nueva_existencia:"",nuevo:1,existencia_unidosis:"",cantidad_unidosis:""})},t.prototype.eliminarLote=function(t){this.lotes_insumo.splice(t,1)},t.prototype.quitar_lote_insumo=function(t,e,a){var n=this.dato.controls.insumos,i=n.controls[t];i.controls.lotes.removeAt(a);var r=i.controls.cantidad_surtida.value-e.cantidad;i.controls.cantidad_surtida.patchValue(r)},t.prototype.validar_cantidad_lote=function(t,e,a,n){if("N"===n&&e.controls.cantidad.value<=e.controls.existencia.value){var i={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3},r=Number(e.controls.existencia.value)+Number(1);this.notificacion.alert("Cantidad Inválida","La cantidad mínima es: "+r,i);var s=Number(e.controls.existencia.value)+1;e.controls.cantidad.patchValue(s),e.controls.nueva_existencia.patchValue(s)}for(var o=this.dato.controls.insumos,c=o.controls[t],l=0,d=0,u=c.controls.lotes.value;d<u.length;d++){l+=u[d].cantidad}c.controls.cantidad_surtida.patchValue(l)},t.prototype.comprobar_cant_lotes=function(){for(var t=0,e=0,a=this.lotes_insumo;e<a.length;e++){var n=a[e];n.cantidad&&(t=Number(t)+Number(n.cantidad))}this.sum_cant_lotes=t>0},t.prototype.comprobar_cant_solicitada=function(t){this.cant_solicitada_valida=t>0},t.prototype.quitar_punto=function(t){return!!this.is_numeric(t.key)},t.prototype.is_numeric=function(t){return/^\d+$/.test(t)},t.prototype.guardar_movimiento=function(){document.getElementById("guardarMovimiento").classList.add("is-active")},t.prototype.imprimir=function(){var t=JSON.parse(localStorage.getItem("usuario"));console.log(this.dato.value);try{this.cargandoPdf=!0;var e={datos:this.dato.value,lista:this.dato.value.insumos,usuario:t};this.pdfworker.postMessage(JSON.stringify(e))}catch(t){this.cargandoPdf=!1}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t.prototype.handleKeyboardEvents=function(t){if(this.key=t.which||t.keyCode,13===t.keyCode)return document.getElementById("buscarInsumo").focus(),t.preventDefault(),!1},t.prototype.mensaje=function(t,e){void 0===t&&(t=6),void 0===e&&(e=["bottom","left"]);var a={showProgressBar:!0,pauseOnHover:!1,clickToClose:!0,maxLength:this.mensajeResponse.texto.length};this.options={position:e,timeOut:1e3*t,lastOnBottom:!0},""===this.mensajeResponse.titulo&&(this.mensajeResponse.titulo=this.titulo),"alert"===this.mensajeResponse.clase&&this.notificacion.alert(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"success"===this.mensajeResponse.clase&&this.notificacion.success(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"info"===this.mensajeResponse.clase&&this.notificacion.info(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"warning"!==this.mensajeResponse.clase&&"warn"!=this.mensajeResponse.clase||this.notificacion.warn(this.mensajeResponse.titulo,this.mensajeResponse.texto,a),"error"!==this.mensajeResponse.clase&&"danger"!=this.mensajeResponse.clase||this.notificacion.error(this.mensajeResponse.titulo,this.mensajeResponse.texto,a)},t}();f=p([a.i(n.Component)({selector:"app-ajuste-mas-formulario",template:a("xNA3"),styles:[a("2Gpn")],styles:["ngui-auto-complete {z-index: 999999 !important}"],host:{"(document:keydown)":"handleKeyboardEvents($event)"}}),m("design:paramtypes",["function"==typeof(g=void 0!==i.FormBuilder&&i.FormBuilder)&&g||Object,"function"==typeof(h=void 0!==c.a&&c.a)&&h||Object,"function"==typeof(v=void 0!==s.c&&s.c)&&v||Object,"function"==typeof(b=void 0!==r.d&&r.d)&&b||Object,"function"==typeof(y=void 0!==l.b&&l.b)&&y||Object,"function"==typeof(_=void 0!==n.NgZone&&n.NgZone)&&_||Object])],f);var g,h,v,b,y,_},maPk:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.buscar=function(t,e,a,n){return void 0===a&&(a=1),void 0===n&&(n=20),this.jwtRequest.get(l.URL,null,{status:t,q:e,page:a,per_page:n}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{status:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return t.json().data})},t.prototype.inicializar=function(t){return this.jwtRequest.post(l.URL,t).map(function(t){return t.json().data})},t.prototype.insumos=function(){return this.jwtRequest.get(l.URL_INSUMOS,null,{con_precios:!0}).map(function(t){return t.json().data})},t}();c.URL="inventario/inicializacion-inventario",c.URL_INSUMOS="catalogo-insumos",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},mfFy:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("BkNc"),o=a("Hsji"),c=a("oeHx"),l=a("G8gi"),d=a("f5Uh"),u=a("Px6Q"),p=a("I4uU"),m=a("TDv5");a.d(e,"a",function(){return g});var f=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},g=function(){function t(){}return t}();g=f([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,o.a,c.a,l.a,d.a,u.a,s.b],exports:[m.a],declarations:[p.a,m.a]})],g)},mjEJ:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bm2B"),s=a("BkNc"),o=a("p5Ee");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,a,n){var i=this;this.fb=t,this.router=e,this.route=a,this._sanitizer=n,this.tipo="ME",this.es_causes=1,this.actualizado=!1,this.cargando=!1,this.es_unidosis=!1,this.tieneid=!1,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.tab=1,this.autocompleListFormatter=function(t){var e='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4"> <!-- '+t.nombre+" --> <small>"+t.descripcion+'</small></p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+t.clave+") \n              ";return 1==t.es_causes&&(e+='<label class="tag is-success" ><strong>Cause </strong></label>'),0==t.es_causes&&(e+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);"><strong>No Cause </strong> </label>'),1==t.es_unidosis&&(e+='<label class="tag is-warning" ><strong>Unidosis</strong> </label>'),e+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",i._sanitizer.bypassSecurityTrustHtml(e)}}return t.prototype.ngOnInit=function(){var t=this,e=JSON.parse(localStorage.getItem("usuario"));this.dato=this.fb.group({clues:[e.clues_activa.clues],jurisdiccion_id:[e.clues_activa.jurisdiccion_id],nombre:[e.clues_activa.nombre],activa:[e.clues_activa.activa],director_id:[e.clues_activa.director_id],clues_claves:this.fb.array([])}),this.route.params.subscribe(function(e){e.clues&&(t.tieneid=!0)}),e.clues_activa&&(this.insumos_term+="&clues="+e.clues_activa.clues),e.almacen_activo&&(this.insumos_term+="&almacen="+e.almacen_activo.id);var a,n,i=this.dato.controls.clues_claves;for(a=0;a<i.length;a++)for(n=0;n<i.length;n++)i.value[a].updated_at>i.value[a].updated_at&&(this.actualizacion=i.value[a].updated_at)},t.prototype.ngAfterViewInit=function(){var t=this;document.getElementById("actualizar").click(),setTimeout(function(){var e=t.dato.controls.clues_claves,a=0,n="",i="";if(0!=e.value.length){for(n=e.value[a].updated_at?e.value[a].updated_at:e.value[a].created_at,i=e.value[a].usuario_id,a=0;a<e.length;)e.value[a].updated_at>n&&(n=e.value[a].updated_at,i=e.value[a].usuario_id),a+=1;t.actualizacion=n,t.actualizacion_usuario=i,t.actualizado=!0}else t.actualizacion="Sin actualización",t.actualizacion_usuario="Sin actualización"},4e3)},t.prototype.select_insumo_autocomplete=function(t){JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.insumo=t,this.agregarLoteIsumo(),document.getElementById("buscarInsumo").value="",this.es_unidosis=t.es_unidosis,this.cargando=!1},t.prototype.agregarLoteIsumo=function(){var t,e=this.dato.controls.clues_claves,a=!1;for(t=0;t<e.length;t++)this.insumo.clave==e.value[t].clave_insumo_medico&&(a=!0);var n;n=null==this.insumo.cantidad_x_envase?1:this.insumo.cantidad_x_envase;var i={clave_insumo_medico:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,tipo:this.insumo.tipo,codigo_barras:[""],unidad_medida:[""],cantidad_x_envase:parseInt(n)};a||e.push(this.fb.group(i))},t}();d=c([a.i(n.Component)({selector:"almacenes-formulario",template:a("jTKE"),styles:[a("cAZQ")]}),l("design:paramtypes",["function"==typeof(u=void 0!==r.FormBuilder&&r.FormBuilder)&&u||Object,"function"==typeof(p=void 0!==s.a&&s.a)&&p||Object,"function"==typeof(m=void 0!==s.c&&s.c)&&m||Object,"function"==typeof(f=void 0!==i.d&&i.d)&&f||Object])],d);var u,p,m,f},mkhf:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.buscar=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get(l.URL,null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.catalogo=function(t){return void 0===t&&(t=null),this.jwtRequest.get(l.URL,null,{filtro_usuario:1,subrogado:t}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return t.json().data})},t.prototype.crear=function(t){return this.jwtRequest.post(l.URL,t).map(function(t){return t.json().data})},t.prototype.editar=function(t,e){return this.jwtRequest.put(l.URL,t,e).map(function(t){return t.json().data})},t.prototype.eliminar=function(t){return this.jwtRequest.delete(l.URL,t).map(function(t){return t.json().data})},t}();c.URL="almacenes",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},"moX+":function(t,e){t.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Almacen" class="nav-item pull-left nav-hub-active"  routerLink="/almacen">\r\n            \r\n            <img src="assets/hub-farmacia.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left is-hidden-touch">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item">\r\n                <h1 class="title">&nbsp;Almacén</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <div class="nav-center">\r\n            <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n            </span>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},mzaL:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},n7du:function(t,e){function a(t){throw new Error("Cannot find module '"+t+"'.")}a.keys=function(){return[]},a.resolve=a,t.exports=a,a.id="n7du"},nBxU:function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <nav class="level">\r\n                            <div class="level-left">\r\n                                <h1 class="title">\r\n                                    <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-cloud"></i></span>\r\n                                    <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                                    Servidor central\r\n                                </h1>\r\n                            </div>\r\n                            <div class="level-right">\r\n                                <div class="block">                               \r\n                                  <a class="button is-primary is-inverted"  (click)="mostrarModalSubirArchivoSync = true;">\r\n                                    <span class="icon"><i class="fa fa-cloud-upload"></i></span><span>Subir sincronización</span>\r\n                                    </a>\r\n                                </div>\r\n                            </div>\r\n                        </nav>  \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section >\r\n                <table class="table">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t<th>SERVIDOR</th>\r\n\t\t\t\t\t\t\t<th>NOMBRE</th>\r\n\t\t\t\t\t\t\t<th>FECHA DE GENERACIÓN</th>\r\n\t\t\t\t\t\t\t<th>FECHA DE SINCRONIZACIÓN</th>\r\n                            <th>USUARIO</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody  *ngIf="!busquedaActivada">\r\n                        <tr *ngFor="let item of lista; let i=index">  \r\n                            <td>{{ item.id }}</td>   \r\n                            <td>{{ item.servidor_id }}</td>                      \r\n                            <td>{{ item.servidor_nombre }}</td> \r\n                            <td>{{ item.fecha_generacion }}</td>  \r\n                            <td>{{ item.created_at }}</td>    \r\n                            <td>{{ item.usuario_id }}</td>                                                  \r\n                        </tr>\r\n                        <tr *ngIf="lista.length == 0">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                        </tr>\r\n                    </tbody>\r\n                    <tbody *ngIf="busquedaActivada">\r\n                        <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                            <td>{{ item.id }}</td>   \r\n                            <td>{{ item.servidor_id }}</td>                      \r\n                            <td>{{ item.servidor_nombre }}</td> \r\n                            <td>{{ item.fecha_generacion }}</td>  \r\n                            <td>{{ item.created_at }}</td> \r\n                            <td>{{ item.usuario_id }}</td>                                                  \r\n                        </tr>\r\n\r\n                        <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                            <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <!-- Paginación para la lista  -->\r\n                <paginacion \r\n                    [total]="total" \r\n                    [paginasTotales]="paginasTotales" \r\n                    [resultadosPorPagina]="resultadosPorPagina" \r\n                    [paginaActual]="paginaActual" \r\n                    [indicePaginas]="indicePaginas"\r\n                    (onSiguiente)="paginaSiguiente()" \r\n                    (onAnterior)="paginaAnterior()" \r\n                    (onListar)="listar($event)" \r\n                    *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n                <!-- Paginación para la búsqueda  -->\r\n                <paginacion \r\n                    [total]="totalBusqueda" \r\n                    [paginasTotales]="paginasTotalesBusqueda" \r\n                    [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                    [paginaActual]="paginaActualBusqueda" \r\n                    [indicePaginas]="indicePaginasBusqueda"\r\n                    (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                    (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                    (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                    *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n            </section>\r\n        </div>\r\n        \r\n       \r\n       \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>     \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n\r\n<div class="modal"  [ngClass]="{ \'is-active\': mostrarModalSubirArchivoSync }">\r\n  <div class="modal-background" (click)="mostrarModalSubirArchivoSync =!mostrarModalSubirArchivoSync"></div>\r\n  <div class="modal-card">\r\n    <header class="modal-card-head">\r\n      <p class="modal-card-title"><span class="icon"><i class="fa fa-cloud-upload"></i></span> Subir archivo de sincronización manual</p>\r\n      <button class="delete" (click)="mostrarModalSubirArchivoSync = !mostrarModalSubirArchivoSync"></button>\r\n    </header>\r\n    <section class="modal-card-body">        \r\n        <div class="notification is-danger" *ngIf="mensajeErrorSync!=\'\'"><span class="icon"><i class="fa fa-exclamation-circle"></i></span> {{ mensajeErrorSync }}</div>\r\n       \r\n        <div class="field" [ngClass]="{ \'is-hidden\' : enviandoDatos || documentoSubido }">\r\n            <label for="sync" class="label" [ngClass]="{ \'is-danger\': errores.archivo != null }">Elige el archivo sync.XXXX.zip</label>            \r\n            <input class="input-file" type="file" #archivoInput  name="sync" id="sync" style="width:100%" [disabled]="documentoSubido" (change)="fileChange($event)" accept=".zip">            \r\n            <p class="help is-danger" *ngIf="errores.archivo == \'required\'">Debe elegir un archivo.</p>\r\n            <p class="help is-danger" *ngIf="errores.archivo == \'max\'">El archivo no puede ser superior a los <b>10MB</b>.</p>\r\n            <p class="help is-danger" *ngIf="errores.archivo == \'mimetypes\'">El tipo de archivo no es valido, verifique que tenga las siguientes extensiones: .zip</p>\r\n        </div>\r\n        <div *ngIf="enviandoDatos || documentoSubido">\r\n            <h1 class="subtitle" *ngIf="enviandoDatos">Subiendo documento...</h1>\r\n            <h1 class="subtitle" *ngIf="documentoSubido && !enviandoDatos"><span class="icon"><i class="fa fa-check-circle"></i></span> ¡El documento se ha subido exitosamente!</h1>\r\n            <progress class="progress is-primary" value="{{ progreso }}" max="100">{{ progreso}}%</progress>\r\n        </div>\r\n    </section>\r\n    <footer class="modal-card-foot">\r\n        <a class="button is-primary" [ngClass]="{ \'is-disabled\' : !archivo || enviandoDatos  }" *ngIf="!documentoSubido" (click)="adjuntar()">Adjuntar</a>\r\n        <a class="button is-primary" [ngClass]="{ \'is-disabled\' : !archivo || enviandoDatos  }" *ngIf="documentoSubido" (click)="reset()">Adjuntar otro documento</a>\r\n        <a class="button" [ngClass]="{ \'is-disabled\' : enviandoDatos  }" (click)="mostrarModalSubirArchivoSync = !mostrarModalSubirArchivoSync">Cerrar</a>      \r\n    </footer>\r\n  </div>\r\n</div>\r\n'},nKUZ:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.title=t,this.usuario={}}return t.prototype.ngOnInit=function(){this.title.setTitle("Dashboard"),this.usuario=JSON.parse(localStorage.getItem("usuario"))},t}();o=r([a.i(n.Component)({selector:"app-dashboard",template:a("BeiC"),styles:[a("ZZEr")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},nUOd:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-nav{position:fixed;width:100%;top:0;z-index:99;background:#00d1b2}nav{background-color:#00d1b2;color:#fff!important}a.nav-hub-active{background:rgba(0,0,0,.05)}a.nav-hub-active:hover{background:rgba(0,0,0,.1)}nav a{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover{color:#fff!important}nav .title{color:#fff}nav a .title{color:#fff;color:hsla(0,0%,100%,.9)!important}nav a:hover .title{color:#fff!important}",""]),t.exports=t.exports.toString()},nUrr:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bm2B"),r=a("fc+i"),s=a("BkNc"),o=a("p5Ee"),c=a("K4kt"),l=a("hN3r"),d=a("bbdN");a.n(d);a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(t,e,a,n,i,r){var s=this;this.fb=t,this.crudService=e,this.route=a,this._sanitizer=n,this.notificacion=i,this._ngZone=r,this.modo="N",this.tab=1,this.cant_solicitada_valida=!1,this.sum_cant_lotes=!1,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.MinDate=new Date,this.MaxDate=new Date,this.tieneid=!1,this.cargando=!1,this.cargandoPdf=!1,this.autocompleListFormatter=function(t){var e='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4"> <small>'+t.descripcion+'</small></p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+t.clave+") \n              ";return 1==t.es_causes&&(e+='<label class="tag is-success" ><strong>Cause </strong></label>'),0==t.es_causes&&(e+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);"><strong>No Cause </strong> </label>'),1==t.es_unidosis&&(e+='<label class="tag is-warning" ><strong>Unidosis</strong></label>'),e+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",s._sanitizer.bypassSecurityTrustHtml(e)},this.es_unidosis=!1,this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0},this.mostrar_lote=[]}return t.prototype.ngOnInit=function(){var t=this,e=JSON.parse(localStorage.getItem("usuario"));document.getElementById("catalogos").click(),document.getElementById("actualizar").click(),e.clues_activa&&(this.insumos_term+="&clues="+e.clues_activa.clues),e.almacen_activo&&(this.insumos_term+="&almacen="+e.almacen_activo.id),this.pdfworker=new Worker("web-workers/farmacia/movimientos/salida.js");var a=this,n=this._ngZone;this.pdfworker.onmessage=function(t){n.run(function(){a.cargandoPdf=!1}),d.saveAs(a.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.dato=this.fb.group({id:[""],tipo_movimiento_id:["2",[i.Validators.required]],status:["FI"],fecha_movimiento:["",[i.Validators.required]],observaciones:[""],cancelado:[""],observaciones_cancelacion:[""],movimiento_metadato:this.fb.group({turno_id:["",[i.Validators.required]],servicio_id:["",[i.Validators.required]],persona_recibe:["",[i.Validators.required]]}),insumos:this.fb.array([]),insumos_negados:this.fb.array([])}),this.route.params.subscribe(function(e){e.id&&(t.tieneid=!0)}),this.form_insumos={tipo_movimiento_id:["",[i.Validators.required]]};var r=new Date;this.MinDate=new Date(r.getFullYear()-1,0,1),this.MaxDate=new Date(r.getFullYear(),r.getMonth(),r.getDate()),this.dato.get("fecha_movimiento").value?this.fecha_actual=this.dato.get("fecha_movimiento").value:(this.fecha_actual=r.getFullYear()+"-"+("00"+(r.getMonth()+1)).slice(-2)+"-"+r.getDate(),this.dato.get("fecha_movimiento").patchValue(this.fecha_actual))},t.prototype.abrirModal=function(t){document.getElementById(t).classList.add("is-active")},t.prototype.cancelarModal=function(t){document.getElementById(t).classList.remove("is-active")},t.prototype.select_insumo_autocomplete=function(t){var e=this,a=JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.crudService.lista(0,1e3,"comprobar-stock?almacen="+a.almacen_activo.id+"&clave="+t.clave).subscribe(function(a){for(var n=0,i=e.dato.get("insumos").value;n<i.length;n++){var r=i[n];if(0==a.length)break;if(r.clave==a[0].clave_insumo_medico)for(var s=0,o=r.lotes;s<o.length;s++)for(var c=o[s],l=0,d=a;l<d.length;l++){var u=d[l];if(c.id===u.id)try{c.cantidad>0&&("U"===r.modo_salida&&(u.existencia=u.existencia-c.cantidad/r.cantidad_x_envase),"N"===r.modo_salida&&(u.existencia=u.existencia-c.cantidad),u.existencia_unidosis=u.existencia*r.cantidad_x_envase)}catch(t){console.log(t)}}}e.lotes_insumo=a,e.insumo=t,document.getElementById("buscarInsumo").value="",document.getElementById("tituloModal").innerHTML=" "+t.descripcion+' <br>\n          <p aling="justify" style="font-size:12px">'+t.descripcion+'</p> \n          <p aling="justify" style="font-size:16px"> CANTIDAD POR ENVASE: '+(t.cantidad_x_envase?t.cantidad_x_envase:"Sin especificar")+"</p>",e.es_unidosis=t.es_unidosis,e.unidad_medida=t.unidad_medida,e.cargando=!1,e.abrirModal("verLotes")},function(t){e.cargando=!1})},t.prototype.agregarLoteIsumo=function(t){for(var e=this.dato.controls.insumos,a={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,cantidad:1,presentacion_nombre:this.insumo.presentacion_nombre,unidad_medida:this.insumo.unidad_medida,cantidad_x_envase:this.insumo.cantidad_x_envase?parseInt(this.insumo.cantidad_x_envase):1,cantidad_surtida:1,modo_salida:this.modo,cantidad_solicitada:t,cantidad_solicitada_unidosis:t,lotes:this.fb.array([])},n=!1,i=0,r=0,s=e.value;r<s.length;r++){var o=s[r];if(o.clave==this.insumo.clave&&(!0,o.modo_salida==this.modo)){n=!0;break}i++}n||e.push(this.fb.group(a));var c=i,l=e.controls[c];this.mostrar_lote[c]=!1;var d={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0};for(var u=0,p=this.lotes_insumo;u<p.length;u++){var o=p[u];if(o.cantidad>0){var m=!1;if(n)for(var f=0,g=l.controls.lotes.controls;f<g.length;f++){var h=g[f];if(h.controls.id.value==o.id){m=!0;var v=h.controls.cantidad.value+o.cantidad;h.controls.cantidad.value,o.cantidad;"N"==this.modo&&v>h.controls.existencia.value&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+h.controls.existencia.value,d),v=1*h.controls.existencia.value),"U"==this.modo&&v>h.controls.existencia_unidosis.value&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+h.controls.existencia_unidosis.value,d),v=1*h.controls.existencia_unidosis.value),h.controls.cantidad.patchValue(v);break}}m||(o.nuevo&&(o.existencia=1*o.cantidad),"N"==this.modo&&o.cantidad>o.existencia&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+o.existencia,d),o.cantidad=1*o.existencia),"U"==this.modo&&o.cantidad>o.existencia_unidosis&&(this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+o.existencia_unidosis,d),o.cantidad=1*o.existencia_unidosis),l.controls.lotes.push(this.fb.group({id:o.id,nuevo:0|o.nuevo,codigo_barras:o.codigo_barras,lote:o.lote,fecha_caducidad:o.fecha_caducidad,existencia:o.nuevo?o.cantidad:o.existencia,cantidad:o.cantidad,existencia_unidosis:o.nuevo?o.cantidad:o.existencia_unidosis,modo_salida:this.modo})))}}for(var b=0,y=0,_=0,x=l.controls.lotes.value;_<x.length;_++){var h=x[_];b+=h.cantidad,y+=h.cantidad}if("N"==l.controls.modo_salida.value&&(l.controls.cantidad_surtida.patchValue(b),n)){var j=l.controls.cantidad_solicitada.value;t=Number(j)+Number(t),l.controls.cantidad_solicitada.patchValue(t)}if("U"==l.controls.modo_salida.value&&(l.controls.cantidad_surtida.patchValue(b),n)){var j=l.controls.cantidad_solicitada.value;t=Number(j)+Number(t),l.controls.cantidad_solicitada.patchValue(t)}this.cancelarModal("verLotes"),this.cancelarModal("negarExistencia"),this.cantidad_solicitadaBoxViewChildren.first.nativeElement.value="",this.cantidad_solicitadaBoxViewChildren.first.nativeElement.focus(),this.cant_solicitada_valida=!1,this.sum_cant_lotes=!1,this.modo="N"},t.prototype.ver_lotes_asignados=function(t){this.mostrar_lote[t]=!this.mostrar_lote[t]},t.prototype.agregarNuevoLote=function(){this.lotes_insumo.push({id:""+Math.floor(999*Math.random())+1,codigo_barras:"",lote:"",fecha_caducidad:"",existencia:"",cantidad:"",nuevo:1,existencia_unidosis:"",cantidad_unidosis:""})},t.prototype.eliminarLote=function(t){this.lotes_insumo.splice(t,1)},t.prototype.quitar_lote_insumo=function(t,e,a){var n=this.dato.controls.insumos,i=n.controls[t];i.controls.lotes.removeAt(a);var r=i.controls.cantidad_surtida.value-e.cantidad;i.controls.cantidad_surtida.patchValue(r)},t.prototype.validar_cantidad_lote=function(t,e,a,n){if("N"==n&&e.controls.cantidad.value>e.controls.existencia.value){var i={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+e.controls.existencia.value,i),e.controls.cantidad.patchValue(1*e.controls.existencia.value)}if("U"==n&&e.controls.cantidad.value>e.controls.existencia_unidosis.value){var i={showProgressBar:!0,pauseOnHover:!0,clickToClose:!0,maxLength:2e3};this.notificacion.alert("Cantidad Excedida","La cantidad maxima es: "+e.controls.existencia_unidosis.value,i),e.controls.cantidad.patchValue(1*e.controls.existencia_unidosis.value)}for(var r=this.dato.controls.insumos,s=r.controls[t],o=0,c=0,l=s.controls.lotes.value;c<l.length;c++){o+=l[c].cantidad}s.controls.cantidad_surtida.patchValue(o)},t.prototype.comprobar_cant_lotes=function(){for(var t=0,e=0,a=this.lotes_insumo;e<a.length;e++){var n=a[e];n.cantidad&&(t=Number(t)+Number(n.cantidad))}this.sum_cant_lotes=t>0},t.prototype.comprobar_cant_solicitada=function(t){this.cant_solicitada_valida=t>0},t.prototype.quitar_punto=function(t){return!!this.is_numeric(t.key)},t.prototype.is_numeric=function(t){return/^\d+$/.test(t)},t.prototype.guardar_movimiento=function(){document.getElementById("guardarMovimiento").classList.add("is-active")},t.prototype.imprimir=function(){for(var t,e=JSON.parse(localStorage.getItem("usuario")),a=0,n=this.array_turnos.clues_turnos;a<n.length;a++){var i=n[a];if(this.dato.value.movimiento_metadato.turno_id===i.id){t=i;break}}for(var r,s=0,o=this.array_servicios.clues_servicios;s<o.length;s++){var i=o[s];if(this.dato.value.movimiento_metadato.servicio_id===i.id){r=i;break}}try{this.cargandoPdf=!0;var c={datos:this.dato.value,lista:this.dato.value.insumos,turno:t,servicio:r,usuario:e};this.pdfworker.postMessage(JSON.stringify(c))}catch(t){this.cargandoPdf=!1}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();u([a.i(n.ViewChildren)("cantidad_solicitada"),p("design:type",Object)],m.prototype,"cantidad_solicitadaBoxViewChildren",void 0),u([a.i(n.ViewChildren)("cantidad_solicitada_unidosis"),p("design:type",Object)],m.prototype,"cantidad_solicitada_unidosisBoxViewChildren",void 0),m=u([a.i(n.Component)({selector:"salidas-estandar-formulario",template:a("bDKg"),styles:[a("2Gpn")],styles:["ngui-auto-complete {z-index: 999999 !important}"]}),p("design:paramtypes",["function"==typeof(f=void 0!==i.FormBuilder&&i.FormBuilder)&&f||Object,"function"==typeof(g=void 0!==c.a&&c.a)&&g||Object,"function"==typeof(h=void 0!==s.c&&s.c)&&h||Object,"function"==typeof(v=void 0!==r.d&&r.d)&&v||Object,"function"==typeof(b=void 0!==l.b&&l.b)&&b||Object,"function"==typeof(y=void 0!==n.NgZone&&n.NgZone)&&y||Object])],m);var f,g,h,v,b,y},ndCn:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bKpL"),s=(a.n(r),a("rlar")),o=(a.n(s),a("/zHi")),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("WdPz")),g=a("gHRf");a.d(e,"a",function(){return b});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e){this.title=t,this.apiService=e,this.cargando=!1,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Servidores / Panel de control"),this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0;var a={q:e,page:t.paginaActualBusqueda,per_page:t.resultadosPorPaginaBusqueda,estatus:!0};return e?t.apiService.buscarServidores(a):r.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0;var n={q:t,page:this.paginaActualBusqueda,per_page:this.resultadosPorPaginaBusqueda,estatus:!0};this.apiService.buscarServidores(n).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0;var a={page:t,per_page:this.resultadosPorPagina};this.apiService.servidores(a).subscribe(function(t){e.cargando=!1,e.lista=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.eliminar=function(t,e){var a=this;t.cargando=!0,this.apiService.eliminarServidor(t.id).subscribe(function(n){t.cargando=!1,a.lista.splice(e,1),console.log("Se eliminó el elemento de la lista."),a.mensajeExito=new g.a(!0),a.mensajeExito.mostrar=!0,a.mensajeExito.texto="item eliminado"},function(n){t.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.eliminar(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();b=h([a.i(n.Component)({selector:"app-servidores",template:a("L/X9"),styles:[a("ttNP")]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==f.a&&f.a)&&_||Object])],b);var y,_},ndL8:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},nnFv:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("BFvY"),s=a("QrLZ"),o=a("2cH3");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,a,n){this.router=t,this.authService=e,this.bloquearPantallaService=a,this.cambiarEntornoService=n,this.mostrar=!1,this.usuario={},this.mostrarCambiarEntorno=!1}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t.prototype.toggle=function(){this.mostrar=!this.mostrar,this.mostrar&&(this.usuario=JSON.parse(localStorage.getItem("usuario")))},t.prototype.logout=function(){this.authService.logout(),this.router.navigate(["/login"])},t.prototype.bloquear=function(){this.bloquearPantallaService.bloquearPantalla(),this.mostrar=!1},t.prototype.seleccionarClues=function(t){this.mostrarCambiarEntorno=!0;for(var e in this.usuario.unidades_medicas)t==this.usuario.unidades_medicas[e].clues&&(this.usuario.clues_activa=this.usuario.unidades_medicas[e],this.usuario.clues_activa.almacenes.length>0?this.usuario.almacen_activo=this.usuario.clues_activa.almacenes[0]:this.usuario.almacen_activo=null)},t.prototype.seleccionarAlmacen=function(t){this.mostrarCambiarEntorno=!0;for(var e in this.usuario.clues_activa.almacenes)t==this.usuario.clues_activa.almacenes[e].id&&(this.usuario.almacen_activo=this.usuario.clues_activa.almacenes[e])},t.prototype.seleccionarProveedor=function(t){this.mostrarCambiarEntorno=!0;for(var e in this.usuario.proveedores)if(t==this.usuario.proveedores[e].id){this.usuario.proveedor_activo=this.usuario.proveedores[e];break}},t.prototype.cambiarEntorno=function(){localStorage.setItem("usuario",JSON.stringify(this.usuario)),this.mostrarCambiarEntorno=!1,this.cambiarEntornoService.cambiarEntorno()},t}();d=c([a.i(n.Component)({selector:"app-perfil",template:a("dq2d"),styles:[a("gUNf")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.a&&i.a)&&u||Object,"function"==typeof(p=void 0!==r.a&&r.a)&&p||Object,"function"==typeof(m=void 0!==s.a&&s.a)&&m||Object,"function"==typeof(f=void 0!==o.a&&o.a)&&f||Object])],d);var u,p,m,f},nyLM:function(t,e){t.exports="<app-graficas></app-graficas>"},"o+wE":function(t,e){t.exports='<admision-menu></admision-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <admision-menu-lateral></admision-menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Lista de Pacientes {{ Unidad }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted " routerLink="/paciente/nuevo">\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th></th>\r\n                    <th><abbr title="Paciente ID">ID</abbr></th>\r\n                    <th>Nombre</th>\r\n                    <th>Fecha Nacimiento</th>\r\n                    <th>Localidad (Municipio)</th>\r\n                    <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pacientes; let i=index">\r\n                        <th><a routerLink="/paciente/editar/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.nombre }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.fecha_nacimiento }}</a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="item.localidad"><a routerLink="/paciente/editar/{{item.id}}">{{item.localidad.nombre }} ( {{item.localidad.municipio.nombre }} ) </a></td>\r\n                        <td style="vertical-align: middle;" *ngIf="!item.localidad"><a routerLink="/paciente/editar/{{item.id}}">DESCONOCIDO</a></td>\r\n                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando">\r\n                                <i class="fa fa-circle-o-notch fa-spin"></i>\r\n                            </span>\r\n                            <a *ngIf="!item.cargando" class="is-primary" routerLink="/paciente/editar/{{item.id}}">\r\n                                <span class="icon"><i class="fa fa-edit"></i></span>\r\n                            </a>\r\n\r\n                            <span class="icon " *ngIf="item.cargando">\r\n                                <i class="fa fa-circle-o-notch fa-spin"></i>\r\n                            </span>\r\n                            <a *ngIf="!item.cargando" class="is-primary" routerLink="/paciente/historial/{{item.id}}">\r\n                                <span class="icon"><i class="fa fa-history"></i></span>\r\n                            </a>\r\n                        </td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="pacientes.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th><a routerLink="/paciente/editar/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                    <th style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                    <td style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.nombre }}</a></td>\r\n                    <td style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.fecha_nacimiento }} </a></td>\r\n                    <td style="vertical-align: middle;"><a routerLink="/paciente/editar/{{item.id}}">{{ item.localidad.nombre }} ({{ item.localidad.municipio.nombre }})</a></td>\r\n                   <td style="vertical-align: middle;" class="has-text-centered">\r\n                        <span class="icon " *ngIf="item.cargando">\r\n                            <i class="fa fa-circle-o-notch fa-spin"></i>\r\n                        </span>\r\n                        <a *ngIf="!item.cargando" class="is-primary" routerLink="/paciente/editar/{{item.id}}">\r\n                            <span class="icon"><i class="fa fa-edit"></i></span>\r\n                        </a>\r\n\r\n                        <span class="icon " *ngIf="item.cargando">\r\n                            <i class="fa fa-circle-o-notch fa-spin"></i>\r\n                        </span>\r\n                        <a *ngIf="!item.cargando" class="is-primary" routerLink="/paciente/historial/{{item.id}}">\r\n                            <span class="icon"><i class="fa fa-history"></i></span>\r\n                        </a>    \r\n                        </td>\r\n                    \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            \r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n    </div>        \r\n   \r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},"oGa+":function(t,e){t.exports='<p>\r\n  editar works!\r\n</p>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" >\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:2em;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Editar rol\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="section" *ngIf="!cargando">\r\n              <div class="control is-grouped">\r\n                <p class="control is-expanded">\r\n                    <input class="input is-medium" [(ngModel)]="rol.nombre"  [ngClass]="{ \'is-danger\': errores.nombre != null}"  type="text" placeholder="Nombre" >\r\n                </p>\r\n                <p class="control">\r\n                    <a class="button is-medium is-primary " [ngClass]="{ \'is-loading\': enviando}" (click)="guardar()" >\r\n                    <span class="icon"><i class="fa fa-save"></i></span><span>Guardar</span>\r\n                    </a>\r\n                </p><p class="control">\r\n                    <a class="button is-medium is-white " [ngClass]="{ \'is-disabled\': enviando}" routerLink="/panel-control/roles">Cancelar</a>\r\n                </p>\r\n                \r\n              </div>\r\n              <p class="help is-danger" *ngIf="errores.nombre == \'required\'">Por favor especifique el nombre del rol.</p>              \r\n              <p class="help is-danger" *ngIf="errores.nombre == \'unique\'">Este nombre ya fue utilizado, por favor elija otro.</p>              \r\n              <br>\r\n              <table class="table">\r\n                <thead>\r\n                  <tr>\r\n                    <td style="width:42px; cursor:pointer;" (click)="seleccionarTodos()">\r\n                      <span class="icon" style="color:#00d1b2"><i class="fa" [ngClass]="{ \'fa-square-o\': !todosSeleccionados, \'fa-check-square\': todosSeleccionados }"></i></span>\r\n                    </td>\r\n                    <td><span style="color:red" *ngIf="errores.permisos == \'required\'"><span class="icon"><i class="fa fa-exclamation-circle"></i></span> <span>Elija un permiso:</span></span><span *ngIf="errores.permisos == null">Permiso</span></td>\r\n                    <td>Grupo</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr *ngFor="let item of permisos" (click)="item.seleccionado = !item.seleccionado" style="cursor:pointer">\r\n                    <td><span class="icon"><i class="fa" [ngClass]="{ \'fa-square-o\': !item.seleccionado, \'fa-check-square\': item.seleccionado }"></i></span></td>\r\n                    <td>{{ item.descripcion }}</td>\r\n                    <td>{{ item.grupo }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n\r\n            </section>\r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>    \r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},oJ9C:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},oN1m:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("eJUb"),o=a("oeHx"),c=a("G8gi"),l=a("f5Uh"),d=a("Px6Q"),u=a("YryS"),p=a("0IzD");a.d(e,"a",function(){return f});var m=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},f=function(){function t(){}return t}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},oPe8:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("/zHi"),o=(a.n(s),a("S7im")),c=(a.n(o),a("azLz")),l=(a.n(c),a("MBEm")),d=(a.n(l),a("5v8a")),u=(a.n(d),a("Pic8")),p=(a.n(u),a("xpf9")),m=(a.n(p),a("1Lkp")),f=a("0LBx"),g=a("Vbn5"),h=a("sYIv"),v=a("gHRf");a.d(e,"a",function(){return _});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},_=function(){function t(t,e,a,n,i,r){this.title=t,this.route=e,this.router=a,this.entregasService=n,this.pedidosService=i,this.stockService=r,this.cargando=!1,this.cargandoStock=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.lotesSurtidos=[],this.listaStock=[],this.claveInsumoSeleccionado=null,this.claveNoSolicitada=!1,this.itemSeleccionado=null}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Surtir pedido / Farmacia"),this.route.params.subscribe(function(e){t.id=e.id}),this.route.params.subscribe(function(e){t.id=e.id}),this.cargando=!0,this.pedidosService.ver(this.id).subscribe(function(e){t.cargando=!1,t.pedido=new h.a(!0),t.pedido.paginacion.resultadosPorPagina=10,t.pedido.filtro.paginacion.resultadosPorPagina=10;for(var a in e.insumos){var n=e.insumos[a],i=n.insumos_con_descripcion;null!=i&&(i.cantidad=+n.cantidad_solicitada,t.pedido.lista.push(i))}e.insumos=void 0,t.pedido.indexar(),t.pedido.listar(1)},function(e){t.cargando=!1,t.mensajeError=new v.a(!0),t.mensajeError=new v.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.seleccionarItem=function(t){this.itemSeleccionado=t,this.buscarStockApi(null,t.clave)},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},t.prototype.buscarStockApi=function(t,e){var a=this;void 0===e&&(e=null),this.cargandoStock=!0,this.stockService.buscar(t,e).subscribe(function(t){if(a.cargandoStock=!1,a.claveNoSolicitada=!1,a.listaStock=t,t.length>0){a.claveInsumoSeleccionado=t[0].clave_insumo_medico;for(var e=!1,n=0;n<a.pedido.lista.length;n++)if(a.pedido.lista[n].clave==a.claveInsumoSeleccionado){a.pedido.filtro.activo=!1;var i=Math.ceil((n+1)/a.pedido.paginacion.resultadosPorPagina);a.pedido.listar(i),a.itemSeleccionado=a.pedido.lista[n],e=!0}e?a.verificarItemsAsignadosStockApi():(a.claveNoSolicitada=!0,a.listaStock=[])}else""!=a.searchBoxStockViewChildren.first.nativeElement.value&&(a.itemSeleccionado=null);console.log("Stock cargado.")},function(t){a.cargandoStock=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){};try{t.json();401==t.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==t.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.surtir=function(){var t=this,e=[];for(var a in this.pedido.lista)for(var n in this.pedido.lista[a].listaStockAsignado)e.push({id:this.pedido.lista[a].listaStockAsignado[n].id,cantidad:this.pedido.lista[a].listaStockAsignado[n].cantidad});var i={pedido_id:this.id,entrega:"Juan pérez jolote",recibe:"John Salch",observaciones:"Esto es una observacion",lista:e};this.entregasService.surtir(i).subscribe(function(e){t.cargando=!1,t.router.navigate(["/farmacia/entregas/ver/"+e.id])},function(e){t.cargando=!1,console.log(e),t.mensajeError=new v.a(!0),t.mensajeError.texto="No especificado",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación."),409==e.status&&(t.mensajeError.texto="Por favor verfique los campos marcados en rojo.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}})},t.prototype.buscarStock=function(t,e,a){return 13==t.keyCode&&(t.preventDefault(),t.stopPropagation(),""!=a&&(this.buscarStockApi(a),e.select(),!1))},t.prototype.limpiarStock=function(){this.listaStock=[],this.itemSeleccionado=null,this.searchBoxStockViewChildren.first.nativeElement.value=""},t.prototype.eliminarStock=function(t){this.itemSeleccionado.listaStockAsignado.splice(t,1),this.calcularTotalStockItem(),this.verificarItemsAsignadosStockApi()},t.prototype.asignarStock=function(t){null==this.itemSeleccionado.listaStockAsignado&&(this.itemSeleccionado.listaStockAsignado=[]);var e=0;for(var a in this.itemSeleccionado.listaStockAsignado){if(t.id==this.itemSeleccionado.listaStockAsignado[a].id)return;e+=this.itemSeleccionado.listaStockAsignado[a].cantidad}if(e<this.itemSeleccionado.cantidad){var n=this.itemSeleccionado.cantidad-e;t.existencia>n&&(t.cantidad=n),t.existencia<=n&&(t.cantidad=t.existencia),this.itemSeleccionado.listaStockAsignado.push(t),this.calcularTotalStockItem(),t.asignado=!0}},t.prototype.validarItemStock=function(t,e){if(void 0===e&&(e=!1),null==t.cantidad)return e&&this.asignarMaximoPosible(t),void this.calcularTotalStockItem();var a=parseInt(t.cantidad);return isNaN(a)?(this.asignarMaximoPosible(t),void this.calcularTotalStockItem()):a<=0?(this.asignarMaximoPosible(t),void this.calcularTotalStockItem()):(a>t.existencia&&(t.cantidad=t.existencia),this.verificarTotalStockItem()||this.asignarMaximoPosible(t),void this.calcularTotalStockItem())},t.prototype.asignarMaximoPosible=function(t){var e=0;for(var a in this.itemSeleccionado.listaStockAsignado)this.itemSeleccionado.listaStockAsignado[a]!=t&&(e+=this.itemSeleccionado.listaStockAsignado[a].cantidad);var n=this.itemSeleccionado.cantidad-e;n>=t.existencia&&(t.cantidad=t.existencia),n<t.existencia&&(t.cantidad=n)},t.prototype.verificarItemsAsignadosStockApi=function(){for(var t in this.listaStock){this.listaStock[t].asignado=!1;for(var e in this.itemSeleccionado.listaStockAsignado)if(this.itemSeleccionado.listaStockAsignado[e].id==this.listaStock[t].id){this.listaStock[t].asignado=!0;break}}},t.prototype.verificarTotalStockItem=function(){var t=0;for(var e in this.itemSeleccionado.listaStockAsignado)t+=this.itemSeleccionado.listaStockAsignado[e].cantidad;return this.itemSeleccionado.totalStockAsignado<=this.itemSeleccionado.cantidad},t.prototype.calcularTotalStockItem=function(){var t=0;for(var e in this.itemSeleccionado.listaStockAsignado)t+=this.itemSeleccionado.listaStockAsignado[e].cantidad;if(0==t){var a=0;for(var e in this.lotesSurtidos)this.lotesSurtidos[e].clave==this.itemSeleccionado.clave&&this.lotesSurtidos.splice(a,1),a++}else{var n=!1;for(var e in this.lotesSurtidos)this.lotesSurtidos[e].clave==this.itemSeleccionado.clave&&(n=!0,this.lotesSurtidos[e].cantidad=t);n||this.lotesSurtidos.push({clave:this.itemSeleccionado.clave,cantidad:t})}this.itemSeleccionado.totalStockAsignado=t},t.prototype.keyboardInput=function(t){32==t.keyCode&&t.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.searchBoxStockViewChildren.first.nativeElement.focus())},t}();b([a.i(n.ViewChildren)("searchBoxStock"),y("design:type",Object)],_.prototype,"searchBoxStockViewChildren",void 0),_=b([a.i(n.Component)({selector:"app-surtir",template:a("39ze"),styles:[a("UNns")],host:{"(window:keydown)":"keyboardInput($event)"},providers:[g.a,f.a]}),y("design:paramtypes",["function"==typeof(x=void 0!==i.b&&i.b)&&x||Object,"function"==typeof(j=void 0!==r.c&&r.c)&&j||Object,"function"==typeof(P=void 0!==r.a&&r.a)&&P||Object,"function"==typeof(I=void 0!==f.a&&f.a)&&I||Object,"function"==typeof(E=void 0!==m.a&&m.a)&&E||Object,"function"==typeof(k=void 0!==g.a&&g.a)&&k||Object])],_);var x,j,P,I,E,k},oeHx:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("HStK");a.d(e,"a",function(){return c});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=function(){function t(){}return t}();c=o([a.i(n.NgModule)({imports:[i.CommonModule,r.b],exports:[s.a],declarations:[s.a]})],c)},ohCu:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.cargando=!1}return t.prototype.ngOnInit=function(){},t}();s=i([a.i(n.Component)({selector:"admision-menu-lateral",template:a("F31D"),styles:[a("Hzc3")]}),r("design:paramtypes",[])],s)},oo7j:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bKpL"),s=(a.n(r),a("rlar")),o=(a.n(s),a("/zHi")),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("gHRf")),g=a("COjq");a.d(e,"a",function(){return b});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e){this.title=t,this.egresoService=e,this.cargando=!1,this.mensajeError=new f.a,this.mensajeExito=new f.a,this.pacientesEgreso=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Pacientes / Admisión"),this.listar(1),this.mensajeError=new f.a,this.mensajeExito=new f.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){return console.log("Cargando búsqueda."+e),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0,e?t.egresoService.buscar(e,t.paginaActualBusqueda,t.resultadosPorPaginaBusqueda):r.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0,this.egresoService.buscar(t,e,this.resultadosPorPaginaBusqueda).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("------"),console.log(t),console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,this.cargando=!0,this.egresoService.lista(t,this.resultadosPorPagina).subscribe(function(t){e.cargando=!1,e.pacientesEgreso=t.data,e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("pacientes cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();b=h([a.i(n.Component)({selector:"app-lista",template:a("lzuH"),styles:[a("usYT")]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==g.a&&g.a)&&_||Object])],b);var y,_},p3pM:function(t,e){t.exports='<section  class="top-nav hero is-primary">\r\n            \r\n    <nav class="nav">\r\n        <a title="Catalogo" class="nav-item pull-left nav-hub-active"  routerLink="/almacen-articulos/catalogos" routerLinkActive="is-active">\r\n            \r\n            <img src="assets/hub-almacen-articulos.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left">\r\n            \r\n            <a class="nav-item" routerLink="/almacen-articulos/catalogos" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;Unidades Médicas</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},p5Ee:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var n={production:!0,API_URL:"http://api.sial.saludchiapas.gob.mx"}},pBSs:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("c+qg"),o=a("oeHx"),c=a("G8gi"),l=a("f5Uh"),d=a("Px6Q"),u=a("9i+F"),p=a("P1Ud");a.d(e,"a",function(){return f});var m=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},f=function(){function t(){}return t}();f=m([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,s.a,o.a,c.a,l.a,d.a],exports:[p.a],declarations:[u.a,p.a]})],f)},pFLx:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("LLho"),d=a("7YyF"),u=a("F1l5"),p=a("Td+/"),m=a("TFNY"),f=a("LAYm"),g=a("cEsc"),h=a("1Lkp"),v=a("mkhf"),b=a("Vbn5"),y=a("J1mw"),_=a("ezan"),x=a("08MF"),j=a("sXGB"),P=a("97cf");a.d(e,"a",function(){return E});var I=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},E=function(){function t(){}return t}();E=I([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,s.a,o.a,c.a,l.a,d.a,p.a,u.a],declarations:[m.a,f.a,g.a,_.a,x.a,j.a,P.a],providers:[h.a,v.a,b.a,y.a]})],E)},pKBH:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("YtO7"),d=a("LLho"),u=a("Px6Q"),p=a("ZIbx"),m=a("mZWb"),f=a("BFvY"),g=a("pBSs"),h=a("K4kt"),v=a("CWbX"),b=a("oSQj"),y=(a.n(b),a("evA2")),_=(a.n(y),a("hN3r"));a.d(e,"a",function(){return j});var x=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},j=function(){function t(){}return t}();j=x([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,g.a,v.a,b.NguiAutoCompleteModule,y.NguiDatetimePickerModule,_.a],declarations:[p.a,m.a],providers:[f.a,h.a]})],j)},pKVG:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("hHbS"),s=a("D9tw");a.d(e,"a",function(){return l});var o=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},c=[{path:"farmacia-subrrogada",component:r.a,canActivate:[s.a]}],l=function(){function t(){}return t}();l=o([a.i(n.NgModule)({imports:[i.b.forChild(c)],exports:[i.b],providers:[]})],l)},pMm4:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bm2B"),r=a("fc+i"),s=a("BkNc"),o=a("p5Ee"),c=a("K4kt"),l=a("hN3r"),d=a("bbdN");a.n(d);a.d(e,"a",function(){return m});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(t,e,a,n,i,r){var s=this;this.fb=t,this.crudService=e,this.route=a,this._sanitizer=n,this.notificacion=i,this._ngZone=r,this.tab=1,this.cargando=!1,this.insumos_term=o.a.API_URL+"/insumos-auto?term=:keyword",this.MinDate=new Date,this.MaxDate=new Date,this.tieneid=!1,this.cargandoPdf=!1,this.autocompleListFormatter=function(t){var e='\n    <div class="card">\n      <div class="card-content">\n        <div class="media">          \n          <div class="media-content">\n            <p class="title is-4"><small>'+t.descripcion+'</small></p>\n            <p class="subtitle is-6">\n              <strong>Clave: </strong> '+t.clave+") \n              ";return 1==t.es_causes&&(e+='<label class="tag is-success" ><strong>Cause </strong></label>'),0==t.es_causes&&(e+='<label class="tag" style="background: #B8FB7E; border-color: #B8FB7E; color: rgba(0,0,0,0.7);"><strong>No Cause </strong> </label>'),1==t.es_unidosis&&(e+='<label class="tag is-warning" ><strong>Unidosis</strong> </label>'),e+="\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>",s._sanitizer.bypassSecurityTrustHtml(e)},this.es_unidosis=!1,this.options={position:["top","right"],timeOut:5e3,lastOnBottom:!0},this.mostrar_lote=[]}return t.prototype.ngOnInit=function(){var t=this,e=JSON.parse(localStorage.getItem("usuario"));e.clues_activa&&(this.insumos_term+="&clues="+e.clues_activa.clues),e.almacen_activo&&(this.insumos_term+="&almacen="+e.almacen_activo.id),this.pdfworker=new Worker("web-workers/farmacia/movimientos/imprimir-entrada.js");var a=this,n=this._ngZone;this.pdfworker.onmessage=function(t){n.run(function(){a.cargandoPdf=!1}),d.saveAs(a.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.dato=this.fb.group({id:[""],tipo_movimiento_id:["1",[i.Validators.required]],status:["FI"],fecha_movimiento:["",[i.Validators.required]],observaciones:[""],cancelado:[""],observaciones_cancelacion:[""],movimiento_metadato:this.fb.group({persona_recibe:["",[i.Validators.required]],servicio_id:[null],turno_id:[null]}),insumos:this.fb.array([])}),this.route.params.subscribe(function(e){e.id&&(t.tieneid=!0)}),this.form_insumos={tipo_movimiento_id:["",[i.Validators.required]]};var r=new Date;this.MinDate=new Date(r.getFullYear()-1,0,1),this.MaxDate=new Date(r.getFullYear(),r.getMonth(),r.getDate()),this.dato.get("fecha_movimiento").value?this.fecha_actual=this.dato.get("fecha_movimiento").value:(this.fecha_actual=r.getFullYear()+"-"+("00"+(r.getMonth()+1)).slice(-2)+"-"+r.getDate(),this.dato.get("fecha_movimiento").patchValue(this.fecha_actual))},t.prototype.handleKeyboardEvents=function(t){if(this.key=t.which||t.keyCode,13===t.keyCode)return document.getElementById("buscarInsumo").focus(),t.preventDefault(),!1},t.prototype.abrirModal=function(t){document.getElementById(t).classList.add("is-active")},t.prototype.cancelarModal=function(t){document.getElementById(t).classList.remove("is-active")},t.prototype.select_insumo_autocomplete=function(t){JSON.parse(localStorage.getItem("usuario"));this.cargando=!0,this.insumo=t,this.agregarLoteIsumo(),document.getElementById("buscarInsumo").value="",this.es_unidosis=t.es_unidosis,this.cargando=!1},t.prototype.agregarLoteIsumo=function(){var t,e=this.dato.controls.insumos;t=null==this.insumo.cantidad_x_envase?1:this.insumo.cantidad_x_envase;var a={clave:this.insumo.clave,nombre:this.insumo.nombre,descripcion:this.insumo.descripcion,es_causes:this.insumo.es_causes,es_unidosis:this.insumo.es_unidosis,lote:["",[i.Validators.required]],codigo_barras:[""],fecha_caducidad:["",[i.Validators.required]],cantidad:["",[i.Validators.required]],cantidad_x_envase:parseInt(t),cantidad_surtida:1};e.push(this.fb.group(a))},t.prototype.ver_lotes_asignados=function(t){this.mostrar_lote[t]=!this.mostrar_lote[t]},t.prototype.agregarNuevoLote=function(){this.lotes_insumo.push({id:""+Math.floor(999*Math.random())+1,codigo_barras:"",lote:"",fecha_caducidad:"",existencia:"",cantidad:"",nuevo:1,existencia_unidosis:"",cantidad_unidosis:""})},t.prototype.eliminarLote=function(t){this.lotes_insumo.splice(t,1)},t.prototype.quitar_lote_insumo=function(t,e,a){var n=this.dato.controls.insumos,i=n.controls[t];i.controls.lotes.removeAt(a);var r=i.controls.cantidad_surtida.value-e.cantidad;i.controls.cantidad_surtida.patchValue(r)},t.prototype.imprimir=function(){var t=JSON.parse(localStorage.getItem("usuario"));try{this.cargandoPdf=!0;var e={datos:this.dato.value,lista:this.dato.value.insumos,usuario:t};this.pdfworker.postMessage(JSON.stringify(e))}catch(t){this.cargandoPdf=!1}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();m=u([a.i(n.Component)({selector:"salidas-estandar-formulario",template:a("SgEj"),styles:["ngui-auto-complete {z-index: 999999 !important}"],host:{"(document:keydown)":"handleKeyboardEvents($event)"}}),p("design:paramtypes",["function"==typeof(f=void 0!==i.FormBuilder&&i.FormBuilder)&&f||Object,"function"==typeof(g=void 0!==c.a&&c.a)&&g||Object,"function"==typeof(h=void 0!==s.c&&s.c)&&h||Object,"function"==typeof(v=void 0!==r.d&&r.d)&&v||Object,"function"==typeof(b=void 0!==l.b&&l.b)&&b||Object,"function"==typeof(y=void 0!==n.NgZone&&n.NgZone)&&y||Object])],m);var f,g,h,v,b,y},pPg0:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("BkNc"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("7rYK"),d=a("sKNt");a.d(e,"a",function(){return p});var u=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},p=function(){function t(){}return t}();p=u([a.i(n.NgModule)({imports:[i.CommonModule,r.b,s.a,o.a,c.a],declarations:[l.a,d.a],exports:[l.a,d.a]})],p)},"pSC/":function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return r});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=function(){function t(){}return t.prototype.transform=function(t,e,a){return t?t.filter(function(t){return t[e]==a}):[]},t}();r=i([a.i(n.Pipe)({name:"filter"}),a.i(n.Injectable)()],r)},q1HA:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},q8XJ:function(t,e){t.exports='<aside class="menu" style="padding: 1em;">\r\n    <p class="menu-label">\r\n        Accesos directos\r\n    </p>\r\n    <ul class="menu-list">\r\n        <li><a routerLink="/panel-control/usuarios" routerLinkActive="is-active"><span class="icon"  ><i class="fa fa-user"></i></span> Usuarios</a></li>\r\n        <li><a routerLink="/panel-control/roles" routerLinkActive="is-active"><span class="icon"><i class="fa fa-users"></i></span> Roles</a></li>\r\n        <li><a routerLink="/panel-control/permisos" routerLinkActive="is-active"><span class="icon"><i class="fa fa-shield"></i></span> Permisos</a></li>\r\n    </ul>\r\n    <p class="menu-label">\r\n        Catálogos\r\n    </p>\r\n    <ul class="menu-list">\r\n        <li><a routerLink="/panel-control/sync/estatus" routerLinkActive="is-active"><span class="icon"><i class="fa fa-server"></i></span> Estatus de sincronización</a></li>\r\n        <li><a routerLink="/panel-control/sync/manual" routerLinkActive="is-active"><span class="icon"  ><i class="fa fa-cloud-upload"></i></span> Sincronización manual</a></li>\r\n        \r\n    </ul>\r\n</aside>'},"qEG/":function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("BkNc"),s=a("wW11"),o=a("HDjA"),c=a("gHRf");a.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,a,n,i){this.title=t,this.router=e,this.route=a,this.apiService=n,this.permisosService=i,this.id=null,this.cargando=!1,this.enviando=!1,this.cargandoPermisos=!1,this.mensajeError=new c.a,this.mensajeExito=new c.a,this.errores={nombre:null,permisos:null},this.permisos=[],this.todosSeleccionados=!1,this.rol={nombre:"",permisos:[]}}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Editar / Panel de control"),this.route.params.subscribe(function(e){t.id=+e.id}),this.mensajeError=new c.a,this.mensajeExito=new c.a,this.cargando=!0,this.apiService.ver(this.id).subscribe(function(e){t.rol.nombre=e.nombre,t.cargarPermisos(e.permisos),t.cargando=!1},function(e){console.log(e),t.cargando=!1})},t.prototype.cargarPermisos=function(t){var e=this;void 0===t&&(t=[]),this.cargandoPermisos=!0,this.permisosService.lista().subscribe(function(a){e.permisos=a;for(var n in e.permisos)t:for(var i in t)if(t[i].id==e.permisos[n].id){e.permisos[n].seleccionado=!0;break t}e.cargandoPermisos=!1},function(t){console.log(t),e.cargandoPermisos=!1})},t.prototype.seleccionarTodos=function(){this.todosSeleccionados=!this.todosSeleccionados;for(var t in this.permisos)this.permisos[t].seleccionado=this.todosSeleccionados},t.prototype.guardar=function(){var t=this;this.enviando=!0,this.errores={nombre:null,permisos:null},this.rol.permisos=[];for(var e in this.permisos)this.permisos[e].seleccionado&&this.rol.permisos.push(this.permisos[e].id);this.apiService.editar(this.id,this.rol).subscribe(function(e){t.enviando=!1,t.mensajeExito=new c.a(!0),t.mensajeExito.texto="Se han guardado los cambios.",t.mensajeExito.mostrar=!0},function(e){try{var a=e.json();switch(t.mensajeError=new c.a(!0),e.status){case 401:t.mensajeError.texto="No tiee permiso para realizar esta acción.";break;case 409:t.mensajeError.texto="Verifique la información marcada de color rojo";for(var n in a.error)for(var i in a.error[n])t.errores[n]=a.error[n][i];break;case 500:t.mensajeError.texto="500 (Error interno del servidor)";break;default:t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}}catch(e){t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}t.mensajeError.mostrar=!0,t.enviando=!1})},t}();u=l([a.i(n.Component)({selector:"app-editar",template:a("oGa+"),styles:[a("VnqX")]}),d("design:paramtypes",["function"==typeof(p=void 0!==i.b&&i.b)&&p||Object,"function"==typeof(m=void 0!==r.a&&r.a)&&m||Object,"function"==typeof(f=void 0!==r.c&&r.c)&&f||Object,"function"==typeof(g=void 0!==s.a&&s.a)&&g||Object,"function"==typeof(h=void 0!==o.a&&o.a)&&h||Object])],u);var p,m,f,g,h},qQhy:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},qjeI:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("ABhI"),s=a("/dPQ"),o=a("D9tw");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"temas",children:[{path:"",component:r.a},{path:"avances/:id",component:s.a}],canActivate:[o.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b]})],d)},rQqo:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={},this.menu=[],this.menuAutorizado=[],this.toggleMinimizado=!1}return t.prototype.ngOnInit=function(){localStorage.getItem("adminCentralMenuLateralMinimizado")?this.toggleMinimizado="true"==localStorage.getItem("adminCentralMenuLateralMinimizado"):localStorage.setItem("adminCentralMenuLateralMinimizado",this.toggleMinimizado+""),this.menu=[{titulo:"Reportes",modulos:[{permiso:"bsIbPL3qv6XevcAyrRm1GxJufDbzLOax",icono:"fa-file-text",titulo:"Pedidos",url:"/administrador-central/pedidos"},{permiso:"bwWWUufmEBRFpw9HbUJQUP8EFnagynQv",icono:"fa-line-chart",titulo:"Abasto",url:"/administrador-central/abasto"},{permiso:"fWA5oDswZ2Ra4O8YaCy6nEY8OeCOxg9C",icono:"fa-bar-chart",titulo:"Entregas por mes",url:"/administrador-central/entregas-mes"},{permiso:"BBg7HSOEmjjOsVl48s8wSz8AxXhmBXA1",icono:"fa-thumbs-o-up",titulo:"Cumplimiento",url:"/administrador-central/cumplimiento"}]},{titulo:"Operaciones",modulos:[{permiso:"s8kSv2Gj9DZwRvClVRmZohp92Rtvi26i",icono:"fa-exchange",titulo:"Transferencias de recursos",url:"/administrador-central/transferencias-recursos"}]},{titulo:"Catálogos",modulos:[{permiso:"r1RX6Yq7fc4CRRI2OJXIPxeBLW3lFP59",icono:"fa-check-square",titulo:"Claves básicas",url:"/administrador-central/claves-basicas"}]},{titulo:"Pedidos alternos",modulos:[{permiso:"r1RX6Yq7fc4CRRI2OJXIPxeBLW3lFP59",icono:"fa-check-square-o",titulo:"Validación de pedidos alternos",url:"/administrador-central/validacion-pedidos-alternos"},{permiso:"r1RX6Yq7fc4CRRI2OJXIPxeBLW3lFP59",icono:"fa-hand-pointer-o",titulo:"Asignación de proveedores a pedidos alternos",url:"/administrador-central/asignacion-proveedores-pedidos-alternos"}]}],this.menuAutorizado=[];var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(e.length>0)for(var a in this.menu)for(var n in this.menu[a].modulos)t:for(var i in e)if(e[i]==this.menu[a].modulos[n].permiso){var r=this.initMenuAutorizadoPorItem(this.menu[a].titulo);r.modulos.push(this.menu[a].modulos[n]);break t}},t.prototype.ngOnDestroy=function(){localStorage.setItem("adminCentralMenuLateralMinimizado",this.toggleMinimizado+"")},t.prototype.initMenuAutorizadoPorItem=function(t){for(var e in this.menuAutorizado)if(t==this.menuAutorizado[e].titulo)return this.menuAutorizado[e];return this.menuAutorizado.push({titulo:t,modulos:[]}),this.menuAutorizado[this.menuAutorizado.length-1]},t}();s=i([a.i(n.Component)({selector:"administrador-central-menu-lateral",template:a("a75F"),styles:[a("Myp1")]}),r("design:paramtypes",[])],s)},rb23:function(t,e){t.exports='<menu-farmacia [modulo]="\'Entregas\'" [icono]="\'assets/icono-pedidos-alt.svg\'" [url]="\'/almacen/entregas\'"></menu-farmacia>\r\n\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n      <menu-lateral></menu-lateral>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa {{ icono }}"></i></span> {{ titulo }}\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th><abbr title="Número del pedido">Pedido</abbr></th>\r\n                    <th>Solicitado por</th>\r\n                    <th>Fecha</th>\r\n                    <th>Hora</th>\r\n                    <th style="text-align:center;"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of pedidos; let i=index">\r\n                       \r\n                        <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.almacen_solicitante.nombre }} {{ item.apellidos }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.created_at | date:\'dd/MM/y\' }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.created_at | date: \'HH:mm\'}}</a></td>\r\n                        <td></td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="pedidos.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.id }}</a></th>\r\n                    <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.almacen_solicitante.nombre }} {{ item.apellidos }}</a></td>\r\n                    <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.created_at | date:\'dd/MM/y\' }}</a></td>\r\n                    <td style="vertical-align: middle;"><a routerLink="/almacen/entregas/surtir/{{item.id}}">{{ item.created_at | date: \'HH:mm\'}}</a></td>\r\n                     \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n          \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>'},rwrg:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("LLho"),o=a("BFvY"),c=a("Wkon"),l=a("e3sQ"),d=a("MD48"),u=a("9ynB"),p=a("GtVU"),m=a("1vRS"),f=a("eSu/"),g=a("K0p3");a.d(e,"a",function(){return v});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=function(){function t(){}return t}();v=h([a.i(n.NgModule)({imports:[i.CommonModule,d.a,r.ReactiveFormsModule,s.a,c.a,l.a],declarations:[u.a,m.a,f.a,g.a],providers:[o.a,p.a]})],v)},rxeu:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bbdN");a.n(i);a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this._ngZone=t,this.fecha_desde="",this.fecha_hasta="",this.turno="",this.servicio="",this.recibe="",this.cargandoPdf=!1}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.pdfworker=new Worker("web-workers/farmacia/movimientos/lista-entradas.js");var t=this,e=this._ngZone;this.pdfworker.onmessage=function(a){e.run(function(){t.cargandoPdf=!1}),i.saveAs(t.base64ToBlob(a.data.base64,"application/pdf"),a.data.fileName)}},t.prototype.export_pdf=function(){var t=this.tr.first.nativeElement.options,e=this.sr.first.nativeElement.options;t=t[t.selectedIndex].text,e=e[e.selectedIndex].text;var a="<table><tr><th colspan='7'><h1>Entrada Estandar</h1></th></tr><tr><th>Desde: "+this.fecha_desde+"</th><th>Hasta: "+this.fecha_hasta+"</th></th><th>Recibe: "+this.recibe+"</th></tr><tr><th colspan='7'></th></tr></table>",a=a+document.getElementById("exportable").innerHTML;a='<html lang="es"> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> <meta name="charset" content="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> <meta name="apple-mobile-web-app-capable" content="yes"> <title>PDF</title> <meta name="viewport" content="initial-scale=1" /> <style>html { font-size: .9em;} body{font-size: .9em;} select::-ms-expand {display: none;}</style> </head> <body>'+a+" </body> </html>";var n=document.createElement("iframe");n.setAttribute("id","printf"),n.setAttribute("style","display:none"),document.body.appendChild(n);var i=document.getElementById("printf");i.contentWindow.document.write(a),setTimeout(function(){i.contentWindow.print()},500),setTimeout(function(){document.body.removeChild(n)},2e3)},t.prototype.export_excel=function(){var t="<table><tr><th colspan='7'><h1>Entrada Estandar</h1></th></tr><tr><th>Desde: "+this.fecha_desde+"</th><th>Hasta: "+this.fecha_hasta+"</th></th><th>Recibe: "+this.recibe+"</th></tr><tr><th colspan='7'></th></tr></table>";t+=document.getElementById("exportable").innerHTML;var e=new Blob([t],{type:"text/comma-separated-values;charset=utf-8"});try{i.saveAs(e,"Listado_entrada_de_almacen.xls")}catch(t){console.log(t)}},t.prototype.imprimir=function(){try{this.cargandoPdf=!0;var t={lista:this.dato,usuario:this.usuario,fecha_desde:this.fecha_desde,fecha_hasta:this.fecha_hasta,recibe:this.recibe};this.pdfworker.postMessage(JSON.stringify(t))}catch(t){this.cargandoPdf=!1}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();r([a.i(n.ViewChildren)("tr"),s("design:type",Object)],o.prototype,"tr",void 0),r([a.i(n.ViewChildren)("sr"),s("design:type",Object)],o.prototype,"sr",void 0),o=r([a.i(n.Component)({selector:"salidas-recetas-lista",template:a("3jTA")}),s("design:paramtypes",["function"==typeof(c=void 0!==n.NgZone&&n.NgZone)&&c||Object])],o);var c},sB99:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("qbdv"),s=a("BkNc"),o=a("bm2B"),c=a("/zHi"),l=(a.n(c),a("S7im")),d=(a.n(l),a("azLz")),u=(a.n(d),a("MBEm")),p=(a.n(u),a("5v8a")),m=(a.n(p),a("Pic8")),f=(a.n(m),a("xpf9")),g=(a.n(f),a("bbdN")),h=(a.n(g),a("p5Ee")),v=a("gHRf"),b=a("mkhf"),y=a("slEG"),_=a("6Akt");a.d(e,"a",function(){return P});var x=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},j=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},P=function(){function t(t,e,a,n,i,r,s,o){this.title=t,this.location=e,this.router=a,this.route=n,this._ngZone=i,this.pedidosService=r,this.almacenesService=s,this.fb=o,this.cargando=!1,this.guardando=!1,this.cargandoAlmacenes=!1,this.cargandoInsumos=!1,this.cargandoPresupuestos=!1,this.mensajeError=new v.a,this.mensajeAdvertencia=new v.a,this.mensajeExito=new v.a,this.meses={0:"Sin seleccionar",1:"Enero",2:"Febrero",3:"Marzo",4:"Abril",5:"Mayo",6:"Junio",7:"Julio",8:"Agosto",9:"Septiembre",10:"Octubre",11:"Noviembre",12:"Diciembre"},this.formularioTitulo="Nuevo",this.esEditar=!1,this.mostrarModalInsumos=!1,this.listaClaveAgregadas=[],this.mostrarModalListaClues=!1,this.loteSeleccionado=null,this.presupuesto={causes_disponible:0,no_causes_disponible:0,material_curacion_disponible:0},this.mes=0,this.subrogados={},this.es_almacen_subrogado=!1,this.fechasValidas=[],this.proveedor={},this.cargandoPdf=!1}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Formulario pedido"),this.pdfworker=new Worker("web-workers/farmacia/pedidos/imprimir.js");var e=this,a=this._ngZone;this.pdfworker.onmessage=function(t){a.run(function(){e.cargandoPdf=!1}),g.saveAs(e.base64ToBlob(t.data.base64,"application/pdf"),t.data.fileName)},this.pdfworker.onerror=function(t){a.run(function(){e.cargandoPdf=!1}),console.log(t)},this.pedido=new _.a(!0);var n=new Date,i=n.getDate(),r=n.getMonth()+1;if(i<20){var s=("0"+i).slice(-2),o=("0"+r).slice(-2);this.fechasValidas.push({fecha:n.getFullYear()+"-"+o+"-"+s,descripcion:this.meses[r]+" "+n.getFullYear()})}var c=("0"+(r+1)).slice(-2),l=n.getFullYear();if(r+1==13){n.getFullYear();r=0}this.fechasValidas.push({fecha:l+"-"+c+"-01",descripcion:this.meses[r+1]+" "+n.getFullYear()}),this.route.params.subscribe(function(e){e.id?(t.cargando=!0,t.pedido.id=e.id,t.esEditar=!0,t.formularioTitulo="Editar",t.title.setTitle("Editar pedido"),t.pedidosService.ver(e.id).subscribe(function(e){t.pedido.datos.patchValue(e),t.pedido.status=e.status,t.proveedor=e.proveedor;var a=e.fecha.split("-"),n=parseInt(a[1]);t.cargarPresupuesto(n),t.cambioAlmacen();for(var i in e.insumos){var r=e.insumos[i],s=r.insumos_con_descripcion;s.cantidad=+r.cantidad_solicitada,s.monto=+r.monto_solicitado,s.precio=+r.precio_unitario,s.tipo_insumo_id=r.tipo_insumo_id,s.lista_clues=r.lista_clues,t.pedido.lista.push(s),t.listaClaveAgregadas.push({clave:s.clave,lista:[]}),console.log(r.lista_clues);var o=t.listaClaveAgregadas.length-1;for(var c in s.lista_clues)console.log(s.lista_clues[c]),t.listaClaveAgregadas[o].lista.push(s.lista_clues[c].clues)}t.pedido.indexar(),t.pedido.listar(1),t.cargando=!1},function(e){t.cargando=!1,t.mensajeError=new v.a(!0),t.mensajeError=new v.a(!0),t.mensajeError.mostrar;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})):(t.title.setTitle("Nuevo pedido jurisdiccional"),t.cargarPresupuesto()),t.cargarAlmacenes()})},t.prototype.obtenerDireccion=function(){return"BR"==this.pedido.status?"/almacen/pedidos-jurisdiccionales/borradores":"/almacen/pedidos-jurisdiccionales/todos"},t.prototype.toggleModalInsumos=function(){this.mostrarModalInsumos=!this.mostrarModalInsumos},t.prototype.toggleModalListaClues=function(t){this.loteSeleccionado=t,this.mostrarModalListaClues=!this.mostrarModalListaClues},t.prototype.agregarItem=function(t){void 0===t&&(t={});var e=this.pedido.paginacion.totalPaginas,a=t.insumo,n=!1;for(var i in this.pedido.lista){var r=0;if(this.pedido.lista[i].clave==a.clave){n=!0,this.pedido.lista[i].lista_clues.push({clues:t.clues,nombre:t.nombre,cantidad:t.cantidad}),console.log(this.pedido.lista[i].lista_clues);for(var s in this.pedido.lista[i].lista_clues)r+=this.pedido.lista[i].lista_clues[s].cantidad;this.pedido.lista[i].cantidad=r,this.pedido.lista[i].monto=a.precio*r}}n||(a.lista_clues||(a.lista_clues=[]),a.lista_clues.push({clues:t.clues,nombre:t.nombre,cantidad:t.cantidad}),a.cantidad=t.cantidad,a.monto=a.cantidad*a.precio,this.pedido.lista.push(a)),this.pedido.indexar(),this.pedido.paginacion.lista.length!=this.pedido.paginacion.resultadosPorPagina||this.pedido.paginacion.paginaActual!=e||this.pedido.filtro.activo?this.pedido.listar(this.pedido.paginacion.paginaActual):this.pedido.listar(this.pedido.paginacion.paginaActual+1)},t.prototype.modificarItem=function(t){void 0===t&&(t={}),t.monto=t.cantidad*t.precio,this.pedido.actualizarTotales()},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},t.prototype.eliminarInsumo=function(t,e,a){void 0===a&&(a=!1);var n=this.listaClaveAgregadas.indexOf(t.clave);this.listaClaveAgregadas.splice(n,1),a?this.pedido.filtro.eliminarItem(t,e):this.pedido.eliminarItem(t,e)},t.prototype.mostrarFichaInformativa=function(t,e){t.preventDefault(),t.stopPropagation(),alert(e)},t.prototype.finalizar=function(){confirm("Atención el pedido ya no podra editarse, Esta seguro de concluir el pedido?")&&this.guardar(!0)},t.prototype.guardar=function(t){var e=this;void 0===t&&(t=!1),this.guardando=!0;var a;if(this.pedido.datos.invalid)return this.pedido.datos.get("almacen_solicitante").markAsTouched(),this.pedido.datos.get("descripcion").markAsTouched(),this.pedido.datos.get("fecha").markAsTouched(),this.guardando=!1,!1;if(a=this.pedido.obtenerDatosGuardar(),t){if(a.datos.status="CONCLUIR",this.presupuesto.causes_disponible-+this.pedido.totalMontoCauses.toFixed(2)<0||this.presupuesto.no_causes_disponible-+this.pedido.totalMontoNoCauses.toFixed(2)<0||this.presupuesto.material_curacion_disponible-+this.pedido.totalMontoMaterialCuracion.toFixed(2)<0)return this.guardando=!1,this.mensajeError=new v.a(!0),this.mensajeError.texto="Presupuesto insuficiente",this.mensajeError.mostrar=!0,!1}else a.datos.status="BR";this.esEditar?this.pedidosService.editar(this.pedido.id,a).subscribe(function(t){e.guardando=!1,"BR"!=t.status&&e.router.navigate(["/almacen/pedidos-jurisdiccionales/ver/"+t.id])},function(t){e.guardando=!1,e.mensajeError=new v.a(!0),e.mensajeError.texto="No especificado",e.mensajeError.mostrar=!0,console.log(e.pedido),"CONCLUIR"==e.pedido.status&&(e.pedido.status="BR");try{var a=t.json();console.log(a),401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==t.status&&a.error&&(e.mensajeError.texto=a.error,e.mensajeError.cuentaAtras=1e3)}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}}):this.pedidosService.crear(a).subscribe(function(t){e.guardando=!1,e.router.navigate(["/almacen/pedidos-jurisdiccionales/editar/"+t.id])},function(t){e.guardando=!1,console.log(t),e.mensajeError=new v.a(!0),e.mensajeError.texto="No especificado",e.mensajeError.mostrar=!0;try{var a=t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==t.status&&a.error&&(e.mensajeError.texto=a.error,e.mensajeError.cuentaAtras=1e3)}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}})},t.prototype.cambioAlmacen=function(){var t=this.pedido.datos.get("almacen_solicitante").value;this.subrogados[t]?this.es_almacen_subrogado=!0:this.es_almacen_subrogado=!1,this.cargarPresupuesto(this.mes)},t.prototype.cargarAlmacenes=function(){var t=this;this.cargandoAlmacenes=!0,this.almacenesService.catalogo(0).subscribe(function(e){t.cargandoAlmacenes=!1,t.almacenes=e;for(var a in e)1==e[a].subrogado&&"FARSBR"==e[a].tipo_almacen&&(t.subrogados[e[a].id]=!0);if(!t.esEditar){var n={};t.pedido.inicializarDatos(n)}console.log("Almacenes cargados."),0==t.almacenes.length?(t.mensajeAdvertencia=new v.a(!0),t.mensajeAdvertencia.texto="No hay almacenes registrados en el sistema, póngase en contacto con un administrador.",t.mensajeAdvertencia.mostrar=!0):(t.pedido.datos.patchValue({almacen_solicitante:t.almacenes[0].id}),t.cambioAlmacen())},function(e){t.cargandoAlmacenes=!1,t.mensajeError=new v.a(!0),t.mensajeError.texto="No especificado.",t.mensajeError.mostrar=!0;try{e.json();401==e.status&&(t.mensajeError.texto="No tiene permiso para ver los almacenes."),500==e.status&&(t.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los almacenes")}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor). No se pudieron cargar los almacenes":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.  No se pudieron cargar los almacenes"}})},t.prototype.recargarPresupuesto=function(t){var e=t.split("-");if(3==e.length){var a=e[1];2==a.length&&(a=parseInt(a))!=this.mes&&a>0&&a<13&&this.cargarPresupuesto(a)}},t.prototype.cargarPresupuesto=function(t){var e=this;if(void 0===t&&(t=0),0==t){t=(new Date).getMonth()+1}this.mes=t;var a=this.pedido.datos.get("almacen_solicitante").value;a&&(this.cargandoPresupuestos=!0,this.pedidosService.presupuesto(t,a).subscribe(function(t){e.cargando=!1,t.data?e.presupuesto=t.data:(e.presupuesto.causes_disponible=0,e.presupuesto.no_causes_disponible=0,e.presupuesto.material_curacion_disponible=0),e.cargandoPresupuestos=!1},function(t){e.cargando=!1,e.cargandoPresupuestos=!1,console.log(t)}))},t.prototype.keyboardInput=function(t){32==t.keyCode&&t.ctrlKey&&(event.preventDefault(),event.stopPropagation(),this.mostrarModalInsumos=!0),39==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaSiguiente():this.pedido.paginaSiguiente()),37==t.keyCode&&(t.ctrlKey&&t.shiftKey||t.ctrlKey)&&(event.preventDefault(),event.stopPropagation(),this.pedido.filtro.activo?this.pedido.filtro.paginaAnterior():this.pedido.paginaAnterior())},t.prototype.imprimirExcel=function(){var t="token="+localStorage.getItem("token");window.open(h.a.API_URL+"/generar-excel-pedido-jurisdiccional/"+this.pedido.id+"?"+t)},t.prototype.imprimir=function(){try{console.log(this.pedido),this.cargandoPdf=!0;var t={datos:{almacen:"solicitar",solicitante:"unidad",observaciones:"texto"},lista:this.pedido.lista};this.pdfworker.postMessage(JSON.stringify(t))}catch(t){this.cargandoPdf=!1,console.log(t)}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();P=x([a.i(n.Component)({selector:"app-formulario",template:a("keQP"),styles:[a("NAU/")],host:{"(window:keydown)":"keyboardInput($event)"}}),j("design:paramtypes",["function"==typeof(I=void 0!==i.b&&i.b)&&I||Object,"function"==typeof(E=void 0!==r.Location&&r.Location)&&E||Object,"function"==typeof(k=void 0!==s.a&&s.a)&&k||Object,"function"==typeof(C=void 0!==s.c&&s.c)&&C||Object,"function"==typeof(A=void 0!==n.NgZone&&n.NgZone)&&A||Object,"function"==typeof(S=void 0!==y.a&&y.a)&&S||Object,"function"==typeof(q=void 0!==b.a&&b.a)&&q||Object,"function"==typeof(w=void 0!==o.FormBuilder&&o.FormBuilder)&&w||Object])],P);var I,E,k,C,A,S,q,w},sKNt:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={},this.menu=[],this.menuAutorizado=[]}return t.prototype.ngOnInit=function(){var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(this.menu=[{titulo:"Sincronización con servidor principal",modulos:[{permiso:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f",icono:"fa-cloud",titulo:"Servidor central",url:"/panel-control/sync/central"},{permiso:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f",icono:"fa-desktop",titulo:"Servidor local",url:"/panel-control/sync/local"},{permiso:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f",icono:"fa-server",titulo:"Servidores",url:"/panel-control/sync/servidores"}]},{titulo:"Opciones avanzadas",modulos:[{permiso:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f",icono:"fa-wrench",titulo:"Actualizar sistema",url:"/panel-control/opciones-avanzadas/actualizar-sistema"},{permiso:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f",icono:"fa-database",titulo:"Base de datos",url:"/panel-control/opciones-avanzadas/base-datos"}]},{titulo:"Usuarios y privilegios",modulos:[{permiso:"mGKikN0aJaeF2XrHwwYK3XNw0f9CSZDe",icono:"fa-user",titulo:"Usuarios",url:"/panel-control/usuarios"},{permiso:"ICmOKw3HxhgRna4a78OP0QmKrIX0bNsp",icono:"fa-users",titulo:"Roles",url:"/panel-control/roles"},{permiso:"DYwQAxJbpHWw07zT09scEogUeFKFdGSu",icono:"fa-shield",titulo:"Permisos",url:"/panel-control/permisos"}]}],this.menuAutorizado=[{titulo:"Sincronización con servidor principal",modulos:[{icono:"fa-server",titulo:"Estatus",url:"/panel-control/sync/estatus"}]}],e.length>0)for(var a in this.menu)for(var n in this.menu[a].modulos)t:for(var i in e)if(e[i]==this.menu[a].modulos[n].permiso){var r=this.initMenuAutorizadoPorItem(this.menu[a].titulo);r.modulos.push(this.menu[a].modulos[n]);break t}},t.prototype.initMenuAutorizadoPorItem=function(t){for(var e in this.menuAutorizado)if(t==this.menuAutorizado[e].titulo)return this.menuAutorizado[e];return this.menuAutorizado.push({titulo:t,modulos:[]}),this.menuAutorizado[this.menuAutorizado.length-1]},t}();s=i([a.i(n.Component)({selector:"panel-control-menu-aside",template:a("ZVPH"),styles:[a("ndL8")]}),r("design:paramtypes",[])],s)},sL47:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return r});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=function(){function t(){}return t.prototype.transform=function(t,e){return t.filter(function(t){return t.titulo.toLowerCase().includes(e.toLowerCase())})},t}();r=i([a.i(n.Pipe)({name:"buscarModulo"})],r)},sXGB:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bm2B"),s=a("BkNc"),o=a("/zHi"),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("1Lkp")),g=a("J1mw"),h=a("Vbn5"),v=a("2cH3"),b=a("sYIv"),y=a("gHRf");a.d(e,"a",function(){return j});var _=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},x=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},j=function(){function t(t,e,a,n,i,s,o){this.title=t,this.route=e,this.pedidosService=a,this.recepcionService=n,this.stockService=i,this.router=s,this.cambiarEntornoService=o,this.cargando=!1,this.guardando=!1,this.cargandoStock=!1,this.capturarStock=!1,this.mostrarDialogo=!1,this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}},this.statusRecepcion="NV",this.mensajeError=new y.a,this.mensajeAdvertencia=new y.a,this.mensajeExito=new y.a,this.formStock={},this.lotesSurtidos=[],this.listaStock=[],this.claveInsumoSeleccionado=null,this.claveNoSolicitada=!1,this.itemSeleccionado=null,this.formularioTieneError=function(t,e){return this.formularioRecepcion.get(t).hasError(e)&&this.formularioRecepcion.get(t).touched},this.fb=new r.FormBuilder;var c=new Date,l=("0"+c.getDate()).slice(-2),d=("0"+(c.getMonth()+1)).slice(-2),u=c.getFullYear()+"-"+d+"-"+l;this.formularioRecepcion=this.fb.group({entrega:["",[r.Validators.required]],recibe:["",[r.Validators.required]],fecha_movimiento:[u,[r.Validators.required]],observaciones:""})}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Surtir pedido / Almacén"),this.cambiarEntornoSuscription=this.cambiarEntornoService.entornoCambiado$.subscribe(function(e){t.router.navigate(["/almacen/pedidos"])}),this.route.params.subscribe(function(e){t.id=e.id}),this.cargando=!0,this.recepcionService.verRecepcionPedido(this.id).subscribe(function(e){t.cargando=!1,t.pedido=new b.a(!0),t.pedido.paginacion.resultadosPorPagina=10,t.pedido.filtro.paginacion.resultadosPorPagina=10,t.folio=e.folio;var a={};if(1==e.recepciones.length){var n=e.recepciones[0].entrada_abierta.insumos;for(var i in n){var r=n[i];a[r.stock.clave_insumo_medico]||(a[r.stock.clave_insumo_medico]={cantidad:0,stock:[]}),a[r.stock.clave_insumo_medico].cantidad+=+r.cantidad,r.stock.cantidad=+r.cantidad,a[r.stock.clave_insumo_medico].stock.push(r.stock)}for(var s in a)t.lotesSurtidos.push({clave:s,cantidad:a[s].cantidad});t.statusRecepcion="BR"}"FI"==e.status&&(t.statusRecepcion="FI");for(var o in e.insumos){var c=e.insumos[o],r=c.insumos_con_descripcion;if(r.cantidad=+c.cantidad_solicitada,r.cantidad_recibida=+c.cantidad_recibida,r.monto=+c.monto_solicitado,r.precio=+c.precio_unitario,r.totalStockAsignado=+c.cantidad_recibida,a[r.clave]){r.listaStockAsignado=[],r.totalStockAsignado+=a[r.clave].cantidad;for(var l in a[r.clave].stock){var d=a[r.clave].stock[l];r.listaStockAsignado.push({codigo_barras:d.codigo_barras,lote:d.lote,fecha_caducidad:d.fecha_caducidad,cantidad:d.cantidad})}}t.pedido.lista.push(r)}e.insumos=void 0,t.pedido.datosImprimir=e,t.pedido.indexar(),t.pedido.listar(1)},function(e){t.cargando=!1,t.mensajeError=new y.a(!0),t.mensajeError.mostrar;try{var a=e.json();401==e.status?t.mensajeError.texto="No tiene permiso para hacer esta operación.":t.mensajeError.texto=a.error}catch(a){500==e.status?t.mensajeError.texto="500 (Error interno del servidor)":t.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.seleccionarItem=function(t){this.itemSeleccionado=t,this.capturarStock=!0,this.formStock={},this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}}},t.prototype.buscar=function(t,e,a,n){var i=e.value;if(27==t.keyCode)return t.preventDefault(),t.stopPropagation(),e.value="",a.value="",this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);if(a.value!=i){if(t.preventDefault(),t.stopPropagation(),a.value=i,""==i)return this.pedido.filtro.activo=!1,void(this.pedido.filtro.lista=[]);this.pedido.filtro.activo=!0;var r=[],s=this;for(var o in n)!function(t){var e=n[t].input.value;if(""==e)return"continue";var a=s.pedido.lista.filter(function(a){var i="",r=n[t].campos;for(var s in r)try{var o=r[s].split(".");i+=o.length>1?" "+a[o[0]][o[1]].toLowerCase():" "+a[r[s]].toLowerCase()}catch(t){}return i.includes(e.toLowerCase())});r.push(a)}(o);if(r.length>1){r=r.sort(function(t,e){return t.length-e.length});for(var c=r[0],l=[],d=1;d<r.length;d++)for(var o in r[d])for(var u in c)r[d][o]===c[u]&&l.push(c[u]);this.pedido.filtro.lista=l}else this.pedido.filtro.lista=r[0];this.pedido.filtro.indexar(!1),this.pedido.filtro.paginacion.paginaActual=1,this.pedido.filtro.listar(1)}},t.prototype.buscarStockApi=function(t,e){var a=this;void 0===e&&(e=null),this.cargandoStock=!0,this.stockService.buscar(t,e).subscribe(function(t){if(a.cargandoStock=!1,a.claveNoSolicitada=!1,a.listaStock=t,t.length>0){a.claveInsumoSeleccionado=t[0].clave_insumo_medico;for(var e=!1,n=0;n<a.pedido.lista.length;n++)if(a.pedido.lista[n].clave==a.claveInsumoSeleccionado){a.pedido.filtro.activo=!1;var i=Math.ceil((n+1)/a.pedido.paginacion.resultadosPorPagina);a.pedido.listar(i),a.itemSeleccionado=a.pedido.lista[n],e=!0}e?a.verificarItemsAsignadosStockApi():(a.claveNoSolicitada=!0,a.listaStock=[])}console.log("Stock cargado.")},function(t){a.cargandoStock=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){};try{t.json();401==t.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(e){console.log("No se puede interpretar el error"),500==t.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.finalizar=function(){this.mostrarDialogo=!0},t.prototype.cerrarDialogo=function(){this.mostrarDialogo=!1},t.prototype.guardar=function(t){var e=this;void 0===t&&(t=!1),this.guardando=!0;var a;if(t){if(this.formularioRecepcion.get("entrega").markAsTouched(),this.formularioRecepcion.get("recibe").markAsTouched(),this.formularioRecepcion.get("fecha_movimiento").markAsTouched(),!this.formularioRecepcion.valid)return!1;var n=prompt("Atención la recepción ya no podra editarse, para confirmar que desea concluir la recepción por favor escriba: CONCLUIR RECEPCION");if("CONCLUIR RECEPCION"!=n)return null!=n&&alert("Error al ingresar el texto para confirmar la acción."),this.guardando=!1,!1;a=this.formularioRecepcion.value,a.status="FI",a.stock=[]}else a={status:"BR",observaciones:"",stock:[]};for(var i in this.pedido.lista){var r=this.pedido.lista[i];if(r.totalStockAsignado>0)for(var s in r.listaStockAsignado){var o={clave_insumo_medico:r.clave,lote:r.listaStockAsignado[s].lote,fecha_caducidad:r.listaStockAsignado[s].fecha_caducidad,cantidad:r.listaStockAsignado[s].cantidad,existencia:r.listaStockAsignado[s].cantidad,codigo_barras:r.listaStockAsignado[s].codigo_barras,precio_unitario:0,precio_total:0};a.stock.push(o)}}this.recepcionService.guardarRecepcionPedido(this.pedido.datosImprimir.id,a).subscribe(function(t){e.mostrarDialogo=!1,e.guardando=!1,e.mensajeExito=new y.a(!0),"FI"==a.status?(e.statusRecepcion="FI",e.mensajeExito.texto="Recepción Finalizada"):(e.statusRecepcion="BR",e.mensajeExito.texto="Datos Guardados"),e.mensajeExito.mostrar=!0,console.log("Recepción guardada")},function(t){e.guardando=!1,e.mostrarDialogo=!1,console.log(t),e.mensajeError=new y.a(!0),e.mensajeError.texto="No especificado",e.mensajeError.mostrar=!0;try{var a=t.json();console.log(a),401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación."),409==t.status&&(e.mensajeError.texto="Por favor verfique los campos marcados en rojo."),500==t.status&&a.error&&(e.mensajeError.texto=a.error,e.mensajeError.cuentaAtras=1e3)}catch(a){500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":(console.log(a),e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir.")}}),console.log(a)},t.prototype.buscarStock=function(t,e,a){return 13==t.keyCode&&(t.preventDefault(),t.stopPropagation(),""!=a&&(this.buscarStockApi(a),e.select(),!1))},t.prototype.limpiarStock=function(){this.capturarStock=!1,this.listaStock=[],this.itemSeleccionado=null},t.prototype.eliminarStock=function(t){var e=this.itemSeleccionado.listaStockAsignado.indexOf(t);this.itemSeleccionado.listaStockAsignado.splice(e,1),this.calcularTotalStockItem(),this.verificarItemsAsignadosStockApi()},t.prototype.asignarStock=function(){this.erroresFormularioStock={cantidad:{error:!1},lote:{error:!1},fecha_caducidad:{error:!1}};var t=0;if(this.formStock.cantidad?this.formStock.cantidad<=0&&(this.erroresFormularioStock.cantidad={error:!0,texto:"La cantidad recibida debe ser mayor a 0."},t++):(this.erroresFormularioStock.cantidad={error:!0,texto:"Este campo es requerido."},t++),this.itemSeleccionado.tiene_fecha_caducidad&&!this.formStock.fecha_caducidad)this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"Este campo es requerido."},t++;else if(this.formStock.fecha_caducidad){var e=this.formStock.fecha_caducidad.split("-"),a=!1;if(3!=e.length?a=!0:4!=e[0].length||2!=e[1].length||2!=e[2].length?a=!0:parseInt(e[1])<1||parseInt(e[1])>12?a=!0:(parseInt(e[2])<1||parseInt(e[2])>31)&&(a=!0),a)this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"El formato de fecha no es correcto."},t++;else{var n=new Date,i=new Date(e[0],parseInt(e[1])-1,parseInt(e[2])),r=void 0;r=12*(i.getFullYear()-n.getFullYear()),r-=n.getMonth(),r+=i.getMonth(),r<6&&(this.erroresFormularioStock.fecha_caducidad={error:!0,texto:"La fecha de caducidad no puede ser menor a 6 meses."},t++),console.log(r)}}if(this.formStock.lote||(this.erroresFormularioStock.lote={error:!0,texto:"Este campo es requerido."},t++),t)return!1;null==this.itemSeleccionado.listaStockAsignado&&(this.itemSeleccionado.listaStockAsignado=[]);var s=this.itemSeleccionado.cantidad_recibida;for(var o in this.itemSeleccionado.listaStockAsignado)s+=this.itemSeleccionado.listaStockAsignado[o].cantidad;s+=this.formStock.cantidad,s<=this.itemSeleccionado.cantidad?(this.itemSeleccionado.totalStockAsignado=s,this.itemSeleccionado.listaStockAsignado.push({codigo_barras:this.formStock.codigo_barras,lote:this.formStock.lote,fecha_caducidad:this.formStock.fecha_caducidad,cantidad:this.formStock.cantidad}),this.resetearFormStock(),this.calcularTotalStockItem()):this.erroresFormularioStock.cantidad={error:!0,texto:"La cantidad recibida supera la cantidad solicitada."}},t.prototype.cancelarCapturaStock=function(){this.resetearFormStock(!0)},t.prototype.resetearFormStock=function(t){void 0===t&&(t=!1),t?this.formStock={}:(this.formStock.lote=void 0,this.formStock.fecha_caducidad=void 0,this.formStock.cantidad=void 0)},t.prototype.validarItemStock=function(t,e){if(void 0===e&&(e=!1),null==t.cantidad)return e&&this.asignarMaximoPosible(t),void this.calcularTotalStockItem();var a=parseInt(t.cantidad);return isNaN(a)?(this.asignarMaximoPosible(t),void this.calcularTotalStockItem()):a<=0?(this.asignarMaximoPosible(t),void this.calcularTotalStockItem()):(a>t.existencia&&(t.cantidad=t.existencia),this.verificarTotalStockItem()||this.asignarMaximoPosible(t),void this.calcularTotalStockItem())},t.prototype.asignarMaximoPosible=function(t){var e=0;for(var a in this.itemSeleccionado.listaStockAsignado)this.itemSeleccionado.listaStockAsignado[a]!=t&&(e+=this.itemSeleccionado.listaStockAsignado[a].cantidad);var n=this.itemSeleccionado.cantidad-e;n>=t.existencia&&(t.cantidad=t.existencia),n<t.existencia&&(t.cantidad=n)},t.prototype.verificarItemsAsignadosStockApi=function(){for(var t in this.listaStock){this.listaStock[t].asignado=!1;for(var e in this.itemSeleccionado.listaStockAsignado)if(this.itemSeleccionado.listaStockAsignado[e].id==this.listaStock[t].id){this.listaStock[t].asignado=!0;break}}},t.prototype.verificarTotalStockItem=function(){var t=0;for(var e in this.itemSeleccionado.listaStockAsignado)t+=this.itemSeleccionado.listaStockAsignado[e].cantidad;return this.itemSeleccionado.totalStockAsignado<=this.itemSeleccionado.cantidad},t.prototype.calcularTotalStockItem=function(){var t=this.itemSeleccionado.cantidad_recibida;for(var e in this.itemSeleccionado.listaStockAsignado)t+=this.itemSeleccionado.listaStockAsignado[e].cantidad;if(0==t){var a=0;for(var e in this.lotesSurtidos)this.lotesSurtidos[e].clave==this.itemSeleccionado.clave&&this.lotesSurtidos.splice(a,1),a++}else{var n=!1;for(var e in this.lotesSurtidos)this.lotesSurtidos[e].clave==this.itemSeleccionado.clave&&(n=!0,this.lotesSurtidos[e].cantidad=t);n||this.lotesSurtidos.push({clave:this.itemSeleccionado.clave,cantidad:t})}this.itemSeleccionado.totalStockAsignado=t},t.prototype.keyboardInput=function(t){32==t.keyCode&&t.ctrlKey&&(event.preventDefault(),event.stopPropagation())},t.prototype.ngOnDestroy=function(){this.cambiarEntornoSuscription.unsubscribe()},t}();j=_([a.i(n.Component)({selector:"app-recepcion",template:a("Gbu6"),styles:[a("mMBz")]}),x("design:paramtypes",["function"==typeof(P=void 0!==i.b&&i.b)&&P||Object,"function"==typeof(I=void 0!==s.c&&s.c)&&I||Object,"function"==typeof(E=void 0!==f.a&&f.a)&&E||Object,"function"==typeof(k=void 0!==g.a&&g.a)&&k||Object,"function"==typeof(C=void 0!==h.a&&h.a)&&C||Object,"function"==typeof(A=void 0!==s.a&&s.a)&&A||Object,"function"==typeof(S=void 0!==v.a&&v.a)&&S||Object])],j);var P,I,E,k,C,A,S},sYIv:function(t,e,a){"use strict";var n=a("5Rc+"),i=a("bm2B");a.d(e,"a",function(){return r});var r=(function(){function t(){}t}(),function(){function t(e){void 0===e&&(e=!1),this.lista=[],this.totalInsumos=0,this.totalMonto=0,this.totalMontoCauses=0,this.totalMontoNoCauses=0,this.totalMontoMaterialCuracion=0,this.paginacion=new n.a,this.activo=!1,this.cargando=!1,this.tieneError=function(t,e){return this.datos.get(t).hasError(e)&&this.datos.get(t).touched},this.inicializarDatos=function(t){void 0===t&&(t={});var e=t.fecha,a="";if(!t.fecha){var n=new Date,i=("0"+n.getDate()).slice(-2),r=("0"+(n.getMonth()+1)).slice(-2);e=n.getFullYear()+"-"+r+"-"+i}t.almacen_solicitante&&(a=t.almacen_solicitante),this.datos.setValue({almacen_solicitante:a,descripcion:"",observaciones:"",fecha:e})},this.obtenerDatosGuardar=function(){return{datos:this.datos.value,insumos:this.lista}},this.actualizarTotales=function(t){void 0===t&&(t=!1);var e;e=this.padre?this.padre:this,e.totalInsumos=0,e.totalMonto=0,e.totalMontoCauses=0,e.totalMontoNoCauses=0,e.totalMontoMaterialCuracion=0;var a=0,n=0,i=1;for(var r in e.lista)t&&(e.lista[r].lote=i++),e.totalInsumos+=+e.lista[r].cantidad,e.lista[r].monto&&(e.totalMonto+=e.lista[r].monto,"ME"==e.lista[r].tipo?e.lista[r].es_causes?e.totalMontoCauses+=e.lista[r].monto:e.totalMontoNoCauses+=e.lista[r].monto:"MC"==e.lista[r].tipo&&(e.totalMontoMaterialCuracion+=e.lista[r].monto,a+=e.lista[r].monto));a>0&&(n=16*a/100,e.totalMontoMaterialCuracion+=n,e.totalMonto+=n)},this.indexar=function(t){void 0===t&&(t=!0),t&&this.actualizarTotales(t),this.paginacion.totalPaginas=Math.ceil(this.lista.length/this.paginacion.resultadosPorPagina),this.paginacion.indice=[];for(var e=0;e<this.paginacion.totalPaginas;e++)this.paginacion.indice.push(e+1)},this.listar=function(t){void 0===t&&(t=1),this.paginacion.paginaActual=t;var e=(this.paginacion.paginaActual-1)*this.paginacion.resultadosPorPagina,a=e+this.paginacion.resultadosPorPagina;try{this.paginacion.lista=this.lista.slice(e,a)}catch(t){this.paginacion.lista=[]}},this.eliminarItem=function(t,e){var a=0;for(var n in this.lista){if(this.lista[n]===t){this.paginacion.lista.splice(e,1),this.lista.splice(a,1),this.indexar();var i=a+(this.paginacion.resultadosPorPagina-e)-1;if(this.lista[i]&&this.paginacion.lista.push(this.lista[i]),0==this.paginacion.lista.length&&(this.paginacion.paginaActual>1?this.listar(this.paginacion.paginaActual-1):this.listar(1)),this.padre){var r=this.padre.lista.indexOf(t),s=Math.ceil(r/this.padre.paginacion.resultadosPorPagina),o=(s-1)*this.padre.paginacion.resultadosPorPagina,c=r-o;if(this.padre.paginacion.paginaActual==s)this.padre.eliminarItem(t,c);else{var l=this.padre.paginacion.paginaActual;this.padre.listar(s),this.padre.eliminarItem(t,c),this.padre.listar(l),0==this.padre.paginacion.lista.length&&(this.padre.paginacion.paginaActual>1?this.padre.listar(this.padre.paginacion.paginaActual-1):this.padre.listar(1))}}return}a++}},e&&(this.filtro=new t,this.filtro.padre=this,this.fb=new i.FormBuilder,this.datos=this.fb.group({descripcion:["",[i.Validators.required]],fecha:["",[i.Validators.required]],almacen_solicitante:["",[i.Validators.required]],observaciones:""}),this.status="BR"),this.paginacion.resultadosPorPagina=10}return t.prototype.paginaSiguiente=function(){this.paginacion.paginaActual!=this.paginacion.totalPaginas&&this.listar(this.paginacion.paginaActual+1)},t.prototype.paginaAnterior=function(){1!=this.paginacion.paginaActual&&this.listar(this.paginacion.paginaActual-1)},t}())},sjpP:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.ngOnInit=function(){},t}();s=i([a.i(n.Component)({selector:"app-ver",template:a("zpYk"),styles:[a("J3AS")]}),r("design:paramtypes",[])],s)},skUF:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("jQN0"),s=a("7gzm"),o=a("D9tw");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"configuracion/almacenes",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"editar/:id",component:s.a}],canActivate:[o.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},slEG:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.stats=function(){return this.jwtRequest.get(l.URL_STATS,null,null).map(function(t){return t.json()})},t.prototype.presupuesto=function(t,e){void 0===t&&(t=0),void 0===e&&(e="");var a={};return t&&(a.mes=t),e&&(a.almacen=e),this.jwtRequest.get(l.URL_PRESUPUESTO,null,a).map(function(t){return t.json()})},t.prototype.buscar=function(t,e,a,n){return void 0===a&&(a=1),void 0===n&&(n=20),this.jwtRequest.get(l.URL,null,{status:t,q:e,page:a,per_page:n}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{status:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return t.json().data})},t.prototype.crear=function(t){return this.jwtRequest.post(l.URL,t).map(function(t){return t.json().data})},t.prototype.editar=function(t,e){return this.jwtRequest.put(l.URL,t,e).map(function(t){return t.json().data})},t.prototype.eliminar=function(t){return this.jwtRequest.delete(l.URL,t).map(function(t){return t.json().data})},t}();c.URL="pedidos-jurisdiccionales",c.URL_STATS="pedidos-jurisdiccionales-stats",c.URL_PRESUPUESTO="pedidos-jurisdiccionales-presupuesto",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},srJY:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i");a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this.title=t,this.usuario={},this.busqueda="",this.modulos=[],this.modulosAutorizados=[],this.accesosDirectos=[],this.accesosDirectosAutorizados=[]}return t.prototype.ngOnInit=function(){this.title.setTitle("Almacén"),this.usuario=JSON.parse(localStorage.getItem("usuario")),this.modulos=[{permiso:"z9MQHY1YAIlYWsPLPF9OZYN94HKjOuDk",icono:"assets/icono-pagina-lista.svg",titulo:"Pedidos",url:"/almacen/pedidos"},{permiso:"iSxK0TpoYpnzf8KIQTWOq9Web7WnSKhz",icono:"assets/icono-pedidos-alt.svg",titulo:"Entregas de pedidos",url:"/almacen/entregas"},{permiso:"GPSDLmXckXcdfdj7lD4rdacwMivsTp9g",icono:"assets/icono-recetas.svg",titulo:"Recetas",url:"/almacen/salidas-recetas"},{permiso:"qQvNeb1UFPOfVMKQnNkvxyqjCIUgFuEG",icono:"assets/icono-salidas.svg",titulo:"Salida  de almacén",url:"/almacen/salidas-estandar"},{permiso:"a1OMZVn7dveOf5aUK8V0VsvvSCxz8EMw",icono:"assets/icono-entradas.svg",titulo:"Entrada  de almacén",url:"/almacen/entradas-estandar"}],this.accesosDirectos=[{permiso:"2nC6GUf6E737QwZSxuLORT6rZUDy5YUO",icono:"assets/icono-pagina-lista.svg",titulo:"Nuevo pedido",url:"/almacen/pedidos/nuevo"},{permiso:"q9ppCvhWdeCJI85YtCrKvtHLaoPipeaT",icono:"assets/icono-pedidos-alt.svg",titulo:"Recibir pedido",url:"/almacen/pedidos/por-surtir"}];var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(e.length>0){for(var a in this.modulos)t:for(var n in e)if(e[n]==this.modulos[a].permiso){this.modulosAutorizados.push(this.modulos[a]);break t}for(var a in this.accesosDirectos)t:for(var n in e)if(e[n]==this.accesosDirectos[a].permiso){this.accesosDirectosAutorizados.push(this.accesosDirectos[a]);break t}}},t}();o=r([a.i(n.Component)({selector:"app-index-farmacia",template:a("hUzi"),styles:[a("gcnw")]}),s("design:paramtypes",["function"==typeof(c=void 0!==i.b&&i.b)&&c||Object])],o);var c},ssvK:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"tr.lista-entregas{background-color:#efefef}",""]),t.exports=t.exports.toString()},swHk:function(t,e){t.exports='<menu-almacen-articulos></menu-almacen-articulos>\r\n\r\n<div style="height:50px;"></div>\r\n<section style="padding: 1em;">\r\n  <div class="control is-grouped">\r\n    <p class="control is-expanded">\r\n        <input class="input is-medium" type="text" placeholder="Buscar" [(ngModel)] = "busqueda" id="search-box">\r\n    </p>\r\n    <p class="control">\r\n        <a class="button is-medium is-primary is-inverted" [ngClass]="{ \'is-disabled\': busqueda==\'\'}" (click)="busqueda=\'\'">\r\n        <span class="icon"><i class="fa fa-close"></i></span>\r\n        </a>\r\n    </p>\r\n  </div>\r\n\r\n</section>\r\n<section style="padding: 1em;">\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of accesosDirectosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" class="item" routerLink="{{item.url}}"  routerLinkActive="active">\r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n    <hr>\r\n    <section class="contenedor columns is-multiline is-mobile">\r\n        <div class="column is-1-desktop is-2-tablet is-3-mobile" *ngFor="let item of modulosAutorizados | buscarModulo: busqueda">\r\n            <a href="#" title="{{ item.titulo}}" style="position: relative;" class="item" routerLink="{{item.url}}" routerLinkActive="active">\r\n                \r\n                <figure class="image " style="height: auto; width: 100%; ">\r\n                    <img src="{{ item.icono }}" alt="{{item.titulo}}">                            \r\n                </figure>\r\n                <span class="is-hidden-mobile">{{ item.titulo}}</span>\r\n                <span class="is-hidden-tablet is-hidden-desktop"><small>{{ item.titulo}}</small></span>\r\n                <span *ngIf="item.badge>0" class="tag is-danger" style="position:absolute; top:0px; right:0px;">{{ item.badge }}</span>\r\n            </a>\r\n        </div>\r\n    </section>\r\n</section>\r\n\r\n'},"t+3/":function(t,e){t.exports='<menu-farmacia [modulo]="\'Pedidos jurisdiccionales\'" [icono]="\'assets/icono-pedidos-jurisdiccionales.svg\'" [url]="\'/almacen/pedidos-jurisdiccionales/por-surtir\'"></menu-farmacia>\r\n\r\n<div class="is-fullwidth has-text-centered" style="padding-top:70px;" *ngIf="cargando">\r\n  <br>\r\n  <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n  <br>\r\n  <br>\r\n</div>\r\n\r\n<div style="position:relative; padding-top:70px; margin-left: 1.5%; display:block; width:97%; height:100% !important;" *ngIf="pedido">    \r\n  <div class="tile is-ancestor is-vertical" style="height:100% !important; max-height:100% !important;">\r\n    <div class="tile is-parent is-12 ">\r\n      <div class="tile is-child notification is-dark">\r\n        <div class="columns">\r\n          <div class="column" >\r\n            <div style="padding:1em;">\r\n              Folio: <strong style="color:#FFF;">{{ folio }}</strong>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Claves Recibidas: {{ lotesSurtidos.length  }}<!-- / {{ pedido.lista.length }}-->\r\n               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span *ngIf="statusRecepcion == \'BR\'"><strong style="color:#FFF;">Recepción inciada</strong></span>\r\n               <span *ngIf="statusRecepcion == \'FI\'"><strong style="color:#FFF;">Recepción concluida</strong></span>\r\n            </div>\r\n          </div>\r\n          <div class="column is-4" style="text-align:right; " *ngIf="statusRecepcion != \'FI\'">\r\n            <div style="margin:1em;">\r\n            <a *ngIf="!guardando && statusRecepcion == \'BR\'" class="button is-primary" style="width:45%; margin-right:5%;" (click)="finalizar()"> <span class="icon"><i class="fa fa-check"></i></span> <span>Concluir</span></a>\r\n            <a  class="button is-white"  style="width:45%"  [ngClass]="{ \'is-loading\': guardando }"  (click)="guardar()"> <span class="icon"><i class="fa fa-save"></i></span> <span>Guardar</span></a>\r\n            </div>\r\n          </div>\r\n        </div>       \r\n      </div>\r\n    </div>\r\n    <div class="tile">\r\n      <div class="tile is-parent ">\r\n        <div class="tile is-child notification is-white" >\r\n          <div class="contenedor-tabla" >          \r\n            \r\n            <table class="table is-unselectable" *ngIf="!cargando" style="font-size: 0.8em; ">\r\n              <thead>\r\n                  <tr  [ngClass]="{ \'filtro\': pedido.filtro.activo}">\r\n                    <th style="width:41px;vertical-align: middle;" class="has-text-centered" >Lote</th>\r\n                    <th>\r\n                      <p class="control is-expanded">\r\n                        <input type="hidden" #searchBoxDescripcionClavePrevia >\r\n                        <!--input class="input is-small" type="text" placeholder="Clave o Descripción" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'generico_nombre\',\'informacion.concentracion\',\'informacion.presentacion\']}])"-->\r\n                        <input class="input is-small" type="text" placeholder="Clave o Descripción" #searchBoxDescripcionClave id="search-box-descripcion-clave" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                      </p>\r\n                    </th>  \r\n                    \r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Cantidad">Cantidad</abbr></th>\r\n                    <th style="width:78px !important;text-align: center; vertical-align: middle;"><abbr title="Surtido">Lotes</abbr></th>\r\n                    <th  style="width:21px !important; text-align: center; vertical-align: middle;">Surtido</th>\r\n                  </tr>\r\n              </thead>\r\n              <tbody *ngIf="!pedido.filtro.activo">\r\n\r\n                <tr class="item" *ngFor="let item of pedido.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <!--b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br-->\r\n                    <div class="item-detalle">\r\n                      <!--div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div-->\r\n                      <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n\r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }} / {{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ (item.listaStockAsignado)?item.listaStockAsignado.length:0 }}</th>\r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>      \r\n              </tbody>\r\n              <tbody *ngIf="pedido.filtro.activo">\r\n                <tr class="item"  *ngFor="let item of pedido.filtro.paginacion.lista; let i = index;" (click)="seleccionarItem(item)" [ngClass]="{ \'seleccionado\': item == itemSeleccionado}">\r\n                  <td class="has-text-centered">{{ item.lote }}</td>\r\n                  <td >\r\n                    <small >{{ item.clave }} <br></small>\r\n                    <!--b>{{ item.generico_nombre }}</b> <small *ngIf="(item.tipo == \'ME\' && item.informacion)"><b>{{ item.informacion.concentracion }}</b></small><br-->\r\n                    <div class="item-detalle">\r\n                      <!--div   *ngIf="(item.tipo == \'ME\' && item.informacion)" style="line-height:1em;">\r\n                        <small><i>{{ item.informacion.presentacion_nombre }}</i></small><br>\r\n                        <small><i>{{ item.informacion.contenido }} </i></small>\r\n                      </div>\r\n                      <div   *ngIf="item.tipo != \'ME\'" style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div-->\r\n\r\n                      <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                      </div>\r\n                    \r\n                      <div  style="padding: 0.5em 0 0.5em 0; ">\r\n                        <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                        <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                        <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                        <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                        \r\n                        <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                          <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                          <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                        </span>\r\n                        \r\n                      </div>\r\n                    </div>\r\n                  </td> \r\n                  <td style="width:78px !important; text-align:center;">{{ item.totalStockAsignado || 0 }} / {{ item.cantidad }}</td>     \r\n                  <th style="width:78px !important; text-align:center;">{{ (item.listaStockAsignado)?item.listaStockAsignado.length:0 }}</th>\r\n                  <td style="width:21px !important; text-align:center;">\r\n                    <span class="icon" style="color:gray;" *ngIf="item.totalStockAsignado == 0 || item.totalStockAsignado == null"><i class="fa fa-circle-thin"></i></span>\r\n                    <span class="icon" style="color:orange;" *ngIf="item.totalStockAsignado > 0 && item.totalStockAsignado < item.cantidad"><i class="fa fa-minus-circle"></i></span>\r\n                    <span class="icon" style="color:green;" *ngIf="item.totalStockAsignado == item.cantidad"><i class="fa fa-check-circle"></i></span>\r\n                  </td>\r\n                </tr>   \r\n              </tbody>              \r\n            </table>\r\n            <paginacion style=" width:100%; height:auto; bottom:0; left:0px; background:#FFF;"\r\n                [total]="pedido.lista.length" \r\n                [paginasTotales]="pedido.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.paginacion.indice"\r\n                (onSiguiente)="pedido.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.paginaAnterior(); limpiarStock();" \r\n                (onListar)="pedido.listar($event);limpiarStock();" \r\n                *ngIf="pedido.lista.length > 0 && pedido.lista.length > pedido.paginacion.resultadosPorPagina && !pedido.filtro.activo"></paginacion>\r\n\r\n            <paginacion \r\n                [total]="pedido.filtro.lista.length" \r\n                [paginasTotales]="pedido.filtro.paginacion.totalPaginas" \r\n                [resultadosPorPagina]="pedido.filtro.paginacion.resultadosPorPagina" \r\n                [paginaActual]="pedido.filtro.paginacion.paginaActual" \r\n                [indicePaginas]="pedido.filtro.paginacion.indice"\r\n                (onSiguiente)="pedido.filtro.paginaSiguiente(); limpiarStock();" \r\n                (onAnterior)="pedido.filtro.paginaAnterior();  limpiarStock();" \r\n                (onListar)="pedido.filtro.listar($event); limpiarStock();" \r\n                *ngIf="pedido.filtro.lista.length > 0 && pedido.filtro.lista.length > pedido.filtro.paginacion.resultadosPorPagina && pedido.filtro.activo"></paginacion>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="tile is-parent is-vertical ">\r\n        <div *ngIf="(capturarStock && (itemSeleccionado.cantidad_recibida < itemSeleccionado.cantidad))" class="tile is-child notification">\r\n          <div class="control is-grouped">\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <label class="label">Código de Barras</label>\r\n              <input class="input" autofocus type="text" placeholder="Código de Barras" [(ngModel)]="formStock.codigo_barras">\r\n            </p>\r\n            <!--p class="control has-icon has-icon-right">\r\n              <label class="label">Marca</label>\r\n              <span class="select is-expanded">\r\n                <select [(ngModel)]="formStock.marca">\r\n                  <option *ngFor="let item of marcas" [ngValue]="item">{{ item.nombre }}</option>\r\n                </select>\r\n              </span>\r\n            </p-->\r\n          </div>\r\n\r\n          <div class="control is-grouped">\r\n            <p class="control is-expanded  has-icon has-icon-right">\r\n              <label class="label">Lote</label>\r\n              <input class="input" autofocus type="text" placeholder="Lote" [(ngModel)]="formStock.lote">\r\n              <span *ngIf="erroresFormularioStock.lote.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.lote.error" class="help is-danger">{{erroresFormularioStock.lote.texto}}</span>\r\n            </p>\r\n            <p class="control is-expanded has-icon has-icon-right">\r\n              <label class="label">Caducidad (aaaa-mm-dd)</label>\r\n              <input class="input" type="text" placeholder="aaaa-mm-dd" [(ngModel)]="formStock.fecha_caducidad">\r\n              <span *ngIf="erroresFormularioStock.fecha_caducidad.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.fecha_caducidad.error" class="help is-danger">{{erroresFormularioStock.fecha_caducidad.texto}}</span>\r\n            </p>\r\n            <p class="control is-expanded has-icon has-icon-right">\r\n              <label class="label">Cantidad</label>\r\n              <input class="input" type="number" placeholder="Cantidad" [(ngModel)]="formStock.cantidad">\r\n              <span *ngIf="erroresFormularioStock.cantidad.error" class="icon is-small" >\r\n                <i class="fa fa-warning"></i>\r\n              </span>\r\n              <span *ngIf="erroresFormularioStock.cantidad.error" class="help is-danger">{{erroresFormularioStock.cantidad.texto}}</span>\r\n            </p>\r\n          </div>\r\n\r\n          <div class="control is-grouped is-pulled-right " >\r\n            <p class="control is-expanded">\r\n            </p>\r\n            <p class="control">\r\n                <button class="button is-medium is-primary " (click)="asignarStock()">\r\n                  <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar</span>\r\n                </button>\r\n            </p>\r\n            <p class="control">\r\n                <button class="button is-medium "  (click)="cancelarCapturaStock()">\r\n                  <span>Cancelar</span>\r\n                </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class="tile is-child  notification is-white">\r\n          <div class="contenedor-tabla">\r\n            <table class="table" *ngIf="!cargando && itemSeleccionado != null" style="font-size: 0.8em;" >\r\n              <thead>\r\n                  <tr style="background: #00d1b2;">\r\n                    <th style="color:#FFF !important;">Código</th>\r\n                    <!--th style="color:#FFF !important;">Marca</th-->\r\n                    <th style="color:#FFF !important;">Lote</th>\r\n                    <th style="color:#FFF !important;">Caducidad</th>\r\n                    <th style="color:#FFF !important;"><abbr title="Cantidad">Cant.</abbr></th>  \r\n                    <th></th>              \r\n                  </tr>\r\n              </thead>\r\n              <tfoot>\r\n                <tr>\r\n                  <th colspan="4" style="text-align:right">\r\n                    <span *ngIf="itemSeleccionado.totalStockAsignado == itemSeleccionado.cantidad"><span class="icon is-small" ><i class="fa fa-check-circle"></i></span> <span>Completo &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> Total </span>\r\n                  </th>\r\n                  <td style="text-align:center">{{ itemSeleccionado.totalStockAsignado || 0 }} / {{ itemSeleccionado.cantidad }}</td>\r\n                </tr>\r\n              </tfoot>\r\n              <tbody>\r\n                  <tr  class="is-unselectable" *ngFor="let item of itemSeleccionado.listaStockAsignado">\r\n                    <td>{{ item.codigo_barras}}</td>\r\n                    <!--td>{{ item.marca.nombre }}</td-->\r\n                    <td>{{ item.lote }}</td>\r\n                    <td>{{ item.fecha_caducidad | date:\'dd/MM/y\' }}</td>\r\n                    <td style="width:150px !important;">\r\n                        <p class="control is-expanded">\r\n                        <input class="input is-small has-text-centered"  type="number" min="1" max="{{item.existencia}}" placeholder="Cant" [(ngModel)]="item.cantidad" (change)="validarItemStock(item, true)" (keyup)="validarItemStock(item)">\r\n                        </p>\r\n                    </td> \r\n                    <td style="vertical-align: middle;" class="has-text-centered"><a  class="is-danger" (click)="eliminarStock(item)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>                    \r\n                  </tr>\r\n              </tbody>  \r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n  </div>\r\n</div>\r\n  \r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <!--p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p-->\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n<div class="modal is-active" [ngClass]="{\'is-active\': mostrarDialogo}">\r\n  <div class="modal-background" (click)="cerrarDialogo()"></div>\r\n  <div class="modal-card" style="width:60%; height: 90%;">\r\n    <header class="modal-card-head" style="background: #00d1b2;">\r\n      <div class="container is-fluid"  style="width:100%;">\r\n          <h1 class="title" style="color:#FFF;">\r\n            <span class="icon is-medium"><i class="fa fa-check"></i></span> Finalizar Recepción \r\n          </h1>\r\n      </div>            \r\n      <a class="button  is-primary" style="position:absolute; top:1em; right:1em;" (click)="cerrarDialogo()"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n    </header>\r\n    <section class="modal-card-body" style="padding:0px;" >\r\n      <div style="padding: 1em;">\r\n        <form name="form" novalidate [formGroup]="formularioRecepcion">\r\n          <label class="label">Nombre de quien entrega:</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" [ngClass]="{\'is-danger\': formularioTieneError(\'entrega\',\'required\')}" formControlName="entrega"/>\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'entrega\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'entrega\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n\r\n          <label class="label">Nombre de quien recibe:</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" [ngClass]="{\'is-danger\': formularioTieneError(\'recibe\',\'required\')}" formControlName="recibe"/>\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'recibe\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'recibe\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n\r\n          <label class="label">Fecha (aaaa-mm-dd):</label>\r\n          <p class="control is-expanded  has-icon has-icon-right">\r\n            <input type="text" class="input is-fullwidth" placeholder="aaaa-mm-dd" [ngClass]="{\'is-danger\': formularioTieneError(\'fecha_movimiento\',\'required\')}" formControlName="fecha_movimiento" />\r\n            <span class="icon is-small" *ngIf="formularioTieneError(\'fecha_movimiento\',\'required\')">\r\n              <i class="fa fa-warning"></i>\r\n            </span>\r\n            <span class="help is-danger" *ngIf="formularioTieneError(\'fecha_movimiento\',\'required\')">Este campo es requerido.</span>\r\n          </p>\r\n          \r\n          <div class="control">\r\n            <textarea name="observaciones" class="textarea" placeholder="Observaciones"  formControlName="observaciones"></textarea>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </section>\r\n    <footer class="" style="position:relative; padding:1em;background: #FFF; border-top:1px solid #EEE; border-radius:0 0 0.8em 0.8em " >\r\n      <div class="columns">\r\n          <div class="column" ></div>\r\n          <div class="column is-4" style="text-align:right; " *ngIf="statusRecepcion != \'FI\'">\r\n            <div style="margin:1em;">\r\n            <a  class="button is-primary" style="width:45%; margin-right:5%;" (click)="guardar(true)"> <span class="icon"><i class="fa fa-check"></i></span> <span>Concluir</span></a>\r\n            </div>\r\n          </div>\r\n        </div> \r\n    </footer>\r\n  </div>\r\n</div>\r\n\r\n'},t7Rg:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"tDx+":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("TeDg"),s=a("CODE"),o=a("D9tw");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"almacen-articulos/catalogos/vias-administracion",children:[{path:"",component:r.a},{path:"nuevo",component:s.a},{path:"editar/:id",component:s.a}],canActivate:[o.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forChild(l)],exports:[i.b],providers:[]})],d)},tEi8:function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span  *ngIf="!cargando" class="icon is-medium"><i class="fa fa-plus"></i></span>\r\n                            <span  *ngIf="cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span> \r\n                            Nuevo usuario\r\n                        </h1>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <section class="section">\r\n            <panel-control-usuarios-form \r\n                [usuario]="usuario" \r\n                [roles]="roles" \r\n                [unidadesMedicas]="unidadesMedicas" \r\n                [usuarioRepetido]="usuarioRepetido"\r\n                [usuarioInvalido]="usuarioInvalido"\r\n                [cargando]="cargando"\r\n                [cargandoRoles]="cargandoRoles"\r\n                (onEnviar)="enviar()"\r\n                (onRegresar)="regresar()"\r\n                (onCargarRoles)="cargarRoles()"\r\n            ></panel-control-usuarios-form>\r\n            </section>\r\n        </div>\r\n        \r\n       \r\n       \r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <p><b>Error:</b> {{ mensajeError.texto }}<br></p>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeError.cuentaAtras }} segundos.</small></p>      \r\n</div>\r\n\r\n<div class="notification is-warning" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeAdvertencia.mostrar">\r\n    <button class="delete" (click)="mensajeAdvertencia.mostrar = false"></button>        \r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-warning"></i></span> <span>{{ mensajeAdvertencia.texto }}</span></p>\r\n    \r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeAdvertencia.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n\r\n\r\n\r\n'},tOEk:function(t,e){t.exports='<listar #ctrl URL="ajuste-mas-inventario?fecha_desde={{fecha_desde}}&fecha_hasta={{fecha_hasta}}&usuario={{usuario_lista}}" titulo="Ajuste más de inventario"></listar>\r\n<!-- <listar #ctrl URL="ajuste-mas-inventario" titulo="Ajuste más de inventario"></listar>-->\r\n<app-menu-inventario [modulo]="\'Ajuste más de inventario\'" [icono]="\'assets/icono-stock.svg\'" [url]="\'/inventario/ajuste-mas-inventario\'"></app-menu-inventario>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass]=" {\'is-dark\': ctrl.busquedaActivada, \'is-primary\': !ctrl.busquedaActivada } ">\r\n\r\n                <div class="hero-body" style="position:relative;">\r\n                    <nav class="level">\r\n                        <!-- Left side FILTROS -->\r\n                        <div class="level-left" style="padding: 10px;">\r\n                        <div class="control is-grouped">\r\n                            <div class="control" style="z-index: 1000;">\r\n                                <div class="field">   \r\n                                    <label class="label">Desde:</label>                         \r\n                                    <input  style="width: 150px; z-index: 1000;" class="input is-medium" [(ngModel)]=\'fecha_desde\' ngui-datetime-picker date-only="true" placeholder="YYYY-MM-DD" />\r\n                                </div>\r\n                            </div>\r\n                            <div class="control is-expanded" style="z-index: 1000;">\r\n                                <div class="field">   \r\n                                    <label class="label">Hasta:</label>                         \r\n                                    <input style="width: 150px; z-index: 1000;" class="input is-medium" [(ngModel)]=\'fecha_hasta\' ngui-datetime-picker date-only="true" placeholder="YYYY-MM-DD" />\r\n                                </div>\r\n                            </div>\r\n                            <div class="control is-expanded">\r\n                                <div class="field">   \r\n                                    <label class="label">Usuario:</label>                         \r\n                                    <input class="input is-medium" type="text" placeholder="Usuario" [(ngModel)]="usuario_lista">\r\n                                </div>\r\n                            </div>\r\n                            <div class="control">\r\n                                <div class="field">  \r\n                                <label class="label">&nbsp;</label>\r\n                                <button class="button is-default is-medium" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="usuario_lista=\'\';fecha_desde=\'\'; fecha_hasta=\'\';" >Limpiar</button>\r\n                                </div>\r\n                            </div>\r\n                            <div class="control">\r\n                                <div class="field">  \r\n                                <label class="label">&nbsp;</label>\r\n                                <button class="button is-info is-medium" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.listar(1)" >Filtrar</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        </div>\r\n                        <!-- Right side -->\r\n                        <div class="level-right">\r\n                            <p class="level-item"><a class="button is-dark is-medium" routerLink="nuevo" *ngIf="ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nuevo ajuste mas</span></a></p>\r\n                            <p class="level-item"><a class="button is-primary is-medium" routerLink="nuevo" *ngIf="!ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nuevo ajuste mas</span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" (click)="ctrl.busquedaActivada=false;searchBox.value=\'\'; ctrl.resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Actualizar" (click)="ctrl.listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="PDF" (click)="dato = ctrl.dato; imprimir()"><span class="icon "><i class="fa fa-file-pdf-o"></i></span></a></p>\r\n\r\n                            <p class="level-item"><a class="button  is-dark" *ngIf="ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item"><a class="button  is-primary" *ngIf="!ctrl.busquedaActivada" title="Excel" (click)="export_excel()"><span class="icon "><i class="fa fa-file-excel-o"></i></span></a></p>\r\n                            <p class="level-item">&nbsp;</p>\r\n                        </div>\r\n                    </nav> \r\n                    <div class="container is-fluid" id="titulo">\r\n                        <span></span>\r\n                        <div class="is-hidden-desktop">\r\n                            <h1 class="title" *ngIf="!ctrl.busquedaActivada">\r\n                                <span class="icon is-medium"><i class="fa fa-user"></i></span> Ajuste más de inventario\r\n                            </h1>\r\n                        </div>\r\n                        <h1 class="title" *ngIf="ctrl.busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda\r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                            <p class="control is-expanded">\r\n                                <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="ctrl.buscar(searchBox.value)">\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            \r\n            <div class="is-fullwidth has-text-centered" *ngIf="ctrl.cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n            <span id="exportable" style="overflow: scroll; overflow-x: hidden; height: 530px;">\r\n            <table class="table" *ngIf="!ctrl.cargando " >\r\n                <thead>\r\n                    <tr>\r\n                        <th style=" text-align: center;"><abbr title="Folio">Fecha</abbr></th>\r\n                        <th style=" text-align: center;"><abbr title="Folio">Folio</abbr></th>\r\n                        <th><abbr title="Número de claves">Claves</abbr></th>\r\n                        <th>Capturó</th>\r\n                        <th style=" text-align: center;">Capturado</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!ctrl.busquedaActivada && ctrl.dato;">\r\n                    <tr *ngFor="let item of ctrl.dato; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-mas-inventario/ver/{{item.id}}">{{ item.fecha_movimiento }}</a></th>\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-mas-inventario/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td ><a routerLink="/inventario/ajuste-mas-inventario/ver/{{item.id}}"> <p> Claves: {{item.numero_claves}}</p> </a> </td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/inventario/ajuste-mas-inventario/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>                        \r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-mas-inventario/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                    </tr>\r\n                    <tr *ngIf="ctrl.dato.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>\r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="ctrl.busquedaActivada && ctrl.dato">\r\n                    <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-mas-inventario/ver/{{item.id}}">{{ item.fecha_movimiento }}</a></th>\r\n                        <th style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-mas-inventario/ver/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td ><a routerLink="/inventario/ajuste-mas-inventario/ver/{{item.id}}"> <p> Claves: {{item.numero_claves}}</p> </a> </td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/inventario/ajuste-mas-inventario/ver/{{item.id}}">{{ item.movimiento_usuario.nombre }} {{ item.movimiento_usuario.apellidos }} </a></td>                        \r\n                        <td style="vertical-align: middle; text-align: center;"><a routerLink="/inventario/ajuste-mas-inventario/ver/{{item.id}}">{{ item.created_at | date:\'medium\'}} </a></td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            </span>\r\n            <div *ngIf="!ctrl.dato" style="height:130px;"></div>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion [total]="ctrl.total" [paginasTotales]="ctrl.paginasTotales" [resultadosPorPagina]="ctrl.resultadosPorPagina"\r\n                [paginaActual]="ctrl.paginaActual" [indicePaginas]="ctrl.indicePaginas" (onSiguiente)="ctrl.paginaSiguiente()"\r\n                (onAnterior)="ctrl.paginaAnterior()" (onListar)="ctrl.listar($event)" *ngIf="ctrl.total>0 && ctrl.total > ctrl.resultadosPorPagina && !ctrl.busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion [total]="ctrl.totalBusqueda" [paginasTotales]="ctrl.paginasTotalesBusqueda" [resultadosPorPagina]="ctrl.resultadosPorPaginaBusqueda"\r\n                [paginaActual]="ctrl.paginaActualBusqueda" [indicePaginas]="ctrl.indicePaginasBusqueda" (onSiguiente)="ctrl.paginaSiguienteBusqueda(searchBox.value)"\r\n                (onAnterior)="ctrl.paginaAnteriorBusqueda(searchBox.value)" (onListar)="ctrl.listarBusqueda(searchBox.value,$event)"\r\n                *ngIf="ctrl.totalBusqueda > 0 && ctrl.totalBusqueda > ctrl.resultadosPorPaginaBusqueda && ctrl.busquedaActivada"></paginacion>\r\n\r\n\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>'},tYbh:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"td.causes{background-color:#cdff8c}td.no-causes{background-color:#ffa838}td.material-curacion{background-color:#ffff7c}.borrador{color:#aaa}.farmacia{color:#a8c0ff}.sin-surtir{color:#ddd}.surtiendo{color:#3273dc}.surtido{color:#4aba53}.expirado{color:#e8dd14}.cancelado{color:red}",""]),t.exports=t.exports.toString()},td4t:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("9BlR"),s=a("FTUj"),o=a("D9tw"),c=a("2qAn");a.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},d=[{path:"administrador-central/claves-basicas",children:[{path:"",component:r.a,canActivate:[c.a],data:{key:"r1RX6Yq7fc4CRRI2OJXIPxeBLW3lFP59"}},{path:"nueva",component:s.a,canActivate:[c.a],data:{key:"N9tkWbLzXzdoAyBzcgLc85JPXqvRNvUh"}},{path:"editar/:id",component:s.a,canActivate:[c.a],data:{key:"ityO3IAU1jhIlXnr9WPhINvdr09pQJry"}}],canActivate:[o.a]}],u=function(){function t(){}return t}();u=l([a.i(n.NgModule)({imports:[i.b.forChild(d)],exports:[i.b]})],u)},tqIa:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("LLho"),o=a("BFvY"),c=a("Wkon"),l=a("e3sQ"),d=a("clZW"),u=a("oo7j"),p=a("WEl6"),m=a("COjq"),f=a("1Da8"),g=a("1ei5"),h=a("94wZ");a.d(e,"a",function(){return b});var v=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},b=function(){function t(){}return t}();b=v([a.i(n.NgModule)({imports:[i.CommonModule,d.a,c.a,l.a,s.a,r.ReactiveFormsModule],declarations:[u.a,f.a,g.a,h.a],providers:[o.a,p.a,m.a]})],b)},ttNP:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},uAtf:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={}}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t}();s=i([a.i(n.Component)({selector:"app-not-found",template:a("AXnp"),styles:[a("yDwp")]}),r("design:paramtypes",[])],s)},uOuQ:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{width:100%;text-align:center;display:block;font-size:.8em}",""]),t.exports=t.exports.toString()},ucBg:function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:20px">\r\n            <div class="top-bar is-primary" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } ">\r\n                <h1 class="title" *ngIf="!busquedaActivada">\r\n                    <span class="icon is-medium"><i class="fa fa-check-square"></i></span> Claves básicas\r\n                </h1>\r\n                <h1 class="title" *ngIf="busquedaActivada">\r\n                    <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                </h1>\r\n                <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                <div class="control is-grouped">\r\n                    <p class="control is-expanded">\r\n                        <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                    </p>\r\n                    <p class="control">\r\n                        <a class="button is-medium is-primary is-inverted " routerLink="/administrador-central/claves-basicas/nueva">\r\n                        <span class="icon"><i class="fa fa-plus"></i></span><span>Nueva</span>\r\n                        </a>\r\n                    </p>\r\n                </div>\r\n            </div> \r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th>Nombre</th>\r\n                    <th style="text-align:center; width:100px"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of lista; let i=index">                        \r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/claves-basicas/editar/{{item.id}}">{{ item.nombre }}</a></td>                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando" class="button is-inverted is-primary"(click)="mostrarUnidadesMedicas(item, i)" title="Ver unidades médicas asignadas"><span class="icon"><i class="fa fa-list-alt"></i></span></a>\r\n                            <a *ngIf="!item.cargando" class="button is-white" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                        </td>                        \r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <td style="vertical-align: middle;"><a routerLink="/administrador-central/claves-basicas/editar/{{item.id}}">{{ item.nombre }}</a></td>                        \r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando"  (click)="mostrarUnidadesMedicas(item, i)" title="Ver unidades médicas asignadas"><span class="icon"><i class="fa fa-list-alt"></i></span></a>\r\n                            <a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n<claves-basicas-lista-clues *ngIf="mostrarModalClues" [lista]="listaSeleccionada" (onCerrar)="mostrarModalClues = false"></claves-basicas-lista-clues>'},uiQp:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("9/My"),d=a("LLho"),u=a("Px6Q"),p=a("mjEJ"),m=a("BFvY"),f=a("KAs4"),g=a("K4kt"),h=a("CWbX"),v=a("oSQj");a.n(v);a.d(e,"a",function(){return y});var b=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},y=function(){function t(){}return t}();y=b([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,f.a,h.a,v.NguiAutoCompleteModule],declarations:[p.a],providers:[m.a,g.a]})],y)},ujnN:function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n     <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n   <div class="column" >\r\n        <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n            <br>\r\n            <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            <br>\r\n            <br>\r\n        </div>\r\n        <div class="contenedor-lista" *ngIf="!cargando">\r\n            <div class="top-bar is-primary" [ngClass]="{ \'is-danger\':  errores.items == \'required\' && lista.items.length == 0 }">\r\n                <h1 class="title" *ngIf="!busquedaActivada">\r\n                    <span class="icon is-medium"><i class="fa " [ngClass]="{\'fa-file\': !esEditar,  \'fa-pencil-square-o\': esEditar}"></i></span> {{ formularioTitulo }}\r\n                </h1>\r\n                <a class="button  is-primary"  style="position:absolute; top:1em; right:1em;" routerLink="/administrador-central/claves-basicas/"><span class="icon "><i class="fa fa-times"></i></span></a>\r\n                <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Nombre"  [ngClass]="{ \'is-danger\': errores.nombre != null}" [(ngModel)]="lista.nombre">\r\n                            <span class="help is-danger" *ngIf="errores.nombre == \'required\'">Este campo es requerido.</span>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-primary is-inverted is-medium" [ngClass]="{ \'is-disabled\': lista.items.length == 0 }" (click)="guardar()">\r\n                                <span class="icon"><i class="fa fa-save"></i></span><span>Guardar</span>\r\n                            </a>\r\n                        </p>\r\n                </div>\r\n            </div> \r\n\r\n            <div class="is-fullwidth has-text-centered" *ngIf="guardando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-spinner fa-spin"></i></span> &nbsp;<span>Guardando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n\r\n            \r\n\r\n            <table class="table is-unselectable" *ngIf="!cargando && !guardando" style="font-size: 0.8em;">\r\n                <thead>\r\n                    <tr  [ngClass]="{ \'is-dark\': lista.filtro.activo}">\r\n                        <th style="width:41px;vertical-align: middle;" class="has-text-centered" > Claves({{ lista.items.length | number }})</th>\r\n                        <th class="is-hidden-mobile" style="width:118px;">\r\n                        <p class="control is-expanded" >\r\n                            <input type="hidden" #searchBoxClavePrevia >                            \r\n                            <input class="input is-small" type="text" placeholder="Filtrar" #searchBoxClave id="search-box-clave" (keyup)="buscar($event,searchBoxClave,searchBoxClavePrevia,[{ input: searchBoxClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>\r\n                        <th class="is-hidden-tablet">\r\n                        <p class="control is-expanded">\r\n                            <input type="hidden" #searchBoxDescripcionClavePrevia >                            \r\n                            <input class="input is-small" type="text" placeholder="Clave o Genérico" #searchBoxDescripcionClave id="search-box-descripcion-clave-{{indexPedido}}" (keyup)="buscar($event,searchBoxDescripcionClave,searchBoxDescripcionClavePrevia,[{ input: searchBoxDescripcionClave, campos: [\'clave\',\'descripcion\']}])">\r\n                        </p>\r\n                        </th>  \r\n                        <th style="vertical-align: middle;" class="is-hidden-mobile "  >\r\n                            Descripcion                            \r\n                        </th>                  \r\n                        <td colspan="2"><a class="button  is-pulled-right" [ngClass]="{\'is-dark\': lista.filtro.activo, \'is-primary\': !lista.filtro.activo, \'is-inverted\': !lista.filtro.activo, \'is-danger\': errores.items == \'required\' && lista.items.length == 0 }" style="margin-top:-0.25em; font-weight:normal" title="Ctrl + espacio" (click)="toggleModalInsumos(); ">\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Agregar Clave</span>\r\n                            </a>\r\n                        </td>\r\n                    </tr>\r\n                </thead>\r\n                <tbody *ngIf="!lista.filtro.activo">\r\n                    <tr *ngIf="lista.paginacion.lista.length == 0"><td colspan="3">Lista vacía.</td></tr>\r\n                    <tr   *ngFor="let item of lista.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ i + 1 }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    <td colspan="2">\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <div style="line-height:1em;">\r\n                        <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="(item.es_causes && item.tipo == \'ME\')" class="tag is-success" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">CAUSES</span>\r\n                            <span *ngIf="(!item.es_causes && item.tipo == \'ME\')" class="tag is-danger" style="font-size: 0.7em !important;">NO CAUSES</span>\r\n                            <span *ngIf="item.tipo == \'MC\'" class="tag is-warning" style="font-size: 0.7em !important;">MATERIAL CURACIÓN</span>\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                        </div>\r\n                    </td>\r\n                    <td style="width:21px !important;"><a (click)="eliminarInsumo(item,i)"><span class="icon"><i class="fa fa-trash"></i></span></a></td>\r\n                    </tr>      \r\n                </tbody>\r\n                <tbody *ngIf="lista.filtro.activo">\r\n                    <tr  *ngFor="let item of lista.filtro.paginacion.lista; let i = index;">\r\n                    <td class="has-text-centered">{{ item.lote }}</td>\r\n                    <td class="has-text-centered is-hidden-mobile"><a (click)="mostrarFichaInformativa($event, item.clave)" style="cursor:help;">{{ item.clave }}</a></td>            \r\n                    \r\n                    <td colspan="2">\r\n                        <small class="is-hidden-tablet">{{ item.clave }} <br></small>\r\n                        <div style="line-height:1em;">\r\n                            <small>{{ item.descripcion }}</small>\r\n                        </div>\r\n                        <div style="padding: 0.5em 0 0.5em 0; ">\r\n                            <span *ngIf="item.es_cuadro_basico" class="tag is-light" [ngClass]="{\'is-dark\': item == insumoSeleccionado}" style="font-size: 0.7em !important;">Cuadro básico</span>\r\n                            <span *ngIf="(item.tipo == \'ME\' && item.informacion)">\r\n                                <span *ngIf="item.informacion.es_controlado" class="tag is-warning" style="font-size: 0.7em">Controlado</span>\r\n                                <span *ngIf="item.informacion.es_surfactante" class="tag is-warning" style="font-size: 0.7em">Surfactante</span>  \r\n                            </span>\r\n                        </div>\r\n                    </td>\r\n                    <td style="width:21px !important;"><a (click)="eliminarInsumo(item,i,true)"><span class="icon"><i class="fa fa-trash"></i></span></a></td>\r\n                    </tr>\r\n                </tbody>              \r\n            </table>\r\n            \r\n            <paginacion \r\n                    [total]="lista.items.length" \r\n                    [paginasTotales]="lista.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="lista.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="lista.paginacion.paginaActual" \r\n                    [indicePaginas]="lista.paginacion.indice"\r\n                    (onSiguiente)="lista.paginaSiguiente()" \r\n                    (onAnterior)="lista.paginaAnterior()" \r\n                    (onListar)="lista.listar($event)" \r\n                    *ngIf="lista.items.length > 0 && lista.items.length > lista.paginacion.resultadosPorPagina && !lista.filtro.activo"></paginacion>\r\n            \r\n            <paginacion \r\n                    [total]="lista.filtro.items.length" \r\n                    [paginasTotales]="lista.filtro.paginacion.totalPaginas" \r\n                    [resultadosPorPagina]="lista.filtro.paginacion.resultadosPorPagina" \r\n                    [paginaActual]="lista.filtro.paginacion.paginaActual" \r\n                    [indicePaginas]="lista.filtro.paginacion.indice"\r\n                    (onSiguiente)="lista.filtro.paginaSiguiente()" \r\n                    (onAnterior)="lista.filtro.paginaAnterior()" \r\n                    (onListar)="lista.filtro.listar($event)" \r\n                    *ngIf="lista.filtro.items.length > 0 && lista.filtro.items.length > lista.filtro.paginacion.resultadosPorPagina && lista.filtro.activo"></paginacion>\r\n            \r\n            <br>\r\n        </div>\r\n   </div>\r\n</div>\r\n\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <!--p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p-->\r\n</div>\r\n<buscar-insumos *ngIf="mostrarModalInsumos" (onCerrar)="mostrarModalInsumos = false" (onEnviar)="agregarItem($event)" [listaAgregados]="listaClaveAgregadas" [conPrecios]="false" [conCantidad]="false"  ></buscar-insumos>'},unxZ:function(t,e){t.exports='<formulario #ctrl URL="mis-servicios" titulo="Servicios / Configuración" [dato]="dato"></formulario>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <a class="button  is-primary" style="position:absolute;top: 6em;right: 3em;" (click)="ctrl.cargarDatos(); actualizarDatos(); ctrl.cargarCatalogo(\'tipos_servicios\', \'servicios\');" id="actualizar"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando" class="icon is-medium" ><i class="fa fa-refresh fa-spin"></i></span>                            \r\n                            <!-- --> Mis servicios\r\n                        </h1>\r\n                        <span style="text-align: right">Última actualización: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                            <strong *ngIf="actualizado" >{{actualizacion | date}}</strong> \r\n                            Por: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                            <strong *ngIf="actualizado">{{actualizacion_usuario}} </strong> \r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section">\r\n                <!-- formulario -->\r\n                <form name="dato" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar(false)">\r\n                    <div class="tabs is-boxed">\r\n                        <ul>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 2}">\r\n                                <a (click)="tab=2">\r\n                                    <span class="icon is-small"><i class="fa fa-home"></i></span>\r\n                                    <span>Tipos de servicios</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 2}">\r\n\r\n                        <div class="box" >\r\n                            <article class="media">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <div class="column is-5" style="float:left">\r\n                                            <nav class="panel">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="Movimientos" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.izquierda"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'izquierda\', ctrl.tipos_servicios)">\r\n                                                            <label for="Movimientos">\r\n                                                            Servicios disponibles\r\n                                                        </label>\r\n                                                        </div>\r\n                                                        <a id="catalogos" (click)="ctrl.cargarCatalogo(\'tipos_servicios\', \'servicios\'); "></a>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let val of ctrl.tipos_servicios; let i=index">          \r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{val.id}}" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.izquierda.indexOf(val) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'izquierda\', ctrl.tipos_servicios, val)">\r\n                                                            <label for="{{val.id}}">\r\n                                                                {{val.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                        <div class="column is-2" style="float:left" >\r\n                                            \r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.izquierda.length > 0}" \r\n                                                [disabled]="ctrl.izquierda.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'izquierda\', ctrl.dato.controls.clues_servicios.controls, ctrl.tipos_servicios, true)">></button>\r\n                                            </p>\r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.derecha.length > 0}" \r\n                                                [disabled]="ctrl.derecha.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'derecha\', ctrl.tipos_servicios, ctrl.dato.controls.clues_servicios.controls, false)"><</button>\r\n                                            </p>\r\n                                            \r\n                                        </div>                        \r\n                                        <div class="column is-5" style="float:left" >\r\n                                            <nav class="panel" formGroupName="clues_servicios">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="MisServicios" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.derecha"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'derecha\', ctrl.dato.controls.clues_servicios.controls)">\r\n                                                            <label for="MisServicios">\r\n                                                            Mis servicios\r\n                                                        </label>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let item of ctrl.dato.controls.clues_servicios.controls; let i2=index">          \r\n                                                    <div class="field" [formGroupName]="i2">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{item.value.id}}" class="styled" type="checkbox"\r\n                                                            [checked]="ctrl.derecha.indexOf(item) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'derecha\', ctrl.dato.controls.clues_servicios.controls, item)">\r\n                                                            <label for="{{item.value.id}}">\r\n                                                                {{item.value.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n                    <a (click)="ctrl.initMover(ctrl.dato.controls.clues_servicios.controls, ctrl.tipos_servicios); " id="initMover"></a>\r\n                    <br><br>\r\n                    <div class="control is-grouped" style="float:left; padding:10px;">\r\n                        <p class="control">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                        </p>\r\n                        <p class="control" *ngIf="ctrl.id">\r\n                            <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </form>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},usYT:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},uxEG:function(t,e,a){"use strict";var n=a("5Rc+"),i=a("bm2B");a.d(e,"a",function(){return r});var r=(function(){function t(){}t}(),function(){function t(e){void 0===e&&(e=!1),this.lista=[],this.lista_inventario=[],this.lista_completa=[],this.solo_inventario=!1,this.totalInsumos=0,this.totalMonto=0,this.totalMontoCauses=0,this.totalMontoNoCauses=0,this.totalMontoMaterialCuracion=0,this.paginacion=new n.a,this.activo=!1,this.cargando=!1,this.tieneError=function(t,e){return this.datos.get(t).hasError(e)&&this.datos.get(t).touched},this.inicializarDatos=function(t){void 0===t&&(t={});var e="";t.almacen_id&&(e=t.almacen_id),this.datos.setValue({almacen_id:e,descripcion:"",observaciones:""})},this.obtenerDatosGuardar=function(){return{datos:this.datos.value,insumos:this.lista}},this.actualizarTotales=function(t){void 0===t&&(t=!1);var e;e=this.padre?this.padre:this,e.totalInsumos=0,e.totalMonto=0,e.totalMontoCauses=0,e.totalMontoNoCauses=0,e.totalMontoMaterialCuracion=0;var a=0,n=0,i=1;for(var r in e.lista)t&&(e.lista[r].lote=i++),e.totalInsumos+=+e.lista[r].cantidad,e.lista[r].monto&&(e.totalMonto+=e.lista[r].monto,"ME"==e.lista[r].tipo?e.lista[r].es_causes?e.totalMontoCauses+=e.lista[r].monto:e.totalMontoNoCauses+=e.lista[r].monto:"MC"==e.lista[r].tipo&&(e.totalMontoMaterialCuracion+=e.lista[r].monto,a+=e.lista[r].monto));a>0&&(n=16*a/100,e.totalMontoMaterialCuracion+=n,e.totalMonto+=n)},this.indexar=function(t){void 0===t&&(t=!0),t&&this.actualizarTotales(t),this.paginacion.totalPaginas=Math.ceil(this.lista.length/this.paginacion.resultadosPorPagina),this.paginacion.indice=[];for(var e=0;e<this.paginacion.totalPaginas;e++)this.paginacion.indice.push(e+1)},this.listar=function(t){void 0===t&&(t=1),this.paginacion.paginaActual=t;var e=(this.paginacion.paginaActual-1)*this.paginacion.resultadosPorPagina,a=e+this.paginacion.resultadosPorPagina;try{this.paginacion.lista=this.lista.slice(e,a)}catch(t){this.paginacion.lista=[]}},this.eliminarItem=function(t,e){var a=0;for(var n in this.lista){if(this.lista[n]===t){this.paginacion.lista.splice(e,1),this.lista.splice(a,1),this.indexar();var i=a+(this.paginacion.resultadosPorPagina-e)-1;if(this.lista[i]&&this.paginacion.lista.push(this.lista[i]),0==this.paginacion.lista.length&&(this.paginacion.paginaActual>1?this.listar(this.paginacion.paginaActual-1):this.listar(1)),this.padre){var r=this.padre.lista.indexOf(t),s=Math.ceil(r/this.padre.paginacion.resultadosPorPagina),o=(s-1)*this.padre.paginacion.resultadosPorPagina,c=r-o;if(this.padre.paginacion.paginaActual==s)this.padre.eliminarItem(t,c);else{var l=this.padre.paginacion.paginaActual;this.padre.listar(s),this.padre.eliminarItem(t,c),this.padre.listar(l),0==this.padre.paginacion.lista.length&&(this.padre.paginacion.paginaActual>1?this.padre.listar(this.padre.paginacion.paginaActual-1):this.padre.listar(1))}}return}a++}},e&&(this.filtro=new t,this.filtro.padre=this,this.fb=new i.FormBuilder,this.datos=this.fb.group({almacen_id:["",[i.Validators.required]],descripcion:["",[i.Validators.required]],observaciones:""})),this.paginacion.resultadosPorPagina=10}return t.prototype.paginaSiguiente=function(){this.paginacion.paginaActual!=this.paginacion.totalPaginas&&this.listar(this.paginacion.paginaActual+1)},t.prototype.paginaAnterior=function(){1!=this.paginacion.paginaActual&&this.listar(this.paginacion.paginaActual-1)},t}())},vKfx:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("LLho"),d=a("7YyF"),u=a("F1l5"),p=a("Bm+q"),m=a("g4Pp"),f=a("Wlje"),g=a("aSkF"),h=a("slEG"),v=a("mkhf"),b=a("Vbn5"),y=a("O/sS"),_=a("B5dx"),x=a("sB99"),j=a("FUGJ"),P=a("I1BN");a.d(e,"a",function(){return E});var I=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},E=function(){function t(){}return t}();E=I([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,s.a,o.a,c.a,l.a,d.a,p.a,u.a],declarations:[m.a,f.a,g.a,_.a,x.a,j.a,P.a],providers:[h.a,v.a,b.a,y.a]})],E)},vYpN:function(t,e){t.exports='<section class="hero is-primary" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/avances" routerLinkActive="active">\r\n                     <span class="icon">\r\n                        <i class="fa fa-bar-chart"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;Avances </h1> \r\n                    </a>\r\n                </div>\r\n                <a class="nav-item is-hidden-tablet" (click)="toggleMenuAside()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-navicon"></i>\r\n                    </span>\r\n                </a>\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},vbuU:function(t,e){t.exports='<administrador-central-menu></administrador-central-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-narrow is-hidden-mobile">\r\n        <administrador-central-menu-lateral></administrador-central-menu-lateral>\r\n    </div>\r\n    <div class="column">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden; margin:20px">\r\n            <div class="top-bar is-primary" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } ">\r\n                <h1 class="title" *ngIf="!busquedaActivada">\r\n                    <span class="icon is-medium"><i class="fa fa-hand-pointer-o"></i></span> Asignación de proveedores Pedidos Alt.\r\n                </h1>\r\n                <h1 class="title" *ngIf="busquedaActivada">\r\n                    <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                </h1>\r\n                <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>               \r\n                \r\n                <div class="control is-grouped">\r\n                    <p class="control is-expanded">\r\n                        <input class="input is-medium" type="text" placeholder="Buscar" #searchBox  id="search-box" (keyup)="buscar(searchBox.value)">\r\n                    </p>\r\n                </div>\r\n               \r\n            </div> \r\n            <br>\r\n            <div class="tabs  is-boxed is-centered" style="margin-bottom:0px;">\r\n                <ul>\r\n                  <li [ngClass]="{ \'is-active\': tab== 1 }"><a (click)="cambiarTab(1)"><span class="icon is-small"><i class="fa fa-inbox"></i></span> <span>Nuevos</span></a></li>\r\n                  <li [ngClass]="{ \'is-active\': tab== 2 }"><a (click)="cambiarTab(2)"><span class="icon is-small"><i class="fa fa-check-square-o"></i></span> <span>Asignados</span></a></li>\r\n                </ul>\r\n              </div>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" style="font-size:0.9em" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Folio</th>\r\n                        <th>Descripción</th>\r\n                        <th>Unidad Médica</th>\r\n                        <th>Fecha</th>\r\n                        <th>Claves</th>\r\n                        <th>Cantidad</th>\r\n                        <th>Monto</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of lista; let i=index">                         \r\n                        <!--<td style="vertical-align: middle;"><a routerLink="/administrador-central/claves-basicas/editar/{{item.id}}">{{ item.nombre }}</a></td>                        -->\r\n                        <th style="vertical-align: middle;"><a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}">\r\n                            {{ item.folio?item.folio:\'S/F\' }}</a>\r\n                        </th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}">{{ item.descripcion }}</a></td>                        \r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}">{{ item.unidad_medica }}</a></td>                        \r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" >{{ item.fecha | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias?item.expira_en_dias:\'hoy\'}})</span></a></td>\r\n                        <td style="text-align:center;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}"> \r\n                                {{ item.total_claves_solicitadas | number }}\r\n                            </a>\r\n                        </td>\r\n                        <td style="text-align:center;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}"> \r\n                                {{ item.total_cantidad_solicitada | number }}\r\n                            </a>\r\n                        </td>\r\n                        <td style="text-align:right;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}">\r\n                                ${{ item.total_monto_solicitado | number:\'1.2-2\' }}\r\n                            </a>\r\n                        </td>\r\n                        <!--\r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}"> \r\n                            {{ (item.total_claves_recibidas || 0) | number }} / {{ item.total_claves_solicitadas | number }} [{{(item.total_claves_recibidas/item.total_claves_solicitadas)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>-->\r\n                        <!--\r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}"> \r\n                            {{ (item.total_cantidad_recibida || 0) | number }} / {{ item.total_cantidad_solicitada | number }} [{{(item.total_cantidad_recibida/item.total_cantidad_solicitada)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>-->\r\n                        <!--<td style="vertical-align: middle;"><a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}">\r\n                            $ {{ (item.total_monto_recibido || 0) | number:\'1.2-2\' }} / $ {{ item.total_monto_solicitado | number:\'1.2-2\' }} [{{(item.total_monto_recibido/item.total_monto_solicitado)*100 | number:\'1.0-2\'}}%]\r\n                        </a></td>-->\r\n                        <!--\r\n                        <td style="vertical-align: middle;" class="has-text-centered">\r\n                            <span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span>\r\n                            <a *ngIf="!item.cargando && item.status == \'BR\'" class="status-rojo" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                            <a *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias >= 0" routerLink="/almacen/pedidos/recepcion/{{item.id}}" title="Recibir pedido"><span class="icon"><i class="fa fa-truck"></i></span></a>\r\n                            <span *ngIf="!item.cargando && item.status == \'PS\' && item.expira_en_dias < 0" class="tag is-danger" title="Expirado"><span class="icon"><i class="fa fa-exclamation"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'FI\'" class="estatus-verde" title="Finalizado"><span class="icon"><i class="fa fa-check-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX-CA\'" class="estatus-rojo" title="Expirado - Cancelado"><span class="icon"><i class="fa fa-times-circle"></i></span></span>\r\n                            <span *ngIf="!item.cargando && item.status == \'EX\'" class="estatus-amarillo" title="Expirado"><span class="icon"><i class="fa fa-exclamation-circle"></i></span></span>\r\n                        </td>-->\r\n                    </tr>\r\n                    <tr *ngIf="lista.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                        <th style="vertical-align: middle;"><a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}">\r\n                            {{ item.folio?item.folio:\'S/F\' }}</a>\r\n                        </th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}">{{ item.descripcion }}</a></td>                        \r\n                        <td style="vertical-align: middle;"><a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}">{{ item.unidad_medica }}</a></td>                        \r\n                        <td style="vertical-align: middle;"><a [ngClass]="{\'estatus-rojo\':(item.status == \'PS\' && item.expira_en_dias <= 0),\'estatus-amarillo\':(item.status == \'PS\' && (item.expira_en_dias > 0 && item.expira_en_dias <= 5))}" >{{ item.fecha | date:\'y-MM-dd\' }} <span *ngIf="item.status == \'PS\'">({{item.expira_en_dias?item.expira_en_dias:\'hoy\'}})</span></a></td>\r\n                        <td style="text-align:center;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}"> \r\n                                {{ item.total_claves_solicitadas | number }}\r\n                            </a>\r\n                        </td>\r\n                        <td style="text-align:center;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}"> \r\n                                {{ item.total_cantidad_solicitada | number }}\r\n                            </a>\r\n                        </td>\r\n                        <td style="text-align:right;vertical-align: middle;">\r\n                            <a routerLink="/administrador-central/asignacion-proveedores-pedidos-alternos/{{item.id}}">\r\n                                ${{ item.total_monto_solicitado | number:\'1.2-2\' }}\r\n                            </a>\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},vnfH:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("nKUZ"),s=a("K181"),o=a("D9tw");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"login",component:s.a},{path:"dashboard",component:r.a,canActivate:[o.a]}],d=function(){function t(){}return t}();d=c([a.i(n.NgModule)({imports:[i.b.forRoot(l)],exports:[i.b]})],d)},vpEl:function(t,e){t.exports='<section class="hero is-primary" style="position: fixed; width: 100%;top:0px; z-index:99">\r\n    <div class="hero-head">\r\n        <div class="container is-fluid">\r\n            <nav class="nav is-primary">\r\n                <div class="nav-left">\r\n                    <a class="nav-item is-brand" routerLink="/admision" routerLinkActive="active">\r\n                     <span class="icon">\r\n                        <i class="fa fa-user"></i>\r\n                    </span> \r\n                     <h1 class="title">&nbsp;Pacientes de <span style="font-size: 16pt"> ({{ DatoUnidad.unidades_medicas[0].clues }}) {{ DatoUnidad.unidades_medicas[0].nombre }}</span></h1> \r\n                    </a>\r\n                </div>\r\n                <a class="nav-item is-hidden-tablet" (click)="toggleMenuAside()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-navicon"></i>\r\n                    </span>\r\n                </a>\r\n                <a class="nav-item"  (click)="hub.toggle()">\r\n                    <span class="icon">\r\n                        <i class="fa fa-th"></i>\r\n                    </span>\r\n                </a>\r\n\r\n                <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                    &nbsp;\r\n                    <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n                </a>\r\n                <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n                    \r\n                    <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n                </a>\r\n               \r\n                \r\n            </nav>\r\n        </div>\r\n    </div>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>\r\n\r\n<div class="modal" [ngClass]="{\'is-active\': mostrarMenuAside}">\r\n  <div class="modal-background" (click)="toggleMenuAside()"></div>\r\n  <div class="modal-content">\r\n    <div class="card" style="width: 100%">\r\n        <div class="card-content">\r\n            <admision-menu-aside></admision-menu-aside>\r\n        </div>\r\n    </div>\r\n  </div>\r\n  <button class="modal-close" (click)="toggleMenuAside()"></button>\r\n</div>\r\n'},w0bh:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.buscar=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.buscar_detalle=function(t,e,a,n){return void 0===a&&(a=1),void 0===n&&(n=20),this.jwtRequest.get(l.URL_DETALLE,null,{identificador:t,q:e,page:a,per_page:n}).map(function(t){return t.json().data})},t.prototype.lista=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get(l.URL,null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.crear=function(t){return this.jwtRequest.post(l.URL,t).map(function(t){return t.json().data})},t.prototype.ver_tema=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return t.json().data})},t.prototype.editar=function(t,e){return this.jwtRequest.put(l.URL,t,e).map(function(t){return t.json().data})},t.prototype.lista_detalles=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL_DETALLE,null,{identificador:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.eliminar=function(t){return this.jwtRequest.delete(l.URL_DETALLE,t,{}).map(function(t){return t.json().data})},t.prototype.usuarios=function(t){return this.jwtRequest.get(l.URL_USUARIOS,null,{identificador:t}).map(function(t){return t.json().data})},t.prototype.crear_usuario=function(t){return this.jwtRequest.post(l.URL_USUARIOS,t).map(function(t){return t.json().data})},t.prototype.elimina_usuarios=function(t){return this.jwtRequest.delete(l.URL_USUARIOS,t,{}).map(function(t){return t.json().data})},t}();c.URL="avance",c.URL_DETALLE="avance-detalle",c.URL_USUARIOS="avance-usuario-privilegio",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},wQAS:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t}();s=i([a.i(n.Component)({selector:"app-root",template:a("efyd"),styles:[a("hxJY")]}),r("design:paramtypes",[])],s)},wVTU:function(t,e){t.exports='<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%; ">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero" [ngClass] = " {\'is-dark\': busquedaActivada, \'is-primary\': !busquedaActivada } " >\r\n                \r\n                <div class="hero-body" style="position:relative;">\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="busquedaActivada=false;searchBox.value=\'\';resultadosBusqueda=[]"><span class="icon "><i class="fa fa-close"></i></span></a>\r\n                    <a class="button  is-dark" *ngIf="busquedaActivada" style="position:absolute; top:1em; right:3.5em;" (click)="listarBusqueda(searchBox.value,1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <a class="button  is-primary" *ngIf="!busquedaActivada" style="position:absolute; top:1em; right:1em;" (click)="listar(1)"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        \r\n                        <h1 class="title" *ngIf="!busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-user"></i></span> Usuarios\r\n                        </h1>\r\n                        <h1 class="title" *ngIf="busquedaActivada">\r\n                            <span class="icon is-medium"><i class="fa fa-search"></i></span> Búsqueda \r\n                        </h1>\r\n                        <div class="control is-grouped">\r\n                        <p class="control is-expanded">\r\n                            <input class="input is-medium" type="text" placeholder="Buscar" #searchBox id="search-box" (keyup)="buscar(searchBox.value)">\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-medium is-primary is-inverted " routerLink="/panel-control/usuarios/nuevo">\r\n                            <span class="icon"><i class="fa fa-plus"></i></span><span>Nuevo</span>\r\n                            </a>\r\n                        </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="cargando">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n                <br>\r\n                <br>\r\n            </div>\r\n        \r\n            <table class="table" *ngIf="!cargando">\r\n                <thead>\r\n                    <tr>\r\n                    <th></th>\r\n                    <th><abbr title="Usuario ID">ID</abbr></th>\r\n                    <th>Nombre</th>\r\n                    <th>Servidor</th>\r\n                    <th style="text-align:center;">Opciones</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody  *ngIf="!busquedaActivada">\r\n                    <tr *ngFor="let item of usuarios; let i=index">\r\n                        <th><a routerLink="/panel-control/usuarios/editar/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                        <th style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                        <td style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.nombre }} {{ item.apellidos }}</a></td>\r\n                        <td style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.servidor_id }}</a></td>\r\n                        <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n                        \r\n                    </tr>\r\n                    <tr *ngIf="usuarios.length == 0">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n                <tbody *ngIf="busquedaActivada">\r\n                    <tr *ngFor="let item of resultadosBusqueda; let i=index">\r\n                    <th><a routerLink="/panel-control/usuarios/editar/{{item.id}}"><img style="min-width: 1.5em; width:2em;" src="assets/{{ item.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></a></th>\r\n                    <th style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.id }}</a></th>\r\n                    <td style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.nombre }} {{ item.apellidos }}</a></td>\r\n                    <td style="vertical-align: middle;"><a routerLink="/panel-control/usuarios/editar/{{item.id}}">{{ item.servidor_id }}</a></td>\r\n                    <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando" class="is-danger" (click)="eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>\r\n                    \r\n                    </tr>\r\n\r\n                    <tr *ngIf="resultadosBusqueda.length == 0 && busquedaActivada">\r\n                        <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>                    \r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <!-- Paginación para la lista  -->\r\n            <paginacion \r\n                [total]="total" \r\n                [paginasTotales]="paginasTotales" \r\n                [resultadosPorPagina]="resultadosPorPagina" \r\n                [paginaActual]="paginaActual" \r\n                [indicePaginas]="indicePaginas"\r\n                (onSiguiente)="paginaSiguiente()" \r\n                (onAnterior)="paginaAnterior()" \r\n                (onListar)="listar($event)" \r\n                *ngIf="total>0 && total > resultadosPorPagina && !busquedaActivada"></paginacion>\r\n            <!-- Paginación para la búsqueda  -->\r\n            <paginacion \r\n                [total]="totalBusqueda" \r\n                [paginasTotales]="paginasTotalesBusqueda" \r\n                [resultadosPorPagina]="resultadosPorPaginaBusqueda" \r\n                [paginaActual]="paginaActualBusqueda" \r\n                [indicePaginas]="indicePaginasBusqueda"\r\n                (onSiguiente)="paginaSiguienteBusqueda(searchBox.value)" \r\n                (onAnterior)="paginaAnteriorBusqueda(searchBox.value)" \r\n                (onListar)="listarBusqueda(searchBox.value,$event)" \r\n                *ngIf="totalBusqueda > 0 && totalBusqueda > resultadosPorPaginaBusqueda && busquedaActivada"></paginacion>\r\n           \r\n           \r\n            \r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n\r\n<div class="notification is-danger" style="position:fixed; left:1em;  bottom:1em;" *ngIf="mensajeError.mostrar">\r\n    <button class="delete" (click)="mensajeError.mostrar = false"></button>        \r\n    <b>Error:</b> {{ mensajeError.texto }}<br><br>\r\n    <p style="text-align:center" ><a  class="button is-danger is-inverted" (click)="ultimaPeticion(); mensajeError.mostrar = false"> <span class="icon"><i class="fa fa-refresh"></i></span> <span>Volver a intentar</span></a></p>        \r\n</div>\r\n\r\n<div class="notification is-success" style="position:fixed; left:1em;  bottom:1em; width: auto" *ngIf="mensajeExito.mostrar">       \r\n    <button class="delete" (click)="mensajeExito.mostrar = false"></button>\r\n    <p><span class="icon" style="margin-right: 0.5em;"><i class="fa fa-check-circle"></i></span> <span>{{ mensajeExito.texto }}</span></p>\r\n    <br>\r\n    <p style="text-align: center;"><small >Este mensaje desaparecerá en {{ mensajeExito.cuentaAtras }} segundos.</small></p>       \r\n</div>\r\n'},wW11:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("QTrI");a.d(e,"a",function(){return c});var s=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=l=function(){function t(t,e){this.http=t,this.jwtRequest=e}return t.prototype.lista=function(){return this.jwtRequest.get(l.URL).map(function(t){return t.json().data})},t.prototype.buscar=function(t,e,a){return void 0===e&&(e=1),void 0===a&&(a=20),this.jwtRequest.get(l.URL,null,{q:t,page:e,per_page:a}).map(function(t){return t.json().data})},t.prototype.listaPaginada=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=20),this.jwtRequest.get(l.URL,null,{page:t,per_page:e}).map(function(t){return t.json().data})},t.prototype.ver=function(t){return this.jwtRequest.get(l.URL,t,{}).map(function(t){return t.json().data})},t.prototype.crear=function(t){return this.jwtRequest.post(l.URL,t).map(function(t){return t.json().data})},t.prototype.editar=function(t,e){return this.jwtRequest.put(l.URL,t,e).map(function(t){return t.json().data})},t.prototype.eliminar=function(t){return this.jwtRequest.delete(l.URL,t).map(function(t){return t.json().data})},t}();c.URL="roles",c=l=s([a.i(n.Injectable)(),o("design:paramtypes",["function"==typeof(d=void 0!==i.Http&&i.Http)&&d||Object,"function"==typeof(u=void 0!==r.a&&r.a)&&u||Object])],c);var l,d,u},wnvH:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return r});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=function(){function t(){}return t.prototype.transform=function(t,e){if(t){var a=t.reduce(function(t,a){return t[a[e]]?t[a[e]].push(a):t[a[e]]=[a],t},{});return Object.keys(a).map(function(t){return{key:t,value:a[t]}})}return[]},t}();r=i([a.i(n.Pipe)({name:"groupBy"})],r)},wr2B:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".item{cursor:pointer}.item.seleccionado{background:#ccc}.item.seleccionado .icon{color:#fff!important}.item.seleccionado .item-detalle{display:inherit}.item .item-detalle{display:none}.item.asignado{background:#ddd;color:#777}tr.filtro td,tr.filtro th{color:#fff;background:#4a4a4a!important}.contenedor-tabla{overflow:auto;width:100%;height:99%!important;display:block;position:absolute;left:0;top:0}.contenedor-tabla table{border-radius:3px}@media screen and (max-width:768px){.contenedor-tabla{position:relative}.tile.notification{padding:0!important}}",""]),t.exports=t.exports.toString()},"x/l8":function(t,e){t.exports='<section  class="top-nav">\r\n            \r\n    <nav class="nav">\r\n        <a title="Inventario" class="nav-item pull-left nav-hub-active"  routerLink="/inventario">\r\n            \r\n            <img src="assets/icono-stock.svg" alt="icono">\r\n        \r\n        </a>\r\n        <div class="nav-left is-hidden-touch">\r\n            \r\n            <span *ngIf="!modulo" class="nav-item">\r\n                <h1 class="title">&nbsp;Inventario de insumos médicos</h1>\r\n            </span>\r\n            <a *ngIf="modulo" class="nav-item" routerLink="{{ url }}" >\r\n            \r\n            <!-- <img src="{{ icono }}" alt="icono">-->\r\n                <h1 class="title">&nbsp;{{ modulo }}</h1>                     \r\n            </a>\r\n        </div>\r\n\r\n        <div class="nav-center">\r\n            <span *ngIf="usuario.almacen_activo" class="nav-item is-small">\r\n                <span>{{usuario.clues_activa.clues}}&nbsp;-&nbsp;</span><span class="is-hidden-mobile">{{usuario.clues_activa.nombre}}&nbsp;-&nbsp;</span><span>{{usuario.almacen_activo.nombre}}</span>\r\n            </span>\r\n        </div>\r\n\r\n        <a class="nav-item"  (click)="hub.toggle()">\r\n            <span class="icon">\r\n                <i class="fa fa-th"></i>\r\n            </span>\r\n        </a>\r\n\r\n        <a class="nav-item is-hidden-mobile" (click)="perfil.toggle()">                    \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n            &nbsp;\r\n            <span>{{ usuario.nombre }} {{ usuario.apellidos }}</span>\r\n        </a>\r\n        <a class="nav-item is-hidden-tablet" (click)="perfil.toggle()">\r\n            \r\n            <figure class="image" style="width:26px;"><img src="assets/{{ usuario.avatar || \'avatar-unknow\' }}.svg" alt="avatar"></figure>\r\n        </a>\r\n        \r\n        \r\n    </nav>\r\n</section>\r\n\r\n<app-hub #hub></app-hub>\r\n<app-perfil #perfil></app-perfil>'},"xI+Z":function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".estatus-rojo{color:red}.estatus-amarillo{color:orange}",""]),t.exports=t.exports.toString()},xNA3:function(t,e){t.exports='<formulario #ctrl URL="ajuste-mas-inventario" titulo="Ajuste más de inventario" [dato]="dato"></formulario>\r\n<app-menu-inventario [modulo]="\'Ajuste más de inventario\'" [icono]="\'assets/icono-stock.svg\'" [url]="\'/inventario/ajuste-mas-inventario\'"></app-menu-inventario>\r\n<div style="height:50px;"></div>\r\n<form name="form" novalidate [formGroup]="dato">\r\n    <div class="contenedor columns " style="height:100%">\r\n        <!-- apartado de insumos -->\r\n        <div class="column is-one-third" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <h1 *ngIf="!tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> {{ctrl.moduloTitulo}}\r\n                    </h1>\r\n                    <h1 *ngIf="tieneid" class="title" style="margin:0.5em; ">\r\n                        <span class="icon is-medium">\r\n                            <i class="fa fa-file-text"></i>\r\n                        </span> Folio {{ctrl.id}}\r\n                    </h1>\r\n                </section>\r\n                <div style="padding: 1em;">\r\n                    <h3 class="title">\r\n                        <i class="fa fa-file"></i>\r\n                         Datos del ajuste\r\n                    </h3>\r\n                    <div>\r\n                        <div class="field">\r\n                            <label class="label">Observaciones:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <textarea class="textarea" type="text" [ngClass]="{\'is-disabled\': tieneid, \'is-danger\': ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched}"\r\n                                    placeholder="Observaciones" formControlName="observaciones"></textarea>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'observaciones\').hasError(\'required\') && ctrl.dato.get(\'observaciones\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- apartado de insumos -->\r\n        <div class="column" style="padding:1em;">\r\n            <div style="background: #FFF; border-radius: 1em; ">\r\n                <section class="hero is-primary">\r\n                    <div class="hero-body">\r\n                        <nav class="level">\r\n                            <div class="level-left"></div>\r\n                            <!-- Right side -->\r\n                            <div class="level-right">\r\n                                <p class="level-item"><a class="button is-primary" (click)="ctrl.regresar()">Regresar</a></p>\r\n                                <p class="level-item" *ngIf="tieneid"><a class="button is-primary" routerLink="/inventario/ajuste-mas-inventario/nuevo" *ngIf="!ctrl.busquedaActivada"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp;<span>Nuevo ajuste más</span></a></p>\r\n                                <p class="level-item" *ngIf="tieneid"><a *ngIf="tieneid" class="button is-primary" (click)="array_servicios = ctrl.servicios; array_turnos = ctrl.turnos; imprimir();"><span class="icon"><i class="fa fa-print"></i></span></a></p>\r\n                                <p class="level-item" *ngIf="!tieneid">\r\n                                        <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="guardar_movimiento()" [disabled]="ctrl.dato.invalid"> <span class="icon"><i class="fa fa-floppy-o" aria-hidden="true"></i></span> &nbsp; Guardar</button>\r\n                                </p>\r\n                                <p class="level-item"><a class="button is-primary" title="Actualizar" (click)="ctrl.cargarDatos();"><span class="icon "><i class="fa fa-refresh"></i></span></a></p>\r\n                                <p class="level-item">&nbsp;</p>\r\n                            </div>\r\n                        </nav>\r\n                        \r\n                        <div class="container is-fluid">\r\n                            <h1 class="title">\r\n                                <span *ngIf="!ctrl.cargando || !cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                                <span *ngIf="ctrl.cargando || cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                                Insumos\r\n                            </h1>\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                    <br>\r\n                    <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span>                    &nbsp;<span>Cargando...</span></span>\r\n                </div>\r\n                <section class="section">\r\n                    <div class="field has-addons has-addons-centered" *ngIf="!tieneid">\r\n                        <p class="control">\r\n                            <input ngui-auto-complete [source]="insumos_term" [list-formatter]="autocompleListFormatter" id="buscarInsumo" value-property-name="clave"\r\n                                display-property-name="descripcion" path-to-data="" loading-text="Cargando..." no-match-found-text="No hay resultados."\r\n                                (valueChanged)="select_insumo_autocomplete($event)" min-chars="1" class="input is-success is-medium"\r\n                                type="text" placeholder="Escanea el codigo de barra, o empieza escribir el nombre del producto" >\r\n                        </p>\r\n                        <hr>\r\n                    </div>\r\n\r\n                    <div style="height:20px;"></div>\r\n\r\n                    <div formArrayName="insumos" style="overflow: scroll; overflow-x: hidden; height: 530px;">\r\n                        <div class="box" *ngFor="let item of ctrl.dato.controls.insumos.controls; let i=index" [ngStyle]="{\'background\': i%2 == 0 ? \'rgba(120, 162, 51, 0.16)\' : \'rgba(206, 249, 197, 0.44)\'}">\r\n                            <article class="media" [formGroupName]="i">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <a *ngIf="!tieneid" class="is-danger" title="Quitar este elemento de la lista" style="float:right" (click)="ctrl.quitar_form_array(ctrl.dato.controls.insumos,i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                        <p>\r\n                                            <strong *ngIf="!tieneid">\r\n                                                <a (click)="select_insumo_autocomplete(item.value)"> \r\n                                                    <span style="color:cornflowerblue"> Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }}\r\n                                                    </span>\r\n                                                    <span style="color:black"> Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}} </span>\r\n                                                \r\n                                                    <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 1"><strong>Cause </strong></label>\r\n                                                    <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 0"><strong>No Cause </strong> </label>                                           \r\n                                                                                                \r\n                                                    <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value == 1\r\n                                                    "><strong>Unidosis</strong> </label>\r\n                                                </a>\r\n                                            </strong>\r\n                                            <strong *ngIf="tieneid">\r\n                                                <span style="color:cornflowerblue"> Clave: {{ ctrl.dato.controls.insumos.controls[i].controls.clave.value }}\r\n                                                </span>\r\n                                                <span style="color:black"> Nombre: {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}} </span>\r\n                                            \r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 1"><strong>Cause </strong></label>\r\n                                                <label class="tag is-success" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_causes.value == 0"><strong>No Cause </strong> </label>                                           \r\n                                                                                            \r\n                                                <label class="tag is-warning" *ngIf="ctrl.dato.controls.insumos.controls[i].controls.es_unidosis.value == 1\r\n                                                "><strong>Unidosis</strong> </label>\r\n                                            </strong>\r\n                                            <br> {{ctrl.dato.controls.insumos.controls[i].controls.descripcion.value}}\r\n                                        </p>\r\n                                        <a class="is-danger" title="Ver la lista de lotes de este articulo" style="float:right" (click)="ver_lotes_asignados(i)"> \r\n                                        </a>\r\n                                    </div>\r\n                                    <section>\r\n                                        <table class="table is-narrow is-bordered is-striped">\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Lote</th>\r\n                                                    <th>Caducidad</th>\r\n                                                    <th>Codigo de barras</th>\r\n                                                    <th *ngIf=\'!tieneid\'>Existencia</th>\r\n                                                    <th *ngIf=\'tieneid\'>Existencia anterior</th>                                                \r\n                                                    <th>Nueva existencia</th>\r\n                                                    <th *ngIf="!tieneid"></th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody formArrayName="lotes">\r\n                                                <tr *ngFor="let val of ctrl.dato.controls.insumos.controls[i].controls.lotes.controls;  let i2 = index;">\r\n                                                    <td><span *ngIf="val.value.nuevo == 1" class="tag is-success is-small ">Nuevo</span> &nbsp; {{val.value.lote}}</td>\r\n                                                    <td>{{val.value.fecha_caducidad}}</td>\r\n                                                    <td>{{val.value.codigo_barras}}</td>\r\n                                                    <td *ngIf="!tieneid">{{val.value.existencia}}</td>\r\n                                                    <td *ngIf="tieneid">{{val.value.existencia_anterior}}</td>\r\n                                                    <td [formGroupName]="i2">\r\n                                                        <input *ngIf="!tieneid" class="input has-text-centered" (blur)="validar_cantidad_lote(i, val, i2, modo)" type="number" step="1"  min="{{val.value.existencia + 1}}"\r\n                                                            placeholder="Cantidad" formControlName="cantidad">\r\n                                                        <input *ngIf="tieneid" class="input has-text-centered" type="number" step="1"  min="{{val.value.existencia + 1}}"\r\n                                                            placeholder="Cantidad" formControlName="nueva_existencia" readonly>\r\n                                                    </td>\r\n                                                    <td *ngIf="!tieneid">\r\n                                                        <a class="is-danger" title="Quitar este lote" (click)="quitar_lote_insumo(i, val.value, i2)">\r\n                                                            <span class="icon">\r\n                                                                <i class="fa fa-trash-o"></i>\r\n                                                            </span>\r\n                                                        </a>\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </section>\r\n                                    <nav class="level is-mobile">\r\n                                        <div class="level-left">\r\n                                        </div>\r\n                                        <div class="level-right">\r\n                                            <a class="level-item" >\r\n                                                <div class="field">\r\n                                                    <label class="label" *ngIf="!tieneid">Total ({{ctrl.dato.controls.insumos.controls[i].controls.presentacion_nombre.value}}):</label>\r\n                                                    <p class="control is-expanded  has-icon has-icon-right">\r\n                                                        <input *ngIf="!tieneid" style="background:aliceblue" type="text" readonly class="input" formControlName="cantidad_surtida" [ngClass]="{\'is-danger\': ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.hasError(\'required\') && ctrl.dato.controls.insumos.controls[i].controls.cantidad_surtida.touched}">\r\n                                                    </p>\r\n                                                </div>\r\n                                            </a>\r\n                                        </div>\r\n                                    </nav>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n\r\n<div class="modal" id="verLotes">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card" style="width: 60%;">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title" id="tituloModal" style="width: 200px"> </p>\r\n            <button type="button" class="delete" (click)="cancelarModal(\'verLotes\'); modo = \'N\';"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="columns">\r\n                <div class="column is-two-thirds">\r\n                    <div class="columns">\r\n                        <div class="column is-4">\r\n                            <label class="label" style="font-size: large;float: left;margin-right: 6%;">Ajuste más: </label>\r\n                        </div>\r\n                        <label for="modo_n">\r\n                            <span class="tag is-large is-success">Normal</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                \r\n            </div>\r\n            <table class="table is-narrow is-bordered is-striped">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Lote</th>\r\n                        <th>Caducidad</th>\r\n                        <th>Codigo de barras</th>\r\n                        <th>Existencia</th>\r\n                        <th>Nueva existencia</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr *ngFor="let item of lotes_insumo;  let i = index;">\r\n                        <td *ngIf="!item.nuevo">{{item.lote}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Lote" [(ngModel)]="item.lote"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.fecha_caducidad}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="date" placeholder="Fecha de caducidad" [(ngModel)]="item.fecha_caducidad"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.codigo_barras}}</td>\r\n                        <td *ngIf="item.nuevo"><input class="input has-text-centered " type="text" placeholder="Codigo de barras" [(ngModel)]="item.codigo_barras"></td>\r\n                        <td *ngIf="!item.nuevo">{{item.existencia}}</td>\r\n                        <td *ngIf="item.nuevo "></td>\r\n                        <td>\r\n                            <input class="input has-text-centered" type="number" step="1" (keypress)="quitar_punto($event)"  (keyup)="comprobar_cant_lotes()"\r\n                            (change)="comprobar_cant_lotes()" min="{{item.existencia}}" placeholder="Nueva Existencia" [(ngModel)]="item.cantidad">\r\n                        </td>\r\n                        <td *ngIf="item.nuevo">\r\n                            <a class="delete" (click)=eliminarLote(i)></a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-dark" *ngIf="modo==\'N\'" (click)="agregarNuevoLote()">Agregar nuevo lote</a>                            \r\n            <a class="button is-success" [ngClass]="{\'is-disabled\':!sum_cant_lotes}" (click)="validarLotesInsumo()">Aceptar</a>\r\n            <a class="button" (click)="cancelarModal(\'verLotes\'); modo = \'N\';">Cancelar</a>\r\n            <div class="card-footer-item"></div>\r\n        </footer>\r\n        <simple-notifications [options]="options"></simple-notifications>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="negarExistencia">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\r\n            <button class="delete" (click)="cancelarModal(\'negarExistencia\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <h1>¿Esta seguro de negar la existencia del insumo?</h1>\r\n                <p>Ya no se podra cambiar la cantidad negada</p>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="agregarLoteIsumo()">Continuar</a>\r\n            <a class="button" (click)="cancelarModal(\'negarExistencia\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>\r\n\r\n<div class="modal" id="guardarMovimiento">\r\n    <div class="modal-background"></div>\r\n    <div class="modal-card">\r\n        <header class="modal-card-head">\r\n            <p class="modal-card-title"><i class="fa fa-warning"></i> Alerta</p>\r\n            <button class="delete" (click)="cancelarModal(\'guardarMovimiento\')"></button>\r\n        </header>\r\n        <section class="modal-card-body">\r\n            <div class="content">\r\n                <h1>¿Esta seguro de guardar el ajuste MÁS?</h1>\r\n                <p>Ya no se podrá realizar cambios</p>\r\n            </div>\r\n        </section>\r\n        <footer class="modal-card-foot">\r\n            <a class="button is-success" (click)="ctrl.enviar(); cancelarModal(\'guardarMovimiento\')">Continuar</a>\r\n            <a class="button" (click)="cancelarModal(\'guardarMovimiento\')">Cancelar</a>\r\n        </footer>\r\n    </div>\r\n</div>'},xWpI:function(t,e,a){"use strict";var n=a("/oeL"),i=a("fc+i"),r=a("bKpL"),s=(a.n(r),a("rlar")),o=(a.n(s),a("/zHi")),c=(a.n(o),a("S7im")),l=(a.n(c),a("azLz")),d=(a.n(l),a("MBEm")),u=(a.n(d),a("5v8a")),p=(a.n(u),a("Pic8")),m=(a.n(p),a("xpf9")),f=(a.n(m),a("Bbmo")),g=a("gHRf");a.d(e,"a",function(){return b});var h=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},b=function(){function t(t,e){this.title=t,this.apiService=e,this.tab=1,this.cargando=!1,this.mostrarModalClues=!1,this.listaSeleccionada=null,this.mensajeError=new g.a,this.mensajeExito=new g.a,this.lista=[],this.paginaActual=1,this.resultadosPorPagina=25,this.total=0,this.paginasTotales=0,this.indicePaginas=[],this.ultimoTerminoBuscado="",this.terminosBusqueda=new s.Subject,this.resultadosBusqueda=[],this.busquedaActivada=!1,this.paginaActualBusqueda=1,this.resultadosPorPaginaBusqueda=25,this.totalBusqueda=0,this.paginasTotalesBusqueda=0,this.indicePaginasBusqueda=[]}return t.prototype.ngOnInit=function(){var t=this;this.title.setTitle("Validación pedidos alternos / Administrador central"),this.listar(1),this.mensajeError=new g.a,this.mensajeExito=new g.a;var e=this,a=this.terminosBusqueda.debounceTime(300).distinctUntilChanged().switchMap(function(e){console.log("Cargando búsqueda."),t.busquedaActivada=""!=e,t.ultimoTerminoBuscado=e,t.paginaActualBusqueda=1,t.cargando=!0;var a={status:1==t.tab?"PV":"VAL",q:e,page:t.paginaActualBusqueda,per_page:t.resultadosPorPaginaBusqueda};return e?t.apiService.buscar(a):r.Observable.of({data:[]})}).catch(function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=function(){e.listarBusqueda(e.ultimoTerminoBuscado,e.paginaActualBusqueda)};try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}return a});a.subscribe(function(e){t.cargando=!1,t.resultadosBusqueda=e.data,t.totalBusqueda=0|e.total,t.paginasTotalesBusqueda=Math.ceil(t.totalBusqueda/t.resultadosPorPaginaBusqueda),t.indicePaginasBusqueda=[];for(var a=0;a<t.paginasTotalesBusqueda;a++)t.indicePaginasBusqueda.push(a+1);console.log("Búsqueda cargada.")})},t.prototype.buscar=function(t){this.terminosBusqueda.next(t)},t.prototype.listarBusqueda=function(t,e){var a=this;this.paginaActualBusqueda=e,console.log("Cargando búsqueda."),this.cargando=!0;var n={status:1==this.tab?"PV":"VAL",q:t,page:this.paginaActualBusqueda,per_page:this.resultadosPorPaginaBusqueda};this.apiService.buscar(n).subscribe(function(t){a.cargando=!1,a.resultadosBusqueda=t.data,a.totalBusqueda=0|t.total,a.paginasTotalesBusqueda=Math.ceil(a.totalBusqueda/a.resultadosPorPaginaBusqueda),a.indicePaginasBusqueda=[];for(var e=0;e<a.paginasTotalesBusqueda;e++)a.indicePaginasBusqueda.push(e+1);console.log("Búsqueda cargada.")},function(n){a.cargando=!1,a.mensajeError.mostrar=!0,a.ultimaPeticion=function(){this.listarBusqueda(t,e)};try{n.json();401==n.status&&(a.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(t){console.log("No se puede interpretar el error"),500==n.status?a.mensajeError.texto="500 (Error interno del servidor)":a.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.listar=function(t){var e=this;this.paginaActual=t,console.log("Cargando items."),this.cargando=!0;var a={status:1==this.tab?"PV":"VAL",page:t,per_page:this.resultadosPorPagina};this.apiService.listaPaginada(a).subscribe(function(t){e.cargando=!1,e.lista=t.data,console.log(e.lista),e.total=0|t.total,e.paginasTotales=Math.ceil(e.total/e.resultadosPorPagina),e.indicePaginas=[];for(var a=0;a<e.paginasTotales;a++)e.indicePaginas.push(a+1);console.log("Items cargados.")},function(t){e.cargando=!1,e.mensajeError.mostrar=!0,e.ultimaPeticion=e.listar;try{t.json();401==t.status&&(e.mensajeError.texto="No tiene permiso para hacer esta operación.")}catch(a){console.log("No se puede interpretar el error"),500==t.status?e.mensajeError.texto="500 (Error interno del servidor)":e.mensajeError.texto="No se puede interpretar el error. Por favor contacte con soporte técnico si esto vuelve a ocurrir."}})},t.prototype.cambiarTab=function(t){this.tab=t,this.busquedaActivada?this.listarBusqueda(this.searchBoxViewChildren.first.nativeElement.value,1):this.listar(1)},t.prototype.paginaSiguiente=function(){this.listar(this.paginaActual+1)},t.prototype.paginaAnterior=function(){this.listar(this.paginaActual-1)},t.prototype.paginaSiguienteBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda+1)},t.prototype.paginaAnteriorBusqueda=function(t){this.listarBusqueda(t,this.paginaActualBusqueda-1)},t}();h([a.i(n.ViewChildren)("searchBox"),v("design:type",Object)],b.prototype,"searchBoxViewChildren",void 0),b=h([a.i(n.Component)({selector:"validacion-pedidos-alternos-lista",template:a("WfBG"),styles:[a("yFS2")],providers:[f.a]}),v("design:paramtypes",["function"==typeof(y=void 0!==i.b&&i.b)&&y||Object,"function"==typeof(_=void 0!==f.a&&f.a)&&_||Object])],b);var y,_},xhHN:function(t,e){t.exports='<formulario #ctrl URL="mis-almacenes" titulo="Almacenes / Configuración" [dato]="dato"></formulario>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <a class="button  is-primary" style="position:absolute; top:10em; right:3em;" (click)="ctrl.cargarDatos(); "><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                            {{ctrl.moduloTitulo}} almacen\r\n                        </h1>\r\n\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section">\r\n                <!-- formulario -->\r\n                <form name="dato" novalidate [formGroup]="ctrl.dato" (ngSubmit)="ctrl.enviar()">\r\n                    <div class="tabs is-boxed">\r\n                        <ul>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 1}">\r\n                                <a (click)="tab=1">\r\n                                    <span class="icon is-small"><i class="fa fa-file"></i></span>\r\n                                    <span>Datos del almacén</span>\r\n                                </a>\r\n                            </li>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 2}">\r\n                                <a (click)="tab=2">\r\n                                    <span class="icon is-small"><i class="fa fa-home"></i></span>\r\n                                    <span>Tipos de movimientos</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 1}">\r\n\r\n                        <div class="field">\r\n                            <label class="label">ID:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'id\').hasError(\'required\') && ctrl.dato.get(\'id\').touched}"\r\n                                    placeholder="id" formControlName="id" [readonly]="tieneid">\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'id\').hasError(\'required\') && ctrl.dato.get(\'id\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'id\').hasError(\'required\') && ctrl.dato.get(\'id\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Nombre:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <input class="input" type="text" [ngClass]="{\'is-danger\': ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched}"\r\n                                    placeholder="nombre" formControlName="nombre">\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'nombre\').hasError(\'required\') && ctrl.dato.get(\'nombre\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Nivel de almacén:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <select class="select" formControlName="nivel_almacen" name="nivel_almacen"  [ngClass]="{\'is-warning\': nivel_almacen?.length ==0 }">\r\n                                    <option *ngFor="let item of niveles_almacen" value="{{item.id}}" >{{ item.nombre }}</option>\r\n                                </select>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'nivel_almacen\').hasError(\'required\') && ctrl.dato.get(\'nivel_almacen\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'nivel_almacen\').hasError(\'required\') && ctrl.dato.get(\'nivel_almacen\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class="field">\r\n                            <label class="label">Tipo de almacén:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <select class="select" formControlName="tipo_almacen" name="tipo_almacen" [ngClass]="{\'is-warning\': tipo_almacen?.length ==0 }">\r\n                                    <option *ngFor="let item of tipos_almacen" value="{{item.id}}" >{{ item.nombre }}</option>\r\n                                </select>\r\n                                <span class="icon is-small" *ngIf="ctrl.dato.get(\'tipo_almacen\').hasError(\'required\') && ctrl.dato.get(\'tipo_almacen\').touched">\r\n                                    <i class="fa fa-warning"></i>\r\n                                </span>\r\n                                <span class="help is-danger" *ngIf="ctrl.dato.get(\'tipo_almacen\').hasError(\'required\') && ctrl.dato.get(\'tipo_almacen\').touched">Este campo es requerido.</span>\r\n                            </p>\r\n                        </div>\r\n\r\n\r\n                        <div class="field">\r\n                            <label class="label" id="catalogos" (click)="ctrl.cargarCatalogo(\'proveedores\', \'proveedor\'); ctrl.cargarCatalogo(\'tipos_movimientos\', \'tipo-movimiento\'); ">Proveedor:</label>\r\n                            <p class="control is-expanded  has-icon has-icon-right">\r\n                                <select class="select" name="proveedor_id" formControlName="proveedor_id" [ngClass]="{\'is-warning\': proveedor_id?.length ==0 }">\r\n                                    <option *ngFor="let item of ctrl.proveedores" value="{{item.id}}" >{{ item.nombre }}</option>\r\n                                </select>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <br>\r\n                        <div class="control is-grouped">\r\n                            <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                <input type="checkbox" id="subrogado" class="styled" [checked]="ctrl.dato.get(\'subrogado\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'subrogado\').patchValue(ctrl.dato.get(\'subrogado\').value == \'1\' ? \'0\' : \'1\')">\r\n                                <label for="subrogado">  Es Subrogado?\r\n                                </label>\r\n                            </div>\r\n\r\n                            <div class="b-checkbox control is-expanded  has-icon has-icon-right">\r\n\r\n                                <input type="checkbox" id="unidosis" class="styled" [checked]="ctrl.dato.get(\'unidosis\').value == \'1\' ? true : false" (change)="ctrl.dato.get(\'unidosis\').patchValue(ctrl.dato.get(\'unidosis\').value == \'1\' ? \'0\' : \'1\')">\r\n                                <label for="unidosis">   Maneja unidosis?\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 2}">\r\n                        <!--\r\n                        <div formArrayName="almacen_tipos_movimientos">\r\n                            <div *ngFor="let item of ctrl.dato.controls.almacen_tipos_movimientos.controls; let i=index" class="column is-4" style="float:left">\r\n                                <nav class="panel" [formGroupName]="i">\r\n                                    <div class="panel-heading">\r\n                                        Tipo de movimiento {{i + 1}}\r\n                                        <a style="float:right" class="is-danger" (click)="ctrl.quitar_form_array(ctrl.dato.controls.almacen_tipos_movimientos, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a>\r\n                                    </div>\r\n                                    <label class="panel-block">                                                  \r\n                                        <select class="select" name="tipo_movimiento_id" formControlName="tipo_movimiento_id" [ngClass]="{\'is-warning\': tipo_movimiento_id?.length ==0 }">\r\n                                            <option *ngFor="let val of ctrl.tipos_movimientos" value="{{val.id}}" >{{ val.nombre }}</option>\r\n                                        </select>\r\n                                        <span class="help is-danger" *ngIf="!ctrl.dato.controls.almacen_tipos_movimientos.controls[i].controls.tipo_movimiento_id.valid">Este campo es requerido.</span>                                            \r\n                                    </label>\r\n                                </nav>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="block">\r\n                            <a class="button is-primary is-outlined is-fullwidth" (click)="ctrl.agregar_form_array(ctrl.dato.controls.almacen_tipos_movimientos.controls, form_almacen_tipos_movimientos)">\r\n                                <span class="icon">\r\n                                    <i class="fa fa-plus"> </i> \r\n                                </span> \r\n                                &nbsp; Agregar\r\n                            </a>\r\n                        </div>\r\n                        -->\r\n\r\n                        <div class="box" >\r\n                            <article class="media">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <div class="column is-5" style="float:left">\r\n                                            <nav class="panel">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="Movimientos" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.izquierda"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'izquierda\', ctrl.tipos_movimientos)">\r\n                                                            <label for="Movimientos">\r\n                                                            Movimientos disponibles\r\n                                                        </label>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let val of ctrl.tipos_movimientos; let i=index">          \r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{val.id}}" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.izquierda.indexOf(val) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'izquierda\', ctrl.tipos_movimientos, val)">\r\n                                                            <label for="{{val.id}}">\r\n                                                                {{val.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                        <div class="column is-2" style="float:left" >\r\n                                            \r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.izquierda.length > 0}" \r\n                                                [disabled]="ctrl.izquierda.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'izquierda\', ctrl.dato.controls.almacen_tipos_movimientos.controls, ctrl.tipos_movimientos, true)">></button>\r\n                                            </p>\r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.derecha.length > 0}" \r\n                                                [disabled]="ctrl.derecha.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'derecha\', ctrl.tipos_movimientos, ctrl.dato.controls.almacen_tipos_movimientos.controls, false)"><</button>\r\n                                            </p>\r\n                                            \r\n                                        </div>                        \r\n                                        <div class="column is-5" style="float:left" >\r\n                                            <nav class="panel" formGroupName="almacen_tipos_movimientos">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="MisMovimientos" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.derecha"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'derecha\', ctrl.dato.controls.almacen_tipos_movimientos.controls)">\r\n                                                            <label for="MisMovimientos">\r\n                                                            Mis movimientos\r\n                                                        </label>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let item of ctrl.dato.controls.almacen_tipos_movimientos.controls; let i2=index">          \r\n                                                    <div class="field" [formGroupName]="i2">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{item.value.id}}" class="styled" type="checkbox"\r\n                                                            [checked]="ctrl.derecha.indexOf(item) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'derecha\', ctrl.dato.controls.almacen_tipos_movimientos.controls, item)">\r\n                                                            <label for="{{item.value.id}}">\r\n                                                                {{item.value.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n                    <a (click)="ctrl.initMover(ctrl.dato.controls.almacen_tipos_movimientos.controls, ctrl.tipos_movimientos); " id="initMover"></a>\r\n                    <br><br>\r\n                    <div class="control is-grouped" style="float:left; padding:10px;">\r\n                        <p class="control">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                        </p>\r\n                        <p class="control" *ngIf="ctrl.id">\r\n                            <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </form>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},xrMq:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bbdN");a.n(i);a.d(e,"a",function(){return o});var r=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=function(){function t(t){this._ngZone=t,this.cargandoPdf=!1}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario")),this.pdfworker=new Worker("web-workers/farmacia/movimientos/lista-recetas.js");var t=this,e=this._ngZone;this.pdfworker.onmessage=function(a){e.run(function(){t.cargandoPdf=!1}),i.saveAs(t.base64ToBlob(a.data.base64,"application/pdf"),a.data.fileName)}},t.prototype.export_excel=function(){var t="<table><tr><th colspan='7'><h1>Salida por Receta</h1></th></tr><tr><th></th></tr><tr><th colspan='7'></th></tr></table>";t+=document.getElementById("exportable").innerHTML;var e=new Blob([t],{type:"text/comma-separated-values;charset=utf-8"});try{i.saveAs(e,"Listado_salida_por_receta.xls")}catch(t){console.log(t)}},t.prototype.imprimir=function(){try{this.cargandoPdf=!0;var t={lista:this.dato,usuario:this.usuario};this.pdfworker.postMessage(JSON.stringify(t))}catch(t){this.cargandoPdf=!1}},t.prototype.base64ToBlob=function(t,e){for(var a=atob(t),n=a.length,i=new ArrayBuffer(n),r=new Uint8Array(i),s=0;s<n;s++)r[s]=255&a.charCodeAt(s);return new Blob([i],{type:e})},t}();o=r([a.i(n.Component)({selector:"salidas-recetas-lista",template:a("SoTr")}),s("design:paramtypes",["function"==typeof(c=void 0!==n.NgZone&&n.NgZone)&&c||Object])],o);var c},y0OE:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},yDwp:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},yFS2:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333;position:relative}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-primary h1{color:#fff}.top-bar.is-danger{background:#ff3860;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.top-bar.is-dark h1{color:#fff}.estatus-rojo{color:red!important}.estatus-amarillo{color:orange!important}.estatus-verde{color:#23d160}.estatus-azul{color:#3273dc}.estatus-normal{color:#555}",""]),t.exports=t.exports.toString()},yLgj:function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("IdTZ"),s=a("OhEe"),o=a("D9tw"),c=a("2qAn");a.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},d=[{path:"administrador-central/asignacion-proveedores-pedidos-alternos",children:[{path:"",component:r.a,canActivate:[c.a],data:{key:"ICmOKw3HxhgRna4a78OP0QmKrIX0bNsp"}},{path:":id",component:s.a}],canActivate:[o.a]}],u=function(){function t(){}return t}();u=l([a.i(n.NgModule)({imports:[i.b.forChild(d)],exports:[i.b]})],u)},yVD9:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.onSiguiente=new n.EventEmitter,this.onAnterior=new n.EventEmitter,this.onListar=new n.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.siguiente=function(){console.log("siguiente"),this.onSiguiente.emit()},t.prototype.anterior=function(){console.log("anterior"),this.onAnterior.emit()},t.prototype.listar=function(t){void 0===t&&(t=1),console.log("listar:"+t),this.onListar.emit(t)},t}();i([a.i(n.Input)(),r("design:type",Number)],s.prototype,"total",void 0),i([a.i(n.Input)(),r("design:type",Number)],s.prototype,"paginasTotales",void 0),i([a.i(n.Input)(),r("design:type",Number)],s.prototype,"resultadosPorPagina",void 0),i([a.i(n.Input)(),r("design:type",Number)],s.prototype,"paginaActual",void 0),i([a.i(n.Input)(),r("design:type",Array)],s.prototype,"indicePaginas",void 0),i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onSiguiente",void 0),i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onAnterior",void 0),i([a.i(n.Output)(),r("design:type",Object)],s.prototype,"onListar",void 0),s=i([a.i(n.Component)({selector:"paginacion",template:a("G4Ik"),styles:[a("6K3r")]}),r("design:paramtypes",[])],s)},yk5R:function(t,e,a){"use strict";var n=a("/oeL"),i=a("bm2B"),r=a("fc+i"),s=a("BkNc"),o=a("K4kt"),c=a("hN3r");a.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,a,n,i){this.fb=t,this.crudService=e,this.route=a,this._sanitizer=n,this.notificacion=i,this.cargando=!1,this.tamano=0,this.tieneid=!1,this.foto=""}return t.prototype.ngOnInit=function(){JSON.parse(localStorage.getItem("usuario"));this.tamano=this.elementView.nativeElement.offsetHeight/2,this.dato=this.fb.group({json:[""],archivos:[""]})},t.prototype.abrirModal=function(t,e){this.foto=e,document.getElementById(t).classList.add("is-active")},t.prototype.cancelarModal=function(t){document.getElementById(t).classList.remove("is-active")},t}();l([a.i(n.ViewChild)("mainScreen"),d("design:type","function"==typeof(p=void 0!==n.ElementRef&&n.ElementRef)&&p||Object)],u.prototype,"elementView",void 0),u=l([a.i(n.Component)({selector:"sincronizar-recetas-cargar",template:a("l+VF"),styles:["ngui-auto-complete {z-index: 999999 !important}"]}),d("design:paramtypes",["function"==typeof(m=void 0!==i.FormBuilder&&i.FormBuilder)&&m||Object,"function"==typeof(f=void 0!==o.a&&o.a)&&f||Object,"function"==typeof(g=void 0!==s.c&&s.c)&&g||Object,"function"==typeof(h=void 0!==r.d&&r.d)&&h||Object,"function"==typeof(v=void 0!==c.b&&c.b)&&v||Object])],u);var p,m,f,g,h,v},"yrm+":function(t,e,a){"use strict";var n=a("/oeL"),i=a("BkNc"),r=a("PII2"),s=a("JaIW"),o=a("sjpP"),c=a("D9tw");a.d(e,"a",function(){return u});var l=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},d=[{path:"inventario/inicializacion-inventario",children:[{path:"",component:r.a},{path:"inicializar",component:s.a},{path:"ver/:id",component:o.a}],canActivate:[c.a]}],u=function(){function t(){}return t}();u=l([a.i(n.NgModule)({imports:[i.b.forChild(d)],exports:[i.b],providers:[]})],u)},zDUb:function(t,e,a){"use strict";var n=a("/oeL"),i=a("CPp0"),r=a("K4kt"),s=a("1Lkp"),o=a("HpF0");a.d(e,"a",function(){return d});var c=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,a,n){var i=this;this.http=t,this.crudService=e,this.graficasService=a,this.pedidosService=n,this.surtido=1,this.grafica=1,this.presupuesto={},this.datosGraficas={},this.claves_categorias={},this.claves_causes={},this.claves_no_causes={},this.claves_mc={},this.grafica_categorias=[],this.grafica_causes=[],this.grafica_no_causes=[],this.grafica_mc=[],this.MinDate=new Date,this.MaxDate=new Date,this.grafica_opciones={chart:{type:"column"},xAxis:{categories:this.grafica_categorias},yAxis:{min:0,title:{text:"Total claves"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}},title:{text:"Entrega por insumos"},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}}},series:[{name:"Causes",data:this.grafica_causes},{name:"No Causes",data:this.grafica_no_causes},{name:"Material Curación",data:this.grafica_mc}]},this.claves={chart:{type:"column"},xAxis:{categories:this.grafica_categorias},yAxis:{min:0,title:{text:"Total claves"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}},title:{text:"Entrega por claves"},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}}},series:[{name:"Causes",data:this.grafica_causes},{name:"No Causes",data:this.grafica_no_causes},{name:"Material Curación",data:this.grafica_mc}]},this.insumos={chart:{type:"column"},xAxis:{categories:["2017-04-10","2017-04-15","2017-04-20","2017-04-25","2017-04-28","2017-04-30","2017-04-30","2017-04-30"]},yAxis:{min:0,title:{text:"Total insumos"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}},title:{text:"Entrega por insumos"},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}}},series:[{name:"Causes",data:[5,3,4,7,2,7,2,7]},{name:"No Causes",data:[2,2,3,2,1,0,2,7]},{name:"Material Curación",data:[3,4,4,2,5,3,2,7]}]},this.monto={chart:{type:"column"},xAxis:{categories:["2017-04-10","2017-04-15","2017-04-20","2017-04-25","2017-04-28","2017-04-30","2017-04-30","2017-04-30"]},yAxis:{min:0,title:{text:"Total monto"},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:"gray"}}},title:{text:"Entrega por monto"},legend:{align:"right",x:-30,verticalAlign:"top",y:25,floating:!0,borderColor:"#CCC",borderWidth:1,shadow:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}}},series:[{name:"Causes",data:[5,3,4,7,2,7,2,7]},{name:"No Causes",data:[2,2,3,2,1,0,2,7]},{name:"Material Curación",data:[3,4,4,2,5,3,2,7]}]},t.get("https://cdn.rawgit.com/gevgeny/angular2-highcharts/99c6324d/examples/aapl.json").subscribe(function(t){i.datos={title:{text:"AAPL Stock Price"},series:[{name:"AAPL",data:t.json(),tooltip:{valueDecimals:2}}]}})}return t.prototype.ngOnInit=function(){var t=this;this.usuario=JSON.parse(localStorage.getItem("usuario"));var e=new Date;this.MinDate=new Date(e.getFullYear()-1,0,1),this.MaxDate=new Date(e.getFullYear(),e.getMonth(),e.getDate()),this.fecha_actual=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-"+e.getDate(),this.fecha_inicial_actual=e.getFullYear()+"-"+("00"+(e.getMonth()+1)).slice(-2)+"-01",this.pedidosService.presupuesto().subscribe(function(e){t.presupuesto=e.data},function(t){console.log(t)}),this.graficasService.listaDatos().subscribe(function(e){t.datosGraficas=e,console.log(t.datosGraficas),console.log(t.datosGraficas.data)},function(t){console.log(t)}),this.jsonPrueba={claves:[{fecha:"2017-04-10",causes:150,no_causes:200,mat_curacion:50,total:320},{fecha:"2017-04-11",causes:500,no_causes:300,mat_curacion:800,total:320},{fecha:"2017-04-12",causes:900,no_causes:500,mat_curacion:1300,total:320}]},console.log(this.jsonPrueba);var a;for(a=0;a<this.jsonPrueba.claves.length;a++)this.grafica_categorias.push(this.jsonPrueba.claves[a].fecha),this.grafica_causes.push(this.jsonPrueba.claves[a].causes),this.grafica_no_causes.push(this.jsonPrueba.claves[a].no_causes),this.grafica_mc.push(this.jsonPrueba.claves[a].mat_curacion)},t.prototype.cambiarSurtido=function(t){this.surtido=t},t.prototype.cambiarGrafica=function(t){this.grafica=t},t}();d=c([a.i(n.Component)({selector:"app-graficas",template:a("1u8X"),styles:[a("e5d4")]}),l("design:paramtypes",["function"==typeof(u=void 0!==i.Http&&i.Http)&&u||Object,"function"==typeof(p=void 0!==r.a&&r.a)&&p||Object,"function"==typeof(m=void 0!==o.a&&o.a)&&m||Object,"function"==typeof(f=void 0!==s.a&&s.a)&&f||Object])],d);var u,p,m,f},zKsg:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={},this.menu=[],this.menuAutorizado=[]}return t.prototype.ngOnInit=function(){this.menu=[{titulo:"Sincronización con servidor principal",modulos:[{permiso:"2EA8UKzKrNFzxQxBBSjQ2fHggyrScu9f",icono:"fa-cloud-upload",titulo:"Sincronización manual",url:"/panel-control/sync/manual"}]},{titulo:"Usuarios y privilegios",modulos:[{permiso:"mGKikN0aJaeF2XrHwwYK3XNw0f9CSZDe",icono:"fa-user",titulo:"Usuarios",url:"/panel-control/usuarios"},{permiso:"ICmOKw3HxhgRna4a78OP0QmKrIX0bNsp",icono:"fa-users",titulo:"Roles",url:"/panel-control/roles"},{permiso:"DYwQAxJbpHWw07zT09scEogUeFKFdGSu",icono:"fa-shield",titulo:"Permisos",url:"/panel-control/permisos"}]}],this.menuAutorizado=[{titulo:"Sincronización con servidor principal",modulos:[{icono:"fa-server",titulo:"Estatus de sincronización",url:"/panel-control/sync/estatus"}]}];var t=JSON.parse(localStorage.getItem("usuario")),e=t.permisos.split("|");if(e.length>0)for(var a in this.menu)for(var n in this.menu[a].modulos)t:for(var i in e)if(e[i]==this.menu[a].modulos[n].permiso){var r=this.initMenuAutorizadoPorItem(this.menu[a].titulo);r.modulos.push(this.menu[a].modulos[n]);break t}},t.prototype.initMenuAutorizadoPorItem=function(t){for(var e in this.menuAutorizado)if(t==this.menuAutorizado[e].titulo)return this.menuAutorizado[e];return this.menuAutorizado.push({titulo:t,modulos:[]}),this.menuAutorizado[this.menuAutorizado.length-1]},t}();s=i([a.i(n.Component)({selector:"admision-menu-aside",template:a("Ek+D"),styles:[a("ZrNI")]}),r("design:paramtypes",[])],s)},zbQH:function(t,e){t.exports='<formulario #ctrl URL="mis-turnos" titulo="Turnos / Configuración" [dato]="dato"></formulario>\r\n<panel-control-menu></panel-control-menu>\r\n<div style="height:50px;"></div>\r\n<div class="contenedor columns " style="height:100%">\r\n    <div class="column is-one-quarter is-hidden-mobile">\r\n        <panel-control-menu-aside></panel-control-menu-aside>\r\n    </div>\r\n    <div class="column" style="padding:2em;">\r\n        <div style="background: #FFF; border-radius: 1em; overflow: hidden;">\r\n            <section class="hero is-primary">\r\n                <div class="hero-body">\r\n                    <a class="button  is-primary" style="position:absolute;top: 6em;right: 3em;" (click)="ctrl.cargarDatos();" id="actualizar"><span class="icon "><i class="fa fa-refresh"></i></span></a>\r\n                    <div class="container is-fluid">\r\n                        <h1 class="title">\r\n                            <span *ngIf="!ctrl.cargando" class="icon is-medium"><i class="fa fa-edit"></i></span>\r\n                            <span *ngIf="ctrl.cargando" class="icon is-medium"><i class="fa fa-refresh fa-spin"></i></span>                            \r\n                            <!-- --> Mis turnos\r\n                        </h1>\r\n                        <span style="text-align: right">Última actualización: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                            <strong *ngIf="actualizado" >{{actualizacion | date}}</strong> \r\n                            Por: <span *ngIf="!actualizado" class="icon is-small"><i class="fa fa-refresh fa-spin"></i></span>\r\n                            <strong *ngIf="actualizado">{{actualizacion_usuario}} </strong> \r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n            <div class="is-fullwidth has-text-centered" *ngIf="!ctrl.datosCargados">\r\n                <br>\r\n                <span class="tag is-primary is-large "><span class="icon"><i class="fa fa-refresh fa-spin"></i></span> &nbsp;<span>Cargando...</span></span>\r\n            </div>\r\n            <section class="section">\r\n                <!-- formulario -->\r\n                <form name="dato" novalidate [formGroup]="dato" (ngSubmit)="ctrl.enviar(false)">\r\n                    <div class="tabs is-boxed">\r\n                        <ul>\r\n                            <li [ngClass]="{ \'is-active\' : tab == 2}">\r\n                                <a (click)="tab=2">\r\n                                    <span class="icon is-small"><i class="fa fa-home"></i></span>\r\n                                    <span>Tipos de turnos</span>\r\n                                </a>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                    <div [ngClass]="{ \'is-hidden\': tab != 2}">\r\n\r\n                        <div class="box" >\r\n                            <article class="media">\r\n                                <div class="media-content">\r\n                                    <div class="content">\r\n                                        <div class="column is-5" style="float:left">\r\n                                            <nav class="panel">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="Movimientos" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.izquierda"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'izquierda\', ctrl.tipos_turnos)">\r\n                                                            <label for="Movimientos">\r\n                                                            Turnos disponibles\r\n                                                        </label>\r\n                                                        </div>\r\n                                                        <a id="catalogos" (click)="ctrl.cargarCatalogo(\'tipos_turnos\', \'turnos\'); "></a>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let val of ctrl.tipos_turnos; let i=index">          \r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{val.id}}" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.izquierda.indexOf(val) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'izquierda\', ctrl.tipos_turnos, val)">\r\n                                                            <label for="{{val.id}}">\r\n                                                                {{val.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                        <div class="column is-2" style="float:left" >\r\n                                            \r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.izquierda.length > 0}" \r\n                                                [disabled]="ctrl.izquierda.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'izquierda\', ctrl.dato.controls.clues_turnos.controls, ctrl.tipos_turnos, true)">></button>\r\n                                            </p>\r\n                                            <p class="control">\r\n                                                <button class="button is-default" type="button" style="width:100%" \r\n                                                [ngClass]="{\'is-success\': ctrl.derecha.length > 0}" \r\n                                                [disabled]="ctrl.derecha.length <= 0"\r\n                                                (click)="ctrl.iniciarMover(\'derecha\', ctrl.tipos_turnos, ctrl.dato.controls.clues_turnos.controls, false)"><</button>\r\n                                            </p>\r\n                                            \r\n                                        </div>                        \r\n                                        <div class="column is-5" style="float:left" >\r\n                                            <nav class="panel" formGroupName="clues_turnos">\r\n                                                <div class="panel-heading">\r\n                                                    <div class="field">\r\n                                                        <div class="b-checkbox is-info">\r\n                                                            <input id="MisServicios" class="styled" type="checkbox" \r\n                                                            [checked]="ctrl.todosSeleccionados.derecha"\r\n                                                            (click)="ctrl.seleccionarTodosMover(\'derecha\', ctrl.dato.controls.clues_turnos.controls)">\r\n                                                            <label for="MisServicios">\r\n                                                            Mis turnos\r\n                                                        </label>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <label class="panel-block" *ngFor="let item of ctrl.dato.controls.clues_turnos.controls; let i2=index">          \r\n                                                    <div class="field" [formGroupName]="i2">\r\n                                                        <div class="b-checkbox">\r\n                                                            <input id="{{item.value.id}}" class="styled" type="checkbox"\r\n                                                            [checked]="ctrl.derecha.indexOf(item) > -1"\r\n                                                            (click)="ctrl.agregarMover(\'derecha\', ctrl.dato.controls.clues_turnos.controls, item)">\r\n                                                            <label for="{{item.value.id}}">\r\n                                                                {{item.value.nombre}} \r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </div>\r\n\r\n                                                </label>\r\n                                            </nav>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </article>\r\n                        </div>\r\n                    </div>\r\n                    <a (click)="ctrl.initMover(ctrl.dato.controls.clues_turnos.controls, ctrl.tipos_turnos); " id="initMover"></a>\r\n                    <br><br>\r\n                    <div class="control is-grouped" style="float:left; padding:10px;">\r\n                        <p class="control">\r\n                            <button class="button is-primary" type="submit" [ngClass]="{\'is-loading\': ctrl.cargando}" [disabled]="ctrl.dato.invalid">Guardar</button>\r\n                        </p>\r\n                        <p class="control" *ngIf="ctrl.id">\r\n                            <button class="button is-danger" type="button" [ngClass]="{\'is-loading\': ctrl.cargando}" (click)="ctrl.eliminar(ctrl.id)">Eliminar </button>\r\n                        </p>\r\n                        <p class="control">\r\n                            <a class="button is-white" (click)="ctrl.regresar()">Regresar</a>\r\n                        </p>\r\n                    </div>\r\n                    \r\n                </form>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n'},zcJe:function(t,e,a){"use strict";var n=a("/oeL"),i=a("qbdv"),r=a("bm2B"),s=a("oeHx"),o=a("G8gi"),c=a("f5Uh"),l=a("tDx+"),d=a("LLho"),u=a("Px6Q"),p=a("TeDg"),m=a("CODE"),f=a("BFvY"),g=a("mfFy"),h=a("ahZZ"),v=a("e3Yq"),b=a("K4kt"),y=a("CWbX");a.d(e,"a",function(){return x});var _=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},x=function(){function t(){}return t}();x=_([a.i(n.NgModule)({imports:[i.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.a,s.a,o.a,c.a,d.a,u.a,h.a,v.a,y.a,g.a],declarations:[p.a,m.a],providers:[f.a,b.a]})],x)},zhJr:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".top-bar{padding:1em;font-size:1.2em;background:#fff;color:#333}.contenedor-pedido.con-tabs .top-bar{padding:.5em}.top-bar.is-primary{background:#00d1b2;color:#fff}.top-bar.is-dark{background:#333;color:#fff}.contenedor-pedido{background:#fff;border-radius:1em;overflow:hidden}.contenedor-pedido.con-tabs{border-top-left-radius:0!important;border-top-right-radius:0!important}",""]),t.exports=t.exports.toString()},zpYk:function(t,e){t.exports="<p>\r\n  ver works!\r\n</p>\r\n"},zsqq:function(t,e,a){"use strict";var n=a("/oeL");a.d(e,"a",function(){return s});var i=this&&this.__decorate||function(t,e,a,n){var i,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,a,n);else for(var o=t.length-1;o>=0;o--)(i=t[o])&&(s=(r<3?i(s):r>3?i(e,a,s):i(e,a))||s);return r>3&&s&&Object.defineProperty(e,a,s),s},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.usuario={}}return t.prototype.ngOnInit=function(){this.usuario=JSON.parse(localStorage.getItem("usuario"))},t}();i([a.i(n.Input)(),r("design:type",String)],s.prototype,"modulo",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"icono",void 0),i([a.i(n.Input)(),r("design:type",String)],s.prototype,"url",void 0),s=i([a.i(n.Component)({selector:"menu-laboratorio",template:a("PkEX"),styles:[a("NDet")]}),r("design:paramtypes",[])],s)},zu5J:function(t,e,a){e=t.exports=a("rP7Y")(!1),e.push([t.i,".hub-item{width:100%;text-align:center;display:block;color:#fff!important;font-size:.8em}",""]),t.exports=t.exports.toString()},zxtY:function(t,e,a){"use strict";a.d(e,"a",function(){return n});var n=!1}},[0]);