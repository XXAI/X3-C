<!-- crud asignar url de la api URL="url de la api" titulo="un titulo para la pestaña de la pagina" [dato]="variable que contiene el formulario]-->
<listar #ctrl URL="entrada?tipos_movimientos_id=11" titulo="Entrada"></listar>

<!-- Menu principal "-->
<articulos-catalogo-menu></articulos-catalogo-menu>
<div style="height:50px;"></div>
<div class="contenedor columns " style="height:100%; ">
    <div class="column is-one-quarter is-hidden-mobile menu-izquierda">

        <!-- Menu izquierda del modulo enviroment" -->
        <panel-control-menu-aside></panel-control-menu-aside>
    </div>
    <div class="column" style="padding: 0em 2em 0em 0em">
        <div style="background: #FFF; border-radius: 1em; ">

            <!-- Opciones y busqueda -->
            <tabla-opciones [ctrl]="ctrl" [nombre]="'Entradas'"></tabla-opciones>                          

            <span style="overflow:auto; display:block" [style.maxHeight.px]="tamano-285">

                <!--Tabla -->
                <table class="table is-bordered is-striped is-narrow is-fullwidth" *ngIf=" !ctrl.cargando">
                    <thead>
                        <tr>
                            <th>
                                <abbr>ID</abbr>
                            </th>
                            <th>Almacen </th>
                            <th>Status </th>
                            <th>Fecha</th>
                            <th>Cancelado</th>
                        </tr>
                    </thead>

                    <tbody *ngIf="!ctrl.busquedaActivada">
                        <tr *ngFor="let item of ctrl.dato; let i=index">
                            <th style="vertical-align: middle;"><a routerLink="/almacen-articulos/entradas/editar/{{item.id}}">{{ item.id }}</a></th>
                            <td style="vertical-align: middle;"><a routerLink="/almacen-articulos/entradas/editar/{{item.id}}">{{ item.almacen ? item.almacen.nombre : 'NO TIENE' }} </a></td>
                            <td style="vertical-align: middle;"><a routerLink="/almacen-articulos/entradas/editar/{{item.id}}">{{ item.status }} </a></td>
                            <td style="vertical-align: middle;"><a routerLink="/almacen-articulos/entradas/editar/{{item.id}}">{{ item.fecha_movimiento }} </a></td>
                            <td style="vertical-align: middle;"><a routerLink="/almacen-articulos/entradas/editar/{{item.id}}">{{ item.cancelado == 1 ? 'Si'  : 'No' }} </a></td>
                            <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"
                                    class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>
    
                        </tr>
                        <tr *ngIf="ctrl.dato ">
                            <td colspan="5" style="vertical-align: middle; color:#888;">Esta lista está vacía.</td>
                        </tr>
                    </tbody>
                    <tbody *ngIf="ctrl.busquedaActivada">
                        <tr *ngFor="let item of ctrl.resultadosBusqueda; let i=index">
                            <th style="vertical-align: middle;"><a routerLink="/almacen-articulos/entradas/editar/{{item.id}}">{{ item.id }}</a></th>
                            <td style="vertical-align: middle;"><a routerLink="/almacen-articulos/entradas/editar/{{item.id}}">{{ item.almacen ? item.almacen.nombre : 'NO TIENE' }} </a></td>
                            <td style="vertical-align: middle;"><a routerLink="/almacen-articulos/entradas/editar/{{item.id}}">{{ item.status }} </a></td>
                            <td style="vertical-align: middle;"><a routerLink="/almacen-articulos/entradas/editar/{{item.id}}">{{ item.fecha_movimiento }} </a></td>
                            <td style="vertical-align: middle;"><a routerLink="/almacen-articulos/entradas/editar/{{item.id}}">{{ item.cancelado == 1 ? 'Si'  : 'No' }} </a></td>
                            <td style="vertical-align: middle;" class="has-text-centered"><span class="icon " *ngIf="item.cargando"><i class="fa fa-circle-o-notch fa-spin"></i></span><a *ngIf="!item.cargando"
                                    class="is-danger" (click)="ctrl.eliminar(item, i)"><span class="icon"><i class="fa fa-trash-o"></i></span></a></td>
    
                        </tr>
    
                        <tr *ngIf="ctrl.resultadosBusqueda.length == 0 && ctrl.busquedaActivada">
                            <td colspan="5" style="vertical-align: middle; color:#888;">No se encontraron resultados.</td>
                        </tr>
                    </tbody>

                </table>
            </span>
            <!-- Paginación para la lista  -->
            <paginacion [ctrl]="ctrl"></paginacion>
        </div>

    </div>
</div>
