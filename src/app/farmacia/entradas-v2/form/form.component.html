<form name="form" novalidate [formGroup]="entrada"  (ngSubmit)="enviar()">     
            
              <div class="control is-grouped">
                <p class="control is-expanded  has-icon has-icon-right">
                  <input class="input" autofocus type="text" [ngClass]="{'is-danger': entrada.get('nombre').hasError('required') && entrada.get('nombre').touched}"  placeholder="Nombre" formControlName="nombre">
                  <span class="icon is-small" *ngIf="entrada.get('nombre').hasError('required') && entrada.get('nombre').touched">
                    <i class="fa fa-warning"></i>
                  </span>
                  <span class="help is-danger" *ngIf="entrada.get('nombre').hasError('required') && entrada.get('nombre').touched">Este campo es requerido.</span>
                </p>
                <p class="control is-expanded has-icon has-icon-right">
                  <input class="input" type="text" placeholder="Apellidos" [ngClass]="{'is-danger': entrada.get('apellidos').hasError('required') && entrada.get('apellidos').touched}" formControlName="apellidos">
                  <span class="icon is-small" *ngIf="entrada.get('apellidos').hasError('required') && entrada.get('apellidos').touched">
                    <i class="fa fa-warning"></i>
                  </span>
                  <span class="help is-danger" *ngIf="entrada.get('apellidos').hasError('required') && entrada.get('apellidos').touched">Este campo es requerido.</span>
                </p>
              </div>
             
              <h2 class="subtitle">Datos de la cuenta</h2>
              <p class="control has-icon has-icon-right">
                <input type="text" class="input" placeholder="Usuario" (ngModelChange)="entradaRepetido = false; entradaInvalido = false" [ngClass]="{'is-danger': (entrada.get('id').hasError('required') || entradaRepetido || entradaInvalido) && entrada.get('id').touched}" formControlName="id">
                <span class="icon is-small" *ngIf="(entrada.get('id').hasError('required') || entradaRepetido || entradaInvalido) && entrada.get('id').touched">
                    <i class="fa fa-warning"></i>
                </span>
                <span class="help is-danger" *ngIf="entrada.get('id').hasError('required') && entrada.get('id').touched">Este campo es requerido.</span>
                <span class="help is-danger" *ngIf="entradaRepetido && entrada.get('id').touched">Este entrada ya fue utilizado.</span>
                <span class="help is-danger" *ngIf="entradaInvalido && entrada.get('id').touched">El entrada debe tener un formato de <b>email</b> válido.</span>
              </p>
              <p class="control" *ngIf="mostrarCambiarPassword">
                  <label class="checkbox">
                    <input type="checkbox" formControlName="cambiarPassword" (click)="toggleCambiarPassword()">
                    Cambiar contraseña
                  </label>
                </p>
              <div class="control is-grouped">
                
                <p class="control is-expanded has-icon has-icon-right">
                  <input class="input" type="password" placeholder="Contraseña" [ngClass]="{'is-danger': (entrada.get('password').hasError('required') || (entrada.get('password').value != entrada.get('confirmarPassword').value && entrada.get('confirmarPassword').touched)) && entrada.get('password').touched}" formControlName="password">
                  <span class="icon is-small" *ngIf="(entrada.get('password').hasError('required') || (entrada.get('password').value != entrada.get('confirmarPassword').value && entrada.get('confirmarPassword').touched)) && entrada.get('password').touched">
                    <i class="fa fa-warning"></i>
                  </span>
                  <span class="help is-danger" *ngIf="entrada.get('password').hasError('required') && entrada.get('password').touched">Este campo es requerido.</span>
                  <span class="help is-danger" *ngIf="(entrada.get('password').value != entrada.get('confirmarPassword').value && entrada.get('confirmarPassword').touched) && entrada.get('password').touched">Las contraseñas no coinciden.</span>
                </p>
                <p class="control is-expanded has-icon has-icon-right">
                  <input class="input" type="password" placeholder="Confirmar contraseña" [ngClass]="{'is-danger': entrada.get('confirmarPassword').hasError('required') && entrada.get('confirmarPassword').touched}" formControlName="confirmarPassword">
                  <span class="icon is-small" *ngIf="entrada.get('confirmarPassword').hasError('required') && entrada.get('confirmarPassword').touched">
                    <i class="fa fa-warning"></i>
                  </span>
                  <span class="help is-danger" *ngIf="entrada.get('confirmarPassword').hasError('required') && entrada.get('confirmarPassword').touched">Este campo es requerido.</span>
                </p>
                
              </div>

              <h2 class="subtitle">Roles</h2>
              <div class="control" [ngClass]="{'is-loading': cargandoRoles}">
 
                  <select  name="roles" formControlName="roles" multiple class="bulma-select-multiple" [ngClass]="{'is-warning': roles?.length ==0 }">
                    <option *ngFor="let item of roles" value="{{item.id}}">{{ item.nombre }}</option>
                  </select>
                  <span class="help is-danger" *ngIf="entrada.get('roles').hasError('required') && entrada.get('roles').touched">Debe elegir por lo menos un rol.</span>
                  <span class="help " *ngIf="roles?.length == 0"><b>La lista de roles está vacía.</b> <a (click)="cargarRoles()"><span class="icon is-small"><i class="fa fa-refresh"></i></span> <span>Actualizar</span></a></span>
              </div>
              <h2 class="subtitle">Avatar</h2>
              <p class="control">
                
                <label class="radio" [ngClass]="{'is-disabled': cargando}">
                  <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-male" >
                  <figure class="image is-64x64" >
                    <img src="assets/avatar-circled-user-male.svg" alt="Avatar hombre">
                  </figure>
                </label>
                <label class="radio" [ngClass]="{'is-disabled': cargando}">
                  <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-female"  >
                  <figure class="image is-64x64">
                    <img src="assets/avatar-circled-user-female.svg" alt="Avatar mujer">
                  </figure>
                </label>
                <label class="radio" [ngClass]="{'is-disabled': cargando}">
                  <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-male-skin-type-6" >
                  <figure class="image is-64x64">
                    <img src="assets/avatar-circled-user-male-skin-type-6.svg" alt="Avatar hombre piel tipo 6">
                  </figure>
                </label>
                <label class="radio" [ngClass]="{'is-disabled': cargando}">
                  <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-user-female-skin-type-6" >
                  <figure class="image is-64x64">
                    <img src="assets/avatar-circled-user-female-skin-type-6.svg" alt="Avatar mujer piel tipo 6">
                  </figure>
                </label>

                <label class="radio" [ngClass]="{'is-disabled': cargando}">
                  <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-collaborator-male" >
                  <figure class="image is-64x64" >
                    <img src="assets/avatar-circled-collaborator-male.svg" alt="Avatar hombre">
                  </figure>
                </label>
                
                <label class="radio" [ngClass]="{'is-disabled': cargando}">
                  <input type="radio" name="avatar" formControlName="avatar" value="avatar-nurse" >
                  <figure class="image is-64x64">
                    <img src="assets/avatar-nurse.svg" alt="Avatar enfermera">
                  </figure>
                </label>
                <label class="radio" [ngClass]="{'is-disabled': cargando}">
                  <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-doctor-male" >
                  <figure class="image is-64x64">
                    <img src="assets/avatar-circled-doctor-male.svg" alt="Avatar doctor">
                  </figure>
                </label>

                <label class="radio" [ngClass]="{'is-disabled': cargando}">
                  <input type="radio" name="avatar" formControlName="avatar" value="avatar-circled-doctor-female" >
                  <figure class="image is-64x64">
                    <img src="assets/avatar-circled-doctor-female.svg" alt="Avatar doctora">
                  </figure>
                </label>

                <label class="radio" [ngClass]="{'is-disabled': cargando}">
                  <input type="radio" name="avatar" formControlName="avatar" value="avatar-cat" >
                  <figure class="image is-64x64">
                    <img src="assets/avatar-cat.svg" alt="Avatar de gato">
                  </figure>
                </label>

                
              </p>
              <br><br>
              <div class="control is-grouped">
                <p class="control">
                  <button class="button is-primary" type="submit" [ngClass]="{'is-loading': cargando}" [disabled]="entrada.invalid" >Guardar</button>
                </p>
                <p class="control">
                  <button class="button is-danger" type="button" [ngClass]="{'is-loading': cargando}" [disabled]="entrada.invalid" >Eliminar entrada</button>
                </p>
                <p class="control">
                  <a class="button is-white" (click)="regresar()" >Regresar</a>
                </p>
              </div>
          </form>